(function ($hx_exports) { "use strict";
var $hxClasses = {};
function $extend(from, fields) {
	function Inherit() {} Inherit.prototype = from; var proto = new Inherit();
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
var EReg = function(r,opt) {
	opt = opt.split("u").join("");
	this.r = new RegExp(r,opt);
};
$hxClasses["EReg"] = EReg;
EReg.__name__ = ["EReg"];
EReg.prototype = {
	match: function(s) {
		if(this.r.global) this.r.lastIndex = 0;
		this.r.m = this.r.exec(s);
		this.r.s = s;
		return this.r.m != null;
	}
	,matched: function(n) {
		if(this.r.m != null && n >= 0 && n < this.r.m.length) return this.r.m[n]; else throw new js__$Boot_HaxeError("EReg::matched");
	}
	,matchedPos: function() {
		if(this.r.m == null) throw new js__$Boot_HaxeError("No string matched");
		return { pos : this.r.m.index, len : this.r.m[0].length};
	}
	,replace: function(s,by) {
		return s.replace(this.r,by);
	}
	,__class__: EReg
};
var HxOverrides = function() { };
$hxClasses["HxOverrides"] = HxOverrides;
HxOverrides.__name__ = ["HxOverrides"];
HxOverrides.strDate = function(s) {
	var _g = s.length;
	switch(_g) {
	case 8:
		var k = s.split(":");
		var d = new Date();
		d.setTime(0);
		d.setUTCHours(k[0]);
		d.setUTCMinutes(k[1]);
		d.setUTCSeconds(k[2]);
		return d;
	case 10:
		var k1 = s.split("-");
		return new Date(k1[0],k1[1] - 1,k1[2],0,0,0);
	case 19:
		var k2 = s.split(" ");
		var y = k2[0].split("-");
		var t = k2[1].split(":");
		return new Date(y[0],y[1] - 1,y[2],t[0],t[1],t[2]);
	default:
		throw new js__$Boot_HaxeError("Invalid date format : " + s);
	}
};
HxOverrides.cca = function(s,index) {
	var x = s.charCodeAt(index);
	if(x != x) return undefined;
	return x;
};
HxOverrides.substr = function(s,pos,len) {
	if(pos != null && pos != 0 && len != null && len < 0) return "";
	if(len == null) len = s.length;
	if(pos < 0) {
		pos = s.length + pos;
		if(pos < 0) pos = 0;
	} else if(len < 0) len = s.length + len - pos;
	return s.substr(pos,len);
};
HxOverrides.remove = function(a,obj) {
	var i = a.indexOf(obj);
	if(i == -1) return false;
	a.splice(i,1);
	return true;
};
HxOverrides.iter = function(a) {
	return { cur : 0, arr : a, hasNext : function() {
		return this.cur < this.arr.length;
	}, next : function() {
		return this.arr[this.cur++];
	}};
};
var Lambda = function() { };
$hxClasses["Lambda"] = Lambda;
Lambda.__name__ = ["Lambda"];
Lambda.array = function(it) {
	var a = [];
	var $it0 = $iterator(it)();
	while( $it0.hasNext() ) {
		var i = $it0.next();
		a.push(i);
	}
	return a;
};
Lambda.count = function(it,pred) {
	var n = 0;
	if(pred == null) {
		var $it0 = $iterator(it)();
		while( $it0.hasNext() ) {
			var _ = $it0.next();
			n++;
		}
	} else {
		var $it1 = $iterator(it)();
		while( $it1.hasNext() ) {
			var x = $it1.next();
			if(pred(x)) n++;
		}
	}
	return n;
};
var List = function() {
	this.length = 0;
};
$hxClasses["List"] = List;
List.__name__ = ["List"];
List.prototype = {
	add: function(item) {
		var x = [item];
		if(this.h == null) this.h = x; else this.q[1] = x;
		this.q = x;
		this.length++;
	}
	,iterator: function() {
		return new _$List_ListIterator(this.h);
	}
	,__class__: List
};
var _$List_ListIterator = function(head) {
	this.head = head;
	this.val = null;
};
$hxClasses["_List.ListIterator"] = _$List_ListIterator;
_$List_ListIterator.__name__ = ["_List","ListIterator"];
_$List_ListIterator.prototype = {
	hasNext: function() {
		return this.head != null;
	}
	,next: function() {
		this.val = this.head[0];
		this.head = this.head[1];
		return this.val;
	}
	,__class__: _$List_ListIterator
};
Math.__name__ = ["Math"];
var Reflect = function() { };
$hxClasses["Reflect"] = Reflect;
Reflect.__name__ = ["Reflect"];
Reflect.hasField = function(o,field) {
	return Object.prototype.hasOwnProperty.call(o,field);
};
Reflect.field = function(o,field) {
	try {
		return o[field];
	} catch( e ) {
		if (e instanceof js__$Boot_HaxeError) e = e.val;
		return null;
	}
};
Reflect.setField = function(o,field,value) {
	o[field] = value;
};
Reflect.getProperty = function(o,field) {
	var tmp;
	if(o == null) return null; else if(o.__properties__ && (tmp = o.__properties__["get_" + field])) return o[tmp](); else return o[field];
};
Reflect.callMethod = function(o,func,args) {
	return func.apply(o,args);
};
Reflect.fields = function(o) {
	var a = [];
	if(o != null) {
		var hasOwnProperty = Object.prototype.hasOwnProperty;
		for( var f in o ) {
		if(f != "__id__" && f != "hx__closures__" && hasOwnProperty.call(o,f)) a.push(f);
		}
	}
	return a;
};
Reflect.isFunction = function(f) {
	return typeof(f) == "function" && !(js_Boot.isClass(f) || js_Boot.isEnum(f));
};
Reflect.compare = function(a,b) {
	if(a == b) return 0; else if(a > b) return 1; else return -1;
};
Reflect.isEnumValue = function(v) {
	return v != null && v.__enum__ != null;
};
Reflect.deleteField = function(o,field) {
	if(!Reflect.hasField(o,field)) return false;
	delete(o[field]);
	return true;
};
Reflect.copy = function(o) {
	var o2 = { };
	var _g = 0;
	var _g1 = Reflect.fields(o);
	while(_g < _g1.length) {
		var f = _g1[_g];
		++_g;
		Reflect.setField(o2,f,Reflect.field(o,f));
	}
	return o2;
};
var Std = function() { };
$hxClasses["Std"] = Std;
Std.__name__ = ["Std"];
Std["is"] = function(v,t) {
	return js_Boot.__instanceof(v,t);
};
Std.instance = function(value,c) {
	if((value instanceof c)) return value; else return null;
};
Std.string = function(s) {
	return js_Boot.__string_rec(s,"");
};
Std["int"] = function(x) {
	return x | 0;
};
Std.parseInt = function(x) {
	var v = parseInt(x,10);
	if(v == 0 && (HxOverrides.cca(x,1) == 120 || HxOverrides.cca(x,1) == 88)) v = parseInt(x);
	if(isNaN(v)) return null;
	return v;
};
Std.parseFloat = function(x) {
	return parseFloat(x);
};
Std.random = function(x) {
	if(x <= 0) return 0; else return Math.floor(Math.random() * x);
};
var StringBuf = function() {
	this.b = "";
};
$hxClasses["StringBuf"] = StringBuf;
StringBuf.__name__ = ["StringBuf"];
StringBuf.prototype = {
	add: function(x) {
		this.b += Std.string(x);
	}
	,addChar: function(c) {
		this.b += String.fromCharCode(c);
	}
	,addSub: function(s,pos,len) {
		if(len == null) this.b += HxOverrides.substr(s,pos,null); else this.b += HxOverrides.substr(s,pos,len);
	}
	,toString: function() {
		return this.b;
	}
	,__class__: StringBuf
};
var StringTools = function() { };
$hxClasses["StringTools"] = StringTools;
StringTools.__name__ = ["StringTools"];
StringTools.urlEncode = function(s) {
	return encodeURIComponent(s);
};
StringTools.urlDecode = function(s) {
	return decodeURIComponent(s.split("+").join(" "));
};
StringTools.htmlEscape = function(s,quotes) {
	s = s.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");
	if(quotes) return s.split("\"").join("&quot;").split("'").join("&#039;"); else return s;
};
StringTools.isSpace = function(s,pos) {
	var c = HxOverrides.cca(s,pos);
	return c > 8 && c < 14 || c == 32;
};
StringTools.ltrim = function(s) {
	var l = s.length;
	var r = 0;
	while(r < l && StringTools.isSpace(s,r)) r++;
	if(r > 0) return HxOverrides.substr(s,r,l - r); else return s;
};
StringTools.rtrim = function(s) {
	var l = s.length;
	var r = 0;
	while(r < l && StringTools.isSpace(s,l - r - 1)) r++;
	if(r > 0) return HxOverrides.substr(s,0,l - r); else return s;
};
StringTools.trim = function(s) {
	return StringTools.ltrim(StringTools.rtrim(s));
};
StringTools.replace = function(s,sub,by) {
	return s.split(sub).join(by);
};
StringTools.fastCodeAt = function(s,index) {
	return s.charCodeAt(index);
};
StringTools.isEof = function(c) {
	return c != c;
};
var ValueType = $hxClasses["ValueType"] = { __ename__ : ["ValueType"], __constructs__ : ["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"] };
ValueType.TNull = ["TNull",0];
ValueType.TNull.__enum__ = ValueType;
ValueType.TInt = ["TInt",1];
ValueType.TInt.__enum__ = ValueType;
ValueType.TFloat = ["TFloat",2];
ValueType.TFloat.__enum__ = ValueType;
ValueType.TBool = ["TBool",3];
ValueType.TBool.__enum__ = ValueType;
ValueType.TObject = ["TObject",4];
ValueType.TObject.__enum__ = ValueType;
ValueType.TFunction = ["TFunction",5];
ValueType.TFunction.__enum__ = ValueType;
ValueType.TClass = function(c) { var $x = ["TClass",6,c]; $x.__enum__ = ValueType; return $x; };
ValueType.TEnum = function(e) { var $x = ["TEnum",7,e]; $x.__enum__ = ValueType; return $x; };
ValueType.TUnknown = ["TUnknown",8];
ValueType.TUnknown.__enum__ = ValueType;
ValueType.__empty_constructs__ = [ValueType.TNull,ValueType.TInt,ValueType.TFloat,ValueType.TBool,ValueType.TObject,ValueType.TFunction,ValueType.TUnknown];
var Type = function() { };
$hxClasses["Type"] = Type;
Type.__name__ = ["Type"];
Type.getClass = function(o) {
	if(o == null) return null; else return js_Boot.getClass(o);
};
Type.getClassName = function(c) {
	var a = c.__name__;
	if(a == null) return null;
	return a.join(".");
};
Type.getEnumName = function(e) {
	var a = e.__ename__;
	return a.join(".");
};
Type.resolveClass = function(name) {
	var cl = $hxClasses[name];
	if(cl == null || !js_Boot.isClass(cl)) return null;
	return cl;
};
Type.resolveEnum = function(name) {
	var e = $hxClasses[name];
	if(e == null || !js_Boot.isEnum(e)) return null;
	return e;
};
Type.createInstance = function(cl,args) {
	var _g = args.length;
	switch(_g) {
	case 0:
		return new cl();
	case 1:
		return new cl(args[0]);
	case 2:
		return new cl(args[0],args[1]);
	case 3:
		return new cl(args[0],args[1],args[2]);
	case 4:
		return new cl(args[0],args[1],args[2],args[3]);
	case 5:
		return new cl(args[0],args[1],args[2],args[3],args[4]);
	case 6:
		return new cl(args[0],args[1],args[2],args[3],args[4],args[5]);
	case 7:
		return new cl(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);
	case 8:
		return new cl(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7]);
	default:
		throw new js__$Boot_HaxeError("Too many arguments");
	}
	return null;
};
Type.createEmptyInstance = function(cl) {
	function empty() {}; empty.prototype = cl.prototype;
	return new empty();
};
Type.createEnum = function(e,constr,params) {
	var f = Reflect.field(e,constr);
	if(f == null) throw new js__$Boot_HaxeError("No such constructor " + constr);
	if(Reflect.isFunction(f)) {
		if(params == null) throw new js__$Boot_HaxeError("Constructor " + constr + " need parameters");
		return Reflect.callMethod(e,f,params);
	}
	if(params != null && params.length != 0) throw new js__$Boot_HaxeError("Constructor " + constr + " does not need parameters");
	return f;
};
Type.getEnumConstructs = function(e) {
	var a = e.__constructs__;
	return a.slice();
};
Type["typeof"] = function(v) {
	var _g = typeof(v);
	switch(_g) {
	case "boolean":
		return ValueType.TBool;
	case "string":
		return ValueType.TClass(String);
	case "number":
		if(Math.ceil(v) == v % 2147483648.0) return ValueType.TInt;
		return ValueType.TFloat;
	case "object":
		if(v == null) return ValueType.TNull;
		var e = v.__enum__;
		if(e != null) return ValueType.TEnum(e);
		var c = js_Boot.getClass(v);
		if(c != null) return ValueType.TClass(c);
		return ValueType.TObject;
	case "function":
		if(js_Boot.isClass(v) || js_Boot.isEnum(v)) return ValueType.TObject;
		return ValueType.TFunction;
	case "undefined":
		return ValueType.TNull;
	default:
		return ValueType.TUnknown;
	}
};
Type.enumConstructor = function(e) {
	return e[0];
};
Type.enumParameters = function(e) {
	return e.slice(2);
};
Type.enumIndex = function(e) {
	return e[1];
};
Type.allEnums = function(e) {
	return e.__empty_constructs__;
};
var Xml = function(nodeType) {
	this.nodeType = nodeType;
	this.children = [];
	this.attributeMap = new haxe_ds_StringMap();
};
$hxClasses["Xml"] = Xml;
Xml.__name__ = ["Xml"];
Xml.parse = function(str) {
	return haxe_xml_Parser.parse(str);
};
Xml.createElement = function(name) {
	var xml = new Xml(Xml.Element);
	xml.set_nodeName(name);
	return xml;
};
Xml.createPCData = function(data) {
	var xml = new Xml(Xml.PCData);
	xml.set_nodeValue(data);
	return xml;
};
Xml.createCData = function(data) {
	var xml = new Xml(Xml.CData);
	xml.set_nodeValue(data);
	return xml;
};
Xml.createComment = function(data) {
	var xml = new Xml(Xml.Comment);
	xml.set_nodeValue(data);
	return xml;
};
Xml.createDocType = function(data) {
	var xml = new Xml(Xml.DocType);
	xml.set_nodeValue(data);
	return xml;
};
Xml.createProcessingInstruction = function(data) {
	var xml = new Xml(Xml.ProcessingInstruction);
	xml.set_nodeValue(data);
	return xml;
};
Xml.createDocument = function() {
	return new Xml(Xml.Document);
};
Xml.prototype = {
	get_nodeName: function() {
		if(this.nodeType != Xml.Element) throw new js__$Boot_HaxeError("Bad node type, expected Element but found " + this.nodeType);
		return this.nodeName;
	}
	,set_nodeName: function(v) {
		if(this.nodeType != Xml.Element) throw new js__$Boot_HaxeError("Bad node type, expected Element but found " + this.nodeType);
		return this.nodeName = v;
	}
	,get_nodeValue: function() {
		if(this.nodeType == Xml.Document || this.nodeType == Xml.Element) throw new js__$Boot_HaxeError("Bad node type, unexpected " + this.nodeType);
		return this.nodeValue;
	}
	,set_nodeValue: function(v) {
		if(this.nodeType == Xml.Document || this.nodeType == Xml.Element) throw new js__$Boot_HaxeError("Bad node type, unexpected " + this.nodeType);
		return this.nodeValue = v;
	}
	,get: function(att) {
		if(this.nodeType != Xml.Element) throw new js__$Boot_HaxeError("Bad node type, expected Element but found " + this.nodeType);
		return this.attributeMap.get(att);
	}
	,set: function(att,value) {
		if(this.nodeType != Xml.Element) throw new js__$Boot_HaxeError("Bad node type, expected Element but found " + this.nodeType);
		this.attributeMap.set(att,value);
	}
	,remove: function(att) {
		if(this.nodeType != Xml.Element) throw new js__$Boot_HaxeError("Bad node type, expected Element but found " + this.nodeType);
		this.attributeMap.remove(att);
	}
	,exists: function(att) {
		if(this.nodeType != Xml.Element) throw new js__$Boot_HaxeError("Bad node type, expected Element but found " + this.nodeType);
		return this.attributeMap.exists(att);
	}
	,attributes: function() {
		if(this.nodeType != Xml.Element) throw new js__$Boot_HaxeError("Bad node type, expected Element but found " + this.nodeType);
		return this.attributeMap.keys();
	}
	,iterator: function() {
		this.ensureElementType();
		return HxOverrides.iter(this.children);
	}
	,elements: function() {
		this.ensureElementType();
		var ret;
		var _g = [];
		var _g1 = 0;
		var _g2 = this.children;
		while(_g1 < _g2.length) {
			var child = _g2[_g1];
			++_g1;
			if(child.nodeType == Xml.Element) _g.push(child);
		}
		ret = _g;
		return HxOverrides.iter(ret);
	}
	,elementsNamed: function(name) {
		this.ensureElementType();
		var ret;
		var _g = [];
		var _g1 = 0;
		var _g2 = this.children;
		while(_g1 < _g2.length) {
			var child = _g2[_g1];
			++_g1;
			if(child.nodeType == Xml.Element && child.get_nodeName() == name) _g.push(child);
		}
		ret = _g;
		return HxOverrides.iter(ret);
	}
	,firstChild: function() {
		this.ensureElementType();
		return this.children[0];
	}
	,firstElement: function() {
		this.ensureElementType();
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) {
			var child = _g1[_g];
			++_g;
			if(child.nodeType == Xml.Element) return child;
		}
		return null;
	}
	,addChild: function(x) {
		this.ensureElementType();
		if(x.parent != null) x.parent.removeChild(x);
		this.children.push(x);
		x.parent = this;
	}
	,removeChild: function(x) {
		this.ensureElementType();
		if(HxOverrides.remove(this.children,x)) {
			x.parent = null;
			return true;
		}
		return false;
	}
	,insertChild: function(x,pos) {
		this.ensureElementType();
		if(x.parent != null) HxOverrides.remove(x.parent.children,x);
		this.children.splice(pos,0,x);
		x.parent = this;
	}
	,toString: function() {
		return haxe_xml_Printer.print(this);
	}
	,ensureElementType: function() {
		if(this.nodeType != Xml.Document && this.nodeType != Xml.Element) throw new js__$Boot_HaxeError("Bad node type, expected Element or Document but found " + this.nodeType);
	}
	,__class__: Xml
	,__properties__: {set_nodeValue:"set_nodeValue",get_nodeValue:"get_nodeValue",set_nodeName:"set_nodeName",get_nodeName:"get_nodeName"}
};
var flambe_util_Disposable = function() { };
$hxClasses["flambe.util.Disposable"] = flambe_util_Disposable;
flambe_util_Disposable.__name__ = ["flambe","util","Disposable"];
flambe_util_Disposable.prototype = {
	__class__: flambe_util_Disposable
};
var flambe_Component = function() {
	this._flags = 0;
	this.next = null;
	this.owner = null;
};
$hxClasses["flambe.Component"] = flambe_Component;
flambe_Component.__name__ = ["flambe","Component"];
flambe_Component.__interfaces__ = [flambe_util_Disposable];
flambe_Component.prototype = {
	onAdded: function() {
	}
	,onRemoved: function() {
	}
	,onStart: function() {
	}
	,onStop: function() {
	}
	,onUpdate: function(dt) {
	}
	,dispose: function() {
		if(this.owner != null) this.owner.remove(this);
	}
	,get_name: function() {
		return null;
	}
	,__class__: flambe_Component
	,__properties__: {get_name:"get_name"}
};
var flambe_Entity = function() {
	this.zOrder = 0;
	this.firstComponent = null;
	this.next = null;
	this.firstChild = null;
	this.parent = null;
	this._compMap = { };
};
$hxClasses["flambe.Entity"] = flambe_Entity;
flambe_Entity.__name__ = ["flambe","Entity"];
flambe_Entity.__interfaces__ = [flambe_util_Disposable];
flambe_Entity.prototype = {
	add: function(component) {
		if(component.owner != null) component.owner.remove(component);
		var name = component.get_name();
		var prev = this.getComponent(name);
		if(prev != null) this.remove(prev);
		this._compMap[name] = component;
		var tail = null;
		var p = this.firstComponent;
		while(p != null) {
			tail = p;
			p = p.next;
		}
		if(tail != null) tail.next = component; else this.firstComponent = component;
		component.owner = this;
		component.next = null;
		component.onAdded();
		return this;
	}
	,remove: function(component) {
		var prev = null;
		var p = this.firstComponent;
		while(p != null) {
			var next = p.next;
			if(p == component) {
				if(prev == null) this.firstComponent = next; else {
					prev.owner = this;
					prev.next = next;
				}
				delete(this._compMap[p.get_name()]);
				if(flambe_util_BitSets.contains(p._flags,1)) {
					p.onStop();
					p._flags = flambe_util_BitSets.remove(p._flags,1);
				}
				p.onRemoved();
				p.owner = null;
				p.next = null;
				return true;
			}
			prev = p;
			p = next;
		}
		return false;
	}
	,getComponent: function(name) {
		return this._compMap[name];
	}
	,addChild: function(entity,append,zOrder) {
		if(append == null) append = true;
		if(entity.parent != null) entity.parent.removeChild(entity);
		entity.parent = this;
		if(append) {
			var tail = null;
			var p = this.firstChild;
			while(p != null) {
				tail = p;
				p = p.next;
			}
			if(tail != null) {
				if(zOrder == null) zOrder = tail.zOrder;
				if(tail.zOrder <= zOrder) tail.next = entity; else {
					var p1 = this.firstChild;
					var pre = null;
					while(p1 != null) if(p1.zOrder > zOrder) {
						if(pre != null) {
							pre.next = entity;
							entity.next = p1;
						} else {
							entity.next = this.firstChild;
							this.firstChild = entity;
						}
						break;
					} else {
						pre = p1;
						p1 = p1.next;
					}
				}
			} else {
				this.firstChild = entity;
				if(zOrder == null) zOrder = 0;
			}
		} else {
			if(this.firstChild == null) zOrder = 0; else zOrder = this.firstChild.zOrder - 1;
			entity.next = this.firstChild;
			this.firstChild = entity;
		}
		entity.zOrder = zOrder;
		return this;
	}
	,setZOrder: function(z) {
		if(this.zOrder == z) return; else {
			this.zOrder = z;
			this.parent.addChild(this,true,this.zOrder);
		}
	}
	,removeChild: function(entity) {
		var prev = null;
		var p = this.firstChild;
		while(p != null) {
			var next = p.next;
			if(p == entity) {
				if(prev == null) this.firstChild = next; else prev.next = next;
				p.parent = null;
				p.next = null;
				return;
			}
			prev = p;
			p = next;
		}
	}
	,disposeChildren: function() {
		while(this.firstChild != null) this.firstChild.dispose();
	}
	,dispose: function() {
		if(this.parent != null) this.parent.removeChild(this);
		while(this.firstComponent != null) this.firstComponent.dispose();
		this.disposeChildren();
	}
	,toString: function() {
		return this.toStringImpl("");
	}
	,toStringImpl: function(indent) {
		var output = "";
		var p = this.firstComponent;
		while(p != null) {
			output += p.get_name();
			if(p.next != null) output += ", ";
			p = p.next;
		}
		output += "\n";
		var u2514 = String.fromCharCode(9492);
		var u241c = String.fromCharCode(9500);
		var u2500 = String.fromCharCode(9472);
		var u2502 = String.fromCharCode(9474);
		var p1 = this.firstChild;
		while(p1 != null) {
			var last = p1.next == null;
			output += indent + (last?u2514:u241c) + u2500 + u2500 + " ";
			output += p1.toStringImpl(indent + (last?" ":u2502) + "   ");
			p1 = p1.next;
		}
		return output;
	}
	,__class__: flambe_Entity
};
var flambe_util_PackageLog = function() { };
$hxClasses["flambe.util.PackageLog"] = flambe_util_PackageLog;
flambe_util_PackageLog.__name__ = ["flambe","util","PackageLog"];
var flambe_platform_Platform = function() { };
$hxClasses["flambe.platform.Platform"] = flambe_platform_Platform;
flambe_platform_Platform.__name__ = ["flambe","platform","Platform"];
flambe_platform_Platform.prototype = {
	__class__: flambe_platform_Platform
};
var flambe_platform_html_HtmlPlatform = function() {
};
$hxClasses["flambe.platform.html.HtmlPlatform"] = flambe_platform_html_HtmlPlatform;
flambe_platform_html_HtmlPlatform.__name__ = ["flambe","platform","html","HtmlPlatform"];
flambe_platform_html_HtmlPlatform.__interfaces__ = [flambe_platform_Platform];
flambe_platform_html_HtmlPlatform.prototype = {
	init: function() {
		var _g = this;
		flambe_platform_html_HtmlUtil.fixAndroidMath();
		var canvas = null;
		try {
			canvas = js_Browser.get_window().flambe.canvas;
		} catch( error ) {
			if (error instanceof js__$Boot_HaxeError) error = error.val;
		}
		flambe_util_Assert.that(canvas != null,"Could not find a Flambe canvas! Are you embedding with flambe.js?");
		canvas.setAttribute("tabindex","0");
		canvas.style.outlineStyle = "none";
		canvas.style.webkitTapHighlightColor = "transparent";
		this._stage = new flambe_platform_html_HtmlStage(canvas);
		this._pointer = new flambe_platform_BasicPointer();
		this._mouse = new flambe_platform_html_HtmlMouse(this._pointer,canvas);
		this._renderer = this.createRenderer(canvas);
		this.mainLoop = new flambe_platform_MainLoop();
		this.musicPlaying = false;
		this._canvas = canvas;
		this._container = canvas.parentElement;
		this._container.style.overflow = "hidden";
		this._container.style.position = "relative";
		this._container.style.msTouchAction = "none";
		var lastTouchTime = 0;
		var onMouse = function(event) {
			if(event.timeStamp - lastTouchTime < 1000) return;
			var bounds = canvas.getBoundingClientRect();
			var x = _g.getX(event,bounds);
			var y = _g.getY(event,bounds);
			var _g1 = event.type;
			switch(_g1) {
			case "mousedown":
				if(event.target == canvas) {
					event.preventDefault();
					_g._mouse.submitDown(x,y,event.button);
					canvas.focus();
				}
				break;
			case "mousemove":
				_g._mouse.submitMove(x,y);
				break;
			case "mouseup":
				_g._mouse.submitUp(x,y,event.button);
				break;
			case "mousewheel":case "DOMMouseScroll":
				var velocity;
				if(event.type == "mousewheel") velocity = event.wheelDelta / 40; else velocity = -event.detail;
				if(_g._mouse.submitScroll(x,y,velocity)) event.preventDefault();
				break;
			}
		};
		js_Browser.get_window().addEventListener("mousedown",onMouse,false);
		js_Browser.get_window().addEventListener("mousemove",onMouse,false);
		js_Browser.get_window().addEventListener("mouseup",onMouse,false);
		canvas.addEventListener("mousewheel",onMouse,false);
		canvas.addEventListener("DOMMouseScroll",onMouse,false);
		canvas.addEventListener("contextmenu",function(event1) {
			event1.preventDefault();
		},false);
		var standardTouch = typeof(js_Browser.get_window().ontouchstart) != "undefined";
		var msTouch = 'msMaxTouchPoints' in window.navigator && (window.navigator.msMaxTouchPoints > 1);
		if(standardTouch || msTouch) {
			var basicTouch = new flambe_platform_BasicTouch(this._pointer,standardTouch?4:js_Browser.get_navigator().msMaxTouchPoints);
			this._touch = basicTouch;
			var onTouch = function(event2) {
				var changedTouches;
				if(standardTouch) changedTouches = event2.changedTouches; else changedTouches = [event2];
				var bounds1 = event2.target.getBoundingClientRect();
				lastTouchTime = event2.timeStamp;
				var _g2 = event2.type;
				switch(_g2) {
				case "touchstart":case "MSPointerDown":case "pointerdown":
					event2.preventDefault();
					if(flambe_platform_html_HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER) flambe_platform_html_HtmlUtil.hideMobileBrowser();
					var _g11 = 0;
					while(_g11 < changedTouches.length) {
						var touch = changedTouches[_g11];
						++_g11;
						var x1 = _g.getX(touch,bounds1);
						var y1 = _g.getY(touch,bounds1);
						var id = Std["int"](standardTouch?touch.identifier:touch.pointerId);
						basicTouch.submitDown(id,x1,y1);
					}
					break;
				case "touchmove":case "MSPointerMove":case "pointermove":
					event2.preventDefault();
					var _g12 = 0;
					while(_g12 < changedTouches.length) {
						var touch1 = changedTouches[_g12];
						++_g12;
						var x2 = _g.getX(touch1,bounds1);
						var y2 = _g.getY(touch1,bounds1);
						var id1 = Std["int"](standardTouch?touch1.identifier:touch1.pointerId);
						basicTouch.submitMove(id1,x2,y2);
					}
					break;
				case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":
					var _g13 = 0;
					while(_g13 < changedTouches.length) {
						var touch2 = changedTouches[_g13];
						++_g13;
						var x3 = _g.getX(touch2,bounds1);
						var y3 = _g.getY(touch2,bounds1);
						var id2 = Std["int"](standardTouch?touch2.identifier:touch2.pointerId);
						basicTouch.submitUp(id2,x3,y3);
					}
					break;
				}
			};
			if(standardTouch) {
				canvas.addEventListener("touchstart",onTouch,false);
				canvas.addEventListener("touchmove",onTouch,false);
				canvas.addEventListener("touchend",onTouch,false);
				canvas.addEventListener("touchcancel",onTouch,false);
			} else {
				canvas.addEventListener("MSPointerDown",onTouch,false);
				canvas.addEventListener("MSPointerMove",onTouch,false);
				canvas.addEventListener("MSPointerUp",onTouch,false);
			}
		} else this._touch = new flambe_platform_DummyTouch();
		var oldErrorHandler = js_Browser.get_window().onerror;
		js_Browser.get_window().onerror = function(message,url,line) {
			flambe_System.uncaughtError.emit(message);
			if(oldErrorHandler != null) return oldErrorHandler(message,url,line); else return false;
		};
		var hiddenApi = flambe_platform_html_HtmlUtil.loadExtension("hidden",js_Browser.get_document());
		if(hiddenApi.value != null) {
			var onVisibilityChanged = function(_) {
				flambe_System.hidden.set__(Reflect.field(js_Browser.get_document(),hiddenApi.field));
			};
			onVisibilityChanged(null);
			js_Browser.get_document().addEventListener(hiddenApi.prefix + "visibilitychange",onVisibilityChanged,false);
		} else {
			var onPageTransitionChange = function(event3) {
				flambe_System.hidden.set__(event3.type == "pagehide");
			};
			js_Browser.get_window().addEventListener("pageshow",onPageTransitionChange,false);
			js_Browser.get_window().addEventListener("pagehide",onPageTransitionChange,false);
		}
		flambe_System.hidden.get_changed().connect(function(hidden,_1) {
			if(!hidden) _g._skipFrame = true;
		});
		this._skipFrame = false;
		this._lastUpdate = flambe_platform_html_HtmlUtil.now();
		var requestAnimationFrame = flambe_platform_html_HtmlUtil.loadExtension("requestAnimationFrame").value;
		if(requestAnimationFrame != null) {
			var performance = js_Browser.get_window().performance;
			var hasPerfNow = performance != null && flambe_platform_html_HtmlUtil.polyfill("now",performance);
			if(hasPerfNow) this._lastUpdate = performance.now(); else flambe_Log.warn("No monotonic timer support, falling back to the system date");
			var updateFrame = null;
			updateFrame = function(now) {
				_g.update(hasPerfNow?performance.now():now);
				requestAnimationFrame(updateFrame,canvas);
			};
			requestAnimationFrame(updateFrame,canvas);
		} else {
			flambe_Log.warn("No requestAnimationFrame support, falling back to setInterval");
			js_Browser.get_window().setInterval(function() {
				_g.update(flambe_platform_html_HtmlUtil.now());
			},16);
		}
		new flambe_platform_DebugLogic(this);
		if(flambe_platform_html_HtmlCatapultClient.canUse()) this._catapult = new flambe_platform_html_HtmlCatapultClient(); else this._catapult = null;
		flambe_Log.info("Initialized HTML platform",["renderer",this._renderer.get_type()]);
	}
	,loadAssetPack: function(manifest) {
		return new flambe_platform_html_HtmlAssetPackLoader(this,manifest).promise;
	}
	,getStage: function() {
		return this._stage;
	}
	,getStorage: function() {
		if(this._storage == null) {
			var localStorage = js_Browser.getLocalStorage();
			if(localStorage != null) this._storage = new flambe_platform_html_HtmlStorage(localStorage); else {
				flambe_Log.warn("localStorage is unavailable, falling back to unpersisted storage");
				this._storage = new flambe_platform_DummyStorage();
			}
		}
		return this._storage;
	}
	,createLogHandler: function(tag) {
		if(flambe_platform_html_HtmlLogHandler.isSupported()) return new flambe_platform_html_HtmlLogHandler(tag);
		return null;
	}
	,getTime: function() {
		return flambe_platform_html_HtmlUtil.now() / 1000;
	}
	,getCatapultClient: function() {
		return this._catapult;
	}
	,update: function(now) {
		var dt = (now - this._lastUpdate) / 1000;
		this._lastUpdate = now;
		if(flambe_System.hidden.get__()) {
			flambe_Log.warn("Time spend paused: " + dt);
			return;
		}
		if(this._skipFrame) {
			this._skipFrame = false;
			return;
		}
		this.mainLoop.update(dt);
		tools_spark_framework_platform_html_flambe2_$5_Subgraphics.onRender();
	}
	,getPointer: function() {
		return this._pointer;
	}
	,getMouse: function() {
		return this._mouse;
	}
	,getKeyboard: function() {
		var _g1 = this;
		if(this._keyboard == null) {
			this._keyboard = new flambe_platform_BasicKeyboard();
			var onKey = function(event) {
				var _g = event.type;
				switch(_g) {
				case "keydown":
					if(_g1._keyboard.submitDown(event.keyCode)) event.preventDefault();
					break;
				case "keyup":
					_g1._keyboard.submitUp(event.keyCode);
					break;
				}
			};
			this._canvas.addEventListener("keydown",onKey,false);
			this._canvas.addEventListener("keyup",onKey,false);
		}
		return this._keyboard;
	}
	,getExternal: function() {
		if(this._external == null) this._external = new flambe_platform_html_HtmlExternal();
		return this._external;
	}
	,getRenderer: function() {
		return this._renderer;
	}
	,getX: function(event,bounds) {
		return (event.clientX - bounds.left) * this._stage.get_width() / bounds.width;
	}
	,getY: function(event,bounds) {
		return (event.clientY - bounds.top) * this._stage.get_height() / bounds.height;
	}
	,createRenderer: function(canvas) {
		try {
			var gl = js_html__$CanvasElement_CanvasUtil.getContextWebGL(canvas,{ depth : false, failIfMajorPerformanceCaveat : true});
			if(gl != null) {
				if(flambe_platform_html_HtmlUtil.detectSlowDriver(gl)) flambe_Log.warn("Detected a slow WebGL driver, falling back to canvas"); else return new flambe_platform_html_WebGLRenderer(this._stage,gl);
			}
		} catch( _ ) {
			if (_ instanceof js__$Boot_HaxeError) _ = _.val;
		}
		return new flambe_platform_html_CanvasRenderer(canvas);
		flambe_Log.error("No renderer available!");
		return null;
	}
	,__class__: flambe_platform_html_HtmlPlatform
};
var flambe_util_Value = function(value,listener) {
	this._value = value;
	if(listener != null) this._changed = new flambe_util_Signal2(listener); else this._changed = null;
};
$hxClasses["flambe.util.Value"] = flambe_util_Value;
flambe_util_Value.__name__ = ["flambe","util","Value"];
flambe_util_Value.prototype = {
	watch: function(listener) {
		listener(this._value,this._value);
		return this.get_changed().connect(listener);
	}
	,get__: function() {
		return this._value;
	}
	,set__: function(newValue) {
		var oldValue = this._value;
		if(newValue != oldValue) {
			this._value = newValue;
			if(this._changed != null) this._changed.emit(newValue,oldValue);
		}
		return newValue;
	}
	,get_changed: function() {
		if(this._changed == null) this._changed = new flambe_util_Signal2();
		return this._changed;
	}
	,toString: function() {
		return "" + Std.string(this._value);
	}
	,__class__: flambe_util_Value
	,__properties__: {get_changed:"get_changed",set__:"set__",get__:"get__"}
};
var flambe_util_SignalConnection = function(signal,listener) {
	this._next = null;
	this._signal = signal;
	this._listener = listener;
	this.stayInList = true;
};
$hxClasses["flambe.util.SignalConnection"] = flambe_util_SignalConnection;
flambe_util_SignalConnection.__name__ = ["flambe","util","SignalConnection"];
flambe_util_SignalConnection.__interfaces__ = [flambe_util_Disposable];
flambe_util_SignalConnection.prototype = {
	once: function() {
		this.stayInList = false;
		return this;
	}
	,dispose: function() {
		if(this._signal != null) {
			this._signal.disconnect(this);
			this._signal = null;
		}
	}
	,__class__: flambe_util_SignalConnection
};
var flambe_util_SignalBase = function(listener) {
	if(listener != null) this._head = new flambe_util_SignalConnection(this,listener); else this._head = null;
	this._deferredTasks = null;
};
$hxClasses["flambe.util.SignalBase"] = flambe_util_SignalBase;
flambe_util_SignalBase.__name__ = ["flambe","util","SignalBase"];
flambe_util_SignalBase.prototype = {
	hasListeners: function() {
		return this._head != null;
	}
	,connectImpl: function(listener,prioritize) {
		var _g = this;
		var conn = new flambe_util_SignalConnection(this,listener);
		if(this.dispatching()) this.defer(function() {
			_g.listAdd(conn,prioritize);
		}); else this.listAdd(conn,prioritize);
		return conn;
	}
	,disconnect: function(conn) {
		var _g = this;
		if(this.dispatching()) this.defer(function() {
			_g.listRemove(conn);
		}); else this.listRemove(conn);
	}
	,defer: function(fn) {
		var tail = null;
		var p = this._deferredTasks;
		while(p != null) {
			tail = p;
			p = p.next;
		}
		var task = new flambe_util__$SignalBase_Task(fn);
		if(tail != null) tail.next = task; else this._deferredTasks = task;
	}
	,willEmit: function() {
		flambe_util_Assert.that(!this.dispatching());
		var snapshot = this._head;
		this._head = flambe_util_SignalBase.DISPATCHING_SENTINEL;
		return snapshot;
	}
	,didEmit: function(head) {
		this._head = head;
		var snapshot = this._deferredTasks;
		this._deferredTasks = null;
		while(snapshot != null) {
			snapshot.fn();
			snapshot = snapshot.next;
		}
	}
	,listAdd: function(conn,prioritize) {
		if(prioritize) {
			conn._next = this._head;
			this._head = conn;
		} else {
			var tail = null;
			var p = this._head;
			while(p != null) {
				tail = p;
				p = p._next;
			}
			if(tail != null) tail._next = conn; else this._head = conn;
		}
	}
	,listRemove: function(conn) {
		var prev = null;
		var p = this._head;
		while(p != null) {
			if(p == conn) {
				var next = p._next;
				if(prev == null) this._head = next; else prev._next = next;
				return;
			}
			prev = p;
			p = p._next;
		}
	}
	,dispatching: function() {
		return this._head == flambe_util_SignalBase.DISPATCHING_SENTINEL;
	}
	,__class__: flambe_util_SignalBase
};
var flambe_util_Signal2 = function(listener) {
	flambe_util_SignalBase.call(this,listener);
};
$hxClasses["flambe.util.Signal2"] = flambe_util_Signal2;
flambe_util_Signal2.__name__ = ["flambe","util","Signal2"];
flambe_util_Signal2.__super__ = flambe_util_SignalBase;
flambe_util_Signal2.prototype = $extend(flambe_util_SignalBase.prototype,{
	connect: function(listener,prioritize) {
		if(prioritize == null) prioritize = false;
		return this.connectImpl(listener,prioritize);
	}
	,emit: function(arg1,arg2) {
		var _g = this;
		if(this.dispatching()) this.defer(function() {
			_g.emitImpl(arg1,arg2);
		}); else this.emitImpl(arg1,arg2);
	}
	,emitImpl: function(arg1,arg2) {
		var head = this.willEmit();
		var p = head;
		while(p != null) {
			p._listener(arg1,arg2);
			if(!p.stayInList) p.dispose();
			p = p._next;
		}
		this.didEmit(head);
	}
	,__class__: flambe_util_Signal2
});
var flambe_util_Signal1 = function(listener) {
	flambe_util_SignalBase.call(this,listener);
};
$hxClasses["flambe.util.Signal1"] = flambe_util_Signal1;
flambe_util_Signal1.__name__ = ["flambe","util","Signal1"];
flambe_util_Signal1.__super__ = flambe_util_SignalBase;
flambe_util_Signal1.prototype = $extend(flambe_util_SignalBase.prototype,{
	connect: function(listener,prioritize) {
		if(prioritize == null) prioritize = false;
		return this.connectImpl(listener,prioritize);
	}
	,emit: function(arg1) {
		var _g = this;
		if(this.dispatching()) this.defer(function() {
			_g.emitImpl(arg1);
		}); else this.emitImpl(arg1);
	}
	,emitImpl: function(arg1) {
		var head = this.willEmit();
		var p = head;
		while(p != null) {
			p._listener(arg1);
			if(!p.stayInList) p.dispose();
			p = p._next;
		}
		this.didEmit(head);
	}
	,__class__: flambe_util_Signal1
});
var flambe_animation_AnimatedFloat = function(value,listener) {
	this._behavior = null;
	flambe_util_Value.call(this,value,listener);
};
$hxClasses["flambe.animation.AnimatedFloat"] = flambe_animation_AnimatedFloat;
flambe_animation_AnimatedFloat.__name__ = ["flambe","animation","AnimatedFloat"];
flambe_animation_AnimatedFloat.__super__ = flambe_util_Value;
flambe_animation_AnimatedFloat.prototype = $extend(flambe_util_Value.prototype,{
	set__: function(value) {
		this._behavior = null;
		return flambe_util_Value.prototype.set__.call(this,value);
	}
	,update: function(dt) {
		if(this._behavior != null) {
			flambe_util_Value.prototype.set__.call(this,this._behavior.update(dt));
			if(this._behavior.isComplete()) this._behavior = null;
		}
	}
	,animate: function(from,to,seconds,easing) {
		this.set__(from);
		this.animateTo(to,seconds,easing);
	}
	,animateTo: function(to,seconds,easing) {
		this.set_behavior(new flambe_animation_Tween(this._value,to,seconds,easing));
	}
	,animateBy: function(by,seconds,easing) {
		this.set_behavior(new flambe_animation_Tween(this._value,this._value + by,seconds,easing));
	}
	,set_behavior: function(behavior) {
		this._behavior = behavior;
		this.update(0);
		return behavior;
	}
	,__class__: flambe_animation_AnimatedFloat
	,__properties__: $extend(flambe_util_Value.prototype.__properties__,{set_behavior:"set_behavior"})
});
var flambe_System = function() { };
$hxClasses["flambe.System"] = flambe_System;
flambe_System.__name__ = ["flambe","System"];
flambe_System.__properties__ = {get_external:"get_external",get_keyboard:"get_keyboard",get_mouse:"get_mouse",get_pointer:"get_pointer",get_storage:"get_storage",get_stage:"get_stage",get_time:"get_time"}
flambe_System.init = function() {
	if(!flambe_System._calledInit) {
		flambe_System._platform.init();
		flambe_System._calledInit = true;
	}
};
flambe_System.loadAssetPack = function(manifest) {
	flambe_System.assertCalledInit();
	return flambe_System._platform.loadAssetPack(manifest);
};
flambe_System.createLogger = function(tag) {
	return new flambe_util_Logger(flambe_System._platform.createLogHandler(tag));
};
flambe_System.get_time = function() {
	flambe_System.assertCalledInit();
	return flambe_System._platform.getTime();
};
flambe_System.get_stage = function() {
	flambe_System.assertCalledInit();
	return flambe_System._platform.getStage();
};
flambe_System.get_storage = function() {
	flambe_System.assertCalledInit();
	return flambe_System._platform.getStorage();
};
flambe_System.get_pointer = function() {
	flambe_System.assertCalledInit();
	return flambe_System._platform.getPointer();
};
flambe_System.get_mouse = function() {
	flambe_System.assertCalledInit();
	return flambe_System._platform.getMouse();
};
flambe_System.get_keyboard = function() {
	flambe_System.assertCalledInit();
	return flambe_System._platform.getKeyboard();
};
flambe_System.get_external = function() {
	flambe_System.assertCalledInit();
	return flambe_System._platform.getExternal();
};
flambe_System.assertCalledInit = function() {
	flambe_util_Assert.that(flambe_System._calledInit,"You must call System.init() first");
};
var flambe_util_Logger = function(handler) {
	this._handler = handler;
};
$hxClasses["flambe.util.Logger"] = flambe_util_Logger;
flambe_util_Logger.__name__ = ["flambe","util","Logger"];
flambe_util_Logger.prototype = {
	info: function(text,fields) {
		this.log(flambe_util_LogLevel.Info,text,fields);
	}
	,warn: function(text,fields) {
		this.log(flambe_util_LogLevel.Warn,text,fields);
	}
	,error: function(text,fields) {
		this.log(flambe_util_LogLevel.Error,text,fields);
	}
	,log: function(level,text,fields) {
		if(this._handler == null) return;
		if(text == null) text = "";
		if(fields != null) text = flambe_util_Strings.withFields(text,fields);
		this._handler.log(level,text);
	}
	,__class__: flambe_util_Logger
};
var flambe_Log = function() { };
$hxClasses["flambe.Log"] = flambe_Log;
flambe_Log.__name__ = ["flambe","Log"];
flambe_Log.info = function(text,args) {
	flambe_Log.logger.info(text,args);
};
flambe_Log.warn = function(text,args) {
	flambe_Log.logger.warn(text,args);
};
flambe_Log.error = function(text,args) {
	flambe_Log.logger.error(text,args);
};
flambe_Log.__super__ = flambe_util_PackageLog;
flambe_Log.prototype = $extend(flambe_util_PackageLog.prototype,{
	__class__: flambe_Log
});
var flambe_SpeedAdjuster = function() {
	this._realDt = 0;
};
$hxClasses["flambe.SpeedAdjuster"] = flambe_SpeedAdjuster;
flambe_SpeedAdjuster.__name__ = ["flambe","SpeedAdjuster"];
flambe_SpeedAdjuster.__super__ = flambe_Component;
flambe_SpeedAdjuster.prototype = $extend(flambe_Component.prototype,{
	get_name: function() {
		return "SpeedAdjuster_4";
	}
	,onUpdate: function(dt) {
		if(this._realDt > 0) {
			dt = this._realDt;
			this._realDt = 0;
		}
		this.scale.update(dt);
	}
	,__class__: flambe_SpeedAdjuster
});
var flambe_animation_Behavior = function() { };
$hxClasses["flambe.animation.Behavior"] = flambe_animation_Behavior;
flambe_animation_Behavior.__name__ = ["flambe","animation","Behavior"];
flambe_animation_Behavior.prototype = {
	__class__: flambe_animation_Behavior
};
var flambe_animation_Ease = function() { };
$hxClasses["flambe.animation.Ease"] = flambe_animation_Ease;
flambe_animation_Ease.__name__ = ["flambe","animation","Ease"];
flambe_animation_Ease.linear = function(t) {
	return t;
};
flambe_animation_Ease.quadIn = function(t) {
	return t * t;
};
flambe_animation_Ease.quadOut = function(t) {
	return t * (2 - t);
};
flambe_animation_Ease.quadInOut = function(t) {
	if(t <= .5) return t * t * 2; else return 1 - --t * t * 2;
};
flambe_animation_Ease.quadOutIn = function(t) {
	if(t < 0.5) return -0.5 * (t = t * 2) * (t - 2); else return 0.5 * (t = t * 2 - 1) * t + 0.5;
};
flambe_animation_Ease.cubeIn = function(t) {
	return t * t * t;
};
flambe_animation_Ease.cubeOut = function(t) {
	return 1 + --t * t * t;
};
flambe_animation_Ease.cubeInOut = function(t) {
	if(t <= .5) return t * t * t * 4; else return 1 + --t * t * t * 4;
};
flambe_animation_Ease.cubeOutIn = function(t) {
	return 0.5 * ((t = t * 2 - 1) * t * t + 1);
};
flambe_animation_Ease.quartIn = function(t) {
	return t * t * t * t;
};
flambe_animation_Ease.quartOut = function(t) {
	return 1 - --t * t * t * t;
};
flambe_animation_Ease.quartInOut = function(t) {
	if(t <= .5) return t * t * t * t * 8; else return (1 - (t = t * 2 - 2) * t * t * t) / 2 + .5;
};
flambe_animation_Ease.quartOutIn = function(t) {
	if(t < 0.5) return -0.5 * (t = t * 2 - 1) * t * t * t + 0.5; else return 0.5 * (t = t * 2 - 1) * t * t * t + 0.5;
};
flambe_animation_Ease.quintIn = function(t) {
	return t * t * t * t * t;
};
flambe_animation_Ease.quintOut = function(t) {
	return (t = t - 1) * t * t * t * t + 1;
};
flambe_animation_Ease.quintInOut = function(t) {
	if((t *= 2) < 1) return t * t * t * t * t / 2; else return ((t -= 2) * t * t * t * t + 2) / 2;
};
flambe_animation_Ease.quintOutIn = function(t) {
	return 0.5 * ((t = t * 2 - 1) * t * t * t * t + 1);
};
flambe_animation_Ease.sineIn = function(t) {
	return 1 - Math.cos(1.5707963267948966 * t);
};
flambe_animation_Ease.sineOut = function(t) {
	return Math.sin(1.5707963267948966 * t);
};
flambe_animation_Ease.sineInOut = function(t) {
	return .5 - Math.cos(3.141592653589793 * t) / 2;
};
flambe_animation_Ease.sineOutIn = function(t) {
	if(t == 0) return 0; else if(t == 1) return 1; else if(t < 0.5) return 0.5 * Math.sin(t * 2 * 1.5707963267948966); else return -0.5 * Math.cos((t * 2 - 1) * 1.5707963267948966) + 1;
};
flambe_animation_Ease.bounceIn = function(t) {
	t = 1 - t;
	if(t < 0.36363636363636365) return 1 - 7.5625 * t * t;
	if(t < 0.72727272727272729) return 1 - (7.5625 * (t - 0.54545454545454541) * (t - 0.54545454545454541) + .75);
	if(t < 0.90909090909090906) return 1 - (7.5625 * (t - 0.81818181818181823) * (t - 0.81818181818181823) + .9375);
	return 1 - (7.5625 * (t - 0.95454545454545459) * (t - 0.95454545454545459) + .984375);
};
flambe_animation_Ease.bounceOut = function(t) {
	if(t < 0.36363636363636365) return 7.5625 * t * t;
	if(t < 0.72727272727272729) return 7.5625 * (t - 0.54545454545454541) * (t - 0.54545454545454541) + .75;
	if(t < 0.90909090909090906) return 7.5625 * (t - 0.81818181818181823) * (t - 0.81818181818181823) + .9375;
	return 7.5625 * (t - 0.95454545454545459) * (t - 0.95454545454545459) + .984375;
};
flambe_animation_Ease.bounceInOut = function(t) {
	if(t < .5) {
		t = 1 - t * 2;
		if(t < 0.36363636363636365) return (1 - 7.5625 * t * t) / 2;
		if(t < 0.72727272727272729) return (1 - (7.5625 * (t - 0.54545454545454541) * (t - 0.54545454545454541) + .75)) / 2;
		if(t < 0.90909090909090906) return (1 - (7.5625 * (t - 0.81818181818181823) * (t - 0.81818181818181823) + .9375)) / 2;
		return (1 - (7.5625 * (t - 0.95454545454545459) * (t - 0.95454545454545459) + .984375)) / 2;
	}
	t = t * 2 - 1;
	if(t < 0.36363636363636365) return 7.5625 * t * t / 2 + .5;
	if(t < 0.72727272727272729) return (7.5625 * (t - 0.54545454545454541) * (t - 0.54545454545454541) + .75) / 2 + .5;
	if(t < 0.90909090909090906) return (7.5625 * (t - 0.81818181818181823) * (t - 0.81818181818181823) + .9375) / 2 + .5;
	return (7.5625 * (t - 0.95454545454545459) * (t - 0.95454545454545459) + .984375) / 2 + .5;
};
flambe_animation_Ease.circIn = function(t) {
	return 1 - Math.sqrt(1 - t * t);
};
flambe_animation_Ease.circOut = function(t) {
	--t;
	return Math.sqrt(1 - t * t);
};
flambe_animation_Ease.circInOut = function(t) {
	if(t <= .5) return (Math.sqrt(1 - t * t * 4) - 1) / -2; else return (Math.sqrt(1 - (t * 2 - 2) * (t * 2 - 2)) + 1) / 2;
};
flambe_animation_Ease.circOutIn = function(t) {
	if(t < 0.5) return 0.5 * Math.sqrt(1 - (t = t * 2 - 1) * t); else return -0.5 * (Math.sqrt(1 - (t = t * 2 - 1) * t) - 1 - 1);
};
flambe_animation_Ease.expoIn = function(t) {
	return Math.pow(2,10 * (t - 1));
};
flambe_animation_Ease.expoOut = function(t) {
	return -Math.pow(2,-10 * t) + 1;
};
flambe_animation_Ease.expoInOut = function(t) {
	if(t < .5) return Math.pow(2,10 * (t * 2 - 1)) / 2; else return (-Math.pow(2,-10 * (t * 2 - 1)) + 2) / 2;
};
flambe_animation_Ease.expoOutIn = function(t) {
	if(t < 0.5) return 0.5 * (1 - Math.pow(2,-20 * t)); else if(t == 0.5) return 0.5; else return 0.5 * (Math.pow(2,20 * (t - 1)) + 1);
};
flambe_animation_Ease.backIn = function(t) {
	return t * t * (2.70158 * t - 1.70158);
};
flambe_animation_Ease.backOut = function(t) {
	return 1 - --t * t * (-2.70158 * t - 1.70158);
};
flambe_animation_Ease.backInOut = function(t) {
	t *= 2;
	if(t < 1) return t * t * (2.70158 * t - 1.70158) / 2;
	t -= 2;
	return (1 - t * t * (-2.70158 * t - 1.70158)) / 2 + .5;
};
flambe_animation_Ease.elasticIn = function(t) {
	return -(1 * Math.pow(2,10 * (t -= 1)) * Math.sin((t - 0.4 / 6.2831853071795862 * Math.asin(1 / 1)) * 6.2831853071795862 / 0.4));
};
flambe_animation_Ease.elasticOut = function(t) {
	return 1 * Math.pow(2,-10 * t) * Math.sin((t - 0.4 / 6.2831853071795862 * Math.asin(1 / 1)) * 6.2831853071795862 / 0.4) + 1;
};
flambe_animation_Ease.elasticInOut = function(t) {
	if(t < 0.5) return -0.5 * (Math.pow(2,10 * (t -= 0.5)) * Math.sin((t - 0.4 / 4) * 6.2831853071795862 / 0.4));
	return Math.pow(2,-10 * (t -= 0.5)) * Math.sin((t - 0.4 / 4) * 6.2831853071795862 / 0.4) * 0.5 + 1;
};
var flambe_animation_Tween = function(from,to,seconds,easing) {
	this._from = from;
	this._to = to;
	this._duration = seconds;
	this.elapsed = 0;
	if(easing != null) this._easing = easing; else this._easing = flambe_animation_Ease.linear;
};
$hxClasses["flambe.animation.Tween"] = flambe_animation_Tween;
flambe_animation_Tween.__name__ = ["flambe","animation","Tween"];
flambe_animation_Tween.__interfaces__ = [flambe_animation_Behavior];
flambe_animation_Tween.prototype = {
	update: function(dt) {
		this.elapsed += dt;
		if(this.elapsed >= this._duration) return this._to; else return this._from + (this._to - this._from) * this._easing(this.elapsed / this._duration);
	}
	,isComplete: function() {
		return this.elapsed >= this._duration;
	}
	,__class__: flambe_animation_Tween
};
var flambe_asset_Asset = function() { };
$hxClasses["flambe.asset.Asset"] = flambe_asset_Asset;
flambe_asset_Asset.__name__ = ["flambe","asset","Asset"];
flambe_asset_Asset.__interfaces__ = [flambe_util_Disposable];
flambe_asset_Asset.prototype = {
	__class__: flambe_asset_Asset
	,__properties__: {get_reloadCount:"get_reloadCount"}
};
var flambe_asset_AssetFormat = $hxClasses["flambe.asset.AssetFormat"] = { __ename__ : ["flambe","asset","AssetFormat"], __constructs__ : ["WEBP","JXR","PNG","JPG","GIF","DDS","PVR","PKM","MP3","M4A","OPUS","OGG","WAV","Data"] };
flambe_asset_AssetFormat.WEBP = ["WEBP",0];
flambe_asset_AssetFormat.WEBP.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.JXR = ["JXR",1];
flambe_asset_AssetFormat.JXR.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.PNG = ["PNG",2];
flambe_asset_AssetFormat.PNG.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.JPG = ["JPG",3];
flambe_asset_AssetFormat.JPG.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.GIF = ["GIF",4];
flambe_asset_AssetFormat.GIF.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.DDS = ["DDS",5];
flambe_asset_AssetFormat.DDS.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.PVR = ["PVR",6];
flambe_asset_AssetFormat.PVR.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.PKM = ["PKM",7];
flambe_asset_AssetFormat.PKM.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.MP3 = ["MP3",8];
flambe_asset_AssetFormat.MP3.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.M4A = ["M4A",9];
flambe_asset_AssetFormat.M4A.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.OPUS = ["OPUS",10];
flambe_asset_AssetFormat.OPUS.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.OGG = ["OGG",11];
flambe_asset_AssetFormat.OGG.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.WAV = ["WAV",12];
flambe_asset_AssetFormat.WAV.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.Data = ["Data",13];
flambe_asset_AssetFormat.Data.__enum__ = flambe_asset_AssetFormat;
flambe_asset_AssetFormat.__empty_constructs__ = [flambe_asset_AssetFormat.WEBP,flambe_asset_AssetFormat.JXR,flambe_asset_AssetFormat.PNG,flambe_asset_AssetFormat.JPG,flambe_asset_AssetFormat.GIF,flambe_asset_AssetFormat.DDS,flambe_asset_AssetFormat.PVR,flambe_asset_AssetFormat.PKM,flambe_asset_AssetFormat.MP3,flambe_asset_AssetFormat.M4A,flambe_asset_AssetFormat.OPUS,flambe_asset_AssetFormat.OGG,flambe_asset_AssetFormat.WAV,flambe_asset_AssetFormat.Data];
var flambe_asset_AssetEntry = function(name,url,format,bytes) {
	this.name = name;
	this.url = url;
	this.format = format;
	this.bytes = bytes;
};
$hxClasses["flambe.asset.AssetEntry"] = flambe_asset_AssetEntry;
flambe_asset_AssetEntry.__name__ = ["flambe","asset","AssetEntry"];
flambe_asset_AssetEntry.prototype = {
	__class__: flambe_asset_AssetEntry
};
var flambe_asset_AssetPack = function() { };
$hxClasses["flambe.asset.AssetPack"] = flambe_asset_AssetPack;
flambe_asset_AssetPack.__name__ = ["flambe","asset","AssetPack"];
flambe_asset_AssetPack.__interfaces__ = [flambe_util_Disposable];
flambe_asset_AssetPack.prototype = {
	__class__: flambe_asset_AssetPack
};
var flambe_asset_File = function() { };
$hxClasses["flambe.asset.File"] = flambe_asset_File;
flambe_asset_File.__name__ = ["flambe","asset","File"];
flambe_asset_File.__interfaces__ = [flambe_asset_Asset];
flambe_asset_File.prototype = {
	__class__: flambe_asset_File
};
var js_Browser = function() { };
$hxClasses["js.Browser"] = js_Browser;
js_Browser.__name__ = ["js","Browser"];
js_Browser.__properties__ = {get_navigator:"get_navigator",get_location:"get_location",get_document:"get_document",get_window:"get_window"}
js_Browser.get_window = function() {
	return window;
};
js_Browser.get_document = function() {
	return window.document;
};
js_Browser.get_location = function() {
	return window.location;
};
js_Browser.get_navigator = function() {
	return window.navigator;
};
js_Browser.getLocalStorage = function() {
	try {
		var s = js_Browser.get_window().localStorage;
		s.getItem("");
		return s;
	} catch( e ) {
		if (e instanceof js__$Boot_HaxeError) e = e.val;
		return null;
	}
};
var flambe_asset_Manifest = function() {
	this._remoteBase = null;
	this._localBase = null;
	this._entries = [];
};
$hxClasses["flambe.asset.Manifest"] = flambe_asset_Manifest;
flambe_asset_Manifest.__name__ = ["flambe","asset","Manifest"];
flambe_asset_Manifest.inferFormat = function(url) {
	var extension = flambe_util_Strings.getUrlExtension(url);
	if(extension != null) {
		var _g = extension.toLowerCase();
		switch(_g) {
		case "gif":
			return flambe_asset_AssetFormat.GIF;
		case "jpg":case "jpeg":
			return flambe_asset_AssetFormat.JPG;
		case "jxr":case "wdp":
			return flambe_asset_AssetFormat.JXR;
		case "png":
			return flambe_asset_AssetFormat.PNG;
		case "webp":
			return flambe_asset_AssetFormat.WEBP;
		case "dds":
			return flambe_asset_AssetFormat.DDS;
		case "pvr":
			return flambe_asset_AssetFormat.PVR;
		case "pkm":
			return flambe_asset_AssetFormat.PKM;
		case "m4a":
			return flambe_asset_AssetFormat.M4A;
		case "mp3":
			return flambe_asset_AssetFormat.MP3;
		case "ogg":
			return flambe_asset_AssetFormat.OGG;
		case "opus":
			return flambe_asset_AssetFormat.OPUS;
		case "wav":
			return flambe_asset_AssetFormat.WAV;
		}
	} else flambe_Log.warn("No file extension for asset, it will be loaded as data",["url",url]);
	return flambe_asset_AssetFormat.Data;
};
flambe_asset_Manifest.prototype = {
	add: function(name,url,bytes,format) {
		if(bytes == null) bytes = 0;
		if(format == null) format = flambe_asset_Manifest.inferFormat(url);
		var entry = new flambe_asset_AssetEntry(name,url,format,bytes);
		this._entries.push(entry);
		return entry;
	}
	,iterator: function() {
		return HxOverrides.iter(this._entries);
	}
	,getFullURL: function(entry) {
		var basePath;
		if(this.get_remoteBase() != null && flambe_asset_Manifest._supportsCrossOrigin) basePath = this.get_remoteBase(); else basePath = this.get_localBase();
		if(basePath != null) return flambe_util_Strings.joinPath(basePath,entry.url); else return entry.url;
	}
	,get_localBase: function() {
		return this._localBase;
	}
	,get_remoteBase: function() {
		return this._remoteBase;
	}
	,__class__: flambe_asset_Manifest
	,__properties__: {get_remoteBase:"get_remoteBase",get_localBase:"get_localBase"}
};
var flambe_display_BlendMode = $hxClasses["flambe.display.BlendMode"] = { __ename__ : ["flambe","display","BlendMode"], __constructs__ : ["Normal","Add","Multiply","Screen","Mask","Copy"] };
flambe_display_BlendMode.Normal = ["Normal",0];
flambe_display_BlendMode.Normal.__enum__ = flambe_display_BlendMode;
flambe_display_BlendMode.Add = ["Add",1];
flambe_display_BlendMode.Add.__enum__ = flambe_display_BlendMode;
flambe_display_BlendMode.Multiply = ["Multiply",2];
flambe_display_BlendMode.Multiply.__enum__ = flambe_display_BlendMode;
flambe_display_BlendMode.Screen = ["Screen",3];
flambe_display_BlendMode.Screen.__enum__ = flambe_display_BlendMode;
flambe_display_BlendMode.Mask = ["Mask",4];
flambe_display_BlendMode.Mask.__enum__ = flambe_display_BlendMode;
flambe_display_BlendMode.Copy = ["Copy",5];
flambe_display_BlendMode.Copy.__enum__ = flambe_display_BlendMode;
flambe_display_BlendMode.__empty_constructs__ = [flambe_display_BlendMode.Normal,flambe_display_BlendMode.Add,flambe_display_BlendMode.Multiply,flambe_display_BlendMode.Screen,flambe_display_BlendMode.Mask,flambe_display_BlendMode.Copy];
var flambe_display_EmitterType = $hxClasses["flambe.display.EmitterType"] = { __ename__ : ["flambe","display","EmitterType"], __constructs__ : ["Gravity","Radial"] };
flambe_display_EmitterType.Gravity = ["Gravity",0];
flambe_display_EmitterType.Gravity.__enum__ = flambe_display_EmitterType;
flambe_display_EmitterType.Radial = ["Radial",1];
flambe_display_EmitterType.Radial.__enum__ = flambe_display_EmitterType;
flambe_display_EmitterType.__empty_constructs__ = [flambe_display_EmitterType.Gravity,flambe_display_EmitterType.Radial];
var flambe_display_EmitterMold = function(pack,name) {
	this._file = pack.getFile(name + ".pex");
	var xml = Xml.parse(this._file.toString());
	var blendFuncSource = 0;
	var blendFuncDestination = 0;
	var idx = name.lastIndexOf("/");
	var basePath;
	if(idx >= 0) basePath = HxOverrides.substr(name,0,idx + 1); else basePath = "";
	var $it0 = xml.firstElement().elements();
	while( $it0.hasNext() ) {
		var element = $it0.next();
		var _g = element.get_nodeName().toLowerCase();
		switch(_g) {
		case "texture":
			this.texture = pack.getTexture(basePath + flambe_util_Strings.removeFileExtension(element.get("name")));
			break;
		case "angle":
			this.angle = flambe_display_EmitterMold.getValue(element);
			break;
		case "anglevariance":
			this.angleVariance = flambe_display_EmitterMold.getValue(element);
			break;
		case "blendfuncdestination":
			blendFuncDestination = Std["int"](flambe_display_EmitterMold.getValue(element));
			break;
		case "blendfuncsource":
			blendFuncSource = Std["int"](flambe_display_EmitterMold.getValue(element));
			break;
		case "duration":
			this.duration = flambe_display_EmitterMold.getValue(element);
			break;
		case "emittertype":
			if(Std["int"](flambe_display_EmitterMold.getValue(element)) == 0) this.type = flambe_display_EmitterType.Gravity; else this.type = flambe_display_EmitterType.Radial;
			break;
		case "finishcolor":
			this.alphaEnd = flambe_display_EmitterMold.getFloat(element,"alpha");
			break;
		case "finishcolorvariance":
			this.alphaEndVariance = flambe_display_EmitterMold.getFloat(element,"alpha");
			break;
		case "finishparticlesize":
			this.sizeEnd = flambe_display_EmitterMold.getValue(element);
			break;
		case "finishparticlesizevariance":
			this.sizeEndVariance = flambe_display_EmitterMold.getValue(element);
			break;
		case "gravity":
			this.gravityX = flambe_display_EmitterMold.getX(element);
			this.gravityY = flambe_display_EmitterMold.getY(element);
			break;
		case "maxparticles":
			this.maxParticles = Std["int"](flambe_display_EmitterMold.getValue(element));
			break;
		case "maxradius":
			this.maxRadius = flambe_display_EmitterMold.getValue(element);
			break;
		case "maxradiusvariance":
			this.maxRadiusVariance = flambe_display_EmitterMold.getValue(element);
			break;
		case "minradius":
			this.minRadius = flambe_display_EmitterMold.getValue(element);
			break;
		case "particlelifespan":
			this.lifespan = flambe_display_EmitterMold.getValue(element);
			break;
		case "particlelifespanvariance":
			this.lifespanVariance = flambe_display_EmitterMold.getValue(element);
			break;
		case "radialaccelvariance":
			this.radialAccelVariance = flambe_display_EmitterMold.getValue(element);
			break;
		case "radialacceleration":
			this.radialAccel = flambe_display_EmitterMold.getValue(element);
			break;
		case "rotatepersecond":
			this.rotatePerSecond = flambe_display_EmitterMold.getValue(element);
			break;
		case "rotatepersecondvariance":
			this.rotatePerSecondVariance = flambe_display_EmitterMold.getValue(element);
			break;
		case "rotationend":
			this.rotationEnd = flambe_display_EmitterMold.getValue(element);
			break;
		case "rotationendvariance":
			this.rotationEndVariance = flambe_display_EmitterMold.getValue(element);
			break;
		case "rotationstart":
			this.rotationStart = flambe_display_EmitterMold.getValue(element);
			break;
		case "rotationstartvariance":
			this.rotationStartVariance = flambe_display_EmitterMold.getValue(element);
			break;
		case "sourcepositionvariance":
			this.emitXVariance = flambe_display_EmitterMold.getX(element);
			this.emitYVariance = flambe_display_EmitterMold.getY(element);
			break;
		case "speed":
			this.speed = flambe_display_EmitterMold.getValue(element);
			break;
		case "speedvariance":
			this.speedVariance = flambe_display_EmitterMold.getValue(element);
			break;
		case "startcolor":
			this.alphaStart = flambe_display_EmitterMold.getFloat(element,"alpha");
			break;
		case "startcolorvariance":
			this.alphaStartVariance = flambe_display_EmitterMold.getFloat(element,"alpha");
			break;
		case "startparticlesize":
			this.sizeStart = flambe_display_EmitterMold.getValue(element);
			break;
		case "startparticlesizevariance":
			this.sizeStartVariance = flambe_display_EmitterMold.getValue(element);
			break;
		case "tangentialaccelvariance":
			this.tangentialAccelVariance = flambe_display_EmitterMold.getValue(element);
			break;
		case "tangentialacceleration":
			this.tangentialAccel = flambe_display_EmitterMold.getValue(element);
			break;
		}
	}
	if(this.lifespan <= 0) this.lifespan = this.duration;
	if(blendFuncSource == 1 && blendFuncDestination == 1) this.blendMode = flambe_display_BlendMode.Add; else if(blendFuncSource == 1 && blendFuncDestination == 771) this.blendMode = null; else if(blendFuncSource != 0 || blendFuncDestination != 0) flambe_Log.warn("Unsupported particle blend functions",["emitter",name,"source",blendFuncSource,"dest",blendFuncDestination]);
};
$hxClasses["flambe.display.EmitterMold"] = flambe_display_EmitterMold;
flambe_display_EmitterMold.__name__ = ["flambe","display","EmitterMold"];
flambe_display_EmitterMold.getFloat = function(xml,name) {
	return Std.parseFloat(xml.get(name));
};
flambe_display_EmitterMold.getValue = function(xml) {
	return flambe_display_EmitterMold.getFloat(xml,"value");
};
flambe_display_EmitterMold.getX = function(xml) {
	return flambe_display_EmitterMold.getFloat(xml,"x");
};
flambe_display_EmitterMold.getY = function(xml) {
	return flambe_display_EmitterMold.getFloat(xml,"y");
};
flambe_display_EmitterMold.prototype = {
	createEmitter: function() {
		return new flambe_display_EmitterSprite(this);
	}
	,__class__: flambe_display_EmitterMold
};
var flambe_math_Point = function(x,y) {
	if(y == null) y = 0;
	if(x == null) x = 0;
	this.x = x;
	this.y = y;
};
$hxClasses["flambe.math.Point"] = flambe_math_Point;
flambe_math_Point.__name__ = ["flambe","math","Point"];
flambe_math_Point.prototype = {
	toString: function() {
		return "(" + this.x + "," + this.y + ")";
	}
	,__class__: flambe_math_Point
};
var flambe_display_Sprite = function() {
	this._cosCache = 0;
	this._sinCache = 0;
	this.scissor = null;
	this.blendMode = null;
	var _g = this;
	flambe_Component.call(this);
	this._flags = flambe_util_BitSets.add(this._flags,2 | 4 | 16 | 32 | 128);
	this._localMatrix = new flambe_math_Matrix();
	var dirtyMatrix = function(_,_1) {
		_g._flags = flambe_util_BitSets.add(_g._flags,8 | 16);
	};
	this.x = new flambe_animation_AnimatedFloat(0,dirtyMatrix);
	this.y = new flambe_animation_AnimatedFloat(0,dirtyMatrix);
	this.rotation = new flambe_animation_AnimatedFloat(0,function(_2,_3) {
		_g._flags = flambe_util_BitSets.add(_g._flags,8 | 16 | 128);
	});
	this.scaleX = new flambe_animation_AnimatedFloat(1,dirtyMatrix);
	this.scaleY = new flambe_animation_AnimatedFloat(1,dirtyMatrix);
	this.anchorX = new flambe_animation_AnimatedFloat(0,dirtyMatrix);
	this.anchorY = new flambe_animation_AnimatedFloat(0,dirtyMatrix);
	this.alpha = new flambe_animation_AnimatedFloat(1);
};
$hxClasses["flambe.display.Sprite"] = flambe_display_Sprite;
flambe_display_Sprite.__name__ = ["flambe","display","Sprite"];
flambe_display_Sprite.hitTest = function(entity,x,y) {
	var sprite;
	var component = entity.getComponent("Sprite_3");
	sprite = component;
	if(sprite != null) {
		if(!flambe_util_BitSets.containsAll(sprite._flags,2 | 4)) return null;
		if(sprite.getLocalMatrix().inverseTransform(x,y,flambe_display_Sprite._scratchPoint)) {
			x = flambe_display_Sprite._scratchPoint.x;
			y = flambe_display_Sprite._scratchPoint.y;
		}
		var scissor = sprite.scissor;
		if(scissor != null && !scissor.contains(x,y)) return null;
	}
	var result = flambe_display_Sprite.hitTestBackwards(entity.firstChild,x,y);
	if(result != null) return result;
	if(sprite != null && sprite.containsLocal(x,y)) return sprite; else return null;
};
flambe_display_Sprite.getBounds = function(entity,result) {
	if(result == null) result = new flambe_math_Rectangle();
	result.set(1.79769313486231e+308,1.79769313486231e+308,-1.79769313486231e+308,-1.79769313486231e+308);
	flambe_display_Sprite.getBoundsImpl(entity,null,result);
	result.width -= result.x;
	result.height -= result.y;
	return result;
};
flambe_display_Sprite.render = function(entity,g) {
	var sprite;
	var component = entity.getComponent("Sprite_3");
	sprite = component;
	if(sprite != null) {
		var alpha = sprite.alpha.get__();
		if(!sprite.get_visible() || alpha <= 0) return;
		g.save();
		if(alpha < 1) g.multiplyAlpha(alpha);
		if(sprite.blendMode != null) g.setBlendMode(sprite.blendMode);
		var matrix = sprite.getLocalMatrix();
		var m02 = matrix.m02;
		var m12 = matrix.m12;
		if(sprite.get_pixelSnapping()) {
			m02 = Math.round(m02);
			m12 = Math.round(m12);
		}
		g.transform(matrix.m00,matrix.m10,matrix.m01,matrix.m11,m02,m12);
		var scissor = sprite.scissor;
		if(scissor != null) g.applyScissor(scissor.x,scissor.y,scissor.width,scissor.height);
		sprite.draw(g);
	}
	var director;
	var component1 = entity.getComponent("Director_9");
	director = component1;
	if(director != null) {
		var scenes = director.occludedScenes;
		var _g = 0;
		while(_g < scenes.length) {
			var scene = scenes[_g];
			++_g;
			flambe_display_Sprite.render(scene,g);
		}
	}
	var p = entity.firstChild;
	while(p != null) {
		var next = p.next;
		flambe_display_Sprite.render(p,g);
		p = next;
	}
	if(sprite != null) g.restore();
};
flambe_display_Sprite.hitTestBackwards = function(entity,x,y) {
	if(entity != null) {
		var result = flambe_display_Sprite.hitTestBackwards(entity.next,x,y);
		if(result != null) return result; else return flambe_display_Sprite.hitTest(entity,x,y);
	}
	return null;
};
flambe_display_Sprite.getBoundsImpl = function(entity,matrix,result) {
	var sprite;
	var component = entity.getComponent("Sprite_3");
	sprite = component;
	if(sprite != null) {
		if(matrix != null) matrix = flambe_math_Matrix.multiply(matrix,sprite.getLocalMatrix()); else matrix = sprite.getLocalMatrix();
		var x1 = 0.0;
		var y1 = 0.0;
		var x2 = sprite.getNaturalWidth();
		var y2 = sprite.getNaturalHeight();
		if(x2 > x1 && y2 > y1) {
			flambe_display_Sprite.extendRect(matrix,x1,y1,result);
			flambe_display_Sprite.extendRect(matrix,x2,y1,result);
			flambe_display_Sprite.extendRect(matrix,x2,y2,result);
			flambe_display_Sprite.extendRect(matrix,x1,y2,result);
		}
	}
	var director;
	var component1 = entity.getComponent("Director_9");
	director = component1;
	if(director != null) {
		var scenes = director.occludedScenes;
		var ii = 0;
		var ll = scenes.length;
		while(ii < ll) {
			flambe_display_Sprite.getBoundsImpl(scenes[ii],matrix,result);
			++ii;
		}
	}
	var p = entity.firstChild;
	while(p != null) {
		var next = p.next;
		flambe_display_Sprite.getBoundsImpl(p,matrix,result);
		p = next;
	}
};
flambe_display_Sprite.extendRect = function(matrix,x,y,rect) {
	var p = matrix.transform(x,y,flambe_display_Sprite._scratchPoint);
	x = p.x;
	y = p.y;
	if(x < rect.x) rect.x = x;
	if(y < rect.y) rect.y = y;
	if(x > rect.width) rect.width = x;
	if(y > rect.height) rect.height = y;
};
flambe_display_Sprite.__super__ = flambe_Component;
flambe_display_Sprite.prototype = $extend(flambe_Component.prototype,{
	get_name: function() {
		return "Sprite_3";
	}
	,getNaturalWidth: function() {
		return 0;
	}
	,getNaturalHeight: function() {
		return 0;
	}
	,containsLocal: function(localX,localY) {
		return localX >= 0 && localX < this.getNaturalWidth() && localY >= 0 && localY < this.getNaturalHeight();
	}
	,getLocalMatrix: function() {
		if(flambe_util_BitSets.contains(this._flags,8)) {
			this._flags = flambe_util_BitSets.remove(this._flags,8);
			if(flambe_util_BitSets.contains(this._flags,128)) {
				this._flags = flambe_util_BitSets.remove(this._flags,128);
				var rotation = flambe_math_FMath.toRadians(this.rotation.get__());
				this._sinCache = Math.sin(rotation);
				this._cosCache = Math.cos(rotation);
			}
			var scaleX = this.scaleX.get__();
			var scaleY = this.scaleY.get__();
			this._localMatrix.set(this._cosCache * scaleX,this._sinCache * scaleX,-this._sinCache * scaleY,this._cosCache * scaleY,this.x.get__(),this.y.get__());
			this._localMatrix.translate(-this.anchorX.get__(),-this.anchorY.get__());
		}
		return this._localMatrix;
	}
	,setAnchor: function(x,y) {
		this.anchorX.set__(x);
		this.anchorY.set__(y);
		return this;
	}
	,centerAnchor: function() {
		this.anchorX.set__(this.getNaturalWidth() / 2);
		this.anchorY.set__(this.getNaturalHeight() / 2);
		return this;
	}
	,setXY: function(x,y) {
		this.x.set__(x);
		this.y.set__(y);
		return this;
	}
	,setAlpha: function(alpha) {
		this.alpha.set__(alpha);
		return this;
	}
	,setScaleXY: function(scaleX,scaleY) {
		this.scaleX.set__(scaleX);
		this.scaleY.set__(scaleY);
		return this;
	}
	,disablePixelSnapping: function() {
		this.set_pixelSnapping(false);
		return this;
	}
	,onAdded: function() {
		if(flambe_util_BitSets.contains(this._flags,64)) this.connectHover();
	}
	,onRemoved: function() {
		if(this._hoverConnection != null) {
			this._hoverConnection.dispose();
			this._hoverConnection = null;
		}
	}
	,onUpdate: function(dt) {
		this.x.update(dt);
		this.y.update(dt);
		this.rotation.update(dt);
		this.scaleX.update(dt);
		this.scaleY.update(dt);
		this.alpha.update(dt);
		this.anchorX.update(dt);
		this.anchorY.update(dt);
	}
	,draw: function(g) {
	}
	,getParentSprite: function() {
		if(this.owner == null) return null;
		var entity = this.owner.parent;
		while(entity != null) {
			var sprite;
			var component = entity.getComponent("Sprite_3");
			sprite = component;
			if(sprite != null) return sprite;
			entity = entity.parent;
		}
		return null;
	}
	,get_pointerDown: function() {
		if(this._pointerDown == null) this._pointerDown = new flambe_util_Signal1();
		return this._pointerDown;
	}
	,get_pointerMove: function() {
		if(this._pointerMove == null) this._pointerMove = new flambe_util_Signal1();
		return this._pointerMove;
	}
	,get_pointerUp: function() {
		if(this._pointerUp == null) this._pointerUp = new flambe_util_Signal1();
		return this._pointerUp;
	}
	,get_pointerIn: function() {
		if(this._pointerIn == null) this._pointerIn = new flambe_util_Signal1();
		return this._pointerIn;
	}
	,get_pointerOut: function() {
		if(this._pointerOut == null) this._pointerOut = new flambe_util_Signal1();
		return this._pointerOut;
	}
	,connectHover: function() {
		var _g = this;
		if(this._hoverConnection != null) return;
		this._hoverConnection = flambe_System.get_pointer().move.connect(function(event) {
			var hit = event.hit;
			while(hit != null) {
				if(hit == _g) return;
				hit = hit.getParentSprite();
			}
			if(_g._pointerOut != null && flambe_util_BitSets.contains(_g._flags,64)) _g._pointerOut.emit(event);
			_g._flags = flambe_util_BitSets.remove(_g._flags,64);
			if(_g._hoverConnection != null) {
				_g._hoverConnection.dispose();
				_g._hoverConnection = null;
			}
		});
	}
	,get_visible: function() {
		return flambe_util_BitSets.contains(this._flags,2);
	}
	,set_visible: function(visible) {
		this._flags = flambe_util_BitSets.set(this._flags,2,visible);
		return visible;
	}
	,set_pointerEnabled: function(pointerEnabled) {
		this._flags = flambe_util_BitSets.set(this._flags,4,pointerEnabled);
		return pointerEnabled;
	}
	,get_pixelSnapping: function() {
		return flambe_util_BitSets.contains(this._flags,32);
	}
	,set_pixelSnapping: function(pixelSnapping) {
		this._flags = flambe_util_BitSets.set(this._flags,32,pixelSnapping);
		return pixelSnapping;
	}
	,onPointerDown: function(event) {
		this.onHover(event);
		if(this._pointerDown != null) this._pointerDown.emit(event);
	}
	,onPointerMove: function(event) {
		this.onHover(event);
		if(this._pointerMove != null) this._pointerMove.emit(event);
	}
	,onHover: function(event) {
		if(flambe_util_BitSets.contains(this._flags,64)) return;
		this._flags = flambe_util_BitSets.add(this._flags,64);
		if(this._pointerIn != null || this._pointerOut != null) {
			if(this._pointerIn != null) this._pointerIn.emit(event);
			this.connectHover();
		}
	}
	,onPointerUp: function(event) {
		{
			var _g = event.source;
			switch(Type.enumIndex(_g)) {
			case 1:
				var point = _g[2];
				if(this._pointerOut != null && flambe_util_BitSets.contains(this._flags,64)) this._pointerOut.emit(event);
				this._flags = flambe_util_BitSets.remove(this._flags,64);
				if(this._hoverConnection != null) {
					this._hoverConnection.dispose();
					this._hoverConnection = null;
				}
				break;
			default:
			}
		}
		if(this._pointerUp != null) this._pointerUp.emit(event);
	}
	,__class__: flambe_display_Sprite
	,__properties__: $extend(flambe_Component.prototype.__properties__,{get_pointerOut:"get_pointerOut",get_pointerIn:"get_pointerIn",get_pointerUp:"get_pointerUp",get_pointerMove:"get_pointerMove",get_pointerDown:"get_pointerDown",set_pointerEnabled:"set_pointerEnabled",set_pixelSnapping:"set_pixelSnapping",get_pixelSnapping:"get_pixelSnapping",set_visible:"set_visible",get_visible:"get_visible"})
});
var flambe_display_EmitterSprite = function(mold) {
	this._totalElapsed = 0;
	this._emitElapsed = 0;
	this.enabled = true;
	this.numParticles = 0;
	flambe_display_Sprite.call(this);
	this.texture = mold.texture;
	this.blendMode = mold.blendMode;
	this.type = mold.type;
	this.alphaEnd = new flambe_animation_AnimatedFloat(mold.alphaEnd);
	this.alphaEndVariance = new flambe_animation_AnimatedFloat(mold.alphaEndVariance);
	this.alphaStart = new flambe_animation_AnimatedFloat(mold.alphaStart);
	this.alphaStartVariance = new flambe_animation_AnimatedFloat(mold.alphaStartVariance);
	this.angle = new flambe_animation_AnimatedFloat(mold.angle);
	this.angleVariance = new flambe_animation_AnimatedFloat(mold.angleVariance);
	this.duration = mold.duration;
	this.emitXVariance = new flambe_animation_AnimatedFloat(mold.emitXVariance);
	this.emitYVariance = new flambe_animation_AnimatedFloat(mold.emitYVariance);
	this.gravityX = new flambe_animation_AnimatedFloat(mold.gravityX);
	this.gravityY = new flambe_animation_AnimatedFloat(mold.gravityY);
	this.maxRadius = new flambe_animation_AnimatedFloat(mold.maxRadius);
	this.maxRadiusVariance = new flambe_animation_AnimatedFloat(mold.maxRadiusVariance);
	this.minRadius = new flambe_animation_AnimatedFloat(mold.minRadius);
	this.lifespan = new flambe_animation_AnimatedFloat(mold.lifespan);
	this.lifespanVariance = new flambe_animation_AnimatedFloat(mold.lifespanVariance);
	this.radialAccel = new flambe_animation_AnimatedFloat(mold.radialAccel);
	this.radialAccelVariance = new flambe_animation_AnimatedFloat(mold.radialAccelVariance);
	this.rotatePerSecond = new flambe_animation_AnimatedFloat(mold.rotatePerSecond);
	this.rotatePerSecondVariance = new flambe_animation_AnimatedFloat(mold.rotatePerSecondVariance);
	this.rotationEnd = new flambe_animation_AnimatedFloat(mold.rotationEnd);
	this.rotationEndVariance = new flambe_animation_AnimatedFloat(mold.rotationEndVariance);
	this.rotationStart = new flambe_animation_AnimatedFloat(mold.rotationStart);
	this.rotationStartVariance = new flambe_animation_AnimatedFloat(mold.rotationStartVariance);
	this.sizeEnd = new flambe_animation_AnimatedFloat(mold.sizeEnd);
	this.sizeEndVariance = new flambe_animation_AnimatedFloat(mold.sizeEndVariance);
	this.sizeStart = new flambe_animation_AnimatedFloat(mold.sizeStart);
	this.sizeStartVariance = new flambe_animation_AnimatedFloat(mold.sizeStartVariance);
	this.speed = new flambe_animation_AnimatedFloat(mold.speed);
	this.speedVariance = new flambe_animation_AnimatedFloat(mold.speedVariance);
	this.tangentialAccel = new flambe_animation_AnimatedFloat(mold.tangentialAccel);
	this.tangentialAccelVariance = new flambe_animation_AnimatedFloat(mold.tangentialAccelVariance);
	this.emitX = new flambe_animation_AnimatedFloat(0);
	this.emitY = new flambe_animation_AnimatedFloat(0);
	this._particles = flambe_util_Arrays.create(mold.maxParticles);
	var ii = 0;
	var ll = this._particles.length;
	while(ii < ll) {
		this._particles[ii] = new flambe_display__$EmitterSprite_Particle();
		++ii;
	}
};
$hxClasses["flambe.display.EmitterSprite"] = flambe_display_EmitterSprite;
flambe_display_EmitterSprite.__name__ = ["flambe","display","EmitterSprite"];
flambe_display_EmitterSprite.random = function(base,variance) {
	if(variance != 0) base += variance * (2 * Math.random() - 1);
	return base;
};
flambe_display_EmitterSprite.__super__ = flambe_display_Sprite;
flambe_display_EmitterSprite.prototype = $extend(flambe_display_Sprite.prototype,{
	restart: function() {
		this.enabled = true;
		this._totalElapsed = 0;
	}
	,onUpdate: function(dt) {
		flambe_display_Sprite.prototype.onUpdate.call(this,dt);
		this.alphaEnd.update(dt);
		this.alphaEndVariance.update(dt);
		this.alphaStart.update(dt);
		this.alphaStartVariance.update(dt);
		this.angle.update(dt);
		this.angleVariance.update(dt);
		this.emitX.update(dt);
		this.emitXVariance.update(dt);
		this.emitY.update(dt);
		this.emitYVariance.update(dt);
		this.gravityX.update(dt);
		this.gravityY.update(dt);
		this.lifespan.update(dt);
		this.lifespanVariance.update(dt);
		this.maxRadius.update(dt);
		this.maxRadiusVariance.update(dt);
		this.minRadius.update(dt);
		this.radialAccel.update(dt);
		this.radialAccelVariance.update(dt);
		this.rotatePerSecond.update(dt);
		this.rotatePerSecondVariance.update(dt);
		this.rotationEnd.update(dt);
		this.rotationEndVariance.update(dt);
		this.rotationStart.update(dt);
		this.rotationStartVariance.update(dt);
		this.sizeEnd.update(dt);
		this.sizeEndVariance.update(dt);
		this.sizeStart.update(dt);
		this.sizeStartVariance.update(dt);
		this.speed.update(dt);
		this.speedVariance.update(dt);
		this.tangentialAccel.update(dt);
		this.tangentialAccelVariance.update(dt);
		var gravityType = this.type == flambe_display_EmitterType.Gravity;
		var ii = 0;
		while(ii < this.numParticles) {
			var particle = this._particles[ii];
			if(particle.life > dt) {
				if(gravityType) {
					particle.x += particle.velX * dt;
					particle.y += particle.velY * dt;
					var accelX = this.gravityX.get__();
					var accelY = -this.gravityY.get__();
					if(particle.radialAccel != 0 || particle.tangentialAccel != 0) {
						var dx = particle.x - particle.emitX;
						var dy = particle.y - particle.emitY;
						var distance = Math.sqrt(dx * dx + dy * dy);
						var radialX = dx / distance;
						var radialY = dy / distance;
						accelX += radialX * particle.radialAccel;
						accelY += radialY * particle.radialAccel;
						var tangentialX = -radialY;
						var tangentialY = radialX;
						accelX += tangentialX * particle.tangentialAccel;
						accelY += tangentialY * particle.tangentialAccel;
					}
					particle.velX += accelX * dt;
					particle.velY += accelY * dt;
				} else {
					particle.radialRotation += particle.velRadialRotation * dt;
					particle.radialRadius += particle.velRadialRadius * dt;
					var radius = particle.radialRadius;
					particle.x = this.emitX.get__() - Math.cos(particle.radialRotation) * radius;
					particle.y = this.emitY.get__() - Math.sin(particle.radialRotation) * radius;
					if(radius < this.minRadius.get__()) particle.life = 0;
				}
				particle.scale += particle.velScale * dt;
				particle.rotation += particle.velRotation * dt;
				particle.alpha += particle.velAlpha * dt;
				particle.life -= dt;
				++ii;
			} else {
				--this.numParticles;
				if(ii != this.numParticles) {
					this._particles[ii] = this._particles[this.numParticles];
					this._particles[this.numParticles] = particle;
				}
			}
		}
		if(!this.enabled) return;
		if(this.duration > 0) {
			this._totalElapsed += dt;
			if(this._totalElapsed >= this.duration) {
				this.enabled = false;
				return;
			}
		}
		var emitDelay = this.lifespan.get__() / this._particles.length;
		this._emitElapsed += dt;
		while(this._emitElapsed >= emitDelay) {
			if(this.numParticles < this._particles.length) {
				var particle1 = this._particles[this.numParticles];
				if(this.initParticle(particle1)) ++this.numParticles;
			}
			this._emitElapsed -= emitDelay;
		}
	}
	,draw: function(g) {
		var offset = -this.texture.get_width() / 2;
		var ii = 0;
		var ll = this.numParticles;
		while(ii < ll) {
			var particle = this._particles[ii];
			g.save();
			g.translate(particle.x,particle.y);
			if(particle.alpha < 1) g.multiplyAlpha(particle.alpha);
			if(particle.rotation != 0) g.rotate(particle.rotation);
			if(particle.scale != 1) g.scale(particle.scale,particle.scale);
			g.drawTexture(this.texture,offset,offset);
			g.restore();
			++ii;
		}
	}
	,initParticle: function(particle) {
		particle.life = flambe_display_EmitterSprite.random(this.lifespan.get__(),this.lifespanVariance.get__());
		if(particle.life <= 0) return false;
		particle.emitX = this.emitX.get__();
		particle.emitY = this.emitY.get__();
		var angle = -flambe_math_FMath.toRadians(flambe_display_EmitterSprite.random(this.angle.get__(),this.angleVariance.get__()));
		var speed = flambe_display_EmitterSprite.random(this.speed.get__(),this.speedVariance.get__());
		particle.velX = speed * Math.cos(angle);
		particle.velY = speed * Math.sin(angle);
		particle.radialAccel = flambe_display_EmitterSprite.random(this.radialAccel.get__(),this.radialAccelVariance.get__());
		particle.tangentialAccel = flambe_display_EmitterSprite.random(this.tangentialAccel.get__(),this.tangentialAccelVariance.get__());
		particle.radialRadius = flambe_display_EmitterSprite.random(this.maxRadius.get__(),this.maxRadiusVariance.get__());
		particle.velRadialRadius = -particle.radialRadius / particle.life;
		particle.radialRotation = angle;
		particle.velRadialRotation = flambe_math_FMath.toRadians(flambe_display_EmitterSprite.random(this.rotatePerSecond.get__(),this.rotatePerSecondVariance.get__()));
		if(this.type == flambe_display_EmitterType.Gravity) {
			particle.x = flambe_display_EmitterSprite.random(this.emitX.get__(),this.emitXVariance.get__());
			particle.y = flambe_display_EmitterSprite.random(this.emitY.get__(),this.emitYVariance.get__());
		} else {
			var radius = particle.radialRadius;
			particle.x = this.emitX.get__() - Math.cos(particle.radialRotation) * radius;
			particle.y = this.emitY.get__() - Math.sin(particle.radialRotation) * radius;
		}
		var width = this.texture.get_width();
		var scaleStart = flambe_display_EmitterSprite.random(this.sizeStart.get__(),this.sizeStartVariance.get__()) / width;
		var scaleEnd = flambe_display_EmitterSprite.random(this.sizeEnd.get__(),this.sizeEndVariance.get__()) / width;
		particle.scale = scaleStart;
		particle.velScale = (scaleEnd - scaleStart) / particle.life;
		var rotationStart = flambe_display_EmitterSprite.random(this.rotationStart.get__(),this.rotationStartVariance.get__());
		var rotationEnd = flambe_display_EmitterSprite.random(this.rotationEnd.get__(),this.rotationEndVariance.get__());
		particle.rotation = rotationStart;
		particle.velRotation = (rotationEnd - rotationStart) / particle.life;
		var alphaStart = flambe_display_EmitterSprite.random(this.alphaStart.get__(),this.alphaStartVariance.get__());
		var alphaEnd = flambe_display_EmitterSprite.random(this.alphaEnd.get__(),this.alphaEndVariance.get__());
		particle.alpha = alphaStart;
		particle.velAlpha = (alphaEnd - alphaStart) / particle.life;
		return true;
	}
	,__class__: flambe_display_EmitterSprite
});
var flambe_display__$EmitterSprite_Particle = function() {
	this.life = 0;
	this.velAlpha = 0;
	this.alpha = 0;
	this.velRotation = 0;
	this.rotation = 0;
	this.velScale = 0;
	this.scale = 0;
	this.tangentialAccel = 0;
	this.radialAccel = 0;
	this.velRadialRotation = 0;
	this.radialRotation = 0;
	this.velRadialRadius = 0;
	this.radialRadius = 0;
	this.velY = 0;
	this.y = 0;
	this.velX = 0;
	this.x = 0;
	this.emitY = 0;
	this.emitX = 0;
};
$hxClasses["flambe.display._EmitterSprite.Particle"] = flambe_display__$EmitterSprite_Particle;
flambe_display__$EmitterSprite_Particle.__name__ = ["flambe","display","_EmitterSprite","Particle"];
flambe_display__$EmitterSprite_Particle.prototype = {
	__class__: flambe_display__$EmitterSprite_Particle
};
var flambe_display_FillSprite = function(color,width,height) {
	flambe_display_Sprite.call(this);
	this.color = color;
	this.width = new flambe_animation_AnimatedFloat(width);
	this.height = new flambe_animation_AnimatedFloat(height);
};
$hxClasses["flambe.display.FillSprite"] = flambe_display_FillSprite;
flambe_display_FillSprite.__name__ = ["flambe","display","FillSprite"];
flambe_display_FillSprite.__super__ = flambe_display_Sprite;
flambe_display_FillSprite.prototype = $extend(flambe_display_Sprite.prototype,{
	draw: function(g) {
		g.fillRect(this.color,0,0,this.width.get__(),this.height.get__());
	}
	,getNaturalWidth: function() {
		return this.width.get__();
	}
	,getNaturalHeight: function() {
		return this.height.get__();
	}
	,setSize: function(width,height) {
		this.width.set__(width);
		this.height.set__(height);
		return this;
	}
	,onUpdate: function(dt) {
		flambe_display_Sprite.prototype.onUpdate.call(this,dt);
		this.width.update(dt);
		this.height.update(dt);
	}
	,__class__: flambe_display_FillSprite
});
var flambe_display_Glyph = function(charCode) {
	this._kernings = null;
	this.xAdvance = 0;
	this.yOffset = 0;
	this.xOffset = 0;
	this.page = null;
	this.height = 0;
	this.width = 0;
	this.y = 0;
	this.x = 0;
	this.charCode = charCode;
};
$hxClasses["flambe.display.Glyph"] = flambe_display_Glyph;
flambe_display_Glyph.__name__ = ["flambe","display","Glyph"];
flambe_display_Glyph.prototype = {
	draw: function(g,destX,destY) {
		if(this.width > 0) g.drawSubTexture(this.page,destX + this.xOffset,destY + this.yOffset,this.x,this.y,this.width,this.height);
	}
	,getKerning: function(nextCharCode) {
		if(this._kernings != null) return Std["int"](this._kernings.get(nextCharCode)); else return 0;
	}
	,setKerning: function(nextCharCode,amount) {
		if(this._kernings == null) this._kernings = new haxe_ds_IntMap();
		this._kernings.set(nextCharCode,amount);
	}
	,__class__: flambe_display_Glyph
};
var flambe_display_Font = function(pack,name) {
	this.name = name;
	this._pack = pack;
	this._file = pack.getFile(name + ".fnt");
	this.reload();
	this._lastReloadCount = this._file.get_reloadCount().get__();
};
$hxClasses["flambe.display.Font"] = flambe_display_Font;
flambe_display_Font.__name__ = ["flambe","display","Font"];
flambe_display_Font.prototype = {
	layoutText: function(text,align,wrapWidth,letterSpacing,lineSpacing) {
		if(lineSpacing == null) lineSpacing = 0;
		if(letterSpacing == null) letterSpacing = 0;
		if(wrapWidth == null) wrapWidth = 0;
		if(align == null) align = flambe_display_TextAlign.Left;
		return new flambe_display_TextLayout(this,text,align,wrapWidth,letterSpacing,lineSpacing);
	}
	,getGlyph: function(charCode) {
		return this._glyphs.get(charCode);
	}
	,checkReload: function() {
		var reloadCount = this._file.get_reloadCount().get__();
		if(this._lastReloadCount != reloadCount) {
			this._lastReloadCount = reloadCount;
			this.reload();
		}
		return reloadCount;
	}
	,reload: function() {
		this._glyphs = new haxe_ds_IntMap();
		this._glyphs.set(flambe_display_Font.NEWLINE.charCode,flambe_display_Font.NEWLINE);
		var parser = new flambe_display__$Font_ConfigParser(this._file.toString());
		var pages = new haxe_ds_IntMap();
		var idx = this.name.lastIndexOf("/");
		var basePath;
		if(idx >= 0) basePath = HxOverrides.substr(this.name,0,idx + 1); else basePath = "";
		var $it0 = parser.keywords();
		while( $it0.hasNext() ) {
			var keyword = $it0.next();
			switch(keyword) {
			case "info":
				var $it1 = parser.pairs();
				while( $it1.hasNext() ) {
					var pair = $it1.next();
					var _g = pair.key;
					switch(_g) {
					case "size":
						this.size = pair.getInt();
						break;
					}
				}
				break;
			case "common":
				var $it2 = parser.pairs();
				while( $it2.hasNext() ) {
					var pair1 = $it2.next();
					var _g1 = pair1.key;
					switch(_g1) {
					case "lineHeight":
						this.lineHeight = pair1.getInt();
						break;
					}
				}
				break;
			case "page":
				var pageId = 0;
				var file = null;
				var $it3 = parser.pairs();
				while( $it3.hasNext() ) {
					var pair2 = $it3.next();
					var _g2 = pair2.key;
					switch(_g2) {
					case "id":
						pageId = pair2.getInt();
						break;
					case "file":
						file = pair2.getString();
						break;
					}
				}
				var value = this._pack.getTexture(basePath + flambe_util_Strings.removeFileExtension(file));
				pages.set(pageId,value);
				break;
			case "char":
				var glyph = null;
				var $it4 = parser.pairs();
				while( $it4.hasNext() ) {
					var pair3 = $it4.next();
					var _g3 = pair3.key;
					switch(_g3) {
					case "id":
						glyph = new flambe_display_Glyph(pair3.getInt());
						break;
					case "x":
						glyph.x = pair3.getInt();
						break;
					case "y":
						glyph.y = pair3.getInt();
						break;
					case "width":
						glyph.width = pair3.getInt();
						break;
					case "height":
						glyph.height = pair3.getInt();
						break;
					case "page":
						var key = pair3.getInt();
						glyph.page = pages.get(key);
						break;
					case "xoffset":
						glyph.xOffset = pair3.getInt();
						break;
					case "yoffset":
						glyph.yOffset = pair3.getInt();
						break;
					case "xadvance":
						glyph.xAdvance = pair3.getInt();
						break;
					}
				}
				this._glyphs.set(glyph.charCode,glyph);
				break;
			case "kerning":
				var first = null;
				var second = 0;
				var amount = 0;
				var $it5 = parser.pairs();
				while( $it5.hasNext() ) {
					var pair4 = $it5.next();
					var _g4 = pair4.key;
					switch(_g4) {
					case "first":
						var key1 = pair4.getInt();
						first = this._glyphs.get(key1);
						break;
					case "second":
						second = pair4.getInt();
						break;
					case "amount":
						amount = pair4.getInt();
						break;
					}
				}
				if(first != null && amount != 0) first.setKerning(second,amount);
				break;
			}
		}
	}
	,__class__: flambe_display_Font
};
var flambe_display_TextAlign = $hxClasses["flambe.display.TextAlign"] = { __ename__ : ["flambe","display","TextAlign"], __constructs__ : ["Left","Center","Right"] };
flambe_display_TextAlign.Left = ["Left",0];
flambe_display_TextAlign.Left.__enum__ = flambe_display_TextAlign;
flambe_display_TextAlign.Center = ["Center",1];
flambe_display_TextAlign.Center.__enum__ = flambe_display_TextAlign;
flambe_display_TextAlign.Right = ["Right",2];
flambe_display_TextAlign.Right.__enum__ = flambe_display_TextAlign;
flambe_display_TextAlign.__empty_constructs__ = [flambe_display_TextAlign.Left,flambe_display_TextAlign.Center,flambe_display_TextAlign.Right];
var flambe_display_TextLayout = function(font,text,align,wrapWidth,letterSpacing,lineSpacing) {
	this.lines = 0;
	var _g = this;
	this._font = font;
	this._glyphs = [];
	this._offsets = [];
	this._lineOffset = Math.round(font.lineHeight + lineSpacing);
	this.bounds = new flambe_math_Rectangle();
	var lineWidths = [];
	var ll = text.length;
	var _g1 = 0;
	while(_g1 < ll) {
		var ii2 = _g1++;
		var charCode = StringTools.fastCodeAt(text,ii2);
		var glyph = font.getGlyph(charCode);
		if(glyph != null) this._glyphs.push(glyph); else flambe_Log.warn("Requested a missing character from font",["font",font.name,"charCode",charCode]);
	}
	var lastSpaceIdx = -1;
	var lineWidth = 0.0;
	var lineHeight = 0.0;
	var newline = font.getGlyph(10);
	var addLine = function() {
		_g.bounds.width = flambe_math_FMath.max(_g.bounds.width,lineWidth);
		_g.bounds.height += lineHeight;
		lineWidths[_g.lines] = lineWidth;
		lineWidth = 0;
		lineHeight = 0;
		++_g.lines;
	};
	var ii = 0;
	while(ii < this._glyphs.length) {
		var glyph1 = this._glyphs[ii];
		this._offsets[ii] = Math.round(lineWidth);
		var wordWrap = wrapWidth > 0 && lineWidth + glyph1.width > wrapWidth;
		if(wordWrap || glyph1 == newline) {
			if(wordWrap) {
				if(lastSpaceIdx >= 0) {
					this._glyphs[lastSpaceIdx] = newline;
					lineWidth = this._offsets[lastSpaceIdx];
					ii = lastSpaceIdx;
				} else this._glyphs.splice(ii,0,newline);
			}
			lastSpaceIdx = -1;
			lineHeight = this._lineOffset;
			addLine();
		} else {
			if(glyph1.charCode == 32) lastSpaceIdx = ii;
			lineWidth += glyph1.xAdvance + letterSpacing;
			lineHeight = flambe_math_FMath.max(lineHeight,glyph1.height + glyph1.yOffset);
			if(ii + 1 < this._glyphs.length) {
				var nextGlyph = this._glyphs[ii + 1];
				lineWidth += glyph1.getKerning(nextGlyph.charCode);
			}
		}
		++ii;
	}
	addLine();
	var lineY = 0.0;
	var alignOffset = flambe_display_TextLayout.getAlignOffset(align,lineWidths[0],wrapWidth);
	var top = 1.79769313486231e+308;
	var bottom = -1.79769313486231e+308;
	var line = 0;
	var ii1 = 0;
	var ll1 = this._glyphs.length;
	while(ii1 < ll1) {
		var glyph2 = this._glyphs[ii1];
		if(glyph2.charCode == 10) {
			lineY += this._lineOffset;
			++line;
			alignOffset = flambe_display_TextLayout.getAlignOffset(align,lineWidths[line],wrapWidth);
		}
		this._offsets[ii1] += alignOffset;
		var glyphY = lineY + glyph2.yOffset;
		top = flambe_math_FMath.min(top,glyphY);
		bottom = flambe_math_FMath.max(bottom,glyphY + glyph2.height);
		++ii1;
	}
	this.bounds.x = flambe_display_TextLayout.getAlignOffset(align,this.bounds.width,wrapWidth);
	this.bounds.y = top;
	this.bounds.height = bottom - top;
};
$hxClasses["flambe.display.TextLayout"] = flambe_display_TextLayout;
flambe_display_TextLayout.__name__ = ["flambe","display","TextLayout"];
flambe_display_TextLayout.getAlignOffset = function(align,lineWidth,totalWidth) {
	switch(Type.enumIndex(align)) {
	case 0:
		return 0;
	case 2:
		return totalWidth - lineWidth;
	case 1:
		return Math.round((totalWidth - lineWidth) / 2);
	}
};
flambe_display_TextLayout.prototype = {
	draw: function(g) {
		var y = 0.0;
		var ii = 0;
		var ll = this._glyphs.length;
		while(ii < ll) {
			var glyph = this._glyphs[ii];
			if(glyph.charCode == 10) y += this._lineOffset; else {
				var x = this._offsets[ii];
				glyph.draw(g,x,y);
			}
			++ii;
		}
	}
	,__class__: flambe_display_TextLayout
};
var flambe_display__$Font_ConfigParser = function(config) {
	this._configText = config;
	this._keywordPattern = new EReg("([A-Za-z]+)(.*)","");
	this._pairPattern = new EReg("([A-Za-z]+)=(\"[^\"]*\"|[^\\s]+)","");
};
$hxClasses["flambe.display._Font.ConfigParser"] = flambe_display__$Font_ConfigParser;
flambe_display__$Font_ConfigParser.__name__ = ["flambe","display","_Font","ConfigParser"];
flambe_display__$Font_ConfigParser.advance = function(text,expr) {
	var m = expr.matchedPos();
	return HxOverrides.substr(text,m.pos + m.len,text.length);
};
flambe_display__$Font_ConfigParser.prototype = {
	keywords: function() {
		var _g = this;
		var text = this._configText;
		return { next : function() {
			text = flambe_display__$Font_ConfigParser.advance(text,_g._keywordPattern);
			_g._pairText = _g._keywordPattern.matched(2);
			return _g._keywordPattern.matched(1);
		}, hasNext : function() {
			return _g._keywordPattern.match(text);
		}};
	}
	,pairs: function() {
		var _g = this;
		var text = this._pairText;
		return { next : function() {
			text = flambe_display__$Font_ConfigParser.advance(text,_g._pairPattern);
			return new flambe_display__$Font_ConfigPair(_g._pairPattern.matched(1),_g._pairPattern.matched(2));
		}, hasNext : function() {
			return _g._pairPattern.match(text);
		}};
	}
	,__class__: flambe_display__$Font_ConfigParser
};
var flambe_display__$Font_ConfigPair = function(key,value) {
	this.key = key;
	this._value = value;
};
$hxClasses["flambe.display._Font.ConfigPair"] = flambe_display__$Font_ConfigPair;
flambe_display__$Font_ConfigPair.__name__ = ["flambe","display","_Font","ConfigPair"];
flambe_display__$Font_ConfigPair.prototype = {
	getInt: function() {
		return Std.parseInt(this._value);
	}
	,getString: function() {
		if(StringTools.fastCodeAt(this._value,0) != 34) return null;
		return HxOverrides.substr(this._value,1,this._value.length - 2);
	}
	,__class__: flambe_display__$Font_ConfigPair
};
var flambe_display_Graphics = function() { };
$hxClasses["flambe.display.Graphics"] = flambe_display_Graphics;
flambe_display_Graphics.__name__ = ["flambe","display","Graphics"];
flambe_display_Graphics.prototype = {
	__class__: flambe_display_Graphics
};
var flambe_display_ImageSprite = function(texture) {
	flambe_display_Sprite.call(this);
	this.texture = texture;
};
$hxClasses["flambe.display.ImageSprite"] = flambe_display_ImageSprite;
flambe_display_ImageSprite.__name__ = ["flambe","display","ImageSprite"];
flambe_display_ImageSprite.__super__ = flambe_display_Sprite;
flambe_display_ImageSprite.prototype = $extend(flambe_display_Sprite.prototype,{
	draw: function(g) {
		if(this.texture != null) g.drawTexture(this.texture,0,0);
	}
	,getNaturalWidth: function() {
		if(this.texture != null) return this.texture.get_width(); else return 0;
	}
	,getNaturalHeight: function() {
		if(this.texture != null) return this.texture.get_height(); else return 0;
	}
	,__class__: flambe_display_ImageSprite
});
var flambe_display_Orientation = $hxClasses["flambe.display.Orientation"] = { __ename__ : ["flambe","display","Orientation"], __constructs__ : ["Portrait","Landscape"] };
flambe_display_Orientation.Portrait = ["Portrait",0];
flambe_display_Orientation.Portrait.__enum__ = flambe_display_Orientation;
flambe_display_Orientation.Landscape = ["Landscape",1];
flambe_display_Orientation.Landscape.__enum__ = flambe_display_Orientation;
flambe_display_Orientation.__empty_constructs__ = [flambe_display_Orientation.Portrait,flambe_display_Orientation.Landscape];
var flambe_display_Texture = function() { };
$hxClasses["flambe.display.Texture"] = flambe_display_Texture;
flambe_display_Texture.__name__ = ["flambe","display","Texture"];
flambe_display_Texture.__interfaces__ = [flambe_asset_Asset];
flambe_display_Texture.prototype = {
	__class__: flambe_display_Texture
	,__properties__: {get_height:"get_height",get_width:"get_width"}
};
var flambe_display_SubTexture = function() { };
$hxClasses["flambe.display.SubTexture"] = flambe_display_SubTexture;
flambe_display_SubTexture.__name__ = ["flambe","display","SubTexture"];
flambe_display_SubTexture.__interfaces__ = [flambe_display_Texture];
var flambe_display_TextSprite = function(font,text) {
	if(text == null) text = "";
	this._lastReloadCount = -1;
	this._layout = null;
	var _g = this;
	flambe_display_Sprite.call(this);
	this._font = font;
	this._text = text;
	this._align = flambe_display_TextAlign.Left;
	this._flags = flambe_util_BitSets.add(this._flags,256);
	var dirtyText = function(_,_1) {
		_g._flags = flambe_util_BitSets.add(_g._flags,256);
	};
	this.wrapWidth = new flambe_animation_AnimatedFloat(0,dirtyText);
	this.letterSpacing = new flambe_animation_AnimatedFloat(0,dirtyText);
	this.lineSpacing = new flambe_animation_AnimatedFloat(0,dirtyText);
};
$hxClasses["flambe.display.TextSprite"] = flambe_display_TextSprite;
flambe_display_TextSprite.__name__ = ["flambe","display","TextSprite"];
flambe_display_TextSprite.__super__ = flambe_display_Sprite;
flambe_display_TextSprite.prototype = $extend(flambe_display_Sprite.prototype,{
	draw: function(g) {
		this.updateLayout();
		this._layout.draw(g);
	}
	,getNaturalWidth: function() {
		this.updateLayout();
		if(this.wrapWidth.get__() > 0) return this.wrapWidth.get__(); else return this._layout.bounds.width;
	}
	,getNaturalHeight: function() {
		this.updateLayout();
		var paddedHeight = this._layout.lines * (this._font.lineHeight + this.lineSpacing.get__());
		var boundsHeight = this._layout.bounds.height;
		return flambe_math_FMath.max(paddedHeight,boundsHeight);
	}
	,containsLocal: function(localX,localY) {
		this.updateLayout();
		return this._layout.bounds.contains(localX,localY);
	}
	,setWrapWidth: function(wrapWidth) {
		this.wrapWidth.set__(wrapWidth);
		return this;
	}
	,setLetterSpacing: function(letterSpacing) {
		this.letterSpacing.set__(letterSpacing);
		return this;
	}
	,setLineSpacing: function(lineSpacing) {
		this.lineSpacing.set__(lineSpacing);
		return this;
	}
	,setAlign: function(align) {
		this.set_align(align);
		return this;
	}
	,set_text: function(text) {
		if(text != this._text) {
			this._text = text;
			this._flags = flambe_util_BitSets.add(this._flags,256);
		}
		return text;
	}
	,get_font: function() {
		return this._font;
	}
	,set_font: function(font) {
		if(font != this._font) {
			this._font = font;
			this._flags = flambe_util_BitSets.add(this._flags,256);
		}
		return font;
	}
	,set_align: function(align) {
		if(align != this._align) {
			this._align = align;
			this._flags = flambe_util_BitSets.add(this._flags,256);
		}
		return align;
	}
	,updateLayout: function() {
		var reloadCount = this._font.checkReload();
		if(reloadCount != this._lastReloadCount) {
			this._lastReloadCount = reloadCount;
			this._flags = flambe_util_BitSets.add(this._flags,256);
		}
		if(flambe_util_BitSets.contains(this._flags,256)) {
			this._flags = flambe_util_BitSets.remove(this._flags,256);
			this._layout = this.get_font().layoutText(this._text,this._align,this.wrapWidth.get__(),this.letterSpacing.get__(),this.lineSpacing.get__());
		}
	}
	,onUpdate: function(dt) {
		flambe_display_Sprite.prototype.onUpdate.call(this,dt);
		this.wrapWidth.update(dt);
		this.letterSpacing.update(dt);
		this.lineSpacing.update(dt);
	}
	,__class__: flambe_display_TextSprite
	,__properties__: $extend(flambe_display_Sprite.prototype.__properties__,{set_align:"set_align",set_font:"set_font",get_font:"get_font",set_text:"set_text"})
});
var flambe_input_Key = $hxClasses["flambe.input.Key"] = { __ename__ : ["flambe","input","Key"], __constructs__ : ["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Number0","Number1","Number2","Number3","Number4","Number5","Number6","Number7","Number8","Number9","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadDecimal","NumpadDivide","NumpadEnter","NumpadMultiply","NumpadSubtract","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","Left","Up","Right","Down","Alt","Backquote","Backslash","Backspace","CapsLock","Comma","Command","Control","Delete","End","Enter","Equals","Escape","Home","Insert","LeftBracket","Minus","PageDown","PageUp","Period","Quote","RightBracket","Semicolon","Shift","Slash","Space","Tab","Menu","Search","Unknown"] };
flambe_input_Key.A = ["A",0];
flambe_input_Key.A.__enum__ = flambe_input_Key;
flambe_input_Key.B = ["B",1];
flambe_input_Key.B.__enum__ = flambe_input_Key;
flambe_input_Key.C = ["C",2];
flambe_input_Key.C.__enum__ = flambe_input_Key;
flambe_input_Key.D = ["D",3];
flambe_input_Key.D.__enum__ = flambe_input_Key;
flambe_input_Key.E = ["E",4];
flambe_input_Key.E.__enum__ = flambe_input_Key;
flambe_input_Key.F = ["F",5];
flambe_input_Key.F.__enum__ = flambe_input_Key;
flambe_input_Key.G = ["G",6];
flambe_input_Key.G.__enum__ = flambe_input_Key;
flambe_input_Key.H = ["H",7];
flambe_input_Key.H.__enum__ = flambe_input_Key;
flambe_input_Key.I = ["I",8];
flambe_input_Key.I.__enum__ = flambe_input_Key;
flambe_input_Key.J = ["J",9];
flambe_input_Key.J.__enum__ = flambe_input_Key;
flambe_input_Key.K = ["K",10];
flambe_input_Key.K.__enum__ = flambe_input_Key;
flambe_input_Key.L = ["L",11];
flambe_input_Key.L.__enum__ = flambe_input_Key;
flambe_input_Key.M = ["M",12];
flambe_input_Key.M.__enum__ = flambe_input_Key;
flambe_input_Key.N = ["N",13];
flambe_input_Key.N.__enum__ = flambe_input_Key;
flambe_input_Key.O = ["O",14];
flambe_input_Key.O.__enum__ = flambe_input_Key;
flambe_input_Key.P = ["P",15];
flambe_input_Key.P.__enum__ = flambe_input_Key;
flambe_input_Key.Q = ["Q",16];
flambe_input_Key.Q.__enum__ = flambe_input_Key;
flambe_input_Key.R = ["R",17];
flambe_input_Key.R.__enum__ = flambe_input_Key;
flambe_input_Key.S = ["S",18];
flambe_input_Key.S.__enum__ = flambe_input_Key;
flambe_input_Key.T = ["T",19];
flambe_input_Key.T.__enum__ = flambe_input_Key;
flambe_input_Key.U = ["U",20];
flambe_input_Key.U.__enum__ = flambe_input_Key;
flambe_input_Key.V = ["V",21];
flambe_input_Key.V.__enum__ = flambe_input_Key;
flambe_input_Key.W = ["W",22];
flambe_input_Key.W.__enum__ = flambe_input_Key;
flambe_input_Key.X = ["X",23];
flambe_input_Key.X.__enum__ = flambe_input_Key;
flambe_input_Key.Y = ["Y",24];
flambe_input_Key.Y.__enum__ = flambe_input_Key;
flambe_input_Key.Z = ["Z",25];
flambe_input_Key.Z.__enum__ = flambe_input_Key;
flambe_input_Key.Number0 = ["Number0",26];
flambe_input_Key.Number0.__enum__ = flambe_input_Key;
flambe_input_Key.Number1 = ["Number1",27];
flambe_input_Key.Number1.__enum__ = flambe_input_Key;
flambe_input_Key.Number2 = ["Number2",28];
flambe_input_Key.Number2.__enum__ = flambe_input_Key;
flambe_input_Key.Number3 = ["Number3",29];
flambe_input_Key.Number3.__enum__ = flambe_input_Key;
flambe_input_Key.Number4 = ["Number4",30];
flambe_input_Key.Number4.__enum__ = flambe_input_Key;
flambe_input_Key.Number5 = ["Number5",31];
flambe_input_Key.Number5.__enum__ = flambe_input_Key;
flambe_input_Key.Number6 = ["Number6",32];
flambe_input_Key.Number6.__enum__ = flambe_input_Key;
flambe_input_Key.Number7 = ["Number7",33];
flambe_input_Key.Number7.__enum__ = flambe_input_Key;
flambe_input_Key.Number8 = ["Number8",34];
flambe_input_Key.Number8.__enum__ = flambe_input_Key;
flambe_input_Key.Number9 = ["Number9",35];
flambe_input_Key.Number9.__enum__ = flambe_input_Key;
flambe_input_Key.Numpad0 = ["Numpad0",36];
flambe_input_Key.Numpad0.__enum__ = flambe_input_Key;
flambe_input_Key.Numpad1 = ["Numpad1",37];
flambe_input_Key.Numpad1.__enum__ = flambe_input_Key;
flambe_input_Key.Numpad2 = ["Numpad2",38];
flambe_input_Key.Numpad2.__enum__ = flambe_input_Key;
flambe_input_Key.Numpad3 = ["Numpad3",39];
flambe_input_Key.Numpad3.__enum__ = flambe_input_Key;
flambe_input_Key.Numpad4 = ["Numpad4",40];
flambe_input_Key.Numpad4.__enum__ = flambe_input_Key;
flambe_input_Key.Numpad5 = ["Numpad5",41];
flambe_input_Key.Numpad5.__enum__ = flambe_input_Key;
flambe_input_Key.Numpad6 = ["Numpad6",42];
flambe_input_Key.Numpad6.__enum__ = flambe_input_Key;
flambe_input_Key.Numpad7 = ["Numpad7",43];
flambe_input_Key.Numpad7.__enum__ = flambe_input_Key;
flambe_input_Key.Numpad8 = ["Numpad8",44];
flambe_input_Key.Numpad8.__enum__ = flambe_input_Key;
flambe_input_Key.Numpad9 = ["Numpad9",45];
flambe_input_Key.Numpad9.__enum__ = flambe_input_Key;
flambe_input_Key.NumpadAdd = ["NumpadAdd",46];
flambe_input_Key.NumpadAdd.__enum__ = flambe_input_Key;
flambe_input_Key.NumpadDecimal = ["NumpadDecimal",47];
flambe_input_Key.NumpadDecimal.__enum__ = flambe_input_Key;
flambe_input_Key.NumpadDivide = ["NumpadDivide",48];
flambe_input_Key.NumpadDivide.__enum__ = flambe_input_Key;
flambe_input_Key.NumpadEnter = ["NumpadEnter",49];
flambe_input_Key.NumpadEnter.__enum__ = flambe_input_Key;
flambe_input_Key.NumpadMultiply = ["NumpadMultiply",50];
flambe_input_Key.NumpadMultiply.__enum__ = flambe_input_Key;
flambe_input_Key.NumpadSubtract = ["NumpadSubtract",51];
flambe_input_Key.NumpadSubtract.__enum__ = flambe_input_Key;
flambe_input_Key.F1 = ["F1",52];
flambe_input_Key.F1.__enum__ = flambe_input_Key;
flambe_input_Key.F2 = ["F2",53];
flambe_input_Key.F2.__enum__ = flambe_input_Key;
flambe_input_Key.F3 = ["F3",54];
flambe_input_Key.F3.__enum__ = flambe_input_Key;
flambe_input_Key.F4 = ["F4",55];
flambe_input_Key.F4.__enum__ = flambe_input_Key;
flambe_input_Key.F5 = ["F5",56];
flambe_input_Key.F5.__enum__ = flambe_input_Key;
flambe_input_Key.F6 = ["F6",57];
flambe_input_Key.F6.__enum__ = flambe_input_Key;
flambe_input_Key.F7 = ["F7",58];
flambe_input_Key.F7.__enum__ = flambe_input_Key;
flambe_input_Key.F8 = ["F8",59];
flambe_input_Key.F8.__enum__ = flambe_input_Key;
flambe_input_Key.F9 = ["F9",60];
flambe_input_Key.F9.__enum__ = flambe_input_Key;
flambe_input_Key.F10 = ["F10",61];
flambe_input_Key.F10.__enum__ = flambe_input_Key;
flambe_input_Key.F11 = ["F11",62];
flambe_input_Key.F11.__enum__ = flambe_input_Key;
flambe_input_Key.F12 = ["F12",63];
flambe_input_Key.F12.__enum__ = flambe_input_Key;
flambe_input_Key.F13 = ["F13",64];
flambe_input_Key.F13.__enum__ = flambe_input_Key;
flambe_input_Key.F14 = ["F14",65];
flambe_input_Key.F14.__enum__ = flambe_input_Key;
flambe_input_Key.F15 = ["F15",66];
flambe_input_Key.F15.__enum__ = flambe_input_Key;
flambe_input_Key.Left = ["Left",67];
flambe_input_Key.Left.__enum__ = flambe_input_Key;
flambe_input_Key.Up = ["Up",68];
flambe_input_Key.Up.__enum__ = flambe_input_Key;
flambe_input_Key.Right = ["Right",69];
flambe_input_Key.Right.__enum__ = flambe_input_Key;
flambe_input_Key.Down = ["Down",70];
flambe_input_Key.Down.__enum__ = flambe_input_Key;
flambe_input_Key.Alt = ["Alt",71];
flambe_input_Key.Alt.__enum__ = flambe_input_Key;
flambe_input_Key.Backquote = ["Backquote",72];
flambe_input_Key.Backquote.__enum__ = flambe_input_Key;
flambe_input_Key.Backslash = ["Backslash",73];
flambe_input_Key.Backslash.__enum__ = flambe_input_Key;
flambe_input_Key.Backspace = ["Backspace",74];
flambe_input_Key.Backspace.__enum__ = flambe_input_Key;
flambe_input_Key.CapsLock = ["CapsLock",75];
flambe_input_Key.CapsLock.__enum__ = flambe_input_Key;
flambe_input_Key.Comma = ["Comma",76];
flambe_input_Key.Comma.__enum__ = flambe_input_Key;
flambe_input_Key.Command = ["Command",77];
flambe_input_Key.Command.__enum__ = flambe_input_Key;
flambe_input_Key.Control = ["Control",78];
flambe_input_Key.Control.__enum__ = flambe_input_Key;
flambe_input_Key.Delete = ["Delete",79];
flambe_input_Key.Delete.__enum__ = flambe_input_Key;
flambe_input_Key.End = ["End",80];
flambe_input_Key.End.__enum__ = flambe_input_Key;
flambe_input_Key.Enter = ["Enter",81];
flambe_input_Key.Enter.__enum__ = flambe_input_Key;
flambe_input_Key.Equals = ["Equals",82];
flambe_input_Key.Equals.__enum__ = flambe_input_Key;
flambe_input_Key.Escape = ["Escape",83];
flambe_input_Key.Escape.__enum__ = flambe_input_Key;
flambe_input_Key.Home = ["Home",84];
flambe_input_Key.Home.__enum__ = flambe_input_Key;
flambe_input_Key.Insert = ["Insert",85];
flambe_input_Key.Insert.__enum__ = flambe_input_Key;
flambe_input_Key.LeftBracket = ["LeftBracket",86];
flambe_input_Key.LeftBracket.__enum__ = flambe_input_Key;
flambe_input_Key.Minus = ["Minus",87];
flambe_input_Key.Minus.__enum__ = flambe_input_Key;
flambe_input_Key.PageDown = ["PageDown",88];
flambe_input_Key.PageDown.__enum__ = flambe_input_Key;
flambe_input_Key.PageUp = ["PageUp",89];
flambe_input_Key.PageUp.__enum__ = flambe_input_Key;
flambe_input_Key.Period = ["Period",90];
flambe_input_Key.Period.__enum__ = flambe_input_Key;
flambe_input_Key.Quote = ["Quote",91];
flambe_input_Key.Quote.__enum__ = flambe_input_Key;
flambe_input_Key.RightBracket = ["RightBracket",92];
flambe_input_Key.RightBracket.__enum__ = flambe_input_Key;
flambe_input_Key.Semicolon = ["Semicolon",93];
flambe_input_Key.Semicolon.__enum__ = flambe_input_Key;
flambe_input_Key.Shift = ["Shift",94];
flambe_input_Key.Shift.__enum__ = flambe_input_Key;
flambe_input_Key.Slash = ["Slash",95];
flambe_input_Key.Slash.__enum__ = flambe_input_Key;
flambe_input_Key.Space = ["Space",96];
flambe_input_Key.Space.__enum__ = flambe_input_Key;
flambe_input_Key.Tab = ["Tab",97];
flambe_input_Key.Tab.__enum__ = flambe_input_Key;
flambe_input_Key.Menu = ["Menu",98];
flambe_input_Key.Menu.__enum__ = flambe_input_Key;
flambe_input_Key.Search = ["Search",99];
flambe_input_Key.Search.__enum__ = flambe_input_Key;
flambe_input_Key.Unknown = function(keyCode) { var $x = ["Unknown",100,keyCode]; $x.__enum__ = flambe_input_Key; return $x; };
flambe_input_Key.__empty_constructs__ = [flambe_input_Key.A,flambe_input_Key.B,flambe_input_Key.C,flambe_input_Key.D,flambe_input_Key.E,flambe_input_Key.F,flambe_input_Key.G,flambe_input_Key.H,flambe_input_Key.I,flambe_input_Key.J,flambe_input_Key.K,flambe_input_Key.L,flambe_input_Key.M,flambe_input_Key.N,flambe_input_Key.O,flambe_input_Key.P,flambe_input_Key.Q,flambe_input_Key.R,flambe_input_Key.S,flambe_input_Key.T,flambe_input_Key.U,flambe_input_Key.V,flambe_input_Key.W,flambe_input_Key.X,flambe_input_Key.Y,flambe_input_Key.Z,flambe_input_Key.Number0,flambe_input_Key.Number1,flambe_input_Key.Number2,flambe_input_Key.Number3,flambe_input_Key.Number4,flambe_input_Key.Number5,flambe_input_Key.Number6,flambe_input_Key.Number7,flambe_input_Key.Number8,flambe_input_Key.Number9,flambe_input_Key.Numpad0,flambe_input_Key.Numpad1,flambe_input_Key.Numpad2,flambe_input_Key.Numpad3,flambe_input_Key.Numpad4,flambe_input_Key.Numpad5,flambe_input_Key.Numpad6,flambe_input_Key.Numpad7,flambe_input_Key.Numpad8,flambe_input_Key.Numpad9,flambe_input_Key.NumpadAdd,flambe_input_Key.NumpadDecimal,flambe_input_Key.NumpadDivide,flambe_input_Key.NumpadEnter,flambe_input_Key.NumpadMultiply,flambe_input_Key.NumpadSubtract,flambe_input_Key.F1,flambe_input_Key.F2,flambe_input_Key.F3,flambe_input_Key.F4,flambe_input_Key.F5,flambe_input_Key.F6,flambe_input_Key.F7,flambe_input_Key.F8,flambe_input_Key.F9,flambe_input_Key.F10,flambe_input_Key.F11,flambe_input_Key.F12,flambe_input_Key.F13,flambe_input_Key.F14,flambe_input_Key.F15,flambe_input_Key.Left,flambe_input_Key.Up,flambe_input_Key.Right,flambe_input_Key.Down,flambe_input_Key.Alt,flambe_input_Key.Backquote,flambe_input_Key.Backslash,flambe_input_Key.Backspace,flambe_input_Key.CapsLock,flambe_input_Key.Comma,flambe_input_Key.Command,flambe_input_Key.Control,flambe_input_Key.Delete,flambe_input_Key.End,flambe_input_Key.Enter,flambe_input_Key.Equals,flambe_input_Key.Escape,flambe_input_Key.Home,flambe_input_Key.Insert,flambe_input_Key.LeftBracket,flambe_input_Key.Minus,flambe_input_Key.PageDown,flambe_input_Key.PageUp,flambe_input_Key.Period,flambe_input_Key.Quote,flambe_input_Key.RightBracket,flambe_input_Key.Semicolon,flambe_input_Key.Shift,flambe_input_Key.Slash,flambe_input_Key.Space,flambe_input_Key.Tab,flambe_input_Key.Menu,flambe_input_Key.Search];
var flambe_input_KeyboardEvent = function() {
	this.init(0,null);
};
$hxClasses["flambe.input.KeyboardEvent"] = flambe_input_KeyboardEvent;
flambe_input_KeyboardEvent.__name__ = ["flambe","input","KeyboardEvent"];
flambe_input_KeyboardEvent.prototype = {
	init: function(id,key) {
		this.id = id;
		this.key = key;
	}
	,__class__: flambe_input_KeyboardEvent
};
var flambe_input_MouseButton = $hxClasses["flambe.input.MouseButton"] = { __ename__ : ["flambe","input","MouseButton"], __constructs__ : ["Left","Middle","Right","Unknown"] };
flambe_input_MouseButton.Left = ["Left",0];
flambe_input_MouseButton.Left.__enum__ = flambe_input_MouseButton;
flambe_input_MouseButton.Middle = ["Middle",1];
flambe_input_MouseButton.Middle.__enum__ = flambe_input_MouseButton;
flambe_input_MouseButton.Right = ["Right",2];
flambe_input_MouseButton.Right.__enum__ = flambe_input_MouseButton;
flambe_input_MouseButton.Unknown = function(buttonCode) { var $x = ["Unknown",3,buttonCode]; $x.__enum__ = flambe_input_MouseButton; return $x; };
flambe_input_MouseButton.__empty_constructs__ = [flambe_input_MouseButton.Left,flambe_input_MouseButton.Middle,flambe_input_MouseButton.Right];
var flambe_input_MouseCursor = $hxClasses["flambe.input.MouseCursor"] = { __ename__ : ["flambe","input","MouseCursor"], __constructs__ : ["Default","Button","None"] };
flambe_input_MouseCursor.Default = ["Default",0];
flambe_input_MouseCursor.Default.__enum__ = flambe_input_MouseCursor;
flambe_input_MouseCursor.Button = ["Button",1];
flambe_input_MouseCursor.Button.__enum__ = flambe_input_MouseCursor;
flambe_input_MouseCursor.None = ["None",2];
flambe_input_MouseCursor.None.__enum__ = flambe_input_MouseCursor;
flambe_input_MouseCursor.__empty_constructs__ = [flambe_input_MouseCursor.Default,flambe_input_MouseCursor.Button,flambe_input_MouseCursor.None];
var flambe_input_MouseEvent = function() {
	this.init(0,0,0,null);
};
$hxClasses["flambe.input.MouseEvent"] = flambe_input_MouseEvent;
flambe_input_MouseEvent.__name__ = ["flambe","input","MouseEvent"];
flambe_input_MouseEvent.prototype = {
	init: function(id,viewX,viewY,button) {
		this.id = id;
		this.viewX = viewX;
		this.viewY = viewY;
		this.button = button;
	}
	,__class__: flambe_input_MouseEvent
};
var flambe_input_EventSource = $hxClasses["flambe.input.EventSource"] = { __ename__ : ["flambe","input","EventSource"], __constructs__ : ["Mouse","Touch"] };
flambe_input_EventSource.Mouse = function(event) { var $x = ["Mouse",0,event]; $x.__enum__ = flambe_input_EventSource; return $x; };
flambe_input_EventSource.Touch = function(point) { var $x = ["Touch",1,point]; $x.__enum__ = flambe_input_EventSource; return $x; };
flambe_input_EventSource.__empty_constructs__ = [];
var flambe_input_PointerEvent = function() {
	this.init(0,0,0,null,null);
};
$hxClasses["flambe.input.PointerEvent"] = flambe_input_PointerEvent;
flambe_input_PointerEvent.__name__ = ["flambe","input","PointerEvent"];
flambe_input_PointerEvent.prototype = {
	init: function(id,viewX,viewY,hit,source) {
		this.id = id;
		this.viewX = viewX;
		this.viewY = viewY;
		this.hit = hit;
		this.source = source;
		this._stopped = false;
	}
	,__class__: flambe_input_PointerEvent
};
var flambe_input_TouchPoint = function(id) {
	this.id = id;
	this._source = flambe_input_EventSource.Touch(this);
};
$hxClasses["flambe.input.TouchPoint"] = flambe_input_TouchPoint;
flambe_input_TouchPoint.__name__ = ["flambe","input","TouchPoint"];
flambe_input_TouchPoint.prototype = {
	init: function(viewX,viewY) {
		this.viewX = viewX;
		this.viewY = viewY;
	}
	,__class__: flambe_input_TouchPoint
};
var flambe_math_FMath = function() { };
$hxClasses["flambe.math.FMath"] = flambe_math_FMath;
flambe_math_FMath.__name__ = ["flambe","math","FMath"];
flambe_math_FMath.toRadians = function(degrees) {
	return degrees * 3.141592653589793 / 180;
};
flambe_math_FMath.toDegrees = function(radians) {
	return radians * 180 / 3.141592653589793;
};
flambe_math_FMath.max = function(a,b) {
	if(a > b) return a; else return b;
};
flambe_math_FMath.min = function(a,b) {
	if(a < b) return a; else return b;
};
flambe_math_FMath.clamp = function(value,min,max) {
	if(value < min) return min; else if(value > max) return max; else return value;
};
var flambe_math_Matrix = function() {
	this.identity();
};
$hxClasses["flambe.math.Matrix"] = flambe_math_Matrix;
flambe_math_Matrix.__name__ = ["flambe","math","Matrix"];
flambe_math_Matrix.multiply = function(lhs,rhs,result) {
	if(result == null) result = new flambe_math_Matrix();
	var a = lhs.m00 * rhs.m00 + lhs.m01 * rhs.m10;
	var b = lhs.m00 * rhs.m01 + lhs.m01 * rhs.m11;
	var c = lhs.m00 * rhs.m02 + lhs.m01 * rhs.m12 + lhs.m02;
	result.m00 = a;
	result.m01 = b;
	result.m02 = c;
	a = lhs.m10 * rhs.m00 + lhs.m11 * rhs.m10;
	b = lhs.m10 * rhs.m01 + lhs.m11 * rhs.m11;
	c = lhs.m10 * rhs.m02 + lhs.m11 * rhs.m12 + lhs.m12;
	result.m10 = a;
	result.m11 = b;
	result.m12 = c;
	return result;
};
flambe_math_Matrix.prototype = {
	set: function(m00,m10,m01,m11,m02,m12) {
		this.m00 = m00;
		this.m01 = m01;
		this.m02 = m02;
		this.m10 = m10;
		this.m11 = m11;
		this.m12 = m12;
	}
	,identity: function() {
		this.set(1,0,0,1,0,0);
	}
	,compose: function(x,y,scaleX,scaleY,rotation) {
		var sin = Math.sin(rotation);
		var cos = Math.cos(rotation);
		this.set(cos * scaleX,sin * scaleX,-sin * scaleY,cos * scaleY,x,y);
	}
	,translate: function(x,y) {
		this.m02 += this.m00 * x + this.m01 * y;
		this.m12 += this.m11 * y + this.m10 * x;
	}
	,invert: function() {
		var det = this.determinant();
		if(det == 0) return false;
		this.set(this.m11 / det,-this.m01 / det,-this.m10 / det,this.m00 / det,(this.m01 * this.m12 - this.m11 * this.m02) / det,(this.m10 * this.m02 - this.m00 * this.m12) / det);
		return true;
	}
	,transform: function(x,y,result) {
		if(result == null) result = new flambe_math_Point();
		result.x = x * this.m00 + y * this.m01 + this.m02;
		result.y = x * this.m10 + y * this.m11 + this.m12;
		return result;
	}
	,transformArray: function(points,length,result) {
		var ii = 0;
		while(ii < length) {
			var x = points[ii];
			var y = points[ii + 1];
			result[ii++] = x * this.m00 + y * this.m01 + this.m02;
			result[ii++] = x * this.m10 + y * this.m11 + this.m12;
		}
	}
	,determinant: function() {
		return this.m00 * this.m11 - this.m01 * this.m10;
	}
	,inverseTransform: function(x,y,result) {
		var det = this.determinant();
		if(det == 0) return false;
		x -= this.m02;
		y -= this.m12;
		result.x = (x * this.m11 - y * this.m01) / det;
		result.y = (y * this.m00 - x * this.m10) / det;
		return true;
	}
	,clone: function(result) {
		if(result == null) result = new flambe_math_Matrix();
		result.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);
		return result;
	}
	,toString: function() {
		return this.m00 + " " + this.m01 + " " + this.m02 + " \\ " + this.m10 + " " + this.m11 + " " + this.m12;
	}
	,__class__: flambe_math_Matrix
};
var flambe_math_Rectangle = function(x,y,width,height) {
	if(height == null) height = 0;
	if(width == null) width = 0;
	if(y == null) y = 0;
	if(x == null) x = 0;
	this.set(x,y,width,height);
};
$hxClasses["flambe.math.Rectangle"] = flambe_math_Rectangle;
flambe_math_Rectangle.__name__ = ["flambe","math","Rectangle"];
flambe_math_Rectangle.prototype = {
	set: function(x,y,width,height) {
		this.x = x;
		this.y = y;
		this.width = width;
		this.height = height;
	}
	,contains: function(x,y) {
		x -= this.x;
		if(this.width >= 0) {
			if(x < 0 || x > this.width) return false;
		} else if(x > 0 || x < this.width) return false;
		y -= this.y;
		if(this.height >= 0) {
			if(y < 0 || y > this.height) return false;
		} else if(y > 0 || y < this.height) return false;
		return true;
	}
	,clone: function(result) {
		if(result == null) result = new flambe_math_Rectangle();
		result.set(this.x,this.y,this.width,this.height);
		return result;
	}
	,equals: function(other) {
		return this.x == other.x && this.y == other.y && this.width == other.width && this.height == other.height;
	}
	,toString: function() {
		return "(" + this.x + "," + this.y + " " + this.width + "x" + this.height + ")";
	}
	,__class__: flambe_math_Rectangle
};
var flambe_platform_BasicAsset = function() {
	this._reloadCount = null;
	this._disposed = false;
};
$hxClasses["flambe.platform.BasicAsset"] = flambe_platform_BasicAsset;
flambe_platform_BasicAsset.__name__ = ["flambe","platform","BasicAsset"];
flambe_platform_BasicAsset.__interfaces__ = [flambe_asset_Asset];
flambe_platform_BasicAsset.prototype = {
	assertNotDisposed: function() {
		flambe_util_Assert.that(!this._disposed,"Asset cannot be used after being disposed");
	}
	,reload: function(asset) {
		this.dispose();
		this._disposed = false;
		this.copyFrom(asset);
		var _g = this.get_reloadCount();
		_g.set__(_g.get__() + 1);
	}
	,dispose: function() {
		if(!this._disposed) {
			this._disposed = true;
			this.onDisposed();
		}
	}
	,copyFrom: function(asset) {
		flambe_util_Assert.fail();
	}
	,onDisposed: function() {
		flambe_util_Assert.fail();
	}
	,get_reloadCount: function() {
		if(this._reloadCount == null) this._reloadCount = new flambe_util_Value(0);
		return this._reloadCount;
	}
	,__class__: flambe_platform_BasicAsset
	,__properties__: {get_reloadCount:"get_reloadCount"}
};
var flambe_platform_BasicAssetPackLoader = function(platform,manifest) {
	var _g = this;
	this.manifest = manifest;
	this._platform = platform;
	this.promise = new flambe_util_Promise();
	this._bytesLoaded = new haxe_ds_StringMap();
	this._pack = new flambe_platform__$BasicAssetPackLoader_BasicAssetPack(manifest,this);
	var entries = Lambda.array(manifest);
	if(entries.length == 0) this.handleSuccess(); else {
		var groups = new haxe_ds_StringMap();
		var _g1 = 0;
		while(_g1 < entries.length) {
			var entry = entries[_g1];
			++_g1;
			var group = groups.get(entry.name);
			if(group == null) {
				group = [];
				groups.set(entry.name,group);
			}
			group.push(entry);
		}
		this._assetsRemaining = Lambda.count(groups);
		var $it0 = groups.iterator();
		while( $it0.hasNext() ) {
			var group1 = $it0.next();
			var group2 = [group1];
			this.pickBestEntry(group2[0],(function(group2) {
				return function(bestEntry) {
					if(bestEntry != null) {
						var url = manifest.getFullURL(bestEntry);
						try {
							_g.loadEntry(url,bestEntry);
						} catch( error ) {
							if (error instanceof js__$Boot_HaxeError) error = error.val;
							_g.handleError(bestEntry,"Unexpected error: " + Std.string(error));
						}
						var _g11 = _g.promise;
						_g11.set_total(_g11.get_total() + bestEntry.bytes);
					} else {
						var badEntry = group2[0][0];
						if(flambe_platform_BasicAssetPackLoader.isAudio(badEntry.format)) {
							flambe_Log.warn("Could not find a supported audio format to load",["name",badEntry.name]);
							_g.handleLoad(badEntry,flambe_platform_DummySound.getInstance());
						} else _g.handleError(badEntry,"Could not find a supported format to load");
					}
				};
			})(group2));
		}
	}
	var catapult = this._platform.getCatapultClient();
	if(catapult != null) catapult.add(this);
};
$hxClasses["flambe.platform.BasicAssetPackLoader"] = flambe_platform_BasicAssetPackLoader;
flambe_platform_BasicAssetPackLoader.__name__ = ["flambe","platform","BasicAssetPackLoader"];
flambe_platform_BasicAssetPackLoader.removeUrlParams = function(url) {
	var query = url.indexOf("?");
	if(query > 0) return HxOverrides.substr(url,0,query); else return url;
};
flambe_platform_BasicAssetPackLoader.isAudio = function(format) {
	switch(Type.enumIndex(format)) {
	case 8:case 9:case 10:case 11:case 12:
		return true;
	default:
		return false;
	}
};
flambe_platform_BasicAssetPackLoader.prototype = {
	reload: function(url) {
		var _g = this;
		var baseUrl = flambe_platform_BasicAssetPackLoader.removeUrlParams(url);
		var foundEntry = null;
		var $it0 = this.manifest.iterator();
		while( $it0.hasNext() ) {
			var entry = $it0.next();
			if(baseUrl == flambe_platform_BasicAssetPackLoader.removeUrlParams(entry.url)) {
				foundEntry = entry;
				break;
			}
		}
		if(foundEntry != null) this.getAssetFormats(function(formats) {
			if(formats.indexOf(foundEntry.format) >= 0) {
				var entry1 = new flambe_asset_AssetEntry(foundEntry.name,url,foundEntry.format,0);
				_g.loadEntry(_g.manifest.getFullURL(entry1),entry1);
			}
		});
	}
	,onDisposed: function() {
		var catapult = this._platform.getCatapultClient();
		if(catapult != null) catapult.remove(this);
	}
	,pickBestEntry: function(entries,fn) {
		var onFormatsAvailable = function(formats) {
			var _g = 0;
			while(_g < formats.length) {
				var format = formats[_g];
				++_g;
				var _g1 = 0;
				while(_g1 < entries.length) {
					var entry = entries[_g1];
					++_g1;
					if(entry.format == format) {
						fn(entry);
						return;
					}
				}
			}
			fn(null);
		};
		this.getAssetFormats(onFormatsAvailable);
	}
	,loadEntry: function(url,entry) {
		flambe_util_Assert.fail();
	}
	,getAssetFormats: function(fn) {
		flambe_util_Assert.fail();
	}
	,handleLoad: function(entry,asset) {
		if(this._pack.disposed) return;
		this.handleProgress(entry,entry.bytes);
		var map;
		var _g = entry.format;
		switch(Type.enumIndex(_g)) {
		case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:
			map = this._pack.textures;
			break;
		case 8:case 9:case 10:case 11:case 12:
			map = this._pack.sounds;
			break;
		case 13:
			map = this._pack.files;
			break;
		}
		var oldAsset = map.get(entry.name);
		if(oldAsset != null) {
			flambe_Log.info("Reloaded asset",["url",entry.url]);
			oldAsset.reload(asset);
		} else {
			map.set(entry.name,asset);
			this._assetsRemaining -= 1;
			if(this._assetsRemaining == 0) this.handleSuccess();
		}
	}
	,handleProgress: function(entry,bytesLoaded) {
		this._bytesLoaded.set(entry.name,bytesLoaded);
		var bytesTotal = 0;
		var $it0 = this._bytesLoaded.iterator();
		while( $it0.hasNext() ) {
			var bytes = $it0.next();
			bytesTotal += bytes;
		}
		this.promise.set_progress(bytesTotal);
	}
	,handleSuccess: function() {
		this.promise.set_result(this._pack);
	}
	,handleError: function(entry,message) {
		flambe_Log.warn("Error loading asset pack",["error",message,"url",entry.url]);
		this.promise.error.emit(flambe_util_Strings.withFields(message,["url",entry.url]));
	}
	,handleTextureError: function(entry) {
		this.handleError(entry,"Failed to create texture. Is the GPU context unavailable?");
	}
	,__class__: flambe_platform_BasicAssetPackLoader
};
var flambe_platform__$BasicAssetPackLoader_BasicAssetPack = function(manifest,loader) {
	this.disposed = false;
	this._manifest = manifest;
	this.loader = loader;
	this.textures = new haxe_ds_StringMap();
	this.sounds = new haxe_ds_StringMap();
	this.files = new haxe_ds_StringMap();
};
$hxClasses["flambe.platform._BasicAssetPackLoader.BasicAssetPack"] = flambe_platform__$BasicAssetPackLoader_BasicAssetPack;
flambe_platform__$BasicAssetPackLoader_BasicAssetPack.__name__ = ["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];
flambe_platform__$BasicAssetPackLoader_BasicAssetPack.__interfaces__ = [flambe_asset_AssetPack];
flambe_platform__$BasicAssetPackLoader_BasicAssetPack.warnOnExtension = function(path) {
	var ext = flambe_util_Strings.getFileExtension(path);
	if(ext != null && ext.length == 3) flambe_Log.warn("Requested asset \"" + path + "\" should not have a file extension," + " did you mean \"" + flambe_util_Strings.removeFileExtension(path) + "\"?");
};
flambe_platform__$BasicAssetPackLoader_BasicAssetPack.prototype = {
	getTexture: function(name,required) {
		if(required == null) required = true;
		this.assertNotDisposed();
		flambe_platform__$BasicAssetPackLoader_BasicAssetPack.warnOnExtension(name);
		var texture = this.textures.get(name);
		if(texture == null && required) throw new js__$Boot_HaxeError(flambe_util_Strings.withFields("Missing texture",["name",name]));
		return texture;
	}
	,getSound: function(name,required) {
		if(required == null) required = true;
		this.assertNotDisposed();
		flambe_platform__$BasicAssetPackLoader_BasicAssetPack.warnOnExtension(name);
		var sound = this.sounds.get(name);
		if(sound == null && required) throw new js__$Boot_HaxeError(flambe_util_Strings.withFields("Missing sound",["name",name]));
		return sound;
	}
	,getFile: function(name,required) {
		if(required == null) required = true;
		this.assertNotDisposed();
		var file = this.files.get(name);
		if(file == null && required) throw new js__$Boot_HaxeError(flambe_util_Strings.withFields("Missing file",["name",name]));
		return file;
	}
	,dispose: function() {
		if(!this.disposed) {
			this.disposed = true;
			var $it0 = this.textures.iterator();
			while( $it0.hasNext() ) {
				var texture = $it0.next();
				texture.dispose();
			}
			this.textures = null;
			var $it1 = this.sounds.iterator();
			while( $it1.hasNext() ) {
				var sound = $it1.next();
				sound.dispose();
			}
			this.sounds = null;
			var $it2 = this.files.iterator();
			while( $it2.hasNext() ) {
				var file = $it2.next();
				file.dispose();
			}
			this.files = null;
			this.loader.onDisposed();
		}
	}
	,assertNotDisposed: function() {
		flambe_util_Assert.that(!this.disposed,"AssetPack cannot be used after being disposed");
	}
	,__class__: flambe_platform__$BasicAssetPackLoader_BasicAssetPack
};
var flambe_platform_BasicFile = function(content) {
	flambe_platform_BasicAsset.call(this);
	this._content = content;
};
$hxClasses["flambe.platform.BasicFile"] = flambe_platform_BasicFile;
flambe_platform_BasicFile.__name__ = ["flambe","platform","BasicFile"];
flambe_platform_BasicFile.__interfaces__ = [flambe_asset_File];
flambe_platform_BasicFile.__super__ = flambe_platform_BasicAsset;
flambe_platform_BasicFile.prototype = $extend(flambe_platform_BasicAsset.prototype,{
	toString: function() {
		this.assertNotDisposed();
		return this._content;
	}
	,copyFrom: function(that) {
		this._content = that._content;
	}
	,onDisposed: function() {
		this._content = null;
	}
	,__class__: flambe_platform_BasicFile
});
var flambe_subsystem_KeyboardSystem = function() { };
$hxClasses["flambe.subsystem.KeyboardSystem"] = flambe_subsystem_KeyboardSystem;
flambe_subsystem_KeyboardSystem.__name__ = ["flambe","subsystem","KeyboardSystem"];
flambe_subsystem_KeyboardSystem.prototype = {
	__class__: flambe_subsystem_KeyboardSystem
};
var flambe_platform_BasicKeyboard = function() {
	this.down = new flambe_util_Signal1();
	this.up = new flambe_util_Signal1();
	this.backButton = new flambe_util_Signal0();
	this._keyStates = new haxe_ds_IntMap();
};
$hxClasses["flambe.platform.BasicKeyboard"] = flambe_platform_BasicKeyboard;
flambe_platform_BasicKeyboard.__name__ = ["flambe","platform","BasicKeyboard"];
flambe_platform_BasicKeyboard.__interfaces__ = [flambe_subsystem_KeyboardSystem];
flambe_platform_BasicKeyboard.prototype = {
	isDown: function(key) {
		return this.isCodeDown(flambe_platform_KeyCodes.toKeyCode(key));
	}
	,isCodeDown: function(keyCode) {
		return this._keyStates.exists(keyCode);
	}
	,submitDown: function(keyCode) {
		if(keyCode == 16777238) {
			if(this.backButton.hasListeners()) {
				this.backButton.emit();
				return true;
			}
			return false;
		}
		if(!this.isCodeDown(keyCode)) {
			this._keyStates.set(keyCode,true);
			flambe_platform_BasicKeyboard._sharedEvent.init(flambe_platform_BasicKeyboard._sharedEvent.id + 1,flambe_platform_KeyCodes.toKey(keyCode));
			this.down.emit(flambe_platform_BasicKeyboard._sharedEvent);
		}
		return true;
	}
	,submitUp: function(keyCode) {
		if(this.isCodeDown(keyCode)) {
			this._keyStates.remove(keyCode);
			flambe_platform_BasicKeyboard._sharedEvent.init(flambe_platform_BasicKeyboard._sharedEvent.id + 1,flambe_platform_KeyCodes.toKey(keyCode));
			this.up.emit(flambe_platform_BasicKeyboard._sharedEvent);
		}
	}
	,__class__: flambe_platform_BasicKeyboard
};
var flambe_subsystem_MouseSystem = function() { };
$hxClasses["flambe.subsystem.MouseSystem"] = flambe_subsystem_MouseSystem;
flambe_subsystem_MouseSystem.__name__ = ["flambe","subsystem","MouseSystem"];
flambe_subsystem_MouseSystem.prototype = {
	__class__: flambe_subsystem_MouseSystem
};
var flambe_platform_BasicMouse = function(pointer) {
	this._pointer = pointer;
	this._source = flambe_input_EventSource.Mouse(flambe_platform_BasicMouse._sharedEvent);
	this.down = new flambe_util_Signal1();
	this.move = new flambe_util_Signal1();
	this.up = new flambe_util_Signal1();
	this.scroll = new flambe_util_Signal1();
	this._x = 0;
	this._y = 0;
	this._cursor = flambe_input_MouseCursor.Default;
	this._buttonStates = new haxe_ds_IntMap();
};
$hxClasses["flambe.platform.BasicMouse"] = flambe_platform_BasicMouse;
flambe_platform_BasicMouse.__name__ = ["flambe","platform","BasicMouse"];
flambe_platform_BasicMouse.__interfaces__ = [flambe_subsystem_MouseSystem];
flambe_platform_BasicMouse.prototype = {
	isDown: function(button) {
		return this.isCodeDown(flambe_platform_MouseCodes.toButtonCode(button));
	}
	,submitDown: function(viewX,viewY,buttonCode) {
		if(!this.isCodeDown(buttonCode)) {
			this._buttonStates.set(buttonCode,true);
			this.prepare(viewX,viewY,flambe_platform_MouseCodes.toButton(buttonCode));
			this._pointer.submitDown(viewX,viewY,this._source);
			this.down.emit(flambe_platform_BasicMouse._sharedEvent);
		}
	}
	,submitMove: function(viewX,viewY) {
		this.prepare(viewX,viewY,null);
		this._pointer.submitMove(viewX,viewY,this._source);
		this.move.emit(flambe_platform_BasicMouse._sharedEvent);
	}
	,submitUp: function(viewX,viewY,buttonCode) {
		if(this.isCodeDown(buttonCode)) {
			this._buttonStates.remove(buttonCode);
			this.prepare(viewX,viewY,flambe_platform_MouseCodes.toButton(buttonCode));
			this._pointer.submitUp(viewX,viewY,this._source);
			this.up.emit(flambe_platform_BasicMouse._sharedEvent);
		}
	}
	,submitScroll: function(viewX,viewY,velocity) {
		this._x = viewX;
		this._y = viewY;
		if(!this.scroll.hasListeners()) return false;
		this.scroll.emit(velocity);
		return true;
	}
	,isCodeDown: function(buttonCode) {
		return this._buttonStates.exists(buttonCode);
	}
	,prepare: function(viewX,viewY,button) {
		this._x = viewX;
		this._y = viewY;
		flambe_platform_BasicMouse._sharedEvent.init(flambe_platform_BasicMouse._sharedEvent.id + 1,viewX,viewY,button);
	}
	,__class__: flambe_platform_BasicMouse
};
var flambe_subsystem_PointerSystem = function() { };
$hxClasses["flambe.subsystem.PointerSystem"] = flambe_subsystem_PointerSystem;
flambe_subsystem_PointerSystem.__name__ = ["flambe","subsystem","PointerSystem"];
flambe_subsystem_PointerSystem.prototype = {
	__class__: flambe_subsystem_PointerSystem
	,__properties__: {get_y:"get_y",get_x:"get_x"}
};
var flambe_platform_BasicPointer = function(x,y,isDown) {
	if(isDown == null) isDown = false;
	if(y == null) y = 0;
	if(x == null) x = 0;
	this.down = new flambe_util_Signal1();
	this.move = new flambe_util_Signal1();
	this.up = new flambe_util_Signal1();
	this._x = x;
	this._y = y;
	this._isDown = isDown;
};
$hxClasses["flambe.platform.BasicPointer"] = flambe_platform_BasicPointer;
flambe_platform_BasicPointer.__name__ = ["flambe","platform","BasicPointer"];
flambe_platform_BasicPointer.__interfaces__ = [flambe_subsystem_PointerSystem];
flambe_platform_BasicPointer.prototype = {
	get_x: function() {
		return this._x;
	}
	,get_y: function() {
		return this._y;
	}
	,isDown: function() {
		return this._isDown;
	}
	,submitDown: function(viewX,viewY,source) {
		if(this._isDown) return;
		this.submitMove(viewX,viewY,source);
		this._isDown = true;
		var chain = [];
		var hit = flambe_display_Sprite.hitTest(flambe_System.root,viewX,viewY);
		if(hit != null) {
			var entity = hit.owner;
			do {
				var sprite;
				var component = entity.getComponent("Sprite_3");
				sprite = component;
				if(sprite != null) chain.push(sprite);
				entity = entity.parent;
			} while(entity != null);
		}
		this.prepare(viewX,viewY,hit,source);
		var _g = 0;
		while(_g < chain.length) {
			var sprite1 = chain[_g];
			++_g;
			sprite1.onPointerDown(flambe_platform_BasicPointer._sharedEvent);
			if(flambe_platform_BasicPointer._sharedEvent._stopped) return;
		}
		this.down.emit(flambe_platform_BasicPointer._sharedEvent);
	}
	,submitMove: function(viewX,viewY,source) {
		if(viewX == this._x && viewY == this._y) return;
		var chain = [];
		var hit = flambe_display_Sprite.hitTest(flambe_System.root,viewX,viewY);
		if(hit != null) {
			var entity = hit.owner;
			do {
				var sprite;
				var component = entity.getComponent("Sprite_3");
				sprite = component;
				if(sprite != null) chain.push(sprite);
				entity = entity.parent;
			} while(entity != null);
		}
		this.prepare(viewX,viewY,hit,source);
		var _g = 0;
		while(_g < chain.length) {
			var sprite1 = chain[_g];
			++_g;
			sprite1.onPointerMove(flambe_platform_BasicPointer._sharedEvent);
			if(flambe_platform_BasicPointer._sharedEvent._stopped) return;
		}
		this.move.emit(flambe_platform_BasicPointer._sharedEvent);
	}
	,submitUp: function(viewX,viewY,source) {
		if(!this._isDown) return;
		this.submitMove(viewX,viewY,source);
		this._isDown = false;
		var chain = [];
		var hit = flambe_display_Sprite.hitTest(flambe_System.root,viewX,viewY);
		if(hit != null) {
			var entity = hit.owner;
			do {
				var sprite;
				var component = entity.getComponent("Sprite_3");
				sprite = component;
				if(sprite != null) chain.push(sprite);
				entity = entity.parent;
			} while(entity != null);
		}
		this.prepare(viewX,viewY,hit,source);
		var _g = 0;
		while(_g < chain.length) {
			var sprite1 = chain[_g];
			++_g;
			sprite1.onPointerUp(flambe_platform_BasicPointer._sharedEvent);
			if(flambe_platform_BasicPointer._sharedEvent._stopped) return;
		}
		this.up.emit(flambe_platform_BasicPointer._sharedEvent);
	}
	,prepare: function(viewX,viewY,hit,source) {
		this._x = viewX;
		this._y = viewY;
		flambe_platform_BasicPointer._sharedEvent.init(flambe_platform_BasicPointer._sharedEvent.id + 1,viewX,viewY,hit,source);
	}
	,__class__: flambe_platform_BasicPointer
	,__properties__: {get_y:"get_y",get_x:"get_x"}
};
var flambe_platform_BasicTexture = function(root,width,height) {
	this._y = 0;
	this._x = 0;
	this._parent = null;
	this.rootY = 0;
	this.rootX = 0;
	flambe_platform_BasicAsset.call(this);
	this.root = root;
	this._width = width;
	this._height = height;
};
$hxClasses["flambe.platform.BasicTexture"] = flambe_platform_BasicTexture;
flambe_platform_BasicTexture.__name__ = ["flambe","platform","BasicTexture"];
flambe_platform_BasicTexture.__interfaces__ = [flambe_display_SubTexture];
flambe_platform_BasicTexture.__super__ = flambe_platform_BasicAsset;
flambe_platform_BasicTexture.prototype = $extend(flambe_platform_BasicAsset.prototype,{
	subTexture: function(x,y,width,height) {
		var sub = this.root.createTexture(width,height);
		sub._parent = this;
		sub._x = x;
		sub._y = y;
		sub.rootX = this.rootX + x;
		sub.rootY = this.rootY + y;
		return sub;
	}
	,copyFrom: function(that) {
		this.root._disposed = false;
		this.root.copyFrom(that.root);
		this._width = that._width;
		this._height = that._height;
		flambe_util_Assert.that(this.rootX == that.rootX && this.rootY == that.rootY && this._x == that._x && this._y == that._y);
	}
	,onDisposed: function() {
		if(this._parent == null) this.root.dispose();
	}
	,get_reloadCount: function() {
		return this.root.get_reloadCount();
	}
	,get_width: function() {
		return this._width;
	}
	,get_height: function() {
		return this._height;
	}
	,__class__: flambe_platform_BasicTexture
	,__properties__: $extend(flambe_platform_BasicAsset.prototype.__properties__,{get_height:"get_height",get_width:"get_width"})
});
var flambe_subsystem_TouchSystem = function() { };
$hxClasses["flambe.subsystem.TouchSystem"] = flambe_subsystem_TouchSystem;
flambe_subsystem_TouchSystem.__name__ = ["flambe","subsystem","TouchSystem"];
var flambe_platform_BasicTouch = function(pointer,maxPoints) {
	if(maxPoints == null) maxPoints = 4;
	this._pointer = pointer;
	this._maxPoints = maxPoints;
	this._pointMap = new haxe_ds_IntMap();
	this._points = [];
	this.down = new flambe_util_Signal1();
	this.move = new flambe_util_Signal1();
	this.up = new flambe_util_Signal1();
};
$hxClasses["flambe.platform.BasicTouch"] = flambe_platform_BasicTouch;
flambe_platform_BasicTouch.__name__ = ["flambe","platform","BasicTouch"];
flambe_platform_BasicTouch.__interfaces__ = [flambe_subsystem_TouchSystem];
flambe_platform_BasicTouch.prototype = {
	submitDown: function(id,viewX,viewY) {
		if(!this._pointMap.exists(id)) {
			var point = new flambe_input_TouchPoint(id);
			point.init(viewX,viewY);
			this._pointMap.set(id,point);
			this._points.push(point);
			if(this._pointerTouch == null) {
				this._pointerTouch = point;
				this._pointer.submitDown(viewX,viewY,point._source);
			}
			this.down.emit(point);
		}
	}
	,submitMove: function(id,viewX,viewY) {
		var point = this._pointMap.get(id);
		if(point != null) {
			point.init(viewX,viewY);
			if(this._pointerTouch == point) this._pointer.submitMove(viewX,viewY,point._source);
			this.move.emit(point);
		}
	}
	,submitUp: function(id,viewX,viewY) {
		var point = this._pointMap.get(id);
		if(point != null) {
			point.init(viewX,viewY);
			this._pointMap.remove(id);
			HxOverrides.remove(this._points,point);
			if(this._pointerTouch == point) {
				this._pointerTouch = null;
				this._pointer.submitUp(viewX,viewY,point._source);
			}
			this.up.emit(point);
		}
	}
	,__class__: flambe_platform_BasicTouch
};
var flambe_platform_CatapultClient = function() {
	this._loaders = [];
};
$hxClasses["flambe.platform.CatapultClient"] = flambe_platform_CatapultClient;
flambe_platform_CatapultClient.__name__ = ["flambe","platform","CatapultClient"];
flambe_platform_CatapultClient.prototype = {
	add: function(loader) {
		if(loader.manifest.get_localBase() == "assets") this._loaders.push(loader);
	}
	,remove: function(loader) {
		HxOverrides.remove(this._loaders,loader);
	}
	,onError: function(cause) {
		flambe_Log.warn("Unable to connect to Catapult",["cause",cause]);
	}
	,onMessage: function(message) {
		var message1 = JSON.parse(message);
		var _g = message1.type;
		switch(_g) {
		case "file_changed":
			var url = message1.name + "?v=" + message1.md5;
			url = StringTools.replace(url,"\\","/");
			var _g1 = 0;
			var _g2 = this._loaders;
			while(_g1 < _g2.length) {
				var loader = _g2[_g1];
				++_g1;
				loader.reload(url);
			}
			break;
		case "restart":
			this.onRestart();
			break;
		}
	}
	,onRestart: function() {
		flambe_util_Assert.fail();
	}
	,__class__: flambe_platform_CatapultClient
};
var flambe_platform_DebugLogic = function(platform) {
	var _g = this;
	this._platform = platform;
	platform.getKeyboard().down.connect(function(event) {
		if(event.key == flambe_input_Key.O && platform.getKeyboard().isDown(flambe_input_Key.Control)) {
			if(_g.toggleOverdrawGraphics()) flambe_Log.info("Enabled overdraw visualizer, press Ctrl-O again to disable");
		}
	});
};
$hxClasses["flambe.platform.DebugLogic"] = flambe_platform_DebugLogic;
flambe_platform_DebugLogic.__name__ = ["flambe","platform","DebugLogic"];
flambe_platform_DebugLogic.prototype = {
	toggleOverdrawGraphics: function() {
		var renderer = this._platform.getRenderer();
		if(this._savedGraphics != null) {
			renderer.graphics = this._savedGraphics;
			this._savedGraphics = null;
		} else if(renderer.graphics != null) {
			this._savedGraphics = renderer.graphics;
			renderer.graphics = new flambe_platform_OverdrawGraphics(this._savedGraphics);
			return true;
		}
		return false;
	}
	,__class__: flambe_platform_DebugLogic
};
var flambe_sound_Sound = function() { };
$hxClasses["flambe.sound.Sound"] = flambe_sound_Sound;
flambe_sound_Sound.__name__ = ["flambe","sound","Sound"];
flambe_sound_Sound.__interfaces__ = [flambe_asset_Asset];
flambe_sound_Sound.prototype = {
	__class__: flambe_sound_Sound
};
var flambe_platform_DummySound = function() {
	flambe_platform_BasicAsset.call(this);
	this._playback = new flambe_platform_DummyPlayback(this);
};
$hxClasses["flambe.platform.DummySound"] = flambe_platform_DummySound;
flambe_platform_DummySound.__name__ = ["flambe","platform","DummySound"];
flambe_platform_DummySound.__interfaces__ = [flambe_sound_Sound];
flambe_platform_DummySound.getInstance = function() {
	if(flambe_platform_DummySound._instance == null) flambe_platform_DummySound._instance = new flambe_platform_DummySound();
	return flambe_platform_DummySound._instance;
};
flambe_platform_DummySound.__super__ = flambe_platform_BasicAsset;
flambe_platform_DummySound.prototype = $extend(flambe_platform_BasicAsset.prototype,{
	play: function(volume) {
		if(volume == null) volume = 1.0;
		return this._playback;
	}
	,loop: function(volume) {
		if(volume == null) volume = 1.0;
		return this._playback;
	}
	,copyFrom: function(asset) {
	}
	,onDisposed: function() {
	}
	,__class__: flambe_platform_DummySound
});
var flambe_sound_Playback = function() { };
$hxClasses["flambe.sound.Playback"] = flambe_sound_Playback;
flambe_sound_Playback.__name__ = ["flambe","sound","Playback"];
flambe_sound_Playback.__interfaces__ = [flambe_util_Disposable];
flambe_sound_Playback.prototype = {
	__class__: flambe_sound_Playback
	,__properties__: {get_complete:"get_complete"}
};
var flambe_platform_DummyPlayback = function(sound) {
	this._sound = sound;
	this.volume = new flambe_animation_AnimatedFloat(0);
	this._complete = new flambe_util_Value(true);
};
$hxClasses["flambe.platform.DummyPlayback"] = flambe_platform_DummyPlayback;
flambe_platform_DummyPlayback.__name__ = ["flambe","platform","DummyPlayback"];
flambe_platform_DummyPlayback.__interfaces__ = [flambe_sound_Playback];
flambe_platform_DummyPlayback.prototype = {
	get_complete: function() {
		return this._complete;
	}
	,dispose: function() {
	}
	,__class__: flambe_platform_DummyPlayback
	,__properties__: {get_complete:"get_complete"}
};
var flambe_subsystem_StorageSystem = function() { };
$hxClasses["flambe.subsystem.StorageSystem"] = flambe_subsystem_StorageSystem;
flambe_subsystem_StorageSystem.__name__ = ["flambe","subsystem","StorageSystem"];
flambe_subsystem_StorageSystem.prototype = {
	__class__: flambe_subsystem_StorageSystem
	,__properties__: {get_supported:"get_supported"}
};
var flambe_platform_DummyStorage = function() {
	this.clear();
};
$hxClasses["flambe.platform.DummyStorage"] = flambe_platform_DummyStorage;
flambe_platform_DummyStorage.__name__ = ["flambe","platform","DummyStorage"];
flambe_platform_DummyStorage.__interfaces__ = [flambe_subsystem_StorageSystem];
flambe_platform_DummyStorage.prototype = {
	get_supported: function() {
		return false;
	}
	,set: function(key,value) {
		var value1 = value;
		this._hash.set(key,value1);
		return true;
	}
	,get: function(key,defaultValue) {
		if(this._hash.exists(key)) return this._hash.get(key); else return defaultValue;
	}
	,remove: function(key) {
		this._hash.remove(key);
	}
	,clear: function() {
		this._hash = new haxe_ds_StringMap();
	}
	,__class__: flambe_platform_DummyStorage
	,__properties__: {get_supported:"get_supported"}
};
var flambe_platform_DummyTouch = function() {
	this.down = new flambe_util_Signal1();
	this.move = new flambe_util_Signal1();
	this.up = new flambe_util_Signal1();
};
$hxClasses["flambe.platform.DummyTouch"] = flambe_platform_DummyTouch;
flambe_platform_DummyTouch.__name__ = ["flambe","platform","DummyTouch"];
flambe_platform_DummyTouch.__interfaces__ = [flambe_subsystem_TouchSystem];
flambe_platform_DummyTouch.prototype = {
	__class__: flambe_platform_DummyTouch
};
var flambe_platform_EventGroup = function() {
	this._entries = [];
};
$hxClasses["flambe.platform.EventGroup"] = flambe_platform_EventGroup;
flambe_platform_EventGroup.__name__ = ["flambe","platform","EventGroup"];
flambe_platform_EventGroup.__interfaces__ = [flambe_util_Disposable];
flambe_platform_EventGroup.prototype = {
	addListener: function(dispatcher,type,listener) {
		dispatcher.addEventListener(type,listener,false);
		this._entries.push(new flambe_platform__$EventGroup_Entry(dispatcher,type,listener));
	}
	,addDisposingListener: function(dispatcher,type,listener) {
		var _g = this;
		this.addListener(dispatcher,type,function(event) {
			_g.dispose();
			listener(event);
		});
	}
	,dispose: function() {
		var _g = 0;
		var _g1 = this._entries;
		while(_g < _g1.length) {
			var entry = _g1[_g];
			++_g;
			entry.dispatcher.removeEventListener(entry.type,entry.listener,false);
		}
		this._entries = [];
	}
	,__class__: flambe_platform_EventGroup
};
var flambe_platform__$EventGroup_Entry = function(dispatcher,type,listener) {
	this.dispatcher = dispatcher;
	this.type = type;
	this.listener = listener;
};
$hxClasses["flambe.platform._EventGroup.Entry"] = flambe_platform__$EventGroup_Entry;
flambe_platform__$EventGroup_Entry.__name__ = ["flambe","platform","_EventGroup","Entry"];
flambe_platform__$EventGroup_Entry.prototype = {
	__class__: flambe_platform__$EventGroup_Entry
};
var flambe_platform_InternalGraphics = function() { };
$hxClasses["flambe.platform.InternalGraphics"] = flambe_platform_InternalGraphics;
flambe_platform_InternalGraphics.__name__ = ["flambe","platform","InternalGraphics"];
flambe_platform_InternalGraphics.__interfaces__ = [flambe_display_Graphics];
flambe_platform_InternalGraphics.prototype = {
	__class__: flambe_platform_InternalGraphics
};
var flambe_subsystem_RendererSystem = function() { };
$hxClasses["flambe.subsystem.RendererSystem"] = flambe_subsystem_RendererSystem;
flambe_subsystem_RendererSystem.__name__ = ["flambe","subsystem","RendererSystem"];
flambe_subsystem_RendererSystem.prototype = {
	__class__: flambe_subsystem_RendererSystem
	,__properties__: {get_type:"get_type"}
};
var flambe_platform_InternalRenderer = function() { };
$hxClasses["flambe.platform.InternalRenderer"] = flambe_platform_InternalRenderer;
flambe_platform_InternalRenderer.__name__ = ["flambe","platform","InternalRenderer"];
flambe_platform_InternalRenderer.__interfaces__ = [flambe_subsystem_RendererSystem];
flambe_platform_InternalRenderer.prototype = {
	__class__: flambe_platform_InternalRenderer
};
var flambe_platform_KeyCodes = function() { };
$hxClasses["flambe.platform.KeyCodes"] = flambe_platform_KeyCodes;
flambe_platform_KeyCodes.__name__ = ["flambe","platform","KeyCodes"];
flambe_platform_KeyCodes.toKey = function(keyCode) {
	switch(keyCode) {
	case 65:
		return flambe_input_Key.A;
	case 66:
		return flambe_input_Key.B;
	case 67:
		return flambe_input_Key.C;
	case 68:
		return flambe_input_Key.D;
	case 69:
		return flambe_input_Key.E;
	case 70:
		return flambe_input_Key.F;
	case 71:
		return flambe_input_Key.G;
	case 72:
		return flambe_input_Key.H;
	case 73:
		return flambe_input_Key.I;
	case 74:
		return flambe_input_Key.J;
	case 75:
		return flambe_input_Key.K;
	case 76:
		return flambe_input_Key.L;
	case 77:
		return flambe_input_Key.M;
	case 78:
		return flambe_input_Key.N;
	case 79:
		return flambe_input_Key.O;
	case 80:
		return flambe_input_Key.P;
	case 81:
		return flambe_input_Key.Q;
	case 82:
		return flambe_input_Key.R;
	case 83:
		return flambe_input_Key.S;
	case 84:
		return flambe_input_Key.T;
	case 85:
		return flambe_input_Key.U;
	case 86:
		return flambe_input_Key.V;
	case 87:
		return flambe_input_Key.W;
	case 88:
		return flambe_input_Key.X;
	case 89:
		return flambe_input_Key.Y;
	case 90:
		return flambe_input_Key.Z;
	case 48:
		return flambe_input_Key.Number0;
	case 49:
		return flambe_input_Key.Number1;
	case 50:
		return flambe_input_Key.Number2;
	case 51:
		return flambe_input_Key.Number3;
	case 52:
		return flambe_input_Key.Number4;
	case 53:
		return flambe_input_Key.Number5;
	case 54:
		return flambe_input_Key.Number6;
	case 55:
		return flambe_input_Key.Number7;
	case 56:
		return flambe_input_Key.Number8;
	case 57:
		return flambe_input_Key.Number9;
	case 96:
		return flambe_input_Key.Numpad0;
	case 97:
		return flambe_input_Key.Numpad1;
	case 98:
		return flambe_input_Key.Numpad2;
	case 99:
		return flambe_input_Key.Numpad3;
	case 100:
		return flambe_input_Key.Numpad4;
	case 101:
		return flambe_input_Key.Numpad5;
	case 102:
		return flambe_input_Key.Numpad6;
	case 103:
		return flambe_input_Key.Numpad7;
	case 104:
		return flambe_input_Key.Numpad8;
	case 105:
		return flambe_input_Key.Numpad9;
	case 107:
		return flambe_input_Key.NumpadAdd;
	case 110:
		return flambe_input_Key.NumpadDecimal;
	case 111:
		return flambe_input_Key.NumpadDivide;
	case 108:
		return flambe_input_Key.NumpadEnter;
	case 106:
		return flambe_input_Key.NumpadMultiply;
	case 109:
		return flambe_input_Key.NumpadSubtract;
	case 112:
		return flambe_input_Key.F1;
	case 113:
		return flambe_input_Key.F2;
	case 114:
		return flambe_input_Key.F3;
	case 115:
		return flambe_input_Key.F4;
	case 116:
		return flambe_input_Key.F5;
	case 117:
		return flambe_input_Key.F6;
	case 118:
		return flambe_input_Key.F7;
	case 119:
		return flambe_input_Key.F8;
	case 120:
		return flambe_input_Key.F9;
	case 121:
		return flambe_input_Key.F10;
	case 122:
		return flambe_input_Key.F11;
	case 123:
		return flambe_input_Key.F12;
	case 37:
		return flambe_input_Key.Left;
	case 38:
		return flambe_input_Key.Up;
	case 39:
		return flambe_input_Key.Right;
	case 40:
		return flambe_input_Key.Down;
	case 18:
		return flambe_input_Key.Alt;
	case 192:
		return flambe_input_Key.Backquote;
	case 220:
		return flambe_input_Key.Backslash;
	case 8:
		return flambe_input_Key.Backspace;
	case 20:
		return flambe_input_Key.CapsLock;
	case 188:
		return flambe_input_Key.Comma;
	case 15:
		return flambe_input_Key.Command;
	case 17:
		return flambe_input_Key.Control;
	case 46:
		return flambe_input_Key.Delete;
	case 35:
		return flambe_input_Key.End;
	case 13:
		return flambe_input_Key.Enter;
	case 187:
		return flambe_input_Key.Equals;
	case 27:
		return flambe_input_Key.Escape;
	case 36:
		return flambe_input_Key.Home;
	case 45:
		return flambe_input_Key.Insert;
	case 219:
		return flambe_input_Key.LeftBracket;
	case 189:
		return flambe_input_Key.Minus;
	case 34:
		return flambe_input_Key.PageDown;
	case 33:
		return flambe_input_Key.PageUp;
	case 190:
		return flambe_input_Key.Period;
	case 222:
		return flambe_input_Key.Quote;
	case 221:
		return flambe_input_Key.RightBracket;
	case 186:
		return flambe_input_Key.Semicolon;
	case 16:
		return flambe_input_Key.Shift;
	case 191:
		return flambe_input_Key.Slash;
	case 32:
		return flambe_input_Key.Space;
	case 9:
		return flambe_input_Key.Tab;
	case 16777234:
		return flambe_input_Key.Menu;
	case 16777247:
		return flambe_input_Key.Search;
	}
	return flambe_input_Key.Unknown(keyCode);
};
flambe_platform_KeyCodes.toKeyCode = function(key) {
	switch(Type.enumIndex(key)) {
	case 0:
		return 65;
	case 1:
		return 66;
	case 2:
		return 67;
	case 3:
		return 68;
	case 4:
		return 69;
	case 5:
		return 70;
	case 6:
		return 71;
	case 7:
		return 72;
	case 8:
		return 73;
	case 9:
		return 74;
	case 10:
		return 75;
	case 11:
		return 76;
	case 12:
		return 77;
	case 13:
		return 78;
	case 14:
		return 79;
	case 15:
		return 80;
	case 16:
		return 81;
	case 17:
		return 82;
	case 18:
		return 83;
	case 19:
		return 84;
	case 20:
		return 85;
	case 21:
		return 86;
	case 22:
		return 87;
	case 23:
		return 88;
	case 24:
		return 89;
	case 25:
		return 90;
	case 26:
		return 48;
	case 27:
		return 49;
	case 28:
		return 50;
	case 29:
		return 51;
	case 30:
		return 52;
	case 31:
		return 53;
	case 32:
		return 54;
	case 33:
		return 55;
	case 34:
		return 56;
	case 35:
		return 57;
	case 36:
		return 96;
	case 37:
		return 97;
	case 38:
		return 98;
	case 39:
		return 99;
	case 40:
		return 100;
	case 41:
		return 101;
	case 42:
		return 102;
	case 43:
		return 103;
	case 44:
		return 104;
	case 45:
		return 105;
	case 46:
		return 107;
	case 47:
		return 110;
	case 48:
		return 111;
	case 49:
		return 108;
	case 50:
		return 106;
	case 51:
		return 109;
	case 52:
		return 112;
	case 53:
		return 113;
	case 54:
		return 114;
	case 55:
		return 115;
	case 56:
		return 116;
	case 57:
		return 117;
	case 58:
		return 118;
	case 59:
		return 119;
	case 60:
		return 120;
	case 61:
		return 121;
	case 62:
		return 122;
	case 63:
		return 123;
	case 64:
		return 124;
	case 65:
		return 125;
	case 66:
		return 126;
	case 67:
		return 37;
	case 68:
		return 38;
	case 69:
		return 39;
	case 70:
		return 40;
	case 71:
		return 18;
	case 72:
		return 192;
	case 73:
		return 220;
	case 74:
		return 8;
	case 75:
		return 20;
	case 76:
		return 188;
	case 77:
		return 15;
	case 78:
		return 17;
	case 79:
		return 46;
	case 80:
		return 35;
	case 81:
		return 13;
	case 82:
		return 187;
	case 83:
		return 27;
	case 84:
		return 36;
	case 85:
		return 45;
	case 86:
		return 219;
	case 87:
		return 189;
	case 88:
		return 34;
	case 89:
		return 33;
	case 90:
		return 190;
	case 91:
		return 222;
	case 92:
		return 221;
	case 93:
		return 186;
	case 94:
		return 16;
	case 95:
		return 191;
	case 96:
		return 32;
	case 97:
		return 9;
	case 98:
		return 16777234;
	case 99:
		return 16777247;
	case 100:
		var keyCode = key[2];
		return keyCode;
	}
};
var flambe_platform_MainLoop = function() {
	this._tickables = [];
};
$hxClasses["flambe.platform.MainLoop"] = flambe_platform_MainLoop;
flambe_platform_MainLoop.__name__ = ["flambe","platform","MainLoop"];
flambe_platform_MainLoop.updateEntity = function(entity,dt) {
	var speed;
	var component = entity.getComponent("SpeedAdjuster_4");
	speed = component;
	if(speed != null) {
		speed._realDt = dt;
		dt *= speed.scale.get__();
		if(dt <= 0) {
			speed.onUpdate(dt);
			return;
		}
	}
	var p = entity.firstComponent;
	while(p != null) {
		var next = p.next;
		if(!flambe_util_BitSets.contains(p._flags,1)) {
			p._flags = flambe_util_BitSets.add(p._flags,1);
			p.onStart();
		}
		p.onUpdate(dt);
		p = next;
	}
	var p1 = entity.firstChild;
	while(p1 != null) {
		var next1 = p1.next;
		flambe_platform_MainLoop.updateEntity(p1,dt);
		p1 = next1;
	}
};
flambe_platform_MainLoop.prototype = {
	update: function(dt) {
		if(dt <= 0) {
			flambe_Log.warn("Zero or negative time elapsed since the last frame!",["dt",dt]);
			return;
		}
		if(dt > 1) dt = 1;
		var ii = 0;
		while(ii < this._tickables.length) {
			var t = this._tickables[ii];
			if(t == null || t.update(dt)) this._tickables.splice(ii,1); else ++ii;
		}
		flambe_System.volume.update(dt);
		flambe_platform_MainLoop.updateEntity(flambe_System.root,dt);
	}
	,addTickable: function(t) {
		this._tickables.push(t);
	}
	,__class__: flambe_platform_MainLoop
};
var flambe_platform_MathUtil = function() { };
$hxClasses["flambe.platform.MathUtil"] = flambe_platform_MathUtil;
flambe_platform_MathUtil.__name__ = ["flambe","platform","MathUtil"];
flambe_platform_MathUtil.nextPowerOfTwo = function(n) {
	var p = 1;
	while(p < n) p <<= 1;
	return p;
};
var flambe_platform_MouseCodes = function() { };
$hxClasses["flambe.platform.MouseCodes"] = flambe_platform_MouseCodes;
flambe_platform_MouseCodes.__name__ = ["flambe","platform","MouseCodes"];
flambe_platform_MouseCodes.toButton = function(buttonCode) {
	switch(buttonCode) {
	case 0:
		return flambe_input_MouseButton.Left;
	case 1:
		return flambe_input_MouseButton.Middle;
	case 2:
		return flambe_input_MouseButton.Right;
	}
	return flambe_input_MouseButton.Unknown(buttonCode);
};
flambe_platform_MouseCodes.toButtonCode = function(button) {
	switch(Type.enumIndex(button)) {
	case 0:
		return 0;
	case 1:
		return 1;
	case 2:
		return 2;
	case 3:
		var buttonCode = button[2];
		return buttonCode;
	}
};
var flambe_platform_OverdrawGraphics = function(impl) {
	this._impl = impl;
};
$hxClasses["flambe.platform.OverdrawGraphics"] = flambe_platform_OverdrawGraphics;
flambe_platform_OverdrawGraphics.__name__ = ["flambe","platform","OverdrawGraphics"];
flambe_platform_OverdrawGraphics.__interfaces__ = [flambe_platform_InternalGraphics];
flambe_platform_OverdrawGraphics.prototype = {
	save: function() {
		this._impl.save();
	}
	,translate: function(x,y) {
		this._impl.translate(x,y);
	}
	,scale: function(x,y) {
		this._impl.scale(x,y);
	}
	,rotate: function(rotation) {
		this._impl.rotate(rotation);
	}
	,transform: function(m00,m10,m01,m11,m02,m12) {
		this._impl.transform(m00,m10,m01,m11,m02,m12);
	}
	,multiplyAlpha: function(factor) {
	}
	,setBlendMode: function(blendMode) {
	}
	,applyScissor: function(x,y,width,height) {
		this._impl.applyScissor(x,y,width,height);
	}
	,restore: function() {
		this._impl.restore();
	}
	,drawTexture: function(texture,destX,destY) {
		this.drawRegion(destX,destY,texture.get_width(),texture.get_height());
	}
	,drawSubTexture: function(texture,destX,destY,sourceX,sourceY,sourceW,sourceH) {
		this.drawRegion(destX,destY,sourceW,sourceH);
	}
	,fillRect: function(color,x,y,width,height) {
		this.drawRegion(x,y,width,height);
	}
	,willRender: function() {
		this._impl.willRender();
		this._impl.save();
		this._impl.setBlendMode(flambe_display_BlendMode.Add);
	}
	,didRender: function() {
		this._impl.restore();
		this._impl.didRender();
	}
	,onResize: function(width,height) {
		this._impl.onResize(width,height);
	}
	,drawRegion: function(x,y,width,height) {
		this._impl.fillRect(1052680,x,y,width,height);
	}
	,__class__: flambe_platform_OverdrawGraphics
};
var flambe_platform_TextureRoot = function() { };
$hxClasses["flambe.platform.TextureRoot"] = flambe_platform_TextureRoot;
flambe_platform_TextureRoot.__name__ = ["flambe","platform","TextureRoot"];
flambe_platform_TextureRoot.prototype = {
	__class__: flambe_platform_TextureRoot
};
var flambe_platform_Tickable = function() { };
$hxClasses["flambe.platform.Tickable"] = flambe_platform_Tickable;
flambe_platform_Tickable.__name__ = ["flambe","platform","Tickable"];
flambe_platform_Tickable.prototype = {
	__class__: flambe_platform_Tickable
};
var flambe_platform_html_CanvasGraphics = function(canvas,alpha) {
	this._firstDraw = false;
	this._canvasCtx = canvas.getContext("2d",{ alpha : alpha});
};
$hxClasses["flambe.platform.html.CanvasGraphics"] = flambe_platform_html_CanvasGraphics;
flambe_platform_html_CanvasGraphics.__name__ = ["flambe","platform","html","CanvasGraphics"];
flambe_platform_html_CanvasGraphics.__interfaces__ = [flambe_platform_InternalGraphics];
flambe_platform_html_CanvasGraphics.prototype = {
	save: function() {
		this._canvasCtx.save();
	}
	,translate: function(x,y) {
		this._canvasCtx.translate(Std["int"](x),Std["int"](y));
	}
	,scale: function(x,y) {
		this._canvasCtx.scale(x,y);
	}
	,rotate: function(rotation) {
		this._canvasCtx.rotate(flambe_math_FMath.toRadians(rotation));
	}
	,transform: function(m00,m10,m01,m11,m02,m12) {
		this._canvasCtx.transform(m00,m10,m01,m11,m02,m12);
	}
	,restore: function() {
		this._canvasCtx.restore();
	}
	,drawTexture: function(texture,destX,destY) {
		this.drawSubTexture(texture,destX,destY,0,0,texture.get_width(),texture.get_height());
	}
	,drawSubTexture: function(texture,destX,destY,sourceX,sourceY,sourceW,sourceH) {
		if(this._firstDraw) {
			this._firstDraw = false;
			this._canvasCtx.globalCompositeOperation = "copy";
			this.drawSubTexture(texture,destX,destY,sourceX,sourceY,sourceW,sourceH);
			this._canvasCtx.globalCompositeOperation = "source-over";
			return;
		}
		var texture1 = texture;
		var root = texture1.root;
		root.assertNotDisposed();
		this._canvasCtx.drawImage(root.image,Std["int"](texture1.rootX + sourceX),Std["int"](texture1.rootY + sourceY),Std["int"](sourceW),Std["int"](sourceH),Std["int"](destX),Std["int"](destY),Std["int"](sourceW),Std["int"](sourceH));
	}
	,fillRect: function(color,x,y,width,height) {
		if(this._firstDraw) {
			this._firstDraw = false;
			this._canvasCtx.globalCompositeOperation = "copy";
			this.fillRect(color,x,y,width,height);
			this._canvasCtx.globalCompositeOperation = "source-over";
			return;
		}
		var hex = (16777215 & color).toString(16);
		while(hex.length < 6) hex = "0" + Std.string(hex);
		this._canvasCtx.fillStyle = "#" + Std.string(hex);
		this._canvasCtx.fillRect(Std["int"](x),Std["int"](y),Std["int"](width),Std["int"](height));
	}
	,multiplyAlpha: function(factor) {
		this._canvasCtx.globalAlpha *= factor;
	}
	,setBlendMode: function(blendMode) {
		var op;
		switch(Type.enumIndex(blendMode)) {
		case 0:
			op = "source-over";
			break;
		case 1:
			op = "lighter";
			break;
		case 2:
			op = "multiply";
			break;
		case 3:
			op = "screen";
			break;
		case 4:
			op = "destination-in";
			break;
		case 5:
			op = "copy";
			break;
		}
		this._canvasCtx.globalCompositeOperation = op;
	}
	,applyScissor: function(x,y,width,height) {
		this._canvasCtx.beginPath();
		this._canvasCtx.rect(Std["int"](x),Std["int"](y),Std["int"](width),Std["int"](height));
		this._canvasCtx.clip();
	}
	,willRender: function() {
		this._firstDraw = true;
	}
	,didRender: function() {
	}
	,onResize: function(width,height) {
	}
	,__class__: flambe_platform_html_CanvasGraphics
};
var flambe_platform_html_CanvasRenderer = function(canvas) {
	this.graphics = new flambe_platform_html_CanvasGraphics(canvas,true);
	this._hasGPU = new flambe_util_Value(true);
};
$hxClasses["flambe.platform.html.CanvasRenderer"] = flambe_platform_html_CanvasRenderer;
flambe_platform_html_CanvasRenderer.__name__ = ["flambe","platform","html","CanvasRenderer"];
flambe_platform_html_CanvasRenderer.__interfaces__ = [flambe_platform_InternalRenderer];
flambe_platform_html_CanvasRenderer.prototype = {
	get_type: function() {
		return flambe_subsystem_RendererType.Canvas;
	}
	,createTextureFromImage: function(image) {
		var root = new flambe_platform_html_CanvasTextureRoot(flambe_platform_html_CanvasRenderer.CANVAS_TEXTURES?flambe_platform_html_HtmlUtil.createCanvas(image):image);
		return root.createTexture(root.width,root.height);
	}
	,getCompressedTextureFormats: function() {
		return [];
	}
	,createCompressedTexture: function(format,data) {
		flambe_util_Assert.fail();
		return null;
	}
	,willRender: function() {
		this.graphics.willRender();
	}
	,didRender: function() {
		this.graphics.didRender();
	}
	,__class__: flambe_platform_html_CanvasRenderer
	,__properties__: {get_type:"get_type"}
};
var flambe_platform_html_CanvasTexture = function(root,width,height) {
	flambe_platform_BasicTexture.call(this,root,width,height);
};
$hxClasses["flambe.platform.html.CanvasTexture"] = flambe_platform_html_CanvasTexture;
flambe_platform_html_CanvasTexture.__name__ = ["flambe","platform","html","CanvasTexture"];
flambe_platform_html_CanvasTexture.__super__ = flambe_platform_BasicTexture;
flambe_platform_html_CanvasTexture.prototype = $extend(flambe_platform_BasicTexture.prototype,{
	__class__: flambe_platform_html_CanvasTexture
});
var flambe_platform_html_CanvasTextureRoot = function(image) {
	this._graphics = null;
	this.updateCount = 0;
	flambe_platform_BasicAsset.call(this);
	this.image = image;
	this.width = image.width;
	this.height = image.height;
};
$hxClasses["flambe.platform.html.CanvasTextureRoot"] = flambe_platform_html_CanvasTextureRoot;
flambe_platform_html_CanvasTextureRoot.__name__ = ["flambe","platform","html","CanvasTextureRoot"];
flambe_platform_html_CanvasTextureRoot.__interfaces__ = [flambe_platform_TextureRoot];
flambe_platform_html_CanvasTextureRoot.__super__ = flambe_platform_BasicAsset;
flambe_platform_html_CanvasTextureRoot.prototype = $extend(flambe_platform_BasicAsset.prototype,{
	createTexture: function(width,height) {
		return new flambe_platform_html_CanvasTexture(this,width,height);
	}
	,dirtyContents: function() {
		++this.updateCount;
	}
	,copyFrom: function(that) {
		this.image = that.image;
		this._graphics = that._graphics;
		this.dirtyContents();
	}
	,onDisposed: function() {
		this.image = null;
		this._graphics = null;
	}
	,__class__: flambe_platform_html_CanvasTextureRoot
});
var flambe_platform_html_HtmlAssetPackLoader = function(platform,manifest) {
	flambe_platform_BasicAssetPackLoader.call(this,platform,manifest);
};
$hxClasses["flambe.platform.html.HtmlAssetPackLoader"] = flambe_platform_html_HtmlAssetPackLoader;
flambe_platform_html_HtmlAssetPackLoader.__name__ = ["flambe","platform","html","HtmlAssetPackLoader"];
flambe_platform_html_HtmlAssetPackLoader.detectImageFormats = function(fn) {
	var formats = [flambe_asset_AssetFormat.PNG,flambe_asset_AssetFormat.JPG,flambe_asset_AssetFormat.GIF];
	var formatTests = 2;
	var checkRemaining = function() {
		--formatTests;
		if(formatTests == 0) fn(formats);
	};
	var webp;
	var _this = js_Browser.get_document();
	webp = _this.createElement("img");
	webp.onload = webp.onerror = function(_) {
		if(webp.width == 1) formats.unshift(flambe_asset_AssetFormat.WEBP);
		checkRemaining();
	};
	webp.src = "data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";
	var jxr;
	var _this1 = js_Browser.get_document();
	jxr = _this1.createElement("img");
	jxr.onload = jxr.onerror = function(_1) {
		if(jxr.width == 1) formats.unshift(flambe_asset_AssetFormat.JXR);
		checkRemaining();
	};
	jxr.src = "data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA==";
};
flambe_platform_html_HtmlAssetPackLoader.detectAudioFormats = function() {
	var audio;
	var _this = js_Browser.get_document();
	audio = _this.createElement("audio");
	if(audio == null || $bind(audio,audio.canPlayType) == null) {
		flambe_Log.warn("Audio is not supported at all in this browser!");
		return [];
	}
	var blacklist = new EReg("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b","");
	var userAgent = js_Browser.get_navigator().userAgent;
	if(!flambe_platform_html_WebAudioSound.get_supported() && blacklist.match(userAgent)) {
		flambe_Log.warn("HTML5 audio is blacklisted for this browser",["userAgent",userAgent]);
		return [];
	}
	var types = [{ format : flambe_asset_AssetFormat.M4A, mimeType : "audio/mp4; codecs=mp4a"},{ format : flambe_asset_AssetFormat.MP3, mimeType : "audio/mpeg"},{ format : flambe_asset_AssetFormat.OPUS, mimeType : "audio/ogg; codecs=opus"},{ format : flambe_asset_AssetFormat.OGG, mimeType : "audio/ogg; codecs=vorbis"},{ format : flambe_asset_AssetFormat.WAV, mimeType : "audio/wav"}];
	var result = [];
	var _g = 0;
	while(_g < types.length) {
		var type = types[_g];
		++_g;
		var canPlayType = "";
		try {
			canPlayType = audio.canPlayType(type.mimeType);
		} catch( _ ) {
			if (_ instanceof js__$Boot_HaxeError) _ = _.val;
		}
		if(canPlayType != "") result.push(type.format);
	}
	return result;
};
flambe_platform_html_HtmlAssetPackLoader.supportsBlob = function() {
	if(flambe_platform_html_HtmlAssetPackLoader._detectBlobSupport) {
		flambe_platform_html_HtmlAssetPackLoader._detectBlobSupport = false;
		if(new EReg("\\bSilk\\b","").match(js_Browser.get_navigator().userAgent)) return false;
		if(js_Browser.get_window().Blob == null) return false;
		var xhr = new XMLHttpRequest();
		xhr.open("GET",".",true);
		if(xhr.responseType != "") return false;
		xhr.responseType = "blob";
		if(xhr.responseType != "blob") return false;
		flambe_platform_html_HtmlAssetPackLoader._URL = flambe_platform_html_HtmlUtil.loadExtension("URL").value;
	}
	return flambe_platform_html_HtmlAssetPackLoader._URL != null && flambe_platform_html_HtmlAssetPackLoader._URL.createObjectURL != null;
};
flambe_platform_html_HtmlAssetPackLoader.__super__ = flambe_platform_BasicAssetPackLoader;
flambe_platform_html_HtmlAssetPackLoader.prototype = $extend(flambe_platform_BasicAssetPackLoader.prototype,{
	loadEntry: function(url,entry) {
		var _g1 = this;
		var _g = entry.format;
		switch(Type.enumIndex(_g)) {
		case 0:case 1:case 2:case 3:case 4:
			var image;
			var _this = js_Browser.get_document();
			image = _this.createElement("img");
			var events = new flambe_platform_EventGroup();
			events.addDisposingListener(image,"load",function(_) {
				if(image.width > 1024 || image.height > 1024) flambe_Log.warn("Images larger than 1024px on a side will prevent GPU acceleration" + " on some platforms (iOS)",["url",url,"width",image.width,"height",image.height]);
				if(flambe_platform_html_HtmlAssetPackLoader.supportsBlob()) flambe_platform_html_HtmlAssetPackLoader._URL.revokeObjectURL(image.src);
				var texture = _g1._platform.getRenderer().createTextureFromImage(image);
				if(texture != null) _g1.handleLoad(entry,texture); else _g1.handleTextureError(entry);
			});
			events.addDisposingListener(image,"error",function(_1) {
				_g1.handleError(entry,"Failed to load image");
			});
			if(flambe_platform_html_HtmlAssetPackLoader.supportsBlob()) this.downloadBlob(url,entry,function(blob) {
				image.src = flambe_platform_html_HtmlAssetPackLoader._URL.createObjectURL(blob);
			}); else image.src = url;
			break;
		case 5:case 6:case 7:
			this.downloadArrayBuffer(url,entry,function(buffer) {
				var texture1 = _g1._platform.getRenderer().createCompressedTexture(entry.format,null);
				if(texture1 != null) _g1.handleLoad(entry,texture1); else _g1.handleTextureError(entry);
			});
			break;
		case 8:case 9:case 10:case 11:case 12:
			if(flambe_platform_html_WebAudioSound.get_supported()) this.downloadArrayBuffer(url,entry,function(buffer1) {
				flambe_platform_html_WebAudioSound.ctx.decodeAudioData(buffer1,function(decoded) {
					_g1.handleLoad(entry,new flambe_platform_html_WebAudioSound(decoded));
				},function() {
					flambe_Log.warn("Couldn't decode Web Audio, ignoring this asset",["url",url]);
					_g1.handleLoad(entry,flambe_platform_DummySound.getInstance());
				});
			}); else {
				var audio;
				var _this1 = js_Browser.get_document();
				audio = _this1.createElement("audio");
				audio.preload = "auto";
				var ref = ++flambe_platform_html_HtmlAssetPackLoader._mediaRefCount;
				if(flambe_platform_html_HtmlAssetPackLoader._mediaElements == null) flambe_platform_html_HtmlAssetPackLoader._mediaElements = new haxe_ds_IntMap();
				flambe_platform_html_HtmlAssetPackLoader._mediaElements.set(ref,audio);
				var events1 = new flambe_platform_EventGroup();
				events1.addDisposingListener(audio,"canplaythrough",function(_2) {
					flambe_platform_html_HtmlAssetPackLoader._mediaElements.remove(ref);
					_g1.handleLoad(entry,new flambe_platform_html_HtmlSound(audio));
				});
				events1.addDisposingListener(audio,"error",function(_3) {
					flambe_platform_html_HtmlAssetPackLoader._mediaElements.remove(ref);
					var code = audio.error.code;
					if(code == 3 || code == 4) {
						flambe_Log.warn("Couldn't decode HTML5 audio, ignoring this asset",["url",url,"code",code]);
						_g1.handleLoad(entry,flambe_platform_DummySound.getInstance());
					} else _g1.handleError(entry,"Failed to load audio: " + audio.error.code);
				});
				events1.addListener(audio,"progress",function(_4) {
					if(audio.buffered.length > 0 && audio.duration > 0) {
						var progress = audio.buffered.end(0) / audio.duration;
						_g1.handleProgress(entry,Std["int"](progress * entry.bytes));
					}
				});
				audio.src = url;
				audio.load();
			}
			break;
		case 13:
			this.downloadText(url,entry,function(text) {
				_g1.handleLoad(entry,new flambe_platform_BasicFile(text));
			});
			break;
		}
	}
	,getAssetFormats: function(fn) {
		var _g = this;
		if(flambe_platform_html_HtmlAssetPackLoader._supportedFormats == null) {
			flambe_platform_html_HtmlAssetPackLoader._supportedFormats = new flambe_util_Promise();
			flambe_platform_html_HtmlAssetPackLoader.detectImageFormats(function(imageFormats) {
				flambe_platform_html_HtmlAssetPackLoader._supportedFormats.set_result(_g._platform.getRenderer().getCompressedTextureFormats().concat(imageFormats).concat(flambe_platform_html_HtmlAssetPackLoader.detectAudioFormats()).concat([flambe_asset_AssetFormat.Data]));
			});
		}
		flambe_platform_html_HtmlAssetPackLoader._supportedFormats.get(fn);
	}
	,downloadArrayBuffer: function(url,entry,onLoad) {
		this.download(url,entry,"arraybuffer",onLoad);
	}
	,downloadBlob: function(url,entry,onLoad) {
		this.download(url,entry,"blob",onLoad);
	}
	,downloadText: function(url,entry,onLoad) {
		this.download(url,entry,"text",onLoad);
	}
	,download: function(url,entry,responseType,onLoad) {
		var _g = this;
		var xhr = null;
		var start = null;
		var intervalId = 0;
		var hasInterval = false;
		var clearRetryInterval = function() {
			if(hasInterval) {
				hasInterval = false;
				js_Browser.get_window().clearInterval(intervalId);
			}
		};
		var retries = 3;
		var maybeRetry = function() {
			--retries;
			if(retries >= 0) {
				flambe_Log.warn("Retrying asset download",["url",entry.url]);
				start();
				return true;
			}
			return false;
		};
		start = function() {
			clearRetryInterval();
			if(xhr != null) xhr.abort();
			xhr = new XMLHttpRequest();
			xhr.open("GET",url,true);
			xhr.responseType = responseType;
			var lastProgress = 0.0;
			xhr.onprogress = function(event) {
				if(!hasInterval) {
					hasInterval = true;
					intervalId = js_Browser.get_window().setInterval(function() {
						if(xhr.readyState != 4 && flambe_platform_html_HtmlUtil.now() - lastProgress > 5000) {
							if(!maybeRetry()) {
								clearRetryInterval();
								_g.handleError(entry,"Download stalled");
							}
						}
					},1000);
				}
				lastProgress = flambe_platform_html_HtmlUtil.now();
				_g.handleProgress(entry,event.loaded);
			};
			xhr.onerror = function(_) {
				if(xhr.status != 0 || !maybeRetry()) {
					clearRetryInterval();
					_g.handleError(entry,"HTTP error " + xhr.status);
				}
			};
			xhr.onload = function(_1) {
				var response = xhr.response;
				if(response == null) response = xhr.responseText;
				clearRetryInterval();
				onLoad(response);
			};
			xhr.send();
		};
		start();
	}
	,__class__: flambe_platform_html_HtmlAssetPackLoader
});
var flambe_platform_html_HtmlCatapultClient = function() {
	var _g = this;
	flambe_platform_CatapultClient.call(this);
	this._socket = new WebSocket("ws://" + js_Browser.get_location().host);
	this._socket.onerror = function(event) {
		_g.onError("unknown");
	};
	this._socket.onopen = function(event1) {
		flambe_Log.info("Catapult connected");
	};
	this._socket.onmessage = function(event2) {
		_g.onMessage(event2.data);
	};
};
$hxClasses["flambe.platform.html.HtmlCatapultClient"] = flambe_platform_html_HtmlCatapultClient;
flambe_platform_html_HtmlCatapultClient.__name__ = ["flambe","platform","html","HtmlCatapultClient"];
flambe_platform_html_HtmlCatapultClient.canUse = function() {
	return Reflect.hasField(js_Browser.get_window(),"WebSocket");
};
flambe_platform_html_HtmlCatapultClient.__super__ = flambe_platform_CatapultClient;
flambe_platform_html_HtmlCatapultClient.prototype = $extend(flambe_platform_CatapultClient.prototype,{
	onRestart: function() {
		js_Browser.get_window().top.location.reload();
	}
	,__class__: flambe_platform_html_HtmlCatapultClient
});
var flambe_subsystem_ExternalSystem = function() { };
$hxClasses["flambe.subsystem.ExternalSystem"] = flambe_subsystem_ExternalSystem;
flambe_subsystem_ExternalSystem.__name__ = ["flambe","subsystem","ExternalSystem"];
flambe_subsystem_ExternalSystem.prototype = {
	__class__: flambe_subsystem_ExternalSystem
};
var flambe_platform_html_HtmlExternal = function() {
};
$hxClasses["flambe.platform.html.HtmlExternal"] = flambe_platform_html_HtmlExternal;
flambe_platform_html_HtmlExternal.__name__ = ["flambe","platform","html","HtmlExternal"];
flambe_platform_html_HtmlExternal.__interfaces__ = [flambe_subsystem_ExternalSystem];
flambe_platform_html_HtmlExternal.prototype = {
	call: function(name,params) {
		if(params == null) params = [];
		var object = js_Browser.get_window();
		var method = object;
		var _g = 0;
		var _g1 = name.split(".");
		while(_g < _g1.length) {
			var fieldName = _g1[_g];
			++_g;
			object = method;
			method = Reflect.field(object,fieldName);
		}
		return Reflect.callMethod(object,method,params);
	}
	,__class__: flambe_platform_html_HtmlExternal
};
var flambe_util_LogHandler = function() { };
$hxClasses["flambe.util.LogHandler"] = flambe_util_LogHandler;
flambe_util_LogHandler.__name__ = ["flambe","util","LogHandler"];
flambe_util_LogHandler.prototype = {
	__class__: flambe_util_LogHandler
};
var flambe_platform_html_HtmlLogHandler = function(tag) {
	this._tagPrefix = tag + ": ";
};
$hxClasses["flambe.platform.html.HtmlLogHandler"] = flambe_platform_html_HtmlLogHandler;
flambe_platform_html_HtmlLogHandler.__name__ = ["flambe","platform","html","HtmlLogHandler"];
flambe_platform_html_HtmlLogHandler.__interfaces__ = [flambe_util_LogHandler];
flambe_platform_html_HtmlLogHandler.isSupported = function() {
	return typeof console == "object" && console.info != null;
};
flambe_platform_html_HtmlLogHandler.prototype = {
	log: function(level,message) {
		message = this._tagPrefix + message;
		switch(Type.enumIndex(level)) {
		case 0:
			console.info(message);
			break;
		case 1:
			console.warn(message);
			break;
		case 2:
			console.error(message);
			break;
		}
	}
	,__class__: flambe_platform_html_HtmlLogHandler
};
var flambe_platform_html_HtmlMouse = function(pointer,canvas) {
	flambe_platform_BasicMouse.call(this,pointer);
	this._canvas = canvas;
};
$hxClasses["flambe.platform.html.HtmlMouse"] = flambe_platform_html_HtmlMouse;
flambe_platform_html_HtmlMouse.__name__ = ["flambe","platform","html","HtmlMouse"];
flambe_platform_html_HtmlMouse.__super__ = flambe_platform_BasicMouse;
flambe_platform_html_HtmlMouse.prototype = $extend(flambe_platform_BasicMouse.prototype,{
	__class__: flambe_platform_html_HtmlMouse
});
var flambe_platform_html_HtmlSound = function(audioElement) {
	flambe_platform_BasicAsset.call(this);
	this.audioElement = audioElement;
};
$hxClasses["flambe.platform.html.HtmlSound"] = flambe_platform_html_HtmlSound;
flambe_platform_html_HtmlSound.__name__ = ["flambe","platform","html","HtmlSound"];
flambe_platform_html_HtmlSound.__interfaces__ = [flambe_sound_Sound];
flambe_platform_html_HtmlSound.__super__ = flambe_platform_BasicAsset;
flambe_platform_html_HtmlSound.prototype = $extend(flambe_platform_BasicAsset.prototype,{
	play: function(volume) {
		if(volume == null) volume = 1.0;
		this.assertNotDisposed();
		return new flambe_platform_html__$HtmlSound_HtmlPlayback(this,volume,false);
	}
	,loop: function(volume) {
		if(volume == null) volume = 1.0;
		this.assertNotDisposed();
		return new flambe_platform_html__$HtmlSound_HtmlPlayback(this,volume,true);
	}
	,copyFrom: function(that) {
		this.audioElement = that.audioElement;
	}
	,onDisposed: function() {
		this.audioElement = null;
	}
	,__class__: flambe_platform_html_HtmlSound
});
var flambe_platform_html__$HtmlSound_HtmlPlayback = function(sound,volume,loop) {
	var _g = this;
	this._sound = sound;
	this._tickableAdded = false;
	var _this = js_Browser.get_document();
	this._clonedElement = _this.createElement("audio");
	this._clonedElement.loop = loop;
	this._clonedElement.src = sound.audioElement.src;
	this.volume = new flambe_animation_AnimatedFloat(volume,function(_,_1) {
		_g.updateVolume();
	});
	this.updateVolume();
	this._complete = new flambe_util_Value(false);
	this.playAudio();
	if(flambe_System.hidden.get__()) this.set_paused(true);
};
$hxClasses["flambe.platform.html._HtmlSound.HtmlPlayback"] = flambe_platform_html__$HtmlSound_HtmlPlayback;
flambe_platform_html__$HtmlSound_HtmlPlayback.__name__ = ["flambe","platform","html","_HtmlSound","HtmlPlayback"];
flambe_platform_html__$HtmlSound_HtmlPlayback.__interfaces__ = [flambe_platform_Tickable,flambe_sound_Playback];
flambe_platform_html__$HtmlSound_HtmlPlayback.prototype = {
	get_paused: function() {
		return this._clonedElement.paused;
	}
	,set_paused: function(paused) {
		if(this._clonedElement.paused != paused) {
			if(paused) this._clonedElement.pause(); else this.playAudio();
		}
		return paused;
	}
	,get_complete: function() {
		return this._complete;
	}
	,update: function(dt) {
		this.volume.update(dt);
		this._complete.set__(this._clonedElement.ended);
		if(this._complete.get__() || this.get_paused()) {
			this._tickableAdded = false;
			this._volumeBinding.dispose();
			this._hideBinding.dispose();
			return true;
		}
		return false;
	}
	,dispose: function() {
		this.set_paused(true);
		this._complete.set__(true);
	}
	,playAudio: function() {
		var _g = this;
		this._clonedElement.play();
		if(!this._tickableAdded) {
			flambe_platform_html_HtmlPlatform.instance.mainLoop.addTickable(this);
			this._tickableAdded = true;
			this._volumeBinding = flambe_System.volume.get_changed().connect(function(_,_1) {
				_g.updateVolume();
			});
			this._hideBinding = flambe_System.hidden.get_changed().connect(function(hidden,_2) {
				if(hidden) {
					_g._wasPaused = _g.get_paused();
					_g.set_paused(true);
				} else _g.set_paused(_g._wasPaused);
			});
		}
	}
	,updateVolume: function() {
		this._clonedElement.volume = flambe_System.volume.get__() * this.volume.get__();
	}
	,__class__: flambe_platform_html__$HtmlSound_HtmlPlayback
	,__properties__: {get_complete:"get_complete",set_paused:"set_paused",get_paused:"get_paused"}
};
var flambe_subsystem_StageSystem = function() { };
$hxClasses["flambe.subsystem.StageSystem"] = flambe_subsystem_StageSystem;
flambe_subsystem_StageSystem.__name__ = ["flambe","subsystem","StageSystem"];
flambe_subsystem_StageSystem.prototype = {
	__class__: flambe_subsystem_StageSystem
	,__properties__: {get_height:"get_height",get_width:"get_width"}
};
var flambe_platform_html_HtmlStage = function(canvas) {
	var _g = this;
	this._canvas = canvas;
	this.resize = new flambe_util_Signal0();
	this.scaleFactor = flambe_platform_html_HtmlStage.computeScaleFactor();
	if(this.scaleFactor != 1) {
		flambe_Log.info("Reversing device DPI scaling",["scaleFactor",this.scaleFactor]);
		flambe_platform_html_HtmlUtil.setVendorStyle(this._canvas,"transform-origin","top left");
		flambe_platform_html_HtmlUtil.setVendorStyle(this._canvas,"transform","scale(" + 1 / this.scaleFactor + ")");
	}
	if(flambe_platform_html_HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER) {
		js_Browser.get_window().addEventListener("orientationchange",function(_) {
			flambe_platform_html_HtmlUtil.callLater($bind(_g,_g.hideMobileBrowser),200);
		},false);
		this.hideMobileBrowser();
	}
	js_Browser.get_window().addEventListener("resize",$bind(this,this.onWindowResize),false);
	this.onWindowResize(null);
	this.orientation = new flambe_util_Value(null);
	if(js_Browser.get_window().orientation != null) {
		js_Browser.get_window().addEventListener("orientationchange",$bind(this,this.onOrientationChange),false);
		this.onOrientationChange(null);
	}
	this.fullscreen = new flambe_util_Value(false);
	flambe_platform_html_HtmlUtil.addVendorListener(js_Browser.get_document(),"fullscreenchange",function(_1) {
		_g.updateFullscreen();
	},false);
	flambe_platform_html_HtmlUtil.addVendorListener(js_Browser.get_document(),"fullscreenerror",function(_2) {
		flambe_Log.warn("Error when requesting fullscreen");
	},false);
	this.updateFullscreen();
};
$hxClasses["flambe.platform.html.HtmlStage"] = flambe_platform_html_HtmlStage;
flambe_platform_html_HtmlStage.__name__ = ["flambe","platform","html","HtmlStage"];
flambe_platform_html_HtmlStage.__interfaces__ = [flambe_subsystem_StageSystem];
flambe_platform_html_HtmlStage.computeScaleFactor = function() {
	var devicePixelRatio = js_Browser.get_window().devicePixelRatio;
	if(devicePixelRatio == null) devicePixelRatio = 1;
	var canvas;
	var _this = js_Browser.get_document();
	canvas = _this.createElement("canvas");
	var ctx = canvas.getContext("2d",null);
	var backingStorePixelRatio = flambe_platform_html_HtmlUtil.loadExtension("backingStorePixelRatio",ctx).value;
	if(backingStorePixelRatio == null) backingStorePixelRatio = 1;
	var scale = devicePixelRatio / backingStorePixelRatio;
	var screenWidth = js_Browser.get_window().screen.width;
	var screenHeight = js_Browser.get_window().screen.height;
	if(scale * screenWidth > 1136 || scale * screenHeight > 1136) return 1;
	return scale;
};
flambe_platform_html_HtmlStage.prototype = {
	get_width: function() {
		return this._canvas.width;
	}
	,get_height: function() {
		return this._canvas.height;
	}
	,onWindowResize: function(_) {
		var container = this._canvas.parentElement;
		var rect = container.getBoundingClientRect();
		this.resizeCanvas(rect.width,rect.height);
	}
	,resizeCanvas: function(width,height) {
		var scaledWidth = this.scaleFactor * width;
		var scaledHeight = this.scaleFactor * height;
		if(this._canvas.width == scaledWidth && this._canvas.height == scaledHeight) return false;
		this._canvas.width = Std["int"](scaledWidth);
		this._canvas.height = Std["int"](scaledHeight);
		this.resize.emit();
		return true;
	}
	,hideMobileBrowser: function() {
		var _g = this;
		var mobileAddressBar = 100;
		var htmlStyle = js_Browser.get_document().documentElement.style;
		htmlStyle.height = js_Browser.get_window().innerHeight + mobileAddressBar + "px";
		htmlStyle.width = js_Browser.get_window().innerWidth + "px";
		htmlStyle.overflow = "visible";
		flambe_platform_html_HtmlUtil.callLater(function() {
			flambe_platform_html_HtmlUtil.hideMobileBrowser();
			flambe_platform_html_HtmlUtil.callLater(function() {
				htmlStyle.height = js_Browser.get_window().innerHeight + "px";
				_g.onWindowResize(null);
			},100);
		});
	}
	,onOrientationChange: function(_) {
		var value = flambe_platform_html_HtmlUtil.orientation(js_Browser.get_window().orientation);
		this.orientation.set__(value);
	}
	,updateFullscreen: function() {
		var state = flambe_platform_html_HtmlUtil.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],js_Browser.get_document()).value;
		this.fullscreen.set__(state == true);
	}
	,__class__: flambe_platform_html_HtmlStage
	,__properties__: {get_height:"get_height",get_width:"get_width"}
};
var flambe_platform_html_HtmlStorage = function(storage) {
	this._storage = storage;
};
$hxClasses["flambe.platform.html.HtmlStorage"] = flambe_platform_html_HtmlStorage;
flambe_platform_html_HtmlStorage.__name__ = ["flambe","platform","html","HtmlStorage"];
flambe_platform_html_HtmlStorage.__interfaces__ = [flambe_subsystem_StorageSystem];
flambe_platform_html_HtmlStorage.prototype = {
	get_supported: function() {
		return true;
	}
	,set: function(key,value) {
		var encoded;
		try {
			var serializer = new haxe_Serializer();
			serializer.useCache = true;
			serializer.useEnumIndex = false;
			serializer.serialize(value);
			encoded = serializer.toString();
		} catch( error ) {
			if (error instanceof js__$Boot_HaxeError) error = error.val;
			flambe_Log.warn("Storage serialization failed",["message",error]);
			return false;
		}
		try {
			this._storage.setItem("flambe:" + key,encoded);
		} catch( error1 ) {
			if (error1 instanceof js__$Boot_HaxeError) error1 = error1.val;
			flambe_Log.warn("localStorage.setItem failed",["message",error1.message]);
			return false;
		}
		return true;
	}
	,get: function(key,defaultValue) {
		var encoded = null;
		try {
			encoded = this._storage.getItem("flambe:" + key);
		} catch( error ) {
			if (error instanceof js__$Boot_HaxeError) error = error.val;
			flambe_Log.warn("localStorage.getItem failed",["message",error.message]);
		}
		if(encoded != null) try {
			return haxe_Unserializer.run(encoded);
		} catch( error1 ) {
			if (error1 instanceof js__$Boot_HaxeError) error1 = error1.val;
			flambe_Log.warn("Storage unserialization failed",["message",error1]);
		}
		return defaultValue;
	}
	,remove: function(key) {
		try {
			this._storage.removeItem("flambe:" + key);
		} catch( error ) {
			if (error instanceof js__$Boot_HaxeError) error = error.val;
			flambe_Log.warn("localStorage.removeItem failed",["message",error.message]);
		}
	}
	,clear: function() {
		try {
			this._storage.clear();
		} catch( error ) {
			if (error instanceof js__$Boot_HaxeError) error = error.val;
			flambe_Log.warn("localStorage.clear failed",["message",error.message]);
		}
	}
	,__class__: flambe_platform_html_HtmlStorage
	,__properties__: {get_supported:"get_supported"}
};
var flambe_platform_html_HtmlUtil = function() { };
$hxClasses["flambe.platform.html.HtmlUtil"] = flambe_platform_html_HtmlUtil;
flambe_platform_html_HtmlUtil.__name__ = ["flambe","platform","html","HtmlUtil"];
flambe_platform_html_HtmlUtil.callLater = function(func,delay) {
	if(delay == null) delay = 0;
	js_Browser.get_window().setTimeout(func,delay);
};
flambe_platform_html_HtmlUtil.hideMobileBrowser = function() {
	js_Browser.get_window().scrollTo(1,0);
};
flambe_platform_html_HtmlUtil.loadExtension = function(name,obj) {
	if(obj == null) obj = js_Browser.get_window();
	var extension = Reflect.field(obj,name);
	if(extension != null) return { prefix : "", field : name, value : extension};
	var capitalized = name.charAt(0).toUpperCase() + HxOverrides.substr(name,1,null);
	var _g = 0;
	var _g1 = flambe_platform_html_HtmlUtil.VENDOR_PREFIXES;
	while(_g < _g1.length) {
		var prefix = _g1[_g];
		++_g;
		var field = prefix + capitalized;
		var extension1 = Reflect.field(obj,field);
		if(extension1 != null) return { prefix : prefix, field : field, value : extension1};
	}
	return { prefix : null, field : null, value : null};
};
flambe_platform_html_HtmlUtil.loadFirstExtension = function(names,obj) {
	var _g = 0;
	while(_g < names.length) {
		var name = names[_g];
		++_g;
		var extension = flambe_platform_html_HtmlUtil.loadExtension(name,obj);
		if(extension.field != null) return extension;
	}
	return { prefix : null, field : null, value : null};
};
flambe_platform_html_HtmlUtil.polyfill = function(name,obj) {
	if(obj == null) obj = js_Browser.get_window();
	var value = flambe_platform_html_HtmlUtil.loadExtension(name,obj).value;
	if(value == null) return false;
	Reflect.setField(obj,name,value);
	return true;
};
flambe_platform_html_HtmlUtil.setVendorStyle = function(element,name,value) {
	var style = element.style;
	var _g = 0;
	var _g1 = flambe_platform_html_HtmlUtil.VENDOR_PREFIXES;
	while(_g < _g1.length) {
		var prefix = _g1[_g];
		++_g;
		style.setProperty("-" + prefix + "-" + name,value);
	}
	style.setProperty(name,value);
};
flambe_platform_html_HtmlUtil.addVendorListener = function(dispatcher,type,listener,useCapture) {
	var _g = 0;
	var _g1 = flambe_platform_html_HtmlUtil.VENDOR_PREFIXES;
	while(_g < _g1.length) {
		var prefix = _g1[_g];
		++_g;
		dispatcher.addEventListener(prefix + type,listener,useCapture);
	}
	dispatcher.addEventListener(type,listener,useCapture);
};
flambe_platform_html_HtmlUtil.orientation = function(angle) {
	switch(angle) {
	case -90:case 90:
		return flambe_display_Orientation.Landscape;
	default:
		return flambe_display_Orientation.Portrait;
	}
};
flambe_platform_html_HtmlUtil.now = function() {
	return Date.now();
};
flambe_platform_html_HtmlUtil.createEmptyCanvas = function(width,height) {
	var canvas;
	var _this = js_Browser.get_document();
	canvas = _this.createElement("canvas");
	canvas.width = width;
	canvas.height = height;
	return canvas;
};
flambe_platform_html_HtmlUtil.createCanvas = function(source) {
	var canvas = flambe_platform_html_HtmlUtil.createEmptyCanvas(source.width,source.height);
	var ctx = canvas.getContext("2d",null);
	ctx.save();
	ctx.globalCompositeOperation = "copy";
	ctx.drawImage(source,0,0);
	ctx.restore();
	return canvas;
};
flambe_platform_html_HtmlUtil.detectSlowDriver = function(gl) {
	var windows = js_Browser.get_navigator().platform.indexOf("Win") >= 0;
	if(windows) {
		var chrome = js_Browser.get_window().chrome != null;
		if(chrome) {
			var _g = 0;
			var _g1 = gl.getSupportedExtensions();
			while(_g < _g1.length) {
				var ext = _g1[_g];
				++_g;
				if(ext.indexOf("WEBGL_compressed_texture") >= 0) return false;
			}
			return true;
		}
	}
	return false;
};
flambe_platform_html_HtmlUtil.fixAndroidMath = function() {
	if(js_Browser.get_navigator().userAgent.indexOf("Linux; U; Android 4") >= 0) {
		flambe_Log.warn("Monkey patching around Android sin/cos bug");
		var sin = Math.sin;
		var cos = Math.cos;
		Math.sin = function(x) {
			if(x == 0) return 0; else return sin(x);
		};
		Math.cos = function(x1) {
			if(x1 == 0) return 1; else return cos(x1);
		};
	}
};
var flambe_platform_html_WebAudioSound = function(buffer) {
	flambe_platform_BasicAsset.call(this);
	this.buffer = buffer;
};
$hxClasses["flambe.platform.html.WebAudioSound"] = flambe_platform_html_WebAudioSound;
flambe_platform_html_WebAudioSound.__name__ = ["flambe","platform","html","WebAudioSound"];
flambe_platform_html_WebAudioSound.__interfaces__ = [flambe_sound_Sound];
flambe_platform_html_WebAudioSound.__properties__ = {get_supported:"get_supported"}
flambe_platform_html_WebAudioSound.get_supported = function() {
	if(flambe_platform_html_WebAudioSound._detectSupport) {
		flambe_platform_html_WebAudioSound._detectSupport = false;
		var AudioContext = flambe_platform_html_HtmlUtil.loadExtension("AudioContext").value;
		if(AudioContext != null) {
			flambe_platform_html_WebAudioSound.ctx = new AudioContext();
			flambe_platform_html_WebAudioSound.gain = flambe_platform_html_WebAudioSound.createGain();
			flambe_platform_html_WebAudioSound.gain.connect(flambe_platform_html_WebAudioSound.ctx.destination);
			flambe_System.volume.watch(function(volume,_) {
				flambe_platform_html_WebAudioSound.gain.gain.value = volume;
			});
		}
	}
	return flambe_platform_html_WebAudioSound.ctx != null;
};
flambe_platform_html_WebAudioSound.createGain = function() {
	if(flambe_platform_html_WebAudioSound.ctx.createGain != null) return flambe_platform_html_WebAudioSound.ctx.createGain(); else return flambe_platform_html_WebAudioSound.ctx.createGainNode();
};
flambe_platform_html_WebAudioSound.start = function(node,time) {
	if(node.start != null) node.start(time); else node.noteOn(time);
};
flambe_platform_html_WebAudioSound.__super__ = flambe_platform_BasicAsset;
flambe_platform_html_WebAudioSound.prototype = $extend(flambe_platform_BasicAsset.prototype,{
	play: function(volume) {
		if(volume == null) volume = 1.0;
		this.assertNotDisposed();
		return new flambe_platform_html__$WebAudioSound_WebAudioPlayback(this,volume,false);
	}
	,loop: function(volume) {
		if(volume == null) volume = 1.0;
		this.assertNotDisposed();
		return new flambe_platform_html__$WebAudioSound_WebAudioPlayback(this,volume,true);
	}
	,get_duration: function() {
		this.assertNotDisposed();
		return this.buffer.duration;
	}
	,copyFrom: function(that) {
		this.buffer = that.buffer;
	}
	,onDisposed: function() {
		this.buffer = null;
	}
	,__class__: flambe_platform_html_WebAudioSound
	,__properties__: $extend(flambe_platform_BasicAsset.prototype.__properties__,{get_duration:"get_duration"})
});
var flambe_platform_html__$WebAudioSound_WebAudioPlayback = function(sound,volume,loop) {
	var _g = this;
	this._sound = sound;
	this._head = flambe_platform_html_WebAudioSound.gain;
	this._complete = new flambe_util_Value(false);
	this._sourceNode = flambe_platform_html_WebAudioSound.ctx.createBufferSource();
	this._sourceNode.buffer = sound.buffer;
	this._sourceNode.loop = loop;
	this._sourceNode.onended = function() {
		_g._complete.set__(true);
	};
	flambe_platform_html_WebAudioSound.start(this._sourceNode,0);
	this.playAudio();
	this.volume = new flambe_animation_AnimatedFloat(volume,function(v,_) {
		_g.setVolume(v);
	});
	if(volume != 1) this.setVolume(volume);
	if(flambe_System.hidden.get__()) this.set_paused(true);
};
$hxClasses["flambe.platform.html._WebAudioSound.WebAudioPlayback"] = flambe_platform_html__$WebAudioSound_WebAudioPlayback;
flambe_platform_html__$WebAudioSound_WebAudioPlayback.__name__ = ["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];
flambe_platform_html__$WebAudioSound_WebAudioPlayback.__interfaces__ = [flambe_platform_Tickable,flambe_sound_Playback];
flambe_platform_html__$WebAudioSound_WebAudioPlayback.prototype = {
	get_paused: function() {
		return this._pausedAt >= 0;
	}
	,set_paused: function(paused) {
		if(paused != this.get_paused()) {
			if(paused) {
				this._sourceNode.disconnect();
				this._pausedAt = this.get_position();
			} else this.playAudio();
		}
		return paused;
	}
	,get_complete: function() {
		return this._complete;
	}
	,get_position: function() {
		if(this._complete.get__()) return this._sound.get_duration(); else if(this.get_paused()) return this._pausedAt; else {
			var elapsed = flambe_platform_html_WebAudioSound.ctx.currentTime - this._startedAt;
			return elapsed % this._sound.get_duration();
		}
	}
	,update: function(dt) {
		this.volume.update(dt);
		if(this._sourceNode.playbackState == 3) this._complete.set__(true);
		if(this._complete.get__() || this.get_paused()) {
			this._tickableAdded = false;
			this._hideBinding.dispose();
			return true;
		}
		return false;
	}
	,dispose: function() {
		this.set_paused(true);
		this._complete.set__(true);
	}
	,setVolume: function(volume) {
		if(this._gainNode == null) {
			this._gainNode = flambe_platform_html_WebAudioSound.createGain();
			this.insertNode(this._gainNode);
		}
		this._gainNode.gain.value = volume;
	}
	,insertNode: function(head) {
		if(!this.get_paused()) {
			this._sourceNode.disconnect();
			this._sourceNode.connect(head);
		}
		head.connect(this._head);
		this._head = head;
	}
	,playAudio: function() {
		var _g = this;
		this._sourceNode.connect(this._head);
		this._startedAt = flambe_platform_html_WebAudioSound.ctx.currentTime;
		this._pausedAt = -1;
		if(!this._tickableAdded) {
			flambe_platform_html_HtmlPlatform.instance.mainLoop.addTickable(this);
			this._tickableAdded = true;
			this._hideBinding = flambe_System.hidden.get_changed().connect(function(hidden,_) {
				if(hidden) {
					_g._wasPaused = _g.get_paused();
					_g.set_paused(true);
				} else _g.set_paused(_g._wasPaused);
			});
		}
	}
	,__class__: flambe_platform_html__$WebAudioSound_WebAudioPlayback
	,__properties__: {get_position:"get_position",get_complete:"get_complete",set_paused:"set_paused",get_paused:"get_paused"}
};
var flambe_platform_html_WebGLBatcher = function(gl) {
	this._backbufferHeight = 0;
	this._backbufferWidth = 0;
	this._dataOffset = 0;
	this._maxQuads = 0;
	this._quads = 0;
	this._pendingSetScissor = false;
	this._currentRenderTarget = null;
	this._currentTexture = null;
	this._currentShader = null;
	this._currentBlendMode = null;
	this._lastScissor = null;
	this._lastTexture = null;
	this._lastShader = null;
	this._lastRenderTarget = null;
	this._lastBlendMode = null;
	this._gl = gl;
	gl.clearColor(0,0,0,0);
	gl.enable(3042);
	gl.pixelStorei(37441,1);
	this._vertexBuffer = gl.createBuffer();
	gl.bindBuffer(34962,this._vertexBuffer);
	this._quadIndexBuffer = gl.createBuffer();
	gl.bindBuffer(34963,this._quadIndexBuffer);
	this._drawTextureShader = new flambe_platform_shader_DrawTextureGL(gl);
	this._drawPatternShader = new flambe_platform_shader_DrawPatternGL(gl);
	this._fillRectShader = new flambe_platform_shader_FillRectGL(gl);
	this.resize(16);
};
$hxClasses["flambe.platform.html.WebGLBatcher"] = flambe_platform_html_WebGLBatcher;
flambe_platform_html_WebGLBatcher.__name__ = ["flambe","platform","html","WebGLBatcher"];
flambe_platform_html_WebGLBatcher.prototype = {
	resizeBackbuffer: function(width,height) {
		this._gl.viewport(0,0,width,height);
		this._backbufferWidth = width;
		this._backbufferHeight = height;
	}
	,willRender: function() {
		this._gl.clear(16384);
	}
	,didRender: function() {
		this.flush();
	}
	,bindTexture: function(texture) {
		this.flush();
		this._lastTexture = null;
		this._currentTexture = null;
		this._gl.bindTexture(3553,texture);
	}
	,deleteTexture: function(texture) {
		if(this._lastTexture != null && this._lastTexture.root == texture) {
			this.flush();
			this._lastTexture = null;
			this._currentTexture = null;
		}
		this._gl.deleteTexture(texture.nativeTexture);
	}
	,deleteFramebuffer: function(texture) {
		if(texture == this._lastRenderTarget) {
			this.flush();
			this._lastRenderTarget = null;
			this._currentRenderTarget = null;
		}
		this._gl.deleteFramebuffer(texture.framebuffer);
	}
	,prepareDrawTexture: function(renderTarget,blendMode,scissor,texture) {
		if(texture != this._lastTexture) {
			this.flush();
			this._lastTexture = texture;
		}
		return this.prepareQuad(5,renderTarget,blendMode,scissor,this._drawTextureShader);
	}
	,prepareFillRect: function(renderTarget,blendMode,scissor) {
		return this.prepareQuad(6,renderTarget,blendMode,scissor,this._fillRectShader);
	}
	,prepareQuad: function(elementsPerVertex,renderTarget,blendMode,scissor,shader) {
		if(renderTarget != this._lastRenderTarget) {
			this.flush();
			this._lastRenderTarget = renderTarget;
		}
		if(blendMode != this._lastBlendMode) {
			this.flush();
			this._lastBlendMode = blendMode;
		}
		if(shader != this._lastShader) {
			this.flush();
			this._lastShader = shader;
		}
		if(scissor != null || this._lastScissor != null) {
			if(scissor == null || this._lastScissor == null || !this._lastScissor.equals(scissor)) {
				this.flush();
				if(scissor != null) this._lastScissor = scissor.clone(this._lastScissor); else this._lastScissor = null;
				this._pendingSetScissor = true;
			}
		}
		if(this._quads >= this._maxQuads) this.resize(2 * this._maxQuads);
		++this._quads;
		var offset = this._dataOffset;
		this._dataOffset += 4 * elementsPerVertex;
		return offset;
	}
	,flush: function() {
		if(this._quads < 1) return;
		if(this._lastRenderTarget != this._currentRenderTarget) this.bindRenderTarget(this._lastRenderTarget);
		if(this._lastBlendMode != this._currentBlendMode) {
			var _g = this._lastBlendMode;
			switch(Type.enumIndex(_g)) {
			case 0:
				this._gl.blendFunc(1,771);
				break;
			case 1:
				this._gl.blendFunc(1,1);
				break;
			case 2:
				this._gl.blendFunc(774,771);
				break;
			case 3:
				this._gl.blendFunc(1,769);
				break;
			case 4:
				this._gl.blendFunc(0,770);
				break;
			case 5:
				this._gl.blendFunc(1,0);
				break;
			}
			this._currentBlendMode = this._lastBlendMode;
		}
		if(this._pendingSetScissor) {
			if(this._lastScissor != null) {
				this._gl.enable(3089);
				this._gl.scissor(Std["int"](this._lastScissor.x),Std["int"](this._lastScissor.y),Std["int"](this._lastScissor.width),Std["int"](this._lastScissor.height));
			} else this._gl.disable(3089);
			this._pendingSetScissor = false;
		}
		if(this._lastTexture != this._currentTexture) {
			this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture);
			this._currentTexture = this._lastTexture;
		}
		if(this._lastShader != this._currentShader) {
			this._lastShader.useProgram();
			this._lastShader.prepare();
			this._currentShader = this._lastShader;
		}
		if(this._lastShader == this._drawPatternShader) {
			var texture = this._lastTexture;
			var root = texture.root;
			this._drawPatternShader.setRegion(texture.rootX / root.width,texture.rootY / root.height,texture.get_width() / root.width,texture.get_height() / root.height);
		}
		this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);
		this._gl.drawElements(4,6 * this._quads,5123,0);
		this._quads = 0;
		this._dataOffset = 0;
	}
	,resize: function(maxQuads) {
		this.flush();
		if(maxQuads > 1024) return;
		this._maxQuads = maxQuads;
		this.data = new Float32Array(maxQuads * 4 * 6);
		this._gl.bufferData(34962,this.data.length * 4,35040);
		var indices = new Uint16Array(6 * maxQuads);
		var _g = 0;
		while(_g < maxQuads) {
			var ii = _g++;
			indices[ii * 6 + 0] = ii * 4 + 0;
			indices[ii * 6 + 1] = ii * 4 + 1;
			indices[ii * 6 + 2] = ii * 4 + 2;
			indices[ii * 6 + 3] = ii * 4 + 2;
			indices[ii * 6 + 4] = ii * 4 + 3;
			indices[ii * 6 + 5] = ii * 4 + 0;
		}
		this._gl.bufferData(34963,indices,35044);
	}
	,bindRenderTarget: function(texture) {
		if(texture != null) {
			this._gl.bindFramebuffer(36160,texture.framebuffer);
			this._gl.viewport(0,0,texture.width,texture.height);
		} else {
			this._gl.bindFramebuffer(36160,null);
			this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight);
		}
		this._currentRenderTarget = texture;
		this._lastRenderTarget = texture;
	}
	,__class__: flambe_platform_html_WebGLBatcher
};
var flambe_platform_html_WebGLGraphics = function(batcher,renderTarget) {
	this._stateList = null;
	this._inverseProjection = null;
	if(flambe_platform_html_WebGLGraphics._scratchQuadArray == null) flambe_platform_html_WebGLGraphics._scratchQuadArray = new Float32Array(8);
	this._batcher = batcher;
	this._renderTarget = renderTarget;
};
$hxClasses["flambe.platform.html.WebGLGraphics"] = flambe_platform_html_WebGLGraphics;
flambe_platform_html_WebGLGraphics.__name__ = ["flambe","platform","html","WebGLGraphics"];
flambe_platform_html_WebGLGraphics.__interfaces__ = [flambe_platform_InternalGraphics];
flambe_platform_html_WebGLGraphics.prototype = {
	save: function() {
		var current = this._stateList;
		var state = this._stateList.next;
		if(state == null) {
			state = new flambe_platform_html__$WebGLGraphics_DrawingState();
			state.prev = current;
			current.next = state;
		}
		current.matrix.clone(state.matrix);
		state.alpha = current.alpha;
		state.blendMode = current.blendMode;
		if(current.scissor != null) state.scissor = current.scissor.clone(state.scissor); else state.scissor = null;
		this._stateList = state;
	}
	,translate: function(x,y) {
		var matrix = this.getTopState().matrix;
		matrix.m02 += matrix.m00 * x + matrix.m01 * y;
		matrix.m12 += matrix.m10 * x + matrix.m11 * y;
	}
	,scale: function(x,y) {
		var matrix = this.getTopState().matrix;
		matrix.m00 *= x;
		matrix.m10 *= x;
		matrix.m01 *= y;
		matrix.m11 *= y;
	}
	,rotate: function(rotation) {
		var matrix = this.getTopState().matrix;
		rotation = flambe_math_FMath.toRadians(rotation);
		var sin = Math.sin(rotation);
		var cos = Math.cos(rotation);
		var m00 = matrix.m00;
		var m10 = matrix.m10;
		var m01 = matrix.m01;
		var m11 = matrix.m11;
		matrix.m00 = m00 * cos + m01 * sin;
		matrix.m10 = m10 * cos + m11 * sin;
		matrix.m01 = m01 * cos - m00 * sin;
		matrix.m11 = m11 * cos - m10 * sin;
	}
	,transform: function(m00,m10,m01,m11,m02,m12) {
		var state = this.getTopState();
		flambe_platform_html_WebGLGraphics._scratchMatrix.set(m00,m10,m01,m11,m02,m12);
		flambe_math_Matrix.multiply(state.matrix,flambe_platform_html_WebGLGraphics._scratchMatrix,state.matrix);
	}
	,restore: function() {
		flambe_util_Assert.that(this._stateList.prev != null,"Can't restore without a previous save");
		this._stateList = this._stateList.prev;
	}
	,drawTexture: function(texture,x,y) {
		this.drawSubTexture(texture,x,y,0,0,texture.get_width(),texture.get_height());
	}
	,drawSubTexture: function(texture,destX,destY,sourceX,sourceY,sourceW,sourceH) {
		var state = this.getTopState();
		var texture1 = texture;
		var root = texture1.root;
		root.assertNotDisposed();
		var pos = this.transformQuad(destX,destY,sourceW,sourceH);
		var rootWidth = root.width;
		var rootHeight = root.height;
		var u1 = (texture1.rootX + sourceX) / rootWidth;
		var v1 = (texture1.rootY + sourceY) / rootHeight;
		var u2 = u1 + sourceW / rootWidth;
		var v2 = v1 + sourceH / rootHeight;
		var alpha = state.alpha;
		var offset = this._batcher.prepareDrawTexture(this._renderTarget,state.blendMode,state.scissor,texture1);
		var data = this._batcher.data;
		data[offset] = pos[0];
		data[++offset] = pos[1];
		data[++offset] = u1;
		data[++offset] = v1;
		data[++offset] = alpha;
		data[++offset] = pos[2];
		data[++offset] = pos[3];
		data[++offset] = u2;
		data[++offset] = v1;
		data[++offset] = alpha;
		data[++offset] = pos[4];
		data[++offset] = pos[5];
		data[++offset] = u2;
		data[++offset] = v2;
		data[++offset] = alpha;
		data[++offset] = pos[6];
		data[++offset] = pos[7];
		data[++offset] = u1;
		data[++offset] = v2;
		data[++offset] = alpha;
	}
	,fillRect: function(color,x,y,width,height) {
		var state = this.getTopState();
		var pos = this.transformQuad(x,y,width,height);
		var r = (color & 16711680) / 16711680;
		var g = (color & 65280) / 65280;
		var b = (color & 255) / 255;
		var a = state.alpha;
		var offset = this._batcher.prepareFillRect(this._renderTarget,state.blendMode,state.scissor);
		var data = this._batcher.data;
		data[offset] = pos[0];
		data[++offset] = pos[1];
		data[++offset] = r;
		data[++offset] = g;
		data[++offset] = b;
		data[++offset] = a;
		data[++offset] = pos[2];
		data[++offset] = pos[3];
		data[++offset] = r;
		data[++offset] = g;
		data[++offset] = b;
		data[++offset] = a;
		data[++offset] = pos[4];
		data[++offset] = pos[5];
		data[++offset] = r;
		data[++offset] = g;
		data[++offset] = b;
		data[++offset] = a;
		data[++offset] = pos[6];
		data[++offset] = pos[7];
		data[++offset] = r;
		data[++offset] = g;
		data[++offset] = b;
		data[++offset] = a;
	}
	,multiplyAlpha: function(factor) {
		this.getTopState().alpha *= factor;
	}
	,setBlendMode: function(blendMode) {
		this.getTopState().blendMode = blendMode;
	}
	,applyScissor: function(x,y,width,height) {
		var state = this.getTopState();
		var rect = flambe_platform_html_WebGLGraphics._scratchQuadArray;
		rect[0] = x;
		rect[1] = y;
		rect[2] = x + width;
		rect[3] = y + height;
		state.matrix.transformArray(rect,4,rect);
		this._inverseProjection.transformArray(rect,4,rect);
		x = rect[0];
		y = rect[1];
		width = rect[2] - x;
		height = rect[3] - y;
		if(width < 0) {
			x += width;
			width = -width;
		}
		if(height < 0) {
			y += height;
			height = -height;
		}
		state.applyScissor(x,y,width,height);
	}
	,willRender: function() {
		this._batcher.willRender();
	}
	,didRender: function() {
		this._batcher.didRender();
	}
	,onResize: function(width,height) {
		this._stateList = new flambe_platform_html__$WebGLGraphics_DrawingState();
		var flip;
		if(this._renderTarget != null) flip = -1; else flip = 1;
		this._stateList.matrix.set(2 / width,0,0,flip * -2 / height,-1,flip);
		this._inverseProjection = new flambe_math_Matrix();
		this._inverseProjection.set(2 / width,0,0,2 / height,-1,-1);
		this._inverseProjection.invert();
	}
	,getTopState: function() {
		return this._stateList;
	}
	,transformQuad: function(x,y,width,height) {
		var x2 = x + width;
		var y2 = y + height;
		var pos = flambe_platform_html_WebGLGraphics._scratchQuadArray;
		pos[0] = x;
		pos[1] = y;
		pos[2] = x2;
		pos[3] = y;
		pos[4] = x2;
		pos[5] = y2;
		pos[6] = x;
		pos[7] = y2;
		this.getTopState().matrix.transformArray(pos,8,pos);
		return pos;
	}
	,__class__: flambe_platform_html_WebGLGraphics
};
var flambe_platform_html__$WebGLGraphics_DrawingState = function() {
	this.next = null;
	this.prev = null;
	this.scissor = null;
	this.matrix = new flambe_math_Matrix();
	this.alpha = 1;
	this.blendMode = flambe_display_BlendMode.Normal;
};
$hxClasses["flambe.platform.html._WebGLGraphics.DrawingState"] = flambe_platform_html__$WebGLGraphics_DrawingState;
flambe_platform_html__$WebGLGraphics_DrawingState.__name__ = ["flambe","platform","html","_WebGLGraphics","DrawingState"];
flambe_platform_html__$WebGLGraphics_DrawingState.prototype = {
	applyScissor: function(x,y,width,height) {
		if(this.scissor != null) {
			var x1 = flambe_math_FMath.max(this.scissor.x,x);
			var y1 = flambe_math_FMath.max(this.scissor.y,y);
			var x2 = flambe_math_FMath.min(this.scissor.x + this.scissor.width,x + width);
			var y2 = flambe_math_FMath.min(this.scissor.y + this.scissor.height,y + height);
			x = x1;
			y = y1;
			width = x2 - x1;
			height = y2 - y1;
		} else this.scissor = new flambe_math_Rectangle();
		this.scissor.set(Math.round(x),Math.round(y),Math.round(width),Math.round(height));
	}
	,__class__: flambe_platform_html__$WebGLGraphics_DrawingState
};
var flambe_platform_html_WebGLRenderer = function(stage,gl) {
	var _g = this;
	this._hasGPU = new flambe_util_Value(true);
	this.gl = gl;
	gl.canvas.addEventListener("webglcontextlost",function(event) {
		event.preventDefault();
		flambe_Log.warn("WebGL context lost");
		_g._hasGPU.set__(false);
	},false);
	gl.canvas.addEventListener("webglcontextrestore",function(event1) {
		flambe_Log.warn("WebGL context restored");
		_g.init();
		_g._hasGPU.set__(true);
	},false);
	stage.resize.connect($bind(this,this.onResize));
	this.init();
};
$hxClasses["flambe.platform.html.WebGLRenderer"] = flambe_platform_html_WebGLRenderer;
flambe_platform_html_WebGLRenderer.__name__ = ["flambe","platform","html","WebGLRenderer"];
flambe_platform_html_WebGLRenderer.__interfaces__ = [flambe_platform_InternalRenderer];
flambe_platform_html_WebGLRenderer.prototype = {
	get_type: function() {
		return flambe_subsystem_RendererType.WebGL;
	}
	,createTextureFromImage: function(image) {
		if(this.gl.isContextLost()) return null;
		var root = new flambe_platform_html_WebGLTextureRoot(this,image.width,image.height);
		root.uploadImageData(image);
		return root.createTexture(image.width,image.height);
	}
	,getCompressedTextureFormats: function() {
		return [];
	}
	,createCompressedTexture: function(format,data) {
		if(this.gl.isContextLost()) return null;
		flambe_util_Assert.fail();
		return null;
	}
	,willRender: function() {
		this.graphics.willRender();
	}
	,didRender: function() {
		this.graphics.didRender();
	}
	,onResize: function() {
		var width = this.gl.canvas.width;
		var height = this.gl.canvas.height;
		this.batcher.resizeBackbuffer(width,height);
		this.graphics.onResize(width,height);
	}
	,init: function() {
		this.batcher = new flambe_platform_html_WebGLBatcher(this.gl);
		this.graphics = new flambe_platform_html_WebGLGraphics(this.batcher,null);
		this.onResize();
	}
	,__class__: flambe_platform_html_WebGLRenderer
	,__properties__: {get_type:"get_type"}
};
var flambe_platform_html_WebGLTexture = function(root,width,height) {
	flambe_platform_BasicTexture.call(this,root,width,height);
};
$hxClasses["flambe.platform.html.WebGLTexture"] = flambe_platform_html_WebGLTexture;
flambe_platform_html_WebGLTexture.__name__ = ["flambe","platform","html","WebGLTexture"];
flambe_platform_html_WebGLTexture.__super__ = flambe_platform_BasicTexture;
flambe_platform_html_WebGLTexture.prototype = $extend(flambe_platform_BasicTexture.prototype,{
	__class__: flambe_platform_html_WebGLTexture
});
var flambe_platform_html_WebGLTextureRoot = function(renderer,width,height) {
	this._graphics = null;
	this.framebuffer = null;
	flambe_platform_BasicAsset.call(this);
	this._renderer = renderer;
	this.width = flambe_math_FMath.max(2,flambe_platform_MathUtil.nextPowerOfTwo(width));
	this.height = flambe_math_FMath.max(2,flambe_platform_MathUtil.nextPowerOfTwo(height));
	var gl = renderer.gl;
	this.nativeTexture = gl.createTexture();
	renderer.batcher.bindTexture(this.nativeTexture);
	gl.texParameteri(3553,10242,33071);
	gl.texParameteri(3553,10243,33071);
	gl.texParameteri(3553,10240,9729);
	gl.texParameteri(3553,10241,9729);
};
$hxClasses["flambe.platform.html.WebGLTextureRoot"] = flambe_platform_html_WebGLTextureRoot;
flambe_platform_html_WebGLTextureRoot.__name__ = ["flambe","platform","html","WebGLTextureRoot"];
flambe_platform_html_WebGLTextureRoot.__interfaces__ = [flambe_platform_TextureRoot];
flambe_platform_html_WebGLTextureRoot.drawBorder = function(canvas,width,height) {
	var ctx = canvas.getContext("2d",null);
	ctx.drawImage(canvas,width - 1,0,1,height,width,0,1,height);
	ctx.drawImage(canvas,0,height - 1,width,1,0,height,width,1);
};
flambe_platform_html_WebGLTextureRoot.__super__ = flambe_platform_BasicAsset;
flambe_platform_html_WebGLTextureRoot.prototype = $extend(flambe_platform_BasicAsset.prototype,{
	createTexture: function(width,height) {
		return new flambe_platform_html_WebGLTexture(this,width,height);
	}
	,uploadImageData: function(image) {
		this.assertNotDisposed();
		if(this.width != image.width || this.height != image.height) {
			var resized = flambe_platform_html_HtmlUtil.createEmptyCanvas(this.width,this.height);
			resized.getContext("2d",null).drawImage(image,0,0);
			flambe_platform_html_WebGLTextureRoot.drawBorder(resized,image.width,image.height);
			image = resized;
		}
		this._renderer.batcher.bindTexture(this.nativeTexture);
		var gl = this._renderer.gl;
		gl.texImage2D(3553,0,6408,6408,5121,image);
	}
	,copyFrom: function(that) {
		this.nativeTexture = that.nativeTexture;
		this.framebuffer = that.framebuffer;
		this.width = that.width;
		this.height = that.height;
		this._graphics = that._graphics;
	}
	,onDisposed: function() {
		var batcher = this._renderer.batcher;
		batcher.deleteTexture(this);
		if(this.framebuffer != null) batcher.deleteFramebuffer(this);
		this.nativeTexture = null;
		this.framebuffer = null;
		this._graphics = null;
	}
	,__class__: flambe_platform_html_WebGLTextureRoot
});
var flambe_platform_shader_ShaderGL = function(gl,vertSource,fragSource) {
	fragSource = ["#ifdef GL_ES","precision mediump float;","#endif"].join("\n") + "\n" + fragSource;
	this._gl = gl;
	this._program = gl.createProgram();
	gl.attachShader(this._program,flambe_platform_shader_ShaderGL.createShader(gl,35633,vertSource));
	gl.attachShader(this._program,flambe_platform_shader_ShaderGL.createShader(gl,35632,fragSource));
	gl.linkProgram(this._program);
	gl.useProgram(this._program);
	if(!gl.getProgramParameter(this._program,35714)) flambe_Log.error("Error linking shader program",["log",gl.getProgramInfoLog(this._program)]);
};
$hxClasses["flambe.platform.shader.ShaderGL"] = flambe_platform_shader_ShaderGL;
flambe_platform_shader_ShaderGL.__name__ = ["flambe","platform","shader","ShaderGL"];
flambe_platform_shader_ShaderGL.createShader = function(gl,type,source) {
	var shader = gl.createShader(type);
	gl.shaderSource(shader,source);
	gl.compileShader(shader);
	if(!gl.getShaderParameter(shader,35713)) {
		var typeName;
		if(type == 35633) typeName = "vertex"; else typeName = "fragment";
		flambe_Log.error("Error compiling " + typeName + " shader",["log",gl.getShaderInfoLog(shader)]);
	}
	return shader;
};
flambe_platform_shader_ShaderGL.prototype = {
	useProgram: function() {
		this._gl.useProgram(this._program);
	}
	,prepare: function() {
		flambe_util_Assert.fail("abstract");
	}
	,getAttribLocation: function(name) {
		var loc = this._gl.getAttribLocation(this._program,name);
		flambe_util_Assert.that(loc >= 0,"Missing attribute",["name",name]);
		return loc;
	}
	,getUniformLocation: function(name) {
		var loc = this._gl.getUniformLocation(this._program,name);
		flambe_util_Assert.that(loc != null,"Missing uniform",["name",name]);
		return loc;
	}
	,__class__: flambe_platform_shader_ShaderGL
};
var flambe_platform_shader_DrawPatternGL = function(gl) {
	flambe_platform_shader_ShaderGL.call(this,gl,["attribute highp vec2 a_pos;","attribute mediump vec2 a_uv;","attribute lowp float a_alpha;","varying mediump vec2 v_uv;","varying lowp float v_alpha;","void main (void) {","v_uv = a_uv;","v_alpha = a_alpha;","gl_Position = vec4(a_pos, 0, 1);","}"].join("\n"),["varying mediump vec2 v_uv;","varying lowp float v_alpha;","uniform lowp sampler2D u_texture;","uniform mediump vec4 u_region;","void main (void) {","gl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;","}"].join("\n"));
	this.a_pos = this.getAttribLocation("a_pos");
	this.a_uv = this.getAttribLocation("a_uv");
	this.a_alpha = this.getAttribLocation("a_alpha");
	this.u_texture = this.getUniformLocation("u_texture");
	this.u_region = this.getUniformLocation("u_region");
	this.setTexture(0);
};
$hxClasses["flambe.platform.shader.DrawPatternGL"] = flambe_platform_shader_DrawPatternGL;
flambe_platform_shader_DrawPatternGL.__name__ = ["flambe","platform","shader","DrawPatternGL"];
flambe_platform_shader_DrawPatternGL.__super__ = flambe_platform_shader_ShaderGL;
flambe_platform_shader_DrawPatternGL.prototype = $extend(flambe_platform_shader_ShaderGL.prototype,{
	setTexture: function(unit) {
		this._gl.uniform1i(this.u_texture,unit);
	}
	,setRegion: function(x,y,width,height) {
		this._gl.uniform4f(this.u_region,x,y,width,height);
	}
	,prepare: function() {
		this._gl.enableVertexAttribArray(this.a_pos);
		this._gl.enableVertexAttribArray(this.a_uv);
		this._gl.enableVertexAttribArray(this.a_alpha);
		var bytesPerFloat = 4;
		var stride = 5 * bytesPerFloat;
		this._gl.vertexAttribPointer(this.a_pos,2,5126,false,stride,0 * bytesPerFloat);
		this._gl.vertexAttribPointer(this.a_uv,2,5126,false,stride,2 * bytesPerFloat);
		this._gl.vertexAttribPointer(this.a_alpha,1,5126,false,stride,4 * bytesPerFloat);
	}
	,__class__: flambe_platform_shader_DrawPatternGL
});
var flambe_platform_shader_DrawTextureGL = function(gl) {
	flambe_platform_shader_ShaderGL.call(this,gl,["attribute highp vec2 a_pos;","attribute mediump vec2 a_uv;","attribute lowp float a_alpha;","varying mediump vec2 v_uv;","varying lowp float v_alpha;","void main (void) {","v_uv = a_uv;","v_alpha = a_alpha;","gl_Position = vec4(a_pos, 0, 1);","}"].join("\n"),["varying mediump vec2 v_uv;","varying lowp float v_alpha;","uniform lowp sampler2D u_texture;","void main (void) {","gl_FragColor = texture2D(u_texture, v_uv) * v_alpha;","}"].join("\n"));
	this.a_pos = this.getAttribLocation("a_pos");
	this.a_uv = this.getAttribLocation("a_uv");
	this.a_alpha = this.getAttribLocation("a_alpha");
	this.u_texture = this.getUniformLocation("u_texture");
	this.setTexture(0);
};
$hxClasses["flambe.platform.shader.DrawTextureGL"] = flambe_platform_shader_DrawTextureGL;
flambe_platform_shader_DrawTextureGL.__name__ = ["flambe","platform","shader","DrawTextureGL"];
flambe_platform_shader_DrawTextureGL.__super__ = flambe_platform_shader_ShaderGL;
flambe_platform_shader_DrawTextureGL.prototype = $extend(flambe_platform_shader_ShaderGL.prototype,{
	setTexture: function(unit) {
		this._gl.uniform1i(this.u_texture,unit);
	}
	,prepare: function() {
		this._gl.enableVertexAttribArray(this.a_pos);
		this._gl.enableVertexAttribArray(this.a_uv);
		this._gl.enableVertexAttribArray(this.a_alpha);
		var bytesPerFloat = 4;
		var stride = 5 * bytesPerFloat;
		this._gl.vertexAttribPointer(this.a_pos,2,5126,false,stride,0 * bytesPerFloat);
		this._gl.vertexAttribPointer(this.a_uv,2,5126,false,stride,2 * bytesPerFloat);
		this._gl.vertexAttribPointer(this.a_alpha,1,5126,false,stride,4 * bytesPerFloat);
	}
	,__class__: flambe_platform_shader_DrawTextureGL
});
var flambe_platform_shader_FillRectGL = function(gl) {
	flambe_platform_shader_ShaderGL.call(this,gl,["attribute highp vec2 a_pos;","attribute lowp vec3 a_rgb;","attribute lowp float a_alpha;","varying lowp vec4 v_color;","void main (void) {","v_color = vec4(a_rgb*a_alpha, a_alpha);","gl_Position = vec4(a_pos, 0, 1);","}"].join("\n"),["varying lowp vec4 v_color;","void main (void) {","gl_FragColor = v_color;","}"].join("\n"));
	this.a_pos = this.getAttribLocation("a_pos");
	this.a_rgb = this.getAttribLocation("a_rgb");
	this.a_alpha = this.getAttribLocation("a_alpha");
};
$hxClasses["flambe.platform.shader.FillRectGL"] = flambe_platform_shader_FillRectGL;
flambe_platform_shader_FillRectGL.__name__ = ["flambe","platform","shader","FillRectGL"];
flambe_platform_shader_FillRectGL.__super__ = flambe_platform_shader_ShaderGL;
flambe_platform_shader_FillRectGL.prototype = $extend(flambe_platform_shader_ShaderGL.prototype,{
	prepare: function() {
		this._gl.enableVertexAttribArray(this.a_pos);
		this._gl.enableVertexAttribArray(this.a_rgb);
		this._gl.enableVertexAttribArray(this.a_alpha);
		var bytesPerFloat = 4;
		var stride = 6 * bytesPerFloat;
		this._gl.vertexAttribPointer(this.a_pos,2,5126,false,stride,0 * bytesPerFloat);
		this._gl.vertexAttribPointer(this.a_rgb,3,5126,false,stride,2 * bytesPerFloat);
		this._gl.vertexAttribPointer(this.a_alpha,1,5126,false,stride,5 * bytesPerFloat);
	}
	,__class__: flambe_platform_shader_FillRectGL
});
var flambe_scene_Director = function() {
	this._transitor = null;
};
$hxClasses["flambe.scene.Director"] = flambe_scene_Director;
flambe_scene_Director.__name__ = ["flambe","scene","Director"];
flambe_scene_Director.__super__ = flambe_Component;
flambe_scene_Director.prototype = $extend(flambe_Component.prototype,{
	get_name: function() {
		return "Director_9";
	}
	,onAdded: function() {
		this.owner.addChild(this._root);
	}
	,onRemoved: function() {
		this.completeTransition();
		var _g = 0;
		var _g1 = this.scenes;
		while(_g < _g1.length) {
			var scene = _g1[_g];
			++_g;
			scene.dispose();
		}
		this.scenes = [];
		this.occludedScenes = [];
		this._root.dispose();
	}
	,onUpdate: function(dt) {
		if(this._transitor != null && this._transitor.update(dt)) this.completeTransition();
	}
	,get_topScene: function() {
		var ll = this.scenes.length;
		if(ll > 0) return this.scenes[ll - 1]; else return null;
	}
	,show: function(scene) {
		var events;
		var component = scene.getComponent("Scene_10");
		events = component;
		if(events != null) events.shown.emit();
	}
	,invalidateVisibility: function() {
		var ii = this.scenes.length;
		while(ii > 0) {
			var scene1 = this.scenes[--ii];
			var comp;
			var component = scene1.getComponent("Scene_10");
			comp = component;
			if(comp == null || comp.opaque) break;
		}
		if(this.scenes.length > 0) this.occludedScenes = this.scenes.slice(ii,this.scenes.length - 1); else this.occludedScenes = [];
		var scene = this.get_topScene();
		if(scene != null) this.show(scene);
	}
	,completeTransition: function() {
		if(this._transitor != null) {
			this._transitor.complete();
			this._transitor = null;
			this.invalidateVisibility();
		}
	}
	,__class__: flambe_scene_Director
	,__properties__: $extend(flambe_Component.prototype.__properties__,{get_topScene:"get_topScene"})
});
var flambe_scene__$Director_Transitor = function() { };
$hxClasses["flambe.scene._Director.Transitor"] = flambe_scene__$Director_Transitor;
flambe_scene__$Director_Transitor.__name__ = ["flambe","scene","_Director","Transitor"];
flambe_scene__$Director_Transitor.prototype = {
	update: function(dt) {
		return this._transition.update(dt);
	}
	,complete: function() {
		this._transition.complete();
		this._onComplete();
	}
	,__class__: flambe_scene__$Director_Transitor
};
var flambe_scene_Scene = function() { };
$hxClasses["flambe.scene.Scene"] = flambe_scene_Scene;
flambe_scene_Scene.__name__ = ["flambe","scene","Scene"];
flambe_scene_Scene.__super__ = flambe_Component;
flambe_scene_Scene.prototype = $extend(flambe_Component.prototype,{
	get_name: function() {
		return "Scene_10";
	}
	,__class__: flambe_scene_Scene
});
var flambe_scene_Transition = function() { };
$hxClasses["flambe.scene.Transition"] = flambe_scene_Transition;
flambe_scene_Transition.__name__ = ["flambe","scene","Transition"];
flambe_scene_Transition.prototype = {
	update: function(dt) {
		return true;
	}
	,complete: function() {
	}
	,__class__: flambe_scene_Transition
};
var flambe_subsystem_RendererType = $hxClasses["flambe.subsystem.RendererType"] = { __ename__ : ["flambe","subsystem","RendererType"], __constructs__ : ["Stage3D","WebGL","Canvas"] };
flambe_subsystem_RendererType.Stage3D = ["Stage3D",0];
flambe_subsystem_RendererType.Stage3D.__enum__ = flambe_subsystem_RendererType;
flambe_subsystem_RendererType.WebGL = ["WebGL",1];
flambe_subsystem_RendererType.WebGL.__enum__ = flambe_subsystem_RendererType;
flambe_subsystem_RendererType.Canvas = ["Canvas",2];
flambe_subsystem_RendererType.Canvas.__enum__ = flambe_subsystem_RendererType;
flambe_subsystem_RendererType.__empty_constructs__ = [flambe_subsystem_RendererType.Stage3D,flambe_subsystem_RendererType.WebGL,flambe_subsystem_RendererType.Canvas];
var flambe_swf_Symbol = function() { };
$hxClasses["flambe.swf.Symbol"] = flambe_swf_Symbol;
flambe_swf_Symbol.__name__ = ["flambe","swf","Symbol"];
flambe_swf_Symbol.prototype = {
	__class__: flambe_swf_Symbol
};
var flambe_swf_BitmapSymbol = function(json,atlas) {
	this._name = json.symbol;
	var rect = json.rect;
	this.texture = atlas.subTexture(rect[0],rect[1],rect[2],rect[3]);
	var origin = json.origin;
	if(origin != null) {
		this.anchorX = origin[0];
		this.anchorY = origin[1];
	} else {
		this.anchorX = 0;
		this.anchorY = 0;
	}
};
$hxClasses["flambe.swf.BitmapSymbol"] = flambe_swf_BitmapSymbol;
flambe_swf_BitmapSymbol.__name__ = ["flambe","swf","BitmapSymbol"];
flambe_swf_BitmapSymbol.__interfaces__ = [flambe_swf_Symbol];
flambe_swf_BitmapSymbol.prototype = {
	createSprite: function() {
		var sprite = new flambe_display_ImageSprite(this.texture);
		sprite.setAnchor(this.anchorX,this.anchorY);
		return sprite;
	}
	,get_name: function() {
		return this._name;
	}
	,__class__: flambe_swf_BitmapSymbol
	,__properties__: {get_name:"get_name"}
};
var flambe_swf_Library = function(pack,baseName,atlasFolder) {
	this._file = pack.getFile(baseName);
	var json = JSON.parse(this._file.toString());
	this._symbols = new haxe_ds_StringMap();
	this.frameRate = json.frameRate;
	var movies = [];
	var _g = 0;
	var _g1 = json.movies;
	while(_g < _g1.length) {
		var movieObject = _g1[_g];
		++_g;
		var movie = new flambe_swf_MovieSymbol(this,movieObject);
		movies.push(movie);
		var key = movie.get_name();
		this._symbols.set(key,movie);
	}
	var groups = json.textureGroups;
	if(groups[0].scaleFactor != 1 || groups.length > 1) flambe_Log.warn("Flambe doesn't support Flump's Additional Scale Factors. " + "Use Base Scales and load from different asset packs instead.");
	var atlases = groups[0].atlases;
	var _g2 = 0;
	while(_g2 < atlases.length) {
		var atlasObject = atlases[_g2];
		++_g2;
		var atlas = pack.getTexture(atlasFolder + "." + flambe_util_Strings.removeFileExtension(atlasObject.file));
		var _g11 = 0;
		var _g21 = atlasObject.textures;
		while(_g11 < _g21.length) {
			var textureObject = _g21[_g11];
			++_g11;
			var bitmap = new flambe_swf_BitmapSymbol(textureObject,atlas);
			var key1 = bitmap.get_name();
			this._symbols.set(key1,bitmap);
		}
	}
	var _g3 = 0;
	while(_g3 < movies.length) {
		var movie1 = movies[_g3];
		++_g3;
		var _g12 = 0;
		var _g22 = movie1.layers;
		while(_g12 < _g22.length) {
			var layer = _g22[_g12];
			++_g12;
			var keyframes = layer.keyframes;
			var ll = keyframes.length;
			var _g31 = 0;
			while(_g31 < ll) {
				var ii = _g31++;
				var kf = keyframes[ii];
				if(kf.symbolName != null) {
					var symbol = this._symbols.get(kf.symbolName);
					flambe_util_Assert.that(symbol != null);
					kf.setSymbol(symbol);
				}
				if(kf.tweened && kf.duration == 1 && ii + 1 < ll) {
					var nextKf = keyframes[ii + 1];
					if(!nextKf.visible || nextKf.symbolName == null) kf.setVisible(false);
				}
			}
		}
	}
};
$hxClasses["flambe.swf.Library"] = flambe_swf_Library;
flambe_swf_Library.__name__ = ["flambe","swf","Library"];
flambe_swf_Library.prototype = {
	createSprite: function(symbolName,required) {
		if(required == null) required = true;
		var symbol = this._symbols.get(symbolName);
		if(symbol == null) {
			if(required) throw new js__$Boot_HaxeError(flambe_util_Strings.withFields("Missing symbol",["name",symbolName]));
			return null;
		}
		return symbol.createSprite();
	}
	,createMovie: function(symbolName,required) {
		if(required == null) required = true;
		return this.createSprite(symbolName,required);
	}
	,__class__: flambe_swf_Library
};
var flambe_swf_MoviePlayer = function(lib) {
	this._loopingSprite = null;
	this._oneshotSprite = null;
	flambe_Component.call(this);
	this._lib = lib;
	this._root = new flambe_Entity();
	this.movie = new flambe_util_Value(null);
	this.setCache(true);
};
$hxClasses["flambe.swf.MoviePlayer"] = flambe_swf_MoviePlayer;
flambe_swf_MoviePlayer.__name__ = ["flambe","swf","MoviePlayer"];
flambe_swf_MoviePlayer.__super__ = flambe_Component;
flambe_swf_MoviePlayer.prototype = $extend(flambe_Component.prototype,{
	get_name: function() {
		return "MoviePlayer_6";
	}
	,setCache: function(cache) {
		if(cache) this._cache = new haxe_ds_StringMap(); else this._cache = null;
		return this;
	}
	,play: function(name,restart) {
		if(restart == null) restart = true;
		flambe_util_Assert.that(this._loopingSprite != null,"A loop must be started before the first call to play()");
		if(restart || this._oneshotSprite == null || this._oneshotSprite.symbol.get_name() != name) this._oneshotSprite = this.playFromCache(name);
		return this;
	}
	,loop: function(name,restart) {
		if(restart == null) restart = true;
		if(restart || this._loopingSprite == null || this._loopingSprite.symbol.get_name() != name) {
			this._oneshotSprite = null;
			this._loopingSprite = this.playFromCache(name);
		}
		return this;
	}
	,onAdded: function() {
		this.owner.addChild(this._root);
	}
	,onRemoved: function() {
		this._root.dispose();
		this._oneshotSprite = this._loopingSprite = null;
		this.movie.set__(null);
	}
	,onUpdate: function(dt) {
		if(this._oneshotSprite != null && this._oneshotSprite.get_position() + dt > this._oneshotSprite.symbol.duration) {
			this._oneshotSprite = null;
			this.setCurrent(this._loopingSprite);
		}
	}
	,playFromCache: function(name) {
		var sprite;
		if(this._cache != null) {
			sprite = this._cache.get(name);
			if(sprite != null) sprite.set_position(0); else {
				sprite = this.createMovie(name);
				this._cache.set(name,sprite);
			}
		} else sprite = this.createMovie(name);
		return this.setCurrent(sprite);
	}
	,createMovie: function(name) {
		var sprite = this._lib.createMovie(name);
		if(this._decorator != null) this._decorator(sprite);
		return sprite;
	}
	,setCurrent: function(current) {
		this._root.add(current);
		return this.movie.set__(current);
	}
	,__class__: flambe_swf_MoviePlayer
});
var flambe_swf_MovieSprite = function(symbol) {
	this._looped = null;
	flambe_display_Sprite.call(this);
	this.symbol = symbol;
	this.speed = new flambe_animation_AnimatedFloat(1);
	this._animators = flambe_util_Arrays.create(symbol.layers.length);
	var _g1 = 0;
	var _g = this._animators.length;
	while(_g1 < _g) {
		var ii = _g1++;
		var layer = symbol.layers[ii];
		this._animators[ii] = new flambe_swf__$MovieSprite_LayerAnimator(layer);
	}
	this._frame = 0;
	this._position = 0;
	this["goto"](1);
};
$hxClasses["flambe.swf.MovieSprite"] = flambe_swf_MovieSprite;
flambe_swf_MovieSprite.__name__ = ["flambe","swf","MovieSprite"];
flambe_swf_MovieSprite.__super__ = flambe_display_Sprite;
flambe_swf_MovieSprite.prototype = $extend(flambe_display_Sprite.prototype,{
	onAdded: function() {
		flambe_display_Sprite.prototype.onAdded.call(this);
		var _g = 0;
		var _g1 = this._animators;
		while(_g < _g1.length) {
			var animator = _g1[_g];
			++_g;
			this.owner.addChild(animator.content);
		}
	}
	,onRemoved: function() {
		flambe_display_Sprite.prototype.onRemoved.call(this);
		var _g = 0;
		var _g1 = this._animators;
		while(_g < _g1.length) {
			var animator = _g1[_g];
			++_g;
			this.owner.removeChild(animator.content);
		}
	}
	,onUpdate: function(dt) {
		flambe_display_Sprite.prototype.onUpdate.call(this,dt);
		this.speed.update(dt);
		var _g = this._flags & (256 | 512);
		switch(_g) {
		case 0:
			this._position += this.speed.get__() * dt;
			if(this._position > this.symbol.duration) {
				this._position = this._position % this.symbol.duration;
				if(this._looped != null) this._looped.emit();
			}
			break;
		case 512:
			this._flags = flambe_util_BitSets.remove(this._flags,512);
			break;
		}
		var newFrame = this._position * this.symbol.frameRate;
		this["goto"](newFrame);
	}
	,'goto': function(newFrame) {
		if(this._frame == newFrame) return;
		var wrapped = newFrame < this._frame;
		if(wrapped) {
			var _g = 0;
			var _g1 = this._animators;
			while(_g < _g1.length) {
				var animator = _g1[_g];
				++_g;
				animator.needsKeyframeUpdate = true;
				animator.keyframeIdx = 0;
			}
		}
		var _g2 = 0;
		var _g11 = this._animators;
		while(_g2 < _g11.length) {
			var animator1 = _g11[_g2];
			++_g2;
			animator1.composeFrame(newFrame);
		}
		this._frame = newFrame;
	}
	,get_position: function() {
		return this._position;
	}
	,set_position: function(position) {
		return this._position = flambe_math_FMath.clamp(position,0,this.symbol.duration);
	}
	,set_pixelSnapping: function(pixelSnapping) {
		var _g = 0;
		var _g1 = this._animators;
		while(_g < _g1.length) {
			var layer = _g1[_g];
			++_g;
			layer.setPixelSnapping(pixelSnapping);
		}
		return flambe_display_Sprite.prototype.set_pixelSnapping.call(this,pixelSnapping);
	}
	,rewind: function() {
		this._position = 0;
		this._flags = flambe_util_BitSets.add(this._flags,512);
	}
	,__class__: flambe_swf_MovieSprite
	,__properties__: $extend(flambe_display_Sprite.prototype.__properties__,{set_position:"set_position",get_position:"get_position"})
});
var flambe_swf__$MovieSprite_LayerAnimator = function(layer) {
	this.keyframeIdx = 0;
	this.needsKeyframeUpdate = false;
	this.layer = layer;
	this.content = new flambe_Entity();
	if(layer.empty) this._sprites = null; else {
		this._sprites = flambe_util_Arrays.create(layer.keyframes.length);
		var _g1 = 0;
		var _g = this._sprites.length;
		while(_g1 < _g) {
			var ii = _g1++;
			var kf = layer.keyframes[ii];
			if(ii > 0 && layer.keyframes[ii - 1].symbol == kf.symbol) this._sprites[ii] = this._sprites[ii - 1]; else if(kf.symbol == null) this._sprites[ii] = new flambe_display_Sprite(); else this._sprites[ii] = kf.symbol.createSprite();
		}
		this.content.add(this._sprites[0]);
	}
};
$hxClasses["flambe.swf._MovieSprite.LayerAnimator"] = flambe_swf__$MovieSprite_LayerAnimator;
flambe_swf__$MovieSprite_LayerAnimator.__name__ = ["flambe","swf","_MovieSprite","LayerAnimator"];
flambe_swf__$MovieSprite_LayerAnimator.prototype = {
	composeFrame: function(frame) {
		if(this._sprites == null) return;
		var keyframes = this.layer.keyframes;
		var finalFrame = keyframes.length - 1;
		if(frame > this.layer.frames) {
			((function($this) {
				var $r;
				var component = $this.content.getComponent("Sprite_3");
				$r = component;
				return $r;
			}(this))).set_visible(false);
			this.keyframeIdx = finalFrame;
			this.needsKeyframeUpdate = true;
			return;
		}
		while(this.keyframeIdx < finalFrame && keyframes[this.keyframeIdx + 1].index <= frame) {
			++this.keyframeIdx;
			this.needsKeyframeUpdate = true;
		}
		var sprite;
		if(this.needsKeyframeUpdate) {
			this.needsKeyframeUpdate = false;
			sprite = this._sprites[this.keyframeIdx];
			if(sprite != (function($this) {
				var $r;
				var component1 = $this.content.getComponent("Sprite_3");
				$r = component1;
				return $r;
			}(this))) {
				if(Type.getClass(sprite) == flambe_swf_MovieSprite) {
					var movie = sprite;
					movie.rewind();
				}
				this.content.add(sprite);
			}
		} else {
			var component2 = this.content.getComponent("Sprite_3");
			sprite = component2;
		}
		var kf = keyframes[this.keyframeIdx];
		var visible = kf.visible && kf.symbol != null;
		sprite.set_visible(visible);
		if(!visible) return;
		var x = kf.x;
		var y = kf.y;
		var scaleX = kf.scaleX;
		var scaleY = kf.scaleY;
		var skewX = kf.skewX;
		var skewY = kf.skewY;
		var alpha = kf.alpha;
		if(kf.tweened && this.keyframeIdx < finalFrame) {
			var interp = (frame - kf.index) / kf.duration;
			var ease = kf.ease;
			if(ease != 0) {
				var t;
				if(ease < 0) {
					var inv = 1 - interp;
					t = 1 - inv * inv;
					ease = -ease;
				} else t = interp * interp;
				interp = ease * t + (1 - ease) * interp;
			}
			var nextKf = keyframes[this.keyframeIdx + 1];
			x += (nextKf.x - x) * interp;
			y += (nextKf.y - y) * interp;
			scaleX += (nextKf.scaleX - scaleX) * interp;
			scaleY += (nextKf.scaleY - scaleY) * interp;
			skewX += (nextKf.skewX - skewX) * interp;
			skewY += (nextKf.skewY - skewY) * interp;
			alpha += (nextKf.alpha - alpha) * interp;
		}
		var matrix = sprite.getLocalMatrix();
		var sinX = 0.0;
		var cosX = 1.0;
		var sinY = 0.0;
		var cosY = 1.0;
		if(skewX != 0) {
			sinX = Math.sin(skewX);
			cosX = Math.cos(skewX);
		}
		if(skewY != 0) {
			sinY = Math.sin(skewY);
			cosY = Math.cos(skewY);
		}
		matrix.set(cosY * scaleX,sinY * scaleX,-sinX * scaleY,cosX * scaleY,x,y);
		matrix.translate(-kf.pivotX,-kf.pivotY);
		sprite.alpha.set__(alpha);
	}
	,setPixelSnapping: function(pixelSnapping) {
		if(this._sprites != null) {
			var _g = 0;
			var _g1 = this._sprites;
			while(_g < _g1.length) {
				var sprite = _g1[_g];
				++_g;
				sprite.set_pixelSnapping(pixelSnapping);
			}
		}
	}
	,__class__: flambe_swf__$MovieSprite_LayerAnimator
};
var flambe_swf_MovieSymbol = function(lib,json) {
	this._name = json.id;
	this.frameRate = lib.frameRate;
	this.frames = 0.0;
	this.layers = flambe_util_Arrays.create(json.layers.length);
	var _g1 = 0;
	var _g = this.layers.length;
	while(_g1 < _g) {
		var ii = _g1++;
		var layer = new flambe_swf_MovieLayer(json.layers[ii]);
		this.frames = Math.max(layer.frames,this.frames);
		this.layers[ii] = layer;
	}
	this.duration = this.frames / this.frameRate;
};
$hxClasses["flambe.swf.MovieSymbol"] = flambe_swf_MovieSymbol;
flambe_swf_MovieSymbol.__name__ = ["flambe","swf","MovieSymbol"];
flambe_swf_MovieSymbol.__interfaces__ = [flambe_swf_Symbol];
flambe_swf_MovieSymbol.prototype = {
	get_name: function() {
		return this._name;
	}
	,createSprite: function() {
		return new flambe_swf_MovieSprite(this);
	}
	,__class__: flambe_swf_MovieSymbol
	,__properties__: {get_name:"get_name"}
};
var flambe_swf_MovieLayer = function(json) {
	this.empty = true;
	this.name = json.name;
	var prevKf = null;
	this.keyframes = flambe_util_Arrays.create(json.keyframes.length);
	var _g1 = 0;
	var _g = this.keyframes.length;
	while(_g1 < _g) {
		var ii = _g1++;
		prevKf = new flambe_swf_MovieKeyframe(json.keyframes[ii],prevKf);
		this.keyframes[ii] = prevKf;
		this.empty = this.empty && prevKf.symbolName == null;
	}
	if(prevKf != null) this.frames = prevKf.index + prevKf.duration; else this.frames = 0;
};
$hxClasses["flambe.swf.MovieLayer"] = flambe_swf_MovieLayer;
flambe_swf_MovieLayer.__name__ = ["flambe","swf","MovieLayer"];
flambe_swf_MovieLayer.prototype = {
	__class__: flambe_swf_MovieLayer
};
var flambe_swf_MovieKeyframe = function(json,prevKf) {
	this.ease = 0;
	this.tweened = true;
	this.visible = true;
	this.alpha = 1;
	this.pivotY = 0;
	this.pivotX = 0;
	this.skewY = 0;
	this.skewX = 0;
	this.scaleY = 1;
	this.scaleX = 1;
	this.y = 0;
	this.x = 0;
	this.symbol = null;
	if(prevKf != null) this.index = prevKf.index + prevKf.duration; else this.index = 0;
	this.duration = json.duration;
	this.label = json.label;
	this.symbolName = json.ref;
	var loc = json.loc;
	if(loc != null) {
		this.x = loc[0];
		this.y = loc[1];
	}
	var scale = json.scale;
	if(scale != null) {
		this.scaleX = scale[0];
		this.scaleY = scale[1];
	}
	var skew = json.skew;
	if(skew != null) {
		this.skewX = skew[0];
		this.skewY = skew[1];
	}
	var pivot = json.pivot;
	if(pivot != null) {
		this.pivotX = pivot[0];
		this.pivotY = pivot[1];
	}
	if(json.alpha != null) this.alpha = json.alpha;
	if(json.visible != null) this.visible = json.visible;
	if(json.tweened != null) this.tweened = json.tweened;
	if(json.ease != null) this.ease = json.ease;
};
$hxClasses["flambe.swf.MovieKeyframe"] = flambe_swf_MovieKeyframe;
flambe_swf_MovieKeyframe.__name__ = ["flambe","swf","MovieKeyframe"];
flambe_swf_MovieKeyframe.prototype = {
	setVisible: function(visible) {
		this.visible = visible;
	}
	,setSymbol: function(symbol) {
		this.symbol = symbol;
	}
	,__class__: flambe_swf_MovieKeyframe
};
var flambe_util_Arrays = function() { };
$hxClasses["flambe.util.Arrays"] = flambe_util_Arrays;
flambe_util_Arrays.__name__ = ["flambe","util","Arrays"];
flambe_util_Arrays.create = function(length) {
	return new Array(length);
};
flambe_util_Arrays.resize = function(arr,length) {
	arr.length = length;
};
var flambe_util_Assert = function() { };
$hxClasses["flambe.util.Assert"] = flambe_util_Assert;
flambe_util_Assert.__name__ = ["flambe","util","Assert"];
flambe_util_Assert.that = function(condition,message,fields) {
	if(!condition) flambe_util_Assert.fail(message,fields);
};
flambe_util_Assert.fail = function(message,fields) {
	var error = "Assertion failed!";
	if(message != null) error += " " + message;
	if(fields != null) error = flambe_util_Strings.withFields(error,fields);
	throw new js__$Boot_HaxeError(error);
};
var flambe_util_BitSets = function() { };
$hxClasses["flambe.util.BitSets"] = flambe_util_BitSets;
flambe_util_BitSets.__name__ = ["flambe","util","BitSets"];
flambe_util_BitSets.add = function(bits,mask) {
	return bits | mask;
};
flambe_util_BitSets.remove = function(bits,mask) {
	return bits & ~mask;
};
flambe_util_BitSets.contains = function(bits,mask) {
	return (bits & mask) != 0;
};
flambe_util_BitSets.containsAll = function(bits,mask) {
	return (bits & mask) == mask;
};
flambe_util_BitSets.set = function(bits,mask,enabled) {
	if(enabled) return flambe_util_BitSets.add(bits,mask); else return flambe_util_BitSets.remove(bits,mask);
};
var flambe_util_LogLevel = $hxClasses["flambe.util.LogLevel"] = { __ename__ : ["flambe","util","LogLevel"], __constructs__ : ["Info","Warn","Error"] };
flambe_util_LogLevel.Info = ["Info",0];
flambe_util_LogLevel.Info.__enum__ = flambe_util_LogLevel;
flambe_util_LogLevel.Warn = ["Warn",1];
flambe_util_LogLevel.Warn.__enum__ = flambe_util_LogLevel;
flambe_util_LogLevel.Error = ["Error",2];
flambe_util_LogLevel.Error.__enum__ = flambe_util_LogLevel;
flambe_util_LogLevel.__empty_constructs__ = [flambe_util_LogLevel.Info,flambe_util_LogLevel.Warn,flambe_util_LogLevel.Error];
var flambe_util_Pool = function(allocator) {
	this._capacity = 2147483647;
	this._allocator = allocator;
	this._freeObjects = [];
};
$hxClasses["flambe.util.Pool"] = flambe_util_Pool;
flambe_util_Pool.__name__ = ["flambe","util","Pool"];
flambe_util_Pool.prototype = {
	take: function() {
		if(this._freeObjects.length > 0) return this._freeObjects.pop();
		var object = this._allocator();
		flambe_util_Assert.that(object != null);
		return object;
	}
	,put: function(object) {
		flambe_util_Assert.that(object != null);
		if(this._freeObjects.length < this._capacity) this._freeObjects.push(object);
	}
	,setSize: function(size) {
		if(this._freeObjects.length > size) flambe_util_Arrays.resize(this._freeObjects,size); else {
			var needed = size - this._freeObjects.length;
			var _g = 0;
			while(_g < needed) {
				var ii = _g++;
				var object = this._allocator();
				flambe_util_Assert.that(object != null);
				this._freeObjects.push(object);
			}
		}
		return this;
	}
	,__class__: flambe_util_Pool
};
var flambe_util_Promise = function() {
	this.success = new flambe_util_Signal1();
	this.error = new flambe_util_Signal1();
	this.progressChanged = new flambe_util_Signal0();
	this.hasResult = false;
	this._progress = 0;
	this._total = 0;
};
$hxClasses["flambe.util.Promise"] = flambe_util_Promise;
flambe_util_Promise.__name__ = ["flambe","util","Promise"];
flambe_util_Promise.prototype = {
	set_result: function(result) {
		if(this.hasResult) throw new js__$Boot_HaxeError("Promise result already assigned");
		this._result = result;
		this.hasResult = true;
		this.success.emit(result);
		return result;
	}
	,get: function(fn) {
		if(this.hasResult) {
			fn(this._result);
			return null;
		}
		return this.success.connect(fn).once();
	}
	,get_progress: function() {
		return this._progress;
	}
	,set_progress: function(progress) {
		if(this._progress != progress) {
			this._progress = progress;
			this.progressChanged.emit();
		}
		return progress;
	}
	,set_total: function(total) {
		if(this._total != total) {
			this._total = total;
			this.progressChanged.emit();
		}
		return total;
	}
	,get_total: function() {
		return this._total;
	}
	,__class__: flambe_util_Promise
	,__properties__: {set_total:"set_total",get_total:"get_total",set_progress:"set_progress",get_progress:"get_progress",set_result:"set_result"}
};
var flambe_util_Signal0 = function(listener) {
	flambe_util_SignalBase.call(this,listener);
};
$hxClasses["flambe.util.Signal0"] = flambe_util_Signal0;
flambe_util_Signal0.__name__ = ["flambe","util","Signal0"];
flambe_util_Signal0.__super__ = flambe_util_SignalBase;
flambe_util_Signal0.prototype = $extend(flambe_util_SignalBase.prototype,{
	connect: function(listener,prioritize) {
		if(prioritize == null) prioritize = false;
		return this.connectImpl(listener,prioritize);
	}
	,emit: function() {
		var _g = this;
		if(this.dispatching()) this.defer(function() {
			_g.emitImpl();
		}); else this.emitImpl();
	}
	,emitImpl: function() {
		var head = this.willEmit();
		var p = head;
		while(p != null) {
			p._listener();
			if(!p.stayInList) p.dispose();
			p = p._next;
		}
		this.didEmit(head);
	}
	,__class__: flambe_util_Signal0
});
var flambe_util__$SignalBase_Task = function(fn) {
	this.next = null;
	this.fn = fn;
};
$hxClasses["flambe.util._SignalBase.Task"] = flambe_util__$SignalBase_Task;
flambe_util__$SignalBase_Task.__name__ = ["flambe","util","_SignalBase","Task"];
flambe_util__$SignalBase_Task.prototype = {
	__class__: flambe_util__$SignalBase_Task
};
var flambe_util_Strings = function() { };
$hxClasses["flambe.util.Strings"] = flambe_util_Strings;
flambe_util_Strings.__name__ = ["flambe","util","Strings"];
flambe_util_Strings.getFileExtension = function(fileName) {
	var dot = fileName.lastIndexOf(".");
	if(dot > 0) return HxOverrides.substr(fileName,dot + 1,null); else return null;
};
flambe_util_Strings.removeFileExtension = function(fileName) {
	var dot = fileName.lastIndexOf(".");
	if(dot > 0) return HxOverrides.substr(fileName,0,dot); else return fileName;
};
flambe_util_Strings.getUrlExtension = function(url) {
	var question = url.lastIndexOf("?");
	if(question >= 0) url = HxOverrides.substr(url,0,question);
	var slash = url.lastIndexOf("/");
	if(slash >= 0) url = HxOverrides.substr(url,slash + 1,null);
	return flambe_util_Strings.getFileExtension(url);
};
flambe_util_Strings.joinPath = function(base,relative) {
	if(base.length > 0 && StringTools.fastCodeAt(base,base.length - 1) != 47) base += "/";
	return base + relative;
};
flambe_util_Strings.withFields = function(message,fields) {
	var ll = fields.length;
	if(ll > 0) {
		if(message.length > 0) message += " ["; else message += "[";
		var ii = 0;
		while(ii < ll) {
			if(ii > 0) message += ", ";
			var name = fields[ii];
			var value = fields[ii + 1];
			if(Std["is"](value,Error)) {
				var stack = value.stack;
				if(stack != null) value = stack;
			}
			message += name + "=" + Std.string(value);
			ii += 2;
		}
		message += "]";
	}
	return message;
};
var haxe_IMap = function() { };
$hxClasses["haxe.IMap"] = haxe_IMap;
haxe_IMap.__name__ = ["haxe","IMap"];
haxe_IMap.prototype = {
	__class__: haxe_IMap
};
var haxe__$Int64__$_$_$Int64 = function(high,low) {
	this.high = high;
	this.low = low;
};
$hxClasses["haxe._Int64.___Int64"] = haxe__$Int64__$_$_$Int64;
haxe__$Int64__$_$_$Int64.__name__ = ["haxe","_Int64","___Int64"];
haxe__$Int64__$_$_$Int64.prototype = {
	__class__: haxe__$Int64__$_$_$Int64
};
var haxe_Serializer = function() {
	this.buf = new StringBuf();
	this.cache = [];
	this.useCache = haxe_Serializer.USE_CACHE;
	this.useEnumIndex = haxe_Serializer.USE_ENUM_INDEX;
	this.shash = new haxe_ds_StringMap();
	this.scount = 0;
};
$hxClasses["haxe.Serializer"] = haxe_Serializer;
haxe_Serializer.__name__ = ["haxe","Serializer"];
haxe_Serializer.prototype = {
	toString: function() {
		return this.buf.toString();
	}
	,serializeString: function(s) {
		var x = this.shash.get(s);
		if(x != null) {
			this.buf.add("R");
			this.buf.add(x);
			return;
		}
		this.shash.set(s,this.scount++);
		this.buf.add("y");
		s = StringTools.urlEncode(s);
		this.buf.add(s.length);
		this.buf.add(":");
		this.buf.add(s);
	}
	,serializeRef: function(v) {
		var vt = typeof(v);
		var _g1 = 0;
		var _g = this.cache.length;
		while(_g1 < _g) {
			var i = _g1++;
			var ci = this.cache[i];
			if(typeof(ci) == vt && ci == v) {
				this.buf.add("r");
				this.buf.add(i);
				return true;
			}
		}
		this.cache.push(v);
		return false;
	}
	,serializeFields: function(v) {
		var _g = 0;
		var _g1 = Reflect.fields(v);
		while(_g < _g1.length) {
			var f = _g1[_g];
			++_g;
			this.serializeString(f);
			this.serialize(Reflect.field(v,f));
		}
		this.buf.add("g");
	}
	,serialize: function(v) {
		{
			var _g = Type["typeof"](v);
			switch(Type.enumIndex(_g)) {
			case 0:
				this.buf.add("n");
				break;
			case 1:
				var v1 = v;
				if(v1 == 0) {
					this.buf.add("z");
					return;
				}
				this.buf.add("i");
				this.buf.add(v1);
				break;
			case 2:
				var v2 = v;
				if(isNaN(v2)) this.buf.add("k"); else if(!isFinite(v2)) this.buf.add(v2 < 0?"m":"p"); else {
					this.buf.add("d");
					this.buf.add(v2);
				}
				break;
			case 3:
				this.buf.add(v?"t":"f");
				break;
			case 6:
				var c = _g[2];
				if(c == String) {
					this.serializeString(v);
					return;
				}
				if(this.useCache && this.serializeRef(v)) return;
				switch(c) {
				case Array:
					var ucount = 0;
					this.buf.add("a");
					var l = v.length;
					var _g1 = 0;
					while(_g1 < l) {
						var i = _g1++;
						if(v[i] == null) ucount++; else {
							if(ucount > 0) {
								if(ucount == 1) this.buf.add("n"); else {
									this.buf.add("u");
									this.buf.add(ucount);
								}
								ucount = 0;
							}
							this.serialize(v[i]);
						}
					}
					if(ucount > 0) {
						if(ucount == 1) this.buf.add("n"); else {
							this.buf.add("u");
							this.buf.add(ucount);
						}
					}
					this.buf.add("h");
					break;
				case List:
					this.buf.add("l");
					var v3 = v;
					var $it0 = v3.iterator();
					while( $it0.hasNext() ) {
						var i1 = $it0.next();
						this.serialize(i1);
					}
					this.buf.add("h");
					break;
				case Date:
					var d = v;
					this.buf.add("v");
					this.buf.add(d.getTime());
					break;
				case haxe_ds_StringMap:
					this.buf.add("b");
					var v4 = v;
					var $it1 = v4.keys();
					while( $it1.hasNext() ) {
						var k = $it1.next();
						this.serializeString(k);
						this.serialize(v4.get(k));
					}
					this.buf.add("h");
					break;
				case haxe_ds_IntMap:
					this.buf.add("q");
					var v5 = v;
					var $it2 = v5.keys();
					while( $it2.hasNext() ) {
						var k1 = $it2.next();
						this.buf.add(":");
						this.buf.add(k1);
						this.serialize(v5.get(k1));
					}
					this.buf.add("h");
					break;
				case haxe_ds_ObjectMap:
					this.buf.add("M");
					var v6 = v;
					var $it3 = v6.keys();
					while( $it3.hasNext() ) {
						var k2 = $it3.next();
						var id = Reflect.field(k2,"__id__");
						Reflect.deleteField(k2,"__id__");
						this.serialize(k2);
						Reflect.setField(k2,"__id__",id);
						this.serialize(v6.get(k2));
					}
					this.buf.add("h");
					break;
				case haxe_io_Bytes:
					var v7 = v;
					var i2 = 0;
					var max = v7.length - 2;
					var charsBuf = new StringBuf();
					var b64 = haxe_Serializer.BASE64;
					while(i2 < max) {
						var b1 = v7.get(i2++);
						var b2 = v7.get(i2++);
						var b3 = v7.get(i2++);
						charsBuf.add(b64.charAt(b1 >> 2));
						charsBuf.add(b64.charAt((b1 << 4 | b2 >> 4) & 63));
						charsBuf.add(b64.charAt((b2 << 2 | b3 >> 6) & 63));
						charsBuf.add(b64.charAt(b3 & 63));
					}
					if(i2 == max) {
						var b11 = v7.get(i2++);
						var b21 = v7.get(i2++);
						charsBuf.add(b64.charAt(b11 >> 2));
						charsBuf.add(b64.charAt((b11 << 4 | b21 >> 4) & 63));
						charsBuf.add(b64.charAt(b21 << 2 & 63));
					} else if(i2 == max + 1) {
						var b12 = v7.get(i2++);
						charsBuf.add(b64.charAt(b12 >> 2));
						charsBuf.add(b64.charAt(b12 << 4 & 63));
					}
					var chars = charsBuf.toString();
					this.buf.add("s");
					this.buf.add(chars.length);
					this.buf.add(":");
					this.buf.add(chars);
					break;
				default:
					if(this.useCache) this.cache.pop();
					if(v.hxSerialize != null) {
						this.buf.add("C");
						this.serializeString(Type.getClassName(c));
						if(this.useCache) this.cache.push(v);
						v.hxSerialize(this);
						this.buf.add("g");
					} else {
						this.buf.add("c");
						this.serializeString(Type.getClassName(c));
						if(this.useCache) this.cache.push(v);
						this.serializeFields(v);
					}
				}
				break;
			case 4:
				if(Std["is"](v,Class)) {
					var className = Type.getClassName(v);
					this.buf.add("A");
					this.serializeString(className);
				} else if(Std["is"](v,Enum)) {
					this.buf.add("B");
					this.serializeString(Type.getEnumName(v));
				} else {
					if(this.useCache && this.serializeRef(v)) return;
					this.buf.add("o");
					this.serializeFields(v);
				}
				break;
			case 7:
				var e = _g[2];
				if(this.useCache) {
					if(this.serializeRef(v)) return;
					this.cache.pop();
				}
				this.buf.add(this.useEnumIndex?"j":"w");
				this.serializeString(Type.getEnumName(e));
				if(this.useEnumIndex) {
					this.buf.add(":");
					this.buf.add(v[1]);
				} else this.serializeString(v[0]);
				this.buf.add(":");
				var l1 = v.length;
				this.buf.add(l1 - 2);
				var _g11 = 2;
				while(_g11 < l1) {
					var i3 = _g11++;
					this.serialize(v[i3]);
				}
				if(this.useCache) this.cache.push(v);
				break;
			case 5:
				throw new js__$Boot_HaxeError("Cannot serialize function");
				break;
			default:
				throw new js__$Boot_HaxeError("Cannot serialize " + Std.string(v));
			}
		}
	}
	,__class__: haxe_Serializer
};
var haxe_Unserializer = function(buf) {
	this.buf = buf;
	this.length = buf.length;
	this.pos = 0;
	this.scache = [];
	this.cache = [];
	var r = haxe_Unserializer.DEFAULT_RESOLVER;
	if(r == null) {
		r = Type;
		haxe_Unserializer.DEFAULT_RESOLVER = r;
	}
	this.setResolver(r);
};
$hxClasses["haxe.Unserializer"] = haxe_Unserializer;
haxe_Unserializer.__name__ = ["haxe","Unserializer"];
haxe_Unserializer.initCodes = function() {
	var codes = [];
	var _g1 = 0;
	var _g = haxe_Unserializer.BASE64.length;
	while(_g1 < _g) {
		var i = _g1++;
		codes[StringTools.fastCodeAt(haxe_Unserializer.BASE64,i)] = i;
	}
	return codes;
};
haxe_Unserializer.run = function(v) {
	return new haxe_Unserializer(v).unserialize();
};
haxe_Unserializer.prototype = {
	setResolver: function(r) {
		if(r == null) this.resolver = { resolveClass : function(_) {
			return null;
		}, resolveEnum : function(_1) {
			return null;
		}}; else this.resolver = r;
	}
	,get: function(p) {
		return StringTools.fastCodeAt(this.buf,p);
	}
	,readDigits: function() {
		var k = 0;
		var s = false;
		var fpos = this.pos;
		while(true) {
			var c = this.get(this.pos);
			if(StringTools.isEof(c)) break;
			if(c == 45) {
				if(this.pos != fpos) break;
				s = true;
				this.pos++;
				continue;
			}
			if(c < 48 || c > 57) break;
			k = k * 10 + (c - 48);
			this.pos++;
		}
		if(s) k *= -1;
		return k;
	}
	,readFloat: function() {
		var p1 = this.pos;
		while(true) {
			var c = this.get(this.pos);
			if(c >= 43 && c < 58 || c == 101 || c == 69) this.pos++; else break;
		}
		return Std.parseFloat(HxOverrides.substr(this.buf,p1,this.pos - p1));
	}
	,unserializeObject: function(o) {
		while(true) {
			if(this.pos >= this.length) throw new js__$Boot_HaxeError("Invalid object");
			if(this.get(this.pos) == 103) break;
			var k = this.unserialize();
			if(!Std["is"](k,String)) throw new js__$Boot_HaxeError("Invalid object key");
			var v = this.unserialize();
			Reflect.setField(o,k,v);
		}
		this.pos++;
	}
	,unserializeEnum: function(edecl,tag) {
		if(this.get(this.pos++) != 58) throw new js__$Boot_HaxeError("Invalid enum format");
		var nargs = this.readDigits();
		if(nargs == 0) return Type.createEnum(edecl,tag);
		var args = [];
		while(nargs-- > 0) args.push(this.unserialize());
		return Type.createEnum(edecl,tag,args);
	}
	,unserialize: function() {
		var _g = this.get(this.pos++);
		switch(_g) {
		case 110:
			return null;
		case 116:
			return true;
		case 102:
			return false;
		case 122:
			return 0;
		case 105:
			return this.readDigits();
		case 100:
			return this.readFloat();
		case 121:
			var len = this.readDigits();
			if(this.get(this.pos++) != 58 || this.length - this.pos < len) throw new js__$Boot_HaxeError("Invalid string length");
			var s = HxOverrides.substr(this.buf,this.pos,len);
			this.pos += len;
			s = StringTools.urlDecode(s);
			this.scache.push(s);
			return s;
		case 107:
			return NaN;
		case 109:
			return -Infinity;
		case 112:
			return Infinity;
		case 97:
			var buf = this.buf;
			var a = [];
			this.cache.push(a);
			while(true) {
				var c = this.get(this.pos);
				if(c == 104) {
					this.pos++;
					break;
				}
				if(c == 117) {
					this.pos++;
					var n = this.readDigits();
					a[a.length + n - 1] = null;
				} else a.push(this.unserialize());
			}
			return a;
		case 111:
			var o = { };
			this.cache.push(o);
			this.unserializeObject(o);
			return o;
		case 114:
			var n1 = this.readDigits();
			if(n1 < 0 || n1 >= this.cache.length) throw new js__$Boot_HaxeError("Invalid reference");
			return this.cache[n1];
		case 82:
			var n2 = this.readDigits();
			if(n2 < 0 || n2 >= this.scache.length) throw new js__$Boot_HaxeError("Invalid string reference");
			return this.scache[n2];
		case 120:
			throw new js__$Boot_HaxeError(this.unserialize());
			break;
		case 99:
			var name = this.unserialize();
			var cl = this.resolver.resolveClass(name);
			if(cl == null) throw new js__$Boot_HaxeError("Class not found " + name);
			var o1 = Type.createEmptyInstance(cl);
			this.cache.push(o1);
			this.unserializeObject(o1);
			return o1;
		case 119:
			var name1 = this.unserialize();
			var edecl = this.resolver.resolveEnum(name1);
			if(edecl == null) throw new js__$Boot_HaxeError("Enum not found " + name1);
			var e = this.unserializeEnum(edecl,this.unserialize());
			this.cache.push(e);
			return e;
		case 106:
			var name2 = this.unserialize();
			var edecl1 = this.resolver.resolveEnum(name2);
			if(edecl1 == null) throw new js__$Boot_HaxeError("Enum not found " + name2);
			this.pos++;
			var index = this.readDigits();
			var tag = Type.getEnumConstructs(edecl1)[index];
			if(tag == null) throw new js__$Boot_HaxeError("Unknown enum index " + name2 + "@" + index);
			var e1 = this.unserializeEnum(edecl1,tag);
			this.cache.push(e1);
			return e1;
		case 108:
			var l = new List();
			this.cache.push(l);
			var buf1 = this.buf;
			while(this.get(this.pos) != 104) l.add(this.unserialize());
			this.pos++;
			return l;
		case 98:
			var h = new haxe_ds_StringMap();
			this.cache.push(h);
			var buf2 = this.buf;
			while(this.get(this.pos) != 104) {
				var s1 = this.unserialize();
				h.set(s1,this.unserialize());
			}
			this.pos++;
			return h;
		case 113:
			var h1 = new haxe_ds_IntMap();
			this.cache.push(h1);
			var buf3 = this.buf;
			var c1 = this.get(this.pos++);
			while(c1 == 58) {
				var i = this.readDigits();
				h1.set(i,this.unserialize());
				c1 = this.get(this.pos++);
			}
			if(c1 != 104) throw new js__$Boot_HaxeError("Invalid IntMap format");
			return h1;
		case 77:
			var h2 = new haxe_ds_ObjectMap();
			this.cache.push(h2);
			var buf4 = this.buf;
			while(this.get(this.pos) != 104) {
				var s2 = this.unserialize();
				h2.set(s2,this.unserialize());
			}
			this.pos++;
			return h2;
		case 118:
			var d;
			if(this.get(this.pos) >= 48 && this.get(this.pos) <= 57 && this.get(this.pos + 1) >= 48 && this.get(this.pos + 1) <= 57 && this.get(this.pos + 2) >= 48 && this.get(this.pos + 2) <= 57 && this.get(this.pos + 3) >= 48 && this.get(this.pos + 3) <= 57 && this.get(this.pos + 4) == 45) {
				var s3 = HxOverrides.substr(this.buf,this.pos,19);
				d = HxOverrides.strDate(s3);
				this.pos += 19;
			} else {
				var t = this.readFloat();
				var d1 = new Date();
				d1.setTime(t);
				d = d1;
			}
			this.cache.push(d);
			return d;
		case 115:
			var len1 = this.readDigits();
			var buf5 = this.buf;
			if(this.get(this.pos++) != 58 || this.length - this.pos < len1) throw new js__$Boot_HaxeError("Invalid bytes length");
			var codes = haxe_Unserializer.CODES;
			if(codes == null) {
				codes = haxe_Unserializer.initCodes();
				haxe_Unserializer.CODES = codes;
			}
			var i1 = this.pos;
			var rest = len1 & 3;
			var size;
			size = (len1 >> 2) * 3 + (rest >= 2?rest - 1:0);
			var max = i1 + (len1 - rest);
			var bytes = haxe_io_Bytes.alloc(size);
			var bpos = 0;
			while(i1 < max) {
				var c11 = codes[StringTools.fastCodeAt(buf5,i1++)];
				var c2 = codes[StringTools.fastCodeAt(buf5,i1++)];
				bytes.set(bpos++,c11 << 2 | c2 >> 4);
				var c3 = codes[StringTools.fastCodeAt(buf5,i1++)];
				bytes.set(bpos++,c2 << 4 | c3 >> 2);
				var c4 = codes[StringTools.fastCodeAt(buf5,i1++)];
				bytes.set(bpos++,c3 << 6 | c4);
			}
			if(rest >= 2) {
				var c12 = codes[StringTools.fastCodeAt(buf5,i1++)];
				var c21 = codes[StringTools.fastCodeAt(buf5,i1++)];
				bytes.set(bpos++,c12 << 2 | c21 >> 4);
				if(rest == 3) {
					var c31 = codes[StringTools.fastCodeAt(buf5,i1++)];
					bytes.set(bpos++,c21 << 4 | c31 >> 2);
				}
			}
			this.pos += len1;
			this.cache.push(bytes);
			return bytes;
		case 67:
			var name3 = this.unserialize();
			var cl1 = this.resolver.resolveClass(name3);
			if(cl1 == null) throw new js__$Boot_HaxeError("Class not found " + name3);
			var o2 = Type.createEmptyInstance(cl1);
			this.cache.push(o2);
			o2.hxUnserialize(this);
			if(this.get(this.pos++) != 103) throw new js__$Boot_HaxeError("Invalid custom data");
			return o2;
		case 65:
			var name4 = this.unserialize();
			var cl2 = this.resolver.resolveClass(name4);
			if(cl2 == null) throw new js__$Boot_HaxeError("Class not found " + name4);
			return cl2;
		case 66:
			var name5 = this.unserialize();
			var e2 = this.resolver.resolveEnum(name5);
			if(e2 == null) throw new js__$Boot_HaxeError("Enum not found " + name5);
			return e2;
		default:
		}
		this.pos--;
		throw new js__$Boot_HaxeError("Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos);
	}
	,__class__: haxe_Unserializer
};
var haxe_crypto_Crc32 = function() { };
$hxClasses["haxe.crypto.Crc32"] = haxe_crypto_Crc32;
haxe_crypto_Crc32.__name__ = ["haxe","crypto","Crc32"];
haxe_crypto_Crc32.make = function(data) {
	var init = -1;
	var crc = init;
	var b = data.getData();
	var _g1 = 0;
	var _g = data.length;
	while(_g1 < _g) {
		var i = _g1++;
		var tmp = (crc ^ haxe_io_Bytes.fastGet(b,i)) & 255;
		var _g2 = 0;
		while(_g2 < 8) {
			var j = _g2++;
			if((tmp & 1) == 1) tmp = tmp >>> 1 ^ -306674912; else tmp >>>= 1;
		}
		crc = crc >>> 8 ^ tmp;
	}
	return crc ^ init;
};
var haxe_ds_BalancedTree = function() {
};
$hxClasses["haxe.ds.BalancedTree"] = haxe_ds_BalancedTree;
haxe_ds_BalancedTree.__name__ = ["haxe","ds","BalancedTree"];
haxe_ds_BalancedTree.prototype = {
	set: function(key,value) {
		this.root = this.setLoop(key,value,this.root);
	}
	,get: function(key) {
		var node = this.root;
		while(node != null) {
			var c = this.compare(key,node.key);
			if(c == 0) return node.value;
			if(c < 0) node = node.left; else node = node.right;
		}
		return null;
	}
	,remove: function(key) {
		try {
			this.root = this.removeLoop(key,this.root);
			return true;
		} catch( e ) {
			if (e instanceof js__$Boot_HaxeError) e = e.val;
			if( js_Boot.__instanceof(e,String) ) {
				return false;
			} else throw(e);
		}
	}
	,exists: function(key) {
		var node = this.root;
		while(node != null) {
			var c = this.compare(key,node.key);
			if(c == 0) return true; else if(c < 0) node = node.left; else node = node.right;
		}
		return false;
	}
	,iterator: function() {
		var ret = [];
		this.iteratorLoop(this.root,ret);
		return HxOverrides.iter(ret);
	}
	,keys: function() {
		var ret = [];
		this.keysLoop(this.root,ret);
		return HxOverrides.iter(ret);
	}
	,setLoop: function(k,v,node) {
		if(node == null) return new haxe_ds_TreeNode(null,k,v,null);
		var c = this.compare(k,node.key);
		if(c == 0) return new haxe_ds_TreeNode(node.left,k,v,node.right,node == null?0:node._height); else if(c < 0) {
			var nl = this.setLoop(k,v,node.left);
			return this.balance(nl,node.key,node.value,node.right);
		} else {
			var nr = this.setLoop(k,v,node.right);
			return this.balance(node.left,node.key,node.value,nr);
		}
	}
	,removeLoop: function(k,node) {
		if(node == null) throw new js__$Boot_HaxeError("Not_found");
		var c = this.compare(k,node.key);
		if(c == 0) return this.merge(node.left,node.right); else if(c < 0) return this.balance(this.removeLoop(k,node.left),node.key,node.value,node.right); else return this.balance(node.left,node.key,node.value,this.removeLoop(k,node.right));
	}
	,iteratorLoop: function(node,acc) {
		if(node != null) {
			this.iteratorLoop(node.left,acc);
			acc.push(node.value);
			this.iteratorLoop(node.right,acc);
		}
	}
	,keysLoop: function(node,acc) {
		if(node != null) {
			this.keysLoop(node.left,acc);
			acc.push(node.key);
			this.keysLoop(node.right,acc);
		}
	}
	,merge: function(t1,t2) {
		if(t1 == null) return t2;
		if(t2 == null) return t1;
		var t = this.minBinding(t2);
		return this.balance(t1,t.key,t.value,this.removeMinBinding(t2));
	}
	,minBinding: function(t) {
		if(t == null) throw new js__$Boot_HaxeError("Not_found"); else if(t.left == null) return t; else return this.minBinding(t.left);
	}
	,removeMinBinding: function(t) {
		if(t.left == null) return t.right; else return this.balance(this.removeMinBinding(t.left),t.key,t.value,t.right);
	}
	,balance: function(l,k,v,r) {
		var hl;
		if(l == null) hl = 0; else hl = l._height;
		var hr;
		if(r == null) hr = 0; else hr = r._height;
		if(hl > hr + 2) {
			if((function($this) {
				var $r;
				var _this = l.left;
				$r = _this == null?0:_this._height;
				return $r;
			}(this)) >= (function($this) {
				var $r;
				var _this1 = l.right;
				$r = _this1 == null?0:_this1._height;
				return $r;
			}(this))) return new haxe_ds_TreeNode(l.left,l.key,l.value,new haxe_ds_TreeNode(l.right,k,v,r)); else return new haxe_ds_TreeNode(new haxe_ds_TreeNode(l.left,l.key,l.value,l.right.left),l.right.key,l.right.value,new haxe_ds_TreeNode(l.right.right,k,v,r));
		} else if(hr > hl + 2) {
			if((function($this) {
				var $r;
				var _this2 = r.right;
				$r = _this2 == null?0:_this2._height;
				return $r;
			}(this)) > (function($this) {
				var $r;
				var _this3 = r.left;
				$r = _this3 == null?0:_this3._height;
				return $r;
			}(this))) return new haxe_ds_TreeNode(new haxe_ds_TreeNode(l,k,v,r.left),r.key,r.value,r.right); else return new haxe_ds_TreeNode(new haxe_ds_TreeNode(l,k,v,r.left.left),r.left.key,r.left.value,new haxe_ds_TreeNode(r.left.right,r.key,r.value,r.right));
		} else return new haxe_ds_TreeNode(l,k,v,r,(hl > hr?hl:hr) + 1);
	}
	,compare: function(k1,k2) {
		return Reflect.compare(k1,k2);
	}
	,__class__: haxe_ds_BalancedTree
};
var haxe_ds_TreeNode = function(l,k,v,r,h) {
	if(h == null) h = -1;
	this.left = l;
	this.key = k;
	this.value = v;
	this.right = r;
	if(h == -1) this._height = ((function($this) {
		var $r;
		var _this = $this.left;
		$r = _this == null?0:_this._height;
		return $r;
	}(this)) > (function($this) {
		var $r;
		var _this1 = $this.right;
		$r = _this1 == null?0:_this1._height;
		return $r;
	}(this))?(function($this) {
		var $r;
		var _this2 = $this.left;
		$r = _this2 == null?0:_this2._height;
		return $r;
	}(this)):(function($this) {
		var $r;
		var _this3 = $this.right;
		$r = _this3 == null?0:_this3._height;
		return $r;
	}(this))) + 1; else this._height = h;
};
$hxClasses["haxe.ds.TreeNode"] = haxe_ds_TreeNode;
haxe_ds_TreeNode.__name__ = ["haxe","ds","TreeNode"];
haxe_ds_TreeNode.prototype = {
	__class__: haxe_ds_TreeNode
};
var haxe_ds_EnumValueMap = function() {
	haxe_ds_BalancedTree.call(this);
};
$hxClasses["haxe.ds.EnumValueMap"] = haxe_ds_EnumValueMap;
haxe_ds_EnumValueMap.__name__ = ["haxe","ds","EnumValueMap"];
haxe_ds_EnumValueMap.__interfaces__ = [haxe_IMap];
haxe_ds_EnumValueMap.__super__ = haxe_ds_BalancedTree;
haxe_ds_EnumValueMap.prototype = $extend(haxe_ds_BalancedTree.prototype,{
	compare: function(k1,k2) {
		var d = Type.enumIndex(k1) - Type.enumIndex(k2);
		if(d != 0) return d;
		var p1 = Type.enumParameters(k1);
		var p2 = Type.enumParameters(k2);
		if(p1.length == 0 && p2.length == 0) return 0;
		return this.compareArgs(p1,p2);
	}
	,compareArgs: function(a1,a2) {
		var ld = a1.length - a2.length;
		if(ld != 0) return ld;
		var _g1 = 0;
		var _g = a1.length;
		while(_g1 < _g) {
			var i = _g1++;
			var d = this.compareArg(a1[i],a2[i]);
			if(d != 0) return d;
		}
		return 0;
	}
	,compareArg: function(v1,v2) {
		if(Reflect.isEnumValue(v1) && Reflect.isEnumValue(v2)) return this.compare(v1,v2); else if(Std["is"](v1,Array) && Std["is"](v2,Array)) return this.compareArgs(v1,v2); else return Reflect.compare(v1,v2);
	}
	,__class__: haxe_ds_EnumValueMap
});
var haxe_ds_IntMap = function() {
	this.h = { };
};
$hxClasses["haxe.ds.IntMap"] = haxe_ds_IntMap;
haxe_ds_IntMap.__name__ = ["haxe","ds","IntMap"];
haxe_ds_IntMap.__interfaces__ = [haxe_IMap];
haxe_ds_IntMap.prototype = {
	set: function(key,value) {
		this.h[key] = value;
	}
	,get: function(key) {
		return this.h[key];
	}
	,exists: function(key) {
		return this.h.hasOwnProperty(key);
	}
	,remove: function(key) {
		if(!this.h.hasOwnProperty(key)) return false;
		delete(this.h[key]);
		return true;
	}
	,keys: function() {
		var a = [];
		for( var key in this.h ) {
		if(this.h.hasOwnProperty(key)) a.push(key | 0);
		}
		return HxOverrides.iter(a);
	}
	,iterator: function() {
		return { ref : this.h, it : this.keys(), hasNext : function() {
			return this.it.hasNext();
		}, next : function() {
			var i = this.it.next();
			return this.ref[i];
		}};
	}
	,__class__: haxe_ds_IntMap
};
var haxe_ds_ObjectMap = function() {
	this.h = { };
	this.h.__keys__ = { };
};
$hxClasses["haxe.ds.ObjectMap"] = haxe_ds_ObjectMap;
haxe_ds_ObjectMap.__name__ = ["haxe","ds","ObjectMap"];
haxe_ds_ObjectMap.__interfaces__ = [haxe_IMap];
haxe_ds_ObjectMap.assignId = function(obj) {
	return obj.__id__ = ++haxe_ds_ObjectMap.count;
};
haxe_ds_ObjectMap.getId = function(obj) {
	return obj.__id__;
};
haxe_ds_ObjectMap.prototype = {
	set: function(key,value) {
		var id = key.__id__ || haxe_ds_ObjectMap.assignId(key);
		this.h[id] = value;
		this.h.__keys__[id] = key;
	}
	,get: function(key) {
		return this.h[haxe_ds_ObjectMap.getId(key)];
	}
	,exists: function(key) {
		return this.h.__keys__[haxe_ds_ObjectMap.getId(key)] != null;
	}
	,remove: function(key) {
		var id = haxe_ds_ObjectMap.getId(key);
		if(this.h.__keys__[id] == null) return false;
		delete(this.h[id]);
		delete(this.h.__keys__[id]);
		return true;
	}
	,keys: function() {
		var a = [];
		for( var key in this.h.__keys__ ) {
		if(this.h.hasOwnProperty(key)) a.push(this.h.__keys__[key]);
		}
		return HxOverrides.iter(a);
	}
	,iterator: function() {
		return { ref : this.h, it : this.keys(), hasNext : function() {
			return this.it.hasNext();
		}, next : function() {
			var i = this.it.next();
			return this.ref[haxe_ds_ObjectMap.getId(i)];
		}};
	}
	,__class__: haxe_ds_ObjectMap
};
var haxe_ds__$StringMap_StringMapIterator = function(map,keys) {
	this.map = map;
	this.keys = keys;
	this.index = 0;
	this.count = keys.length;
};
$hxClasses["haxe.ds._StringMap.StringMapIterator"] = haxe_ds__$StringMap_StringMapIterator;
haxe_ds__$StringMap_StringMapIterator.__name__ = ["haxe","ds","_StringMap","StringMapIterator"];
haxe_ds__$StringMap_StringMapIterator.prototype = {
	hasNext: function() {
		return this.index < this.count;
	}
	,next: function() {
		return this.map.get(this.keys[this.index++]);
	}
	,__class__: haxe_ds__$StringMap_StringMapIterator
};
var haxe_ds_StringMap = function() {
	this.h = { };
};
$hxClasses["haxe.ds.StringMap"] = haxe_ds_StringMap;
haxe_ds_StringMap.__name__ = ["haxe","ds","StringMap"];
haxe_ds_StringMap.__interfaces__ = [haxe_IMap];
haxe_ds_StringMap.prototype = {
	isReserved: function(key) {
		return __map_reserved[key] != null;
	}
	,set: function(key,value) {
		if(this.isReserved(key)) this.setReserved(key,value); else this.h[key] = value;
	}
	,get: function(key) {
		if(this.isReserved(key)) return this.getReserved(key);
		return this.h[key];
	}
	,exists: function(key) {
		if(this.isReserved(key)) return this.existsReserved(key);
		return this.h.hasOwnProperty(key);
	}
	,setReserved: function(key,value) {
		if(this.rh == null) this.rh = { };
		this.rh["$" + key] = value;
	}
	,getReserved: function(key) {
		if(this.rh == null) return null; else return this.rh["$" + key];
	}
	,existsReserved: function(key) {
		if(this.rh == null) return false;
		return this.rh.hasOwnProperty("$" + key);
	}
	,remove: function(key) {
		if(this.isReserved(key)) {
			key = "$" + key;
			if(this.rh == null || !this.rh.hasOwnProperty(key)) return false;
			delete(this.rh[key]);
			return true;
		} else {
			if(!this.h.hasOwnProperty(key)) return false;
			delete(this.h[key]);
			return true;
		}
	}
	,keys: function() {
		var _this = this.arrayKeys();
		return HxOverrides.iter(_this);
	}
	,arrayKeys: function() {
		var out = [];
		for( var key in this.h ) {
		if(this.h.hasOwnProperty(key)) out.push(key);
		}
		if(this.rh != null) {
			for( var key in this.rh ) {
			if(key.charCodeAt(0) == 36) out.push(key.substr(1));
			}
		}
		return out;
	}
	,iterator: function() {
		return new haxe_ds__$StringMap_StringMapIterator(this,this.arrayKeys());
	}
	,__class__: haxe_ds_StringMap
};
var haxe_io_Bytes = function(data) {
	this.length = data.byteLength;
	this.b = new Uint8Array(data);
	this.b.bufferValue = data;
	data.hxBytes = this;
	data.bytes = this.b;
};
$hxClasses["haxe.io.Bytes"] = haxe_io_Bytes;
haxe_io_Bytes.__name__ = ["haxe","io","Bytes"];
haxe_io_Bytes.alloc = function(length) {
	return new haxe_io_Bytes(new ArrayBuffer(length));
};
haxe_io_Bytes.ofString = function(s) {
	var a = [];
	var i = 0;
	while(i < s.length) {
		var c = StringTools.fastCodeAt(s,i++);
		if(55296 <= c && c <= 56319) c = c - 55232 << 10 | StringTools.fastCodeAt(s,i++) & 1023;
		if(c <= 127) a.push(c); else if(c <= 2047) {
			a.push(192 | c >> 6);
			a.push(128 | c & 63);
		} else if(c <= 65535) {
			a.push(224 | c >> 12);
			a.push(128 | c >> 6 & 63);
			a.push(128 | c & 63);
		} else {
			a.push(240 | c >> 18);
			a.push(128 | c >> 12 & 63);
			a.push(128 | c >> 6 & 63);
			a.push(128 | c & 63);
		}
	}
	return new haxe_io_Bytes(new Uint8Array(a).buffer);
};
haxe_io_Bytes.fastGet = function(b,pos) {
	return b.bytes[pos];
};
haxe_io_Bytes.prototype = {
	get: function(pos) {
		return this.b[pos];
	}
	,set: function(pos,v) {
		this.b[pos] = v & 255;
	}
	,getData: function() {
		return this.b.bufferValue;
	}
	,__class__: haxe_io_Bytes
};
var haxe_io_Error = $hxClasses["haxe.io.Error"] = { __ename__ : ["haxe","io","Error"], __constructs__ : ["Blocked","Overflow","OutsideBounds","Custom"] };
haxe_io_Error.Blocked = ["Blocked",0];
haxe_io_Error.Blocked.__enum__ = haxe_io_Error;
haxe_io_Error.Overflow = ["Overflow",1];
haxe_io_Error.Overflow.__enum__ = haxe_io_Error;
haxe_io_Error.OutsideBounds = ["OutsideBounds",2];
haxe_io_Error.OutsideBounds.__enum__ = haxe_io_Error;
haxe_io_Error.Custom = function(e) { var $x = ["Custom",3,e]; $x.__enum__ = haxe_io_Error; return $x; };
haxe_io_Error.__empty_constructs__ = [haxe_io_Error.Blocked,haxe_io_Error.Overflow,haxe_io_Error.OutsideBounds];
var haxe_io_FPHelper = function() { };
$hxClasses["haxe.io.FPHelper"] = haxe_io_FPHelper;
haxe_io_FPHelper.__name__ = ["haxe","io","FPHelper"];
haxe_io_FPHelper.i32ToFloat = function(i) {
	var sign = 1 - (i >>> 31 << 1);
	var exp = i >>> 23 & 255;
	var sig = i & 8388607;
	if(sig == 0 && exp == 0) return 0.0;
	return sign * (1 + Math.pow(2,-23) * sig) * Math.pow(2,exp - 127);
};
haxe_io_FPHelper.floatToI32 = function(f) {
	if(f == 0) return 0;
	var af;
	if(f < 0) af = -f; else af = f;
	var exp = Math.floor(Math.log(af) / 0.6931471805599453);
	if(exp < -127) exp = -127; else if(exp > 128) exp = 128;
	var sig = Math.round((af / Math.pow(2,exp) - 1) * 8388608) & 8388607;
	return (f < 0?-2147483648:0) | exp + 127 << 23 | sig;
};
haxe_io_FPHelper.i64ToDouble = function(low,high) {
	var sign = 1 - (high >>> 31 << 1);
	var exp = (high >> 20 & 2047) - 1023;
	var sig = (high & 1048575) * 4294967296. + (low >>> 31) * 2147483648. + (low & 2147483647);
	if(sig == 0 && exp == -1023) return 0.0;
	return sign * (1.0 + Math.pow(2,-52) * sig) * Math.pow(2,exp);
};
haxe_io_FPHelper.doubleToI64 = function(v) {
	var i64 = haxe_io_FPHelper.i64tmp;
	if(v == 0) {
		i64.low = 0;
		i64.high = 0;
	} else {
		var av;
		if(v < 0) av = -v; else av = v;
		var exp = Math.floor(Math.log(av) / 0.6931471805599453);
		var sig;
		var v1 = (av / Math.pow(2,exp) - 1) * 4503599627370496.;
		sig = Math.round(v1);
		var sig_l = Std["int"](sig);
		var sig_h = Std["int"](sig / 4294967296.0);
		i64.low = sig_l;
		i64.high = (v < 0?-2147483648:0) | exp + 1023 << 20 | sig_h;
	}
	return i64;
};
var haxe_xml_Filter = $hxClasses["haxe.xml.Filter"] = { __ename__ : ["haxe","xml","Filter"], __constructs__ : ["FInt","FBool","FEnum","FReg"] };
haxe_xml_Filter.FInt = ["FInt",0];
haxe_xml_Filter.FInt.__enum__ = haxe_xml_Filter;
haxe_xml_Filter.FBool = ["FBool",1];
haxe_xml_Filter.FBool.__enum__ = haxe_xml_Filter;
haxe_xml_Filter.FEnum = function(values) { var $x = ["FEnum",2,values]; $x.__enum__ = haxe_xml_Filter; return $x; };
haxe_xml_Filter.FReg = function(matcher) { var $x = ["FReg",3,matcher]; $x.__enum__ = haxe_xml_Filter; return $x; };
haxe_xml_Filter.__empty_constructs__ = [haxe_xml_Filter.FInt,haxe_xml_Filter.FBool];
var haxe_xml_Attrib = $hxClasses["haxe.xml.Attrib"] = { __ename__ : ["haxe","xml","Attrib"], __constructs__ : ["Att"] };
haxe_xml_Attrib.Att = function(name,filter,defvalue) { var $x = ["Att",0,name,filter,defvalue]; $x.__enum__ = haxe_xml_Attrib; return $x; };
haxe_xml_Attrib.__empty_constructs__ = [];
var haxe_xml_Rule = $hxClasses["haxe.xml.Rule"] = { __ename__ : ["haxe","xml","Rule"], __constructs__ : ["RNode","RData","RMulti","RList","RChoice","ROptional"] };
haxe_xml_Rule.RNode = function(name,attribs,childs) { var $x = ["RNode",0,name,attribs,childs]; $x.__enum__ = haxe_xml_Rule; return $x; };
haxe_xml_Rule.RData = function(filter) { var $x = ["RData",1,filter]; $x.__enum__ = haxe_xml_Rule; return $x; };
haxe_xml_Rule.RMulti = function(rule,atLeastOne) { var $x = ["RMulti",2,rule,atLeastOne]; $x.__enum__ = haxe_xml_Rule; return $x; };
haxe_xml_Rule.RList = function(rules,ordered) { var $x = ["RList",3,rules,ordered]; $x.__enum__ = haxe_xml_Rule; return $x; };
haxe_xml_Rule.RChoice = function(choices) { var $x = ["RChoice",4,choices]; $x.__enum__ = haxe_xml_Rule; return $x; };
haxe_xml_Rule.ROptional = function(rule) { var $x = ["ROptional",5,rule]; $x.__enum__ = haxe_xml_Rule; return $x; };
haxe_xml_Rule.__empty_constructs__ = [];
var haxe_xml__$Check_CheckResult = $hxClasses["haxe.xml._Check.CheckResult"] = { __ename__ : ["haxe","xml","_Check","CheckResult"], __constructs__ : ["CMatch","CMissing","CExtra","CElementExpected","CDataExpected","CExtraAttrib","CMissingAttrib","CInvalidAttrib","CInvalidData","CInElement"] };
haxe_xml__$Check_CheckResult.CMatch = ["CMatch",0];
haxe_xml__$Check_CheckResult.CMatch.__enum__ = haxe_xml__$Check_CheckResult;
haxe_xml__$Check_CheckResult.CMissing = function(r) { var $x = ["CMissing",1,r]; $x.__enum__ = haxe_xml__$Check_CheckResult; return $x; };
haxe_xml__$Check_CheckResult.CExtra = function(x) { var $x = ["CExtra",2,x]; $x.__enum__ = haxe_xml__$Check_CheckResult; return $x; };
haxe_xml__$Check_CheckResult.CElementExpected = function(name,x) { var $x = ["CElementExpected",3,name,x]; $x.__enum__ = haxe_xml__$Check_CheckResult; return $x; };
haxe_xml__$Check_CheckResult.CDataExpected = function(x) { var $x = ["CDataExpected",4,x]; $x.__enum__ = haxe_xml__$Check_CheckResult; return $x; };
haxe_xml__$Check_CheckResult.CExtraAttrib = function(att,x) { var $x = ["CExtraAttrib",5,att,x]; $x.__enum__ = haxe_xml__$Check_CheckResult; return $x; };
haxe_xml__$Check_CheckResult.CMissingAttrib = function(att,x) { var $x = ["CMissingAttrib",6,att,x]; $x.__enum__ = haxe_xml__$Check_CheckResult; return $x; };
haxe_xml__$Check_CheckResult.CInvalidAttrib = function(att,x,f) { var $x = ["CInvalidAttrib",7,att,x,f]; $x.__enum__ = haxe_xml__$Check_CheckResult; return $x; };
haxe_xml__$Check_CheckResult.CInvalidData = function(x,f) { var $x = ["CInvalidData",8,x,f]; $x.__enum__ = haxe_xml__$Check_CheckResult; return $x; };
haxe_xml__$Check_CheckResult.CInElement = function(x,r) { var $x = ["CInElement",9,x,r]; $x.__enum__ = haxe_xml__$Check_CheckResult; return $x; };
haxe_xml__$Check_CheckResult.__empty_constructs__ = [haxe_xml__$Check_CheckResult.CMatch];
var haxe_xml_Check = function() { };
$hxClasses["haxe.xml.Check"] = haxe_xml_Check;
haxe_xml_Check.__name__ = ["haxe","xml","Check"];
haxe_xml_Check.isBlank = function(x) {
	return x.nodeType == Xml.PCData && haxe_xml_Check.blanks.match(x.get_nodeValue()) || x.nodeType == Xml.Comment;
};
haxe_xml_Check.filterMatch = function(s,f) {
	switch(Type.enumIndex(f)) {
	case 0:
		return haxe_xml_Check.filterMatch(s,haxe_xml_Filter.FReg(new EReg("[0-9]+","")));
	case 1:
		return haxe_xml_Check.filterMatch(s,haxe_xml_Filter.FEnum(["true","false","0","1"]));
	case 2:
		var values = f[2];
		var _g = 0;
		while(_g < values.length) {
			var v = values[_g];
			++_g;
			if(s == v) return true;
		}
		return false;
	case 3:
		var r = f[2];
		return r.match(s);
	}
};
haxe_xml_Check.isNullable = function(r) {
	switch(Type.enumIndex(r)) {
	case 2:
		var one = r[3];
		var r1 = r[2];
		return one != true || haxe_xml_Check.isNullable(r1);
	case 3:
		var rl = r[2];
		var _g = 0;
		while(_g < rl.length) {
			var r2 = rl[_g];
			++_g;
			if(!haxe_xml_Check.isNullable(r2)) return false;
		}
		return true;
	case 4:
		var rl1 = r[2];
		var _g1 = 0;
		while(_g1 < rl1.length) {
			var r3 = rl1[_g1];
			++_g1;
			if(haxe_xml_Check.isNullable(r3)) return true;
		}
		return false;
	case 1:
		return false;
	case 0:
		return false;
	case 5:
		return true;
	}
};
haxe_xml_Check.check = function(x,r) {
	switch(Type.enumIndex(r)) {
	case 0:
		var childs = r[4];
		var attribs = r[3];
		var name = r[2];
		if(x.nodeType != Xml.Element || x.get_nodeName() != name) return haxe_xml__$Check_CheckResult.CElementExpected(name,x);
		var attribs1;
		if(attribs == null) attribs1 = []; else attribs1 = attribs.slice();
		var $it0 = x.attributes();
		while( $it0.hasNext() ) {
			var xatt = $it0.next();
			var found = false;
			var _g = 0;
			while(_g < attribs1.length) {
				var att = attribs1[_g];
				++_g;
				{
					var filter = att[3];
					var name1 = att[2];
					if(xatt != name1) continue;
					if(filter != null && !haxe_xml_Check.filterMatch(x.get(xatt),filter)) return haxe_xml__$Check_CheckResult.CInvalidAttrib(name1,x,filter);
					HxOverrides.remove(attribs1,att);
					found = true;
				}
			}
			if(!found) return haxe_xml__$Check_CheckResult.CExtraAttrib(xatt,x);
		}
		var _g1 = 0;
		while(_g1 < attribs1.length) {
			var att1 = attribs1[_g1];
			++_g1;
			{
				var defvalue = att1[4];
				var name2 = att1[2];
				if(defvalue == null) return haxe_xml__$Check_CheckResult.CMissingAttrib(name2,x);
			}
		}
		if(childs == null) childs = haxe_xml_Rule.RList([]);
		var m = haxe_xml_Check.checkList(x.iterator(),childs);
		if(m != haxe_xml__$Check_CheckResult.CMatch) return haxe_xml__$Check_CheckResult.CInElement(x,m);
		var _g2 = 0;
		while(_g2 < attribs1.length) {
			var att2 = attribs1[_g2];
			++_g2;
			{
				var defvalue1 = att2[4];
				var name3 = att2[2];
				x.set(name3,defvalue1);
			}
		}
		return haxe_xml__$Check_CheckResult.CMatch;
	case 1:
		var filter1 = r[2];
		if(x.nodeType != Xml.PCData && x.nodeType != Xml.CData) return haxe_xml__$Check_CheckResult.CDataExpected(x);
		if(filter1 != null && !haxe_xml_Check.filterMatch(x.get_nodeValue(),filter1)) return haxe_xml__$Check_CheckResult.CInvalidData(x,filter1);
		return haxe_xml__$Check_CheckResult.CMatch;
	case 4:
		var choices = r[2];
		if(choices.length == 0) throw new js__$Boot_HaxeError("No choice possible");
		var _g3 = 0;
		while(_g3 < choices.length) {
			var c = choices[_g3];
			++_g3;
			if(haxe_xml_Check.check(x,c) == haxe_xml__$Check_CheckResult.CMatch) return haxe_xml__$Check_CheckResult.CMatch;
		}
		return haxe_xml_Check.check(x,choices[0]);
	case 5:
		var r1 = r[2];
		return haxe_xml_Check.check(x,r1);
	default:
		throw new js__$Boot_HaxeError("Unexpected " + Std.string(r));
	}
};
haxe_xml_Check.checkList = function(it,r) {
	switch(Type.enumIndex(r)) {
	case 3:
		var ordered = r[3];
		var rules = r[2];
		var rules1 = rules.slice();
		while( it.hasNext() ) {
			var x = it.next();
			if(haxe_xml_Check.isBlank(x)) continue;
			var found = false;
			var _g = 0;
			while(_g < rules1.length) {
				var r1 = rules1[_g];
				++_g;
				var m = haxe_xml_Check.checkList(HxOverrides.iter([x]),r1);
				if(m == haxe_xml__$Check_CheckResult.CMatch) {
					found = true;
					switch(Type.enumIndex(r1)) {
					case 2:
						var one = r1[3];
						var rsub = r1[2];
						if(one) {
							var i;
							var _g2 = 0;
							var _g1 = rules1.length;
							while(_g2 < _g1) {
								var i1 = _g2++;
								if(rules1[i1] == r1) rules1[i1] = haxe_xml_Rule.RMulti(rsub);
							}
						}
						break;
					default:
						HxOverrides.remove(rules1,r1);
					}
					break;
				} else if(ordered && !haxe_xml_Check.isNullable(r1)) return m;
			}
			if(!found) return haxe_xml__$Check_CheckResult.CExtra(x);
		}
		var _g3 = 0;
		while(_g3 < rules1.length) {
			var r2 = rules1[_g3];
			++_g3;
			if(!haxe_xml_Check.isNullable(r2)) return haxe_xml__$Check_CheckResult.CMissing(r2);
		}
		return haxe_xml__$Check_CheckResult.CMatch;
	case 2:
		var one1 = r[3];
		var r3 = r[2];
		var found1 = false;
		while( it.hasNext() ) {
			var x1 = it.next();
			if(haxe_xml_Check.isBlank(x1)) continue;
			var m1 = haxe_xml_Check.checkList(HxOverrides.iter([x1]),r3);
			if(m1 != haxe_xml__$Check_CheckResult.CMatch) return m1;
			found1 = true;
		}
		if(one1 && !found1) return haxe_xml__$Check_CheckResult.CMissing(r3);
		return haxe_xml__$Check_CheckResult.CMatch;
	default:
		var found2 = false;
		while( it.hasNext() ) {
			var x2 = it.next();
			if(haxe_xml_Check.isBlank(x2)) continue;
			var m2 = haxe_xml_Check.check(x2,r);
			if(m2 != haxe_xml__$Check_CheckResult.CMatch) return m2;
			found2 = true;
			break;
		}
		if(!found2) switch(Type.enumIndex(r)) {
		case 5:
			break;
		default:
			return haxe_xml__$Check_CheckResult.CMissing(r);
		}
		while( it.hasNext() ) {
			var x3 = it.next();
			if(haxe_xml_Check.isBlank(x3)) continue;
			return haxe_xml__$Check_CheckResult.CExtra(x3);
		}
		return haxe_xml__$Check_CheckResult.CMatch;
	}
};
haxe_xml_Check.makeWhere = function(path) {
	if(path.length == 0) return "";
	var s = "In ";
	var first = true;
	var _g = 0;
	while(_g < path.length) {
		var x = path[_g];
		++_g;
		if(first) first = false; else s += ".";
		s += x.get_nodeName();
	}
	return s + ": ";
};
haxe_xml_Check.makeString = function(x) {
	if(x.nodeType == Xml.Element) return "element " + x.get_nodeName();
	var s = x.get_nodeValue().split("\r").join("\\r").split("\n").join("\\n").split("\t").join("\\t");
	if(s.length > 20) return HxOverrides.substr(s,0,17) + "...";
	return s;
};
haxe_xml_Check.makeRule = function(r) {
	switch(Type.enumIndex(r)) {
	case 0:
		var name = r[2];
		return "element " + name;
	case 1:
		return "data";
	case 2:
		var r1 = r[2];
		return haxe_xml_Check.makeRule(r1);
	case 3:
		var rules = r[2];
		return haxe_xml_Check.makeRule(rules[0]);
	case 4:
		var choices = r[2];
		return haxe_xml_Check.makeRule(choices[0]);
	case 5:
		var r2 = r[2];
		return haxe_xml_Check.makeRule(r2);
	}
};
haxe_xml_Check.makeError = function(m,path) {
	if(path == null) path = [];
	switch(Type.enumIndex(m)) {
	case 0:
		throw new js__$Boot_HaxeError("assert");
		break;
	case 1:
		var r = m[2];
		return haxe_xml_Check.makeWhere(path) + "Missing " + haxe_xml_Check.makeRule(r);
	case 2:
		var x = m[2];
		return haxe_xml_Check.makeWhere(path) + "Unexpected " + haxe_xml_Check.makeString(x);
	case 3:
		var x1 = m[3];
		var name = m[2];
		return haxe_xml_Check.makeWhere(path) + haxe_xml_Check.makeString(x1) + " while expected element " + name;
	case 4:
		var x2 = m[2];
		return haxe_xml_Check.makeWhere(path) + haxe_xml_Check.makeString(x2) + " while data expected";
	case 5:
		var x3 = m[3];
		var att = m[2];
		path.push(x3);
		return haxe_xml_Check.makeWhere(path) + "unexpected attribute " + att;
	case 6:
		var x4 = m[3];
		var att1 = m[2];
		path.push(x4);
		return haxe_xml_Check.makeWhere(path) + "missing required attribute " + att1;
	case 7:
		var x5 = m[3];
		var att2 = m[2];
		path.push(x5);
		return haxe_xml_Check.makeWhere(path) + "invalid attribute value for " + att2;
	case 8:
		var x6 = m[2];
		return haxe_xml_Check.makeWhere(path) + "invalid data format for " + haxe_xml_Check.makeString(x6);
	case 9:
		var m1 = m[3];
		var x7 = m[2];
		path.push(x7);
		return haxe_xml_Check.makeError(m1,path);
	}
};
haxe_xml_Check.checkNode = function(x,r) {
	var m = haxe_xml_Check.checkList(HxOverrides.iter([x]),r);
	if(m == haxe_xml__$Check_CheckResult.CMatch) return;
	throw new js__$Boot_HaxeError(haxe_xml_Check.makeError(m));
};
var haxe_xml__$Fast_NodeAccess = function(x) {
	this.__x = x;
};
$hxClasses["haxe.xml._Fast.NodeAccess"] = haxe_xml__$Fast_NodeAccess;
haxe_xml__$Fast_NodeAccess.__name__ = ["haxe","xml","_Fast","NodeAccess"];
haxe_xml__$Fast_NodeAccess.prototype = {
	resolve: function(name) {
		var x = this.__x.elementsNamed(name).next();
		if(x == null) {
			var xname;
			if(this.__x.nodeType == Xml.Document) xname = "Document"; else xname = this.__x.get_nodeName();
			throw new js__$Boot_HaxeError(xname + " is missing element " + name);
		}
		return new haxe_xml_Fast(x);
	}
	,__class__: haxe_xml__$Fast_NodeAccess
};
var haxe_xml__$Fast_AttribAccess = function(x) {
	this.__x = x;
};
$hxClasses["haxe.xml._Fast.AttribAccess"] = haxe_xml__$Fast_AttribAccess;
haxe_xml__$Fast_AttribAccess.__name__ = ["haxe","xml","_Fast","AttribAccess"];
haxe_xml__$Fast_AttribAccess.prototype = {
	resolve: function(name) {
		if(this.__x.nodeType == Xml.Document) throw new js__$Boot_HaxeError("Cannot access document attribute " + name);
		var v = this.__x.get(name);
		if(v == null) throw new js__$Boot_HaxeError(this.__x.get_nodeName() + " is missing attribute " + name);
		return v;
	}
	,__class__: haxe_xml__$Fast_AttribAccess
};
var haxe_xml__$Fast_HasAttribAccess = function(x) {
	this.__x = x;
};
$hxClasses["haxe.xml._Fast.HasAttribAccess"] = haxe_xml__$Fast_HasAttribAccess;
haxe_xml__$Fast_HasAttribAccess.__name__ = ["haxe","xml","_Fast","HasAttribAccess"];
haxe_xml__$Fast_HasAttribAccess.prototype = {
	resolve: function(name) {
		if(this.__x.nodeType == Xml.Document) throw new js__$Boot_HaxeError("Cannot access document attribute " + name);
		return this.__x.exists(name);
	}
	,__class__: haxe_xml__$Fast_HasAttribAccess
};
var haxe_xml__$Fast_HasNodeAccess = function(x) {
	this.__x = x;
};
$hxClasses["haxe.xml._Fast.HasNodeAccess"] = haxe_xml__$Fast_HasNodeAccess;
haxe_xml__$Fast_HasNodeAccess.__name__ = ["haxe","xml","_Fast","HasNodeAccess"];
haxe_xml__$Fast_HasNodeAccess.prototype = {
	resolve: function(name) {
		return this.__x.elementsNamed(name).hasNext();
	}
	,__class__: haxe_xml__$Fast_HasNodeAccess
};
var haxe_xml__$Fast_NodeListAccess = function(x) {
	this.__x = x;
};
$hxClasses["haxe.xml._Fast.NodeListAccess"] = haxe_xml__$Fast_NodeListAccess;
haxe_xml__$Fast_NodeListAccess.__name__ = ["haxe","xml","_Fast","NodeListAccess"];
haxe_xml__$Fast_NodeListAccess.prototype = {
	resolve: function(name) {
		var l = new List();
		var $it0 = this.__x.elementsNamed(name);
		while( $it0.hasNext() ) {
			var x = $it0.next();
			l.add(new haxe_xml_Fast(x));
		}
		return l;
	}
	,__class__: haxe_xml__$Fast_NodeListAccess
};
var haxe_xml_Fast = function(x) {
	if(x.nodeType != Xml.Document && x.nodeType != Xml.Element) throw new js__$Boot_HaxeError("Invalid nodeType " + x.nodeType);
	this.x = x;
	this.node = new haxe_xml__$Fast_NodeAccess(x);
	this.nodes = new haxe_xml__$Fast_NodeListAccess(x);
	this.att = new haxe_xml__$Fast_AttribAccess(x);
	this.has = new haxe_xml__$Fast_HasAttribAccess(x);
	this.hasNode = new haxe_xml__$Fast_HasNodeAccess(x);
};
$hxClasses["haxe.xml.Fast"] = haxe_xml_Fast;
haxe_xml_Fast.__name__ = ["haxe","xml","Fast"];
haxe_xml_Fast.prototype = {
	get_name: function() {
		if(this.x.nodeType == Xml.Document) return "Document"; else return this.x.get_nodeName();
	}
	,get_elements: function() {
		var it = this.x.elements();
		return { hasNext : $bind(it,it.hasNext), next : function() {
			var x = it.next();
			if(x == null) return null;
			return new haxe_xml_Fast(x);
		}};
	}
	,__class__: haxe_xml_Fast
	,__properties__: {get_elements:"get_elements",get_name:"get_name"}
};
var haxe_xml_Parser = function() { };
$hxClasses["haxe.xml.Parser"] = haxe_xml_Parser;
haxe_xml_Parser.__name__ = ["haxe","xml","Parser"];
haxe_xml_Parser.parse = function(str,strict) {
	if(strict == null) strict = false;
	var doc = Xml.createDocument();
	haxe_xml_Parser.doParse(str,strict,0,doc);
	return doc;
};
haxe_xml_Parser.doParse = function(str,strict,p,parent) {
	if(p == null) p = 0;
	var xml = null;
	var state = 1;
	var next = 1;
	var aname = null;
	var start = 0;
	var nsubs = 0;
	var nbrackets = 0;
	var c = StringTools.fastCodeAt(str,p);
	var buf = new StringBuf();
	var escapeNext = 1;
	var attrValQuote = -1;
	while(!StringTools.isEof(c)) {
		switch(state) {
		case 0:
			switch(c) {
			case 10:case 13:case 9:case 32:
				break;
			default:
				state = next;
				continue;
			}
			break;
		case 1:
			switch(c) {
			case 60:
				state = 0;
				next = 2;
				break;
			default:
				start = p;
				state = 13;
				continue;
			}
			break;
		case 13:
			if(c == 60) {
				buf.addSub(str,start,p - start);
				var child = Xml.createPCData(buf.toString());
				buf = new StringBuf();
				parent.addChild(child);
				nsubs++;
				state = 0;
				next = 2;
			} else if(c == 38) {
				buf.addSub(str,start,p - start);
				state = 18;
				escapeNext = 13;
				start = p + 1;
			}
			break;
		case 17:
			if(c == 93 && StringTools.fastCodeAt(str,p + 1) == 93 && StringTools.fastCodeAt(str,p + 2) == 62) {
				var child1 = Xml.createCData(HxOverrides.substr(str,start,p - start));
				parent.addChild(child1);
				nsubs++;
				p += 2;
				state = 1;
			}
			break;
		case 2:
			switch(c) {
			case 33:
				if(StringTools.fastCodeAt(str,p + 1) == 91) {
					p += 2;
					if(HxOverrides.substr(str,p,6).toUpperCase() != "CDATA[") throw new js__$Boot_HaxeError("Expected <![CDATA[");
					p += 5;
					state = 17;
					start = p + 1;
				} else if(StringTools.fastCodeAt(str,p + 1) == 68 || StringTools.fastCodeAt(str,p + 1) == 100) {
					if(HxOverrides.substr(str,p + 2,6).toUpperCase() != "OCTYPE") throw new js__$Boot_HaxeError("Expected <!DOCTYPE");
					p += 8;
					state = 16;
					start = p + 1;
				} else if(StringTools.fastCodeAt(str,p + 1) != 45 || StringTools.fastCodeAt(str,p + 2) != 45) throw new js__$Boot_HaxeError("Expected <!--"); else {
					p += 2;
					state = 15;
					start = p + 1;
				}
				break;
			case 63:
				state = 14;
				start = p;
				break;
			case 47:
				if(parent == null) throw new js__$Boot_HaxeError("Expected node name");
				start = p + 1;
				state = 0;
				next = 10;
				break;
			default:
				state = 3;
				start = p;
				continue;
			}
			break;
		case 3:
			if(!haxe_xml_Parser.isValidChar(c)) {
				if(p == start) throw new js__$Boot_HaxeError("Expected node name");
				xml = Xml.createElement(HxOverrides.substr(str,start,p - start));
				parent.addChild(xml);
				nsubs++;
				state = 0;
				next = 4;
				continue;
			}
			break;
		case 4:
			switch(c) {
			case 47:
				state = 11;
				break;
			case 62:
				state = 9;
				break;
			default:
				state = 5;
				start = p;
				continue;
			}
			break;
		case 5:
			if(!haxe_xml_Parser.isValidChar(c)) {
				var tmp;
				if(start == p) throw new js__$Boot_HaxeError("Expected attribute name");
				tmp = HxOverrides.substr(str,start,p - start);
				aname = tmp;
				if(xml.exists(aname)) throw new js__$Boot_HaxeError("Duplicate attribute");
				state = 0;
				next = 6;
				continue;
			}
			break;
		case 6:
			switch(c) {
			case 61:
				state = 0;
				next = 7;
				break;
			default:
				throw new js__$Boot_HaxeError("Expected =");
			}
			break;
		case 7:
			switch(c) {
			case 34:case 39:
				buf = new StringBuf();
				state = 8;
				start = p + 1;
				attrValQuote = c;
				break;
			default:
				throw new js__$Boot_HaxeError("Expected \"");
			}
			break;
		case 8:
			switch(c) {
			case 38:
				buf.addSub(str,start,p - start);
				state = 18;
				escapeNext = 8;
				start = p + 1;
				break;
			case 62:
				if(strict) throw new js__$Boot_HaxeError("Invalid unescaped " + String.fromCharCode(c) + " in attribute value"); else if(c == attrValQuote) {
					buf.addSub(str,start,p - start);
					var val = buf.toString();
					buf = new StringBuf();
					xml.set(aname,val);
					state = 0;
					next = 4;
				}
				break;
			case 60:
				if(strict) throw new js__$Boot_HaxeError("Invalid unescaped " + String.fromCharCode(c) + " in attribute value"); else if(c == attrValQuote) {
					buf.addSub(str,start,p - start);
					var val1 = buf.toString();
					buf = new StringBuf();
					xml.set(aname,val1);
					state = 0;
					next = 4;
				}
				break;
			default:
				if(c == attrValQuote) {
					buf.addSub(str,start,p - start);
					var val2 = buf.toString();
					buf = new StringBuf();
					xml.set(aname,val2);
					state = 0;
					next = 4;
				}
			}
			break;
		case 9:
			p = haxe_xml_Parser.doParse(str,strict,p,xml);
			start = p;
			state = 1;
			break;
		case 11:
			switch(c) {
			case 62:
				state = 1;
				break;
			default:
				throw new js__$Boot_HaxeError("Expected >");
			}
			break;
		case 12:
			switch(c) {
			case 62:
				if(nsubs == 0) parent.addChild(Xml.createPCData(""));
				return p;
			default:
				throw new js__$Boot_HaxeError("Expected >");
			}
			break;
		case 10:
			if(!haxe_xml_Parser.isValidChar(c)) {
				if(start == p) throw new js__$Boot_HaxeError("Expected node name");
				var v = HxOverrides.substr(str,start,p - start);
				if(v != parent.get_nodeName()) throw new js__$Boot_HaxeError("Expected </" + parent.get_nodeName() + ">");
				state = 0;
				next = 12;
				continue;
			}
			break;
		case 15:
			if(c == 45 && StringTools.fastCodeAt(str,p + 1) == 45 && StringTools.fastCodeAt(str,p + 2) == 62) {
				var xml1 = Xml.createComment(HxOverrides.substr(str,start,p - start));
				parent.addChild(xml1);
				nsubs++;
				p += 2;
				state = 1;
			}
			break;
		case 16:
			if(c == 91) nbrackets++; else if(c == 93) nbrackets--; else if(c == 62 && nbrackets == 0) {
				var xml2 = Xml.createDocType(HxOverrides.substr(str,start,p - start));
				parent.addChild(xml2);
				nsubs++;
				state = 1;
			}
			break;
		case 14:
			if(c == 63 && StringTools.fastCodeAt(str,p + 1) == 62) {
				p++;
				var str1 = HxOverrides.substr(str,start + 1,p - start - 2);
				var xml3 = Xml.createProcessingInstruction(str1);
				parent.addChild(xml3);
				nsubs++;
				state = 1;
			}
			break;
		case 18:
			if(c == 59) {
				var s = HxOverrides.substr(str,start,p - start);
				if(StringTools.fastCodeAt(s,0) == 35) {
					var c1;
					if(StringTools.fastCodeAt(s,1) == 120) c1 = Std.parseInt("0" + HxOverrides.substr(s,1,s.length - 1)); else c1 = Std.parseInt(HxOverrides.substr(s,1,s.length - 1));
					buf.addChar(c1);
				} else if(!haxe_xml_Parser.escapes.exists(s)) {
					if(strict) throw new js__$Boot_HaxeError("Undefined entity: " + s);
					buf.add("&" + s + ";");
				} else buf.add(haxe_xml_Parser.escapes.get(s));
				start = p + 1;
				state = escapeNext;
			} else if(!haxe_xml_Parser.isValidChar(c) && c != 35) {
				if(strict) throw new js__$Boot_HaxeError("Invalid character in entity: " + String.fromCharCode(c));
				buf.addChar(38);
				buf.addSub(str,start,p - start);
				p--;
				start = p + 1;
				state = escapeNext;
			}
			break;
		}
		c = StringTools.fastCodeAt(str,++p);
	}
	if(state == 1) {
		start = p;
		state = 13;
	}
	if(state == 13) {
		if(p != start || nsubs == 0) {
			buf.addSub(str,start,p - start);
			var xml4 = Xml.createPCData(buf.toString());
			parent.addChild(xml4);
			nsubs++;
		}
		return p;
	}
	if(!strict && state == 18 && escapeNext == 13) {
		buf.addChar(38);
		buf.addSub(str,start,p - start);
		var xml5 = Xml.createPCData(buf.toString());
		parent.addChild(xml5);
		nsubs++;
		return p;
	}
	throw new js__$Boot_HaxeError("Unexpected end");
};
haxe_xml_Parser.isValidChar = function(c) {
	return c >= 97 && c <= 122 || c >= 65 && c <= 90 || c >= 48 && c <= 57 || c == 58 || c == 46 || c == 95 || c == 45;
};
var haxe_xml_Printer = function(pretty) {
	this.output = new StringBuf();
	this.pretty = pretty;
};
$hxClasses["haxe.xml.Printer"] = haxe_xml_Printer;
haxe_xml_Printer.__name__ = ["haxe","xml","Printer"];
haxe_xml_Printer.print = function(xml,pretty) {
	if(pretty == null) pretty = false;
	var printer = new haxe_xml_Printer(pretty);
	printer.writeNode(xml,"");
	return printer.output.toString();
};
haxe_xml_Printer.prototype = {
	writeNode: function(value,tabs) {
		var _g = value.nodeType;
		switch(_g) {
		case 2:
			this.write(tabs + "<![CDATA[");
			this.write(StringTools.trim(value.get_nodeValue()));
			this.write("]]>");
			this.newline();
			break;
		case 3:
			var commentContent = value.get_nodeValue();
			commentContent = new EReg("[\n\r\t]+","g").replace(commentContent,"");
			commentContent = "<!--" + commentContent + "-->";
			this.write(tabs);
			this.write(StringTools.trim(commentContent));
			this.newline();
			break;
		case 6:
			var $it0 = value.iterator();
			while( $it0.hasNext() ) {
				var child = $it0.next();
				this.writeNode(child,tabs);
			}
			break;
		case 0:
			this.write(tabs + "<");
			this.write(value.get_nodeName());
			var $it1 = value.attributes();
			while( $it1.hasNext() ) {
				var attribute = $it1.next();
				this.write(" " + attribute + "=\"");
				this.write(StringTools.htmlEscape(value.get(attribute),true));
				this.write("\"");
			}
			if(this.hasChildren(value)) {
				this.write(">");
				this.newline();
				var $it2 = value.iterator();
				while( $it2.hasNext() ) {
					var child1 = $it2.next();
					this.writeNode(child1,this.pretty?tabs + "\t":tabs);
				}
				this.write(tabs + "</");
				this.write(value.get_nodeName());
				this.write(">");
				this.newline();
			} else {
				this.write("/>");
				this.newline();
			}
			break;
		case 1:
			var nodeValue = value.get_nodeValue();
			if(nodeValue.length != 0) {
				this.write(tabs + StringTools.htmlEscape(nodeValue));
				this.newline();
			}
			break;
		case 5:
			this.write("<?" + value.get_nodeValue() + "?>");
			break;
		case 4:
			this.write("<!DOCTYPE " + value.get_nodeValue() + ">");
			break;
		}
	}
	,write: function(input) {
		this.output.add(input);
	}
	,newline: function() {
		if(this.pretty) this.output.add("");
	}
	,hasChildren: function(value) {
		var $it0 = value.iterator();
		while( $it0.hasNext() ) {
			var child = $it0.next();
			var _g = child.nodeType;
			switch(_g) {
			case 0:case 1:
				return true;
			case 2:case 3:
				if(StringTools.ltrim(child.get_nodeValue()).length != 0) return true;
				break;
			default:
			}
		}
		return false;
	}
	,__class__: haxe_xml_Printer
};
var js__$Boot_HaxeError = function(val) {
	Error.call(this);
	this.val = val;
	this.message = String(val);
	if(Error.captureStackTrace) Error.captureStackTrace(this,js__$Boot_HaxeError);
};
$hxClasses["js._Boot.HaxeError"] = js__$Boot_HaxeError;
js__$Boot_HaxeError.__name__ = ["js","_Boot","HaxeError"];
js__$Boot_HaxeError.__super__ = Error;
js__$Boot_HaxeError.prototype = $extend(Error.prototype,{
	__class__: js__$Boot_HaxeError
});
var js_Boot = function() { };
$hxClasses["js.Boot"] = js_Boot;
js_Boot.__name__ = ["js","Boot"];
js_Boot.isClass = function(o) {
	return o.__name__;
};
js_Boot.isEnum = function(e) {
	return e.__ename__;
};
js_Boot.getClass = function(o) {
	if(Std["is"](o,Array)) return Array; else {
		var cl = o.__class__;
		if(cl != null) return cl;
		var name = js_Boot.__nativeClassName(o);
		if(name != null) return js_Boot.__resolveNativeClass(name);
		return null;
	}
};
js_Boot.__string_rec = function(o,s) {
	if(o == null) return "null";
	if(s.length >= 5) return "<...>";
	var t = typeof(o);
	if(t == "function" && (js_Boot.isClass(o) || js_Boot.isEnum(o))) t = "object";
	switch(t) {
	case "object":
		if(o instanceof Array) {
			if(o.__enum__) {
				if(o.length == 2) return o[0];
				var str2 = o[0] + "(";
				s += "\t";
				var _g1 = 2;
				var _g = o.length;
				while(_g1 < _g) {
					var i1 = _g1++;
					if(i1 != 2) str2 += "," + js_Boot.__string_rec(o[i1],s); else str2 += js_Boot.__string_rec(o[i1],s);
				}
				return str2 + ")";
			}
			var l = o.length;
			var i;
			var str1 = "[";
			s += "\t";
			var _g2 = 0;
			while(_g2 < l) {
				var i2 = _g2++;
				str1 += (i2 > 0?",":"") + js_Boot.__string_rec(o[i2],s);
			}
			str1 += "]";
			return str1;
		}
		var tostr;
		try {
			tostr = o.toString;
		} catch( e ) {
			if (e instanceof js__$Boot_HaxeError) e = e.val;
			return "???";
		}
		if(tostr != null && tostr != Object.toString && typeof(tostr) == "function") {
			var s2 = o.toString();
			if(s2 != "[object Object]") return s2;
		}
		var k = null;
		var str = "{\n";
		s += "\t";
		var hasp = o.hasOwnProperty != null;
		for( var k in o ) {
		if(hasp && !o.hasOwnProperty(k)) {
			continue;
		}
		if(k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") {
			continue;
		}
		if(str.length != 2) str += ", \n";
		str += s + k + " : " + js_Boot.__string_rec(o[k],s);
		}
		s = s.substring(1);
		str += "\n" + s + "}";
		return str;
	case "function":
		return "<function>";
	case "string":
		return o;
	default:
		return String(o);
	}
};
js_Boot.__interfLoop = function(cc,cl) {
	if(cc == null) return false;
	if(cc == cl) return true;
	var intf = cc.__interfaces__;
	if(intf != null) {
		var _g1 = 0;
		var _g = intf.length;
		while(_g1 < _g) {
			var i = _g1++;
			var i1 = intf[i];
			if(i1 == cl || js_Boot.__interfLoop(i1,cl)) return true;
		}
	}
	return js_Boot.__interfLoop(cc.__super__,cl);
};
js_Boot.__instanceof = function(o,cl) {
	if(cl == null) return false;
	switch(cl) {
	case Int:
		return (o|0) === o;
	case Float:
		return typeof(o) == "number";
	case Bool:
		return typeof(o) == "boolean";
	case String:
		return typeof(o) == "string";
	case Array:
		return (o instanceof Array) && o.__enum__ == null;
	case Dynamic:
		return true;
	default:
		if(o != null) {
			if(typeof(cl) == "function") {
				if(o instanceof cl) return true;
				if(js_Boot.__interfLoop(js_Boot.getClass(o),cl)) return true;
			} else if(typeof(cl) == "object" && js_Boot.__isNativeObj(cl)) {
				if(o instanceof cl) return true;
			}
		} else return false;
		if(cl == Class && o.__name__ != null) return true;
		if(cl == Enum && o.__ename__ != null) return true;
		return o.__enum__ == cl;
	}
};
js_Boot.__cast = function(o,t) {
	if(js_Boot.__instanceof(o,t)) return o; else throw new js__$Boot_HaxeError("Cannot cast " + Std.string(o) + " to " + Std.string(t));
};
js_Boot.__nativeClassName = function(o) {
	var name = js_Boot.__toStr.call(o).slice(8,-1);
	if(name == "Object" || name == "Function" || name == "Math" || name == "JSON") return null;
	return name;
};
js_Boot.__isNativeObj = function(o) {
	return js_Boot.__nativeClassName(o) != null;
};
js_Boot.__resolveNativeClass = function(name) {
	return (Function("return typeof " + name + " != \"undefined\" ? " + name + " : null"))();
};
var js_html__$CanvasElement_CanvasUtil = function() { };
$hxClasses["js.html._CanvasElement.CanvasUtil"] = js_html__$CanvasElement_CanvasUtil;
js_html__$CanvasElement_CanvasUtil.__name__ = ["js","html","_CanvasElement","CanvasUtil"];
js_html__$CanvasElement_CanvasUtil.getContextWebGL = function(canvas,attribs) {
	var _g = 0;
	var _g1 = ["webgl","experimental-webgl"];
	while(_g < _g1.length) {
		var name = _g1[_g];
		++_g;
		var ctx = canvas.getContext(name,attribs);
		if(ctx != null) return ctx;
	}
	return null;
};
var js_html_compat_ArrayBuffer = function(a) {
	if(Std["is"](a,Array)) {
		this.a = a;
		this.byteLength = a.length;
	} else {
		var len = a;
		this.a = [];
		var _g = 0;
		while(_g < len) {
			var i = _g++;
			this.a[i] = 0;
		}
		this.byteLength = len;
	}
};
$hxClasses["js.html.compat.ArrayBuffer"] = js_html_compat_ArrayBuffer;
js_html_compat_ArrayBuffer.__name__ = ["js","html","compat","ArrayBuffer"];
js_html_compat_ArrayBuffer.sliceImpl = function(begin,end) {
	var u = new Uint8Array(this,begin,end == null?null:end - begin);
	var result = new ArrayBuffer(u.byteLength);
	var resultArray = new Uint8Array(result);
	resultArray.set(u);
	return result;
};
js_html_compat_ArrayBuffer.prototype = {
	slice: function(begin,end) {
		return new js_html_compat_ArrayBuffer(this.a.slice(begin,end));
	}
	,__class__: js_html_compat_ArrayBuffer
};
var js_html_compat_DataView = function(buffer,byteOffset,byteLength) {
	this.buf = buffer;
	if(byteOffset == null) this.offset = 0; else this.offset = byteOffset;
	if(byteLength == null) this.length = buffer.byteLength - this.offset; else this.length = byteLength;
	if(this.offset < 0 || this.length < 0 || this.offset + this.length > buffer.byteLength) throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);
};
$hxClasses["js.html.compat.DataView"] = js_html_compat_DataView;
js_html_compat_DataView.__name__ = ["js","html","compat","DataView"];
js_html_compat_DataView.prototype = {
	getInt8: function(byteOffset) {
		var v = this.buf.a[this.offset + byteOffset];
		if(v >= 128) return v - 256; else return v;
	}
	,getUint8: function(byteOffset) {
		return this.buf.a[this.offset + byteOffset];
	}
	,getInt16: function(byteOffset,littleEndian) {
		var v = this.getUint16(byteOffset,littleEndian);
		if(v >= 32768) return v - 65536; else return v;
	}
	,getUint16: function(byteOffset,littleEndian) {
		if(littleEndian) return this.buf.a[this.offset + byteOffset] | this.buf.a[this.offset + byteOffset + 1] << 8; else return this.buf.a[this.offset + byteOffset] << 8 | this.buf.a[this.offset + byteOffset + 1];
	}
	,getInt32: function(byteOffset,littleEndian) {
		var p = this.offset + byteOffset;
		var a = this.buf.a[p++];
		var b = this.buf.a[p++];
		var c = this.buf.a[p++];
		var d = this.buf.a[p++];
		if(littleEndian) return a | b << 8 | c << 16 | d << 24; else return d | c << 8 | b << 16 | a << 24;
	}
	,getUint32: function(byteOffset,littleEndian) {
		var v = this.getInt32(byteOffset,littleEndian);
		if(v < 0) return v + 4294967296.; else return v;
	}
	,getFloat32: function(byteOffset,littleEndian) {
		return haxe_io_FPHelper.i32ToFloat(this.getInt32(byteOffset,littleEndian));
	}
	,getFloat64: function(byteOffset,littleEndian) {
		var a = this.getInt32(byteOffset,littleEndian);
		var b = this.getInt32(byteOffset + 4,littleEndian);
		return haxe_io_FPHelper.i64ToDouble(littleEndian?a:b,littleEndian?b:a);
	}
	,setInt8: function(byteOffset,value) {
		if(value < 0) this.buf.a[byteOffset + this.offset] = value + 128 & 255; else this.buf.a[byteOffset + this.offset] = value & 255;
	}
	,setUint8: function(byteOffset,value) {
		this.buf.a[byteOffset + this.offset] = value & 255;
	}
	,setInt16: function(byteOffset,value,littleEndian) {
		this.setUint16(byteOffset,value < 0?value + 65536:value,littleEndian);
	}
	,setUint16: function(byteOffset,value,littleEndian) {
		var p = byteOffset + this.offset;
		if(littleEndian) {
			this.buf.a[p] = value & 255;
			this.buf.a[p++] = value >> 8 & 255;
		} else {
			this.buf.a[p++] = value >> 8 & 255;
			this.buf.a[p] = value & 255;
		}
	}
	,setInt32: function(byteOffset,value,littleEndian) {
		this.setUint32(byteOffset,value,littleEndian);
	}
	,setUint32: function(byteOffset,value,littleEndian) {
		var p = byteOffset + this.offset;
		if(littleEndian) {
			this.buf.a[p++] = value & 255;
			this.buf.a[p++] = value >> 8 & 255;
			this.buf.a[p++] = value >> 16 & 255;
			this.buf.a[p++] = value >>> 24;
		} else {
			this.buf.a[p++] = value >>> 24;
			this.buf.a[p++] = value >> 16 & 255;
			this.buf.a[p++] = value >> 8 & 255;
			this.buf.a[p++] = value & 255;
		}
	}
	,setFloat32: function(byteOffset,value,littleEndian) {
		this.setUint32(byteOffset,haxe_io_FPHelper.floatToI32(value),littleEndian);
	}
	,setFloat64: function(byteOffset,value,littleEndian) {
		var i64 = haxe_io_FPHelper.doubleToI64(value);
		if(littleEndian) {
			this.setUint32(byteOffset,i64.low);
			this.setUint32(byteOffset,i64.high);
		} else {
			this.setUint32(byteOffset,i64.high);
			this.setUint32(byteOffset,i64.low);
		}
	}
	,__class__: js_html_compat_DataView
};
var js_html_compat_Uint8Array = function() { };
$hxClasses["js.html.compat.Uint8Array"] = js_html_compat_Uint8Array;
js_html_compat_Uint8Array.__name__ = ["js","html","compat","Uint8Array"];
js_html_compat_Uint8Array._new = function(arg1,offset,length) {
	var arr;
	if(typeof(arg1) == "number") {
		arr = [];
		var _g = 0;
		while(_g < arg1) {
			var i = _g++;
			arr[i] = 0;
		}
		arr.byteLength = arr.length;
		arr.byteOffset = 0;
		arr.buffer = new js_html_compat_ArrayBuffer(arr);
	} else if(Std["is"](arg1,js_html_compat_ArrayBuffer)) {
		var buffer = arg1;
		if(offset == null) offset = 0;
		if(length == null) length = buffer.byteLength - offset;
		if(offset == 0) arr = buffer.a; else arr = buffer.a.slice(offset,offset + length);
		arr.byteLength = arr.length;
		arr.byteOffset = offset;
		arr.buffer = buffer;
	} else if(Std["is"](arg1,Array)) {
		arr = arg1.slice();
		arr.byteLength = arr.length;
		arr.byteOffset = 0;
		arr.buffer = new js_html_compat_ArrayBuffer(arr);
	} else throw new js__$Boot_HaxeError("TODO " + Std.string(arg1));
	arr.subarray = js_html_compat_Uint8Array._subarray;
	arr.set = js_html_compat_Uint8Array._set;
	return arr;
};
js_html_compat_Uint8Array._set = function(arg,offset) {
	var t = this;
	if(Std["is"](arg.buffer,js_html_compat_ArrayBuffer)) {
		var a = arg;
		if(arg.byteLength + offset > t.byteLength) throw new js__$Boot_HaxeError("set() outside of range");
		var _g1 = 0;
		var _g = arg.byteLength;
		while(_g1 < _g) {
			var i = _g1++;
			t[i + offset] = a[i];
		}
	} else if(Std["is"](arg,Array)) {
		var a1 = arg;
		if(a1.length + offset > t.byteLength) throw new js__$Boot_HaxeError("set() outside of range");
		var _g11 = 0;
		var _g2 = a1.length;
		while(_g11 < _g2) {
			var i1 = _g11++;
			t[i1 + offset] = a1[i1];
		}
	} else throw new js__$Boot_HaxeError("TODO");
};
js_html_compat_Uint8Array._subarray = function(start,end) {
	var t = this;
	var a = js_html_compat_Uint8Array._new(t.slice(start,end));
	a.byteOffset = start;
	return a;
};
var nape_Config = function() { };
$hxClasses["nape.Config"] = nape_Config;
nape_Config.__name__ = ["nape","Config"];
var nape_callbacks_Callback = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.callbacks.Callback"] = nape_callbacks_Callback;
nape_callbacks_Callback.__name__ = ["nape","callbacks","Callback"];
nape_callbacks_Callback.prototype = {
	get_listener: function() {
		return this.zpp_inner.listener.outer;
	}
	,toString: function() {
		return "";
	}
	,__class__: nape_callbacks_Callback
	,__properties__: {get_listener:"get_listener"}
};
var nape_callbacks_BodyCallback = function() {
	nape_callbacks_Callback.call(this);
};
$hxClasses["nape.callbacks.BodyCallback"] = nape_callbacks_BodyCallback;
nape_callbacks_BodyCallback.__name__ = ["nape","callbacks","BodyCallback"];
nape_callbacks_BodyCallback.__super__ = nape_callbacks_Callback;
nape_callbacks_BodyCallback.prototype = $extend(nape_callbacks_Callback.prototype,{
	get_body: function() {
		return this.zpp_inner.body.outer;
	}
	,toString: function() {
		var ret = "Cb:";
		ret += ["WAKE","SLEEP"][this.zpp_inner.event - zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE];
		ret += ":" + this.get_body().toString();
		ret += " : listener: " + Std.string(this.get_listener());
		return ret;
	}
	,__class__: nape_callbacks_BodyCallback
	,__properties__: $extend(nape_callbacks_Callback.prototype.__properties__,{get_body:"get_body"})
});
var nape_callbacks_Listener = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.callbacks.Listener"] = nape_callbacks_Listener;
nape_callbacks_Listener.__name__ = ["nape","callbacks","Listener"];
nape_callbacks_Listener.prototype = {
	toString: function() {
		var event = ["BEGIN","END","WAKE","SLEEP","BREAK","PRE","ONGOING"][this.zpp_inner.event];
		if(this.zpp_inner.type == zpp_$nape_util_ZPP_$Flags.id_ListenerType_BODY) {
			var body = this.zpp_inner.body;
			return "BodyListener{" + event + "::" + Std.string(body.outer_zn.get_options()) + "}";
		} else if(this.zpp_inner.type == zpp_$nape_util_ZPP_$Flags.id_ListenerType_CONSTRAINT) {
			var con = this.zpp_inner.constraint;
			return "ConstraintListener{" + event + "::" + Std.string(con.outer_zn.get_options()) + "}";
		} else {
			var con1 = this.zpp_inner.interaction;
			var itype;
			var _g = con1.itype;
			switch(_g) {
			case 1:
				itype = "COLLISION";
				break;
			case 2:
				itype = "SENSOR";
				break;
			case 4:
				itype = "FLUID";
				break;
			default:
				itype = "ALL";
			}
			return (this.zpp_inner.type == zpp_$nape_util_ZPP_$Flags.id_ListenerType_INTERACTION?"InteractionListener{" + event + "#" + itype + "::" + Std.string(con1.outer_zni.get_options1()) + ":" + Std.string(con1.outer_zni.get_options2()) + "}":"PreListener{" + itype + "::" + Std.string(con1.outer_znp.get_options1()) + ":" + Std.string(con1.outer_znp.get_options2()) + "}") + " precedence=" + this.zpp_inner.precedence;
		}
	}
	,__class__: nape_callbacks_Listener
};
var nape_callbacks_BodyListener = function() {
	this.zpp_inner_zn = null;
};
$hxClasses["nape.callbacks.BodyListener"] = nape_callbacks_BodyListener;
nape_callbacks_BodyListener.__name__ = ["nape","callbacks","BodyListener"];
nape_callbacks_BodyListener.__super__ = nape_callbacks_Listener;
nape_callbacks_BodyListener.prototype = $extend(nape_callbacks_Listener.prototype,{
	get_options: function() {
		return this.zpp_inner_zn.options.outer;
	}
	,__class__: nape_callbacks_BodyListener
	,__properties__: {get_options:"get_options"}
});
var nape_callbacks_CbEvent = function() {
};
$hxClasses["nape.callbacks.CbEvent"] = nape_callbacks_CbEvent;
nape_callbacks_CbEvent.__name__ = ["nape","callbacks","CbEvent"];
nape_callbacks_CbEvent.__properties__ = {get_PRE:"get_PRE",get_BREAK:"get_BREAK",get_SLEEP:"get_SLEEP",get_WAKE:"get_WAKE",get_END:"get_END",get_ONGOING:"get_ONGOING",get_BEGIN:"get_BEGIN"}
nape_callbacks_CbEvent.get_BEGIN = function() {
	if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN = new nape_callbacks_CbEvent();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN;
};
nape_callbacks_CbEvent.get_ONGOING = function() {
	if(zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING = new nape_callbacks_CbEvent();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING;
};
nape_callbacks_CbEvent.get_END = function() {
	if(zpp_$nape_util_ZPP_$Flags.CbEvent_END == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.CbEvent_END = new nape_callbacks_CbEvent();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.CbEvent_END;
};
nape_callbacks_CbEvent.get_WAKE = function() {
	if(zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE = new nape_callbacks_CbEvent();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE;
};
nape_callbacks_CbEvent.get_SLEEP = function() {
	if(zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP = new nape_callbacks_CbEvent();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP;
};
nape_callbacks_CbEvent.get_BREAK = function() {
	if(zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK = new nape_callbacks_CbEvent();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK;
};
nape_callbacks_CbEvent.get_PRE = function() {
	if(zpp_$nape_util_ZPP_$Flags.CbEvent_PRE == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.CbEvent_PRE = new nape_callbacks_CbEvent();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.CbEvent_PRE;
};
nape_callbacks_CbEvent.prototype = {
	toString: function() {
		if(false) return ""; else if(this == nape_callbacks_CbEvent.get_PRE()) return "PRE"; else if(this == nape_callbacks_CbEvent.get_BEGIN()) return "BEGIN"; else if(this == nape_callbacks_CbEvent.get_ONGOING()) return "ONGOING"; else if(this == nape_callbacks_CbEvent.get_END()) return "END"; else if(this == nape_callbacks_CbEvent.get_WAKE()) return "WAKE"; else if(this == nape_callbacks_CbEvent.get_SLEEP()) return "SLEEP"; else if(this == nape_callbacks_CbEvent.get_BREAK()) return "BREAK"; else return "";
	}
	,__class__: nape_callbacks_CbEvent
};
var nape_callbacks_CbType = function() {
	this.zpp_inner = null;
	this.zpp_inner = new zpp_$nape_callbacks_ZPP_$CbType();
	this.zpp_inner.outer = this;
};
$hxClasses["nape.callbacks.CbType"] = nape_callbacks_CbType;
nape_callbacks_CbType.__name__ = ["nape","callbacks","CbType"];
nape_callbacks_CbType.__properties__ = {get_ANY_COMPOUND:"get_ANY_COMPOUND",get_ANY_SHAPE:"get_ANY_SHAPE",get_ANY_CONSTRAINT:"get_ANY_CONSTRAINT",get_ANY_BODY:"get_ANY_BODY"}
nape_callbacks_CbType.get_ANY_BODY = function() {
	return zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY;
};
nape_callbacks_CbType.get_ANY_CONSTRAINT = function() {
	return zpp_$nape_callbacks_ZPP_$CbType.ANY_CONSTRAINT;
};
nape_callbacks_CbType.get_ANY_SHAPE = function() {
	return zpp_$nape_callbacks_ZPP_$CbType.ANY_SHAPE;
};
nape_callbacks_CbType.get_ANY_COMPOUND = function() {
	return zpp_$nape_callbacks_ZPP_$CbType.ANY_COMPOUND;
};
nape_callbacks_CbType.prototype = {
	get_id: function() {
		return this.zpp_inner.id;
	}
	,toString: function() {
		if(this == nape_callbacks_CbType.get_ANY_BODY()) return "ANY_BODY"; else if(this == nape_callbacks_CbType.get_ANY_SHAPE()) return "ANY_SHAPE"; else if(this == nape_callbacks_CbType.get_ANY_COMPOUND()) return "ANY_COMPOUND"; else if(this == nape_callbacks_CbType.get_ANY_CONSTRAINT()) return "ANY_CONSTRAINT"; else return "CbType#" + this.get_id();
	}
	,__class__: nape_callbacks_CbType
	,__properties__: {get_id:"get_id"}
};
var nape_callbacks_CbTypeIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.callbacks.CbTypeIterator"] = nape_callbacks_CbTypeIterator;
nape_callbacks_CbTypeIterator.__name__ = ["nape","callbacks","CbTypeIterator"];
nape_callbacks_CbTypeIterator.get = function(list) {
	var ret;
	if(nape_callbacks_CbTypeIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$CbTypeList.internal = true;
		var ret1 = new nape_callbacks_CbTypeIterator();
		zpp_$nape_util_ZPP_$CbTypeList.internal = false;
		ret = ret1;
	} else {
		var r = nape_callbacks_CbTypeIterator.zpp_pool;
		nape_callbacks_CbTypeIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_callbacks_CbTypeIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_callbacks_CbTypeIterator.zpp_pool;
			nape_callbacks_CbTypeIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_callbacks_CbTypeIterator
};
var nape_callbacks_CbTypeList = function() {
	this.zpp_inner = null;
	this.zpp_inner = new zpp_$nape_util_ZPP_$CbTypeList();
	this.zpp_inner.outer = this;
};
$hxClasses["nape.callbacks.CbTypeList"] = nape_callbacks_CbTypeList;
nape_callbacks_CbTypeList.__name__ = ["nape","callbacks","CbTypeList"];
nape_callbacks_CbTypeList.prototype = {
	get_length: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(false) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(true) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,at: function(index) {
		this.zpp_inner.valmod();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!false) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem().outer;
	}
	,iterator: function() {
		this.zpp_inner.valmod();
		return nape_callbacks_CbTypeIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_callbacks_CbTypeList
	,__properties__: {get_length:"get_length"}
};
var nape_callbacks_ConstraintCallback = function() {
	nape_callbacks_Callback.call(this);
};
$hxClasses["nape.callbacks.ConstraintCallback"] = nape_callbacks_ConstraintCallback;
nape_callbacks_ConstraintCallback.__name__ = ["nape","callbacks","ConstraintCallback"];
nape_callbacks_ConstraintCallback.__super__ = nape_callbacks_Callback;
nape_callbacks_ConstraintCallback.prototype = $extend(nape_callbacks_Callback.prototype,{
	get_constraint: function() {
		return this.zpp_inner.constraint.outer;
	}
	,toString: function() {
		var ret = "Cb:";
		ret += ["WAKE","SLEEP","BREAK"][this.zpp_inner.event - zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE];
		ret += ":" + this.get_constraint().toString();
		ret += " : listener: " + Std.string(this.get_listener());
		return ret;
	}
	,__class__: nape_callbacks_ConstraintCallback
	,__properties__: $extend(nape_callbacks_Callback.prototype.__properties__,{get_constraint:"get_constraint"})
});
var nape_callbacks_ConstraintListener = function() {
	this.zpp_inner_zn = null;
};
$hxClasses["nape.callbacks.ConstraintListener"] = nape_callbacks_ConstraintListener;
nape_callbacks_ConstraintListener.__name__ = ["nape","callbacks","ConstraintListener"];
nape_callbacks_ConstraintListener.__super__ = nape_callbacks_Listener;
nape_callbacks_ConstraintListener.prototype = $extend(nape_callbacks_Listener.prototype,{
	get_options: function() {
		return this.zpp_inner_zn.options.outer;
	}
	,__class__: nape_callbacks_ConstraintListener
	,__properties__: {get_options:"get_options"}
});
var nape_callbacks_InteractionCallback = function() {
	nape_callbacks_Callback.call(this);
};
$hxClasses["nape.callbacks.InteractionCallback"] = nape_callbacks_InteractionCallback;
nape_callbacks_InteractionCallback.__name__ = ["nape","callbacks","InteractionCallback"];
nape_callbacks_InteractionCallback.__super__ = nape_callbacks_Callback;
nape_callbacks_InteractionCallback.prototype = $extend(nape_callbacks_Callback.prototype,{
	get_int1: function() {
		return this.zpp_inner.int1.outer_i;
	}
	,get_int2: function() {
		return this.zpp_inner.int2.outer_i;
	}
	,get_arbiters: function() {
		return this.zpp_inner.wrap_arbiters;
	}
	,toString: function() {
		var ret = "Cb:";
		ret += ["BEGIN","END","","","","","ONGOING"][this.zpp_inner.event];
		ret += ":" + this.get_int1().toString() + "/" + this.get_int2().toString();
		ret += " : " + this.get_arbiters().toString();
		ret += " : listener: " + Std.string(this.get_listener());
		return ret;
	}
	,__class__: nape_callbacks_InteractionCallback
	,__properties__: $extend(nape_callbacks_Callback.prototype.__properties__,{get_arbiters:"get_arbiters",get_int2:"get_int2",get_int1:"get_int1"})
});
var nape_callbacks_InteractionListener = function(event,interactionType,options1,options2,handler,precedence) {
	if(precedence == null) precedence = 0;
	this.zpp_inner_zn = null;
	nape_callbacks_Listener.call(this);
	var xevent = -1;
	if(event == nape_callbacks_CbEvent.get_BEGIN()) xevent = zpp_$nape_util_ZPP_$Flags.id_CbEvent_BEGIN; else if(event == nape_callbacks_CbEvent.get_END()) xevent = zpp_$nape_util_ZPP_$Flags.id_CbEvent_END; else if(event == nape_callbacks_CbEvent.get_ONGOING()) xevent = zpp_$nape_util_ZPP_$Flags.id_CbEvent_ONGOING; else {
	}
	this.zpp_inner_zn = new zpp_$nape_callbacks_ZPP_$InteractionListener(zpp_$nape_callbacks_ZPP_$OptionType.argument(options1),zpp_$nape_callbacks_ZPP_$OptionType.argument(options2),xevent,zpp_$nape_util_ZPP_$Flags.id_ListenerType_INTERACTION);
	this.zpp_inner = this.zpp_inner_zn;
	this.zpp_inner.outer = this;
	this.zpp_inner_zn.outer_zni = this;
	this.zpp_inner.precedence = precedence;
	this.zpp_inner_zn.handleri = handler;
	this.set_interactionType(interactionType);
};
$hxClasses["nape.callbacks.InteractionListener"] = nape_callbacks_InteractionListener;
nape_callbacks_InteractionListener.__name__ = ["nape","callbacks","InteractionListener"];
nape_callbacks_InteractionListener.__super__ = nape_callbacks_Listener;
nape_callbacks_InteractionListener.prototype = $extend(nape_callbacks_Listener.prototype,{
	get_options1: function() {
		return this.zpp_inner_zn.options1.outer;
	}
	,get_options2: function() {
		return this.zpp_inner_zn.options2.outer;
	}
	,get_interactionType: function() {
		var ret = this.zpp_inner_zn.itype;
		if(ret == zpp_$nape_util_ZPP_$Flags.id_InteractionType_COLLISION) return nape_callbacks_InteractionType.get_COLLISION(); else if(ret == zpp_$nape_util_ZPP_$Flags.id_InteractionType_SENSOR) return nape_callbacks_InteractionType.get_SENSOR(); else if(ret == zpp_$nape_util_ZPP_$Flags.id_InteractionType_FLUID) return nape_callbacks_InteractionType.get_FLUID(); else if(ret == zpp_$nape_util_ZPP_$Flags.id_InteractionType_ANY) return nape_callbacks_InteractionType.get_ANY(); else return null;
	}
	,set_interactionType: function(interactionType) {
		if(this.get_interactionType() != interactionType) {
			var xtype;
			if(interactionType == nape_callbacks_InteractionType.get_COLLISION()) xtype = zpp_$nape_util_ZPP_$Flags.id_InteractionType_COLLISION; else if(interactionType == nape_callbacks_InteractionType.get_SENSOR()) xtype = zpp_$nape_util_ZPP_$Flags.id_InteractionType_SENSOR; else if(interactionType == nape_callbacks_InteractionType.get_FLUID()) xtype = zpp_$nape_util_ZPP_$Flags.id_InteractionType_FLUID; else xtype = zpp_$nape_util_ZPP_$Flags.id_InteractionType_ANY;
			this.zpp_inner_zn.setInteractionType(xtype);
		}
		return this.get_interactionType();
	}
	,__class__: nape_callbacks_InteractionListener
	,__properties__: {set_interactionType:"set_interactionType",get_interactionType:"get_interactionType",get_options2:"get_options2",get_options1:"get_options1"}
});
var nape_callbacks_InteractionType = function() {
};
$hxClasses["nape.callbacks.InteractionType"] = nape_callbacks_InteractionType;
nape_callbacks_InteractionType.__name__ = ["nape","callbacks","InteractionType"];
nape_callbacks_InteractionType.__properties__ = {get_ANY:"get_ANY",get_FLUID:"get_FLUID",get_SENSOR:"get_SENSOR",get_COLLISION:"get_COLLISION"}
nape_callbacks_InteractionType.get_COLLISION = function() {
	if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION = new nape_callbacks_InteractionType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION;
};
nape_callbacks_InteractionType.get_SENSOR = function() {
	if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR = new nape_callbacks_InteractionType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR;
};
nape_callbacks_InteractionType.get_FLUID = function() {
	if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID = new nape_callbacks_InteractionType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID;
};
nape_callbacks_InteractionType.get_ANY = function() {
	if(zpp_$nape_util_ZPP_$Flags.InteractionType_ANY == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.InteractionType_ANY = new nape_callbacks_InteractionType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.InteractionType_ANY;
};
nape_callbacks_InteractionType.prototype = {
	toString: function() {
		if(false) return ""; else if(this == nape_callbacks_InteractionType.get_COLLISION()) return "COLLISION"; else if(this == nape_callbacks_InteractionType.get_SENSOR()) return "SENSOR"; else if(this == nape_callbacks_InteractionType.get_FLUID()) return "FLUID"; else if(this == nape_callbacks_InteractionType.get_ANY()) return "ANY"; else return "";
	}
	,__class__: nape_callbacks_InteractionType
};
var nape_callbacks_ListenerIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.callbacks.ListenerIterator"] = nape_callbacks_ListenerIterator;
nape_callbacks_ListenerIterator.__name__ = ["nape","callbacks","ListenerIterator"];
nape_callbacks_ListenerIterator.get = function(list) {
	var ret;
	if(nape_callbacks_ListenerIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$ListenerList.internal = true;
		var ret1 = new nape_callbacks_ListenerIterator();
		zpp_$nape_util_ZPP_$ListenerList.internal = false;
		ret = ret1;
	} else {
		var r = nape_callbacks_ListenerIterator.zpp_pool;
		nape_callbacks_ListenerIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_callbacks_ListenerIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_callbacks_ListenerIterator.zpp_pool;
			nape_callbacks_ListenerIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_callbacks_ListenerIterator
};
var nape_callbacks_ListenerList = function() {
	this.zpp_inner = null;
	this.zpp_inner = new zpp_$nape_util_ZPP_$ListenerList();
	this.zpp_inner.outer = this;
};
$hxClasses["nape.callbacks.ListenerList"] = nape_callbacks_ListenerList;
nape_callbacks_ListenerList.__name__ = ["nape","callbacks","ListenerList"];
nape_callbacks_ListenerList.prototype = {
	get_length: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(false) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(true) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,at: function(index) {
		this.zpp_inner.valmod();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!false) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem().outer;
	}
	,push: function(obj) {
		this.zpp_inner.modify_test();
		this.zpp_inner.valmod();
		var cont;
		if(this.zpp_inner.adder != null) cont = this.zpp_inner.adder(obj); else cont = true;
		if(cont) {
			if(this.zpp_inner.reverse_flag) this.zpp_inner.inner.add(obj.zpp_inner); else {
				if(this.zpp_inner.push_ite == null) if(this.empty()) this.zpp_inner.push_ite = null; else this.zpp_inner.push_ite = this.zpp_inner.inner.iterator_at(this.get_length() - 1);
				this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner);
			}
			this.zpp_inner.invalidate();
			if(this.zpp_inner.post_adder != null) this.zpp_inner.post_adder(obj);
		}
		return cont;
	}
	,unshift: function(obj) {
		this.zpp_inner.modify_test();
		this.zpp_inner.valmod();
		var cont;
		if(this.zpp_inner.adder != null) cont = this.zpp_inner.adder(obj); else cont = true;
		if(cont) {
			if(this.zpp_inner.reverse_flag) {
				if(this.zpp_inner.push_ite == null) if(this.empty()) this.zpp_inner.push_ite = null; else this.zpp_inner.push_ite = this.zpp_inner.inner.iterator_at(this.get_length() - 1);
				this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner);
			} else this.zpp_inner.inner.add(obj.zpp_inner);
			this.zpp_inner.invalidate();
			if(this.zpp_inner.post_adder != null) this.zpp_inner.post_adder(obj);
		}
		return cont;
	}
	,add: function(obj) {
		if(this.zpp_inner.reverse_flag) return this.push(obj); else return this.unshift(obj);
	}
	,remove: function(obj) {
		this.zpp_inner.modify_test();
		this.zpp_inner.valmod();
		var ret;
		ret = false;
		var cx_ite = this.zpp_inner.inner.begin();
		while(cx_ite != null) {
			var x = cx_ite.elem();
			if(x == obj.zpp_inner) {
				ret = true;
				break;
			}
			cx_ite = cx_ite.next;
		}
		if(ret) {
			if(this.zpp_inner.subber != null) this.zpp_inner.subber(obj);
			if(!this.zpp_inner.dontremove) this.zpp_inner.inner.remove(obj.zpp_inner);
			this.zpp_inner.invalidate();
		}
		return ret;
	}
	,empty: function() {
		if(false) return this.get_length() == 0; else return this.zpp_inner.inner.empty();
	}
	,iterator: function() {
		this.zpp_inner.valmod();
		return nape_callbacks_ListenerIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_callbacks_ListenerList
	,__properties__: {get_length:"get_length"}
};
var nape_callbacks_ListenerType = function() {
};
$hxClasses["nape.callbacks.ListenerType"] = nape_callbacks_ListenerType;
nape_callbacks_ListenerType.__name__ = ["nape","callbacks","ListenerType"];
nape_callbacks_ListenerType.__properties__ = {get_PRE:"get_PRE",get_INTERACTION:"get_INTERACTION",get_CONSTRAINT:"get_CONSTRAINT",get_BODY:"get_BODY"}
nape_callbacks_ListenerType.get_BODY = function() {
	if(zpp_$nape_util_ZPP_$Flags.ListenerType_BODY == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.ListenerType_BODY = new nape_callbacks_ListenerType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.ListenerType_BODY;
};
nape_callbacks_ListenerType.get_CONSTRAINT = function() {
	if(zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT = new nape_callbacks_ListenerType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT;
};
nape_callbacks_ListenerType.get_INTERACTION = function() {
	if(zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION = new nape_callbacks_ListenerType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION;
};
nape_callbacks_ListenerType.get_PRE = function() {
	if(zpp_$nape_util_ZPP_$Flags.ListenerType_PRE == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.ListenerType_PRE = new nape_callbacks_ListenerType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.ListenerType_PRE;
};
nape_callbacks_ListenerType.prototype = {
	toString: function() {
		if(false) return ""; else if(this == nape_callbacks_ListenerType.get_BODY()) return "BODY"; else if(this == nape_callbacks_ListenerType.get_CONSTRAINT()) return "CONSTRAINT"; else if(this == nape_callbacks_ListenerType.get_INTERACTION()) return "INTERACTION"; else if(this == nape_callbacks_ListenerType.get_PRE()) return "PRE"; else return "";
	}
	,__class__: nape_callbacks_ListenerType
};
var nape_callbacks_OptionType = function(includes,excludes) {
	this.zpp_inner = null;
	this.zpp_inner = new zpp_$nape_callbacks_ZPP_$OptionType();
	this.zpp_inner.outer = this;
	if(includes != null) this.including(includes);
	if(excludes != null) this.excluding(excludes);
};
$hxClasses["nape.callbacks.OptionType"] = nape_callbacks_OptionType;
nape_callbacks_OptionType.__name__ = ["nape","callbacks","OptionType"];
nape_callbacks_OptionType.prototype = {
	get_includes: function() {
		if(this.zpp_inner.wrap_includes == null) this.zpp_inner.setup_includes();
		return this.zpp_inner.wrap_includes;
	}
	,get_excludes: function() {
		if(this.zpp_inner.wrap_excludes == null) this.zpp_inner.setup_excludes();
		return this.zpp_inner.wrap_excludes;
	}
	,including: function(includes) {
		this.zpp_inner.append(this.zpp_inner.includes,includes);
		return this;
	}
	,excluding: function(excludes) {
		this.zpp_inner.append(this.zpp_inner.excludes,excludes);
		return this;
	}
	,toString: function() {
		var inc = this.get_includes().toString();
		var exc = this.get_excludes().toString();
		return "@{" + inc + " excluding " + exc + "}";
	}
	,__class__: nape_callbacks_OptionType
	,__properties__: {get_excludes:"get_excludes",get_includes:"get_includes"}
};
var nape_callbacks_PreCallback = function() {
	nape_callbacks_Callback.call(this);
};
$hxClasses["nape.callbacks.PreCallback"] = nape_callbacks_PreCallback;
nape_callbacks_PreCallback.__name__ = ["nape","callbacks","PreCallback"];
nape_callbacks_PreCallback.__super__ = nape_callbacks_Callback;
nape_callbacks_PreCallback.prototype = $extend(nape_callbacks_Callback.prototype,{
	get_arbiter: function() {
		return this.zpp_inner.pre_arbiter.wrapper();
	}
	,get_int1: function() {
		return this.zpp_inner.int1.outer_i;
	}
	,get_int2: function() {
		return this.zpp_inner.int2.outer_i;
	}
	,toString: function() {
		var ret = "Cb:PRE:";
		ret += ":" + this.get_int1().toString() + "/" + this.get_int2().toString();
		ret += " : " + this.get_arbiter().toString();
		ret += " : listnener: " + Std.string(this.get_listener());
		return ret;
	}
	,__class__: nape_callbacks_PreCallback
	,__properties__: $extend(nape_callbacks_Callback.prototype.__properties__,{get_int2:"get_int2",get_int1:"get_int1",get_arbiter:"get_arbiter"})
});
var nape_callbacks_PreFlag = function() {
};
$hxClasses["nape.callbacks.PreFlag"] = nape_callbacks_PreFlag;
nape_callbacks_PreFlag.__name__ = ["nape","callbacks","PreFlag"];
nape_callbacks_PreFlag.__properties__ = {get_IGNORE_ONCE:"get_IGNORE_ONCE",get_ACCEPT_ONCE:"get_ACCEPT_ONCE",get_IGNORE:"get_IGNORE",get_ACCEPT:"get_ACCEPT"}
nape_callbacks_PreFlag.get_ACCEPT = function() {
	if(zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT = new nape_callbacks_PreFlag();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT;
};
nape_callbacks_PreFlag.get_IGNORE = function() {
	if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE = new nape_callbacks_PreFlag();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE;
};
nape_callbacks_PreFlag.get_ACCEPT_ONCE = function() {
	if(zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE = new nape_callbacks_PreFlag();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE;
};
nape_callbacks_PreFlag.get_IGNORE_ONCE = function() {
	if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE = new nape_callbacks_PreFlag();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE;
};
nape_callbacks_PreFlag.prototype = {
	toString: function() {
		if(false) return ""; else if(this == nape_callbacks_PreFlag.get_ACCEPT()) return "ACCEPT"; else if(this == nape_callbacks_PreFlag.get_IGNORE()) return "IGNORE"; else if(this == nape_callbacks_PreFlag.get_ACCEPT_ONCE()) return "ACCEPT_ONCE"; else if(this == nape_callbacks_PreFlag.get_IGNORE_ONCE()) return "IGNORE_ONCE"; else return "";
	}
	,__class__: nape_callbacks_PreFlag
};
var nape_callbacks_PreListener = function() {
	this.zpp_inner_zn = null;
};
$hxClasses["nape.callbacks.PreListener"] = nape_callbacks_PreListener;
nape_callbacks_PreListener.__name__ = ["nape","callbacks","PreListener"];
nape_callbacks_PreListener.__super__ = nape_callbacks_Listener;
nape_callbacks_PreListener.prototype = $extend(nape_callbacks_Listener.prototype,{
	get_options1: function() {
		return this.zpp_inner_zn.options1.outer;
	}
	,get_options2: function() {
		return this.zpp_inner_zn.options2.outer;
	}
	,__class__: nape_callbacks_PreListener
	,__properties__: {get_options2:"get_options2",get_options1:"get_options1"}
});
var nape_constraint_Constraint = function() { };
$hxClasses["nape.constraint.Constraint"] = nape_constraint_Constraint;
nape_constraint_Constraint.__name__ = ["nape","constraint","Constraint"];
nape_constraint_Constraint.prototype = {
	toString: function() {
		return "{Constraint}";
	}
	,__class__: nape_constraint_Constraint
};
var nape_constraint_ConstraintIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.constraint.ConstraintIterator"] = nape_constraint_ConstraintIterator;
nape_constraint_ConstraintIterator.__name__ = ["nape","constraint","ConstraintIterator"];
nape_constraint_ConstraintIterator.get = function(list) {
	var ret;
	if(nape_constraint_ConstraintIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$ConstraintList.internal = true;
		var ret1 = new nape_constraint_ConstraintIterator();
		zpp_$nape_util_ZPP_$ConstraintList.internal = false;
		ret = ret1;
	} else {
		var r = nape_constraint_ConstraintIterator.zpp_pool;
		nape_constraint_ConstraintIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_constraint_ConstraintIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_constraint_ConstraintIterator.zpp_pool;
			nape_constraint_ConstraintIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_constraint_ConstraintIterator
};
var nape_constraint_ConstraintList = function() {
	this.zpp_inner = null;
	this.zpp_inner = new zpp_$nape_util_ZPP_$ConstraintList();
	this.zpp_inner.outer = this;
};
$hxClasses["nape.constraint.ConstraintList"] = nape_constraint_ConstraintList;
nape_constraint_ConstraintList.__name__ = ["nape","constraint","ConstraintList"];
nape_constraint_ConstraintList.prototype = {
	get_length: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(false) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(true) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,at: function(index) {
		this.zpp_inner.valmod();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!false) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem().outer;
	}
	,remove: function(obj) {
		this.zpp_inner.modify_test();
		this.zpp_inner.valmod();
		var ret;
		ret = false;
		var cx_ite = this.zpp_inner.inner.begin();
		while(cx_ite != null) {
			var x = cx_ite.elem();
			if(x == obj.zpp_inner) {
				ret = true;
				break;
			}
			cx_ite = cx_ite.next;
		}
		if(ret) {
			if(this.zpp_inner.subber != null) this.zpp_inner.subber(obj);
			if(!this.zpp_inner.dontremove) this.zpp_inner.inner.remove(obj.zpp_inner);
			this.zpp_inner.invalidate();
		}
		return ret;
	}
	,iterator: function() {
		this.zpp_inner.valmod();
		return nape_constraint_ConstraintIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_constraint_ConstraintList
	,__properties__: {get_length:"get_length"}
};
var nape_dynamics_Arbiter = function() {
	this.zpp_inner = null;
	if(!zpp_$nape_dynamics_ZPP_$Arbiter.internal) {
	}
};
$hxClasses["nape.dynamics.Arbiter"] = nape_dynamics_Arbiter;
nape_dynamics_Arbiter.__name__ = ["nape","dynamics","Arbiter"];
nape_dynamics_Arbiter.prototype = {
	isCollisionArbiter: function() {
		return this.zpp_inner.type == zpp_$nape_dynamics_ZPP_$Arbiter.COL;
	}
	,isFluidArbiter: function() {
		return this.zpp_inner.type == zpp_$nape_dynamics_ZPP_$Arbiter.FLUID;
	}
	,get_shape1: function() {
		if(this.zpp_inner.ws1.id > this.zpp_inner.ws2.id) return this.zpp_inner.ws2.outer; else return this.zpp_inner.ws1.outer;
	}
	,get_shape2: function() {
		if(this.zpp_inner.ws1.id > this.zpp_inner.ws2.id) return this.zpp_inner.ws1.outer; else return this.zpp_inner.ws2.outer;
	}
	,get_state: function() {
		var _g = this.zpp_inner.immState;
		var x = _g;
		if(x == (zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT | zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS)) return nape_callbacks_PreFlag.get_ACCEPT(); else {
			var x1 = _g;
			switch(_g) {
			case 1:
				return nape_callbacks_PreFlag.get_ACCEPT_ONCE();
			default:
				if(x1 == (zpp_$nape_util_ZPP_$Flags.id_ImmState_IGNORE | zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS)) return nape_callbacks_PreFlag.get_IGNORE(); else return nape_callbacks_PreFlag.get_IGNORE_ONCE();
			}
		}
	}
	,toString: function() {
		var ret;
		if(this.isCollisionArbiter()) ret = "CollisionArbiter"; else if(this.isFluidArbiter()) ret = "FluidArbiter"; else ret = "SensorArbiter";
		if(this.zpp_inner.cleared) return ret + "(object-pooled)"; else return ret + "(" + this.get_shape1().toString() + "|" + this.get_shape2().toString() + ")" + (this.isCollisionArbiter()?"[" + ["SD","DD"][this.zpp_inner.colarb.stat?0:1] + "]":"") + "<-" + this.get_state().toString();
	}
	,__class__: nape_dynamics_Arbiter
	,__properties__: {get_state:"get_state",get_shape2:"get_shape2",get_shape1:"get_shape1"}
};
var nape_dynamics_ArbiterIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.dynamics.ArbiterIterator"] = nape_dynamics_ArbiterIterator;
nape_dynamics_ArbiterIterator.__name__ = ["nape","dynamics","ArbiterIterator"];
nape_dynamics_ArbiterIterator.get = function(list) {
	var ret;
	if(nape_dynamics_ArbiterIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$ArbiterList.internal = true;
		var ret1 = new nape_dynamics_ArbiterIterator();
		zpp_$nape_util_ZPP_$ArbiterList.internal = false;
		ret = ret1;
	} else {
		var r = nape_dynamics_ArbiterIterator.zpp_pool;
		nape_dynamics_ArbiterIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_dynamics_ArbiterIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_dynamics_ArbiterIterator.zpp_pool;
			nape_dynamics_ArbiterIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_dynamics_ArbiterIterator
};
var nape_dynamics_ArbiterList = function() {
	this.zpp_inner = null;
	this.zpp_inner = new zpp_$nape_util_ZPP_$ArbiterList();
	this.zpp_inner.outer = this;
};
$hxClasses["nape.dynamics.ArbiterList"] = nape_dynamics_ArbiterList;
nape_dynamics_ArbiterList.__name__ = ["nape","dynamics","ArbiterList"];
nape_dynamics_ArbiterList.prototype = {
	get_length: function() {
		return this.zpp_gl();
	}
	,zpp_gl: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(true) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(i.active) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,zpp_vm: function() {
		this.zpp_inner.valmod();
	}
	,at: function(index) {
		this.zpp_vm();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!true) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(x.active) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(x1.active) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem().wrapper();
	}
	,iterator: function() {
		this.zpp_vm();
		return nape_dynamics_ArbiterIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_dynamics_ArbiterList
	,__properties__: {get_length:"get_length"}
};
var nape_dynamics_ArbiterType = function() {
};
$hxClasses["nape.dynamics.ArbiterType"] = nape_dynamics_ArbiterType;
nape_dynamics_ArbiterType.__name__ = ["nape","dynamics","ArbiterType"];
nape_dynamics_ArbiterType.__properties__ = {get_FLUID:"get_FLUID",get_SENSOR:"get_SENSOR",get_COLLISION:"get_COLLISION"}
nape_dynamics_ArbiterType.get_COLLISION = function() {
	if(zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION = new nape_dynamics_ArbiterType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION;
};
nape_dynamics_ArbiterType.get_SENSOR = function() {
	if(zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR = new nape_dynamics_ArbiterType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR;
};
nape_dynamics_ArbiterType.get_FLUID = function() {
	if(zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID = new nape_dynamics_ArbiterType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID;
};
nape_dynamics_ArbiterType.prototype = {
	toString: function() {
		if(false) return ""; else if(this == nape_dynamics_ArbiterType.get_COLLISION()) return "COLLISION"; else if(this == nape_dynamics_ArbiterType.get_SENSOR()) return "SENSOR"; else if(this == nape_dynamics_ArbiterType.get_FLUID()) return "FLUID"; else return "";
	}
	,__class__: nape_dynamics_ArbiterType
};
var nape_dynamics_CollisionArbiter = function() {
	nape_dynamics_Arbiter.call(this);
};
$hxClasses["nape.dynamics.CollisionArbiter"] = nape_dynamics_CollisionArbiter;
nape_dynamics_CollisionArbiter.__name__ = ["nape","dynamics","CollisionArbiter"];
nape_dynamics_CollisionArbiter.__super__ = nape_dynamics_Arbiter;
nape_dynamics_CollisionArbiter.prototype = $extend(nape_dynamics_Arbiter.prototype,{
	__class__: nape_dynamics_CollisionArbiter
});
var nape_dynamics_Contact = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.dynamics.Contact"] = nape_dynamics_Contact;
nape_dynamics_Contact.__name__ = ["nape","dynamics","Contact"];
nape_dynamics_Contact.prototype = {
	toString: function() {
		if(this.zpp_inner.arbiter == null || this.zpp_inner.arbiter.cleared) return "{object-pooled}"; else return "{Contact}";
	}
	,__class__: nape_dynamics_Contact
};
var nape_dynamics_ContactIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.dynamics.ContactIterator"] = nape_dynamics_ContactIterator;
nape_dynamics_ContactIterator.__name__ = ["nape","dynamics","ContactIterator"];
nape_dynamics_ContactIterator.get = function(list) {
	var ret;
	if(nape_dynamics_ContactIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$ContactList.internal = true;
		var ret1 = new nape_dynamics_ContactIterator();
		zpp_$nape_util_ZPP_$ContactList.internal = false;
		ret = ret1;
	} else {
		var r = nape_dynamics_ContactIterator.zpp_pool;
		nape_dynamics_ContactIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_dynamics_ContactIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_dynamics_ContactIterator.zpp_pool;
			nape_dynamics_ContactIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_dynamics_ContactIterator
};
var nape_dynamics_ContactList = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.dynamics.ContactList"] = nape_dynamics_ContactList;
nape_dynamics_ContactList.__name__ = ["nape","dynamics","ContactList"];
nape_dynamics_ContactList.prototype = {
	get_length: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(true) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(i.active && i.arbiter.active) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,at: function(index) {
		this.zpp_inner.valmod();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!true) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(x.active && x.arbiter.active) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(x1.active && x1.arbiter.active) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem().wrapper();
	}
	,iterator: function() {
		this.zpp_inner.valmod();
		return nape_dynamics_ContactIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_dynamics_ContactList
	,__properties__: {get_length:"get_length"}
};
var nape_dynamics_FluidArbiter = function() {
	nape_dynamics_Arbiter.call(this);
};
$hxClasses["nape.dynamics.FluidArbiter"] = nape_dynamics_FluidArbiter;
nape_dynamics_FluidArbiter.__name__ = ["nape","dynamics","FluidArbiter"];
nape_dynamics_FluidArbiter.__super__ = nape_dynamics_Arbiter;
nape_dynamics_FluidArbiter.prototype = $extend(nape_dynamics_Arbiter.prototype,{
	__class__: nape_dynamics_FluidArbiter
});
var nape_dynamics_InteractionFilter = function(collisionGroup,collisionMask,sensorGroup,sensorMask,fluidGroup,fluidMask) {
	if(fluidMask == null) fluidMask = -1;
	if(fluidGroup == null) fluidGroup = 1;
	if(sensorMask == null) sensorMask = -1;
	if(sensorGroup == null) sensorGroup = 1;
	if(collisionMask == null) collisionMask = -1;
	if(collisionGroup == null) collisionGroup = 1;
	this.zpp_inner = null;
	if(zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool == null) this.zpp_inner = new zpp_$nape_dynamics_ZPP_$InteractionFilter(); else {
		this.zpp_inner = zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool;
		zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool = this.zpp_inner.next;
		this.zpp_inner.next = null;
	}
	this.zpp_inner.alloc();
	this.zpp_inner.outer = this;
	this.set_collisionGroup(collisionGroup);
	this.set_collisionMask(collisionMask);
	this.set_sensorGroup(sensorGroup);
	this.set_sensorMask(sensorMask);
	this.set_fluidGroup(fluidGroup);
	this.set_fluidMask(fluidMask);
};
$hxClasses["nape.dynamics.InteractionFilter"] = nape_dynamics_InteractionFilter;
nape_dynamics_InteractionFilter.__name__ = ["nape","dynamics","InteractionFilter"];
nape_dynamics_InteractionFilter.prototype = {
	get_collisionGroup: function() {
		return this.zpp_inner.collisionGroup;
	}
	,set_collisionGroup: function(collisionGroup) {
		if(this.get_collisionGroup() != collisionGroup) {
			this.zpp_inner.collisionGroup = collisionGroup;
			this.zpp_inner.invalidate();
		}
		return this.get_collisionGroup();
	}
	,get_collisionMask: function() {
		return this.zpp_inner.collisionMask;
	}
	,set_collisionMask: function(collisionMask) {
		if(this.get_collisionMask() != collisionMask) {
			this.zpp_inner.collisionMask = collisionMask;
			this.zpp_inner.invalidate();
		}
		return this.get_collisionMask();
	}
	,get_sensorGroup: function() {
		return this.zpp_inner.sensorGroup;
	}
	,set_sensorGroup: function(sensorGroup) {
		if(this.get_sensorGroup() != sensorGroup) {
			this.zpp_inner.sensorGroup = sensorGroup;
			this.zpp_inner.invalidate();
		}
		return this.get_sensorGroup();
	}
	,get_sensorMask: function() {
		return this.zpp_inner.sensorMask;
	}
	,set_sensorMask: function(sensorMask) {
		if(this.get_sensorMask() != sensorMask) {
			this.zpp_inner.sensorMask = sensorMask;
			this.zpp_inner.invalidate();
		}
		return this.get_sensorMask();
	}
	,get_fluidGroup: function() {
		return this.zpp_inner.fluidGroup;
	}
	,set_fluidGroup: function(fluidGroup) {
		if(this.get_fluidGroup() != fluidGroup) {
			this.zpp_inner.fluidGroup = fluidGroup;
			this.zpp_inner.invalidate();
		}
		return this.get_fluidGroup();
	}
	,get_fluidMask: function() {
		return this.zpp_inner.fluidMask;
	}
	,set_fluidMask: function(fluidMask) {
		if(this.get_fluidMask() != fluidMask) {
			this.zpp_inner.fluidMask = fluidMask;
			this.zpp_inner.invalidate();
		}
		return this.get_fluidMask();
	}
	,__class__: nape_dynamics_InteractionFilter
	,__properties__: {set_fluidMask:"set_fluidMask",get_fluidMask:"get_fluidMask",set_fluidGroup:"set_fluidGroup",get_fluidGroup:"get_fluidGroup",set_sensorMask:"set_sensorMask",get_sensorMask:"get_sensorMask",set_sensorGroup:"set_sensorGroup",get_sensorGroup:"get_sensorGroup",set_collisionMask:"set_collisionMask",get_collisionMask:"get_collisionMask",set_collisionGroup:"set_collisionGroup",get_collisionGroup:"get_collisionGroup"}
};
var nape_dynamics_InteractionGroup = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.dynamics.InteractionGroup"] = nape_dynamics_InteractionGroup;
nape_dynamics_InteractionGroup.__name__ = ["nape","dynamics","InteractionGroup"];
nape_dynamics_InteractionGroup.prototype = {
	get_ignore: function() {
		return this.zpp_inner.ignore;
	}
	,toString: function() {
		var ret = "InteractionGroup";
		if(this.get_ignore()) ret += ":ignore";
		return ret;
	}
	,__class__: nape_dynamics_InteractionGroup
	,__properties__: {get_ignore:"get_ignore"}
};
var nape_dynamics_InteractionGroupIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.dynamics.InteractionGroupIterator"] = nape_dynamics_InteractionGroupIterator;
nape_dynamics_InteractionGroupIterator.__name__ = ["nape","dynamics","InteractionGroupIterator"];
nape_dynamics_InteractionGroupIterator.get = function(list) {
	var ret;
	if(nape_dynamics_InteractionGroupIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$InteractionGroupList.internal = true;
		var ret1 = new nape_dynamics_InteractionGroupIterator();
		zpp_$nape_util_ZPP_$InteractionGroupList.internal = false;
		ret = ret1;
	} else {
		var r = nape_dynamics_InteractionGroupIterator.zpp_pool;
		nape_dynamics_InteractionGroupIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_dynamics_InteractionGroupIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_dynamics_InteractionGroupIterator.zpp_pool;
			nape_dynamics_InteractionGroupIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_dynamics_InteractionGroupIterator
};
var nape_dynamics_InteractionGroupList = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.dynamics.InteractionGroupList"] = nape_dynamics_InteractionGroupList;
nape_dynamics_InteractionGroupList.__name__ = ["nape","dynamics","InteractionGroupList"];
nape_dynamics_InteractionGroupList.prototype = {
	get_length: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(false) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(true) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,at: function(index) {
		this.zpp_inner.valmod();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!false) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem().outer;
	}
	,iterator: function() {
		this.zpp_inner.valmod();
		return nape_dynamics_InteractionGroupIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_dynamics_InteractionGroupList
	,__properties__: {get_length:"get_length"}
};
var nape_geom_AABB = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.geom.AABB"] = nape_geom_AABB;
nape_geom_AABB.__name__ = ["nape","geom","AABB"];
nape_geom_AABB.prototype = {
	toString: function() {
		this.zpp_inner.validate();
		return this.zpp_inner.toString();
	}
	,__class__: nape_geom_AABB
};
var nape_geom_ConvexResult = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.geom.ConvexResult"] = nape_geom_ConvexResult;
nape_geom_ConvexResult.__name__ = ["nape","geom","ConvexResult"];
nape_geom_ConvexResult.prototype = {
	get_toi: function() {
		return this.zpp_inner.toiDistance;
	}
	,get_shape: function() {
		return this.zpp_inner.shape;
	}
	,toString: function() {
		return "{ shape: " + Std.string(this.get_shape()) + " toi: " + this.get_toi() + " }";
	}
	,__class__: nape_geom_ConvexResult
	,__properties__: {get_shape:"get_shape",get_toi:"get_toi"}
};
var nape_geom_ConvexResultIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.geom.ConvexResultIterator"] = nape_geom_ConvexResultIterator;
nape_geom_ConvexResultIterator.__name__ = ["nape","geom","ConvexResultIterator"];
nape_geom_ConvexResultIterator.get = function(list) {
	var ret;
	if(nape_geom_ConvexResultIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$ConvexResultList.internal = true;
		var ret1 = new nape_geom_ConvexResultIterator();
		zpp_$nape_util_ZPP_$ConvexResultList.internal = false;
		ret = ret1;
	} else {
		var r = nape_geom_ConvexResultIterator.zpp_pool;
		nape_geom_ConvexResultIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_geom_ConvexResultIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_geom_ConvexResultIterator.zpp_pool;
			nape_geom_ConvexResultIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_geom_ConvexResultIterator
};
var nape_geom_ConvexResultList = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.geom.ConvexResultList"] = nape_geom_ConvexResultList;
nape_geom_ConvexResultList.__name__ = ["nape","geom","ConvexResultList"];
nape_geom_ConvexResultList.prototype = {
	get_length: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(false) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(true) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,at: function(index) {
		this.zpp_inner.valmod();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!false) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem();
	}
	,iterator: function() {
		this.zpp_inner.valmod();
		return nape_geom_ConvexResultIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_geom_ConvexResultList
	,__properties__: {get_length:"get_length"}
};
var nape_geom_GeomPoly = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.geom.GeomPoly"] = nape_geom_GeomPoly;
nape_geom_GeomPoly.__name__ = ["nape","geom","GeomPoly"];
nape_geom_GeomPoly.prototype = {
	toString: function() {
		var ret = "GeomPoly[";
		var F = this.zpp_inner.vertices;
		var L = this.zpp_inner.vertices;
		if(F != null) {
			var nite = F;
			do {
				var v = nite;
				if(v != this.zpp_inner.vertices) ret += ",";
				ret += "{" + v.x + "," + v.y + "}";
				nite = nite.next;
			} while(nite != L);
		}
		return ret + "]";
	}
	,__class__: nape_geom_GeomPoly
};
var nape_geom_GeomPolyIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.geom.GeomPolyIterator"] = nape_geom_GeomPolyIterator;
nape_geom_GeomPolyIterator.__name__ = ["nape","geom","GeomPolyIterator"];
nape_geom_GeomPolyIterator.get = function(list) {
	var ret;
	if(nape_geom_GeomPolyIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$GeomPolyList.internal = true;
		var ret1 = new nape_geom_GeomPolyIterator();
		zpp_$nape_util_ZPP_$GeomPolyList.internal = false;
		ret = ret1;
	} else {
		var r = nape_geom_GeomPolyIterator.zpp_pool;
		nape_geom_GeomPolyIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_geom_GeomPolyIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_geom_GeomPolyIterator.zpp_pool;
			nape_geom_GeomPolyIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_geom_GeomPolyIterator
};
var nape_geom_GeomPolyList = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.geom.GeomPolyList"] = nape_geom_GeomPolyList;
nape_geom_GeomPolyList.__name__ = ["nape","geom","GeomPolyList"];
nape_geom_GeomPolyList.prototype = {
	get_length: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(false) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(true) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,at: function(index) {
		this.zpp_inner.valmod();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!false) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem().outer;
	}
	,iterator: function() {
		this.zpp_inner.valmod();
		return nape_geom_GeomPolyIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_geom_GeomPolyList
	,__properties__: {get_length:"get_length"}
};
var nape_geom_Mat23 = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.geom.Mat23"] = nape_geom_Mat23;
nape_geom_Mat23.__name__ = ["nape","geom","Mat23"];
nape_geom_Mat23.prototype = {
	get_a: function() {
		return this.zpp_inner.a;
	}
	,get_b: function() {
		return this.zpp_inner.b;
	}
	,get_c: function() {
		return this.zpp_inner.c;
	}
	,get_d: function() {
		return this.zpp_inner.d;
	}
	,get_tx: function() {
		return this.zpp_inner.tx;
	}
	,get_ty: function() {
		return this.zpp_inner.ty;
	}
	,toString: function() {
		return "{ a: " + this.get_a() + " b: " + this.get_b() + " c: " + this.get_c() + " d: " + this.get_d() + " tx: " + this.get_tx() + " ty: " + this.get_ty() + " }";
	}
	,__class__: nape_geom_Mat23
	,__properties__: {get_ty:"get_ty",get_tx:"get_tx",get_d:"get_d",get_c:"get_c",get_b:"get_b",get_a:"get_a"}
};
var nape_geom_MatMN = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.geom.MatMN"] = nape_geom_MatMN;
nape_geom_MatMN.__name__ = ["nape","geom","MatMN"];
nape_geom_MatMN.prototype = {
	get_rows: function() {
		return this.zpp_inner.m;
	}
	,get_cols: function() {
		return this.zpp_inner.n;
	}
	,x: function(row,col) {
		return this.zpp_inner.x[row * this.get_cols() + col];
	}
	,toString: function() {
		var ret = "{ ";
		var fst = true;
		var _g1 = 0;
		var _g = this.get_rows();
		while(_g1 < _g) {
			var i = _g1++;
			if(!fst) ret += "; ";
			fst = false;
			var _g3 = 0;
			var _g2 = this.get_cols();
			while(_g3 < _g2) {
				var j = _g3++;
				ret += this.x(i,j) + " ";
			}
		}
		ret += "}";
		return ret;
	}
	,__class__: nape_geom_MatMN
	,__properties__: {get_cols:"get_cols",get_rows:"get_rows"}
};
var nape_geom_RayResult = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.geom.RayResult"] = nape_geom_RayResult;
nape_geom_RayResult.__name__ = ["nape","geom","RayResult"];
nape_geom_RayResult.prototype = {
	get_distance: function() {
		return this.zpp_inner.toiDistance;
	}
	,get_inner: function() {
		return this.zpp_inner.inner;
	}
	,get_shape: function() {
		return this.zpp_inner.shape;
	}
	,toString: function() {
		return "{ shape: " + Std.string(this.get_shape()) + " distance: " + this.get_distance() + " ?inner: " + Std.string(this.get_inner()) + " }";
	}
	,__class__: nape_geom_RayResult
	,__properties__: {get_shape:"get_shape",get_inner:"get_inner",get_distance:"get_distance"}
};
var nape_geom_RayResultIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.geom.RayResultIterator"] = nape_geom_RayResultIterator;
nape_geom_RayResultIterator.__name__ = ["nape","geom","RayResultIterator"];
nape_geom_RayResultIterator.get = function(list) {
	var ret;
	if(nape_geom_RayResultIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$RayResultList.internal = true;
		var ret1 = new nape_geom_RayResultIterator();
		zpp_$nape_util_ZPP_$RayResultList.internal = false;
		ret = ret1;
	} else {
		var r = nape_geom_RayResultIterator.zpp_pool;
		nape_geom_RayResultIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_geom_RayResultIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_geom_RayResultIterator.zpp_pool;
			nape_geom_RayResultIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_geom_RayResultIterator
};
var nape_geom_RayResultList = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.geom.RayResultList"] = nape_geom_RayResultList;
nape_geom_RayResultList.__name__ = ["nape","geom","RayResultList"];
nape_geom_RayResultList.prototype = {
	get_length: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(false) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(true) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,at: function(index) {
		this.zpp_inner.valmod();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!false) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem();
	}
	,iterator: function() {
		this.zpp_inner.valmod();
		return nape_geom_RayResultIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_geom_RayResultList
	,__properties__: {get_length:"get_length"}
};
var nape_geom_Vec2 = function(x,y) {
	if(y == null) y = 0;
	if(x == null) x = 0;
	this.zpp_pool = null;
	this.zpp_inner = null;
	this.zpp_inner = zpp_$nape_geom_ZPP_$Vec2.get(x,y);
	this.zpp_inner.outer = this;
};
$hxClasses["nape.geom.Vec2"] = nape_geom_Vec2;
nape_geom_Vec2.__name__ = ["nape","geom","Vec2"];
nape_geom_Vec2.weak = function(x,y) {
	if(y == null) y = 0;
	if(x == null) x = 0;
	return nape_geom_Vec2.get(x,y,true);
};
nape_geom_Vec2.get = function(x,y,weak) {
	if(weak == null) weak = false;
	if(y == null) y = 0;
	if(x == null) x = 0;
	var ret;
	if(zpp_$nape_util_ZPP_$PubPool.poolVec2 == null) ret = new nape_geom_Vec2(); else {
		ret = zpp_$nape_util_ZPP_$PubPool.poolVec2;
		zpp_$nape_util_ZPP_$PubPool.poolVec2 = ret.zpp_pool;
		ret.zpp_pool = null;
	}
	if(ret.zpp_inner == null) {
		ret.zpp_inner = zpp_$nape_geom_ZPP_$Vec2.get(x,y);
		ret.zpp_inner.outer = ret;
	} else ret.setxy(x,y);
	ret.zpp_inner.weak = weak;
	return ret;
};
nape_geom_Vec2.prototype = {
	dispose: function() {
		this.zpp_inner.immutable();
		var inner = this.zpp_inner;
		this.zpp_inner.outer = null;
		this.zpp_inner = null;
		var o = this;
		o.zpp_pool = zpp_$nape_util_ZPP_$PubPool.poolVec2;
		zpp_$nape_util_ZPP_$PubPool.poolVec2 = o;
		var o1 = inner;
		o1.free();
		o1.next = zpp_$nape_geom_ZPP_$Vec2.zpp_pool;
		zpp_$nape_geom_ZPP_$Vec2.zpp_pool = o1;
	}
	,copy: function(weak) {
		if(weak == null) weak = false;
		return nape_geom_Vec2.get(this.get_x(),this.get_y(),weak);
	}
	,get_x: function() {
		this.zpp_inner.validate();
		return this.zpp_inner.x;
	}
	,set_x: function(x) {
		this.zpp_inner.immutable();
		if(this.get_x() != x) {
			this.zpp_inner.x = x;
			this.zpp_inner.invalidate();
		}
		return this.get_x();
	}
	,get_y: function() {
		this.zpp_inner.validate();
		return this.zpp_inner.y;
	}
	,set_y: function(y) {
		this.zpp_inner.immutable();
		if(this.get_y() != y) {
			this.zpp_inner.y = y;
			this.zpp_inner.invalidate();
		}
		return this.get_y();
	}
	,set: function(vector) {
		this.zpp_inner.immutable();
		var ret = this.setxy(vector.get_x(),vector.get_y());
		if(vector.zpp_inner.weak) {
			vector.dispose();
			true;
		} else false;
		return ret;
	}
	,setxy: function(x,y) {
		this.zpp_inner.immutable();
		if(!(this.get_x() == x && this.get_y() == y)) {
			this.zpp_inner.x = x;
			this.zpp_inner.y = y;
			this.zpp_inner.invalidate();
		}
		return this;
	}
	,toString: function() {
		this.zpp_inner.validate();
		return this.zpp_inner.toString();
	}
	,__class__: nape_geom_Vec2
	,__properties__: {set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"}
};
var nape_geom_Vec2Iterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.geom.Vec2Iterator"] = nape_geom_Vec2Iterator;
nape_geom_Vec2Iterator.__name__ = ["nape","geom","Vec2Iterator"];
nape_geom_Vec2Iterator.get = function(list) {
	var ret;
	if(nape_geom_Vec2Iterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$Vec2List.internal = true;
		var ret1 = new nape_geom_Vec2Iterator();
		zpp_$nape_util_ZPP_$Vec2List.internal = false;
		ret = ret1;
	} else {
		var r = nape_geom_Vec2Iterator.zpp_pool;
		nape_geom_Vec2Iterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_geom_Vec2Iterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_geom_Vec2Iterator.zpp_pool;
			nape_geom_Vec2Iterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_geom_Vec2Iterator
};
var nape_geom_Vec2List = function() {
	this.zpp_inner = null;
	this.zpp_inner = new zpp_$nape_util_ZPP_$Vec2List();
	this.zpp_inner.outer = this;
};
$hxClasses["nape.geom.Vec2List"] = nape_geom_Vec2List;
nape_geom_Vec2List.__name__ = ["nape","geom","Vec2List"];
nape_geom_Vec2List.prototype = {
	get_length: function() {
		return this.zpp_gl();
	}
	,zpp_gl: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(false) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(true) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,zpp_vm: function() {
		this.zpp_inner.valmod();
	}
	,at: function(index) {
		this.zpp_vm();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!false) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem().wrapper();
	}
	,push: function(obj) {
		this.zpp_inner.modify_test();
		this.zpp_vm();
		var cont;
		if(this.zpp_inner.adder != null) cont = this.zpp_inner.adder(obj); else cont = true;
		if(cont) {
			if(this.zpp_inner.reverse_flag) this.zpp_inner.inner.add(obj.zpp_inner); else {
				if(this.zpp_inner.push_ite == null) if(this.empty()) this.zpp_inner.push_ite = null; else this.zpp_inner.push_ite = this.zpp_inner.inner.iterator_at(this.get_length() - 1);
				this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner);
			}
			this.zpp_inner.invalidate();
			if(this.zpp_inner.post_adder != null) this.zpp_inner.post_adder(obj);
		}
		return cont;
	}
	,empty: function() {
		return this.get_length() == 0;
	}
	,iterator: function() {
		this.zpp_vm();
		return nape_geom_Vec2Iterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_geom_Vec2List
	,__properties__: {get_length:"get_length"}
};
var nape_geom_Vec3 = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.geom.Vec3"] = nape_geom_Vec3;
nape_geom_Vec3.__name__ = ["nape","geom","Vec3"];
nape_geom_Vec3.prototype = {
	get_x: function() {
		this.zpp_inner.validate();
		return this.zpp_inner.x;
	}
	,get_y: function() {
		this.zpp_inner.validate();
		return this.zpp_inner.y;
	}
	,get_z: function() {
		this.zpp_inner.validate();
		return this.zpp_inner.z;
	}
	,toString: function() {
		return "{ x: " + this.get_x() + " y: " + this.get_y() + " z: " + this.get_z() + " }";
	}
	,__class__: nape_geom_Vec3
	,__properties__: {get_z:"get_z",get_y:"get_y",get_x:"get_x"}
};
var nape_geom_Winding = function() {
};
$hxClasses["nape.geom.Winding"] = nape_geom_Winding;
nape_geom_Winding.__name__ = ["nape","geom","Winding"];
nape_geom_Winding.__properties__ = {get_ANTICLOCKWISE:"get_ANTICLOCKWISE",get_CLOCKWISE:"get_CLOCKWISE",get_UNDEFINED:"get_UNDEFINED"}
nape_geom_Winding.get_UNDEFINED = function() {
	if(zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED = new nape_geom_Winding();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED;
};
nape_geom_Winding.get_CLOCKWISE = function() {
	if(zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE = new nape_geom_Winding();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE;
};
nape_geom_Winding.get_ANTICLOCKWISE = function() {
	if(zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE = new nape_geom_Winding();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE;
};
nape_geom_Winding.prototype = {
	toString: function() {
		if(false) return ""; else if(this == nape_geom_Winding.get_UNDEFINED()) return "UNDEFINED"; else if(this == nape_geom_Winding.get_CLOCKWISE()) return "CLOCKWISE"; else if(this == nape_geom_Winding.get_ANTICLOCKWISE()) return "ANTICLOCKWISE"; else return "";
	}
	,__class__: nape_geom_Winding
};
var nape_phys_Interactor = function() {
	this.zpp_inner_i = null;
};
$hxClasses["nape.phys.Interactor"] = nape_phys_Interactor;
nape_phys_Interactor.__name__ = ["nape","phys","Interactor"];
nape_phys_Interactor.prototype = {
	get_id: function() {
		return this.zpp_inner_i.id;
	}
	,get_userData: function() {
		if(this.zpp_inner_i.userData == null) this.zpp_inner_i.userData = { };
		return this.zpp_inner_i.userData;
	}
	,isShape: function() {
		return this.zpp_inner_i.ishape != null;
	}
	,get_castShape: function() {
		if(this.isShape()) return this.zpp_inner_i.ishape.outer; else return null;
	}
	,toString: function() {
		return "";
	}
	,__class__: nape_phys_Interactor
	,__properties__: {get_castShape:"get_castShape",get_userData:"get_userData",get_id:"get_id"}
};
var nape_phys_Body = function(type,position) {
	this.zpp_inner = null;
	nape_phys_Interactor.call(this);
	this.zpp_inner = new zpp_$nape_phys_ZPP_$Body();
	this.zpp_inner.outer = this;
	this.zpp_inner.outer_i = this;
	this.zpp_inner_i = this.zpp_inner;
	if(position != null) {
		this.zpp_inner.posx = position.get_x();
		this.zpp_inner.posy = position.get_y();
	} else {
		this.zpp_inner.posx = 0;
		this.zpp_inner.posy = 0;
	}
	this.set_type(type == null?nape_phys_BodyType.get_DYNAMIC():type);
	if(position != null) {
		if(position.zpp_inner.weak) {
			position.dispose();
			true;
		} else false;
	}
	this.zpp_inner_i.insert_cbtype(nape_callbacks_CbType.get_ANY_BODY().zpp_inner);
};
$hxClasses["nape.phys.Body"] = nape_phys_Body;
nape_phys_Body.__name__ = ["nape","phys","Body"];
nape_phys_Body.__super__ = nape_phys_Interactor;
nape_phys_Body.prototype = $extend(nape_phys_Interactor.prototype,{
	get_type: function() {
		return zpp_$nape_phys_ZPP_$Body.types[this.zpp_inner.type];
	}
	,set_type: function(type) {
		this.zpp_inner.immutable_midstep("Body::type");
		if(this.get_type() != type) {
			var ntype;
			if(type == nape_phys_BodyType.get_DYNAMIC()) ntype = zpp_$nape_util_ZPP_$Flags.id_BodyType_DYNAMIC; else if(type == nape_phys_BodyType.get_KINEMATIC()) ntype = zpp_$nape_util_ZPP_$Flags.id_BodyType_KINEMATIC; else ntype = zpp_$nape_util_ZPP_$Flags.id_BodyType_STATIC;
			if(ntype == zpp_$nape_util_ZPP_$Flags.id_BodyType_STATIC && this.zpp_inner.space != null) {
				this.zpp_inner.velx = 0;
				this.zpp_inner.vely = 0;
				this.zpp_inner.angvel = 0;
			}
			this.zpp_inner.invalidate_type();
			if(this.zpp_inner.space != null) this.zpp_inner.space.transmitType(this.zpp_inner,ntype); else this.zpp_inner.type = ntype;
		}
		return this.get_type();
	}
	,isStatic: function() {
		return this.zpp_inner.isStatic();
	}
	,isDynamic: function() {
		return this.zpp_inner.isDynamic();
	}
	,get_shapes: function() {
		return this.zpp_inner.wrap_shapes;
	}
	,get_space: function() {
		if(this.zpp_inner.space == null) return null; else return this.zpp_inner.space.outer;
	}
	,set_space: function(space) {
		this.zpp_inner.immutable_midstep("Body::space");
		if(this.get_space() != space) {
			if(this.get_space() != null) this.zpp_inner.component.woken = false;
			if(this.get_space() != null) this.get_space().get_bodies().remove(this);
			if(space != null) space.get_bodies().add(this);
		}
		return this.get_space();
	}
	,get_isSleeping: function() {
		return this.zpp_inner.component.sleeping;
	}
	,get_position: function() {
		if(this.zpp_inner.wrap_pos == null) this.zpp_inner.setupPosition();
		return this.zpp_inner.wrap_pos;
	}
	,set_position: function(position) {
		this.get_position().set(position);
		return this.get_position();
	}
	,get_velocity: function() {
		if(this.zpp_inner.wrap_vel == null) this.zpp_inner.setupVelocity();
		return this.zpp_inner.wrap_vel;
	}
	,set_velocity: function(velocity) {
		this.get_velocity().set(velocity);
		return this.get_velocity();
	}
	,get_rotation: function() {
		return this.zpp_inner.rot;
	}
	,set_rotation: function(rotation) {
		this.zpp_inner.immutable_midstep("Body::rotation");
		if(this.get_rotation() != rotation) {
			this.zpp_inner.rot = rotation;
			this.zpp_inner.invalidate_rot();
			this.zpp_inner.wake();
		}
		return this.get_rotation();
	}
	,get_angularVel: function() {
		return this.zpp_inner.angvel;
	}
	,set_angularVel: function(angularVel) {
		if(this.get_angularVel() != angularVel) {
			this.zpp_inner.angvel = angularVel;
			this.zpp_inner.invalidate_wake();
		}
		return this.get_angularVel();
	}
	,get_allowRotation: function() {
		return !this.zpp_inner.norotate;
	}
	,set_allowRotation: function(allowRotation) {
		this.zpp_inner.immutable_midstep("Body::" + Std.string(allowRotation));
		if(this.get_allowRotation() != allowRotation) {
			this.zpp_inner.norotate = !allowRotation;
			this.zpp_inner.invalidate_inertia();
		}
		return this.get_allowRotation();
	}
	,get_inertia: function() {
		this.zpp_inner.validate_inertia();
		return this.zpp_inner.cinertia;
	}
	,set_inertia: function(inertia) {
		this.zpp_inner.immutable_midstep("Body::inertia");
		this.zpp_inner.inertiaMode = zpp_$nape_util_ZPP_$Flags.id_InertiaMode_FIXED;
		this.zpp_inner.cinertia = inertia;
		this.zpp_inner.invalidate_inertia();
		return this.get_inertia();
	}
	,applyImpulse: function(impulse,pos,sleepable) {
		if(sleepable == null) sleepable = false;
		if(sleepable && this.get_isSleeping()) {
			if(impulse.zpp_inner.weak) {
				impulse.dispose();
				true;
			} else false;
			if(pos != null) {
				if(pos.zpp_inner.weak) {
					pos.dispose();
					true;
				} else false;
			}
			return this;
		}
		this.zpp_inner.validate_mass();
		var t = this.zpp_inner.imass;
		this.zpp_inner.velx += impulse.get_x() * t;
		this.zpp_inner.vely += impulse.get_y() * t;
		if(pos != null) {
			var rx = 0.0;
			var ry = 0.0;
			rx = pos.get_x() - this.zpp_inner.posx;
			ry = pos.get_y() - this.zpp_inner.posy;
			this.zpp_inner.validate_inertia();
			this.zpp_inner.angvel += (impulse.get_y() * rx - impulse.get_x() * ry) * this.zpp_inner.iinertia;
			if(pos.zpp_inner.weak) {
				pos.dispose();
				true;
			} else false;
		}
		if(!sleepable) {
			if(this.isDynamic()) this.zpp_inner.invalidate_wake();
		}
		if(impulse.zpp_inner.weak) {
			impulse.dispose();
			true;
		} else false;
		return this;
	}
	,applyAngularImpulse: function(impulse,sleepable) {
		if(sleepable == null) sleepable = false;
		if(sleepable && this.get_isSleeping()) return this;
		this.zpp_inner.validate_inertia();
		this.zpp_inner.angvel += impulse * this.zpp_inner.iinertia;
		if(!sleepable) {
			if(this.isDynamic()) this.zpp_inner.invalidate_wake();
		}
		return this;
	}
	,toString: function() {
		return (this.zpp_inner.world?"(space::world":"(" + (this.isDynamic()?"dynamic":this.isStatic()?"static":"kinematic")) + ")#" + this.get_id();
	}
	,__class__: nape_phys_Body
	,__properties__: $extend(nape_phys_Interactor.prototype.__properties__,{set_inertia:"set_inertia",get_inertia:"get_inertia",set_allowRotation:"set_allowRotation",get_allowRotation:"get_allowRotation",set_angularVel:"set_angularVel",get_angularVel:"get_angularVel",set_rotation:"set_rotation",get_rotation:"get_rotation",set_velocity:"set_velocity",get_velocity:"get_velocity",set_position:"set_position",get_position:"get_position",get_isSleeping:"get_isSleeping",set_space:"set_space",get_space:"get_space",get_shapes:"get_shapes",set_type:"set_type",get_type:"get_type"})
});
var nape_phys_BodyIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.phys.BodyIterator"] = nape_phys_BodyIterator;
nape_phys_BodyIterator.__name__ = ["nape","phys","BodyIterator"];
nape_phys_BodyIterator.get = function(list) {
	var ret;
	if(nape_phys_BodyIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$BodyList.internal = true;
		var ret1 = new nape_phys_BodyIterator();
		zpp_$nape_util_ZPP_$BodyList.internal = false;
		ret = ret1;
	} else {
		var r = nape_phys_BodyIterator.zpp_pool;
		nape_phys_BodyIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_phys_BodyIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_phys_BodyIterator.zpp_pool;
			nape_phys_BodyIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_phys_BodyIterator
};
var nape_phys_BodyList = function() {
	this.zpp_inner = null;
	this.zpp_inner = new zpp_$nape_util_ZPP_$BodyList();
	this.zpp_inner.outer = this;
};
$hxClasses["nape.phys.BodyList"] = nape_phys_BodyList;
nape_phys_BodyList.__name__ = ["nape","phys","BodyList"];
nape_phys_BodyList.prototype = {
	get_length: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(false) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(true) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,at: function(index) {
		this.zpp_inner.valmod();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!false) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem().outer;
	}
	,push: function(obj) {
		this.zpp_inner.modify_test();
		this.zpp_inner.valmod();
		var cont;
		if(this.zpp_inner.adder != null) cont = this.zpp_inner.adder(obj); else cont = true;
		if(cont) {
			if(this.zpp_inner.reverse_flag) this.zpp_inner.inner.add(obj.zpp_inner); else {
				if(this.zpp_inner.push_ite == null) if(this.empty()) this.zpp_inner.push_ite = null; else this.zpp_inner.push_ite = this.zpp_inner.inner.iterator_at(this.get_length() - 1);
				this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner);
			}
			this.zpp_inner.invalidate();
			if(this.zpp_inner.post_adder != null) this.zpp_inner.post_adder(obj);
		}
		return cont;
	}
	,unshift: function(obj) {
		this.zpp_inner.modify_test();
		this.zpp_inner.valmod();
		var cont;
		if(this.zpp_inner.adder != null) cont = this.zpp_inner.adder(obj); else cont = true;
		if(cont) {
			if(this.zpp_inner.reverse_flag) {
				if(this.zpp_inner.push_ite == null) if(this.empty()) this.zpp_inner.push_ite = null; else this.zpp_inner.push_ite = this.zpp_inner.inner.iterator_at(this.get_length() - 1);
				this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner);
			} else this.zpp_inner.inner.add(obj.zpp_inner);
			this.zpp_inner.invalidate();
			if(this.zpp_inner.post_adder != null) this.zpp_inner.post_adder(obj);
		}
		return cont;
	}
	,add: function(obj) {
		if(this.zpp_inner.reverse_flag) return this.push(obj); else return this.unshift(obj);
	}
	,remove: function(obj) {
		this.zpp_inner.modify_test();
		this.zpp_inner.valmod();
		var ret;
		ret = false;
		var cx_ite = this.zpp_inner.inner.begin();
		while(cx_ite != null) {
			var x = cx_ite.elem();
			if(x == obj.zpp_inner) {
				ret = true;
				break;
			}
			cx_ite = cx_ite.next;
		}
		if(ret) {
			if(this.zpp_inner.subber != null) this.zpp_inner.subber(obj);
			if(!this.zpp_inner.dontremove) this.zpp_inner.inner.remove(obj.zpp_inner);
			this.zpp_inner.invalidate();
		}
		return ret;
	}
	,empty: function() {
		if(false) return this.get_length() == 0; else return this.zpp_inner.inner.empty();
	}
	,iterator: function() {
		this.zpp_inner.valmod();
		return nape_phys_BodyIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_phys_BodyList
	,__properties__: {get_length:"get_length"}
};
var nape_phys_BodyType = function() {
};
$hxClasses["nape.phys.BodyType"] = nape_phys_BodyType;
nape_phys_BodyType.__name__ = ["nape","phys","BodyType"];
nape_phys_BodyType.__properties__ = {get_KINEMATIC:"get_KINEMATIC",get_DYNAMIC:"get_DYNAMIC",get_STATIC:"get_STATIC"}
nape_phys_BodyType.get_STATIC = function() {
	if(zpp_$nape_util_ZPP_$Flags.BodyType_STATIC == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.BodyType_STATIC = new nape_phys_BodyType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.BodyType_STATIC;
};
nape_phys_BodyType.get_DYNAMIC = function() {
	if(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC = new nape_phys_BodyType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC;
};
nape_phys_BodyType.get_KINEMATIC = function() {
	if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC = new nape_phys_BodyType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC;
};
nape_phys_BodyType.prototype = {
	toString: function() {
		if(false) return ""; else if(this == nape_phys_BodyType.get_STATIC()) return "STATIC"; else if(this == nape_phys_BodyType.get_DYNAMIC()) return "DYNAMIC"; else if(this == nape_phys_BodyType.get_KINEMATIC()) return "KINEMATIC"; else return "";
	}
	,__class__: nape_phys_BodyType
};
var nape_phys_Compound = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.phys.Compound"] = nape_phys_Compound;
nape_phys_Compound.__name__ = ["nape","phys","Compound"];
nape_phys_Compound.__super__ = nape_phys_Interactor;
nape_phys_Compound.prototype = $extend(nape_phys_Interactor.prototype,{
	toString: function() {
		return "Compound" + this.get_id();
	}
	,__class__: nape_phys_Compound
});
var nape_phys_CompoundIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.phys.CompoundIterator"] = nape_phys_CompoundIterator;
nape_phys_CompoundIterator.__name__ = ["nape","phys","CompoundIterator"];
nape_phys_CompoundIterator.get = function(list) {
	var ret;
	if(nape_phys_CompoundIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$CompoundList.internal = true;
		var ret1 = new nape_phys_CompoundIterator();
		zpp_$nape_util_ZPP_$CompoundList.internal = false;
		ret = ret1;
	} else {
		var r = nape_phys_CompoundIterator.zpp_pool;
		nape_phys_CompoundIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_phys_CompoundIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_phys_CompoundIterator.zpp_pool;
			nape_phys_CompoundIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_phys_CompoundIterator
};
var nape_phys_CompoundList = function() {
	this.zpp_inner = null;
	this.zpp_inner = new zpp_$nape_util_ZPP_$CompoundList();
	this.zpp_inner.outer = this;
};
$hxClasses["nape.phys.CompoundList"] = nape_phys_CompoundList;
nape_phys_CompoundList.__name__ = ["nape","phys","CompoundList"];
nape_phys_CompoundList.prototype = {
	get_length: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(false) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(true) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,at: function(index) {
		this.zpp_inner.valmod();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!false) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem().outer;
	}
	,remove: function(obj) {
		this.zpp_inner.modify_test();
		this.zpp_inner.valmod();
		var ret;
		ret = false;
		var cx_ite = this.zpp_inner.inner.begin();
		while(cx_ite != null) {
			var x = cx_ite.elem();
			if(x == obj.zpp_inner) {
				ret = true;
				break;
			}
			cx_ite = cx_ite.next;
		}
		if(ret) {
			if(this.zpp_inner.subber != null) this.zpp_inner.subber(obj);
			if(!this.zpp_inner.dontremove) this.zpp_inner.inner.remove(obj.zpp_inner);
			this.zpp_inner.invalidate();
		}
		return ret;
	}
	,iterator: function() {
		this.zpp_inner.valmod();
		return nape_phys_CompoundIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_phys_CompoundList
	,__properties__: {get_length:"get_length"}
};
var nape_phys_FluidProperties = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.phys.FluidProperties"] = nape_phys_FluidProperties;
nape_phys_FluidProperties.__name__ = ["nape","phys","FluidProperties"];
nape_phys_FluidProperties.prototype = {
	get_density: function() {
		return this.zpp_inner.density * ("density" == "density"?1000:1);
	}
	,get_viscosity: function() {
		return this.zpp_inner.viscosity * ("viscosity" == "density"?1000:1);
	}
	,get_gravity: function() {
		return this.zpp_inner.wrap_gravity;
	}
	,toString: function() {
		return "{ density: " + this.get_density() + " viscosity: " + this.get_viscosity() + " gravity: " + Std.string(this.get_gravity()) + " }";
	}
	,__class__: nape_phys_FluidProperties
	,__properties__: {get_gravity:"get_gravity",get_viscosity:"get_viscosity",get_density:"get_density"}
};
var nape_phys_GravMassMode = function() {
};
$hxClasses["nape.phys.GravMassMode"] = nape_phys_GravMassMode;
nape_phys_GravMassMode.__name__ = ["nape","phys","GravMassMode"];
nape_phys_GravMassMode.__properties__ = {get_SCALED:"get_SCALED",get_FIXED:"get_FIXED",get_DEFAULT:"get_DEFAULT"}
nape_phys_GravMassMode.get_DEFAULT = function() {
	if(zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT = new nape_phys_GravMassMode();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT;
};
nape_phys_GravMassMode.get_FIXED = function() {
	if(zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED = new nape_phys_GravMassMode();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED;
};
nape_phys_GravMassMode.get_SCALED = function() {
	if(zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED = new nape_phys_GravMassMode();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED;
};
nape_phys_GravMassMode.prototype = {
	toString: function() {
		if(false) return ""; else if(this == nape_phys_GravMassMode.get_DEFAULT()) return "DEFAULT"; else if(this == nape_phys_GravMassMode.get_FIXED()) return "FIXED"; else if(this == nape_phys_GravMassMode.get_SCALED()) return "SCALED"; else return "";
	}
	,__class__: nape_phys_GravMassMode
};
var nape_phys_InertiaMode = function() {
};
$hxClasses["nape.phys.InertiaMode"] = nape_phys_InertiaMode;
nape_phys_InertiaMode.__name__ = ["nape","phys","InertiaMode"];
nape_phys_InertiaMode.__properties__ = {get_FIXED:"get_FIXED",get_DEFAULT:"get_DEFAULT"}
nape_phys_InertiaMode.get_DEFAULT = function() {
	if(zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT = new nape_phys_InertiaMode();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT;
};
nape_phys_InertiaMode.get_FIXED = function() {
	if(zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED = new nape_phys_InertiaMode();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED;
};
nape_phys_InertiaMode.prototype = {
	toString: function() {
		if(false) return ""; else if(this == nape_phys_InertiaMode.get_DEFAULT()) return "DEFAULT"; else if(this == nape_phys_InertiaMode.get_FIXED()) return "FIXED"; else return "";
	}
	,__class__: nape_phys_InertiaMode
};
var nape_phys_InteractorIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.phys.InteractorIterator"] = nape_phys_InteractorIterator;
nape_phys_InteractorIterator.__name__ = ["nape","phys","InteractorIterator"];
nape_phys_InteractorIterator.get = function(list) {
	var ret;
	if(nape_phys_InteractorIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$InteractorList.internal = true;
		var ret1 = new nape_phys_InteractorIterator();
		zpp_$nape_util_ZPP_$InteractorList.internal = false;
		ret = ret1;
	} else {
		var r = nape_phys_InteractorIterator.zpp_pool;
		nape_phys_InteractorIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_phys_InteractorIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_phys_InteractorIterator.zpp_pool;
			nape_phys_InteractorIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_phys_InteractorIterator
};
var nape_phys_InteractorList = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.phys.InteractorList"] = nape_phys_InteractorList;
nape_phys_InteractorList.__name__ = ["nape","phys","InteractorList"];
nape_phys_InteractorList.prototype = {
	get_length: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(false) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(true) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,at: function(index) {
		this.zpp_inner.valmod();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!false) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem().outer_i;
	}
	,iterator: function() {
		this.zpp_inner.valmod();
		return nape_phys_InteractorIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_phys_InteractorList
	,__properties__: {get_length:"get_length"}
};
var nape_phys_MassMode = function() {
};
$hxClasses["nape.phys.MassMode"] = nape_phys_MassMode;
nape_phys_MassMode.__name__ = ["nape","phys","MassMode"];
nape_phys_MassMode.__properties__ = {get_FIXED:"get_FIXED",get_DEFAULT:"get_DEFAULT"}
nape_phys_MassMode.get_DEFAULT = function() {
	if(zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT = new nape_phys_MassMode();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT;
};
nape_phys_MassMode.get_FIXED = function() {
	if(zpp_$nape_util_ZPP_$Flags.MassMode_FIXED == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.MassMode_FIXED = new nape_phys_MassMode();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.MassMode_FIXED;
};
nape_phys_MassMode.prototype = {
	toString: function() {
		if(false) return ""; else if(this == nape_phys_MassMode.get_DEFAULT()) return "DEFAULT"; else if(this == nape_phys_MassMode.get_FIXED()) return "FIXED"; else return "";
	}
	,__class__: nape_phys_MassMode
};
var nape_phys_Material = function(elasticity,dynamicFriction,staticFriction,density,rollingFriction) {
	if(rollingFriction == null) rollingFriction = 0.001;
	if(density == null) density = 1;
	if(staticFriction == null) staticFriction = 2.0;
	if(dynamicFriction == null) dynamicFriction = 1.0;
	if(elasticity == null) elasticity = 0.0;
	this.zpp_inner = null;
	if(zpp_$nape_phys_ZPP_$Material.zpp_pool == null) this.zpp_inner = new zpp_$nape_phys_ZPP_$Material(); else {
		this.zpp_inner = zpp_$nape_phys_ZPP_$Material.zpp_pool;
		zpp_$nape_phys_ZPP_$Material.zpp_pool = this.zpp_inner.next;
		this.zpp_inner.next = null;
	}
	this.zpp_inner.alloc();
	this.zpp_inner.outer = this;
	this.set_elasticity(elasticity);
	this.set_dynamicFriction(dynamicFriction);
	this.set_staticFriction(staticFriction);
	this.set_density(density);
	this.set_rollingFriction(rollingFriction);
};
$hxClasses["nape.phys.Material"] = nape_phys_Material;
nape_phys_Material.__name__ = ["nape","phys","Material"];
nape_phys_Material.wood = function() {
	return new nape_phys_Material(0.4,0.2,0.38,0.7,0.005);
};
nape_phys_Material.steel = function() {
	return new nape_phys_Material(0.2,0.57,0.74,7.8,0.001);
};
nape_phys_Material.ice = function() {
	return new nape_phys_Material(0.3,0.03,0.1,0.9,0.0001);
};
nape_phys_Material.rubber = function() {
	return new nape_phys_Material(0.8,1.0,1.4,1.5,0.01);
};
nape_phys_Material.glass = function() {
	return new nape_phys_Material(0.4,0.4,0.94,2.6,0.002);
};
nape_phys_Material.sand = function() {
	return new nape_phys_Material(-1.0,0.45,0.6,1.6,16.0);
};
nape_phys_Material.prototype = {
	get_elasticity: function() {
		return this.zpp_inner.elasticity * ("elasticity" == "density"?1000:1);
	}
	,set_elasticity: function(elasticity) {
		if(elasticity != this.get_elasticity()) {
			this.zpp_inner.elasticity = elasticity / ("elasticity" == "density"?1000:1);
			this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE | zpp_$nape_phys_ZPP_$Material.ARBITERS);
		}
		return this.get_elasticity();
	}
	,get_dynamicFriction: function() {
		return this.zpp_inner.dynamicFriction * ("dynamicFriction" == "density"?1000:1);
	}
	,set_dynamicFriction: function(dynamicFriction) {
		if(dynamicFriction != this.get_dynamicFriction()) {
			this.zpp_inner.dynamicFriction = dynamicFriction / ("dynamicFriction" == "density"?1000:1);
			this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE | zpp_$nape_phys_ZPP_$Material.ANGDRAG | zpp_$nape_phys_ZPP_$Material.ARBITERS);
		}
		return this.get_dynamicFriction();
	}
	,get_staticFriction: function() {
		return this.zpp_inner.staticFriction * ("staticFriction" == "density"?1000:1);
	}
	,set_staticFriction: function(staticFriction) {
		if(staticFriction != this.get_staticFriction()) {
			this.zpp_inner.staticFriction = staticFriction / ("staticFriction" == "density"?1000:1);
			this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE | zpp_$nape_phys_ZPP_$Material.ARBITERS);
		}
		return this.get_staticFriction();
	}
	,get_density: function() {
		return this.zpp_inner.density * ("density" == "density"?1000:1);
	}
	,set_density: function(density) {
		if(density != this.get_density()) {
			this.zpp_inner.density = density / ("density" == "density"?1000:1);
			this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE | zpp_$nape_phys_ZPP_$Material.PROPS);
		}
		return this.get_density();
	}
	,get_rollingFriction: function() {
		return this.zpp_inner.rollingFriction * ("rollingFriction" == "density"?1000:1);
	}
	,set_rollingFriction: function(rollingFriction) {
		if(rollingFriction != this.get_rollingFriction()) {
			this.zpp_inner.rollingFriction = rollingFriction / ("rollingFriction" == "density"?1000:1);
			this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE | zpp_$nape_phys_ZPP_$Material.ARBITERS);
		}
		return this.get_rollingFriction();
	}
	,toString: function() {
		return "{ elasticity: " + this.get_elasticity() + " dynamicFriction: " + this.get_dynamicFriction() + " staticFriction: " + this.get_staticFriction() + " density: " + this.get_density() + " rollingFriction: " + this.get_rollingFriction() + " }";
	}
	,__class__: nape_phys_Material
	,__properties__: {set_rollingFriction:"set_rollingFriction",get_rollingFriction:"get_rollingFriction",set_density:"set_density",get_density:"get_density",set_staticFriction:"set_staticFriction",get_staticFriction:"get_staticFriction",set_dynamicFriction:"set_dynamicFriction",get_dynamicFriction:"get_dynamicFriction",set_elasticity:"set_elasticity",get_elasticity:"get_elasticity"}
};
var nape_shape_Shape = function() {
	this.zpp_inner = null;
	nape_phys_Interactor.call(this);
};
$hxClasses["nape.shape.Shape"] = nape_shape_Shape;
nape_shape_Shape.__name__ = ["nape","shape","Shape"];
nape_shape_Shape.__super__ = nape_phys_Interactor;
nape_shape_Shape.prototype = $extend(nape_phys_Interactor.prototype,{
	isCircle: function() {
		return this.zpp_inner.isCircle();
	}
	,get_body: function() {
		if(this.zpp_inner.body != null) return this.zpp_inner.body.outer; else return null;
	}
	,get_material: function() {
		return this.zpp_inner.material.wrapper();
	}
	,set_material: function(material) {
		this.zpp_inner.immutable_midstep("Shape::material");
		this.zpp_inner.setMaterial(material.zpp_inner);
		return this.get_material();
	}
	,get_filter: function() {
		return this.zpp_inner.filter.wrapper();
	}
	,set_filter: function(filter) {
		this.zpp_inner.immutable_midstep("Shape::filter");
		this.zpp_inner.setFilter(filter.zpp_inner);
		return this.get_filter();
	}
	,get_sensorEnabled: function() {
		return this.zpp_inner.sensorEnabled;
	}
	,set_sensorEnabled: function(sensorEnabled) {
		this.zpp_inner.immutable_midstep("Shape::sensorEnabled");
		this.zpp_inner.sensorEnabled = sensorEnabled;
		this.zpp_inner.wake();
		return this.get_sensorEnabled();
	}
	,toString: function() {
		var ret;
		if(this.isCircle()) ret = "Circle"; else ret = "Polygon";
		return ret + "#" + this.get_id();
	}
	,__class__: nape_shape_Shape
	,__properties__: $extend(nape_phys_Interactor.prototype.__properties__,{set_sensorEnabled:"set_sensorEnabled",get_sensorEnabled:"get_sensorEnabled",set_filter:"set_filter",get_filter:"get_filter",set_material:"set_material",get_material:"get_material",get_body:"get_body"})
});
var nape_shape_Circle = function(radius,localCOM,material,filter) {
	this.zpp_inner_zn = null;
	nape_shape_Shape.call(this);
	this.zpp_inner_zn = new zpp_$nape_shape_ZPP_$Circle();
	this.zpp_inner_zn.outer = this;
	this.zpp_inner_zn.outer_zn = this;
	this.zpp_inner = this.zpp_inner_zn;
	this.zpp_inner_i = this.zpp_inner;
	this.zpp_inner_i.outer_i = this;
	this.set_radius(radius);
	if(localCOM == null) {
		this.zpp_inner.localCOMx = 0;
		this.zpp_inner.localCOMy = 0;
	} else {
		this.zpp_inner.localCOMx = localCOM.get_x();
		this.zpp_inner.localCOMy = localCOM.get_y();
		if(localCOM.zpp_inner.weak) {
			localCOM.dispose();
			true;
		} else false;
	}
	if(material == null) {
		if(zpp_$nape_phys_ZPP_$Material.zpp_pool == null) this.zpp_inner.material = new zpp_$nape_phys_ZPP_$Material(); else {
			this.zpp_inner.material = zpp_$nape_phys_ZPP_$Material.zpp_pool;
			zpp_$nape_phys_ZPP_$Material.zpp_pool = this.zpp_inner.material.next;
			this.zpp_inner.material.next = null;
		}
		this.zpp_inner.material.alloc();
	} else this.set_material(material);
	if(filter == null) {
		if(zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool == null) this.zpp_inner.filter = new zpp_$nape_dynamics_ZPP_$InteractionFilter(); else {
			this.zpp_inner.filter = zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool;
			zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool = this.zpp_inner.filter.next;
			this.zpp_inner.filter.next = null;
		}
		this.zpp_inner.filter.alloc();
	} else this.set_filter(filter);
	this.zpp_inner_i.insert_cbtype(nape_callbacks_CbType.get_ANY_SHAPE().zpp_inner);
};
$hxClasses["nape.shape.Circle"] = nape_shape_Circle;
nape_shape_Circle.__name__ = ["nape","shape","Circle"];
nape_shape_Circle.__super__ = nape_shape_Shape;
nape_shape_Circle.prototype = $extend(nape_shape_Shape.prototype,{
	get_radius: function() {
		return this.zpp_inner_zn.radius;
	}
	,set_radius: function(radius) {
		this.zpp_inner.immutable_midstep("Circle::radius");
		if(radius != this.get_radius()) {
			this.zpp_inner_zn.radius = radius;
			this.zpp_inner_zn.invalidate_radius();
		}
		return this.get_radius();
	}
	,__class__: nape_shape_Circle
	,__properties__: $extend(nape_shape_Shape.prototype.__properties__,{set_radius:"set_radius",get_radius:"get_radius"})
});
var nape_shape_Edge = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.shape.Edge"] = nape_shape_Edge;
nape_shape_Edge.__name__ = ["nape","shape","Edge"];
nape_shape_Edge.prototype = {
	toString: function() {
		if(this.zpp_inner.polygon == null) return "Edge(object-pooled)"; else if(this.zpp_inner.polygon.body == null) {
			this.zpp_inner.polygon.validate_laxi();
			return "{ localNormal : " + ("{ x: " + this.zpp_inner.lnormx + " y: " + this.zpp_inner.lnormy + " }") + " }";
		} else {
			this.zpp_inner.polygon.validate_gaxi();
			return "{ localNormal : " + ("{ x: " + this.zpp_inner.lnormx + " y: " + this.zpp_inner.lnormy + " }") + " worldNormal : " + ("{ x: " + this.zpp_inner.gnormx + " y: " + this.zpp_inner.gnormy + " }") + " }";
		}
	}
	,__class__: nape_shape_Edge
};
var nape_shape_EdgeIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.shape.EdgeIterator"] = nape_shape_EdgeIterator;
nape_shape_EdgeIterator.__name__ = ["nape","shape","EdgeIterator"];
nape_shape_EdgeIterator.get = function(list) {
	var ret;
	if(nape_shape_EdgeIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$EdgeList.internal = true;
		var ret1 = new nape_shape_EdgeIterator();
		zpp_$nape_util_ZPP_$EdgeList.internal = false;
		ret = ret1;
	} else {
		var r = nape_shape_EdgeIterator.zpp_pool;
		nape_shape_EdgeIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_shape_EdgeIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_shape_EdgeIterator.zpp_pool;
			nape_shape_EdgeIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_shape_EdgeIterator
};
var nape_shape_EdgeList = function() {
	this.zpp_inner = null;
};
$hxClasses["nape.shape.EdgeList"] = nape_shape_EdgeList;
nape_shape_EdgeList.__name__ = ["nape","shape","EdgeList"];
nape_shape_EdgeList.prototype = {
	get_length: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(false) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(true) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,at: function(index) {
		this.zpp_inner.valmod();
		if(this.zpp_inner.reverse_flag) if(index == this.get_length() - 1) index = index; else index = this.get_length() - 2 - index;
		if(!false) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem().wrapper();
	}
	,iterator: function() {
		this.zpp_inner.valmod();
		return nape_shape_EdgeIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_shape_EdgeList
	,__properties__: {get_length:"get_length"}
};
var nape_shape_Polygon = function(localVerts,material,filter) {
	this.zpp_inner_zn = null;
	nape_shape_Shape.call(this);
	this.zpp_inner_zn = new zpp_$nape_shape_ZPP_$Polygon();
	this.zpp_inner_zn.outer = this;
	this.zpp_inner_zn.outer_zn = this;
	this.zpp_inner = this.zpp_inner_zn;
	this.zpp_inner_i = this.zpp_inner;
	this.zpp_inner_i.outer_i = this;
	if(Std["is"](localVerts,Array)) {
		var lv = localVerts;
		var _g = 0;
		while(_g < lv.length) {
			var vite = lv[_g];
			++_g;
			var x = vite;
			this.get_localVerts().push(x.copy());
		}
	} else if(false) {
	} else if(Std["is"](localVerts,nape_geom_Vec2List)) {
		var lv1 = localVerts;
		var $it0 = lv1.iterator();
		while( $it0.hasNext() ) {
			var x1 = $it0.next();
			this.get_localVerts().push(x1.copy());
		}
	} else if(Std["is"](localVerts,nape_geom_GeomPoly)) {
		var lv2 = localVerts;
		var verts = lv2.zpp_inner.vertices;
		if(verts != null) {
			var vite1 = verts;
			do {
				var x2 = nape_geom_Vec2.get(vite1.x,vite1.y);
				vite1 = vite1.next;
				this.get_localVerts().push(x2.copy());
				x2.dispose();
			} while(vite1 != verts);
		}
	} else {
	}
	if(Std["is"](localVerts,Array)) {
		var lv3 = localVerts;
		var i = 0;
		while(i < lv3.length) {
			var cur = lv3[i];
			if(cur.zpp_inner.weak?(function($this) {
				var $r;
				cur.dispose();
				$r = true;
				return $r;
			}(this)):false) {
				lv3.splice(i,1);
				continue;
			}
			i++;
		}
	} else if(false) {
	} else if(Std["is"](localVerts,nape_geom_Vec2List)) {
		var lv4 = localVerts;
		if(lv4.zpp_inner._validate != null) lv4.zpp_inner._validate();
		var ins = lv4.zpp_inner.inner;
		var pre = null;
		var cur1 = ins.begin();
		while(cur1 != null) {
			var x3 = cur1.elem();
			if(x3.outer.zpp_inner.weak) {
				cur1 = ins.erase(pre);
				if(x3.outer.zpp_inner.weak) {
					x3.outer.dispose();
					true;
				} else false;
			} else {
				pre = cur1;
				cur1 = cur1.next;
			}
		}
	}
	if(material == null) {
		if(zpp_$nape_phys_ZPP_$Material.zpp_pool == null) this.zpp_inner.material = new zpp_$nape_phys_ZPP_$Material(); else {
			this.zpp_inner.material = zpp_$nape_phys_ZPP_$Material.zpp_pool;
			zpp_$nape_phys_ZPP_$Material.zpp_pool = this.zpp_inner.material.next;
			this.zpp_inner.material.next = null;
		}
		this.zpp_inner.material.alloc();
	} else this.set_material(material);
	if(filter == null) {
		if(zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool == null) this.zpp_inner.filter = new zpp_$nape_dynamics_ZPP_$InteractionFilter(); else {
			this.zpp_inner.filter = zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool;
			zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool = this.zpp_inner.filter.next;
			this.zpp_inner.filter.next = null;
		}
		this.zpp_inner.filter.alloc();
	} else this.set_filter(filter);
	this.zpp_inner_i.insert_cbtype(nape_callbacks_CbType.get_ANY_SHAPE().zpp_inner);
};
$hxClasses["nape.shape.Polygon"] = nape_shape_Polygon;
nape_shape_Polygon.__name__ = ["nape","shape","Polygon"];
nape_shape_Polygon.rect = function(x,y,width,height,weak) {
	if(weak == null) weak = false;
	return [nape_geom_Vec2.get(x,y,weak),nape_geom_Vec2.get(x + width,y,weak),nape_geom_Vec2.get(x + width,y + height,weak),nape_geom_Vec2.get(x,y + height,weak)];
};
nape_shape_Polygon.box = function(width,height,weak) {
	if(weak == null) weak = false;
	return nape_shape_Polygon.rect(-width / 2,-height / 2,width,height,weak);
};
nape_shape_Polygon.regular = function(xRadius,yRadius,edgeCount,angleOffset,weak) {
	if(weak == null) weak = false;
	if(angleOffset == null) angleOffset = 0.0;
	var ret = [];
	var dangle = Math.PI * 2 / edgeCount;
	var _g = 0;
	while(_g < edgeCount) {
		var i = _g++;
		var ang = i * dangle + angleOffset;
		var x = nape_geom_Vec2.get(Math.cos(ang) * xRadius,Math.sin(ang) * yRadius,weak);
		ret.push(x);
	}
	return ret;
};
nape_shape_Polygon.__super__ = nape_shape_Shape;
nape_shape_Polygon.prototype = $extend(nape_shape_Shape.prototype,{
	get_localVerts: function() {
		if(this.zpp_inner_zn.wrap_lverts == null) this.zpp_inner_zn.getlverts();
		return this.zpp_inner_zn.wrap_lverts;
	}
	,__class__: nape_shape_Polygon
	,__properties__: $extend(nape_shape_Shape.prototype.__properties__,{get_localVerts:"get_localVerts"})
});
var nape_shape_ShapeIterator = function() {
	this.zpp_next = null;
	this.zpp_critical = false;
	this.zpp_i = 0;
	this.zpp_inner = null;
};
$hxClasses["nape.shape.ShapeIterator"] = nape_shape_ShapeIterator;
nape_shape_ShapeIterator.__name__ = ["nape","shape","ShapeIterator"];
nape_shape_ShapeIterator.get = function(list) {
	var ret;
	if(nape_shape_ShapeIterator.zpp_pool == null) {
		zpp_$nape_util_ZPP_$ShapeList.internal = true;
		var ret1 = new nape_shape_ShapeIterator();
		zpp_$nape_util_ZPP_$ShapeList.internal = false;
		ret = ret1;
	} else {
		var r = nape_shape_ShapeIterator.zpp_pool;
		nape_shape_ShapeIterator.zpp_pool = r.zpp_next;
		ret = r;
	}
	ret.zpp_i = 0;
	ret.zpp_inner = list;
	ret.zpp_critical = false;
	return ret;
};
nape_shape_ShapeIterator.prototype = {
	hasNext: function() {
		this.zpp_inner.zpp_inner.valmod();
		var length = this.zpp_inner.get_length();
		this.zpp_critical = true;
		if(this.zpp_i < length) return true; else {
			this.zpp_next = nape_shape_ShapeIterator.zpp_pool;
			nape_shape_ShapeIterator.zpp_pool = this;
			this.zpp_inner = null;
			return false;
		}
	}
	,next: function() {
		this.zpp_critical = false;
		return this.zpp_inner.at(this.zpp_i++);
	}
	,__class__: nape_shape_ShapeIterator
};
var nape_shape_ShapeList = function() {
	this.zpp_inner = null;
	this.zpp_inner = new zpp_$nape_util_ZPP_$ShapeList();
	this.zpp_inner.outer = this;
};
$hxClasses["nape.shape.ShapeList"] = nape_shape_ShapeList;
nape_shape_ShapeList.__name__ = ["nape","shape","ShapeList"];
nape_shape_ShapeList.prototype = {
	get_length: function() {
		this.zpp_inner.valmod();
		if(this.zpp_inner.zip_length) {
			this.zpp_inner.zip_length = false;
			if(false) {
				this.zpp_inner.user_length = 0;
				var cx_ite = this.zpp_inner.inner.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(true) this.zpp_inner.user_length++;
					cx_ite = cx_ite.next;
				}
			} else this.zpp_inner.user_length = this.zpp_inner.inner.length;
		}
		return this.zpp_inner.user_length;
	}
	,at: function(index) {
		this.zpp_inner.valmod();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(!false) {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = index;
				this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(index);
			} else while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
			}
		} else {
			if(index < this.zpp_inner.at_index || this.zpp_inner.at_ite == null) {
				this.zpp_inner.at_index = 0;
				this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
				while(true) {
					var x = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
			while(this.zpp_inner.at_index != index) {
				this.zpp_inner.at_index++;
				this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				while(true) {
					var x1 = this.zpp_inner.at_ite.elem();
					if(true) break;
					this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
				}
			}
		}
		return this.zpp_inner.at_ite.elem().outer;
	}
	,push: function(obj) {
		this.zpp_inner.modify_test();
		this.zpp_inner.valmod();
		var cont;
		if(this.zpp_inner.adder != null) cont = this.zpp_inner.adder(obj); else cont = true;
		if(cont) {
			if(this.zpp_inner.reverse_flag) this.zpp_inner.inner.add(obj.zpp_inner); else {
				if(this.zpp_inner.push_ite == null) if(this.empty()) this.zpp_inner.push_ite = null; else this.zpp_inner.push_ite = this.zpp_inner.inner.iterator_at(this.get_length() - 1);
				this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner);
			}
			this.zpp_inner.invalidate();
			if(this.zpp_inner.post_adder != null) this.zpp_inner.post_adder(obj);
		}
		return cont;
	}
	,unshift: function(obj) {
		this.zpp_inner.modify_test();
		this.zpp_inner.valmod();
		var cont;
		if(this.zpp_inner.adder != null) cont = this.zpp_inner.adder(obj); else cont = true;
		if(cont) {
			if(this.zpp_inner.reverse_flag) {
				if(this.zpp_inner.push_ite == null) if(this.empty()) this.zpp_inner.push_ite = null; else this.zpp_inner.push_ite = this.zpp_inner.inner.iterator_at(this.get_length() - 1);
				this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner);
			} else this.zpp_inner.inner.add(obj.zpp_inner);
			this.zpp_inner.invalidate();
			if(this.zpp_inner.post_adder != null) this.zpp_inner.post_adder(obj);
		}
		return cont;
	}
	,add: function(obj) {
		if(this.zpp_inner.reverse_flag) return this.push(obj); else return this.unshift(obj);
	}
	,remove: function(obj) {
		this.zpp_inner.modify_test();
		this.zpp_inner.valmod();
		var ret;
		ret = false;
		var cx_ite = this.zpp_inner.inner.begin();
		while(cx_ite != null) {
			var x = cx_ite.elem();
			if(x == obj.zpp_inner) {
				ret = true;
				break;
			}
			cx_ite = cx_ite.next;
		}
		if(ret) {
			if(this.zpp_inner.subber != null) this.zpp_inner.subber(obj);
			if(!this.zpp_inner.dontremove) this.zpp_inner.inner.remove(obj.zpp_inner);
			this.zpp_inner.invalidate();
		}
		return ret;
	}
	,empty: function() {
		if(false) return this.get_length() == 0; else return this.zpp_inner.inner.empty();
	}
	,iterator: function() {
		this.zpp_inner.valmod();
		return nape_shape_ShapeIterator.get(this);
	}
	,toString: function() {
		var ret = "[";
		var fst = true;
		var $it0 = this.iterator();
		while( $it0.hasNext() ) {
			var i = $it0.next();
			if(!fst) ret += ",";
			if(i == null) ret += "NULL"; else ret += i.toString();
			fst = false;
		}
		return ret + "]";
	}
	,__class__: nape_shape_ShapeList
	,__properties__: {get_length:"get_length"}
};
var nape_shape_ShapeType = function() {
};
$hxClasses["nape.shape.ShapeType"] = nape_shape_ShapeType;
nape_shape_ShapeType.__name__ = ["nape","shape","ShapeType"];
nape_shape_ShapeType.__properties__ = {get_POLYGON:"get_POLYGON",get_CIRCLE:"get_CIRCLE"}
nape_shape_ShapeType.get_CIRCLE = function() {
	if(zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE = new nape_shape_ShapeType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE;
};
nape_shape_ShapeType.get_POLYGON = function() {
	if(zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON = new nape_shape_ShapeType();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON;
};
nape_shape_ShapeType.prototype = {
	toString: function() {
		if(false) return ""; else if(this == nape_shape_ShapeType.get_CIRCLE()) return "CIRCLE"; else if(this == nape_shape_ShapeType.get_POLYGON()) return "POLYGON"; else return "";
	}
	,__class__: nape_shape_ShapeType
};
var nape_shape_ValidationResult = function() {
};
$hxClasses["nape.shape.ValidationResult"] = nape_shape_ValidationResult;
nape_shape_ValidationResult.__name__ = ["nape","shape","ValidationResult"];
nape_shape_ValidationResult.__properties__ = {get_SELF_INTERSECTING:"get_SELF_INTERSECTING",get_CONCAVE:"get_CONCAVE",get_DEGENERATE:"get_DEGENERATE",get_VALID:"get_VALID"}
nape_shape_ValidationResult.get_VALID = function() {
	if(zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID = new nape_shape_ValidationResult();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID;
};
nape_shape_ValidationResult.get_DEGENERATE = function() {
	if(zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE = new nape_shape_ValidationResult();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE;
};
nape_shape_ValidationResult.get_CONCAVE = function() {
	if(zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE = new nape_shape_ValidationResult();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE;
};
nape_shape_ValidationResult.get_SELF_INTERSECTING = function() {
	if(zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING = new nape_shape_ValidationResult();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING;
};
nape_shape_ValidationResult.prototype = {
	toString: function() {
		if(false) return ""; else if(this == nape_shape_ValidationResult.get_VALID()) return "VALID"; else if(this == nape_shape_ValidationResult.get_DEGENERATE()) return "DEGENERATE"; else if(this == nape_shape_ValidationResult.get_CONCAVE()) return "CONCAVE"; else if(this == nape_shape_ValidationResult.get_SELF_INTERSECTING()) return "SELF_INTERSECTING"; else return "";
	}
	,__class__: nape_shape_ValidationResult
};
var nape_space_Broadphase = function() {
};
$hxClasses["nape.space.Broadphase"] = nape_space_Broadphase;
nape_space_Broadphase.__name__ = ["nape","space","Broadphase"];
nape_space_Broadphase.__properties__ = {get_SWEEP_AND_PRUNE:"get_SWEEP_AND_PRUNE",get_DYNAMIC_AABB_TREE:"get_DYNAMIC_AABB_TREE"}
nape_space_Broadphase.get_DYNAMIC_AABB_TREE = function() {
	if(zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE = new nape_space_Broadphase();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE;
};
nape_space_Broadphase.get_SWEEP_AND_PRUNE = function() {
	if(zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE == null) {
		zpp_$nape_util_ZPP_$Flags.internal = true;
		zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE = new nape_space_Broadphase();
		zpp_$nape_util_ZPP_$Flags.internal = false;
	}
	return zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE;
};
nape_space_Broadphase.prototype = {
	toString: function() {
		if(false) return ""; else if(this == nape_space_Broadphase.get_DYNAMIC_AABB_TREE()) return "DYNAMIC_AABB_TREE"; else if(this == nape_space_Broadphase.get_SWEEP_AND_PRUNE()) return "SWEEP_AND_PRUNE"; else return "";
	}
	,__class__: nape_space_Broadphase
};
var nape_space_Space = function(gravity,broadphase) {
	this.zpp_inner = null;
	this.zpp_inner = new zpp_$nape_space_ZPP_$Space(gravity == null?null:gravity.zpp_inner,broadphase);
	this.zpp_inner.outer = this;
	if(gravity != null) {
		if(gravity.zpp_inner.weak) {
			gravity.dispose();
			true;
		} else false;
	}
};
$hxClasses["nape.space.Space"] = nape_space_Space;
nape_space_Space.__name__ = ["nape","space","Space"];
nape_space_Space.prototype = {
	get_bodies: function() {
		return this.zpp_inner.wrap_bodies;
	}
	,get_constraints: function() {
		return this.zpp_inner.wrap_constraints;
	}
	,get_listeners: function() {
		return this.zpp_inner.wrap_listeners;
	}
	,step: function(deltaTime,velocityIterations,positionIterations) {
		if(positionIterations == null) positionIterations = 10;
		if(velocityIterations == null) velocityIterations = 10;
		this.zpp_inner.step(deltaTime,velocityIterations,positionIterations);
	}
	,__class__: nape_space_Space
	,__properties__: {get_listeners:"get_listeners",get_constraints:"get_constraints",get_bodies:"get_bodies"}
};
var spriter_definitions_TimelineKey = function(fast) {
	this.time = 0;
	if(fast != null) {
		if(fast.has.resolve("id")) this.id = Std.parseInt(fast.att.resolve("id")); else this.id = 0;
		if(fast.has.resolve("time")) this.time = Std.parseInt(fast.att.resolve("time")); else this.time = 0;
		if(fast.has.resolve("curve_type")) this.curveType = Type.createEnum(spriter_definitions_CurveType,fast.att.resolve("curve_type").toUpperCase()); else this.curveType = spriter_definitions_CurveType.LINEAR;
		if(fast.has.resolve("c1")) this.c1 = Std.parseFloat(fast.att.resolve("c1")); else this.c1 = 0;
		if(fast.has.resolve("c2")) this.c2 = Std.parseFloat(fast.att.resolve("c2")); else this.c2 = 0;
	}
};
$hxClasses["spriter.definitions.TimelineKey"] = spriter_definitions_TimelineKey;
spriter_definitions_TimelineKey.__name__ = ["spriter","definitions","TimelineKey"];
spriter_definitions_TimelineKey.prototype = {
	copy: function() {
		var copy = new spriter_definitions_TimelineKey();
		return this.clone(copy);
	}
	,clone: function(clone) {
		clone.id = this.id;
		clone.time = this.time;
		clone.curveType = this.curveType;
		clone.c1 = this.c1;
		clone.c2 = this.c2;
		return clone;
	}
	,interpolate: function(nextKey,nextKeyTime,currentTime) {
		this.linearKey(nextKey,this.getTWithNextKey(nextKey,nextKeyTime,currentTime));
	}
	,getTWithNextKey: function(nextKey,nextKeyTime,currentTime) {
		if(this.curveType == spriter_definitions_CurveType.INSTANT || this.time == nextKey.time) return 0;
		var t = (currentTime - this.time) / (nextKey.time - this.time);
		if(this.curveType == spriter_definitions_CurveType.LINEAR) return t; else if(this.curveType == spriter_definitions_CurveType.QUADRATIC) return this.quadratic(0.0,this.c1,1.0,t); else if(this.curveType == spriter_definitions_CurveType.CUBIC) return this.cubic(0.0,this.c1,this.c2,1.0,t);
		return 0;
	}
	,linear: function(a,b,t) {
		return (b - a) * t + a;
	}
	,linearKey: function(keyB,t) {
		console.log("Has to be overriden");
		null;
		return;
	}
	,angleLinear: function(angleA,angleB,spin,t) {
		if(spin == 0) return angleA;
		if(spin > 0) {
			if(angleB - angleA < 0) angleB += 360;
		} else if(spin < 0) {
			if(angleB - angleA > 0) angleB -= 360;
		}
		return this.linear(angleA,angleB,t);
	}
	,quadratic: function(a,b,c,t) {
		return this.linear(this.linear(a,b,t),this.linear(b,c,t),t);
	}
	,cubic: function(a,b,c,d,t) {
		return this.linear(this.quadratic(a,b,c,t),this.quadratic(b,c,d,t),t);
	}
	,__class__: spriter_definitions_TimelineKey
};
var spriter_definitions_SpatialTimelineKey = function(fast) {
	spriter_definitions_TimelineKey.call(this,fast);
	if(fast != null) {
		var spin;
		if(fast.has.resolve("spin")) spin = Std.parseInt(fast.att.resolve("spin")); else spin = 1;
		if(fast.hasNode.resolve("object")) fast = fast.node.resolve("object"); else fast = fast.node.resolve("bone");
		var x;
		if(fast.has.resolve("x")) x = Std.parseFloat(fast.att.resolve("x")); else x = 0;
		var y;
		if(fast.has.resolve("y")) y = Std.parseFloat(fast.att.resolve("y")); else y = 0;
		var angle;
		if(fast.has.resolve("angle")) angle = Std.parseFloat(fast.att.resolve("angle")); else angle = 0;
		var scale_x;
		if(fast.has.resolve("scale_x")) scale_x = Std.parseFloat(fast.att.resolve("scale_x")); else scale_x = 1;
		var scale_y;
		if(fast.has.resolve("scale_y")) scale_y = Std.parseFloat(fast.att.resolve("scale_y")); else scale_y = 1;
		var alpha;
		if(fast.has.resolve("a")) alpha = Std.parseFloat(fast.att.resolve("a")); else alpha = 1;
		this.info = new spriter_definitions_SpatialInfo(x,y,angle,scale_x,scale_y,alpha,spin);
	}
};
$hxClasses["spriter.definitions.SpatialTimelineKey"] = spriter_definitions_SpatialTimelineKey;
spriter_definitions_SpatialTimelineKey.__name__ = ["spriter","definitions","SpatialTimelineKey"];
spriter_definitions_SpatialTimelineKey.__super__ = spriter_definitions_TimelineKey;
spriter_definitions_SpatialTimelineKey.prototype = $extend(spriter_definitions_TimelineKey.prototype,{
	copy: function() {
		var copy = new spriter_definitions_SpatialTimelineKey();
		return this.clone(copy);
	}
	,clone: function(clone) {
		spriter_definitions_TimelineKey.prototype.clone.call(this,clone);
		var c = clone;
		c.info = this.info.copy();
		return c;
	}
	,linearSpatialInfo: function(infoA,infoB,spin,t) {
		this.info.x = this.linear(infoA.x,infoB.x,t);
		this.info.y = this.linear(infoA.y,infoB.y,t);
		this.info.angle = this.angleLinear(infoA.angle,infoB.angle,spin,t);
		this.info.scaleX = this.linear(infoA.scaleX,infoB.scaleX,t);
		this.info.scaleY = this.linear(infoA.scaleY,infoB.scaleY,t);
		this.info.a = this.linear(infoA.a,infoB.a,t);
	}
	,paint: function(pivotX,pivotY) {
		return new spriter_definitions_PivotInfo(pivotX,pivotY);
	}
	,__class__: spriter_definitions_SpatialTimelineKey
});
var spriter_definitions_BoneTimelineKey = function(fast) {
	this.paintDebugBones = true;
	if(fast != null) {
		if(fast.has.resolve("length")) this.length = Std.parseInt(fast.att.resolve("length")); else this.length = 200;
		if(fast.has.resolve("width")) this.width = Std.parseInt(fast.att.resolve("width")); else this.width = 10;
	}
	spriter_definitions_SpatialTimelineKey.call(this,fast);
};
$hxClasses["spriter.definitions.BoneTimelineKey"] = spriter_definitions_BoneTimelineKey;
spriter_definitions_BoneTimelineKey.__name__ = ["spriter","definitions","BoneTimelineKey"];
spriter_definitions_BoneTimelineKey.__super__ = spriter_definitions_SpatialTimelineKey;
spriter_definitions_BoneTimelineKey.prototype = $extend(spriter_definitions_SpatialTimelineKey.prototype,{
	copy: function() {
		var copy = new spriter_definitions_BoneTimelineKey();
		return this.clone(copy);
	}
	,clone: function(clone) {
		spriter_definitions_SpatialTimelineKey.prototype.clone.call(this,clone);
		var c = clone;
		c.length = this.length;
		c.width = this.width;
		c.paintDebugBones = this.paintDebugBones;
		return c;
	}
	,paint: function(pivotX,pivotY) {
		if(this.paintDebugBones) {
			var drawLength = this.length * this.info.scaleX;
			var drawHeight = this.width * this.info.scaleY;
		}
		return new spriter_definitions_PivotInfo(pivotX,pivotY);
	}
	,linearKey: function(keyB,t) {
		if(!Std["is"](keyB,spriter_definitions_BoneTimelineKey)) throw new js__$Boot_HaxeError("keyB must be BoneTimelineKeys");
		var keyBBone;
		keyBBone = js_Boot.__cast(keyB , spriter_definitions_BoneTimelineKey);
		this.linearSpatialInfo(this.info,keyBBone.info,this.info.spin,t);
		if(this.paintDebugBones) {
			this.length = Std["int"](this.linear(this.length,keyBBone.length,t));
			this.width = Std["int"](this.linear(this.width,keyBBone.width,t));
		}
	}
	,__class__: spriter_definitions_BoneTimelineKey
});
var spriter_definitions_CharacterMap = function(fast) {
	this.maps = [];
	this.id = Std.parseInt(fast.att.resolve("id"));
	this.name = fast.att.resolve("name");
	var $it0 = fast.nodes.resolve("map").iterator();
	while( $it0.hasNext() ) {
		var m = $it0.next();
		this.maps.push(new spriter_definitions_MapInstruction(m));
	}
};
$hxClasses["spriter.definitions.CharacterMap"] = spriter_definitions_CharacterMap;
spriter_definitions_CharacterMap.__name__ = ["spriter","definitions","CharacterMap"];
spriter_definitions_CharacterMap.prototype = {
	__class__: spriter_definitions_CharacterMap
};
var spriter_definitions_MainlineKey = function(fast) {
	this.boneRefs = [];
	this.objectRefs = [];
	this.id = Std.parseInt(fast.att.resolve("id"));
	if(fast.has.resolve("time")) this.time = Std.parseInt(fast.att.resolve("time")); else this.time = 0;
	var $it0 = fast.nodes.resolve("bone_ref").iterator();
	while( $it0.hasNext() ) {
		var br = $it0.next();
		this.boneRefs.push(new spriter_definitions_Ref(br));
	}
	var $it1 = fast.nodes.resolve("object_ref").iterator();
	while( $it1.hasNext() ) {
		var or = $it1.next();
		this.objectRefs.push(new spriter_definitions_Ref(or));
	}
};
$hxClasses["spriter.definitions.MainlineKey"] = spriter_definitions_MainlineKey;
spriter_definitions_MainlineKey.__name__ = ["spriter","definitions","MainlineKey"];
spriter_definitions_MainlineKey.prototype = {
	__class__: spriter_definitions_MainlineKey
};
var spriter_definitions_MapInstruction = function(fast) {
	this.folder = Std.parseInt(fast.att.resolve("folder"));
	this.file = Std.parseInt(fast.att.resolve("file"));
	if(fast.has.resolve("target_folder")) this.tarFolder = Std.parseInt(fast.att.resolve("target_folder")); else this.tarFolder = -1;
	if(fast.has.resolve("target_file")) this.tarFile = Std.parseInt(fast.att.resolve("target_file")); else this.tarFile = -1;
};
$hxClasses["spriter.definitions.MapInstruction"] = spriter_definitions_MapInstruction;
spriter_definitions_MapInstruction.__name__ = ["spriter","definitions","MapInstruction"];
spriter_definitions_MapInstruction.prototype = {
	__class__: spriter_definitions_MapInstruction
};
var spriter_definitions_ObjectTimelineKey = function(fast,objectType) {
	spriter_definitions_SpatialTimelineKey.call(this,fast);
	if(fast != null) {
		this.type = objectType;
		fast = fast.node.resolve("object");
		this.useDefaultPivot = !fast.has.resolve("pivot_x") && !fast.has.resolve("pivot_y");
		if(fast.has.resolve("pivot_x")) this.pivot_x = Std.parseFloat(fast.att.resolve("pivot_x")); else this.pivot_x = 0;
		if(fast.has.resolve("pivot_y")) this.pivot_y = Std.parseFloat(fast.att.resolve("pivot_y")); else this.pivot_y = 1;
	}
};
$hxClasses["spriter.definitions.ObjectTimelineKey"] = spriter_definitions_ObjectTimelineKey;
spriter_definitions_ObjectTimelineKey.__name__ = ["spriter","definitions","ObjectTimelineKey"];
spriter_definitions_ObjectTimelineKey.__super__ = spriter_definitions_SpatialTimelineKey;
spriter_definitions_ObjectTimelineKey.prototype = $extend(spriter_definitions_SpatialTimelineKey.prototype,{
	copy: function() {
		var copy = new spriter_definitions_ObjectTimelineKey();
		return this.clone(copy);
	}
	,clone: function(clone) {
		spriter_definitions_SpatialTimelineKey.prototype.clone.call(this,clone);
		var c = clone;
		c.useDefaultPivot = this.useDefaultPivot;
		c.pivot_x = this.pivot_x;
		c.pivot_y = this.pivot_y;
		c.type = this.type;
		return c;
	}
	,paint: function(pivotX,pivotY) {
		var paintPivotX;
		var paintPivotY;
		if(this.useDefaultPivot) {
			paintPivotX = pivotX;
			paintPivotY = pivotY;
		} else {
			paintPivotX = this.pivot_x;
			paintPivotY = this.pivot_y;
		}
		return new spriter_definitions_PivotInfo(paintPivotX,paintPivotY);
	}
	,linearKey: function(keyB,t) {
		if(!Std["is"](keyB,spriter_definitions_ObjectTimelineKey)) throw new js__$Boot_HaxeError("keyB must be ObjectTimelineKey");
		var keyBSprite;
		keyBSprite = js_Boot.__cast(keyB , spriter_definitions_ObjectTimelineKey);
		this.linearSpatialInfo(this.info,keyBSprite.info,this.info.spin,t);
		if(!this.useDefaultPivot) {
			this.pivot_x = this.linear(this.pivot_x,keyBSprite.pivot_x,t);
			this.pivot_y = this.linear(this.pivot_y,keyBSprite.pivot_y,t);
		}
	}
	,__class__: spriter_definitions_ObjectTimelineKey
});
var spriter_definitions_PivotInfo = function(pivotX,pivotY) {
	if(pivotY == null) pivotY = 1;
	if(pivotX == null) pivotX = 0;
	this.pivotX = pivotX;
	this.pivotY = pivotY;
};
$hxClasses["spriter.definitions.PivotInfo"] = spriter_definitions_PivotInfo;
spriter_definitions_PivotInfo.__name__ = ["spriter","definitions","PivotInfo"];
spriter_definitions_PivotInfo.prototype = {
	__class__: spriter_definitions_PivotInfo
};
var spriter_definitions_Quadrilateral = function(p1,p2,p3,p4) {
	this.p1 = p1;
	this.p2 = p2;
	this.p3 = p3;
	this.p4 = p4;
};
$hxClasses["spriter.definitions.Quadrilateral"] = spriter_definitions_Quadrilateral;
spriter_definitions_Quadrilateral.__name__ = ["spriter","definitions","Quadrilateral"];
spriter_definitions_Quadrilateral.prototype = {
	__class__: spriter_definitions_Quadrilateral
};
var spriter_definitions_QuadPoint = function(x,y) {
	if(y == null) y = 0;
	if(x == null) x = 0;
	this.x = x;
	this.y = y;
};
$hxClasses["spriter.definitions.QuadPoint"] = spriter_definitions_QuadPoint;
spriter_definitions_QuadPoint.__name__ = ["spriter","definitions","QuadPoint"];
spriter_definitions_QuadPoint.prototype = {
	__class__: spriter_definitions_QuadPoint
};
var spriter_definitions_Ref = function(fast) {
	this.id = Std.parseInt(fast.att.resolve("id"));
	if(fast.has.resolve("parent")) this.parent = Std.parseInt(fast.att.resolve("parent")); else this.parent = -1;
	this.timeline = Std.parseInt(fast.att.resolve("timeline"));
	this.key = Std.parseInt(fast.att.resolve("key"));
};
$hxClasses["spriter.definitions.Ref"] = spriter_definitions_Ref;
spriter_definitions_Ref.__name__ = ["spriter","definitions","Ref"];
spriter_definitions_Ref.prototype = {
	__class__: spriter_definitions_Ref
};
var spriter_definitions_MetaDispatch = $hxClasses["spriter.definitions.MetaDispatch"] = { __ename__ : ["spriter","definitions","MetaDispatch"], __constructs__ : ["ONCE","ONCE_PER_LOOP","ALWAYS"] };
spriter_definitions_MetaDispatch.ONCE = ["ONCE",0];
spriter_definitions_MetaDispatch.ONCE.__enum__ = spriter_definitions_MetaDispatch;
spriter_definitions_MetaDispatch.ONCE_PER_LOOP = ["ONCE_PER_LOOP",1];
spriter_definitions_MetaDispatch.ONCE_PER_LOOP.__enum__ = spriter_definitions_MetaDispatch;
spriter_definitions_MetaDispatch.ALWAYS = ["ALWAYS",2];
spriter_definitions_MetaDispatch.ALWAYS.__enum__ = spriter_definitions_MetaDispatch;
spriter_definitions_MetaDispatch.__empty_constructs__ = [spriter_definitions_MetaDispatch.ONCE,spriter_definitions_MetaDispatch.ONCE_PER_LOOP,spriter_definitions_MetaDispatch.ALWAYS];
var spriter_interfaces_IScml = function() { };
$hxClasses["spriter.interfaces.IScml"] = spriter_interfaces_IScml;
spriter_interfaces_IScml.__name__ = ["spriter","interfaces","IScml"];
spriter_interfaces_IScml.prototype = {
	__class__: spriter_interfaces_IScml
};
var spriter_definitions_ScmlObject = function(source) {
	this.metaDispatch = spriter_definitions_MetaDispatch.ONCE_PER_LOOP;
	this.endAnimRemoval = true;
	this.currentAnimation = "";
	this.currentEntity = "";
	if(source != null) {
		this.folders = [];
		this.entities = new haxe_ds_StringMap();
		var fast = new haxe_xml_Fast(source.firstElement());
		if(fast.att.resolve("scml_version") != "1.0") console.log("Warning, unsupported format.");
		var $it0 = fast.get_elements();
		while( $it0.hasNext() ) {
			var el = $it0.next();
			if(el.get_name() == "folder") this.folders.push(new spriter_definitions_SpriterFolder(el)); else if(el.get_name() == "entity") {
				var key = el.att.resolve("name");
				var value = new spriter_definitions_SpriterEntity(el);
				this.entities.set(key,value);
				if(el.att.resolve("id") == "0") {
					this.currentEntity = el.att.resolve("name");
					this.currentAnimation = el.node.resolve("animation").att.resolve("name");
				}
			} else if(el.get_name() == "tag_list") {
				if(this.tags == null) this.tags = [];
				var $it1 = el.get_elements();
				while( $it1.hasNext() ) {
					var t = $it1.next();
					this.tags.push(t.att.resolve("name"));
				}
			}
		}
		this.activeCharacterMap = this.copyFolders();
	}
};
$hxClasses["spriter.definitions.ScmlObject"] = spriter_definitions_ScmlObject;
spriter_definitions_ScmlObject.__name__ = ["spriter","definitions","ScmlObject"];
spriter_definitions_ScmlObject.__interfaces__ = [spriter_interfaces_IScml];
spriter_definitions_ScmlObject.prototype = {
	getPivots: function(folder,file) {
		var currentFile = this.activeCharacterMap[folder].files[file];
		if(currentFile != null) return new spriter_definitions_PivotInfo(currentFile.pivotX,currentFile.pivotY); else return new spriter_definitions_PivotInfo();
	}
	,getFileName: function(folder,file) {
		var currentFile = this.activeCharacterMap[folder].files[file];
		if(currentFile != null) return currentFile.name; else return null;
	}
	,onEndAnim: function() {
		if(this.endAnimCallback != null) {
			var tempCallback = this.endAnimCallback;
			if(this.endAnimRemoval) this.endAnimCallback = null;
			tempCallback();
		}
	}
	,onTag: function(tag) {
		if(this.tagCallback != null) this.tagCallback(this.tags[tag]);
	}
	,onVar: function(id,value) {
		var variable = this.entities.get(this.currentEntity).variables[id];
		if(variable.set(value)) {
			if(this.varChangeCallback != null) this.varChangeCallback(variable);
		}
	}
	,setCurrentTime: function(newTime,library,characterInfo) {
		var currentEnt = this.entities.get(this.currentEntity);
		var currentAnim = currentEnt.animations.get(this.currentAnimation);
		this.spriterSpatialInfo = characterInfo;
		currentAnim.setCurrentTime(newTime,library,this,currentEnt);
	}
	,copyFolders: function() {
		var newFolders = [];
		var _g1 = 0;
		var _g = this.folders.length;
		while(_g1 < _g) {
			var i = _g1++;
			newFolders[i] = this.folders[i].copy();
		}
		return newFolders;
	}
	,__class__: spriter_definitions_ScmlObject
};
var spriter_definitions_SpatialInfo = function(x,y,angle,scaleX,scaleY,a,spin) {
	if(spin == null) spin = 1;
	if(a == null) a = 1;
	if(scaleY == null) scaleY = 1;
	if(scaleX == null) scaleX = 1;
	if(angle == null) angle = 0;
	if(y == null) y = 0;
	if(x == null) x = 0;
	this.spin = 1;
	this.a = 1;
	this.scaleY = 1;
	this.scaleX = 1;
	this.angle = 0;
	this.y = 0;
	this.x = 0;
	this.x = x;
	this.y = y;
	this.angle = angle;
	this.scaleX = scaleX;
	this.scaleY = scaleY;
	this.a = a;
	this.spin = spin;
};
$hxClasses["spriter.definitions.SpatialInfo"] = spriter_definitions_SpatialInfo;
spriter_definitions_SpatialInfo.__name__ = ["spriter","definitions","SpatialInfo"];
spriter_definitions_SpatialInfo.prototype = {
	unmapFromParent: function(parentInfo) {
		var unmapped_x;
		var unmapped_y;
		var unmapped_angle;
		if(parentInfo.scaleX * parentInfo.scaleY < 0) unmapped_angle = 360 - this.angle + parentInfo.angle; else unmapped_angle = this.angle + parentInfo.angle;
		var unmapped_scaleX = this.scaleX * parentInfo.scaleX;
		var unmapped_scaleY = this.scaleY * parentInfo.scaleY;
		var unmapped_alpha = this.a * parentInfo.a;
		if(this.x != 0 || this.y != 0) {
			var preMultX = this.x * parentInfo.scaleX;
			var preMultY = this.y * parentInfo.scaleY;
			var parentRad = spriter_util_SpriterUtil.toRadians(spriter_util_SpriterUtil.under360(parentInfo.angle));
			var s = Math.sin(parentRad);
			var c = Math.cos(parentRad);
			unmapped_x = preMultX * c - preMultY * s + parentInfo.x;
			unmapped_y = preMultX * s + preMultY * c + parentInfo.y;
		} else {
			unmapped_x = parentInfo.x;
			unmapped_y = parentInfo.y;
		}
		return new spriter_definitions_SpatialInfo(unmapped_x,unmapped_y,unmapped_angle,unmapped_scaleX,unmapped_scaleY,unmapped_alpha,this.spin);
	}
	,copy: function() {
		var c = new spriter_definitions_SpatialInfo(this.x,this.y,this.angle,this.scaleX,this.scaleY,this.a,this.spin);
		return c;
	}
	,__class__: spriter_definitions_SpatialInfo
};
var spriter_definitions_SpriteTimelineKey = function(fast) {
	spriter_definitions_ObjectTimelineKey.call(this,fast);
	if(fast != null) {
		fast = fast.node.resolve("object");
		if(fast.has.resolve("folder")) this.folder = Std.parseInt(fast.att.resolve("folder")); else this.folder = 0;
		if(fast.has.resolve("file")) this.file = Std.parseInt(fast.att.resolve("file")); else this.file = 0;
	}
};
$hxClasses["spriter.definitions.SpriteTimelineKey"] = spriter_definitions_SpriteTimelineKey;
spriter_definitions_SpriteTimelineKey.__name__ = ["spriter","definitions","SpriteTimelineKey"];
spriter_definitions_SpriteTimelineKey.__super__ = spriter_definitions_ObjectTimelineKey;
spriter_definitions_SpriteTimelineKey.prototype = $extend(spriter_definitions_ObjectTimelineKey.prototype,{
	copy: function() {
		var copy = new spriter_definitions_SpriteTimelineKey();
		return this.clone(copy);
	}
	,clone: function(clone) {
		spriter_definitions_ObjectTimelineKey.prototype.clone.call(this,clone);
		var c = clone;
		c.folder = this.folder;
		c.file = this.file;
		c.useDefaultPivot = this.useDefaultPivot;
		c.pivot_x = this.pivot_x;
		c.pivot_y = this.pivot_y;
		return c;
	}
	,__class__: spriter_definitions_SpriteTimelineKey
});
var spriter_definitions_LoopType = $hxClasses["spriter.definitions.LoopType"] = { __ename__ : ["spriter","definitions","LoopType"], __constructs__ : ["LOOPING","NO_LOOPING"] };
spriter_definitions_LoopType.LOOPING = ["LOOPING",0];
spriter_definitions_LoopType.LOOPING.__enum__ = spriter_definitions_LoopType;
spriter_definitions_LoopType.NO_LOOPING = ["NO_LOOPING",1];
spriter_definitions_LoopType.NO_LOOPING.__enum__ = spriter_definitions_LoopType;
spriter_definitions_LoopType.__empty_constructs__ = [spriter_definitions_LoopType.LOOPING,spriter_definitions_LoopType.NO_LOOPING];
var spriter_definitions_SpriterAnimation = function(fast) {
	this.loop = 0;
	this.mainlineKeys = [];
	this.timelines = [];
	this.id = Std.parseInt(fast.att.resolve("id"));
	this.name = fast.att.resolve("name");
	this.length = Std.parseInt(fast.att.resolve("length"));
	if(fast.has.resolve("looping")) {
		if(fast.att.resolve("looping") == "true") this.loopType = spriter_definitions_LoopType.LOOPING; else this.loopType = spriter_definitions_LoopType.NO_LOOPING;
	} else this.loopType = spriter_definitions_LoopType.LOOPING;
	var $it0 = fast.node.resolve("mainline").nodes.resolve("key").iterator();
	while( $it0.hasNext() ) {
		var mk = $it0.next();
		this.mainlineKeys.push(new spriter_definitions_MainlineKey(mk));
	}
	var $it1 = fast.nodes.resolve("timeline").iterator();
	while( $it1.hasNext() ) {
		var t = $it1.next();
		this.timelines.push(new spriter_definitions_SpriterTimeline(t));
	}
	if(fast.hasNode.resolve("meta")) {
		fast = fast.node.resolve("meta");
		if(fast.hasNode.resolve("tagline")) {
			this.taglines = [];
			var $it2 = fast.node.resolve("tagline").nodes.resolve("key").iterator();
			while( $it2.hasNext() ) {
				var tag = $it2.next();
				this.taglines.push(new spriter_definitions_TaglineKey(tag));
			}
		}
		if(fast.hasNode.resolve("varline")) {
			this.varlines = [];
			var $it3 = fast.nodes.resolve("varline").iterator();
			while( $it3.hasNext() ) {
				var currVar = $it3.next();
				this.varlines.push(new spriter_definitions_Varline(currVar));
			}
		}
	}
};
$hxClasses["spriter.definitions.SpriterAnimation"] = spriter_definitions_SpriterAnimation;
spriter_definitions_SpriterAnimation.__name__ = ["spriter","definitions","SpriterAnimation"];
spriter_definitions_SpriterAnimation.prototype = {
	setCurrentTime: function(newTime,library,root,currentEntity) {
		var currentTime;
		var tempLoop;
		var _g = this.loopType;
		switch(Type.enumIndex(_g)) {
		case 0:
			tempLoop = this.loop;
			this.loop = Std["int"](newTime / this.length);
			currentTime = newTime % this.length;
			this.updateCharacter(this.mainlineKeyFromTime(currentTime),currentTime,library,root,currentEntity);
			if(root.metaDispatch == spriter_definitions_MetaDispatch.ONCE_PER_LOOP && tempLoop != this.loop) this.resetMetaDispatch();
			if(this.loop == 1 && tempLoop < 1) root.onEndAnim();
			break;
		case 1:
			currentTime = Std["int"](Math.min(newTime,this.length));
			this.updateCharacter(this.mainlineKeyFromTime(currentTime),currentTime,library,root,currentEntity);
			if(currentTime == this.length) root.onEndAnim();
			break;
		}
	}
	,updateCharacter: function(mainKey,newTime,library,root,currentEntity) {
		var transformedBoneKeys = [];
		var currentKey;
		var currentRef;
		var spatialInfo;
		var len = mainKey.boneRefs.length;
		var _g = 0;
		while(_g < len) {
			var b = _g++;
			currentRef = mainKey.boneRefs[b];
			currentKey = this.keyFromRef(currentRef,newTime);
			if(currentRef.parent >= 0) spatialInfo = transformedBoneKeys[currentRef.parent]; else spatialInfo = root.spriterSpatialInfo;
			spatialInfo = currentKey.info.unmapFromParent(spatialInfo);
			transformedBoneKeys.push(spatialInfo);
		}
		this.points = [];
		this.boxes = [];
		len = mainKey.objectRefs.length;
		var _g1 = 0;
		while(_g1 < len) {
			var o = _g1++;
			currentRef = mainKey.objectRefs[o];
			currentKey = this.keyFromRef(currentRef,newTime);
			if(currentRef.parent >= 0) spatialInfo = transformedBoneKeys[currentRef.parent]; else spatialInfo = root.spriterSpatialInfo;
			spatialInfo = currentKey.info.unmapFromParent(spatialInfo);
			var activePivots;
			if(Std["is"](currentKey,spriter_definitions_SpriteTimelineKey)) {
				var currentSpriteKey;
				currentSpriteKey = js_Boot.__cast(currentKey , spriter_definitions_SpriteTimelineKey);
				activePivots = root.getPivots(currentSpriteKey.folder,currentSpriteKey.file);
				activePivots = currentKey.paint(activePivots.pivotX,activePivots.pivotY);
				var currentKeyName = root.getFileName(currentSpriteKey.folder,currentSpriteKey.file);
				if(currentKeyName != null) library.addGraphic(root.spriterName,currentRef.timeline,currentRef.key,currentKeyName,spatialInfo,activePivots);
			} else {
				activePivots = new spriter_definitions_PivotInfo();
				activePivots = currentKey.paint(activePivots.pivotX,activePivots.pivotY);
				var currentObjectKey;
				currentObjectKey = js_Boot.__cast(currentKey , spriter_definitions_ObjectTimelineKey);
				if(currentObjectKey.type == spriter_definitions_ObjectType.POINT) this.points.push(library.compute(spatialInfo,activePivots,0,0)); else {
					var currentBox;
					var key = this.getTimelineName(currentRef.timeline);
					currentBox = currentEntity.boxes_info.get(key);
					this.boxes.push(library.computeRectCoordinates(spatialInfo,activePivots,currentBox.width,currentBox.height));
				}
			}
		}
		if(this.taglines != null) {
			var _g2 = 0;
			var _g11 = this.taglines;
			while(_g2 < _g11.length) {
				var tag = _g11[_g2];
				++_g2;
				if(tag.time == mainKey.time) {
					if(root.metaDispatch == spriter_definitions_MetaDispatch.ALWAYS) root.onTag(tag.id); else if(root.metaDispatch == spriter_definitions_MetaDispatch.ONCE_PER_LOOP && mainKey.time != tag.get_lastDispatched()) {
						tag.set_lastDispatched(mainKey.time);
						root.onTag(tag.id);
					} else if(root.metaDispatch == spriter_definitions_MetaDispatch.ONCE && !tag.get_dispatched()) {
						tag.set_lastDispatched(mainKey.time);
						root.onTag(tag.id);
					}
				}
			}
		}
		if(this.varlines != null) {
			var _g3 = 0;
			var _g12 = this.varlines;
			while(_g3 < _g12.length) {
				var _var = _g12[_g3];
				++_g3;
				var _g21 = 0;
				var _g31 = _var.keys;
				while(_g21 < _g31.length) {
					var keyVar = _g31[_g21];
					++_g21;
					if(keyVar.time == mainKey.time) {
						if(root.metaDispatch == spriter_definitions_MetaDispatch.ALWAYS) root.onVar(_var.id,keyVar.value); else if(root.metaDispatch == spriter_definitions_MetaDispatch.ONCE_PER_LOOP && mainKey.time != keyVar.get_lastDispatched()) {
							keyVar.set_lastDispatched(mainKey.time);
							root.onVar(_var.id,keyVar.value);
						} else if(root.metaDispatch == spriter_definitions_MetaDispatch.ONCE && !keyVar.get_dispatched()) {
							keyVar.set_lastDispatched(mainKey.time);
							root.onVar(_var.id,keyVar.value);
						}
					}
				}
			}
		}
	}
	,mainlineKeyFromTime: function(time) {
		var currentMainKey = 0;
		var len = this.mainlineKeys.length;
		var _g = 0;
		while(_g < len) {
			var m = _g++;
			if(this.mainlineKeys[m].time <= time) currentMainKey = m;
			if(this.mainlineKeys[m].time >= time) break;
		}
		return this.mainlineKeys[currentMainKey];
	}
	,keyFromRef: function(ref,newTime) {
		var timeline = this.timelines[ref.timeline];
		var keyA = timeline.keys[ref.key].copy();
		if(timeline.keys.length == 1 || keyA.curveType == spriter_definitions_CurveType.INSTANT) return keyA;
		var nextKeyIndex = ref.key + 1;
		if(nextKeyIndex >= timeline.keys.length) {
			if(this.loopType == spriter_definitions_LoopType.LOOPING) nextKeyIndex = 0; else return keyA;
		}
		var keyB = timeline.keys[nextKeyIndex].copy();
		var keyBTime = keyB.time;
		if(keyBTime < keyA.time) keyBTime = keyBTime + this.length;
		keyA.interpolate(keyB,keyBTime,newTime);
		return keyA;
	}
	,getTimelineName: function(id) {
		return this.timelines[id].name;
	}
	,resetMetaDispatch: function() {
		if(this.taglines != null) {
			var _g = 0;
			var _g1 = this.taglines;
			while(_g < _g1.length) {
				var tag = _g1[_g];
				++_g;
				tag.set_dispatched(false);
			}
		}
	}
	,__class__: spriter_definitions_SpriterAnimation
};
var spriter_definitions_SpriterBox = function(fast) {
	if(fast != null) {
		this.name = fast.att.resolve("name");
		if(fast.has.resolve("pivot_x")) this.pivotX = Std.parseFloat(fast.att.resolve("pivot_x")); else this.pivotX = 0;
		if(fast.has.resolve("pivot_y")) this.pivotY = Std.parseFloat(fast.att.resolve("pivot_y")); else this.pivotY = 0;
		if(fast.has.resolve("w")) this.width = Std.parseFloat(fast.att.resolve("w")); else this.width = 0;
		if(fast.has.resolve("h")) this.height = Std.parseFloat(fast.att.resolve("h")); else this.height = 0;
	}
};
$hxClasses["spriter.definitions.SpriterBox"] = spriter_definitions_SpriterBox;
spriter_definitions_SpriterBox.__name__ = ["spriter","definitions","SpriterBox"];
spriter_definitions_SpriterBox.prototype = {
	__class__: spriter_definitions_SpriterBox
};
var spriter_definitions_SpriterEntity = function(fast) {
	this.characterMaps = new haxe_ds_StringMap();
	this.animations = new haxe_ds_StringMap();
	this.variables = [];
	this.boxes_info = new haxe_ds_StringMap();
	this.id = Std.parseInt(fast.att.resolve("id"));
	this.name = fast.att.resolve("name");
	var $it0 = fast.nodes.resolve("character_map").iterator();
	while( $it0.hasNext() ) {
		var cm = $it0.next();
		var key = cm.att.resolve("name");
		var value = new spriter_definitions_CharacterMap(cm);
		this.characterMaps.set(key,value);
	}
	if(fast.hasNode.resolve("var_defs")) {
		var $it1 = fast.node.resolve("var_defs").get_elements();
		while( $it1.hasNext() ) {
			var v = $it1.next();
			var _g = v.att.resolve("type");
			switch(_g) {
			case "int":
				this.variables.push(new spriter_vars_VariableInt(v.att.resolve("name"),Std.parseInt(v.att.resolve("default"))));
				break;
			case "string":
				this.variables.push(new spriter_vars_VariableString(v.att.resolve("name"),Std.string(v.att.resolve("default"))));
				break;
			case "float":
				this.variables.push(new spriter_vars_VariableFloat(v.att.resolve("name"),Std.parseFloat(v.att.resolve("default"))));
				break;
			}
		}
	}
	var $it2 = fast.nodes.resolve("obj_info").iterator();
	while( $it2.hasNext() ) {
		var oi = $it2.next();
		var key1 = oi.att.resolve("name");
		var value1 = new spriter_definitions_SpriterBox(oi);
		this.boxes_info.set(key1,value1);
	}
	var $it3 = fast.nodes.resolve("animation").iterator();
	while( $it3.hasNext() ) {
		var a = $it3.next();
		var key2 = a.att.resolve("name");
		var value2 = new spriter_definitions_SpriterAnimation(a);
		this.animations.set(key2,value2);
	}
};
$hxClasses["spriter.definitions.SpriterEntity"] = spriter_definitions_SpriterEntity;
spriter_definitions_SpriterEntity.__name__ = ["spriter","definitions","SpriterEntity"];
spriter_definitions_SpriterEntity.prototype = {
	__class__: spriter_definitions_SpriterEntity
};
var spriter_definitions_SpriterFile = function(fast) {
	if(fast != null) {
		this.id = Std.parseInt(fast.att.resolve("id"));
		this.name = fast.att.resolve("name");
		if(fast.has.resolve("pivot_x")) this.pivotX = Std.parseFloat(fast.att.resolve("pivot_x")); else this.pivotX = 0;
		if(fast.has.resolve("pivot_y")) this.pivotY = Std.parseFloat(fast.att.resolve("pivot_y")); else this.pivotY = 1;
		if(fast.has.resolve("width")) this.width = Std.parseFloat(fast.att.resolve("width")); else this.width = 0;
		if(fast.has.resolve("height")) this.height = Std.parseFloat(fast.att.resolve("height")); else this.height = 0;
	}
};
$hxClasses["spriter.definitions.SpriterFile"] = spriter_definitions_SpriterFile;
spriter_definitions_SpriterFile.__name__ = ["spriter","definitions","SpriterFile"];
spriter_definitions_SpriterFile.prototype = {
	copy: function() {
		var copy = new spriter_definitions_SpriterFile();
		copy.name = this.name;
		copy.id = this.id;
		copy.pivotX = this.pivotX;
		copy.pivotY = this.pivotY;
		copy.width = this.width;
		copy.height = this.height;
		return copy;
	}
	,__class__: spriter_definitions_SpriterFile
};
var spriter_definitions_SpriterFolder = function(fast) {
	this.name = "";
	this.files = [];
	if(fast != null) {
		this.id = Std.parseInt(fast.att.resolve("id"));
		if(fast.hasNode.resolve("name")) this.name = fast.att.resolve("name");
		var $it0 = fast.nodes.resolve("file").iterator();
		while( $it0.hasNext() ) {
			var f = $it0.next();
			this.files.push(new spriter_definitions_SpriterFile(f));
		}
	}
};
$hxClasses["spriter.definitions.SpriterFolder"] = spriter_definitions_SpriterFolder;
spriter_definitions_SpriterFolder.__name__ = ["spriter","definitions","SpriterFolder"];
spriter_definitions_SpriterFolder.prototype = {
	copy: function() {
		var copy = new spriter_definitions_SpriterFolder();
		copy.name = this.name;
		copy.id = this.id;
		var _g1 = 0;
		var _g = this.files.length;
		while(_g1 < _g) {
			var i = _g1++;
			copy.files[i] = this.files[i].copy();
		}
		return copy;
	}
	,__class__: spriter_definitions_SpriterFolder
};
var spriter_definitions_ObjectType = $hxClasses["spriter.definitions.ObjectType"] = { __ename__ : ["spriter","definitions","ObjectType"], __constructs__ : ["SPRITE","BONE","BOX","POINT","SOUND","ENTITY","VARIABLE"] };
spriter_definitions_ObjectType.SPRITE = ["SPRITE",0];
spriter_definitions_ObjectType.SPRITE.__enum__ = spriter_definitions_ObjectType;
spriter_definitions_ObjectType.BONE = ["BONE",1];
spriter_definitions_ObjectType.BONE.__enum__ = spriter_definitions_ObjectType;
spriter_definitions_ObjectType.BOX = ["BOX",2];
spriter_definitions_ObjectType.BOX.__enum__ = spriter_definitions_ObjectType;
spriter_definitions_ObjectType.POINT = ["POINT",3];
spriter_definitions_ObjectType.POINT.__enum__ = spriter_definitions_ObjectType;
spriter_definitions_ObjectType.SOUND = ["SOUND",4];
spriter_definitions_ObjectType.SOUND.__enum__ = spriter_definitions_ObjectType;
spriter_definitions_ObjectType.ENTITY = ["ENTITY",5];
spriter_definitions_ObjectType.ENTITY.__enum__ = spriter_definitions_ObjectType;
spriter_definitions_ObjectType.VARIABLE = ["VARIABLE",6];
spriter_definitions_ObjectType.VARIABLE.__enum__ = spriter_definitions_ObjectType;
spriter_definitions_ObjectType.__empty_constructs__ = [spriter_definitions_ObjectType.SPRITE,spriter_definitions_ObjectType.BONE,spriter_definitions_ObjectType.BOX,spriter_definitions_ObjectType.POINT,spriter_definitions_ObjectType.SOUND,spriter_definitions_ObjectType.ENTITY,spriter_definitions_ObjectType.VARIABLE];
var spriter_definitions_SpriterTimeline = function(fast) {
	this.keys = [];
	this.id = Std.parseInt(fast.att.resolve("id"));
	if(fast.has.resolve("name")) this.name = fast.att.resolve("name"); else this.name = "";
	if(fast.has.resolve("object_type")) this.objectType = Type.createEnum(spriter_definitions_ObjectType,fast.att.resolve("object_type").toUpperCase()); else this.objectType = spriter_definitions_ObjectType.SPRITE;
	var _g = this.objectType;
	switch(Type.enumIndex(_g)) {
	case 0:
		var $it0 = fast.nodes.resolve("key").iterator();
		while( $it0.hasNext() ) {
			var k = $it0.next();
			this.keys.push(new spriter_definitions_SpriteTimelineKey(k));
		}
		break;
	case 1:
		var $it1 = fast.nodes.resolve("key").iterator();
		while( $it1.hasNext() ) {
			var k1 = $it1.next();
			this.keys.push(new spriter_definitions_BoneTimelineKey(k1));
		}
		break;
	case 3:
		var $it2 = fast.nodes.resolve("key").iterator();
		while( $it2.hasNext() ) {
			var k2 = $it2.next();
			this.keys.push(new spriter_definitions_ObjectTimelineKey(k2,this.objectType));
		}
		break;
	case 2:
		var $it3 = fast.nodes.resolve("key").iterator();
		while( $it3.hasNext() ) {
			var k3 = $it3.next();
			this.keys.push(new spriter_definitions_ObjectTimelineKey(k3,this.objectType));
		}
		break;
	default:
	}
};
$hxClasses["spriter.definitions.SpriterTimeline"] = spriter_definitions_SpriterTimeline;
spriter_definitions_SpriterTimeline.__name__ = ["spriter","definitions","SpriterTimeline"];
spriter_definitions_SpriterTimeline.prototype = {
	__class__: spriter_definitions_SpriterTimeline
};
var spriter_definitions_TaglineKey = function(fast) {
	this._lastDispatched = -1;
	this._dispatched = false;
	this.time = 0;
	if(fast != null) {
		if(fast.has.resolve("id")) this.id = Std.parseInt(fast.att.resolve("id")); else this.id = 0;
		if(fast.has.resolve("time")) this.time = Std.parseInt(fast.att.resolve("time")); else this.time = 0;
		fast = fast.node.resolve("tag");
		this.t = Std.parseInt(fast.att.resolve("t"));
	}
};
$hxClasses["spriter.definitions.TaglineKey"] = spriter_definitions_TaglineKey;
spriter_definitions_TaglineKey.__name__ = ["spriter","definitions","TaglineKey"];
spriter_definitions_TaglineKey.prototype = {
	set_lastDispatched: function(val) {
		this._lastDispatched = val;
		this._dispatched = val != -1;
		return val;
	}
	,get_lastDispatched: function() {
		return this._lastDispatched;
	}
	,set_dispatched: function(val) {
		this._dispatched = val;
		if(!val) this._lastDispatched = -1;
		return val;
	}
	,get_dispatched: function() {
		return this._dispatched;
	}
	,__class__: spriter_definitions_TaglineKey
	,__properties__: {set_lastDispatched:"set_lastDispatched",get_lastDispatched:"get_lastDispatched",set_dispatched:"set_dispatched",get_dispatched:"get_dispatched"}
};
var spriter_definitions_CurveType = $hxClasses["spriter.definitions.CurveType"] = { __ename__ : ["spriter","definitions","CurveType"], __constructs__ : ["INSTANT","LINEAR","QUADRATIC","CUBIC"] };
spriter_definitions_CurveType.INSTANT = ["INSTANT",0];
spriter_definitions_CurveType.INSTANT.__enum__ = spriter_definitions_CurveType;
spriter_definitions_CurveType.LINEAR = ["LINEAR",1];
spriter_definitions_CurveType.LINEAR.__enum__ = spriter_definitions_CurveType;
spriter_definitions_CurveType.QUADRATIC = ["QUADRATIC",2];
spriter_definitions_CurveType.QUADRATIC.__enum__ = spriter_definitions_CurveType;
spriter_definitions_CurveType.CUBIC = ["CUBIC",3];
spriter_definitions_CurveType.CUBIC.__enum__ = spriter_definitions_CurveType;
spriter_definitions_CurveType.__empty_constructs__ = [spriter_definitions_CurveType.INSTANT,spriter_definitions_CurveType.LINEAR,spriter_definitions_CurveType.QUADRATIC,spriter_definitions_CurveType.CUBIC];
var spriter_definitions_Varline = function(fast) {
	if(fast != null) {
		this.id = Std.parseInt(fast.att.resolve("def"));
		this.keys = [];
		var $it0 = fast.nodes.resolve("key").iterator();
		while( $it0.hasNext() ) {
			var key = $it0.next();
			this.keys.push(new spriter_definitions_VarlineKey(key));
		}
	}
};
$hxClasses["spriter.definitions.Varline"] = spriter_definitions_Varline;
spriter_definitions_Varline.__name__ = ["spriter","definitions","Varline"];
spriter_definitions_Varline.prototype = {
	__class__: spriter_definitions_Varline
};
var spriter_definitions_VarlineKey = function(fast) {
	this._lastDispatched = -1;
	this._dispatched = false;
	this.time = 0;
	if(fast != null) {
		if(fast.has.resolve("id")) this.id = Std.parseInt(fast.att.resolve("id")); else this.id = 0;
		if(fast.has.resolve("time")) this.time = Std.parseInt(fast.att.resolve("time")); else this.time = 0;
		this.value = fast.att.resolve("val");
	}
};
$hxClasses["spriter.definitions.VarlineKey"] = spriter_definitions_VarlineKey;
spriter_definitions_VarlineKey.__name__ = ["spriter","definitions","VarlineKey"];
spriter_definitions_VarlineKey.prototype = {
	set_lastDispatched: function(val) {
		this._lastDispatched = val;
		this._dispatched = val != -1;
		return val;
	}
	,get_lastDispatched: function() {
		return this._lastDispatched;
	}
	,get_dispatched: function() {
		return this._dispatched;
	}
	,__class__: spriter_definitions_VarlineKey
	,__properties__: {set_lastDispatched:"set_lastDispatched",get_lastDispatched:"get_lastDispatched",get_dispatched:"get_dispatched"}
};
var spriter_engine_Spriter = function(_name,_scml,_library,_info) {
	this.playbackSpeed = 1;
	this.paused = false;
	this.timeMS = 0;
	this.scml = _scml;
	this.library = _library;
	this.spriterName = _name;
	this.scml.spriterName = this.spriterName;
	this.info = _info;
};
$hxClasses["spriter.engine.Spriter"] = spriter_engine_Spriter;
spriter_engine_Spriter.__name__ = ["spriter","engine","Spriter"];
spriter_engine_Spriter.prototype = {
	advanceTime: function(elapsedMS) {
		if(!this.paused) this.timeMS += Std["int"](elapsedMS * this.playbackSpeed);
		this.scml.setCurrentTime(this.timeMS,this.library,this.info);
	}
	,playAnim: function(name,endAnimCallback,removeCallback) {
		if(removeCallback == null) removeCallback = true;
		if(name == null) {
			if(this.paused) this.paused = false;
			this.resetTime();
			if(endAnimCallback != null) {
				this.scml.endAnimCallback = (function(f,a1,a2,a3) {
					return function() {
						f(a1,a2,a3);
					};
				})(endAnimCallback,this,this.scml.currentEntity,this.scml.currentAnimation);
				this.scml.endAnimRemoval = removeCallback;
			}
			return true;
		} else if((function($this) {
			var $r;
			var this1 = $this.scml.entities.get($this.scml.currentEntity).animations;
			$r = this1.exists(name);
			return $r;
		}(this))) {
			if(this.paused) this.paused = false;
			this.resetTime();
			this.scml.currentAnimation = name;
			if(endAnimCallback != null) {
				this.scml.endAnimCallback = (function(f1,a11,a21,a31) {
					return function() {
						f1(a11,a21,a31);
					};
				})(endAnimCallback,this,this.scml.currentEntity,name);
				this.scml.endAnimRemoval = removeCallback;
			}
			return true;
		} else return false;
	}
	,resetTime: function() {
		this.timeMS = 0;
	}
	,__class__: spriter_engine_Spriter
};
var spriter_flambe_SpriterMovie = function(pack,scmlFilePath,spriterEntityName) {
	flambe_Component.call(this);
	this._pack = pack;
	var aPath = scmlFilePath.split(".");
	aPath.pop();
	this._basePath = aPath.join(".");
	var scml_str = this._pack.getFile(scmlFilePath).toString();
	this._scml = new spriter_definitions_ScmlObject(Xml.parse(scml_str));
	this._container = new flambe_Entity().add(new flambe_display_Sprite());
	this._library = new spriter_library_FlambeLibrary(this._container,this._pack,this._basePath);
	this._spriter = new spriter_engine_Spriter(spriterEntityName,this._scml,this._library,new spriter_definitions_SpatialInfo());
};
$hxClasses["spriter.flambe.SpriterMovie"] = spriter_flambe_SpriterMovie;
spriter_flambe_SpriterMovie.__name__ = ["spriter","flambe","SpriterMovie"];
spriter_flambe_SpriterMovie.__super__ = flambe_Component;
spriter_flambe_SpriterMovie.prototype = $extend(flambe_Component.prototype,{
	get_name: function() {
		return "SpriterMovie_1";
	}
	,onStart: function() {
		this.owner.addChild(this._container);
	}
	,onUpdate: function(dt) {
		this._library.clear();
		this._spriter.advanceTime(Std["int"](dt * 1000));
	}
	,playAnim: function(sAnimName) {
		this._spriter.playAnim(sAnimName);
		return this;
	}
	,__class__: spriter_flambe_SpriterMovie
});
var spriter_library_AbstractLibrary = function(basePath) {
	this._basePath = basePath;
};
$hxClasses["spriter.library.AbstractLibrary"] = spriter_library_AbstractLibrary;
spriter_library_AbstractLibrary.__name__ = ["spriter","library","AbstractLibrary"];
spriter_library_AbstractLibrary.prototype = {
	addGraphic: function(group,timeline,key,name,info,pivots) {
		throw new js__$Boot_HaxeError("must be overrided");
	}
	,compute: function(info,pivots,width,height) {
		var degreesUnder360 = spriter_util_SpriterUtil.under360(info.angle);
		var rad = spriter_util_SpriterUtil.toRadians(degreesUnder360);
		var s = Math.sin(rad);
		var c = Math.cos(rad);
		var pivotX = info.x;
		var pivotY = info.y;
		var preX = info.x - pivots.pivotX * width * info.scaleX;
		var preY = info.y + (1 - pivots.pivotY) * height * info.scaleY;
		var x2 = (preX - pivotX) * c - (preY - pivotY) * s + pivotX;
		var y2 = (preX - pivotX) * s + (preY - pivotY) * c + pivotY;
		return new spriter_definitions_SpatialInfo(x2,-y2,degreesUnder360,info.scaleX,info.scaleY,info.a,info.spin);
	}
	,computeRectCoordinates: function(info,pivots,width,height) {
		var degreesUnder360 = -spriter_util_SpriterUtil.under360(info.angle);
		var rad = spriter_util_SpriterUtil.toRadians(degreesUnder360);
		var s = Math.sin(rad);
		var c = Math.cos(rad);
		var pivotX = info.x;
		var pivotY = -info.y;
		var x1 = pivotX - width * info.scaleX * pivots.pivotX;
		var y1 = pivotY - height * info.scaleY * (1 - pivots.pivotY);
		var x2 = x1 + width * info.scaleX;
		var y2 = y1;
		x2 = (x2 - pivotX) * c - (y2 - pivotY) * s + pivotX;
		y2 = (x2 - pivotX) * s + (y2 - pivotY) * c + pivotY;
		var x3 = x1 + width * info.scaleX;
		var y3 = y1 + height * info.scaleY;
		x3 = (x3 - pivotX) * c - (y3 - pivotY) * s + pivotX;
		y3 = (x3 - pivotX) * s + (y3 - pivotY) * c + pivotY;
		var x4 = x1;
		var y4 = y1 + height * info.scaleY;
		x4 = (x4 - pivotX) * c - (y4 - pivotY) * s + pivotX;
		y4 = (x4 - pivotX) * s + (y4 - pivotY) * c + pivotY;
		x1 = (x1 - pivotX) * c - (y1 - pivotY) * s + pivotX;
		y1 = (x1 - pivotX) * s + (y1 - pivotY) * c + pivotY;
		return new spriter_definitions_Quadrilateral(new spriter_definitions_QuadPoint(x1,y1),new spriter_definitions_QuadPoint(x2,y2),new spriter_definitions_QuadPoint(x3,y3),new spriter_definitions_QuadPoint(x4,y4));
	}
	,__class__: spriter_library_AbstractLibrary
};
var spriter_library_FlambeLibrary = function(rootEntity,pack,basePath) {
	spriter_library_AbstractLibrary.call(this,basePath);
	this._pack = pack;
	this._point = new flambe_math_Point();
	this._matrix = new flambe_math_Matrix();
	this._rootEntity = rootEntity;
	spriter_library_FlambeLibrary._textures = new haxe_ds_StringMap();
	this._entityPool = new flambe_util_Pool(function() {
		return new flambe_Entity();
	}).setSize(25);
};
$hxClasses["spriter.library.FlambeLibrary"] = spriter_library_FlambeLibrary;
spriter_library_FlambeLibrary.__name__ = ["spriter","library","FlambeLibrary"];
spriter_library_FlambeLibrary.__super__ = spriter_library_AbstractLibrary;
spriter_library_FlambeLibrary.prototype = $extend(spriter_library_AbstractLibrary.prototype,{
	getTexture: function(name) {
		if(!spriter_library_FlambeLibrary._textures.exists(this._basePath + "." + name)) {
			var noExtension = name.substring(0,name.lastIndexOf("."));
			var value = this._pack.getTexture(this._basePath + "." + noExtension);
			spriter_library_FlambeLibrary._textures.set(this._basePath + "." + name,value);
		}
		return spriter_library_FlambeLibrary._textures.get(this._basePath + "." + name);
	}
	,clear: function() {
		while(this._rootEntity.firstChild != null) {
			var child = this._rootEntity.firstChild;
			this._rootEntity.removeChild(child);
			this._entityPool.put(child);
		}
		this._rootEntity.add(new flambe_display_Sprite());
	}
	,addGraphic: function(group,timeline,key,name,info,pivots) {
		var bmp = this.getTexture(name);
		var spatialResult = this.compute(info,pivots,bmp.get_width(),bmp.get_height());
		var sprite = new flambe_display_ImageSprite(bmp);
		sprite.disablePixelSnapping();
		var localMatrix = sprite.getLocalMatrix();
		localMatrix.compose(spatialResult.x,spatialResult.y,spatialResult.scaleX,spatialResult.scaleY,flambe_math_FMath.toRadians(spriter_util_SpriterUtil.fixRotation(spatialResult.angle)));
		sprite.alpha.set__(spatialResult.a);
		this._rootEntity.addChild(this._entityPool.take().add(sprite));
	}
	,__class__: spriter_library_FlambeLibrary
});
var spriter_util_SpriterUtil = function() { };
$hxClasses["spriter.util.SpriterUtil"] = spriter_util_SpriterUtil;
spriter_util_SpriterUtil.__name__ = ["spriter","util","SpriterUtil"];
spriter_util_SpriterUtil.toRadians = function(deg) {
	return deg * Math.PI / 180;
};
spriter_util_SpriterUtil.fixRotation = function(rotation) {
	if(rotation == 0) rotation = 360;
	return 360 - rotation;
};
spriter_util_SpriterUtil.under360 = function(rotation) {
	while(rotation > 360) rotation -= 360;
	while(rotation < 0) rotation += 360;
	return rotation;
};
var spriter_vars_Variable = function(name,def) {
	this.name = name;
	this.value = def;
	this.def = def;
};
$hxClasses["spriter.vars.Variable"] = spriter_vars_Variable;
spriter_vars_Variable.__name__ = ["spriter","vars","Variable"];
spriter_vars_Variable.prototype = {
	set: function(value) {
		return false;
	}
	,__class__: spriter_vars_Variable
};
var spriter_vars_VariableFloat = function(name,value) {
	spriter_vars_Variable.call(this,name,value);
};
$hxClasses["spriter.vars.VariableFloat"] = spriter_vars_VariableFloat;
spriter_vars_VariableFloat.__name__ = ["spriter","vars","VariableFloat"];
spriter_vars_VariableFloat.__super__ = spriter_vars_Variable;
spriter_vars_VariableFloat.prototype = $extend(spriter_vars_Variable.prototype,{
	set: function(value) {
		var temp = this.value;
		this.value = Std.parseFloat(value);
		if(temp != this.value) return true;
		return false;
	}
	,__class__: spriter_vars_VariableFloat
});
var spriter_vars_VariableInt = function(name,value) {
	spriter_vars_Variable.call(this,name,value);
};
$hxClasses["spriter.vars.VariableInt"] = spriter_vars_VariableInt;
spriter_vars_VariableInt.__name__ = ["spriter","vars","VariableInt"];
spriter_vars_VariableInt.__super__ = spriter_vars_Variable;
spriter_vars_VariableInt.prototype = $extend(spriter_vars_Variable.prototype,{
	set: function(value) {
		var temp = this.value;
		this.value = Std.parseInt(value);
		if(temp != this.value) return true;
		return false;
	}
	,__class__: spriter_vars_VariableInt
});
var spriter_vars_VariableString = function(name,value) {
	spriter_vars_Variable.call(this,name,value);
};
$hxClasses["spriter.vars.VariableString"] = spriter_vars_VariableString;
spriter_vars_VariableString.__name__ = ["spriter","vars","VariableString"];
spriter_vars_VariableString.__super__ = spriter_vars_Variable;
spriter_vars_VariableString.prototype = $extend(spriter_vars_Variable.prototype,{
	set: function(value) {
		var temp = this.value;
		this.value = value;
		if(temp != this.value) return true;
		return false;
	}
	,__class__: spriter_vars_VariableString
});
var tools_spark_Console = function() { };
$hxClasses["tools.spark.Console"] = tools_spark_Console;
tools_spark_Console.__name__ = ["tools","spark","Console"];
tools_spark_Console.init = function() {
	tools_spark_Console._engineLogger = flambe_System.createLogger("engine");
};
tools_spark_Console.log = function(message,args) {
	tools_spark_Console._engineLogger.info(message,args);
};
tools_spark_Console.warn = function(message,args) {
	tools_spark_Console._engineLogger.warn(message,args);
};
tools_spark_Console.error = function(message,args) {
	tools_spark_Console._engineLogger.error(message,args);
};
tools_spark_Console.de = function(message,args) {
	tools_spark_Console._engineLogger.error("DEBUG->" + message,args);
};
var tools_spark_Main = function() { };
$hxClasses["tools.spark.Main"] = tools_spark_Main;
tools_spark_Main.__name__ = ["tools","spark","Main"];
tools_spark_Main.main = function() {
	tools_spark_framework_Framework.init();
	tools_spark_Main._loadClientConfig();
};
tools_spark_Main._loadClientConfig = function() {
	var l_loader = tools_spark_framework_Assets.initiateBatch();
	l_loader.addFile(tools_spark_Main._getSkcUrl(),"config");
	l_loader.successSignal.connect(tools_spark_Main._onClientConfigLoaded).once();
	l_loader.start();
};
tools_spark_Main._onClientConfigLoaded = function() {
	var l_configurator = new tools_spark_framework_config_Config(tools_spark_framework_Assets.getFile("config"));
	if(l_configurator.parseClient() == false) {
		tools_spark_Console.error("Failed to parse configuration file. Aborting...");
		return;
	}
	tools_spark_sliced_core_Sliced.init();
	tools_spark_framework_Framework.createDisplayRenderers();
	var _g = 0;
	var _g1 = tools_spark_framework_Project.main.executeModules;
	while(_g < _g1.length) {
		var moduleName = _g1[_g];
		++_g;
		tools_spark_framework_ModuleManager.execute(moduleName);
	}
	flambe_System.root.add(new tools_spark_framework_RootComponent());
};
tools_spark_Main._getSkcUrl = function() {
	try {
		var l_urlPars = flambe_System.get_external().call("getMainSparkClientUrl");
		if(l_urlPars.url != null) return l_urlPars.url; else if(l_urlPars.user != null && l_urlPars.project != null) return "/assets/" + Std.string(l_urlPars.user) + "/project/" + Std.string(l_urlPars.project) + "/main.skc"; else return "main.skc";
	} catch( e ) {
		if (e instanceof js__$Boot_HaxeError) e = e.val;
		return "main.skc";
	}
};
var tools_spark_framework_Assets = function() { };
$hxClasses["tools.spark.framework.Assets"] = tools_spark_framework_Assets;
tools_spark_framework_Assets.__name__ = ["tools","spark","framework","Assets"];
tools_spark_framework_Assets.init = function() {
	tools_spark_framework_Assets._loader = new tools_spark_framework_assets_FlambeLoader();
	tools_spark_framework_Assets._loader.successSignal.connect(tools_spark_framework_Assets._onLoaderSuccess);
	tools_spark_framework_Assets._loader.errorSignal.connect(tools_spark_framework_Assets._onLoaderError);
	tools_spark_framework_Assets._loader.progressSignal.connect(tools_spark_framework_Assets._onLoaderProgress);
	tools_spark_framework_Assets.successSignal = new flambe_util_Signal0();
	tools_spark_framework_Assets.errorSignal = new flambe_util_Signal1();
	tools_spark_framework_Assets.progressSignal = new flambe_util_Signal2();
	tools_spark_framework_Assets._cache = new haxe_ds_StringMap();
};
tools_spark_framework_Assets.initiateBatch = function() {
	return tools_spark_framework_Assets._loader.startNewBatchLoad();
};
tools_spark_framework_Assets.loadOrphanAsset = function(p_asset,p_owner,p_callBack) {
	var p_assetId = Std.string(p_asset.type) + ":" + Std.string(p_asset.name);
	if(!tools_spark_framework_Assets.fileLoaded(p_assetId)) {
		var p_batchLoader = tools_spark_framework_Assets.initiateBatch();
		var p_assetUrl = "/assets/" + Std.string(p_owner.name) + "/" + Std.string(p_asset.type) + "/" + Std.string(p_asset.dir) + "/" + Std.string(p_asset.fileName) + "." + Std.string(p_asset.fileExtension);
		tools_spark_Console.log("Adding Orphan File [" + p_assetId + "]...");
		p_batchLoader.addFile(p_assetUrl,p_assetId);
		if(p_callBack != null) p_batchLoader.successSignal.connect(p_callBack).once();
		p_batchLoader.start();
		return true;
	} else {
		tools_spark_Console.warn("File [" + p_assetId + "] is already loaded. Ignoring...");
		if(p_callBack != null) p_callBack();
		return false;
	}
};
tools_spark_framework_Assets._onLoaderSuccess = function() {
	tools_spark_Console.log("Assets: SUCCESS!");
	tools_spark_framework_Assets.successSignal.emit();
};
tools_spark_framework_Assets._onLoaderError = function(p_error) {
	tools_spark_Console.log("Assets: ERROR: " + p_error);
	tools_spark_framework_Assets.errorSignal.emit(p_error);
};
tools_spark_framework_Assets._onLoaderProgress = function(p_progress,p_total) {
	tools_spark_framework_Assets.progressSignal.emit(p_progress,p_total);
};
tools_spark_framework_Assets.getAssetPackOf = function(p_name) {
	try {
		return tools_spark_framework_Assets._loader.getAssetPackOf(p_name);
	} catch( e ) {
		if (e instanceof js__$Boot_HaxeError) e = e.val;
		tools_spark_Console.error("ERROR: Could not find assetPack of: " + p_name);
		return null;
	}
};
tools_spark_framework_Assets.assetLoaded = function(p_name) {
	if(tools_spark_framework_Assets._cache.exists(p_name)) return true; else return tools_spark_framework_Assets._loader.assetLoaded(p_name);
};
tools_spark_framework_Assets.fileLoaded = function(p_name) {
	if(tools_spark_framework_Assets._cache.exists(p_name)) return true; else return tools_spark_framework_Assets._loader.assetLoaded(p_name);
};
tools_spark_framework_Assets.getFile = function(p_name) {
	try {
		return tools_spark_framework_Assets._loader.getFile(p_name);
	} catch( e ) {
		if (e instanceof js__$Boot_HaxeError) e = e.val;
		tools_spark_Console.error("ERROR: Could not find file: " + p_name);
		return null;
	}
};
tools_spark_framework_Assets.scriptLoaded = function(p_name) {
	var l_fullName = "script:" + p_name;
	if(tools_spark_framework_Assets._cache.exists(l_fullName)) return true; else return tools_spark_framework_Assets._loader.assetLoaded("script:" + p_name);
};
tools_spark_framework_Assets.getScript = function(p_name) {
	var l_fullName = "script:" + p_name;
	if(tools_spark_framework_Assets._cache.exists(l_fullName)) return tools_spark_framework_Assets._cache.get(l_fullName); else try {
		return tools_spark_framework_Assets._loader.getFile(l_fullName);
	} catch( e ) {
		if (e instanceof js__$Boot_HaxeError) e = e.val;
		tools_spark_Console.error("ERROR: Could not find script: " + p_name);
		return null;
	}
};
tools_spark_framework_Assets.cacheScript = function(p_name,p_scriptContent) {
	var l_fullName = "script:" + p_name;
	if(tools_spark_framework_Assets._cache.exists(l_fullName)) {
		tools_spark_framework_Assets.removeCachedScript(p_name);
		tools_spark_Console.log("Cache Script: File existed in cache and disposed");
	} else if(tools_spark_framework_Assets._loader.assetLoaded(l_fullName)) {
		tools_spark_framework_Assets.getFile(l_fullName).dispose();
		tools_spark_Console.log("Cache Script: File existed in flambe and disposed");
	} else tools_spark_Console.log("Cache Script: File did not exist");
	var l_file = new flambe_platform_BasicFile(p_scriptContent);
	tools_spark_framework_Assets._cache.set(l_fullName,l_file);
	return l_file;
};
tools_spark_framework_Assets.removeCachedScript = function(p_name) {
	var l_fullName = "script:" + p_name;
	if(tools_spark_framework_Assets._cache.exists(l_fullName)) {
		tools_spark_framework_Assets._cache.get(l_fullName).dispose();
		tools_spark_framework_Assets._cache.remove(l_fullName);
		return true;
	} else return false;
};
tools_spark_framework_Assets.textureLoaded = function(p_name) {
	return tools_spark_framework_Assets._loader.assetLoaded(p_name);
};
tools_spark_framework_Assets.getTexture = function(p_name) {
	try {
		return tools_spark_framework_Assets._loader.getTexture(p_name);
	} catch( e ) {
		if (e instanceof js__$Boot_HaxeError) e = e.val;
		tools_spark_Console.error("ERROR: Could not find texture: " + p_name);
		return null;
	}
};
tools_spark_framework_Assets.soundLoaded = function(p_name) {
	return tools_spark_framework_Assets._loader.assetLoaded(p_name);
};
tools_spark_framework_Assets.getSound = function(p_name) {
	try {
		return tools_spark_framework_Assets._loader.getSound(p_name);
	} catch( e ) {
		if (e instanceof js__$Boot_HaxeError) e = e.val;
		tools_spark_Console.error("ERROR: Could not find sound: " + p_name);
		return null;
	}
};
var tools_spark_framework_Framework = function() { };
$hxClasses["tools.spark.framework.Framework"] = tools_spark_framework_Framework;
tools_spark_framework_Framework.__name__ = ["tools","spark","framework","Framework"];
tools_spark_framework_Framework.init = function() {
	if (Object.defineProperty) Object.defineProperty(Array.prototype, "__class__", {enumerable: false});;
	tools_spark_Console.init();
	flambe_System.init();
	tools_spark_framework_platform_html_Graphics.init();
	tools_spark_framework_Assets.init();
	tools_spark_framework_Project.init();
	tools_spark_framework_ModuleManager.init();
};
tools_spark_framework_Framework.createDisplayRenderers = function() {
	tools_spark_framework_platform_html_Graphics.createDisplayRenderers();
};
var tools_spark_framework_ModuleManager = function() { };
$hxClasses["tools.spark.framework.ModuleManager"] = tools_spark_framework_ModuleManager;
tools_spark_framework_ModuleManager.__name__ = ["tools","spark","framework","ModuleManager"];
tools_spark_framework_ModuleManager.init = function() {
	tools_spark_framework_ModuleManager._moduleStates = new haxe_ds_StringMap();
	tools_spark_framework_ModuleManager._modulesLoadQueue = [];
	tools_spark_framework_ModuleManager._modulesLoadQueueBytes = [];
	tools_spark_framework_ModuleManager._loadingBatch = false;
	tools_spark_framework_ModuleManager.successSignal = new flambe_util_Signal0();
	tools_spark_framework_ModuleManager.errorSignal = new flambe_util_Signal1();
	tools_spark_framework_ModuleManager.progressSignal = new flambe_util_Signal2();
};
tools_spark_framework_ModuleManager.getBytesOnQueue = function() {
	var l_totalBytes = 0;
	var _g = 0;
	var _g1 = tools_spark_framework_ModuleManager._modulesLoadQueueBytes;
	while(_g < _g1.length) {
		var bytes = _g1[_g];
		++_g;
		l_totalBytes += bytes;
	}
	return l_totalBytes;
};
tools_spark_framework_ModuleManager._onLoaderSuccess = function() {
	tools_spark_framework_ModuleManager._disposeBatchLoaderSignals();
	if(tools_spark_framework_ModuleManager._loadingBatch == false) return;
	tools_spark_framework_ModuleManager._loadingBatch = false;
	var l_moduleName = tools_spark_framework_ModuleManager._modulesLoadQueue[0];
	tools_spark_Console.log("Module Loader: Success Loading Module: " + l_moduleName);
	var v = tools_spark_framework_assets_EModuleState.LOADED;
	tools_spark_framework_ModuleManager._moduleStates.set(l_moduleName,v);
	v;
	tools_spark_framework_ModuleManager._bytesLoaded += tools_spark_framework_ModuleManager._modulesLoadQueueBytes[0];
	tools_spark_framework_ModuleManager._modulesLoadQueue.shift();
	tools_spark_framework_ModuleManager._modulesLoadQueueBytes.shift();
	tools_spark_framework_ModuleManager._executeModule(l_moduleName);
	tools_spark_framework_ModuleManager._startLoadBatch();
};
tools_spark_framework_ModuleManager._onLoaderError = function(p_error) {
	tools_spark_framework_ModuleManager._disposeBatchLoaderSignals();
	tools_spark_Console.error("Module Loader: ERROR: " + p_error);
	tools_spark_framework_ModuleManager.errorSignal.emit(p_error);
};
tools_spark_framework_ModuleManager._onLoaderProgress = function(p_progress,p_total) {
	tools_spark_framework_ModuleManager._percDone = Std["int"]((tools_spark_framework_ModuleManager._bytesLoaded + p_progress) * 100 / tools_spark_framework_ModuleManager._totalBytes);
	tools_spark_framework_ModuleManager.progressSignal.emit(tools_spark_framework_ModuleManager._percDone,tools_spark_framework_ModuleManager._totalBytes);
};
tools_spark_framework_ModuleManager.execute = function(p_moduleName) {
	if(tools_spark_framework_ModuleManager.isModuleLoaded(p_moduleName)) {
		tools_spark_Console.log("Module " + p_moduleName + " already loaded");
		tools_spark_framework_ModuleManager.successSignal.emit();
		tools_spark_framework_ModuleManager._executeModule(p_moduleName);
	} else {
		tools_spark_framework_ModuleManager._percDone = 0;
		tools_spark_framework_ModuleManager._totalBytes = 0;
		tools_spark_framework_ModuleManager._bytesLoaded = 0;
		tools_spark_framework_ModuleManager._loadModule(p_moduleName);
	}
};
tools_spark_framework_ModuleManager.getModuleState = function(p_ModuleName) {
	if(tools_spark_framework_ModuleManager._moduleStates.get(p_ModuleName) == null) {
		var v = tools_spark_framework_assets_EModuleState.NOT_LOADED;
		tools_spark_framework_ModuleManager._moduleStates.set(p_ModuleName,v);
		v;
	}
	return tools_spark_framework_ModuleManager._moduleStates.get(p_ModuleName);
};
tools_spark_framework_ModuleManager.isModuleLoaded = function(p_ModuleName) {
	var _g = tools_spark_framework_ModuleManager.getModuleState(p_ModuleName);
	switch(Type.enumIndex(_g)) {
	case 0:case 1:
		return false;
	case 2:case 3:case 4:
		return true;
	}
};
tools_spark_framework_ModuleManager.isModuleExecuted = function(p_ModuleName) {
	var _g = tools_spark_framework_ModuleManager.getModuleState(p_ModuleName);
	switch(Type.enumIndex(_g)) {
	case 0:case 1:case 2:
		return false;
	case 3:case 4:
		return true;
	}
};
tools_spark_framework_ModuleManager.createAllPaths = function(p_location,p_url) {
	tools_spark_framework_Project.main.setPath(p_location,"script",p_url + "script");
	tools_spark_framework_Project.main.setPath(p_location,"image",p_url + "image");
	tools_spark_framework_Project.main.setPath(p_location,"model",p_url + "model");
	tools_spark_framework_Project.main.setPath(p_location,"sound",p_url + "sound");
	tools_spark_framework_Project.main.setPath(p_location,"data",p_url + "data");
};
tools_spark_framework_ModuleManager.createNewModule = function(p_id,p_requiresModules,p_executeEntity,p_assets) {
	if(tools_spark_framework_Project.main.modules.exists(p_id) == false) {
		var l_module = new tools_spark_framework_assets_Module(p_id);
		if(p_requiresModules != null) l_module.requiresModules = p_requiresModules;
		if(p_executeEntity != null) l_module.executeEntity = p_executeEntity; else l_module.executeEntity = "none";
		if(p_assets != null) l_module.assets = p_assets;
		tools_spark_framework_Project.main.modules.set(p_id,l_module);
		return l_module;
	} else {
		tools_spark_Console.warn("Project " + p_id + " already exists! Ignoring...");
		return null;
	}
};
tools_spark_framework_ModuleManager.createNewAsset = function(p_id,p_url,p_type,p_subtype,p_location,p_bytes,p_condition,p_forceLoadAsData) {
	var l_asset = new tools_spark_framework_assets_Asset(p_id);
	if(p_url != null) l_asset.url = p_url;
	if(p_type != null) l_asset.type = p_type;
	if(p_subtype != null) l_asset.subtype = p_subtype;
	if(p_location != null) l_asset.location = p_location;
	if(p_bytes != null) l_asset.bytes = p_bytes;
	if(p_condition != null) l_asset.condition = p_condition;
	if(p_forceLoadAsData != null) l_asset.forceLoadAsData = p_forceLoadAsData;
	return l_asset;
};
tools_spark_framework_ModuleManager.addAssetToModule = function(p_asset,p_module) {
	if(p_module.assets.exists(p_asset.id) == false) {
		p_module.assets.set(p_asset.id,p_asset);
		var v = tools_spark_framework_assets_EModuleState.NOT_LOADED;
		tools_spark_framework_ModuleManager._moduleStates.set(p_module.id,v);
		v;
		return true;
	} else {
		tools_spark_Console.warn("Asset " + p_asset.id + " already exists in module " + p_module.id + ". Ignoring...");
		return false;
	}
};
tools_spark_framework_ModuleManager.loadModule = function(p_moduleName,p_callbackEntity) {
	if(tools_spark_framework_Project.main.modules.exists(p_moduleName)) {
		if(tools_spark_framework_ModuleManager.getModuleState(p_moduleName) == tools_spark_framework_assets_EModuleState.NOT_LOADED) tools_spark_framework_ModuleManager._loadModule(p_moduleName); else {
			tools_spark_Console.log("Module " + p_moduleName + " already loaded");
			tools_spark_framework_ModuleManager.successSignal.emit();
		}
	} else tools_spark_Console.error("Module Manager: Error Loading Module! Module [" + p_moduleName + "] not found!");
};
tools_spark_framework_ModuleManager._executeModule = function(p_moduleName) {
	if(tools_spark_framework_ModuleManager.isModuleExecuted(p_moduleName)) {
		tools_spark_Console.warn("Warning while trying to execute Module [" + p_moduleName + "]. Module already executed. Ignoring..");
		return;
	} else if(tools_spark_framework_ModuleManager.isModuleExecutable(p_moduleName)) {
		tools_spark_sliced_core_Sliced.logic.createAndRun(tools_spark_framework_Project.main.modules.get(p_moduleName).executeEntity);
		var v = tools_spark_framework_assets_EModuleState.RUNNING;
		tools_spark_framework_ModuleManager._moduleStates.set(p_moduleName,v);
		v;
	} else return;
};
tools_spark_framework_ModuleManager.isModuleExecutable = function(p_moduleName) {
	if(tools_spark_framework_Project.main.modules.get(p_moduleName).executeEntity == "none") return false; else return true;
};
tools_spark_framework_ModuleManager._loadModule = function(p_moduleName) {
	tools_spark_Console.log("Module Manager: Loading module " + p_moduleName);
	if(tools_spark_framework_Project.main.modules.exists(p_moduleName)) {
		if(tools_spark_framework_ModuleManager.getModuleState(p_moduleName) == tools_spark_framework_assets_EModuleState.NOT_LOADED) {
			var _g = 0;
			var _g1 = tools_spark_framework_Project.main.modules.get(p_moduleName).requiresModules;
			while(_g < _g1.length) {
				var f_requiredModuleName = _g1[_g];
				++_g;
				tools_spark_Console.log("Module Manager: Loading required module " + f_requiredModuleName);
				if(tools_spark_framework_ModuleManager.getModuleState(f_requiredModuleName) == tools_spark_framework_assets_EModuleState.NOT_LOADED) tools_spark_framework_ModuleManager._loadModule(f_requiredModuleName);
			}
			tools_spark_framework_ModuleManager._loadAssetsOfModule(p_moduleName);
		}
	} else tools_spark_Console.error("Module Manager: Error Loading Module! Module [" + p_moduleName + "] not found!");
};
tools_spark_framework_ModuleManager._loadAssetsOfModule = function(p_moduleName) {
	var l_bytes = 0;
	var $it0 = (function($this) {
		var $r;
		var this1 = tools_spark_framework_Project.main.modules.get(p_moduleName).assets;
		$r = this1.iterator();
		return $r;
	}(this));
	while( $it0.hasNext() ) {
		var asset = $it0.next();
		l_bytes += Std.parseInt(asset.bytes);
	}
	var v = tools_spark_framework_assets_EModuleState.LOADING;
	tools_spark_framework_ModuleManager._moduleStates.set(p_moduleName,v);
	v;
	tools_spark_framework_ModuleManager._modulesLoadQueue.push(p_moduleName);
	tools_spark_framework_ModuleManager._modulesLoadQueueBytes.push(l_bytes);
	tools_spark_framework_ModuleManager._totalBytes += l_bytes;
	if(tools_spark_framework_ModuleManager._loadingBatch == false) tools_spark_framework_ModuleManager._startLoadBatch();
};
tools_spark_framework_ModuleManager._startLoadBatch = function() {
	if(tools_spark_framework_ModuleManager._modulesLoadQueue.length > 0) {
		var l_moduleName = tools_spark_framework_ModuleManager._modulesLoadQueue[0];
		var l_loader = tools_spark_framework_Assets.initiateBatch();
		tools_spark_framework_ModuleManager._loaderSignalSuccess = l_loader.successSignal.connect(tools_spark_framework_ModuleManager._onLoaderSuccess);
		tools_spark_framework_ModuleManager._loaderSignalError = l_loader.errorSignal.connect(tools_spark_framework_ModuleManager._onLoaderError);
		tools_spark_framework_ModuleManager._loaderSignalProgress = l_loader.progressSignal.connect(tools_spark_framework_ModuleManager._onLoaderProgress);
		var $it0 = (function($this) {
			var $r;
			var this1 = tools_spark_framework_Project.main.modules.get(l_moduleName).assets;
			$r = this1.iterator();
			return $r;
		}(this));
		while( $it0.hasNext() ) {
			var asset = $it0.next();
			if(!tools_spark_framework_Assets.assetLoaded(asset.id)) {
				tools_spark_Console.log("adding file: " + asset.id);
				l_loader.addFile(tools_spark_framework_Project.main.getPath(asset.location,asset.type) + "/" + asset.url,asset.id,asset.forceLoadAsData == "true"?flambe_asset_AssetFormat.Data:null,Std.parseInt(asset.bytes));
			} else tools_spark_Console.log("file already loaded: " + asset.id);
		}
		tools_spark_framework_ModuleManager._loadingBatch = true;
		l_loader.start();
	} else tools_spark_framework_ModuleManager.successSignal.emit();
};
tools_spark_framework_ModuleManager._disposeBatchLoaderSignals = function() {
	tools_spark_framework_ModuleManager._loaderSignalSuccess.dispose();
	tools_spark_framework_ModuleManager._loaderSignalError.dispose();
	tools_spark_framework_ModuleManager._loaderSignalProgress.dispose();
};
var tools_spark_framework_Project = function() {
	this.executeModules = [];
	this.sliced = new haxe_ds_EnumValueMap();
	this.paths = new haxe_ds_StringMap();
	this.modules = new haxe_ds_StringMap();
};
$hxClasses["tools.spark.framework.Project"] = tools_spark_framework_Project;
tools_spark_framework_Project.__name__ = ["tools","spark","framework","Project"];
tools_spark_framework_Project.init = function() {
	tools_spark_framework_Project.main = new tools_spark_framework_Project();
	tools_spark_framework_Project._initNodeNamesMap();
};
tools_spark_framework_Project.getModules = function() {
	return tools_spark_framework_Project.main.modules;
};
tools_spark_framework_Project._initNodeNamesMap = function() {
	tools_spark_framework_Project._typeToString = new haxe_ds_EnumValueMap();
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.CLIENT,"Client");
		"Client";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.SERVER,"Server");
		"Server";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.PROJECT,"Project");
		"Project";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.SLICED,"Sliced");
		"Sliced";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.PATHS,"Paths");
		"Paths";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.ASSETS,"Assets");
		"Assets";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.PROJECT_NAME,"Name");
		"Name";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.PROJECT_VERSION,"Version");
		"Version";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.EXECUTE_AT_LAUNCH,"ExecuteAtLaunch");
		"ExecuteAtLaunch";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.EXECUTE_MODULE,"ExecuteModule");
		"ExecuteModule";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.SOUND_SERVICE,"Sound");
		"Sound";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.LOGIC_SERVICE,"Logic");
		"Logic";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.INPUT_SERVICE,"Input");
		"Input";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE,"Comms");
		"Comms";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.EVENT_SERVICE,"Event");
		"Event";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.DISPLAY_SERVICE,"Display");
		"Display";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.PATH,"Path");
		"Path";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.MODULE,"Module");
		"Module";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.ASSET,"Asset");
		"Asset";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.REQUIRES,"Requires");
		"Requires";
	}
	{
		tools_spark_framework_Project._typeToString.set(tools_spark_framework_config_ENodeType.REQUIRES_MODULE,"RequiresModule");
		"RequiresModule";
	}
};
tools_spark_framework_Project.prototype = {
	setPath: function(p_location,p_type,p_url) {
		if(this.paths.get(p_location) == null) {
			var v = new haxe_ds_StringMap();
			this.paths.set(p_location,v);
			v;
		}
		var this1 = this.paths.get(p_location);
		this1.set(p_type,p_url);
		p_url;
	}
	,getPath: function(p_location,p_type) {
		if(this.paths.get(p_location) == null) return null;
		var this1 = this.paths.get(p_location);
		return this1.get(p_type);
	}
	,exportToXml: function() {
		var l_xmlClient = tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.CLIENT));
		var l_xmlProject = tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.PROJECT));
		l_xmlClient.addChild(l_xmlProject);
		l_xmlProject.addChild(tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.PROJECT_NAME),this.name));
		l_xmlProject.addChild(tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.PROJECT_VERSION),this.version));
		var l_xmlExecuteAtLaunch = tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.EXECUTE_AT_LAUNCH));
		l_xmlProject.addChild(l_xmlExecuteAtLaunch);
		var _g = 0;
		var _g1 = this.executeModules;
		while(_g < _g1.length) {
			var executeModule = _g1[_g];
			++_g;
			l_xmlExecuteAtLaunch.addChild(tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.EXECUTE_MODULE),executeModule));
		}
		var l_xmlSliced = tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.SLICED));
		l_xmlClient.addChild(l_xmlSliced);
		var $it0 = this.sliced.keys();
		while( $it0.hasNext() ) {
			var slicedKeyEntry = $it0.next();
			l_xmlSliced.addChild(tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(slicedKeyEntry),this.sliced.get(slicedKeyEntry)));
		}
		var l_xmlPaths = tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.PATHS));
		l_xmlClient.addChild(l_xmlPaths);
		var $it1 = this.paths.keys();
		while( $it1.hasNext() ) {
			var pathKeyEntry = $it1.next();
			var f_pathLocation = this.paths.get(pathKeyEntry);
			var $it2 = f_pathLocation.keys();
			while( $it2.hasNext() ) {
				var pathLocationKeyEntry = $it2.next();
				var l_xmlPath = tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.PATH),f_pathLocation.get(pathLocationKeyEntry));
				l_xmlPath.set("location",pathKeyEntry);
				l_xmlPath.set("type",pathLocationKeyEntry);
				l_xmlPaths.addChild(l_xmlPath);
			}
		}
		var l_xmlAssets = tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.ASSETS));
		l_xmlClient.addChild(l_xmlAssets);
		var $it3 = this.modules.iterator();
		while( $it3.hasNext() ) {
			var module = $it3.next();
			var l_xmlModule = tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.MODULE));
			l_xmlAssets.addChild(l_xmlModule);
			l_xmlModule.set("id",module.id);
			if(module.executeEntity != null) l_xmlModule.set("executeEntity",module.executeEntity);
			if(module.requiresModules.length > 0) {
				var l_xmlRequires = tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.REQUIRES));
				l_xmlModule.addChild(l_xmlRequires);
				var _g2 = 0;
				var _g11 = module.requiresModules;
				while(_g2 < _g11.length) {
					var requiresModule = _g11[_g2];
					++_g2;
					l_xmlRequires.addChild(tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.REQUIRES_MODULE),requiresModule));
				}
			}
			var $it4 = module.assets.iterator();
			while( $it4.hasNext() ) {
				var asset = $it4.next();
				var l_xmlAsset = tools_spark_sliced_core_Sliced.logic.xml_createElement(tools_spark_framework_Project._typeToString.get(tools_spark_framework_config_ENodeType.ASSET),asset.url);
				l_xmlModule.addChild(l_xmlAsset);
				if(asset.id != null) l_xmlAsset.set("id",asset.id);
				if(asset.type != null) l_xmlAsset.set("type",asset.type);
				if(asset.subtype != null) l_xmlAsset.set("subtype",asset.subtype);
				if(asset.location != null) l_xmlAsset.set("location",asset.location);
				if(asset.bytes != null) l_xmlAsset.set("bytes",asset.bytes);
				if(asset.condition != null) l_xmlAsset.set("condition",asset.condition);
				if(asset.forceLoadAsData != null) l_xmlAsset.set("forceLoadAsData",asset.forceLoadAsData);
			}
		}
		return l_xmlClient;
	}
	,__class__: tools_spark_framework_Project
};
var tools_spark_framework_RootComponent = function() {
	flambe_Component.call(this);
};
$hxClasses["tools.spark.framework.RootComponent"] = tools_spark_framework_RootComponent;
tools_spark_framework_RootComponent.__name__ = ["tools","spark","framework","RootComponent"];
tools_spark_framework_RootComponent.__super__ = flambe_Component;
tools_spark_framework_RootComponent.prototype = $extend(flambe_Component.prototype,{
	get_name: function() {
		return "RootComponent_0";
	}
	,onUpdate: function(dt) {
		tools_spark_sliced_core_Sliced.update(dt);
	}
	,__class__: tools_spark_framework_RootComponent
});
var tools_spark_framework_assets_interfaces_IBatchLoader = function() { };
$hxClasses["tools.spark.framework.assets.interfaces.IBatchLoader"] = tools_spark_framework_assets_interfaces_IBatchLoader;
tools_spark_framework_assets_interfaces_IBatchLoader.__name__ = ["tools","spark","framework","assets","interfaces","IBatchLoader"];
tools_spark_framework_assets_interfaces_IBatchLoader.prototype = {
	__class__: tools_spark_framework_assets_interfaces_IBatchLoader
};
var tools_spark_framework_assets_ABatchLoader = function() {
	this.successSignal = new flambe_util_Signal0();
	this.errorSignal = new flambe_util_Signal1();
	this.progressSignal = new flambe_util_Signal2();
};
$hxClasses["tools.spark.framework.assets.ABatchLoader"] = tools_spark_framework_assets_ABatchLoader;
tools_spark_framework_assets_ABatchLoader.__name__ = ["tools","spark","framework","assets","ABatchLoader"];
tools_spark_framework_assets_ABatchLoader.__interfaces__ = [tools_spark_framework_assets_interfaces_IBatchLoader];
tools_spark_framework_assets_ABatchLoader.prototype = {
	addFile: function(p_url,p_name,p_fileFormat,p_bytes) {
		if(p_bytes == null) p_bytes = 50000;
		if(p_name == null) p_name = p_url;
		if(p_url.indexOf("/assets") != -1) p_url = "http://130.211.172.86" + p_url;
		tools_spark_Console.log("BatchLoader: Requesting file " + p_url);
		this._addFile(p_name,p_url,p_fileFormat,p_bytes);
	}
	,start: function() {
	}
	,_addFile: function(p_name,p_url,p_fileFormat,p_bytes) {
	}
	,__class__: tools_spark_framework_assets_ABatchLoader
};
var tools_spark_framework_assets_Asset = function(p_id) {
	this.id = p_id;
};
$hxClasses["tools.spark.framework.assets.Asset"] = tools_spark_framework_assets_Asset;
tools_spark_framework_assets_Asset.__name__ = ["tools","spark","framework","assets","Asset"];
tools_spark_framework_assets_Asset.prototype = {
	__class__: tools_spark_framework_assets_Asset
};
var tools_spark_framework_assets_EModuleState = $hxClasses["tools.spark.framework.assets.EModuleState"] = { __ename__ : ["tools","spark","framework","assets","EModuleState"], __constructs__ : ["NOT_LOADED","LOADING","LOADED","RUNNING","PAUSED"] };
tools_spark_framework_assets_EModuleState.NOT_LOADED = ["NOT_LOADED",0];
tools_spark_framework_assets_EModuleState.NOT_LOADED.__enum__ = tools_spark_framework_assets_EModuleState;
tools_spark_framework_assets_EModuleState.LOADING = ["LOADING",1];
tools_spark_framework_assets_EModuleState.LOADING.__enum__ = tools_spark_framework_assets_EModuleState;
tools_spark_framework_assets_EModuleState.LOADED = ["LOADED",2];
tools_spark_framework_assets_EModuleState.LOADED.__enum__ = tools_spark_framework_assets_EModuleState;
tools_spark_framework_assets_EModuleState.RUNNING = ["RUNNING",3];
tools_spark_framework_assets_EModuleState.RUNNING.__enum__ = tools_spark_framework_assets_EModuleState;
tools_spark_framework_assets_EModuleState.PAUSED = ["PAUSED",4];
tools_spark_framework_assets_EModuleState.PAUSED.__enum__ = tools_spark_framework_assets_EModuleState;
tools_spark_framework_assets_EModuleState.__empty_constructs__ = [tools_spark_framework_assets_EModuleState.NOT_LOADED,tools_spark_framework_assets_EModuleState.LOADING,tools_spark_framework_assets_EModuleState.LOADED,tools_spark_framework_assets_EModuleState.RUNNING,tools_spark_framework_assets_EModuleState.PAUSED];
var tools_spark_framework_assets_FlambeBatchLoader = function(p_flambeLoader) {
	this._flambeLoader = p_flambeLoader;
	this._manifest = new flambe_asset_Manifest();
	tools_spark_framework_assets_ABatchLoader.call(this);
};
$hxClasses["tools.spark.framework.assets.FlambeBatchLoader"] = tools_spark_framework_assets_FlambeBatchLoader;
tools_spark_framework_assets_FlambeBatchLoader.__name__ = ["tools","spark","framework","assets","FlambeBatchLoader"];
tools_spark_framework_assets_FlambeBatchLoader.__super__ = tools_spark_framework_assets_ABatchLoader;
tools_spark_framework_assets_FlambeBatchLoader.prototype = $extend(tools_spark_framework_assets_ABatchLoader.prototype,{
	_addFile: function(p_name,p_url,p_fileFormat,p_bytes) {
		this._manifest.add(p_name,p_url,p_bytes,p_fileFormat);
		this._flambeLoader.registerAsset(this._manifest,p_name);
	}
	,start: function() {
		if(this._manifest.iterator().hasNext()) {
			this._promise = flambe_System.loadAssetPack(this._manifest);
			this._promiseSignalSuccess = this._promise.success.connect($bind(this,this._onPromiseSuccess));
			this._promiseSignalError = this._promise.error.connect($bind(this,this._onPromiseError));
			this._promiseSignalProgress = this._promise.progressChanged.connect($bind(this,this._onPromiseProgress));
		} else {
			tools_spark_Console.log("Manifest is empty. Nothing loaded");
			this.successSignal.emit();
		}
	}
	,_onPromiseSuccess: function(p_assetPack) {
		this._disposePromiseSignals();
		this._flambeLoader.registerBatchLoad(this._manifest,p_assetPack);
		this.successSignal.emit();
	}
	,_onPromiseError: function(p_error) {
		this._disposePromiseSignals();
		this.errorSignal.emit(p_error);
	}
	,_onPromiseProgress: function() {
		this.progressSignal.emit(this._promise.get_progress(),this._promise.get_total());
	}
	,_disposePromiseSignals: function() {
		this._promiseSignalSuccess.dispose();
		this._promiseSignalError.dispose();
		this._promiseSignalProgress.dispose();
	}
	,__class__: tools_spark_framework_assets_FlambeBatchLoader
});
var tools_spark_framework_assets_FlambeLoader = function() {
	this._init();
};
$hxClasses["tools.spark.framework.assets.FlambeLoader"] = tools_spark_framework_assets_FlambeLoader;
tools_spark_framework_assets_FlambeLoader.__name__ = ["tools","spark","framework","assets","FlambeLoader"];
tools_spark_framework_assets_FlambeLoader.prototype = {
	_init: function() {
		this.successSignal = new flambe_util_Signal0();
		this.errorSignal = new flambe_util_Signal1();
		this.progressSignal = new flambe_util_Signal2();
		this._assetInUse = new haxe_ds_StringMap();
		this._assetToBatchLoad = new haxe_ds_StringMap();
		this._batchLoadToAssetPack = new haxe_ds_ObjectMap();
	}
	,startNewBatchLoad: function() {
		return new tools_spark_framework_assets_FlambeBatchLoader(this);
	}
	,registerBatchLoad: function(p_manifest,p_assetPack) {
		{
			this._batchLoadToAssetPack.set(p_manifest,p_assetPack);
			p_assetPack;
		}
	}
	,registerAsset: function(p_manifest,p_name) {
		{
			this._assetToBatchLoad.set(p_name,p_manifest);
			p_manifest;
		}
	}
	,assetLoaded: function(p_name) {
		if(this._assetToBatchLoad.exists(p_name)) return true; else return false;
	}
	,getAssetPackOf: function(p_name) {
		var key = this._assetToBatchLoad.get(p_name);
		return this._batchLoadToAssetPack.get(key);
	}
	,getFile: function(p_name) {
		return ((function($this) {
			var $r;
			var key = $this._assetToBatchLoad.get(p_name);
			$r = $this._batchLoadToAssetPack.get(key);
			return $r;
		}(this))).getFile(p_name);
	}
	,getTexture: function(p_name) {
		return ((function($this) {
			var $r;
			var key = $this._assetToBatchLoad.get(p_name);
			$r = $this._batchLoadToAssetPack.get(key);
			return $r;
		}(this))).getTexture(p_name);
	}
	,getSound: function(p_name) {
		return ((function($this) {
			var $r;
			var key = $this._assetToBatchLoad.get(p_name);
			$r = $this._batchLoadToAssetPack.get(key);
			return $r;
		}(this))).getSound(p_name);
	}
	,__class__: tools_spark_framework_assets_FlambeLoader
};
var tools_spark_framework_assets_Module = function(p_id) {
	this.id = p_id;
	this._init();
};
$hxClasses["tools.spark.framework.assets.Module"] = tools_spark_framework_assets_Module;
tools_spark_framework_assets_Module.__name__ = ["tools","spark","framework","assets","Module"];
tools_spark_framework_assets_Module.prototype = {
	_init: function() {
		this.requiresModules = [];
		this.assets = new haxe_ds_StringMap();
	}
	,__class__: tools_spark_framework_assets_Module
};
var tools_spark_framework_config_Config = function(p_configFile) {
	this._configFile = p_configFile;
	this._init();
};
$hxClasses["tools.spark.framework.config.Config"] = tools_spark_framework_config_Config;
tools_spark_framework_config_Config.__name__ = ["tools","spark","framework","config","Config"];
tools_spark_framework_config_Config.prototype = {
	_init: function() {
		this._initNodeNamesMap();
		this._initNodeTypesMap();
		this._configValidator = new tools_spark_framework_config_ConfigValidator(this._xmlNodeTypeToNodeName);
		this._configInstantiator = new tools_spark_framework_config_ConfigInstantiator(this._xmlNodeTypeToNodeName);
	}
	,parseClient: function() {
		return this._parse(tools_spark_framework_config_ENodeType.CLIENT);
	}
	,_parse: function(p_rootNodeType) {
		var l_configNode;
		tools_spark_Console.log("Config: Parsing...");
		try {
			l_configNode = Xml.parse(this._configFile.toString());
		} catch( err ) {
			if (err instanceof js__$Boot_HaxeError) err = err.val;
			tools_spark_Console.error(Std.string(err));
			return false;
		}
		l_configNode = l_configNode.firstElement();
		var l_configNodeType;
		var key = l_configNode.get_nodeName();
		l_configNodeType = this._xmlNodeNameToNodeType.get(key);
		if(l_configNodeType != p_rootNodeType) {
			tools_spark_Console.error("Config file is not correct. Expected Root Child: " + Std.string(p_rootNodeType) + ", got: " + Std.string(l_configNodeType) + ".");
			return false;
		}
		tools_spark_Console.log("Config: Validating...");
		this._configValidator.init(p_rootNodeType);
		if(this._validateConfigNode(l_configNode) == false) {
			tools_spark_Console.error("Config file could not be validated");
			return false;
		}
		tools_spark_Console.log("Config: Instantiating...");
		this._configInstantiator.init(l_configNode,p_rootNodeType);
		this._configInstantiator.instantiateProject();
		this._configInstantiator.instantiateSliced();
		this._configInstantiator.instantiatePaths();
		this._configInstantiator.instantiateAssets();
		tools_spark_Console.log("Config: Completed!");
		return true;
	}
	,_validateConfigNode: function(p_configNode) {
		var l_configNodeType;
		var key = p_configNode.get_nodeName();
		l_configNodeType = this._xmlNodeNameToNodeType.get(key);
		if(this._configValidator.validateConfigNode(p_configNode,l_configNodeType)) return true; else {
			var $it0 = p_configNode.elements();
			while( $it0.hasNext() ) {
				var elt = $it0.next();
				if(this._validateConfigNode(elt) == false) return false;
			}
			return false;
		}
	}
	,_initNodeNamesMap: function() {
		this._xmlNodeTypeToNodeName = new haxe_ds_EnumValueMap();
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.CLIENT,"Client");
			"Client";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.SERVER,"Server");
			"Server";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.PROJECT,"Project");
			"Project";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.SLICED,"Sliced");
			"Sliced";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.PATHS,"Paths");
			"Paths";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.ASSETS,"Assets");
			"Assets";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.PROJECT_NAME,"Name");
			"Name";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.PROJECT_VERSION,"Version");
			"Version";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.EXECUTE_AT_LAUNCH,"ExecuteAtLaunch");
			"ExecuteAtLaunch";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.EXECUTE_MODULE,"ExecuteModule");
			"ExecuteModule";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.SOUND_SERVICE,"Sound");
			"Sound";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.LOGIC_SERVICE,"Logic");
			"Logic";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.INPUT_SERVICE,"Input");
			"Input";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE,"Comms");
			"Comms";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.EVENT_SERVICE,"Event");
			"Event";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.DISPLAY_SERVICE,"Display");
			"Display";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.PATH,"Path");
			"Path";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.MODULE,"Module");
			"Module";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.ASSET,"Asset");
			"Asset";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.REQUIRES,"Requires");
			"Requires";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_framework_config_ENodeType.REQUIRES_MODULE,"RequiresModule");
			"RequiresModule";
		}
	}
	,_initNodeTypesMap: function() {
		this._xmlNodeNameToNodeType = new haxe_ds_StringMap();
		var k = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.CLIENT);
		var v = tools_spark_framework_config_ENodeType.CLIENT;
		this._xmlNodeNameToNodeType.set(k,v);
		v;
		var k1 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.SERVER);
		var v1 = tools_spark_framework_config_ENodeType.SERVER;
		this._xmlNodeNameToNodeType.set(k1,v1);
		v1;
		var k2 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PROJECT);
		var v2 = tools_spark_framework_config_ENodeType.PROJECT;
		this._xmlNodeNameToNodeType.set(k2,v2);
		v2;
		var k3 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.SLICED);
		var v3 = tools_spark_framework_config_ENodeType.SLICED;
		this._xmlNodeNameToNodeType.set(k3,v3);
		v3;
		var k4 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PATHS);
		var v4 = tools_spark_framework_config_ENodeType.PATHS;
		this._xmlNodeNameToNodeType.set(k4,v4);
		v4;
		var k5 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.ASSETS);
		var v5 = tools_spark_framework_config_ENodeType.ASSETS;
		this._xmlNodeNameToNodeType.set(k5,v5);
		v5;
		var k6 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PROJECT_NAME);
		var v6 = tools_spark_framework_config_ENodeType.PROJECT_NAME;
		this._xmlNodeNameToNodeType.set(k6,v6);
		v6;
		var k7 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PROJECT_VERSION);
		var v7 = tools_spark_framework_config_ENodeType.PROJECT_VERSION;
		this._xmlNodeNameToNodeType.set(k7,v7);
		v7;
		var k8 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.EXECUTE_AT_LAUNCH);
		var v8 = tools_spark_framework_config_ENodeType.EXECUTE_AT_LAUNCH;
		this._xmlNodeNameToNodeType.set(k8,v8);
		v8;
		var k9 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.EXECUTE_MODULE);
		var v9 = tools_spark_framework_config_ENodeType.EXECUTE_MODULE;
		this._xmlNodeNameToNodeType.set(k9,v9);
		v9;
		var k10 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.SOUND_SERVICE);
		var v10 = tools_spark_framework_config_ENodeType.SOUND_SERVICE;
		this._xmlNodeNameToNodeType.set(k10,v10);
		v10;
		var k11 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.LOGIC_SERVICE);
		var v11 = tools_spark_framework_config_ENodeType.LOGIC_SERVICE;
		this._xmlNodeNameToNodeType.set(k11,v11);
		v11;
		var k12 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.INPUT_SERVICE);
		var v12 = tools_spark_framework_config_ENodeType.INPUT_SERVICE;
		this._xmlNodeNameToNodeType.set(k12,v12);
		v12;
		var k13 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE);
		var v13 = tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE;
		this._xmlNodeNameToNodeType.set(k13,v13);
		v13;
		var k14 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.EVENT_SERVICE);
		var v14 = tools_spark_framework_config_ENodeType.EVENT_SERVICE;
		this._xmlNodeNameToNodeType.set(k14,v14);
		v14;
		var k15 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.DISPLAY_SERVICE);
		var v15 = tools_spark_framework_config_ENodeType.DISPLAY_SERVICE;
		this._xmlNodeNameToNodeType.set(k15,v15);
		v15;
		var k16 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PATH);
		var v16 = tools_spark_framework_config_ENodeType.PATH;
		this._xmlNodeNameToNodeType.set(k16,v16);
		v16;
		var k17 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.MODULE);
		var v17 = tools_spark_framework_config_ENodeType.MODULE;
		this._xmlNodeNameToNodeType.set(k17,v17);
		v17;
		var k18 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.ASSET);
		var v18 = tools_spark_framework_config_ENodeType.ASSET;
		this._xmlNodeNameToNodeType.set(k18,v18);
		v18;
		var k19 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.REQUIRES);
		var v19 = tools_spark_framework_config_ENodeType.REQUIRES;
		this._xmlNodeNameToNodeType.set(k19,v19);
		v19;
		var k20 = this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.REQUIRES_MODULE);
		var v20 = tools_spark_framework_config_ENodeType.REQUIRES_MODULE;
		this._xmlNodeNameToNodeType.set(k20,v20);
		v20;
	}
	,__class__: tools_spark_framework_config_Config
};
var tools_spark_framework_config_ConfigInstantiator = function(p_xmlNodeTypeToNodeName) {
	this._xmlNodeTypeToNodeName = p_xmlNodeTypeToNodeName;
};
$hxClasses["tools.spark.framework.config.ConfigInstantiator"] = tools_spark_framework_config_ConfigInstantiator;
tools_spark_framework_config_ConfigInstantiator.__name__ = ["tools","spark","framework","config","ConfigInstantiator"];
tools_spark_framework_config_ConfigInstantiator.prototype = {
	init: function(p_configNode,p_rootNodeType) {
		this._configNode = p_configNode;
		this._rootNodeType = p_rootNodeType;
	}
	,instantiateProject: function() {
		var l_projectNode = this._configNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PROJECT)).next();
		tools_spark_framework_Project.main.name = l_projectNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PROJECT_NAME)).next().firstChild().get_nodeValue();
		tools_spark_framework_Project.main.version = l_projectNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PROJECT_VERSION)).next().firstChild().get_nodeValue();
		tools_spark_framework_Project.main.type = this._rootNodeType;
		var l_ExecuteModules = l_projectNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.EXECUTE_AT_LAUNCH)).next();
		var $it0 = l_ExecuteModules.elements();
		while( $it0.hasNext() ) {
			var executeModule = $it0.next();
			tools_spark_framework_Project.main.executeModules.push(executeModule.firstChild().get_nodeValue());
		}
	}
	,instantiateSliced: function() {
		var l_slicedNode = this._configNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.SLICED)).next();
		var v = l_slicedNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.LOGIC_SERVICE)).next().firstChild().get_nodeValue();
		tools_spark_framework_Project.main.sliced.set(tools_spark_framework_config_ENodeType.LOGIC_SERVICE,v);
		v;
		var v1 = l_slicedNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE)).next().firstChild().get_nodeValue();
		tools_spark_framework_Project.main.sliced.set(tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE,v1);
		v1;
		var v2 = l_slicedNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.EVENT_SERVICE)).next().firstChild().get_nodeValue();
		tools_spark_framework_Project.main.sliced.set(tools_spark_framework_config_ENodeType.EVENT_SERVICE,v2);
		v2;
		if(tools_spark_framework_Project.main.type == tools_spark_framework_config_ENodeType.CLIENT) {
			var v3 = l_slicedNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.SOUND_SERVICE)).next().firstChild().get_nodeValue();
			tools_spark_framework_Project.main.sliced.set(tools_spark_framework_config_ENodeType.SOUND_SERVICE,v3);
			v3;
			var v4 = l_slicedNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.INPUT_SERVICE)).next().firstChild().get_nodeValue();
			tools_spark_framework_Project.main.sliced.set(tools_spark_framework_config_ENodeType.INPUT_SERVICE,v4);
			v4;
			var v5 = l_slicedNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.DISPLAY_SERVICE)).next().firstChild().get_nodeValue();
			tools_spark_framework_Project.main.sliced.set(tools_spark_framework_config_ENodeType.DISPLAY_SERVICE,v5);
			v5;
		}
	}
	,instantiatePaths: function() {
		var l_pathsNode = this._configNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PATHS)).next();
		var $it0 = l_pathsNode.elements();
		while( $it0.hasNext() ) {
			var f_pathNode = $it0.next();
			tools_spark_framework_Project.main.setPath(f_pathNode.get("location"),f_pathNode.get("type"),f_pathNode.firstChild().get_nodeValue());
		}
	}
	,instantiateAssets: function() {
		var l_assetsNode = this._configNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.ASSETS)).next();
		var $it0 = l_assetsNode.elements();
		while( $it0.hasNext() ) {
			var f_moduleNode = $it0.next();
			var k = f_moduleNode.get("id");
			var v = this._instantiateModule(f_moduleNode);
			tools_spark_framework_Project.main.modules.set(k,v);
			v;
		}
	}
	,_instantiateModule: function(p_moduleNode) {
		var l_module = new tools_spark_framework_assets_Module(p_moduleNode.get("id"));
		l_module.executeEntity = p_moduleNode.get("executeEntity");
		if(p_moduleNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.REQUIRES)).hasNext()) {
			var l_requiresNode = p_moduleNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.REQUIRES)).next();
			var $it0 = l_requiresNode.elements();
			while( $it0.hasNext() ) {
				var requiresModuleNode = $it0.next();
				l_module.requiresModules.push(requiresModuleNode.firstChild().get_nodeValue());
			}
		}
		var l_assetChildren = p_moduleNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.ASSET));
		while(l_assetChildren.hasNext()) {
			var w_assetNode = l_assetChildren.next();
			var w_asset = this._instantiateAsset(w_assetNode);
			{
				l_module.assets.set(w_asset.id,w_asset);
				w_asset;
			}
		}
		return l_module;
	}
	,_instantiateAsset: function(p_assetNode) {
		var l_assetId;
		var l_assetUrl = p_assetNode.firstChild().get_nodeValue();
		if(p_assetNode.get("id") == "auto") l_assetId = p_assetNode.get("type") + ":" + StringTools.replace(l_assetUrl.substring(0,l_assetUrl.lastIndexOf(".")),"/","."); else l_assetId = p_assetNode.get("id");
		var l_asset = new tools_spark_framework_assets_Asset(l_assetId);
		l_asset.url = l_assetUrl;
		l_asset.type = p_assetNode.get("type");
		l_asset.subtype = p_assetNode.get("subtype");
		l_asset.location = p_assetNode.get("location");
		l_asset.bytes = p_assetNode.get("bytes");
		l_asset.condition = p_assetNode.get("condition");
		l_asset.forceLoadAsData = p_assetNode.get("forceLoadAsData");
		return l_asset;
	}
	,__class__: tools_spark_framework_config_ConfigInstantiator
};
var tools_spark_framework_config_ConfigValidator = function(p_xmlNodeTypeToNodeName) {
	this._xmlNodeTypeToNodeName = p_xmlNodeTypeToNodeName;
};
$hxClasses["tools.spark.framework.config.ConfigValidator"] = tools_spark_framework_config_ConfigValidator;
tools_spark_framework_config_ConfigValidator.__name__ = ["tools","spark","framework","config","ConfigValidator"];
tools_spark_framework_config_ConfigValidator.prototype = {
	init: function(p_rootNodeType) {
		this._initNodeRulesMap(p_rootNodeType);
	}
	,_initNodeRulesMap: function(p_rootNodeType) {
		this._xmlNodeTypeToNodeRule = new haxe_ds_EnumValueMap();
		var v = this._createRequiresModuleNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.REQUIRES_MODULE,v);
		v;
		var v1 = this._createRequiresNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.REQUIRES,v1);
		v1;
		var v2 = this._createAssetNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.ASSET,v2);
		v2;
		var v3 = this._createModuleNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.MODULE,v3);
		v3;
		var v4 = this._createAssetsNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.ASSETS,v4);
		v4;
		var v5 = this._createPathNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.PATH,v5);
		v5;
		var v6 = this._createPathsNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.PATHS,v6);
		v6;
		var v7 = this._createSoundServiceNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.SOUND_SERVICE,v7);
		v7;
		var v8 = this._createLogicServiceNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.LOGIC_SERVICE,v8);
		v8;
		var v9 = this._createInputServiceNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.INPUT_SERVICE,v9);
		v9;
		var v10 = this._createCommsServiceNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE,v10);
		v10;
		var v11 = this._createEventServiceNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.EVENT_SERVICE,v11);
		v11;
		var v12 = this._createDisplayServiceNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.DISPLAY_SERVICE,v12);
		v12;
		var v13 = this._createExecuteModuleNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.EXECUTE_MODULE,v13);
		v13;
		var v14 = this._createExecuteAtLaunchNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.EXECUTE_AT_LAUNCH,v14);
		v14;
		var v15 = this._createProjectNameNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.PROJECT_NAME,v15);
		v15;
		var v16 = this._createProjectVersionNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.PROJECT_VERSION,v16);
		v16;
		var v17 = this._createProjectNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.PROJECT,v17);
		v17;
		if(p_rootNodeType == tools_spark_framework_config_ENodeType.CLIENT) {
			var v18 = this._createSlicedClientNodeRule();
			this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.SLICED,v18);
			v18;
			var v19 = this._createClientNodeRule();
			this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.CLIENT,v19);
			v19;
		} else if(p_rootNodeType == tools_spark_framework_config_ENodeType.SERVER) {
			var v20 = this._createSlicedServerNodeRule();
			this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.SLICED,v20);
			v20;
			var v21 = this._createServerNodeRule();
			this._xmlNodeTypeToNodeRule.set(tools_spark_framework_config_ENodeType.SERVER,v21);
			v21;
		}
	}
	,validateConfigNode: function(p_configNode,p_nodeType) {
		if(this._xmlNodeTypeToNodeRule.get(p_nodeType) == null) {
			tools_spark_Console.error("This Config Node Rule has not been created Yet!");
			return false;
		}
		try {
			haxe_xml_Check.checkNode(p_configNode,this._xmlNodeTypeToNodeRule.get(p_nodeType));
			return true;
		} catch( m ) {
			if (m instanceof js__$Boot_HaxeError) m = m.val;
			if( js_Boot.__instanceof(m,String) ) {
				tools_spark_Console.error(m);
				return false;
			} else throw(m);
		}
	}
	,_createClientNodeRule: function() {
		var l_children = haxe_xml_Rule.RList([this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.PROJECT),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.SLICED),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.PATHS),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.ASSETS)],false);
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.CLIENT),[],l_children);
	}
	,_createServerNodeRule: function() {
		var l_children = haxe_xml_Rule.RList([this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.PROJECT),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.SLICED),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.PATHS),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.ASSETS)],false);
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.SERVER),[],l_children);
	}
	,_createProjectNodeRule: function() {
		var l_children = haxe_xml_Rule.RList([this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.PROJECT_NAME),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.PROJECT_VERSION),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.EXECUTE_AT_LAUNCH)],false);
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PROJECT),[],l_children);
	}
	,_createProjectNameNodeRule: function() {
		var l_children = haxe_xml_Rule.RData();
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PROJECT_NAME),[],l_children);
	}
	,_createProjectVersionNodeRule: function() {
		var l_children = haxe_xml_Rule.RData();
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PROJECT_VERSION),[],l_children);
	}
	,_createExecuteAtLaunchNodeRule: function() {
		var l_children = haxe_xml_Rule.RMulti(this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.EXECUTE_MODULE),true);
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.EXECUTE_AT_LAUNCH),[],l_children);
	}
	,_createExecuteModuleNodeRule: function() {
		var l_children = haxe_xml_Rule.RData();
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.EXECUTE_MODULE),[],l_children);
	}
	,_createSlicedClientNodeRule: function() {
		var l_children = haxe_xml_Rule.RList([this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.SOUND_SERVICE),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.LOGIC_SERVICE),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.INPUT_SERVICE),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.EVENT_SERVICE),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.DISPLAY_SERVICE)],false);
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.SLICED),[],l_children);
	}
	,_createSlicedServerNodeRule: function() {
		var l_children = haxe_xml_Rule.RList([this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.LOGIC_SERVICE),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE),this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.EVENT_SERVICE)],false);
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.SLICED),[],l_children);
	}
	,_createSoundServiceNodeRule: function() {
		var l_children = haxe_xml_Rule.RData();
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.SOUND_SERVICE),[],l_children);
	}
	,_createLogicServiceNodeRule: function() {
		var l_children = haxe_xml_Rule.RData();
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.LOGIC_SERVICE),[],l_children);
	}
	,_createInputServiceNodeRule: function() {
		var l_children = haxe_xml_Rule.RData();
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.INPUT_SERVICE),[],l_children);
	}
	,_createCommsServiceNodeRule: function() {
		var l_children = haxe_xml_Rule.RData();
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE),[],l_children);
	}
	,_createEventServiceNodeRule: function() {
		var l_children = haxe_xml_Rule.RData();
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.EVENT_SERVICE),[],l_children);
	}
	,_createDisplayServiceNodeRule: function() {
		var l_children = haxe_xml_Rule.RData();
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.DISPLAY_SERVICE),[],l_children);
	}
	,_createPathsNodeRule: function() {
		var l_children = haxe_xml_Rule.RMulti(this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.PATH),true);
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PATHS),[],l_children);
	}
	,_createPathNodeRule: function() {
		var l_children = haxe_xml_Rule.RData();
		var l_attributes = [haxe_xml_Attrib.Att("location"),haxe_xml_Attrib.Att("type")];
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.PATH),l_attributes,l_children);
	}
	,_createAssetsNodeRule: function() {
		var l_children = haxe_xml_Rule.RMulti(this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.MODULE),true);
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.ASSETS),[],l_children);
	}
	,_createModuleNodeRule: function() {
		var l_children = haxe_xml_Rule.RList([haxe_xml_Rule.ROptional(this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.REQUIRES)),haxe_xml_Rule.RMulti(this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.ASSET),true)],false);
		var l_attributes = [haxe_xml_Attrib.Att("id"),haxe_xml_Attrib.Att("executeEntity",null,"none")];
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.MODULE),l_attributes,l_children);
	}
	,_createAssetNodeRule: function() {
		var l_children = haxe_xml_Rule.RData();
		var l_attributes = [haxe_xml_Attrib.Att("location"),haxe_xml_Attrib.Att("type"),haxe_xml_Attrib.Att("bytes"),haxe_xml_Attrib.Att("subtype",null,"none"),haxe_xml_Attrib.Att("id",null,"auto"),haxe_xml_Attrib.Att("condition",null,"always"),haxe_xml_Attrib.Att("forceLoadAsData",null,"false")];
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.ASSET),l_attributes,l_children);
	}
	,_createRequiresNodeRule: function() {
		var l_children = haxe_xml_Rule.RMulti(this._xmlNodeTypeToNodeRule.get(tools_spark_framework_config_ENodeType.REQUIRES_MODULE),true);
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.REQUIRES),[],l_children);
	}
	,_createRequiresModuleNodeRule: function() {
		var l_children = haxe_xml_Rule.RData();
		return haxe_xml_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_framework_config_ENodeType.REQUIRES_MODULE),[],l_children);
	}
	,__class__: tools_spark_framework_config_ConfigValidator
};
var tools_spark_framework_config_ENodeType = $hxClasses["tools.spark.framework.config.ENodeType"] = { __ename__ : ["tools","spark","framework","config","ENodeType"], __constructs__ : ["CLIENT","SERVER","PROJECT","SLICED","PATHS","ASSETS","PROJECT_NAME","PROJECT_VERSION","EXECUTE_AT_LAUNCH","EXECUTE_MODULE","SOUND_SERVICE","LOGIC_SERVICE","INPUT_SERVICE","COMMUNICATIONS_SERVICE","EVENT_SERVICE","DISPLAY_SERVICE","PATH","MODULE","ASSET","REQUIRES","REQUIRES_MODULE"] };
tools_spark_framework_config_ENodeType.CLIENT = ["CLIENT",0];
tools_spark_framework_config_ENodeType.CLIENT.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.SERVER = ["SERVER",1];
tools_spark_framework_config_ENodeType.SERVER.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.PROJECT = ["PROJECT",2];
tools_spark_framework_config_ENodeType.PROJECT.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.SLICED = ["SLICED",3];
tools_spark_framework_config_ENodeType.SLICED.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.PATHS = ["PATHS",4];
tools_spark_framework_config_ENodeType.PATHS.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.ASSETS = ["ASSETS",5];
tools_spark_framework_config_ENodeType.ASSETS.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.PROJECT_NAME = ["PROJECT_NAME",6];
tools_spark_framework_config_ENodeType.PROJECT_NAME.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.PROJECT_VERSION = ["PROJECT_VERSION",7];
tools_spark_framework_config_ENodeType.PROJECT_VERSION.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.EXECUTE_AT_LAUNCH = ["EXECUTE_AT_LAUNCH",8];
tools_spark_framework_config_ENodeType.EXECUTE_AT_LAUNCH.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.EXECUTE_MODULE = ["EXECUTE_MODULE",9];
tools_spark_framework_config_ENodeType.EXECUTE_MODULE.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.SOUND_SERVICE = ["SOUND_SERVICE",10];
tools_spark_framework_config_ENodeType.SOUND_SERVICE.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.LOGIC_SERVICE = ["LOGIC_SERVICE",11];
tools_spark_framework_config_ENodeType.LOGIC_SERVICE.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.INPUT_SERVICE = ["INPUT_SERVICE",12];
tools_spark_framework_config_ENodeType.INPUT_SERVICE.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE = ["COMMUNICATIONS_SERVICE",13];
tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.EVENT_SERVICE = ["EVENT_SERVICE",14];
tools_spark_framework_config_ENodeType.EVENT_SERVICE.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.DISPLAY_SERVICE = ["DISPLAY_SERVICE",15];
tools_spark_framework_config_ENodeType.DISPLAY_SERVICE.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.PATH = ["PATH",16];
tools_spark_framework_config_ENodeType.PATH.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.MODULE = ["MODULE",17];
tools_spark_framework_config_ENodeType.MODULE.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.ASSET = ["ASSET",18];
tools_spark_framework_config_ENodeType.ASSET.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.REQUIRES = ["REQUIRES",19];
tools_spark_framework_config_ENodeType.REQUIRES.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.REQUIRES_MODULE = ["REQUIRES_MODULE",20];
tools_spark_framework_config_ENodeType.REQUIRES_MODULE.__enum__ = tools_spark_framework_config_ENodeType;
tools_spark_framework_config_ENodeType.__empty_constructs__ = [tools_spark_framework_config_ENodeType.CLIENT,tools_spark_framework_config_ENodeType.SERVER,tools_spark_framework_config_ENodeType.PROJECT,tools_spark_framework_config_ENodeType.SLICED,tools_spark_framework_config_ENodeType.PATHS,tools_spark_framework_config_ENodeType.ASSETS,tools_spark_framework_config_ENodeType.PROJECT_NAME,tools_spark_framework_config_ENodeType.PROJECT_VERSION,tools_spark_framework_config_ENodeType.EXECUTE_AT_LAUNCH,tools_spark_framework_config_ENodeType.EXECUTE_MODULE,tools_spark_framework_config_ENodeType.SOUND_SERVICE,tools_spark_framework_config_ENodeType.LOGIC_SERVICE,tools_spark_framework_config_ENodeType.INPUT_SERVICE,tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE,tools_spark_framework_config_ENodeType.EVENT_SERVICE,tools_spark_framework_config_ENodeType.DISPLAY_SERVICE,tools_spark_framework_config_ENodeType.PATH,tools_spark_framework_config_ENodeType.MODULE,tools_spark_framework_config_ENodeType.ASSET,tools_spark_framework_config_ENodeType.REQUIRES,tools_spark_framework_config_ENodeType.REQUIRES_MODULE];
var tools_spark_framework_space2_$5D_interfaces_IBase2_$5D = function() { };
$hxClasses["tools.spark.framework.space2_5D.interfaces.IBase2_5D"] = tools_spark_framework_space2_$5D_interfaces_IBase2_$5D;
tools_spark_framework_space2_$5D_interfaces_IBase2_$5D.__name__ = ["tools","spark","framework","space2_5D","interfaces","IBase2_5D"];
tools_spark_framework_space2_$5D_interfaces_IBase2_$5D.prototype = {
	__class__: tools_spark_framework_space2_$5D_interfaces_IBase2_$5D
};
var tools_spark_framework_space2_$5D_core_ABase2_$5D = function(p_gameEntity) {
	this.gameEntity = p_gameEntity;
};
$hxClasses["tools.spark.framework.space2_5D.core.ABase2_5D"] = tools_spark_framework_space2_$5D_core_ABase2_$5D;
tools_spark_framework_space2_$5D_core_ABase2_$5D.__name__ = ["tools","spark","framework","space2_5D","core","ABase2_5D"];
tools_spark_framework_space2_$5D_core_ABase2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IBase2_$5D];
tools_spark_framework_space2_$5D_core_ABase2_$5D.prototype = {
	setPosSize: function(p_x,p_y,p_width,p_height,p_view) {
		if(this.gameEntity.getState("layoutable") == true) {
			if(p_x != null) this.gameEntity.setState("feedbackX",p_x);
			if(p_y != null) this.gameEntity.setState("feedbackY",p_y);
			if(p_width != null) this.gameEntity.setState("feedbackWidth",p_width);
			if(p_height != null) this.gameEntity.setState("feedbackHeight",p_height);
		}
	}
	,__class__: tools_spark_framework_space2_$5D_core_ABase2_$5D
};
var tools_spark_framework_space2_$5D_interfaces_IObject2_$5D = function() { };
$hxClasses["tools.spark.framework.space2_5D.interfaces.IObject2_5D"] = tools_spark_framework_space2_$5D_interfaces_IObject2_$5D;
tools_spark_framework_space2_$5D_interfaces_IObject2_$5D.__name__ = ["tools","spark","framework","space2_5D","interfaces","IObject2_5D"];
tools_spark_framework_space2_$5D_interfaces_IObject2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IBase2_$5D];
var tools_spark_framework_space2_$5D_core_AObject2_$5D = function(p_gameEntity) {
	tools_spark_framework_space2_$5D_core_ABase2_$5D.call(this,p_gameEntity);
};
$hxClasses["tools.spark.framework.space2_5D.core.AObject2_5D"] = tools_spark_framework_space2_$5D_core_AObject2_$5D;
tools_spark_framework_space2_$5D_core_AObject2_$5D.__name__ = ["tools","spark","framework","space2_5D","core","AObject2_5D"];
tools_spark_framework_space2_$5D_core_AObject2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IObject2_$5D];
tools_spark_framework_space2_$5D_core_AObject2_$5D.__super__ = tools_spark_framework_space2_$5D_core_ABase2_$5D;
tools_spark_framework_space2_$5D_core_AObject2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_ABase2_$5D.prototype,{
	__class__: tools_spark_framework_space2_$5D_core_AObject2_$5D
});
var tools_spark_framework_space2_$5D_interfaces_ICamera2_$5D = function() { };
$hxClasses["tools.spark.framework.space2_5D.interfaces.ICamera2_5D"] = tools_spark_framework_space2_$5D_interfaces_ICamera2_$5D;
tools_spark_framework_space2_$5D_interfaces_ICamera2_$5D.__name__ = ["tools","spark","framework","space2_5D","interfaces","ICamera2_5D"];
tools_spark_framework_space2_$5D_interfaces_ICamera2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IObject2_$5D];
tools_spark_framework_space2_$5D_interfaces_ICamera2_$5D.prototype = {
	__class__: tools_spark_framework_space2_$5D_interfaces_ICamera2_$5D
};
var tools_spark_framework_space2_$5D_core_ACamera2_$5D = function(p_gameEntity) {
	tools_spark_framework_space2_$5D_core_AObject2_$5D.call(this,p_gameEntity);
	this._initACamera2_5D();
};
$hxClasses["tools.spark.framework.space2_5D.core.ACamera2_5D"] = tools_spark_framework_space2_$5D_core_ACamera2_$5D;
tools_spark_framework_space2_$5D_core_ACamera2_$5D.__name__ = ["tools","spark","framework","space2_5D","core","ACamera2_5D"];
tools_spark_framework_space2_$5D_core_ACamera2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_ICamera2_$5D];
tools_spark_framework_space2_$5D_core_ACamera2_$5D.__super__ = tools_spark_framework_space2_$5D_core_AObject2_$5D;
tools_spark_framework_space2_$5D_core_ACamera2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_AObject2_$5D.prototype,{
	_initACamera2_5D: function() {
		this._attachedToViews = new haxe_ds_ObjectMap();
	}
	,attachToView: function(p_view2_5D) {
		{
			this._attachedToViews.set(p_view2_5D,p_view2_5D);
			p_view2_5D;
		}
		return null;
	}
	,updateState: function(p_state,p_view2_5D) {
		if(p_view2_5D == null) {
			var $it0 = this._attachedToViews.keys();
			while( $it0.hasNext() ) {
				var f_view = $it0.next();
				this._updateStateForView(p_state,f_view);
			}
		} else this._updateStateForView(p_state,p_view2_5D);
	}
	,_updateStateForView: function(p_state,p_view2_5D) {
		switch(p_state) {
		case "command_updateCamera":
			p_view2_5D.updateCamera();
			break;
		default:
			tools_spark_Console.warn("Unhandled Camera State value: " + p_state);
		}
	}
	,__class__: tools_spark_framework_space2_$5D_core_ACamera2_$5D
});
var tools_spark_framework_dom2_$5D_DomCamera2_$5D = function(p_gameEntity) {
	tools_spark_framework_space2_$5D_core_ACamera2_$5D.call(this,p_gameEntity);
};
$hxClasses["tools.spark.framework.dom2_5D.DomCamera2_5D"] = tools_spark_framework_dom2_$5D_DomCamera2_$5D;
tools_spark_framework_dom2_$5D_DomCamera2_$5D.__name__ = ["tools","spark","framework","dom2_5D","DomCamera2_5D"];
tools_spark_framework_dom2_$5D_DomCamera2_$5D.__super__ = tools_spark_framework_space2_$5D_core_ACamera2_$5D;
tools_spark_framework_dom2_$5D_DomCamera2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_ACamera2_$5D.prototype,{
	__class__: tools_spark_framework_dom2_$5D_DomCamera2_$5D
});
var tools_spark_framework_space2_$5D_interfaces_IObjectContainer2_$5D = function() { };
$hxClasses["tools.spark.framework.space2_5D.interfaces.IObjectContainer2_5D"] = tools_spark_framework_space2_$5D_interfaces_IObjectContainer2_$5D;
tools_spark_framework_space2_$5D_interfaces_IObjectContainer2_$5D.__name__ = ["tools","spark","framework","space2_5D","interfaces","IObjectContainer2_5D"];
tools_spark_framework_space2_$5D_interfaces_IObjectContainer2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IObject2_$5D];
var tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D = function(p_gameEntity) {
	tools_spark_framework_space2_$5D_core_AObject2_$5D.call(this,p_gameEntity);
	this.children = [];
	this.childrenMap = new haxe_ds_ObjectMap();
};
$hxClasses["tools.spark.framework.space2_5D.core.AObjectContainer2_5D"] = tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D;
tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D.__name__ = ["tools","spark","framework","space2_5D","core","AObjectContainer2_5D"];
tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IObjectContainer2_$5D];
tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D.__super__ = tools_spark_framework_space2_$5D_core_AObject2_$5D;
tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_AObject2_$5D.prototype,{
	addChild: function(p_entity2_5D) {
		if(this.childrenMap.exists(p_entity2_5D) == false) {
			this.children.push(p_entity2_5D);
			this.childrenMap.set(p_entity2_5D,true);
			if(this.gameEntity.getState("layoutable") == true) tools_spark_sliced_core_Sliced.display.invalidateLayout();
			return true;
		} else return false;
	}
	,insertChild: function(p_entity2_5D,p_index) {
		if(this.childrenMap.exists(p_entity2_5D) == false) {
			this.children.splice(p_index,0,p_entity2_5D);
			this.childrenMap.set(p_entity2_5D,true);
			if(this.gameEntity.getState("layoutable") == true) tools_spark_sliced_core_Sliced.display.invalidateLayout();
			return true;
		} else return false;
	}
	,removeChild: function(p_entity2_5D) {
		HxOverrides.remove(this.children,p_entity2_5D);
		this.childrenMap.remove(p_entity2_5D);
		if(this.gameEntity.getState("layoutable") == true) tools_spark_sliced_core_Sliced.display.invalidateLayout();
	}
	,__class__: tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D
});
var tools_spark_framework_space2_$5D_interfaces_IInstantiable2_$5D = function() { };
$hxClasses["tools.spark.framework.space2_5D.interfaces.IInstantiable2_5D"] = tools_spark_framework_space2_$5D_interfaces_IInstantiable2_$5D;
tools_spark_framework_space2_$5D_interfaces_IInstantiable2_$5D.__name__ = ["tools","spark","framework","space2_5D","interfaces","IInstantiable2_5D"];
tools_spark_framework_space2_$5D_interfaces_IInstantiable2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IObjectContainer2_$5D];
tools_spark_framework_space2_$5D_interfaces_IInstantiable2_$5D.prototype = {
	__class__: tools_spark_framework_space2_$5D_interfaces_IInstantiable2_$5D
};
var tools_spark_framework_space2_$5D_core_AInstantiable2_$5D = function(p_gameEntity) {
	tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D.call(this,p_gameEntity);
	this._initInstantiable2_5D();
};
$hxClasses["tools.spark.framework.space2_5D.core.AInstantiable2_5D"] = tools_spark_framework_space2_$5D_core_AInstantiable2_$5D;
tools_spark_framework_space2_$5D_core_AInstantiable2_$5D.__name__ = ["tools","spark","framework","space2_5D","core","AInstantiable2_5D"];
tools_spark_framework_space2_$5D_core_AInstantiable2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IInstantiable2_$5D];
tools_spark_framework_space2_$5D_core_AInstantiable2_$5D.__super__ = tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D;
tools_spark_framework_space2_$5D_core_AInstantiable2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D.prototype,{
	_initInstantiable2_5D: function() {
		this._instances = new haxe_ds_ObjectMap();
		this._updateStateFunctions = new haxe_ds_StringMap();
		this._queryFunctions = new haxe_ds_StringMap();
		this.groupInstances = new haxe_ds_ObjectMap();
	}
	,getInstance: function(p_view2_5D) {
		return this._instances.get(p_view2_5D);
	}
	,_updateState: function(p_state,p_view2_5D) {
		this.updateState(p_state,p_view2_5D);
	}
	,updateState: function(p_state,p_view2_5D) {
		if(p_view2_5D == null) {
			var $it0 = this._instances.keys();
			while( $it0.hasNext() ) {
				var f_view = $it0.next();
				this._updateStateOfInstance(p_state,f_view);
			}
		} else this._updateStateOfInstance(p_state,p_view2_5D);
	}
	,_updateStateOfInstance: function(p_state,p_view2_5D) {
		if(this._updateStateFunctions.get(p_state) != null) this._updateStateFunctions.get(p_state)(this.gameEntity.getState(p_state),p_view2_5D); else tools_spark_Console.warn("State " + p_state + " does not have a function handler! Ignoring :(");
	}
	,query: function(p_query,queryArgument,p_view2_5D,p_bAllViews) {
		if(p_bAllViews == null) p_bAllViews = false;
		if(p_view2_5D == null) {
			if(p_bAllViews) return null; else if(this._instances.keys().hasNext()) return this._queryInstance(p_query,queryArgument,this._instances.keys().next()); else return null;
		} else return this._queryInstance(p_query,queryArgument,p_view2_5D);
	}
	,_queryInstance: function(p_query,queryArgument,p_view2_5D) {
		if(this._queryFunctions.get(p_query) != null) return this._queryFunctions.get(p_query)(queryArgument,p_view2_5D); else {
			tools_spark_Console.warn("Query " + p_query + " does not have a function handler! Returning null :(");
			return null;
		}
	}
	,_updateLayoutGroup: function(p_view2_5D) {
		if(p_view2_5D == null) {
			var $it0 = this.groupInstances.keys();
			while( $it0.hasNext() ) {
				var f_view = $it0.next();
				this.groupInstances.get(f_view).update();
			}
		} else this.groupInstances.get(p_view2_5D).update();
	}
	,_createChildrenOfInstance: function(p_view2_5D) {
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) {
			var f_childEntity = _g1[_g];
			++_g;
			this._createChildOfInstance(f_childEntity,p_view2_5D);
		}
	}
	,createInstance: function(p_view2_5D) {
		this._createChildrenOfInstance(p_view2_5D);
		return this._instances.get(p_view2_5D);
	}
	,_createChildOfInstance: function(p_childEntity,p_view2_5D,p_index) {
		if(p_index == null) p_index = -1;
	}
	,_removeChildOfInstance: function(p_childEntity,p_view2_5D) {
	}
	,update: function(p_view2_5D) {
	}
	,addChild: function(p_entity2_5D) {
		if(tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D.prototype.addChild.call(this,p_entity2_5D)) {
			var $it0 = this._instances.keys();
			while( $it0.hasNext() ) {
				var f_view = $it0.next();
				this._createChildOfInstance(p_entity2_5D,f_view);
				p_entity2_5D.update(f_view);
			}
		}
		return true;
	}
	,insertChild: function(p_entity2_5D,p_index) {
		if(tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D.prototype.insertChild.call(this,p_entity2_5D,p_index)) {
			var $it0 = this._instances.keys();
			while( $it0.hasNext() ) {
				var f_view = $it0.next();
				this._createChildOfInstance(p_entity2_5D,f_view,p_index);
				p_entity2_5D.update(f_view);
			}
		}
		return true;
	}
	,removeChild: function(p_entity2_5D) {
		tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D.prototype.removeChild.call(this,p_entity2_5D);
		var $it0 = this._instances.keys();
		while( $it0.hasNext() ) {
			var f_view = $it0.next();
			this._removeChildOfInstance(p_entity2_5D,f_view);
		}
	}
	,__class__: tools_spark_framework_space2_$5D_core_AInstantiable2_$5D
});
var tools_spark_framework_space2_$5D_interfaces_IEntity2_$5D = function() { };
$hxClasses["tools.spark.framework.space2_5D.interfaces.IEntity2_5D"] = tools_spark_framework_space2_$5D_interfaces_IEntity2_$5D;
tools_spark_framework_space2_$5D_interfaces_IEntity2_$5D.__name__ = ["tools","spark","framework","space2_5D","interfaces","IEntity2_5D"];
tools_spark_framework_space2_$5D_interfaces_IEntity2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IInstantiable2_$5D];
tools_spark_framework_space2_$5D_interfaces_IEntity2_$5D.prototype = {
	__class__: tools_spark_framework_space2_$5D_interfaces_IEntity2_$5D
};
var tools_spark_framework_space2_$5D_core_AEntity2_$5D = function(p_gameEntity) {
	tools_spark_framework_space2_$5D_core_AInstantiable2_$5D.call(this,p_gameEntity);
};
$hxClasses["tools.spark.framework.space2_5D.core.AEntity2_5D"] = tools_spark_framework_space2_$5D_core_AEntity2_$5D;
tools_spark_framework_space2_$5D_core_AEntity2_$5D.__name__ = ["tools","spark","framework","space2_5D","core","AEntity2_5D"];
tools_spark_framework_space2_$5D_core_AEntity2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IEntity2_$5D];
tools_spark_framework_space2_$5D_core_AEntity2_$5D.__super__ = tools_spark_framework_space2_$5D_core_AInstantiable2_$5D;
tools_spark_framework_space2_$5D_core_AEntity2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_AInstantiable2_$5D.prototype,{
	createInstance: function(p_view2_5D) {
		if(this.gameEntity.getState("layoutable") == true) {
			var v = new tools_spark_framework_layout_containers_Group(this.gameEntity,"Entity",this);
			this.groupInstances.set(p_view2_5D,v);
			v;
		}
		return tools_spark_framework_space2_$5D_core_AInstantiable2_$5D.prototype.createInstance.call(this,p_view2_5D);
	}
	,_createChildOfInstance: function(p_childEntity,p_view2_5D,p_index) {
		if(p_index == null) p_index = -1;
		if(p_childEntity.gameEntity.getState("layoutable") == true) {
			if(p_index == -1) this.groupInstances.get(p_view2_5D).children.push(p_childEntity.groupInstances.get(p_view2_5D)); else {
				var _this = this.groupInstances.get(p_view2_5D).children;
				var x = p_childEntity.groupInstances.get(p_view2_5D);
				_this.splice(p_index,0,x);
			}
		}
	}
	,_removeChildOfInstance: function(p_childEntity,p_view2_5D) {
		if(p_childEntity.gameEntity.getState("layoutable") == true) {
			var _this = this.groupInstances.get(p_view2_5D).children;
			var x = p_childEntity.groupInstances.get(p_view2_5D);
			HxOverrides.remove(_this,x);
		}
	}
	,__class__: tools_spark_framework_space2_$5D_core_AEntity2_$5D
});
var tools_spark_framework_dom2_$5D_DomEntity2_$5D = function(p_gameEntity) {
	tools_spark_framework_space2_$5D_core_AEntity2_$5D.call(this,p_gameEntity);
	this._initDomEntity2_5D();
};
$hxClasses["tools.spark.framework.dom2_5D.DomEntity2_5D"] = tools_spark_framework_dom2_$5D_DomEntity2_$5D;
tools_spark_framework_dom2_$5D_DomEntity2_$5D.__name__ = ["tools","spark","framework","dom2_5D","DomEntity2_5D"];
tools_spark_framework_dom2_$5D_DomEntity2_$5D.__super__ = tools_spark_framework_space2_$5D_core_AEntity2_$5D;
tools_spark_framework_dom2_$5D_DomEntity2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_AEntity2_$5D.prototype,{
	_initDomEntity2_5D: function() {
		var v = $bind(this,this._updateNCmeshType);
		this._updateStateFunctions.set("NCmeshType",v);
		v;
		var v1 = $bind(this,this._updateTouchable);
		this._updateStateFunctions.set("touchable",v1);
		v1;
		var v2 = $bind(this,this._updateAcceptsKeyboardInput);
		this._updateStateFunctions.set("acceptsKeyboardInput",v2);
		v2;
		var v3 = $bind(this,this._updateDraggable);
		this._updateStateFunctions.set("draggable",v3);
		v3;
		var v4 = $bind(this,this._updateDropTarget);
		this._updateStateFunctions.set("dropTarget",v4);
		v4;
		var v5 = $bind(this,this._updateNCstyleable);
		this._updateStateFunctions.set("NCstyleable",v5);
		v5;
		var v6 = $bind(this,this._updateVisibility);
		this._updateStateFunctions.set("visibility",v6);
		v6;
		var v7 = $bind(this,this._updateOpacity);
		this._updateStateFunctions.set("opacity",v7);
		v7;
		var v8 = $bind(this,this._updateDisplay);
		this._updateStateFunctions.set("display",v8);
		v8;
		var v9 = $bind(this,this._updateText);
		this._updateStateFunctions.set("text",v9);
		v9;
		var v10 = $bind(this,this._updateFontColor);
		this._updateStateFunctions.set("fontColor",v10);
		v10;
		var v11 = $bind(this,this._updateImageSrc);
		this._updateStateFunctions.set("src",v11);
		v11;
		var v12 = $bind(this,this._updateFontSize);
		this._updateStateFunctions.set("fontSize",v12);
		v12;
		var v13 = $bind(this,this._updateFontWeight);
		this._updateStateFunctions.set("fontWeight",v13);
		v13;
		var v14 = $bind(this,this._updateOverflow);
		this._updateStateFunctions.set("overflow",v14);
		v14;
		var v15 = $bind(this,this._updateWhiteSpace);
		this._updateStateFunctions.set("whiteSpace",v15);
		v15;
		var v16 = $bind(this,this._updateWidth);
		this._updateStateFunctions.set("width",v16);
		v16;
		var v17 = $bind(this,this._updateHeight);
		this._updateStateFunctions.set("height",v17);
		v17;
		var v18 = $bind(this,this._updateTop);
		this._updateStateFunctions.set("top",v18);
		v18;
		var v19 = $bind(this,this._updateLeft);
		this._updateStateFunctions.set("left",v19);
		v19;
		var v20 = $bind(this,this._updateBackgroundColor);
		this._updateStateFunctions.set("backgroundColor",v20);
		v20;
		var v21 = $bind(this,this._updateBorder);
		this._updateStateFunctions.set("border",v21);
		v21;
		var v22 = $bind(this,this._updateBorderColor);
		this._updateStateFunctions.set("borderColor",v22);
		v22;
		var v23 = $bind(this,this._updatePointerEvents);
		this._updateStateFunctions.set("pointerEvents",v23);
		v23;
		var v24 = $bind(this,this._updateZOrder);
		this._updateStateFunctions.set("command_zOrder",v24);
		v24;
		var v25 = $bind(this,this._updateTransform);
		this._updateStateFunctions.set("transform",v25);
		v25;
		var v26 = $bind(this,this._updateTransformScale);
		this._updateStateFunctions.set("transformScale",v26);
		v26;
		var v27 = $bind(this,this._queryGlobalPosition);
		this._queryFunctions.set("globalPosition",v27);
		v27;
		var v28 = $bind(this,this._queryAbsoluteRect);
		this._queryFunctions.set("absoluteRect",v28);
		v28;
		var v29 = $bind(this,this._queryGroupObject);
		this._queryFunctions.set("groupObject",v29);
		v29;
	}
	,createInstance: function(p_view2_5D) {
		if(this._instances.get(p_view2_5D) != null) return this._instances.get(p_view2_5D); else {
			var _g = this.gameEntity.getState("NCmeshType");
			switch(_g) {
			case "Div":
				var v;
				var _this = js_Browser.get_document();
				v = _this.createElement("div");
				this._instances.set(p_view2_5D,v);
				v;
				this._instances.get(p_view2_5D).style.outline = "0";
				break;
			case "Input":
				var v1;
				var _this1 = js_Browser.get_document();
				v1 = _this1.createElement("input");
				this._instances.set(p_view2_5D,v1);
				v1;
				this._instances.get(p_view2_5D).onchange = $bind(this,this._onChange);
				this._instances.get(p_view2_5D).style.outline = "0";
				break;
			case "Button":
				var v2;
				var _this2 = js_Browser.get_document();
				v2 = _this2.createElement("div");
				this._instances.set(p_view2_5D,v2);
				v2;
				this._instances.get(p_view2_5D).style.outline = "0";
				break;
			case "Image":
				var v3;
				var _this3 = js_Browser.get_document();
				v3 = _this3.createElement("img");
				this._instances.set(p_view2_5D,v3);
				v3;
				break;
			case "Ace":
				var v4;
				var _this4 = js_Browser.get_document();
				v4 = _this4.createElement("div");
				this._instances.set(p_view2_5D,v4);
				v4;
				break;
			case "Tree":
				var v5;
				var _this5 = js_Browser.get_document();
				v5 = _this5.createElement("div");
				this._instances.set(p_view2_5D,v5);
				v5;
				break;
			case "Scroller":
				var v6;
				var _this6 = js_Browser.get_document();
				v6 = _this6.createElement("div");
				this._instances.set(p_view2_5D,v6);
				v6;
				break;
			default:
				tools_spark_Console.error("Unrecognised NCMeshType input. Creating a Div By Default.");
				var v7;
				var _this7 = js_Browser.get_document();
				v7 = _this7.createElement("div");
				this._instances.set(p_view2_5D,v7);
				v7;
			}
			this._instances.get(p_view2_5D).style.position = "absolute";
			return tools_spark_framework_space2_$5D_core_AEntity2_$5D.prototype.createInstance.call(this,p_view2_5D);
		}
	}
	,_createChildOfInstance: function(p_childEntity,p_view2_5D,p_index) {
		if(p_index == null) p_index = -1;
		this._instances.get(p_view2_5D).appendChild(js_Boot.__cast(p_childEntity.createInstance(p_view2_5D) , HTMLElement));
		tools_spark_framework_space2_$5D_core_AEntity2_$5D.prototype._createChildOfInstance.call(this,p_childEntity,p_view2_5D,p_index);
	}
	,_removeChildOfInstance: function(p_childEntity,p_view2_5D) {
		var l_childElement;
		l_childElement = js_Boot.__cast(p_childEntity.getInstance(p_view2_5D) , HTMLElement);
		if(this._instances.get(p_view2_5D) == l_childElement.parentElement) this._instances.get(p_view2_5D).removeChild(l_childElement); else tools_spark_Console.warn("Could not remove DOM Element. Element was not a child of parent");
		tools_spark_framework_space2_$5D_core_AEntity2_$5D.prototype._removeChildOfInstance.call(this,p_childEntity,p_view2_5D);
	}
	,update: function(p_view2_5D) {
		this._updateState("NCmeshType",p_view2_5D);
		if(this.gameEntity.getState("NCstyleable") == true) {
			this._updateState("NCstyleable",p_view2_5D);
			this._updateState("visibility",p_view2_5D);
			this._updateState("opacity",p_view2_5D);
			this._updateState("fontSize",p_view2_5D);
			this._updateState("fontWeight",p_view2_5D);
			this._updateState("fontColor",p_view2_5D);
			this._updateState("overflow",p_view2_5D);
			this._updateState("whiteSpace",p_view2_5D);
			this._updateState("backgroundColor",p_view2_5D);
			this._updateState("border",p_view2_5D);
			this._updateState("borderColor",p_view2_5D);
		}
		this._updateState("display",p_view2_5D);
		this._updateState("touchable",p_view2_5D);
		this._updateState("pointerEvents",p_view2_5D);
		this._updateState("acceptsKeyboardInput",p_view2_5D);
		this._updateState("draggable",p_view2_5D);
		this._updateState("dropTarget",p_view2_5D);
		if(this.gameEntity.getState("text") != null) this._updateState("text",p_view2_5D);
		if(this.gameEntity.getState("layoutable") == true) this._updateLayoutGroup(p_view2_5D);
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) {
			var f_childEntity = _g1[_g];
			++_g;
			f_childEntity.update(p_view2_5D);
		}
	}
	,setPosSize: function(p_x,p_y,p_width,p_height,p_view) {
		var l_mesh = this._instances.get(p_view);
		if(l_mesh != null) {
			if(p_x != null) l_mesh.style.left = Std.string(p_x) + "px";
			if(p_y != null) l_mesh.style.top = Std.string(p_y) + "px";
			if(p_width != null) l_mesh.style.width = Std.string(p_width) + "px";
			if(p_height != null) l_mesh.style.height = Std.string(p_height) + "px";
		}
		tools_spark_framework_space2_$5D_core_AEntity2_$5D.prototype.setPosSize.call(this,p_x,p_y,p_width,p_height,p_view);
	}
	,_updateNCstyleable: function(p_NCstyleable,p_view2_5D) {
		if(this.gameEntity.getState("borderRadius") != null && this.gameEntity.getState("borderRadius") != "Undefined") this._instances.get(p_view2_5D).style.borderRadius = this.gameEntity.getState("borderRadius");
		if(this.gameEntity.getState("borderStyle") != null && this.gameEntity.getState("borderStyle") != "Undefined") this._instances.get(p_view2_5D).style.borderStyle = this.gameEntity.getState("borderStyle");
		if(this.gameEntity.getState("borderWidth") != null && this.gameEntity.getState("borderWidth") != "Undefined") this._instances.get(p_view2_5D).style.borderWidth = this.gameEntity.getState("borderWidth");
		if(this.gameEntity.getState("boxShadow") != null && this.gameEntity.getState("boxShadow") != "Undefined") this._instances.get(p_view2_5D).style.boxShadow = this.gameEntity.getState("boxShadow");
		if(this.gameEntity.getState("fontFamily") != null && this.gameEntity.getState("fontFamily") != "Undefined") this._instances.get(p_view2_5D).style.fontFamily = this.gameEntity.getState("fontFamily");
		if(this.gameEntity.getState("textAlign") != null && this.gameEntity.getState("textAlign") != "Undefined") this._instances.get(p_view2_5D).style.textAlign = this.gameEntity.getState("textAlign");
		if(this.gameEntity.getState("textVerticalAlign") != null && this.gameEntity.getState("textVerticalAlign") != "Undefined") {
			if(this.gameEntity.getState("textVerticalAlign") == "middle") this._instances.get(p_view2_5D).style.lineHeight = Std.string(this.gameEntity.getState("height")) + "px";
		}
		if(this.gameEntity.getState("textIndent") != null && this.gameEntity.getState("textIndent") != "Undefined") this._instances.get(p_view2_5D).style.textIndent = this.gameEntity.getState("textIndent");
		if(this.gameEntity.getState("cursor") != null && this.gameEntity.getState("cursor") != "Undefined") this._instances.get(p_view2_5D).style.cursor = this.gameEntity.getState("cursor");
		if(this.gameEntity.getState("selectable") != null) {
			if(this.gameEntity.getState("selectable") == false) {
				this._instances.get(p_view2_5D).style.setProperty("-webkit-user-select","none");
				this._instances.get(p_view2_5D).style.setProperty("-moz-user-select","none");
				this._instances.get(p_view2_5D).style.setProperty("-ms-user-select","none");
				this._instances.get(p_view2_5D).style.setProperty("user-select","none");
			} else {
				this._instances.get(p_view2_5D).style.setProperty("-webkit-user-select","initial");
				this._instances.get(p_view2_5D).style.setProperty("-moz-user-select","initial");
				this._instances.get(p_view2_5D).style.setProperty("-ms-user-select","initial");
				this._instances.get(p_view2_5D).style.setProperty("user-select","initial");
			}
		}
	}
	,_updateImageSrc: function(p_src,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if(p_src != "Undefined") {
			if(p_src.indexOf("assets/") == -1) {
				if(p_src.indexOf("http") == -1 && p_src.indexOf("//") == -1) {
					var l_asset;
					var this1 = tools_spark_framework_Project.main.modules.get("SparkEditor:References").assets;
					l_asset = this1.get(p_src);
					l_instance.src = tools_spark_framework_Project.main.getPath(l_asset.location,l_asset.type) + "/" + l_asset.url;
				} else l_instance.src = p_src;
			} else l_instance.src = "http://130.211.172.86" + p_src;
		}
	}
	,_updateWidth: function(p_width,p_view2_5D) {
		if(this.gameEntity.getState("layoutable") == true) {
			this.groupInstances.get(p_view2_5D).updateState("width");
			tools_spark_sliced_core_Sliced.display.projectActiveSpaceReference.activeStageReference.layoutManager.validated = false;
		} else {
		}
	}
	,_updateHeight: function(p_height,p_view2_5D) {
		if(this.gameEntity.getState("layoutable") == true) {
			this.groupInstances.get(p_view2_5D).updateState("height");
			tools_spark_sliced_core_Sliced.display.projectActiveSpaceReference.activeStageReference.layoutManager.validated = false;
		} else {
		}
	}
	,_updateTransform: function(p_value,p_view2_5D) {
		this._instances.get(p_view2_5D).style.setProperty("-ms-transform",p_value);
		this._instances.get(p_view2_5D).style.setProperty("-webkit-transform",p_value);
		this._instances.get(p_view2_5D).style.setProperty("transform",p_value);
	}
	,_updateTransformScale: function(p_value,p_view2_5D) {
		this._instances.get(p_view2_5D).style.setProperty("zoom",p_value);
		this._instances.get(p_view2_5D).style.setProperty("-moz-transform","scale(" + p_value + ")");
	}
	,_updateTop: function(p_top,p_view2_5D) {
		if(this.gameEntity.getState("layoutable") == true) {
			this.groupInstances.get(p_view2_5D).updateState("top");
			tools_spark_sliced_core_Sliced.display.invalidateLayout();
		} else {
		}
	}
	,_updateLeft: function(p_left,p_view2_5D) {
		if(this.gameEntity.getState("layoutable") == true) {
			this.groupInstances.get(p_view2_5D).updateState("left");
			tools_spark_sliced_core_Sliced.display.invalidateLayout();
		} else {
		}
	}
	,_updateOverflow: function(p_overflow,p_view2_5D) {
		if(p_overflow != "Undefined") this._instances.get(p_view2_5D).style.overflow = p_overflow;
	}
	,_updateWhiteSpace: function(p_whiteSpace,p_view2_5D) {
		if(p_whiteSpace != "Undefined") this._instances.get(p_view2_5D).style.whiteSpace = p_whiteSpace;
	}
	,_updateFontSize: function(p_fontSize,p_view2_5D) {
		if(p_fontSize != "Undefined") this._instances.get(p_view2_5D).style.fontSize = p_fontSize;
	}
	,_updateFontWeight: function(p_fontWeight,p_view2_5D) {
		if(p_fontWeight != "Undefined") this._instances.get(p_view2_5D).style.fontWeight = p_fontWeight;
	}
	,_updateFontColor: function(p_fontColor,p_view2_5D) {
		if(p_fontColor != "Undefined") this._instances.get(p_view2_5D).style.color = p_fontColor;
	}
	,_updateVisibility: function(p_visibility,p_view2_5D) {
		this._instances.get(p_view2_5D).style.visibility = p_visibility;
	}
	,_updateOpacity: function(p_opacity,p_view2_5D) {
		this._instances.get(p_view2_5D).style.opacity = p_opacity;
	}
	,_updateBackgroundColor: function(p_backgroundColor,p_view2_5D) {
		if(p_backgroundColor != "Undefined") this._instances.get(p_view2_5D).style.backgroundColor = p_backgroundColor;
	}
	,_updateBorder: function(p_border,p_view2_5D) {
		if(p_border != "Undefined") this._instances.get(p_view2_5D).style.border = p_border;
	}
	,_updateBorderColor: function(p_borderColor,p_view2_5D) {
		if(p_borderColor != "Undefined") this._instances.get(p_view2_5D).style.borderColor = p_borderColor;
	}
	,_updateDisplay: function(p_display,p_view2_5D) {
		this._instances.get(p_view2_5D).style.display = p_display;
	}
	,_updateText: function(p_text,p_view2_5D) {
		var _g = this.gameEntity.getState("NCmeshType");
		switch(_g) {
		case "Div":
			if(p_text != "Undefined") this._instances.get(p_view2_5D).innerHTML = p_text;
			break;
		case "Input":
			this._instances.get(p_view2_5D).value = p_text;
			break;
		case "Button":
			if(p_text != "Undefined") this._instances.get(p_view2_5D).innerHTML = p_text;
			break;
		default:
		}
	}
	,_updateNCmeshType: function(p_NCmeshType,p_view2_5D) {
		switch(p_NCmeshType) {
		case "Div":
			break;
		case "Button":
			this._updateButtonProperties(p_view2_5D);
			break;
		case "Input":
			this._updateInputProperties(p_view2_5D);
			break;
		case "Image":
			this._updateImageSrc(this.gameEntity.getState("src"),p_view2_5D);
			break;
		case "Ace":
			this._updateAceProperties(p_view2_5D);
			break;
		case "Tree":
			this._updateTreeProperties(p_view2_5D);
			break;
		case "Scroller":
			this._updateScrollerProperties(p_view2_5D);
			break;
		case "Undefined":
			tools_spark_Console.warn("Undefined NCmeshType value");
			break;
		default:
			tools_spark_Console.warn("Unhandled NCmeshType value: " + p_NCmeshType);
		}
	}
	,_updateInputProperties: function(p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if(this.gameEntity.getState("text") != null && this.gameEntity.getState("text") != "Undefined") l_instance.value = this.gameEntity.getState("text");
		if(this.gameEntity.getState("placeholder") != null && this.gameEntity.getState("placeholder") != "Undefined") l_instance.placeholder = this.gameEntity.getState("placeholder");
		if(this.gameEntity.getState("type") != null && this.gameEntity.getState("type") != "Undefined") l_instance.type = this.gameEntity.getState("type");
		if(this.gameEntity.getState("type") == "file") {
			if(this.gameEntity.getState("accept") != null && this.gameEntity.getState("accept") != "Undefined") l_instance.accept = this.gameEntity.getState("accept");
			l_instance.multiple = this.gameEntity.getState("multiple");
		}
	}
	,_updateButtonProperties: function(p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if(this.gameEntity.getState("text") != null && this.gameEntity.getState("text") != "Undefined") l_instance.innerHTML = this.gameEntity.getState("text");
	}
	,_updateAceProperties: function(p_view2_5D) {
		if(this.gameEntity.getState("aceObject") == null) {
			var l_instance = this._instances.get(p_view2_5D);
			l_instance.id = "editor" + Std.string(Std.random(999999999));
			var editor = ace.edit(l_instance.id);
			editor.setTheme("ace/theme/merbivore_soft");
			editor.getSession().setMode("ace/mode/xml");
			this.gameEntity.setState("aceObject",editor);
		} else {
		}
	}
	,_updateTreeProperties: function(p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		l_instance.id = "tree";
		var tree = $("#tree");
		l_instance.style.overflowX = "hidden";
		l_instance.style.overflowY = "scroll";
		this.gameEntity.setState("treeObject",tree);
	}
	,_updateScrollerProperties: function(p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		l_instance.style.overflowY = "auto";
		var l_randomId = Std.string(Std.random(999999));
		l_instance.id = l_randomId;
		var l_element = $("#" + l_randomId);
		l_element.mCustomScrollbar({ theme : "light-thick", scrollButtons : { enable : true}, autoHideScrollbar : true, autoExpandScrollbar : true});
		var l_containerElement = l_instance.firstElementChild.firstElementChild;
		l_containerElement.style.marginRight = "0";
		this.gameEntity.setState("scrollerObject",l_element);
		this.gameEntity.setState("scrollerContainerObject",l_containerElement);
	}
	,_updateTouchable: function(p_touchableFlag,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if(l_instance != null) {
			if(p_touchableFlag) {
				l_instance.onclick = $bind(this,this._onPointerClick);
				l_instance.oncontextmenu = $bind(this,this._onMouseRightClick);
				l_instance.onmousedown = $bind(this,this._onMouseDown);
				l_instance.onmouseup = $bind(this,this._onMouseUp);
				l_instance.onmouseenter = $bind(this,this._onMouseEnter);
				l_instance.onmouseleave = $bind(this,this._onMouseLeave);
				l_instance.onmousemove = $bind(this,this._onMouseMove);
				l_instance.onwheel = $bind(this,this._onScroll);
			} else if(this.gameEntity.getState("preventDefaultEvents")) l_instance.oncontextmenu = $bind(this,this._preventDefault);
		}
	}
	,_preventDefault: function() {
		return false;
	}
	,_updateAcceptsKeyboardInput: function(p_acceptsKeyboardInputFlag,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if(l_instance != null) {
			if(p_acceptsKeyboardInputFlag) {
				l_instance.onkeypress = $bind(this,this._onKeyPress);
				l_instance.onkeyup = $bind(this,this._onKeyRelease);
				l_instance.onkeydown = $bind(this,this._onKeyDown);
				l_instance.tabIndex = 1;
			} else {
			}
		}
	}
	,_updateDraggable: function(p_flag,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if(l_instance != null) {
			if(p_flag) {
				l_instance.ondragstart = $bind(this,this._onDragStart);
				l_instance.ondrag = $bind(this,this._onDrag);
				l_instance.ondragend = $bind(this,this._onDragEnd);
				l_instance.draggable = true;
			} else {
			}
		}
	}
	,_updatePointerEvents: function(p_arguement,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if(l_instance != null) l_instance.style.setProperty("pointer-events",p_arguement);
	}
	,_updateZOrder: function(p_zOrder,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		tools_spark_Console.de("Updating z order of DOM element to: " + p_zOrder);
		tools_spark_Console.de("Current zIndex: " + l_instance.style.zIndex);
		l_instance.style.zIndex = Std.string(p_zOrder);
	}
	,_queryGlobalPosition: function(p_queryArgument,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		var l_top = 0;
		var l_left = 0;
		do {
			l_top += l_instance.offsetTop;
			l_left += l_instance.offsetLeft;
			l_instance = l_instance.offsetParent;
		} while(l_instance != null);
		return new flambe_math_Point(l_left,l_top);
	}
	,_queryAbsoluteRect: function(p_queryArgument,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		return l_instance.getBoundingClientRect();
	}
	,_queryGroupObject: function(p_queryArgument,p_view2_5D) {
		return this.groupInstances.get(p_view2_5D);
	}
	,_onDragStart: function(p_event) {
		var img;
		var _this = js_Browser.get_document();
		img = _this.createElement("img");
		p_event.dataTransfer.setDragImage(img,0,0);
		this.gameEntity.setState("eventObject",p_event);
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_START,this.gameEntity);
	}
	,_onDrag: function(p_event) {
		this.gameEntity.setState("eventObjectOnDrag",p_event);
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG,this.gameEntity);
	}
	,_onDragEnd: function(p_event) {
		this.gameEntity.setState("eventObject",p_event);
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_END,this.gameEntity);
	}
	,_updateDropTarget: function(p_flag,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if(l_instance != null) {
			if(p_flag) {
				l_instance.ondragenter = $bind(this,this._onDragEnter);
				l_instance.ondragover = $bind(this,this._onDragOver);
				l_instance.ondragleave = $bind(this,this._onDragLeave);
				l_instance.ondrop = $bind(this,this._onDrop);
			} else {
			}
		}
	}
	,_onDragEnter: function(p_event) {
		this.gameEntity.setState("eventObject",p_event);
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_ENTER,this.gameEntity);
	}
	,_onDragOver: function(p_event) {
		this.gameEntity.setState("eventObject",p_event);
		p_event.preventDefault();
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_OVER,this.gameEntity);
	}
	,_onDragLeave: function(p_event) {
		this.gameEntity.setState("eventObject",p_event);
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_LEAVE,this.gameEntity);
	}
	,_onDrop: function(p_event) {
		this.gameEntity.setState("eventObject",p_event);
		p_event.preventDefault();
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DROP,this.gameEntity);
	}
	,_onKeyPress: function(p_event) {
		this.gameEntity.setState("eventObjectKeyPress",p_event);
		if(this.gameEntity.getState("preventDefaultEvents")) p_event.preventDefault();
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_PRESSED_LOCAL,this.gameEntity);
	}
	,_onKeyRelease: function(p_event) {
		this.gameEntity.setState("eventObjectKeyRelease",p_event);
		if(this.gameEntity.getState("preventDefaultEvents")) p_event.preventDefault();
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_RELEASED_LOCAL,this.gameEntity);
	}
	,_onKeyDown: function(p_event) {
		this.gameEntity.setState("eventObjectKeyDown",p_event);
		if(this.gameEntity.getState("preventDefaultEvents")) p_event.preventDefault();
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_DOWN_LOCAL,this.gameEntity);
	}
	,_onPointerClick: function(p_event) {
		p_event.cancelBubble = true;
		if(p_event.stopPropagation) p_event.stopPropagation();
		this.gameEntity.setState("eventObject",p_event);
		tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT_CLICK,this.gameEntity);
	}
	,_onMouseRightClick: function(p_event) {
		if(this.gameEntity.getState("preventDefaultEvents")) p_event.preventDefault();
		this.gameEntity.setState("eventObject",p_event);
		tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_RIGHT_CLICK,this.gameEntity);
	}
	,_onMouseDown: function(p_event) {
		this.gameEntity.setState("eventObject",p_event);
		tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_DOWN,this.gameEntity);
	}
	,_onMouseUp: function(p_event) {
		this.gameEntity.setState("eventObject",p_event);
		tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_UP,this.gameEntity);
	}
	,_onMouseEnter: function(p_event) {
		this.gameEntity.setState("eventObject",p_event);
		tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_ENTERED,this.gameEntity);
	}
	,_onMouseLeave: function(p_event) {
		this.gameEntity.setState("eventObject",p_event);
		tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT,this.gameEntity);
	}
	,_onMouseMove: function(p_event) {
		this.gameEntity.setState("eventObjectMouseMove",p_event);
		tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_MOVED,this.gameEntity);
	}
	,_onScroll: function(p_event) {
		this.gameEntity.setState("eventObject",p_event);
		tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_SCROLL,this.gameEntity);
	}
	,_onChange: function(p_changeEvent) {
		if(this.gameEntity.getState("type") == "file") {
			this.gameEntity.setState("files",p_changeEvent.target.files);
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CHANGED,this.gameEntity);
		} else {
			this.gameEntity.setState("text",p_changeEvent.target.value);
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CHANGED,this.gameEntity);
		}
	}
	,__class__: tools_spark_framework_dom2_$5D_DomEntity2_$5D
});
var tools_spark_framework_space2_$5D_interfaces_IScene2_$5D = function() { };
$hxClasses["tools.spark.framework.space2_5D.interfaces.IScene2_5D"] = tools_spark_framework_space2_$5D_interfaces_IScene2_$5D;
tools_spark_framework_space2_$5D_interfaces_IScene2_$5D.__name__ = ["tools","spark","framework","space2_5D","interfaces","IScene2_5D"];
tools_spark_framework_space2_$5D_interfaces_IScene2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IInstantiable2_$5D];
tools_spark_framework_space2_$5D_interfaces_IScene2_$5D.prototype = {
	__class__: tools_spark_framework_space2_$5D_interfaces_IScene2_$5D
};
var tools_spark_framework_space2_$5D_core_AScene2_$5D = function(p_gameEntity) {
	this._tempX = 0;
	this._tempY = 0;
	this._scaleX = 1;
	this._scaleY = 1;
	tools_spark_framework_space2_$5D_core_AInstantiable2_$5D.call(this,p_gameEntity);
};
$hxClasses["tools.spark.framework.space2_5D.core.AScene2_5D"] = tools_spark_framework_space2_$5D_core_AScene2_$5D;
tools_spark_framework_space2_$5D_core_AScene2_$5D.__name__ = ["tools","spark","framework","space2_5D","core","AScene2_5D"];
tools_spark_framework_space2_$5D_core_AScene2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IScene2_$5D];
tools_spark_framework_space2_$5D_core_AScene2_$5D.__super__ = tools_spark_framework_space2_$5D_core_AInstantiable2_$5D;
tools_spark_framework_space2_$5D_core_AScene2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_AInstantiable2_$5D.prototype,{
	createInstance: function(p_view2_5D) {
		return tools_spark_framework_space2_$5D_core_AInstantiable2_$5D.prototype.createInstance.call(this,p_view2_5D);
	}
	,_createChildOfInstance: function(p_childEntity,p_view2_5D,p_index) {
		if(p_index == null) p_index = -1;
		if(p_childEntity.gameEntity.getState("layoutable") == true) {
			if(p_index == -1) p_view2_5D.group.children.push(p_childEntity.groupInstances.get(p_view2_5D)); else {
				var x = p_childEntity.groupInstances.get(p_view2_5D);
				p_view2_5D.group.children.splice(p_index,0,x);
			}
		}
		p_childEntity.parentScene = this;
	}
	,_removeChildOfInstance: function(p_childEntity,p_view2_5D) {
		if(p_childEntity.gameEntity.getState("layoutable") == true) {
			var x = p_childEntity.groupInstances.get(p_view2_5D);
			HxOverrides.remove(p_view2_5D.group.children,x);
		}
	}
	,updateCamera: function(p_view,p_camera) {
		var l_rect = this._getCaptureRect(p_view,p_camera);
		var l_requestedWidthScale = p_view.gameEntity.getState("feedbackWidth") / l_rect.width;
		var l_requestedHeightScale = p_view.gameEntity.getState("feedbackHeight") / l_rect.height;
		var l_scale = Math.min(l_requestedWidthScale,l_requestedHeightScale);
		this._scaleX = this._scaleY = l_scale;
		this._tempX = -l_rect.x * l_scale;
		this._tempY = -l_rect.y * l_scale;
	}
	,_getCaptureRect: function(p_view,p_camera) {
		var l_view = p_view.gameEntity;
		var l_camera = p_camera.gameEntity;
		var l_x = l_camera.getState("x");
		var l_y = l_camera.getState("y");
		var l_width = l_camera.getState("width") * l_camera.getState("zoom");
		var l_height = l_camera.getState("height") * l_camera.getState("zoom");
		var l_minBoundsWidthRatio = l_camera.getState("minBoundsWidthRatio");
		var l_minBoundsHeightRatio = l_camera.getState("minBoundsHeightRatio");
		var l_minBoundsHorizontalAlign = l_camera.getState("minBoundsHorizontalAlign");
		var l_minBoundsVerticalAlign = l_camera.getState("minBoundsVerticalAlign");
		var l_minBoundsWidth = l_width * l_minBoundsWidthRatio;
		var l_minBoundsHeight = l_height * l_minBoundsHeightRatio;
		var l_viewWidth = l_view.getState("feedbackWidth");
		var l_viewHeight = l_view.getState("feedbackHeight");
		var l_viewAspectRatio = l_viewWidth / l_viewHeight;
		tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.x = 0;
		tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.y = 0;
		tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.width = 0;
		tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.height = 0;
		if(l_viewAspectRatio > 1.5) {
			tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.height = l_minBoundsHeight;
			tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.width = Math.round(tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.height * l_viewAspectRatio);
		} else {
			tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.width = l_minBoundsWidth;
			tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.height = Math.round(tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.width / l_viewAspectRatio);
		}
		if(l_minBoundsHorizontalAlign == "Left") tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.x = l_x; else if(l_minBoundsHorizontalAlign == "Center") tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.x = l_x + (l_width - tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.width) / 2; else if(l_minBoundsHorizontalAlign == "Right") tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.x = l_x + (l_width - tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.width);
		if(l_minBoundsVerticalAlign == "Top") tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.y = l_y; else if(l_minBoundsVerticalAlign == "Middle") tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.y = l_y + (l_height - tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.height) / 2; else if(l_minBoundsVerticalAlign == "Bottom") tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.y = l_y + (l_height - tools_spark_framework_space2_$5D_core_AScene2_$5D._rect.height);
		return tools_spark_framework_space2_$5D_core_AScene2_$5D._rect;
	}
	,__class__: tools_spark_framework_space2_$5D_core_AScene2_$5D
});
var tools_spark_framework_dom2_$5D_DomScene2_$5D = function(p_gameEntity) {
	tools_spark_framework_space2_$5D_core_AScene2_$5D.call(this,p_gameEntity);
	this._initDomScene2_5D();
};
$hxClasses["tools.spark.framework.dom2_5D.DomScene2_5D"] = tools_spark_framework_dom2_$5D_DomScene2_$5D;
tools_spark_framework_dom2_$5D_DomScene2_$5D.__name__ = ["tools","spark","framework","dom2_5D","DomScene2_5D"];
tools_spark_framework_dom2_$5D_DomScene2_$5D.__super__ = tools_spark_framework_space2_$5D_core_AScene2_$5D;
tools_spark_framework_dom2_$5D_DomScene2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_AScene2_$5D.prototype,{
	_initDomScene2_5D: function() {
	}
	,createInstance: function(p_view2_5D) {
		var v;
		var _this = js_Browser.get_document();
		v = _this.createElement("div");
		this._instances.set(p_view2_5D,v);
		v;
		this._instances.get(p_view2_5D).style.position = "absolute";
		this._instances.get(p_view2_5D).style.setProperty("pointer-events","none");
		return tools_spark_framework_space2_$5D_core_AScene2_$5D.prototype.createInstance.call(this,p_view2_5D);
	}
	,update: function(p_view2_5D) {
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) {
			var f_childEntity = _g1[_g];
			++_g;
			f_childEntity.update(p_view2_5D);
		}
	}
	,_createChildOfInstance: function(p_childEntity,p_view2_5D,p_index) {
		if(p_index == null) p_index = -1;
		this._instances.get(p_view2_5D).appendChild(js_Boot.__cast(p_childEntity.createInstance(p_view2_5D) , HTMLElement));
		tools_spark_framework_space2_$5D_core_AScene2_$5D.prototype._createChildOfInstance.call(this,p_childEntity,p_view2_5D,p_index);
	}
	,_removeChildOfInstance: function(p_childEntity,p_view2_5D) {
		this._instances.get(p_view2_5D).removeChild(js_Boot.__cast(p_childEntity.getInstance(p_view2_5D) , HTMLElement));
		tools_spark_framework_space2_$5D_core_AScene2_$5D.prototype._removeChildOfInstance.call(this,p_childEntity,p_view2_5D);
	}
	,__class__: tools_spark_framework_dom2_$5D_DomScene2_$5D
});
var tools_spark_framework_space2_$5D_interfaces_IView2_$5D = function() { };
$hxClasses["tools.spark.framework.space2_5D.interfaces.IView2_5D"] = tools_spark_framework_space2_$5D_interfaces_IView2_$5D;
tools_spark_framework_space2_$5D_interfaces_IView2_$5D.__name__ = ["tools","spark","framework","space2_5D","interfaces","IView2_5D"];
tools_spark_framework_space2_$5D_interfaces_IView2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IBase2_$5D];
tools_spark_framework_space2_$5D_interfaces_IView2_$5D.prototype = {
	__class__: tools_spark_framework_space2_$5D_interfaces_IView2_$5D
};
var tools_spark_framework_space2_$5D_core_AView2_$5D = function(p_gameEntity) {
	tools_spark_framework_space2_$5D_core_ABase2_$5D.call(this,p_gameEntity);
	this.group = tools_spark_sliced_core_Sliced.display.projectActiveSpaceReference.activeStageReference.layoutManager.getViewGroupByGameEntity(this.gameEntity);
	this.group.layoutableInstance = this;
};
$hxClasses["tools.spark.framework.space2_5D.core.AView2_5D"] = tools_spark_framework_space2_$5D_core_AView2_$5D;
tools_spark_framework_space2_$5D_core_AView2_$5D.__name__ = ["tools","spark","framework","space2_5D","core","AView2_5D"];
tools_spark_framework_space2_$5D_core_AView2_$5D.__interfaces__ = [tools_spark_framework_space2_$5D_interfaces_IView2_$5D];
tools_spark_framework_space2_$5D_core_AView2_$5D.__super__ = tools_spark_framework_space2_$5D_core_ABase2_$5D;
tools_spark_framework_space2_$5D_core_AView2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_ABase2_$5D.prototype,{
	render: function() {
	}
	,updateCamera: function() {
		this.scene.updateCamera(this,this.camera);
	}
	,__class__: tools_spark_framework_space2_$5D_core_AView2_$5D
});
var tools_spark_framework_dom2_$5D_DomView2_$5D = function(p_gameEntity) {
	tools_spark_framework_space2_$5D_core_AView2_$5D.call(this,p_gameEntity);
	this._initDomView2_5D();
};
$hxClasses["tools.spark.framework.dom2_5D.DomView2_5D"] = tools_spark_framework_dom2_$5D_DomView2_$5D;
tools_spark_framework_dom2_$5D_DomView2_$5D.__name__ = ["tools","spark","framework","dom2_5D","DomView2_5D"];
tools_spark_framework_dom2_$5D_DomView2_$5D.__super__ = tools_spark_framework_space2_$5D_core_AView2_$5D;
tools_spark_framework_dom2_$5D_DomView2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_AView2_$5D.prototype,{
	updateState: function(p_state) {
		switch(p_state) {
		case "visible":
			if(this.gameEntity.getState(p_state) == true) this._instanceView.style.display = "inline"; else this._instanceView.style.display = "none";
			break;
		case "width":
			this._updateWidth(this.gameEntity.getState(p_state));
			break;
		case "height":
			this._updateHeight(this.gameEntity.getState(p_state));
			break;
		}
	}
	,_updateWidth: function(p_width) {
		if(this.gameEntity.getState("layoutable") == true) {
			this.group.updateState("width");
			tools_spark_sliced_core_Sliced.display.projectActiveSpaceReference.activeStageReference.layoutManager.validated = false;
		} else {
		}
	}
	,_updateHeight: function(p_height) {
		if(this.gameEntity.getState("layoutable") == true) {
			this.group.updateState("height");
			tools_spark_sliced_core_Sliced.display.projectActiveSpaceReference.activeStageReference.layoutManager.validated = false;
		} else {
		}
	}
	,_initDomView2_5D: function() {
		var content = js_Browser.get_document().getElementById("content");
		var _this = js_Browser.get_document();
		this._instanceView = _this.createElement("div");
		this._instanceView.style.position = "absolute";
		this._instanceView.style.setProperty("pointer-events","none");
		content.insertBefore(this._instanceView,content.firstElementChild);
	}
	,destroy: function() {
		var content = js_Browser.get_document().getElementById("content");
		content.removeChild(this._instanceView);
	}
	,set_camera: function(p_value) {
		if(this.camera == p_value) return this.camera;
		if(p_value == null) {
			this.camera = null;
			this._updateCurrentView();
			return null;
		}
		this.camera = p_value;
		this.camera.attachToView(this);
		this._updateCurrentView();
		return this.camera;
	}
	,set_scene: function(p_value) {
		if(this.scene == p_value) return this.scene;
		if(p_value == null) {
			this.scene = null;
			this._disposeCurrentScene();
			this._updateCurrentView();
			return null;
		}
		this.scene = p_value;
		this._instanceScene = js_Boot.__cast(this.scene.createInstance(this) , HTMLDivElement);
		this._updateCurrentView();
		return this.scene;
	}
	,_updateCurrentView: function() {
		if(this.scene == null || this.camera == null) {
			if(this._instanceView.firstElementChild != null) this._instanceView.removeChild(this._instanceView.firstElementChild);
			return;
		}
		if(this._instanceView.firstElementChild == null) this._instanceView.appendChild(this._instanceScene);
		this.scene.update(this);
	}
	,_disposeCurrentScene: function() {
		this._instanceScene = null;
	}
	,setPosSize: function(p_x,p_y,p_width,p_height,p_view) {
		if(p_x != null) this._instanceView.style.left = Std.string(p_x) + "px";
		if(p_y != null) this._instanceView.style.top = Std.string(p_y) + "px";
		if(p_width != null) this._instanceView.style.width = Std.string(p_width) + "px";
		if(p_height != null) this._instanceView.style.height = Std.string(p_height) + "px";
		tools_spark_framework_space2_$5D_core_AView2_$5D.prototype.setPosSize.call(this,p_x,p_y,p_width,p_height,p_view);
	}
	,__class__: tools_spark_framework_dom2_$5D_DomView2_$5D
});
var tools_spark_framework_flambe2_$5D_FlambeCamera2_$5D = function(p_gameEntity) {
	tools_spark_framework_space2_$5D_core_ACamera2_$5D.call(this,p_gameEntity);
};
$hxClasses["tools.spark.framework.flambe2_5D.FlambeCamera2_5D"] = tools_spark_framework_flambe2_$5D_FlambeCamera2_$5D;
tools_spark_framework_flambe2_$5D_FlambeCamera2_$5D.__name__ = ["tools","spark","framework","flambe2_5D","FlambeCamera2_5D"];
tools_spark_framework_flambe2_$5D_FlambeCamera2_$5D.__super__ = tools_spark_framework_space2_$5D_core_ACamera2_$5D;
tools_spark_framework_flambe2_$5D_FlambeCamera2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_ACamera2_$5D.prototype,{
	__class__: tools_spark_framework_flambe2_$5D_FlambeCamera2_$5D
});
var tools_spark_framework_flambe2_$5D_FlambeEntity2_$5D = function(p_gameEntity) {
	tools_spark_framework_space2_$5D_core_AEntity2_$5D.call(this,p_gameEntity);
	this._initFlambeEntity2_5D();
};
$hxClasses["tools.spark.framework.flambe2_5D.FlambeEntity2_5D"] = tools_spark_framework_flambe2_$5D_FlambeEntity2_$5D;
tools_spark_framework_flambe2_$5D_FlambeEntity2_$5D.__name__ = ["tools","spark","framework","flambe2_5D","FlambeEntity2_5D"];
tools_spark_framework_flambe2_$5D_FlambeEntity2_$5D.__super__ = tools_spark_framework_space2_$5D_core_AEntity2_$5D;
tools_spark_framework_flambe2_$5D_FlambeEntity2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_AEntity2_$5D.prototype,{
	_initFlambeEntity2_5D: function() {
		this._instancesMesh = new haxe_ds_ObjectMap();
		var v = $bind(this,this._update2DMeshType);
		this._updateStateFunctions.set("2DmeshType",v);
		v;
		var v1 = $bind(this,this._updatePositionX);
		this._updateStateFunctions.set("spaceX",v1);
		v1;
		var v2 = $bind(this,this._updatePositionY);
		this._updateStateFunctions.set("spaceY",v2);
		v2;
		var v3 = $bind(this,this._updateSizeX);
		this._updateStateFunctions.set("scaleX",v3);
		v3;
		var v4 = $bind(this,this._updateSizeY);
		this._updateStateFunctions.set("scaleY",v4);
		v4;
		var v5 = $bind(this,this._updateRotation);
		this._updateStateFunctions.set("rotation",v5);
		v5;
		var v6 = $bind(this,this._updateAnimateX);
		this._updateStateFunctions.set("animate_x",v6);
		v6;
		var v7 = $bind(this,this._updateAnimateY);
		this._updateStateFunctions.set("animate_y",v7);
		v7;
		var v8 = $bind(this,this._updateAnimateScaleX);
		this._updateStateFunctions.set("animate_scaleX",v8);
		v8;
		var v9 = $bind(this,this._updateAnimateScaleY);
		this._updateStateFunctions.set("animate_scaleY",v9);
		v9;
		var v10 = $bind(this,this._updateAnimateRotation);
		this._updateStateFunctions.set("animate_rotation",v10);
		v10;
		var v11 = $bind(this,this._updateTouchable);
		this._updateStateFunctions.set("touchable",v11);
		v11;
		var v12 = $bind(this,this._updateVisible);
		this._updateStateFunctions.set("visible",v12);
		v12;
		var v13 = $bind(this,this._updateOpacity);
		this._updateStateFunctions.set("opacity",v13);
		v13;
		var v14 = $bind(this,this._updateAnimateOpacity);
		this._updateStateFunctions.set("animate_opacity",v14);
		v14;
		var v15 = $bind(this,this._updateVelocityX);
		this._updateStateFunctions.set("velocityX",v15);
		v15;
		var v16 = $bind(this,this._updateVelocityY);
		this._updateStateFunctions.set("velocityY",v16);
		v16;
		var v17 = $bind(this,this._updateVelocityAng);
		this._updateStateFunctions.set("velocityAng",v17);
		v17;
		var v18 = $bind(this,this._updateApplyImpulseX);
		this._updateStateFunctions.set("applyImpulseX",v18);
		v18;
		var v19 = $bind(this,this._updateApplyImpulseY);
		this._updateStateFunctions.set("applyImpulseY",v19);
		v19;
		var v20 = $bind(this,this._updateApplyImpulseAngle);
		this._updateStateFunctions.set("applyImpulseAngle",v20);
		v20;
		var v21 = $bind(this,this._centerAnchor);
		this._updateStateFunctions.set("centerAnchor",v21);
		v21;
		var v22 = $bind(this,this._updatePhysics);
		this._updateStateFunctions.set("physicsEntity",v22);
		v22;
		var v23 = $bind(this,this._updateSpaceWidth);
		this._updateStateFunctions.set("spaceWidth",v23);
		v23;
		var v24 = $bind(this,this._updateSpaceHeight);
		this._updateStateFunctions.set("spaceHeight",v24);
		v24;
		var v25 = $bind(this,this._update2DMeshImageForm);
		this._updateStateFunctions.set("2DMeshImageForm",v25);
		v25;
		var v26 = $bind(this,this._update2DMeshTextForm);
		this._updateStateFunctions.set("2DMeshTextForm",v26);
		v26;
		var v27 = $bind(this,this._update2DMeshSpriterForm);
		this._updateStateFunctions.set("2DMeshSpriterForm",v27);
		v27;
		var v28 = $bind(this,this._update2DMeshSpritesheetForm);
		this._updateStateFunctions.set("2DMeshSpritesheetForm",v28);
		v28;
		var v29 = $bind(this,this._update2DMeshAdobeAnimationForm);
		this._updateStateFunctions.set("2DMeshAdobeAnimationForm",v29);
		v29;
		var v30 = $bind(this,this._update2DMeshParticleEmitterForm);
		this._updateStateFunctions.set("2DMeshParticleEmitterForm",v30);
		v30;
		var v31 = $bind(this,this._update2DMeshFillRectForm);
		this._updateStateFunctions.set("2DMeshFillRectForm",v31);
		v31;
		var v32 = $bind(this,this._update2DMeshSpriteForm);
		this._updateStateFunctions.set("2DMeshSpriteForm",v32);
		v32;
		var v33 = $bind(this,this._update2DMeshSpriterAnimForm);
		this._updateStateFunctions.set("2DMeshSpriterAnimForm",v33);
		v33;
		var v34 = $bind(this,this._updateFireParticle);
		this._updateStateFunctions.set("action_fire",v34);
		v34;
		var v35 = $bind(this,this._updateEmitX);
		this._updateStateFunctions.set("emitX",v35);
		v35;
		var v36 = $bind(this,this._updateEmitY);
		this._updateStateFunctions.set("emitY",v36);
		v36;
		var v37 = $bind(this,this._updateParticleEnabled);
		this._updateStateFunctions.set("particleEnabled",v37);
		v37;
		var v38 = $bind(this,this._updateParticleDuration);
		this._updateStateFunctions.set("particleDuration",v38);
		v38;
		var v39 = $bind(this,this._updateText);
		this._updateStateFunctions.set("text",v39);
		v39;
		var v40 = $bind(this,this._updateFont);
		this._updateStateFunctions.set("font",v40);
		v40;
		var v41 = $bind(this,this._updateAlign);
		this._updateStateFunctions.set("align",v41);
		v41;
		var v42 = $bind(this,this._updateWrapWidth);
		this._updateStateFunctions.set("wrapWidth",v42);
		v42;
		var v43 = $bind(this,this._updateLetterSpacing);
		this._updateStateFunctions.set("letterSpacing",v43);
		v43;
		var v44 = $bind(this,this._updateLineSpacing);
		this._updateStateFunctions.set("lineSpacing",v44);
		v44;
		var v45 = $bind(this,this._updateScissorRect);
		this._updateStateFunctions.set("scissorRect",v45);
		v45;
		var v46 = $bind(this,this._updateZOrder);
		this._updateStateFunctions.set("command_zOrder",v46);
		v46;
		var v47 = $bind(this,this._queryRealWidth);
		this._queryFunctions.set("realWidth",v47);
		v47;
		var v48 = $bind(this,this._queryRealHeight);
		this._queryFunctions.set("realHeight",v48);
		v48;
		var v49 = $bind(this,this._queryBoundsWidth);
		this._queryFunctions.set("boundsWidth",v49);
		v49;
		var v50 = $bind(this,this._queryBoundsHeight);
		this._queryFunctions.set("boundsHeight",v50);
		v50;
		var v51 = $bind(this,this._queryRealX);
		this._queryFunctions.set("x",v51);
		v51;
		var v52 = $bind(this,this._queryRealY);
		this._queryFunctions.set("y",v52);
		v52;
		var v53 = $bind(this,this._queryRealRotation);
		this._queryFunctions.set("angle",v53);
		v53;
	}
	,createInstance: function(p_view2_5D) {
		tools_spark_Console.error("Creating: " + Std.string(this.gameEntity.getState("name")));
		flambe_System.get_external().call("console.log",[this._instances.get(p_view2_5D)]);
		if(this._instances.get(p_view2_5D) != null) return this._instances.get(p_view2_5D); else {
			var v = new flambe_Entity();
			this._instances.set(p_view2_5D,v);
			v;
			return tools_spark_framework_space2_$5D_core_AEntity2_$5D.prototype.createInstance.call(this,p_view2_5D);
		}
	}
	,_createChildOfInstance: function(p_childEntity,p_view2_5D,p_index) {
		if(p_index == null) p_index = -1;
		if(p_index == -1) this._instances.get(p_view2_5D).addChild(js_Boot.__cast(p_childEntity.createInstance(p_view2_5D) , flambe_Entity)); else this._instances.get(p_view2_5D).addChild(js_Boot.__cast(p_childEntity.createInstance(p_view2_5D) , flambe_Entity),true,p_index);
		tools_spark_framework_space2_$5D_core_AEntity2_$5D.prototype._createChildOfInstance.call(this,p_childEntity,p_view2_5D,p_index);
	}
	,_removeChildOfInstance: function(p_childEntity,p_view2_5D) {
		var l_flambeEntity;
		l_flambeEntity = js_Boot.__cast(p_childEntity.getInstance(p_view2_5D) , flambe_Entity);
		var l_bodyComponent;
		var component = l_flambeEntity.getComponent("BodyComponent_8");
		l_bodyComponent = component;
		if(l_bodyComponent != null) l_flambeEntity.remove(l_bodyComponent);
		if(l_flambeEntity.parent != null) this._instances.get(p_view2_5D).removeChild(l_flambeEntity);
		tools_spark_framework_space2_$5D_core_AEntity2_$5D.prototype._removeChildOfInstance.call(this,p_childEntity,p_view2_5D);
	}
	,update: function(p_view2_5D) {
		this._updateState("2DmeshType",p_view2_5D);
		this._updateState("centerAnchor",p_view2_5D);
		this._updateState("physicsEntity",p_view2_5D);
		if(this.gameEntity.getState("layoutable") == null || this.gameEntity.getState("layoutable") == false) {
			this._updateState("spaceX",p_view2_5D);
			this._updateState("spaceY",p_view2_5D);
			this._updateState("animate_x",p_view2_5D);
			this._updateState("animate_y",p_view2_5D);
		}
		this._updateState("scaleX",p_view2_5D);
		this._updateState("scaleY",p_view2_5D);
		this._updateState("rotation",p_view2_5D);
		this._updateState("animate_scaleX",p_view2_5D);
		this._updateState("animate_scaleY",p_view2_5D);
		this._updateState("animate_rotation",p_view2_5D);
		this._updateState("touchable",p_view2_5D);
		this._updateState("visible",p_view2_5D);
		this._updateState("opacity",p_view2_5D);
		this._updateState("animate_opacity",p_view2_5D);
		if(this.gameEntity.getState("layoutable") == true) this._updateLayoutGroup(p_view2_5D);
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) {
			var f_childEntity = _g1[_g];
			++_g;
			f_childEntity.update(p_view2_5D);
		}
	}
	,_update2DMeshType: function(p_2DMeshType,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		switch(p_2DMeshType) {
		case "Image":
			this._updateStateOfInstance("2DMeshImageForm",p_view2_5D);
			break;
		case "Spriter":
			this._updateStateOfInstance("2DMeshSpriterForm",p_view2_5D);
			break;
		case "Spritesheet":
			this._updateStateOfInstance("2DMeshSpritesheetForm",p_view2_5D);
			break;
		case "AdobeAnimation":
			this._updateStateOfInstance("2DMeshAdobeAnimationForm",p_view2_5D);
			break;
		case "Particle Emitter":
			this._updateStateOfInstance("2DMeshParticleEmitterForm",p_view2_5D);
			break;
		case "FillRect":
			this._updateStateOfInstance("2DMeshFillRectForm",p_view2_5D);
			break;
		case "Sprite":
			this._updateStateOfInstance("2DMeshSpriteForm",p_view2_5D);
			break;
		case "Text":
			this._updateStateOfInstance("2DMeshTextForm",p_view2_5D);
			this._updateState("font",p_view2_5D);
			this._updateState("align",p_view2_5D);
			this._updateState("wrapWidth",p_view2_5D);
			this._updateState("letterSpacing",p_view2_5D);
			this._updateState("lineSpacing",p_view2_5D);
			break;
		case "Undefined":
			tools_spark_Console.warn("Undefined 2DmeshType value");
			break;
		default:
			tools_spark_Console.warn("Unhandled 2DmeshType value: " + p_2DMeshType);
		}
		this._updateBounds(p_view2_5D);
	}
	,_update2DMeshImageForm: function(p_2DMeshImageForm,p_view2_5D) {
		if(this.gameEntity.getState("2DmeshType") != "Image") return;
		if(p_2DMeshImageForm == "Undefined") return;
		var l_instance = this._instances.get(p_view2_5D);
		var l_mesh;
		if(this._instancesMesh.get(p_view2_5D) != null) l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_ImageSprite); else l_mesh = null;
		var l_imageUrl;
		if(p_2DMeshImageForm.charAt(0) == "[") l_imageUrl = this.gameEntity.gameForm.getState(p_2DMeshImageForm.substring(1,p_2DMeshImageForm.length - 1)); else l_imageUrl = p_2DMeshImageForm;
		if(l_mesh == null) {
			l_mesh = new flambe_display_ImageSprite(tools_spark_framework_Assets.getTexture(l_imageUrl));
			l_instance.add(l_mesh);
			{
				this._instancesMesh.set(p_view2_5D,l_mesh);
				l_mesh;
			}
		} else {
			l_mesh.texture = tools_spark_framework_Assets.getTexture(l_imageUrl);
			l_mesh.centerAnchor();
		}
	}
	,_update2DMeshTextForm: function(p_2DMeshTextForm,p_view2_5D) {
		if(this.gameEntity.getState("2DmeshType") != "Text") return;
		if(p_2DMeshTextForm == "Undefined") return;
		var l_instance = this._instances.get(p_view2_5D);
		var l_mesh;
		if(this._instancesMesh.get(p_view2_5D) != null) l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_TextSprite); else l_mesh = null;
		if(l_mesh == null) {
			var l_fontName;
			if(p_2DMeshTextForm.charAt(0) == "[") l_fontName = this.gameEntity.gameForm.getState(p_2DMeshTextForm.substring(1,p_2DMeshTextForm.length - 1)); else l_fontName = p_2DMeshTextForm;
			var l_font = new flambe_display_Font(tools_spark_framework_Assets.getAssetPackOf(l_fontName + ".fnt"),l_fontName);
			l_mesh = new flambe_display_TextSprite(l_font,this.gameEntity.getState("text"));
			l_instance.add(l_mesh);
			{
				this._instancesMesh.set(p_view2_5D,l_mesh);
				l_mesh;
			}
		} else {
		}
	}
	,_update2DMeshParticleEmitterForm: function(p_2DMeshParticleEmitterForm,p_view2_5D) {
		if(this.gameEntity.getState("2DmeshType") != "Particle Emitter") return;
		if(p_2DMeshParticleEmitterForm == "Undefined") return;
		var l_instance = this._instances.get(p_view2_5D);
		var l_mesh;
		if(this._instancesMesh.get(p_view2_5D) != null) l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_EmitterSprite); else l_mesh = null;
		if(l_mesh == null) {
			var l_moldName;
			if(p_2DMeshParticleEmitterForm.charAt(0) == "[") l_moldName = this.gameEntity.gameForm.getState(p_2DMeshParticleEmitterForm.substring(1,p_2DMeshParticleEmitterForm.length - 1)); else l_moldName = p_2DMeshParticleEmitterForm;
			var l_mold = new flambe_display_EmitterMold(tools_spark_framework_Assets.getAssetPackOf(l_moldName + ".pex"),l_moldName);
			this.gameEntity.setState("feedback_mold",l_mold);
			l_mesh = l_mold.createEmitter();
			l_mesh.enabled = this.gameEntity.getState("particleEnabled");
			l_mesh.duration = this.gameEntity.getState("particleDuration");
			l_mesh.emitX.set__(this.gameEntity.getState("emitX"));
			l_mesh.emitY.set__(this.gameEntity.getState("emitY"));
			l_instance.add(l_mesh);
			{
				this._instancesMesh.set(p_view2_5D,l_mesh);
				l_mesh;
			}
		} else {
		}
	}
	,_update2DMeshSpriterForm: function(p_2DMeshSpriterForm,p_view2_5D) {
		if(this.gameEntity.getState("2DmeshType") != "Spriter") return;
		if(p_2DMeshSpriterForm == "Undefined") return;
		var l_instance = this._instances.get(p_view2_5D);
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(l_mesh == null) {
			l_mesh = new flambe_display_Sprite();
			var l_SpriterFormName = this.gameEntity.gameForm.getState(p_2DMeshSpriterForm);
			var l_spriterMovie = new spriter_flambe_SpriterMovie(tools_spark_framework_Assets.getAssetPackOf(l_SpriterFormName),l_SpriterFormName,null);
			l_instance.add(l_mesh);
			l_instance.add(l_spriterMovie);
			{
				this._instancesMesh.set(p_view2_5D,l_mesh);
				l_mesh;
			}
		} else {
		}
		this._updateStateOfInstance("2DMeshSpriterAnimForm",p_view2_5D);
	}
	,_update2DMeshSpritesheetForm: function(p_2DMeshSpritesheetForm,p_view2_5D) {
		if(this.gameEntity.getState("2DmeshType") != "Spritesheet") return;
		if(p_2DMeshSpritesheetForm == "Undefined") return;
		var l_instance = this._instances.get(p_view2_5D);
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(l_mesh == null) {
			l_mesh = new flambe_display_Sprite();
			var l_SpritesheetFormName;
			if(p_2DMeshSpritesheetForm.charAt(0) == "[") l_SpritesheetFormName = this.gameEntity.gameForm.getState(p_2DMeshSpritesheetForm.substring(1,p_2DMeshSpritesheetForm.length - 1)); else l_SpritesheetFormName = p_2DMeshSpritesheetForm;
			var l_spritesheetPlayer = new tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheetPlayer(tools_spark_framework_Assets.getAssetPackOf(l_SpritesheetFormName),l_SpritesheetFormName,this.gameEntity.getState("Atlas File"));
			this.gameEntity.setState("obj_player",l_spritesheetPlayer);
			l_instance.add(l_mesh);
			l_instance.add(l_spritesheetPlayer);
			{
				this._instancesMesh.set(p_view2_5D,l_mesh);
				l_mesh;
			}
		} else {
		}
		var l_spritesheetPlayeTemp;
		var component = l_instance.getComponent("SpriteSheetPlayer_2");
		l_spritesheetPlayeTemp = component;
		if(this.gameEntity.getState("AnimationLoop") == true) l_spritesheetPlayeTemp.loop(); else l_spritesheetPlayeTemp.play();
		l_spritesheetPlayeTemp.setSpeed(this.gameEntity.getState("AnimationSpeed"));
	}
	,_update2DMeshAdobeAnimationForm: function(p_2DMeshAdobeAnimationForm,p_view2_5D) {
		if(this.gameEntity.getState("2DmeshType") != "AdobeAnimation") return;
		if(p_2DMeshAdobeAnimationForm == "Undefined") return;
		var l_instance = this._instances.get(p_view2_5D);
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(l_mesh == null) {
			l_mesh = new flambe_display_Sprite();
			var l_AdobeAnimationFormName;
			if(p_2DMeshAdobeAnimationForm.charAt(0) == "[") l_AdobeAnimationFormName = this.gameEntity.gameForm.getState(p_2DMeshAdobeAnimationForm.substring(1,p_2DMeshAdobeAnimationForm.length - 1)); else l_AdobeAnimationFormName = p_2DMeshAdobeAnimationForm;
			var l_library = new flambe_swf_Library(tools_spark_framework_Assets.getAssetPackOf(l_AdobeAnimationFormName),l_AdobeAnimationFormName,this.gameEntity.getState("Atlas Folder"));
			var l_moviePlayer = new flambe_swf_MoviePlayer(l_library);
			if(this.gameEntity.getState("Init Animation Loop") == true) l_moviePlayer.loop(this.gameEntity.getState("Init Animation")); else l_moviePlayer.play(this.gameEntity.getState("Init Animation"));
			var l_movieEntity = new flambe_Entity().add(l_moviePlayer);
			this.gameEntity.setState("obj_player",l_moviePlayer);
			l_instance.add(l_mesh);
			l_instance.addChild(l_movieEntity);
			{
				this._instancesMesh.set(p_view2_5D,l_mesh);
				l_mesh;
			}
		} else {
		}
	}
	,_update2DMeshFillRectForm: function(p_2DMeshFillRectForm,p_view2_5D) {
		if(this.gameEntity.getState("2DmeshType") != "FillRect") return;
		if(p_2DMeshFillRectForm == "Undefined") return;
		var l_instance = this._instances.get(p_view2_5D);
		var l_mesh;
		if(this._instancesMesh.get(p_view2_5D) != null) l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_FillSprite); else l_mesh = null;
		var l_color;
		if(p_2DMeshFillRectForm.charAt(0) == "[") l_color = this.gameEntity.gameForm.getState(p_2DMeshFillRectForm.substring(1,p_2DMeshFillRectForm.length - 1)); else l_color = Std.parseInt(p_2DMeshFillRectForm);
		if(l_mesh == null) {
			l_mesh = new flambe_display_FillSprite(l_color,this.gameEntity.getState("spaceWidth"),this.gameEntity.getState("spaceHeight"));
			l_mesh.scissor = new flambe_math_Rectangle(0,0,this.gameEntity.getState("spaceWidth"),this.gameEntity.getState("spaceHeight"));
			l_instance.add(l_mesh);
			{
				this._instancesMesh.set(p_view2_5D,l_mesh);
				l_mesh;
			}
		} else l_mesh.color = l_color;
	}
	,_updateScissorRect: function(p_scissorRect,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(l_mesh != null) {
			if(l_mesh.scissor == null) l_mesh.scissor = new flambe_math_Rectangle(p_scissorRect.x,p_scissorRect.y,p_scissorRect.width,p_scissorRect.height); else {
				l_mesh.scissor.x = p_scissorRect.x;
				l_mesh.scissor.y = p_scissorRect.y;
				l_mesh.scissor.width = p_scissorRect.width;
				l_mesh.scissor.height = p_scissorRect.height;
			}
		}
	}
	,_update2DMeshSpriteForm: function(p_2DMeshSpriteForm,p_view2_5D) {
		if(this.gameEntity.getState("2DmeshType") != "Sprite") return;
		var l_instance = this._instances.get(p_view2_5D);
		var l_mesh;
		if(this._instancesMesh.get(p_view2_5D) != null) l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_Sprite); else l_mesh = null;
		if(l_mesh == null) {
			l_mesh = new flambe_display_Sprite();
			l_instance.add(l_mesh);
			{
				this._instancesMesh.set(p_view2_5D,l_mesh);
				l_mesh;
			}
		} else {
		}
	}
	,_update2DMeshSpriterAnimForm: function(p_2DMeshSpriterAnimForm,p_view2_5D) {
		if(this.gameEntity.getState("2DmeshType") != "Spriter") return;
		if(this.gameEntity.getState("2DMeshSpriterForm") == "Undefined") return;
		if(p_2DMeshSpriterAnimForm == "Undefined") return;
		var l_instance = this._instances.get(p_view2_5D);
		var l_spriterMovie;
		var component = l_instance.getComponent("SpriterMovie_1");
		l_spriterMovie = component;
		if(l_spriterMovie != null) l_spriterMovie.playAnim(this.gameEntity.gameForm.getState(p_2DMeshSpriterAnimForm));
	}
	,_updateAnimateX: function(p_animate,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(p_animate != null) {
			if(this.gameEntity.getState("physicsEntity") == null || this.gameEntity.getState("physicsEntity") == false) {
				if(p_animate.type == null || p_animate.type == "normal") l_mesh.x.animate(p_animate.from,p_animate.to,p_animate.seconds,p_animate.easing); else if(p_animate.type == "to") l_mesh.x.animateTo(p_animate.to,p_animate.seconds,p_animate.easing); else if(p_animate.type == "by") l_mesh.x.animateBy(p_animate.by,p_animate.seconds,p_animate.easing); else tools_spark_Console.warn("Unknown animate method");
			}
		}
	}
	,_updateAnimateY: function(p_animate,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(p_animate != null) {
			if(this.gameEntity.getState("physicsEntity") == null || this.gameEntity.getState("physicsEntity") == false) {
				if(p_animate.type == null || p_animate.type == "normal") l_mesh.y.animate(p_animate.from,p_animate.to,p_animate.seconds,p_animate.easing); else if(p_animate.type == "to") l_mesh.y.animateTo(p_animate.to,p_animate.seconds,p_animate.easing); else if(p_animate.type == "by") l_mesh.y.animateBy(p_animate.by,p_animate.seconds,p_animate.easing); else tools_spark_Console.warn("Unknown animate method");
			}
		}
	}
	,_updateAnimateScaleX: function(p_animate,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(p_animate != null) {
			if(p_animate.type == null || p_animate.type == "normal") l_mesh.scaleX.animate(p_animate.from,p_animate.to,p_animate.seconds,p_animate.easing); else if(p_animate.type == "to") l_mesh.scaleX.animateTo(p_animate.to,p_animate.seconds,p_animate.easing); else if(p_animate.type == "by") l_mesh.scaleX.animateBy(p_animate.by,p_animate.seconds,p_animate.easing); else tools_spark_Console.warn("Unknown animate method");
		}
	}
	,_updateAnimateScaleY: function(p_animate,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(p_animate != null) {
			if(p_animate.type == null || p_animate.type == "normal") l_mesh.scaleY.animate(p_animate.from,p_animate.to,p_animate.seconds,p_animate.easing); else if(p_animate.type == "to") l_mesh.scaleY.animateTo(p_animate.to,p_animate.seconds,p_animate.easing); else if(p_animate.type == "by") l_mesh.scaleY.animateBy(p_animate.by,p_animate.seconds,p_animate.easing); else tools_spark_Console.warn("Unknown animate method");
		}
	}
	,_updateAnimateRotation: function(p_animate,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(p_animate != null) {
			if(this.gameEntity.getState("physicsEntity") == null || this.gameEntity.getState("physicsEntity") == false) {
				if(p_animate.type == null || p_animate.type == "normal") l_mesh.rotation.animate(p_animate.from,p_animate.to,p_animate.seconds,p_animate.easing); else if(p_animate.type == "to") l_mesh.rotation.animateTo(p_animate.to,p_animate.seconds,p_animate.easing); else if(p_animate.type == "by") l_mesh.rotation.animateBy(p_animate.by,p_animate.seconds,p_animate.easing); else tools_spark_Console.warn("Unknown animate method");
			}
		}
	}
	,_updatePositionX: function(p_newPos,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(this.gameEntity.getState("physicsEntity")) {
			if(this.gameEntity.getState("physicsType") != "Static") (js_Boot.__cast(this.gameEntity.getState("physicsBody") , nape_phys_Body)).get_position().set_x(p_newPos);
		} else l_mesh.x.set__(p_newPos);
	}
	,_updatePositionY: function(p_newPos,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(this.gameEntity.getState("physicsEntity")) {
			if(this.gameEntity.getState("physicsType") != "Static") (js_Boot.__cast(this.gameEntity.getState("physicsBody") , nape_phys_Body)).get_position().set_y(p_newPos);
		} else l_mesh.y.set__(p_newPos);
	}
	,_updateSizeX: function(p_newScale,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(l_mesh != null) l_mesh.scaleX.set__(p_newScale);
	}
	,_updateSizeY: function(p_newScale,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(l_mesh != null) l_mesh.scaleY.set__(p_newScale);
	}
	,_updateRotation: function(p_newRotation,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(this.gameEntity.getState("physicsEntity")) {
			if(this.gameEntity.getState("physicsType") != "Static") (js_Boot.__cast(this.gameEntity.getState("physicsBody") , nape_phys_Body)).set_rotation(flambe_math_FMath.toRadians(p_newRotation));
		} else l_mesh.rotation.set__(p_newRotation);
	}
	,_updateVisible: function(p_visibleFlag,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(l_mesh != null) l_mesh.set_visible(p_visibleFlag);
	}
	,_updateOpacity: function(p_opacity,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(l_mesh != null) l_mesh.setAlpha(p_opacity);
	}
	,_updateAnimateOpacity: function(p_animate,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(p_animate != null) {
			if(p_animate.type == null || p_animate.type == "normal") l_mesh.alpha.animate(p_animate.from,p_animate.to,p_animate.seconds,p_animate.easing); else if(p_animate.type == "to") l_mesh.alpha.animateTo(p_animate.to,p_animate.seconds,p_animate.easing); else if(p_animate.type == "by") l_mesh.alpha.animateBy(p_animate.by,p_animate.seconds,p_animate.easing); else tools_spark_Console.warn("Unknown animate method");
		}
	}
	,_updateFireParticle: function(p_par,p_view2_5D) {
		var l_mesh;
		l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_EmitterSprite);
		if(l_mesh != null) {
			if(p_par == true) {
				l_mesh.restart();
				this.gameEntity.setStateSilent("action_fire",false);
			}
		}
	}
	,_updateEmitX: function(p_par,p_view2_5D) {
		var l_mesh;
		l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_EmitterSprite);
		if(l_mesh != null) l_mesh.emitX.set__(p_par);
	}
	,_updateEmitY: function(p_par,p_view2_5D) {
		var l_mesh;
		l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_EmitterSprite);
		if(l_mesh != null) l_mesh.emitY.set__(p_par);
	}
	,_updateParticleEnabled: function(p_par,p_view2_5D) {
		var l_mesh;
		l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_EmitterSprite);
		if(l_mesh != null) l_mesh.enabled = p_par;
	}
	,_updateParticleDuration: function(p_par,p_view2_5D) {
		var l_mesh;
		l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_EmitterSprite);
		if(l_mesh != null) l_mesh.duration = p_par;
	}
	,_updateText: function(p_par,p_view2_5D) {
		var l_mesh;
		l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_TextSprite);
		if(l_mesh != null) l_mesh.set_text(p_par);
	}
	,_updateFont: function(p_par,p_view2_5D) {
		var l_mesh;
		l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_TextSprite);
		if(l_mesh != null) l_mesh.set_font(new flambe_display_Font(tools_spark_framework_Assets.getAssetPackOf(p_par + ".fnt"),p_par));
	}
	,_updateAlign: function(p_par,p_view2_5D) {
		var l_mesh;
		l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_TextSprite);
		if(l_mesh != null) switch(p_par) {
		case "Left":
			l_mesh.setAlign(flambe_display_TextAlign.Left);
			break;
		case "Center":
			l_mesh.setAlign(flambe_display_TextAlign.Center);
			break;
		case "Right":
			l_mesh.setAlign(flambe_display_TextAlign.Right);
			break;
		default:
		}
	}
	,_updateWrapWidth: function(p_par,p_view2_5D) {
		var l_mesh;
		l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_TextSprite);
		if(l_mesh != null) l_mesh.setWrapWidth(p_par);
	}
	,_updateLetterSpacing: function(p_par,p_view2_5D) {
		var l_mesh;
		l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_TextSprite);
		if(l_mesh != null) l_mesh.setLetterSpacing(p_par);
	}
	,_updateLineSpacing: function(p_par,p_view2_5D) {
		var l_mesh;
		l_mesh = js_Boot.__cast(this._instancesMesh.get(p_view2_5D) , flambe_display_TextSprite);
		if(l_mesh != null) l_mesh.setLineSpacing(p_par);
	}
	,_updateZOrder: function(p_zOrder,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		l_instance.setZOrder(p_zOrder);
	}
	,_centerAnchor: function(p_centerAnchorFlag,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(l_mesh != null) l_mesh.centerAnchor();
	}
	,_updatePhysics: function(p_physicsFlag,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(l_mesh != null) {
			if(p_physicsFlag) {
				if(this.parentScene != null) {
					if(this.parentScene.gameEntity.getState("physicsScene")) {
						var l_sceneInstance = this.parentScene.getInstance(p_view2_5D);
						var bodyType;
						if(this.gameEntity.getState("physicsType") == "Static") bodyType = nape_phys_BodyType.get_STATIC(); else if(this.gameEntity.getState("physicsType") == "Kinematic") bodyType = nape_phys_BodyType.get_KINEMATIC(); else if(this.gameEntity.getState("physicsType") == "Dynamic") bodyType = nape_phys_BodyType.get_DYNAMIC(); else bodyType = nape_phys_BodyType.get_STATIC();
						var body = new nape_phys_Body(bodyType);
						var l_material;
						var _g = this.gameEntity.getState("physicsMaterial");
						switch(_g) {
						case "Glass":
							l_material = nape_phys_Material.glass();
							break;
						case "Ice":
							l_material = nape_phys_Material.ice();
							break;
						case "Rubber":
							l_material = nape_phys_Material.rubber();
							break;
						case "Sand":
							l_material = nape_phys_Material.sand();
							break;
						case "Steel":
							l_material = nape_phys_Material.steel();
							break;
						case "Wood":
							l_material = nape_phys_Material.wood();
							break;
						case "Ellastic":
							l_material = new nape_phys_Material(1,0,0,1,0);
							break;
						case "Biped":
							l_material = new nape_phys_Material(0,1,2,10,0.001);
							break;
						default:
							l_material = nape_phys_Material.wood();
						}
						var l_meshWidth = flambe_display_Sprite.getBounds(l_instance).width * this.gameEntity.getState("scaleX");
						var l_meshHeight = flambe_display_Sprite.getBounds(l_instance).height * this.gameEntity.getState("scaleY");
						if(this.gameEntity.getState("2DmeshType") != "Spriter") {
							var l_shape;
							var _g1 = this.gameEntity.getState("physicsShape");
							switch(_g1) {
							case "Circle":
								var l_radious = (l_meshWidth + l_meshHeight) / 4;
								l_shape = new nape_shape_Circle(l_radious,null,l_material);
								break;
							case "Polygon":
								l_shape = new nape_shape_Polygon(nape_shape_Polygon.box(l_meshWidth,l_meshHeight),l_material);
								break;
							case "Triangle":
								var l_verts = nape_shape_Polygon.regular(l_meshWidth * .5,l_meshHeight,4,-Math.PI * .5);
								l_verts.splice(2,1);
								var _g11 = 0;
								while(_g11 < l_verts.length) {
									var f_vert = l_verts[_g11];
									++_g11;
									var _g2 = f_vert;
									_g2.set_y(_g2.get_y() + l_meshHeight / 2);
								}
								l_shape = new nape_shape_Polygon(l_verts);
								break;
							default:
								l_shape = new nape_shape_Polygon(nape_shape_Polygon.box(l_meshWidth,l_meshHeight),l_material);
							}
							l_shape.set_sensorEnabled(this.gameEntity.getState("physicsSensorFlag"));
							body.get_shapes().add(l_shape);
							body.set_allowRotation(this.gameEntity.getState("allowRotation"));
						} else if(this.gameEntity.getState("physicsShape") == "Biped") {
							tools_spark_Console.error("LOOOK AT l_mesh.scaleX._: " + l_mesh.scaleX.get__());
							body.get_shapes().add(new nape_shape_Polygon(nape_shape_Polygon.rect(0,0,203,573),l_material));
							body.set_allowRotation(false);
						} else body.get_shapes().add(new nape_shape_Polygon(nape_shape_Polygon.box(100,100),l_material));
						if(this.gameEntity.getState("inertia") != 12345) body.set_inertia(this.gameEntity.getState("inertia"));
						this.gameEntity.setState("physicsBody",body);
						body.set_position(new nape_geom_Vec2(this.gameEntity.getState("spaceX"),this.gameEntity.getState("spaceY")));
						body.set_rotation(flambe_math_FMath.toRadians(this.gameEntity.getState("rotation")));
						if(this.gameEntity.getState("physicsType") == "Dynamic" || this.gameEntity.getState("physicsType") == "Kinematic") {
							body.set_velocity(new nape_geom_Vec2(this.gameEntity.getState("velocityX"),this.gameEntity.getState("velocityY")));
							body.set_angularVel(flambe_math_FMath.toRadians(this.gameEntity.getState("velocityAng")));
						}
						body.set_space(((function($this) {
							var $r;
							var component = l_sceneInstance.getComponent("SpaceComponent_7");
							$r = component;
							return $r;
						}(this))).space);
						body.get_userData().gameEntity = this.gameEntity;
						l_instance.add(new tools_spark_framework_flambe2_$5D_components_BodyComponent(body));
					} else {
						this.gameEntity.setState("physicsEntity",false);
						tools_spark_Console.warn("Entity " + Std.string(this.gameEntity.getState("name")) + " failed to become a physics object. ParentScene not physics");
					}
				} else {
					this.gameEntity.setState("physicsEntity",false);
					tools_spark_Console.warn("Entity " + Std.string(this.gameEntity.getState("name")) + " failed to become a physics object. ParentScene null");
				}
			} else if(this.gameEntity.getState("physicsBody") != null) {
				tools_spark_Console.de("Removing physics body thing");
				this.gameEntity.setState("physicsBody",null);
				l_instance.remove((function($this) {
					var $r;
					var component1 = l_instance.getComponent("BodyComponent_8");
					$r = component1;
					return $r;
				}(this)));
			}
		}
	}
	,_updateVelocityX: function(p_newVel,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if((function($this) {
			var $r;
			var component = l_instance.getComponent("BodyComponent_8");
			$r = component;
			return $r;
		}(this)) == null) return;
		var body;
		body = ((function($this) {
			var $r;
			var component1 = l_instance.getComponent("BodyComponent_8");
			$r = component1;
			return $r;
		}(this))).body;
		body.get_velocity().set_x(p_newVel);
	}
	,_updateVelocityY: function(p_newVel,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if((function($this) {
			var $r;
			var component = l_instance.getComponent("BodyComponent_8");
			$r = component;
			return $r;
		}(this)) == null) return;
		var body;
		body = ((function($this) {
			var $r;
			var component1 = l_instance.getComponent("BodyComponent_8");
			$r = component1;
			return $r;
		}(this))).body;
		body.get_velocity().set_y(p_newVel);
	}
	,_updateVelocityAng: function(p_newVel,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if((function($this) {
			var $r;
			var component = l_instance.getComponent("BodyComponent_8");
			$r = component;
			return $r;
		}(this)) == null) return;
		var body;
		body = ((function($this) {
			var $r;
			var component1 = l_instance.getComponent("BodyComponent_8");
			$r = component1;
			return $r;
		}(this))).body;
		body.set_angularVel(flambe_math_FMath.toRadians(p_newVel));
	}
	,_updateApplyImpulseX: function(p_newVel,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if((function($this) {
			var $r;
			var component = l_instance.getComponent("BodyComponent_8");
			$r = component;
			return $r;
		}(this)) == null) return;
		var body;
		body = ((function($this) {
			var $r;
			var component1 = l_instance.getComponent("BodyComponent_8");
			$r = component1;
			return $r;
		}(this))).body;
		body.applyImpulse(nape_geom_Vec2.weak(p_newVel,0));
	}
	,_updateApplyImpulseY: function(p_newVel,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if((function($this) {
			var $r;
			var component = l_instance.getComponent("BodyComponent_8");
			$r = component;
			return $r;
		}(this)) == null) return;
		var body;
		body = ((function($this) {
			var $r;
			var component1 = l_instance.getComponent("BodyComponent_8");
			$r = component1;
			return $r;
		}(this))).body;
		body.applyImpulse(nape_geom_Vec2.weak(0,p_newVel));
	}
	,_updateApplyImpulseAngle: function(p_newVel,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if((function($this) {
			var $r;
			var component = l_instance.getComponent("BodyComponent_8");
			$r = component;
			return $r;
		}(this)) == null) return;
		var body;
		body = ((function($this) {
			var $r;
			var component1 = l_instance.getComponent("BodyComponent_8");
			$r = component1;
			return $r;
		}(this))).body;
		body.applyAngularImpulse(p_newVel);
	}
	,_updateTouchable: function(p_touchableFlag,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		if(l_mesh != null) {
			if(p_touchableFlag) {
				l_mesh.set_pointerEnabled(true);
				if(!l_mesh.get_pointerIn().hasListeners()) l_mesh.get_pointerIn().connect($bind(this,this._onPointerIn));
				if(!l_mesh.get_pointerMove().hasListeners()) l_mesh.get_pointerMove().connect($bind(this,this._onPointerMove));
				if(!l_mesh.get_pointerOut().hasListeners()) l_mesh.get_pointerOut().connect($bind(this,this._onPointerOut));
				if(!l_mesh.get_pointerDown().hasListeners()) l_mesh.get_pointerDown().connect($bind(this,this._onPointerDown));
				if(!l_mesh.get_pointerUp().hasListeners()) l_mesh.get_pointerUp().connect($bind(this,this._onPointerUp));
			} else l_mesh.set_pointerEnabled(false);
		}
	}
	,_onPointerIn: function(p_pointerEvent) {
		tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_ENTERED,this.gameEntity);
	}
	,_onPointerMove: function(p_pointerEvent) {
		tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_MOVED,this.gameEntity);
	}
	,_onPointerOut: function(p_pointerEvent) {
		tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT,this.gameEntity);
	}
	,_onPointerDown: function(p_pointerEvent) {
		tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_DOWN,this.gameEntity);
		if(Type.enumConstructor(p_pointerEvent.source) == "Mouse") {
			if(tools_spark_sliced_core_Sliced.input.mouse.isDown(flambe_input_MouseButton.Left)) tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT_CLICK,this.gameEntity);
		} else tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT_CLICK,this.gameEntity);
	}
	,_onPointerUp: function(p_pointerEvent) {
		tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_UP,this.gameEntity);
		if(Type.enumConstructor(p_pointerEvent.source) == "Mouse") {
			if(tools_spark_sliced_core_Sliced.input.mouse.lastMouseButton == flambe_input_MouseButton.Right) tools_spark_sliced_core_Sliced.input.pointer.submitPointerEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_RIGHT_CLICK,this.gameEntity);
		}
		if(tools_spark_sliced_core_Sliced.sound.iOSPlayedBlankSound == false) tools_spark_sliced_core_Sliced.sound.iOSPlayBlankSound();
	}
	,setPosSize: function(p_x,p_y,p_width,p_height,p_view) {
		var l_mesh = this._instancesMesh.get(p_view);
		tools_spark_Console.de("RESIZING: " + Std.string(this.gameEntity.getState("name")) + ". x: " + p_x + ", y: " + p_y);
		tools_spark_Console.de("RESIZING: " + Std.string(this.gameEntity.getState("name")) + ". width: " + p_width + ", height: " + p_height);
		if(l_mesh != null) {
			if(p_x != null) {
				l_mesh.x.set__(p_x);
				tools_spark_Console.de("wtfXX");
			}
			if(p_y != null) {
				l_mesh.y.set__(p_y);
				tools_spark_Console.de("wtfYY");
			}
		}
		var l_instance = this._instances.get(p_view);
		var l_fillSprite = Std.instance(l_instance.getComponent("Sprite_3"),flambe_display_FillSprite);
		if(l_fillSprite != null) {
			l_fillSprite.setSize(p_width,p_height);
			tools_spark_Console.de("wtfsetSize");
		}
		tools_spark_framework_space2_$5D_core_AEntity2_$5D.prototype.setPosSize.call(this,p_x,p_y,p_width,p_height,p_view);
	}
	,_updateSpaceWidth: function(p_spaceWidth,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		var l_fillSprite = Std.instance(l_instance.getComponent("Sprite_3"),flambe_display_FillSprite);
		if(l_fillSprite != null) {
			l_fillSprite.width.set__(p_spaceWidth);
			l_fillSprite.centerAnchor();
			l_fillSprite.scissor.width = p_spaceWidth;
		}
	}
	,_updateSpaceHeight: function(p_spaceHeight,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		var l_fillSprite = Std.instance(l_instance.getComponent("Sprite_3"),flambe_display_FillSprite);
		if(l_fillSprite != null) {
			l_fillSprite.height.set__(p_spaceHeight);
			l_fillSprite.centerAnchor();
			l_fillSprite.scissor.height = p_spaceHeight;
		}
	}
	,_updateBounds: function(p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if(l_instance != null) {
			if(this.gameEntity.getState("2DmeshType") == "Spriter") this.gameEntity.setState("boundsRect",new flambe_math_Rectangle(-55,-112,140,190)); else this.gameEntity.setState("boundsRect",flambe_display_Sprite.getBounds(l_instance));
		} else tools_spark_Console.error("Update Bounds: Instance is null");
	}
	,_queryRealWidth: function(p_queryArgument,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		return l_mesh.getNaturalWidth();
	}
	,_queryRealHeight: function(p_queryArgument,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		return l_mesh.getNaturalHeight();
	}
	,_queryBoundsWidth: function(p_queryArgument,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		return flambe_display_Sprite.getBounds(l_instance).width;
	}
	,_queryBoundsHeight: function(p_queryArgument,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		return flambe_display_Sprite.getBounds(l_instance).height;
	}
	,_queryRealX: function(p_queryArgument,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		return l_mesh.x.get__();
	}
	,_queryRealY: function(p_queryArgument,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		return l_mesh.y.get__();
	}
	,_queryRealRotation: function(p_queryArgument,p_view2_5D) {
		var l_mesh = this._instancesMesh.get(p_view2_5D);
		return l_mesh.rotation;
	}
	,__class__: tools_spark_framework_flambe2_$5D_FlambeEntity2_$5D
});
var zpp_$nape_callbacks_ZPP_$CbType = function() {
	this.conlisteners = null;
	this.bodylisteners = null;
	this.listeners = null;
	this.cbsets = null;
	this.id = 0;
	this.outer = null;
	this.id = zpp_$nape_ZPP_$ID.CbType();
	this.listeners = new zpp_$nape_util_ZNPList_$ZPP_$InteractionListener();
	this.bodylisteners = new zpp_$nape_util_ZNPList_$ZPP_$BodyListener();
	this.conlisteners = new zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener();
	this.constraints = new zpp_$nape_util_ZNPList_$ZPP_$Constraint();
	this.interactors = new zpp_$nape_util_ZNPList_$ZPP_$Interactor();
	this.cbsets = new zpp_$nape_util_ZNPList_$ZPP_$CbSet();
};
$hxClasses["zpp_nape.callbacks.ZPP_CbType"] = zpp_$nape_callbacks_ZPP_$CbType;
zpp_$nape_callbacks_ZPP_$CbType.__name__ = ["zpp_nape","callbacks","ZPP_CbType"];
zpp_$nape_callbacks_ZPP_$CbType.setlt = function(a,b) {
	return a.id < b.id;
};
zpp_$nape_callbacks_ZPP_$CbType.prototype = {
	addConstraint: function(con) {
		this.constraints.add(con);
	}
	,addInteractor: function(intx) {
		this.interactors.add(intx);
	}
	,remConstraint: function(con) {
		this.constraints.remove(con);
	}
	,remInteractor: function(intx) {
		this.interactors.remove(intx);
	}
	,addint: function(x) {
		var pre = null;
		var cx_ite = this.listeners.begin();
		while(cx_ite != null) {
			var j = cx_ite.elem();
			if(zpp_$nape_callbacks_ZPP_$Listener.setlt(x,j)) break;
			pre = cx_ite;
			cx_ite = cx_ite.next;
		}
		this.listeners.inlined_insert(pre,x);
		this.invalidateint();
	}
	,removeint: function(x) {
		this.listeners.remove(x);
		this.invalidateint();
	}
	,invalidateint: function() {
		var cx_ite = this.cbsets.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			cb.invalidate_listeners();
			cx_ite = cx_ite.next;
		}
	}
	,addbody: function(x) {
		var pre = null;
		var cx_ite = this.bodylisteners.begin();
		while(cx_ite != null) {
			var j = cx_ite.elem();
			if(zpp_$nape_callbacks_ZPP_$Listener.setlt(x,j)) break;
			pre = cx_ite;
			cx_ite = cx_ite.next;
		}
		this.bodylisteners.inlined_insert(pre,x);
		this.invalidatebody();
	}
	,removebody: function(x) {
		this.bodylisteners.remove(x);
		this.invalidatebody();
	}
	,invalidatebody: function() {
		var cx_ite = this.cbsets.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			cb.invalidate_bodylisteners();
			cx_ite = cx_ite.next;
		}
	}
	,addconstraint: function(x) {
		var pre = null;
		var cx_ite = this.conlisteners.begin();
		while(cx_ite != null) {
			var j = cx_ite.elem();
			if(zpp_$nape_callbacks_ZPP_$Listener.setlt(x,j)) break;
			pre = cx_ite;
			cx_ite = cx_ite.next;
		}
		this.conlisteners.inlined_insert(pre,x);
		this.invalidateconstraint();
	}
	,removeconstraint: function(x) {
		this.conlisteners.remove(x);
		this.invalidateconstraint();
	}
	,invalidateconstraint: function() {
		var cx_ite = this.cbsets.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			cb.invalidate_conlisteners();
			cx_ite = cx_ite.next;
		}
	}
	,__class__: zpp_$nape_callbacks_ZPP_$CbType
};
var zpp_$nape_ZPP_$ID = function() { };
$hxClasses["zpp_nape.ZPP_ID"] = zpp_$nape_ZPP_$ID;
zpp_$nape_ZPP_$ID.__name__ = ["zpp_nape","ZPP_ID"];
zpp_$nape_ZPP_$ID.Interactor = function() {
	return zpp_$nape_ZPP_$ID._Interactor++;
};
zpp_$nape_ZPP_$ID.CbType = function() {
	return zpp_$nape_ZPP_$ID._CbType++;
};
zpp_$nape_ZPP_$ID.CbSet = function() {
	return zpp_$nape_ZPP_$ID._CbSet++;
};
zpp_$nape_ZPP_$ID.Listener = function() {
	return zpp_$nape_ZPP_$ID._Listener++;
};
var zpp_$nape_util_ZNPList_$ZPP_$InteractionListener = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_InteractionListener"] = zpp_$nape_util_ZNPList_$ZPP_$InteractionListener;
zpp_$nape_util_ZNPList_$ZPP_$InteractionListener.__name__ = ["zpp_nape","util","ZNPList_ZPP_InteractionListener"];
zpp_$nape_util_ZNPList_$ZPP_$InteractionListener.prototype = {
	begin: function() {
		return this.head;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,inlined_insert: function(cur,o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		if(cur == null) {
			temp.next = this.begin();
			this.head = temp;
		} else {
			temp.next = cur.next;
			cur.next = temp;
		}
		this.pushmod = this.modified = true;
		this.length++;
		return temp;
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,clear: function() {
		this.inlined_clear();
	}
	,inlined_clear: function() {
		if(true) {
			while(!this.empty()) this.inlined_pop();
			this.pushmod = true;
		}
	}
	,empty: function() {
		return this.begin() == null;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$InteractionListener
};
var zpp_$nape_util_ZNPList_$ZPP_$BodyListener = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_BodyListener"] = zpp_$nape_util_ZNPList_$ZPP_$BodyListener;
zpp_$nape_util_ZNPList_$ZPP_$BodyListener.__name__ = ["zpp_nape","util","ZNPList_ZPP_BodyListener"];
zpp_$nape_util_ZNPList_$ZPP_$BodyListener.prototype = {
	begin: function() {
		return this.head;
	}
	,inlined_insert: function(cur,o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$BodyListener(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		if(cur == null) {
			temp.next = this.begin();
			this.head = temp;
		} else {
			temp.next = cur.next;
			cur.next = temp;
		}
		this.pushmod = this.modified = true;
		this.length++;
		return temp;
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,clear: function() {
		this.inlined_clear();
	}
	,inlined_clear: function() {
		if(true) {
			while(!this.empty()) this.inlined_pop();
			this.pushmod = true;
		}
	}
	,empty: function() {
		return this.begin() == null;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$BodyListener
};
var zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_ConstraintListener"] = zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener;
zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener.__name__ = ["zpp_nape","util","ZNPList_ZPP_ConstraintListener"];
zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener.prototype = {
	begin: function() {
		return this.head;
	}
	,inlined_insert: function(cur,o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		if(cur == null) {
			temp.next = this.begin();
			this.head = temp;
		} else {
			temp.next = cur.next;
			cur.next = temp;
		}
		this.pushmod = this.modified = true;
		this.length++;
		return temp;
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,clear: function() {
		this.inlined_clear();
	}
	,inlined_clear: function() {
		if(true) {
			while(!this.empty()) this.inlined_pop();
			this.pushmod = true;
		}
	}
	,empty: function() {
		return this.begin() == null;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener
};
var zpp_$nape_util_ZNPList_$ZPP_$Constraint = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_Constraint"] = zpp_$nape_util_ZNPList_$ZPP_$Constraint;
zpp_$nape_util_ZNPList_$ZPP_$Constraint.__name__ = ["zpp_nape","util","ZNPList_ZPP_Constraint"];
zpp_$nape_util_ZNPList_$ZPP_$Constraint.prototype = {
	begin: function() {
		return this.head;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Constraint(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,erase: function(pre) {
		return this.inlined_erase(pre);
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,front: function() {
		return this.begin().elem();
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$Constraint
};
var zpp_$nape_util_ZNPList_$ZPP_$Interactor = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_Interactor"] = zpp_$nape_util_ZNPList_$ZPP_$Interactor;
zpp_$nape_util_ZNPList_$ZPP_$Interactor.__name__ = ["zpp_nape","util","ZNPList_ZPP_Interactor"];
zpp_$nape_util_ZNPList_$ZPP_$Interactor.prototype = {
	begin: function() {
		return this.head;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Interactor(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,pop_unsafe: function() {
		return this.inlined_pop_unsafe();
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,inlined_clear: function() {
		if(true) {
			while(!this.empty()) this.inlined_pop();
			this.pushmod = true;
		}
	}
	,empty: function() {
		return this.begin() == null;
	}
	,front: function() {
		return this.begin().elem();
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$Interactor
};
var zpp_$nape_util_ZNPList_$ZPP_$CbSet = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_CbSet"] = zpp_$nape_util_ZNPList_$ZPP_$CbSet;
zpp_$nape_util_ZNPList_$ZPP_$CbSet.__name__ = ["zpp_nape","util","ZNPList_ZPP_CbSet"];
zpp_$nape_util_ZNPList_$ZPP_$CbSet.prototype = {
	begin: function() {
		return this.head;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$CbSet(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,pop_unsafe: function() {
		return this.inlined_pop_unsafe();
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,front: function() {
		return this.begin().elem();
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$CbSet
};
var tools_spark_framework_flambe2_$5D_FlambeScene2_$5D = function(p_gameEntity) {
	tools_spark_framework_space2_$5D_core_AScene2_$5D.call(this,p_gameEntity);
	this._initFlambeScene2_5D();
};
$hxClasses["tools.spark.framework.flambe2_5D.FlambeScene2_5D"] = tools_spark_framework_flambe2_$5D_FlambeScene2_$5D;
tools_spark_framework_flambe2_$5D_FlambeScene2_$5D.__name__ = ["tools","spark","framework","flambe2_5D","FlambeScene2_5D"];
tools_spark_framework_flambe2_$5D_FlambeScene2_$5D.__super__ = tools_spark_framework_space2_$5D_core_AScene2_$5D;
tools_spark_framework_flambe2_$5D_FlambeScene2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_AScene2_$5D.prototype,{
	_initFlambeScene2_5D: function() {
		var v = $bind(this,this._updatePhysics);
		this._updateStateFunctions.set("physicsScene",v);
		v;
		var v1 = $bind(this,this._updateBackgroundColor);
		this._updateStateFunctions.set("backgroundColor",v1);
		v1;
		var v2 = $bind(this,this._queryZoomX);
		this._queryFunctions.set("zoomX",v2);
		v2;
		var v3 = $bind(this,this._queryZoomY);
		this._queryFunctions.set("zoomY",v3);
		v3;
		var v4 = $bind(this,this._queryZoomScale);
		this._queryFunctions.set("zoomScale",v4);
		v4;
	}
	,createInstance: function(p_view2_5D) {
		tools_spark_Console.error("Creating Scene: " + Std.string(this.gameEntity.getState("name")));
		flambe_System.get_external().call("console.log",[this._instances.get(p_view2_5D)]);
		if(this._instances.get(p_view2_5D) != null) return this._instances.get(p_view2_5D); else {
			var v = new flambe_Entity();
			this._instances.set(p_view2_5D,v);
			v;
			var l_sceneSprite = new flambe_display_Sprite();
			l_sceneSprite.centerAnchor();
			this._instances.get(p_view2_5D).add(l_sceneSprite);
			return tools_spark_framework_space2_$5D_core_AScene2_$5D.prototype.createInstance.call(this,p_view2_5D);
		}
	}
	,update: function(p_view2_5D) {
		this._updateState("physicsScene",p_view2_5D);
		this._updateState("backgroundColor",p_view2_5D);
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) {
			var f_childEntity = _g1[_g];
			++_g;
			f_childEntity.update(p_view2_5D);
		}
	}
	,_createChildOfInstance: function(p_childEntity,p_view2_5D,p_index) {
		if(p_index == null) p_index = -1;
		if(p_index == -1) this._instances.get(p_view2_5D).addChild(js_Boot.__cast(p_childEntity.createInstance(p_view2_5D) , flambe_Entity)); else this._instances.get(p_view2_5D).addChild(js_Boot.__cast(p_childEntity.createInstance(p_view2_5D) , flambe_Entity),true,p_index);
		tools_spark_framework_space2_$5D_core_AScene2_$5D.prototype._createChildOfInstance.call(this,p_childEntity,p_view2_5D,p_index);
	}
	,_removeChildOfInstance: function(p_childEntity,p_view2_5D) {
		var l_flambeEntity;
		l_flambeEntity = js_Boot.__cast(p_childEntity.getInstance(p_view2_5D) , flambe_Entity);
		var l_bodyComponent;
		var component = l_flambeEntity.getComponent("BodyComponent_8");
		l_bodyComponent = component;
		if(l_bodyComponent != null) l_flambeEntity.remove(l_bodyComponent);
		if(l_flambeEntity.parent != null) this._instances.get(p_view2_5D).removeChild(l_flambeEntity);
		tools_spark_framework_space2_$5D_core_AScene2_$5D.prototype._removeChildOfInstance.call(this,p_childEntity,p_view2_5D);
	}
	,updateCamera: function(p_view,p_camera) {
		tools_spark_framework_space2_$5D_core_AScene2_$5D.prototype.updateCamera.call(this,p_view,p_camera);
		var l_instance = this._instances.get(p_view);
		var l_instanceSprite;
		var component = l_instance.getComponent("Sprite_3");
		l_instanceSprite = component;
		l_instanceSprite.setXY(this._tempX,this._tempY);
		l_instanceSprite.setScaleXY(this._scaleX,this._scaleY);
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CHANGED,this.gameEntity);
	}
	,_updatePhysics: function(p_physicsFlag,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if(p_physicsFlag) {
			var spaceComponent = new tools_spark_framework_flambe2_$5D_components_SpaceComponent(this.gameEntity.getState("gravityX"),this.gameEntity.getState("gravityY"));
			l_instance.add(spaceComponent);
			this._scenePhysicsInit(spaceComponent.space);
		}
	}
	,_updateBackgroundColor: function(p_value,p_view2_5D) {
		var l_instance = this._instances.get(p_view2_5D);
		if(this.gameEntity.getState("editorMode") == false) {
			if(p_value != "Transparent") {
				tools_spark_Console.error("UPDATING Background Color of: " + Std.string(this.gameEntity.getState("name")));
				var l_color = Std.parseInt(p_value);
				var l_backgroundSprite = new flambe_display_FillSprite(l_color,this.gameEntity.getState("boundsWidth"),this.gameEntity.getState("boundsHeight"));
				l_instance.add(l_backgroundSprite);
			}
			var l_sceneSprite;
			var component = l_instance.getComponent("Sprite_3");
			l_sceneSprite = component;
			l_sceneSprite.scissor = new flambe_math_Rectangle(180,80,1920,1280);
		} else {
			var l_backgroundSprite1 = new flambe_display_FillSprite(16777215,this.gameEntity.getState("boundsWidth"),this.gameEntity.getState("boundsHeight"));
			l_instance.add(l_backgroundSprite1);
		}
	}
	,_scenePhysicsInit: function(p_space) {
		p_space.get_listeners().add(new nape_callbacks_InteractionListener(nape_callbacks_CbEvent.get_BEGIN(),nape_callbacks_InteractionType.get_ANY(),nape_callbacks_CbType.get_ANY_BODY(),nape_callbacks_CbType.get_ANY_BODY(),$bind(this,this._beginHandlerSensor)));
		p_space.get_listeners().add(new nape_callbacks_InteractionListener(nape_callbacks_CbEvent.get_END(),nape_callbacks_InteractionType.get_ANY(),nape_callbacks_CbType.get_ANY_BODY(),nape_callbacks_CbType.get_ANY_BODY(),$bind(this,this._endHandlerSensor)));
		p_space.get_listeners().add(new nape_callbacks_InteractionListener(nape_callbacks_CbEvent.get_BEGIN(),nape_callbacks_InteractionType.get_SENSOR(),tools_spark_framework_flambe2_$5D_FlambeScene2_$5D.BIPED_FEET,nape_callbacks_CbType.get_ANY_BODY(),$bind(this,this._beginHandlerSensorFeet)));
		p_space.get_listeners().add(new nape_callbacks_InteractionListener(nape_callbacks_CbEvent.get_END(),nape_callbacks_InteractionType.get_SENSOR(),tools_spark_framework_flambe2_$5D_FlambeScene2_$5D.BIPED_FEET,nape_callbacks_CbType.get_ANY_BODY(),$bind(this,this._endHandlerSensorFeet)));
	}
	,_beginHandlerSensor: function(cb) {
		if(cb.get_int1().get_userData().gameEntity != null && cb.get_int2().get_userData().gameEntity != null) {
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_START,cb.get_int1().get_userData().gameEntity);
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_START,cb.get_int2().get_userData().gameEntity);
			cb.get_int1().get_userData().gameEntity.setState("collidedWith",cb.get_int2().get_userData().gameEntity);
			cb.get_int2().get_userData().gameEntity.setState("collidedWith",cb.get_int1().get_userData().gameEntity);
		}
	}
	,_endHandlerSensor: function(cb) {
		if(cb.get_int1().get_userData().gameEntity != null && cb.get_int2().get_userData().gameEntity != null) {
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_END,cb.get_int1().get_userData().gameEntity);
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_END,cb.get_int2().get_userData().gameEntity);
		}
	}
	,_beginHandlerSensorFeet: function(cb) {
		var int1Parent = cb.get_int1().get_castShape().get_body();
		if(int1Parent.get_userData().gameEntity != null) tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_START_BIPED_FEET,int1Parent.get_userData().gameEntity);
		if(cb.get_int2().get_userData().gameEntity != null) tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_START_BIPED_FEET,cb.get_int2().get_userData().gameEntity);
	}
	,_endHandlerSensorFeet: function(cb) {
		var int1Parent = cb.get_int1().get_castShape().get_body();
		if(int1Parent.get_userData().gameEntity != null) tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_END_BIPED_FEET,int1Parent.get_userData().gameEntity);
		if(cb.get_int2().get_userData().gameEntity != null) tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_END_BIPED_FEET,cb.get_int2().get_userData().gameEntity);
	}
	,_queryZoomX: function(p_queryArgument,p_view2_5D) {
		return this._tempX;
	}
	,_queryZoomY: function(p_queryArgument,p_view2_5D) {
		return this._tempY;
	}
	,_queryZoomScale: function(p_queryArgument,p_view2_5D) {
		return this._scaleX;
	}
	,__class__: tools_spark_framework_flambe2_$5D_FlambeScene2_$5D
});
var tools_spark_framework_flambe2_$5D_FlambeView2_$5D = function(p_gameEntity,p_flambeGraphics) {
	tools_spark_framework_space2_$5D_core_AView2_$5D.call(this,p_gameEntity);
	this._flambeGraphics = p_flambeGraphics;
	this._initFlambeView2_5D();
};
$hxClasses["tools.spark.framework.flambe2_5D.FlambeView2_5D"] = tools_spark_framework_flambe2_$5D_FlambeView2_$5D;
tools_spark_framework_flambe2_$5D_FlambeView2_$5D.__name__ = ["tools","spark","framework","flambe2_5D","FlambeView2_5D"];
tools_spark_framework_flambe2_$5D_FlambeView2_$5D.__super__ = tools_spark_framework_space2_$5D_core_AView2_$5D;
tools_spark_framework_flambe2_$5D_FlambeView2_$5D.prototype = $extend(tools_spark_framework_space2_$5D_core_AView2_$5D.prototype,{
	_initFlambeView2_5D: function() {
		tools_spark_Console.error("Creating View: " + Std.string(this.gameEntity.getState("name")));
		this._instanceView = new flambe_Entity();
		var l_viewSprite = new flambe_display_Sprite();
		this._instanceView.add(l_viewSprite);
		if(this.gameEntity.getState("visible")) flambe_System.root.addChild(this._instanceView);
	}
	,destroy: function() {
		flambe_System.root.removeChild(this._instanceView);
	}
	,render: function() {
		if(this.gameEntity.getState("visible")) flambe_display_Sprite.render(this._instanceView,this._flambeGraphics);
	}
	,setVisible: function(p_value) {
		if(p_value) flambe_System.root.addChild(this._instanceView); else flambe_System.root.removeChild(this._instanceView);
	}
	,set_camera: function(p_value) {
		if(this.camera == p_value) return this.camera;
		if(p_value == null) {
			this.camera = null;
			this._updateCurrentView();
			return null;
		}
		this.camera = p_value;
		this.camera.attachToView(this);
		this._updateCurrentView();
		return this.camera;
	}
	,set_scene: function(p_value) {
		if(this.scene == p_value) return this.scene;
		if(p_value == null) {
			this.scene = null;
			this._disposeCurrentScene();
			this._updateCurrentView();
			return null;
		}
		if(this.scene != null) {
			this.scene = null;
			this._disposeCurrentScene();
		}
		this.scene = p_value;
		this._instanceScene = js_Boot.__cast(this.scene.createInstance(this) , flambe_Entity);
		this._updateCurrentView();
		return this.scene;
	}
	,_updateCurrentView: function() {
		if(this.scene == null || this.camera == null) {
			if(this._instanceView.firstChild != null) this._instanceView.removeChild(this._instanceView.firstChild);
			return;
		}
		if(this._instanceView.firstChild == null) this._instanceView.addChild(this._instanceScene);
		this.scene.update(this);
	}
	,_disposeCurrentScene: function() {
		this._instanceScene = null;
		this._instanceView.disposeChildren();
	}
	,setPosSize: function(p_x,p_y,p_width,p_height,p_view) {
		var l_viewSprite;
		var component = this._instanceView.getComponent("Sprite_3");
		l_viewSprite = component;
		if(p_x != null) l_viewSprite.x.set__(p_x);
		if(p_y != null) l_viewSprite.y.set__(p_y);
		if(p_width != null && p_height != null) l_viewSprite.scissor = new flambe_math_Rectangle(0,0,p_width,p_height);
		tools_spark_framework_space2_$5D_core_AView2_$5D.prototype.setPosSize.call(this,p_x,p_y,p_width,p_height,p_view);
	}
	,__class__: tools_spark_framework_flambe2_$5D_FlambeView2_$5D
});
var tools_spark_framework_flambe2_$5D_components_BodyComponent = function(p_body) {
	flambe_Component.call(this);
	this.body = p_body;
};
$hxClasses["tools.spark.framework.flambe2_5D.components.BodyComponent"] = tools_spark_framework_flambe2_$5D_components_BodyComponent;
tools_spark_framework_flambe2_$5D_components_BodyComponent.__name__ = ["tools","spark","framework","flambe2_5D","components","BodyComponent"];
tools_spark_framework_flambe2_$5D_components_BodyComponent.__super__ = flambe_Component;
tools_spark_framework_flambe2_$5D_components_BodyComponent.prototype = $extend(flambe_Component.prototype,{
	get_name: function() {
		return "BodyComponent_8";
	}
	,onUpdate: function(dt) {
		var pos = this.body.get_position();
		var sprite;
		var component = this.owner.getComponent("Sprite_3");
		sprite = component;
		sprite.x.set__(pos.get_x());
		sprite.y.set__(pos.get_y());
		sprite.rotation.set__(flambe_math_FMath.toDegrees(this.body.get_rotation()));
	}
	,onRemoved: function() {
		this.body.set_space(null);
	}
	,__class__: tools_spark_framework_flambe2_$5D_components_BodyComponent
});
var tools_spark_framework_flambe2_$5D_components_SpaceComponent = function(p_gravityX,p_gravityY) {
	flambe_Component.call(this);
	this.space = new nape_space_Space(new nape_geom_Vec2(p_gravityX,p_gravityY));
};
$hxClasses["tools.spark.framework.flambe2_5D.components.SpaceComponent"] = tools_spark_framework_flambe2_$5D_components_SpaceComponent;
tools_spark_framework_flambe2_$5D_components_SpaceComponent.__name__ = ["tools","spark","framework","flambe2_5D","components","SpaceComponent"];
tools_spark_framework_flambe2_$5D_components_SpaceComponent.__super__ = flambe_Component;
tools_spark_framework_flambe2_$5D_components_SpaceComponent.prototype = $extend(flambe_Component.prototype,{
	get_name: function() {
		return "SpaceComponent_7";
	}
	,onUpdate: function(dt) {
		this.space.step(Math.min(dt,0.06));
	}
	,__class__: tools_spark_framework_flambe2_$5D_components_SpaceComponent
});
var tools_spark_framework_flambe2_$5D_spritesheet_PlistEntry = function(entry) {
	if(entry == null) return;
	this.name = entry.name;
	this.x = entry.x;
	this.y = entry.y;
	this.width = entry.width;
	this.height = entry.height;
	this.sourceColorX = entry.sourceColorX;
	this.sourceColorY = entry.sourceColorY;
	this.rotated = entry.rotated;
};
$hxClasses["tools.spark.framework.flambe2_5D.spritesheet.PlistEntry"] = tools_spark_framework_flambe2_$5D_spritesheet_PlistEntry;
tools_spark_framework_flambe2_$5D_spritesheet_PlistEntry.__name__ = ["tools","spark","framework","flambe2_5D","spritesheet","PlistEntry"];
tools_spark_framework_flambe2_$5D_spritesheet_PlistEntry.prototype = {
	__class__: tools_spark_framework_flambe2_$5D_spritesheet_PlistEntry
};
var tools_spark_framework_flambe2_$5D_spritesheet_PlistParser = function() { };
$hxClasses["tools.spark.framework.flambe2_5D.spritesheet.PlistParser"] = tools_spark_framework_flambe2_$5D_spritesheet_PlistParser;
tools_spark_framework_flambe2_$5D_spritesheet_PlistParser.__name__ = ["tools","spark","framework","flambe2_5D","spritesheet","PlistParser"];
tools_spark_framework_flambe2_$5D_spritesheet_PlistParser.parse = function(xmlDoc) {
	var plist = [];
	var frames = null;
	var metadata = null;
	var index = 0;
	var $it0 = xmlDoc.firstElement().firstElement().elements();
	while( $it0.hasNext() ) {
		var x = $it0.next();
		if(x.firstChild().get_nodeValue() == "frames") index = 1; else if(x.get_nodeName() == "dict" && index == 1) frames = x; else if(x.firstChild().get_nodeValue() == "metadata") index = 2; else if(x.get_nodeName() == "dict" && index == 2) metadata = x;
	}
	index = 1;
	var tempEntry = new tools_spark_framework_flambe2_$5D_spritesheet_PlistEntry();
	var tempKey = "";
	var $it1 = frames.elements();
	while( $it1.hasNext() ) {
		var x1 = $it1.next();
		if(x1.get_nodeName() == "key" && index == 1) {
			tempEntry.name = x1.firstChild().get_nodeValue();
			index = 2;
		} else if(x1.get_nodeName() == "dict" && index == 2) {
			index = 1;
			var $it2 = x1.elements();
			while( $it2.hasNext() ) {
				var info = $it2.next();
				if(info.get_nodeName() == "key") tempKey = info.firstChild().get_nodeValue(); else switch(tempKey) {
				case "frame":
					var s = tools_spark_framework_flambe2_$5D_spritesheet_PlistParser.parseString(info.firstChild().get_nodeValue());
					tempEntry.x = s[0];
					tempEntry.y = s[1];
					tempEntry.width = s[2];
					tempEntry.height = s[3];
					break;
				case "sourceColorRect":
					var s1 = tools_spark_framework_flambe2_$5D_spritesheet_PlistParser.parseString(info.firstChild().get_nodeValue());
					tempEntry.sourceColorX = s1[0];
					tempEntry.sourceColorY = s1[1];
					break;
				case "rotated":
					if(info.get_nodeName() == "true") tempEntry.rotated = true; else tempEntry.rotated = false;
					break;
				}
			}
			plist.push(new tools_spark_framework_flambe2_$5D_spritesheet_PlistEntry(tempEntry));
		}
	}
	return plist;
};
tools_spark_framework_flambe2_$5D_spritesheet_PlistParser.parseString = function(str) {
	var ret = [];
	var index;
	var temp;
	var buf = new StringBuf();
	var _g1 = 0;
	var _g = str.length;
	while(_g1 < _g) {
		var i = _g1++;
		if(str.charAt(i) != "{" && str.charAt(i) != "}") buf.addSub(str.charAt(i),0);
	}
	var newString = buf.toString();
	var _g2 = 0;
	var _g11 = newString.split(",");
	while(_g2 < _g11.length) {
		var i1 = _g11[_g2];
		++_g2;
		ret.push(Std.parseFloat(i1));
	}
	return ret;
};
var tools_spark_framework_flambe2_$5D_spritesheet_Size = function(width,height) {
	if(height == null) height = 0;
	if(width == null) width = 0;
	this.width = width;
	this.height = height;
};
$hxClasses["tools.spark.framework.flambe2_5D.spritesheet.Size"] = tools_spark_framework_flambe2_$5D_spritesheet_Size;
tools_spark_framework_flambe2_$5D_spritesheet_Size.__name__ = ["tools","spark","framework","flambe2_5D","spritesheet","Size"];
tools_spark_framework_flambe2_$5D_spritesheet_Size.prototype = {
	__class__: tools_spark_framework_flambe2_$5D_spritesheet_Size
};
var tools_spark_framework_flambe2_$5D_spritesheet_SpriteFrame = function() {
	this._offset = new flambe_math_Point(0,0);
	this._offsetInPixels = new flambe_math_Point(0,0);
	this._originalSize = new tools_spark_framework_flambe2_$5D_spritesheet_Size(0,0);
	this._rectInPixels = new flambe_math_Rectangle(0,0,0,0);
	this._rect = new flambe_math_Rectangle(0,0,0,0);
	this._originalSizeInPixels = new tools_spark_framework_flambe2_$5D_spritesheet_Size(0,0);
	this._textureFilname = "";
};
$hxClasses["tools.spark.framework.flambe2_5D.spritesheet.SpriteFrame"] = tools_spark_framework_flambe2_$5D_spritesheet_SpriteFrame;
tools_spark_framework_flambe2_$5D_spritesheet_SpriteFrame.__name__ = ["tools","spark","framework","flambe2_5D","spritesheet","SpriteFrame"];
tools_spark_framework_flambe2_$5D_spritesheet_SpriteFrame.createWithTexture = function(texture,rect,rotated,offset,originalSize) {
	var spriteFrame = new tools_spark_framework_flambe2_$5D_spritesheet_SpriteFrame();
	spriteFrame.initWithTexture(texture,rect,rotated,offset,originalSize);
	return spriteFrame;
};
tools_spark_framework_flambe2_$5D_spritesheet_SpriteFrame.prototype = {
	isRotated: function() {
		return this._rotated;
	}
	,getRect: function() {
		return this._rect;
	}
	,getTexture: function() {
		if(this._texture != null) return this._texture;
		return null;
	}
	,getOffset: function() {
		return new flambe_math_Point(this._offset.x,this._offset.y);
	}
	,initWithTexture: function(texture,rect,rotated,offset,originalSize) {
		this._texture = texture;
		this._rectInPixels = rect;
		this._rect = rect;
		this._offsetInPixels = offset;
		this._offset = offset;
		this._originalSizeInPixels = originalSize;
		this._originalSize = originalSize;
		this._rotated = rotated;
		return true;
	}
	,__class__: tools_spark_framework_flambe2_$5D_spritesheet_SpriteFrame
};
var tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheet = function(frame) {
	flambe_display_Sprite.call(this);
	this.frame = frame;
};
$hxClasses["tools.spark.framework.flambe2_5D.spritesheet.SpriteSheet"] = tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheet;
tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheet.__name__ = ["tools","spark","framework","flambe2_5D","spritesheet","SpriteSheet"];
tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheet.__super__ = flambe_display_Sprite;
tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheet.prototype = $extend(flambe_display_Sprite.prototype,{
	draw: function(g) {
		this.g = g;
		if(this.frame.isRotated()) {
			g.translate(this.frame.getOffset().x,this.frame.getOffset().y + this.frame.getRect().height);
			g.rotate(-90);
			g.drawSubTexture(this.frame.getTexture(),0,0,this.frame.getRect().x,this.frame.getRect().y,this.frame.getRect().height,this.frame.getRect().width);
		} else {
			g.translate(this.frame.getOffset().x,this.frame.getOffset().y);
			g.drawSubTexture(this.frame.getTexture(),0,0,this.frame.getRect().x,this.frame.getRect().y,this.frame.getRect().width,this.frame.getRect().height);
		}
	}
	,getNaturalHeight: function() {
		if(this.frame == null) return 0;
		return this.frame.getRect().height;
	}
	,getNaturalWidth: function() {
		if(this.frame == null) return 0;
		return this.frame.getRect().width;
	}
	,__class__: tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheet
});
var tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheetPlayer = function(pack,plistName,textureName) {
	this.isLooping = false;
	this.paused = false;
	this.currentIndex = 0;
	flambe_Component.call(this);
	var xmlDoc = Xml.parse(pack.getFile(plistName).toString());
	this.plist = tools_spark_framework_flambe2_$5D_spritesheet_PlistParser.parse(xmlDoc);
	this._spriteFramesInfo = [];
	this.sprites = [];
	if(this.texture == null) {
		var name = textureName;
		this.texture = pack.getTexture(name);
	}
	this._addSpriteFramesWithDictionary();
	this._initSprites();
	this._root = new flambe_Entity();
	this.speed = -1;
};
$hxClasses["tools.spark.framework.flambe2_5D.spritesheet.SpriteSheetPlayer"] = tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheetPlayer;
tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheetPlayer.__name__ = ["tools","spark","framework","flambe2_5D","spritesheet","SpriteSheetPlayer"];
tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheetPlayer.__super__ = flambe_Component;
tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheetPlayer.prototype = $extend(flambe_Component.prototype,{
	get_name: function() {
		return "SpriteSheetPlayer_2";
	}
	,_addSpriteFramesWithDictionary: function() {
		var _g = 0;
		var _g1 = this.plist;
		while(_g < _g1.length) {
			var p = _g1[_g];
			++_g;
			var rect = new flambe_math_Rectangle(p.x,p.y,p.width,p.height);
			var rotated = p.rotated;
			var offset = new flambe_math_Point(p.sourceColorX,p.sourceColorY);
			var size = new tools_spark_framework_flambe2_$5D_spritesheet_Size(0,0);
			var frame = tools_spark_framework_flambe2_$5D_spritesheet_SpriteFrame.createWithTexture(this.texture,rect,rotated,offset,size);
			this._spriteFramesInfo.push(frame);
		}
	}
	,_initSprites: function() {
		this.currentFrame = new tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheet(this._spriteFramesInfo[0]);
		this.currentIndex++;
	}
	,play: function() {
		if(Std.instance(this._root.getComponent("Sprite_3"),tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheet) == null) {
			this._root.add(this.currentFrame);
			this.currentFrame.centerAnchor();
		}
		this.currentIndex = 0;
		this.paused = false;
	}
	,loop: function() {
		this.play();
		this.isLooping = true;
	}
	,onAdded: function() {
		this.owner.addChild(this._root);
		this.oldTime = new Date().getTime();
		this.curTime = new Date().getTime();
	}
	,onRemoved: function() {
		this._root.parent.removeChild(this._root);
		this.currentFrame.frame = this._spriteFramesInfo[0];
		this.currentIndex = 0;
		this.paused = false;
		this.isLooping = false;
	}
	,onUpdate: function(dt) {
		if(this.speed != -1) {
			this.curTime = new Date().getTime();
			if(this.curTime - this.oldTime < this.speed) return; else this.oldTime = this.curTime;
		}
		if(!this.paused && this.currentFrame != null) {
			if(this.currentIndex == this._spriteFramesInfo.length) {
				if(this.isLooping) this.currentIndex = 0; else this.paused = true;
			}
			if(!this.paused) this.currentFrame.frame = this._spriteFramesInfo[this.currentIndex++];
		}
	}
	,setCurrentFrame: function(index) {
		this.currentIndex = index;
		this.currentFrame = this.sprites[index];
	}
	,setSpeed: function(s) {
		this.speed = s;
	}
	,__class__: tools_spark_framework_flambe2_$5D_spritesheet_SpriteSheetPlayer
});
var tools_spark_framework_haxe_Filter = $hxClasses["tools.spark.framework.haxe.Filter"] = { __ename__ : ["tools","spark","framework","haxe","Filter"], __constructs__ : ["FInt","FBool","FEnum","FReg"] };
tools_spark_framework_haxe_Filter.FInt = ["FInt",0];
tools_spark_framework_haxe_Filter.FInt.__enum__ = tools_spark_framework_haxe_Filter;
tools_spark_framework_haxe_Filter.FBool = ["FBool",1];
tools_spark_framework_haxe_Filter.FBool.__enum__ = tools_spark_framework_haxe_Filter;
tools_spark_framework_haxe_Filter.FEnum = function(values) { var $x = ["FEnum",2,values]; $x.__enum__ = tools_spark_framework_haxe_Filter; return $x; };
tools_spark_framework_haxe_Filter.FReg = function(matcher) { var $x = ["FReg",3,matcher]; $x.__enum__ = tools_spark_framework_haxe_Filter; return $x; };
tools_spark_framework_haxe_Filter.__empty_constructs__ = [tools_spark_framework_haxe_Filter.FInt,tools_spark_framework_haxe_Filter.FBool];
var tools_spark_framework_haxe_Attrib = $hxClasses["tools.spark.framework.haxe.Attrib"] = { __ename__ : ["tools","spark","framework","haxe","Attrib"], __constructs__ : ["Att"] };
tools_spark_framework_haxe_Attrib.Att = function(name,filter,defvalue) { var $x = ["Att",0,name,filter,defvalue]; $x.__enum__ = tools_spark_framework_haxe_Attrib; return $x; };
tools_spark_framework_haxe_Attrib.__empty_constructs__ = [];
var tools_spark_framework_haxe_Rule = $hxClasses["tools.spark.framework.haxe.Rule"] = { __ename__ : ["tools","spark","framework","haxe","Rule"], __constructs__ : ["RNode","RData","RMulti","RList","RChoice","ROptional"] };
tools_spark_framework_haxe_Rule.RNode = function(name,attribs,childs) { var $x = ["RNode",0,name,attribs,childs]; $x.__enum__ = tools_spark_framework_haxe_Rule; return $x; };
tools_spark_framework_haxe_Rule.RData = function(filter) { var $x = ["RData",1,filter]; $x.__enum__ = tools_spark_framework_haxe_Rule; return $x; };
tools_spark_framework_haxe_Rule.RMulti = function(rule,atLeastOne) { var $x = ["RMulti",2,rule,atLeastOne]; $x.__enum__ = tools_spark_framework_haxe_Rule; return $x; };
tools_spark_framework_haxe_Rule.RList = function(rules,ordered) { var $x = ["RList",3,rules,ordered]; $x.__enum__ = tools_spark_framework_haxe_Rule; return $x; };
tools_spark_framework_haxe_Rule.RChoice = function(choices) { var $x = ["RChoice",4,choices]; $x.__enum__ = tools_spark_framework_haxe_Rule; return $x; };
tools_spark_framework_haxe_Rule.ROptional = function(rule) { var $x = ["ROptional",5,rule]; $x.__enum__ = tools_spark_framework_haxe_Rule; return $x; };
tools_spark_framework_haxe_Rule.__empty_constructs__ = [];
var tools_spark_framework_haxe__$LooseCheck_CheckResult = $hxClasses["tools.spark.framework.haxe._LooseCheck.CheckResult"] = { __ename__ : ["tools","spark","framework","haxe","_LooseCheck","CheckResult"], __constructs__ : ["CMatch","CMissing","CExtra","CElementExpected","CDataExpected","CExtraAttrib","CMissingAttrib","CInvalidAttrib","CInvalidData","CInElement"] };
tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch = ["CMatch",0];
tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch.__enum__ = tools_spark_framework_haxe__$LooseCheck_CheckResult;
tools_spark_framework_haxe__$LooseCheck_CheckResult.CMissing = function(r) { var $x = ["CMissing",1,r]; $x.__enum__ = tools_spark_framework_haxe__$LooseCheck_CheckResult; return $x; };
tools_spark_framework_haxe__$LooseCheck_CheckResult.CExtra = function(x) { var $x = ["CExtra",2,x]; $x.__enum__ = tools_spark_framework_haxe__$LooseCheck_CheckResult; return $x; };
tools_spark_framework_haxe__$LooseCheck_CheckResult.CElementExpected = function(name,x) { var $x = ["CElementExpected",3,name,x]; $x.__enum__ = tools_spark_framework_haxe__$LooseCheck_CheckResult; return $x; };
tools_spark_framework_haxe__$LooseCheck_CheckResult.CDataExpected = function(x) { var $x = ["CDataExpected",4,x]; $x.__enum__ = tools_spark_framework_haxe__$LooseCheck_CheckResult; return $x; };
tools_spark_framework_haxe__$LooseCheck_CheckResult.CExtraAttrib = function(att,x) { var $x = ["CExtraAttrib",5,att,x]; $x.__enum__ = tools_spark_framework_haxe__$LooseCheck_CheckResult; return $x; };
tools_spark_framework_haxe__$LooseCheck_CheckResult.CMissingAttrib = function(att,x) { var $x = ["CMissingAttrib",6,att,x]; $x.__enum__ = tools_spark_framework_haxe__$LooseCheck_CheckResult; return $x; };
tools_spark_framework_haxe__$LooseCheck_CheckResult.CInvalidAttrib = function(att,x,f) { var $x = ["CInvalidAttrib",7,att,x,f]; $x.__enum__ = tools_spark_framework_haxe__$LooseCheck_CheckResult; return $x; };
tools_spark_framework_haxe__$LooseCheck_CheckResult.CInvalidData = function(x,f) { var $x = ["CInvalidData",8,x,f]; $x.__enum__ = tools_spark_framework_haxe__$LooseCheck_CheckResult; return $x; };
tools_spark_framework_haxe__$LooseCheck_CheckResult.CInElement = function(x,r) { var $x = ["CInElement",9,x,r]; $x.__enum__ = tools_spark_framework_haxe__$LooseCheck_CheckResult; return $x; };
tools_spark_framework_haxe__$LooseCheck_CheckResult.__empty_constructs__ = [tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch];
var tools_spark_framework_haxe_LooseCheck = function() { };
$hxClasses["tools.spark.framework.haxe.LooseCheck"] = tools_spark_framework_haxe_LooseCheck;
tools_spark_framework_haxe_LooseCheck.__name__ = ["tools","spark","framework","haxe","LooseCheck"];
tools_spark_framework_haxe_LooseCheck.isBlank = function(x) {
	return x.nodeType == Xml.PCData && tools_spark_framework_haxe_LooseCheck.blanks.match(x.get_nodeValue()) || x.nodeType == Xml.Comment;
};
tools_spark_framework_haxe_LooseCheck.filterMatch = function(s,f) {
	switch(Type.enumIndex(f)) {
	case 0:
		return tools_spark_framework_haxe_LooseCheck.filterMatch(s,tools_spark_framework_haxe_Filter.FReg(new EReg("[0-9]+","")));
	case 1:
		return tools_spark_framework_haxe_LooseCheck.filterMatch(s,tools_spark_framework_haxe_Filter.FEnum(["true","false","0","1"]));
	case 2:
		var values = f[2];
		var _g = 0;
		while(_g < values.length) {
			var v = values[_g];
			++_g;
			if(s == v) return true;
		}
		return false;
	case 3:
		var r = f[2];
		return r.match(s);
	}
};
tools_spark_framework_haxe_LooseCheck.isNullable = function(r) {
	switch(Type.enumIndex(r)) {
	case 2:
		var one = r[3];
		var r1 = r[2];
		return one != true || tools_spark_framework_haxe_LooseCheck.isNullable(r1);
	case 3:
		var rl = r[2];
		var _g = 0;
		while(_g < rl.length) {
			var r2 = rl[_g];
			++_g;
			if(!tools_spark_framework_haxe_LooseCheck.isNullable(r2)) return false;
		}
		return true;
	case 4:
		var rl1 = r[2];
		var _g1 = 0;
		while(_g1 < rl1.length) {
			var r3 = rl1[_g1];
			++_g1;
			if(tools_spark_framework_haxe_LooseCheck.isNullable(r3)) return true;
		}
		return false;
	case 1:
		return false;
	case 0:
		return false;
	case 5:
		return true;
	}
};
tools_spark_framework_haxe_LooseCheck.check = function(x,r) {
	switch(Type.enumIndex(r)) {
	case 0:
		var childs = r[4];
		var attribs = r[3];
		var name = r[2];
		if(x.nodeType != Xml.Element || x.get_nodeName() != name) return tools_spark_framework_haxe__$LooseCheck_CheckResult.CElementExpected(name,x);
		if(attribs != null) {
			var attribs1 = attribs.slice();
			var $it0 = x.attributes();
			while( $it0.hasNext() ) {
				var xatt = $it0.next();
				var found = false;
				var _g = 0;
				while(_g < attribs1.length) {
					var att = attribs1[_g];
					++_g;
					{
						var filter = att[3];
						var name1 = att[2];
						if(xatt != name1) continue;
						if(filter != null && !tools_spark_framework_haxe_LooseCheck.filterMatch(x.get(xatt),filter)) return tools_spark_framework_haxe__$LooseCheck_CheckResult.CInvalidAttrib(name1,x,filter);
						HxOverrides.remove(attribs1,att);
						found = true;
					}
				}
				if(!found) return tools_spark_framework_haxe__$LooseCheck_CheckResult.CExtraAttrib(xatt,x);
			}
			var _g1 = 0;
			while(_g1 < attribs1.length) {
				var att1 = attribs1[_g1];
				++_g1;
				{
					var defvalue = att1[4];
					var name2 = att1[2];
					if(defvalue == null) return tools_spark_framework_haxe__$LooseCheck_CheckResult.CMissingAttrib(name2,x);
				}
			}
		}
		if(childs != null) {
			var m = tools_spark_framework_haxe_LooseCheck.checkList(x.iterator(),childs);
			if(m != tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch) return tools_spark_framework_haxe__$LooseCheck_CheckResult.CInElement(x,m);
		}
		if(attribs != null) {
			var _g2 = 0;
			while(_g2 < attribs.length) {
				var att2 = attribs[_g2];
				++_g2;
				{
					var defvalue1 = att2[4];
					var name3 = att2[2];
					x.set(name3,defvalue1);
				}
			}
		}
		return tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch;
	case 1:
		var filter1 = r[2];
		if(x.nodeType != Xml.PCData && x.nodeType != Xml.CData) return tools_spark_framework_haxe__$LooseCheck_CheckResult.CDataExpected(x);
		if(filter1 != null && !tools_spark_framework_haxe_LooseCheck.filterMatch(x.get_nodeValue(),filter1)) return tools_spark_framework_haxe__$LooseCheck_CheckResult.CInvalidData(x,filter1);
		return tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch;
	case 4:
		var choices = r[2];
		if(choices.length == 0) throw new js__$Boot_HaxeError("No choice possible");
		var _g3 = 0;
		while(_g3 < choices.length) {
			var c = choices[_g3];
			++_g3;
			if(tools_spark_framework_haxe_LooseCheck.check(x,c) == tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch) return tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch;
		}
		return tools_spark_framework_haxe_LooseCheck.check(x,choices[0]);
	case 5:
		var r1 = r[2];
		return tools_spark_framework_haxe_LooseCheck.check(x,r1);
	default:
		throw new js__$Boot_HaxeError("Unexpected " + Std.string(r));
	}
};
tools_spark_framework_haxe_LooseCheck.checkList = function(it,r) {
	switch(Type.enumIndex(r)) {
	case 3:
		var ordered = r[3];
		var rules = r[2];
		var rules1 = rules.slice();
		while( it.hasNext() ) {
			var x = it.next();
			if(tools_spark_framework_haxe_LooseCheck.isBlank(x)) continue;
			var found = false;
			var _g = 0;
			while(_g < rules1.length) {
				var r1 = rules1[_g];
				++_g;
				var m = tools_spark_framework_haxe_LooseCheck.checkList(HxOverrides.iter([x]),r1);
				if(m == tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch) {
					found = true;
					switch(Type.enumIndex(r1)) {
					case 2:
						var one = r1[3];
						var rsub = r1[2];
						if(one) {
							var i;
							var _g2 = 0;
							var _g1 = rules1.length;
							while(_g2 < _g1) {
								var i1 = _g2++;
								if(rules1[i1] == r1) rules1[i1] = tools_spark_framework_haxe_Rule.RMulti(rsub);
							}
						}
						break;
					default:
						HxOverrides.remove(rules1,r1);
					}
					break;
				} else if(ordered && !tools_spark_framework_haxe_LooseCheck.isNullable(r1)) return m;
			}
			if(!found) return tools_spark_framework_haxe__$LooseCheck_CheckResult.CExtra(x);
		}
		var _g3 = 0;
		while(_g3 < rules1.length) {
			var r2 = rules1[_g3];
			++_g3;
			if(!tools_spark_framework_haxe_LooseCheck.isNullable(r2)) return tools_spark_framework_haxe__$LooseCheck_CheckResult.CMissing(r2);
		}
		return tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch;
	case 2:
		var one1 = r[3];
		var r3 = r[2];
		var found1 = false;
		while( it.hasNext() ) {
			var x1 = it.next();
			if(tools_spark_framework_haxe_LooseCheck.isBlank(x1)) continue;
			var m1 = tools_spark_framework_haxe_LooseCheck.checkList(HxOverrides.iter([x1]),r3);
			if(m1 != tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch) return m1;
			found1 = true;
		}
		if(one1 && !found1) return tools_spark_framework_haxe__$LooseCheck_CheckResult.CMissing(r3);
		return tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch;
	default:
		var found2 = false;
		while( it.hasNext() ) {
			var x2 = it.next();
			if(tools_spark_framework_haxe_LooseCheck.isBlank(x2)) continue;
			var m2 = tools_spark_framework_haxe_LooseCheck.check(x2,r);
			if(m2 != tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch) return m2;
			found2 = true;
			break;
		}
		if(!found2) switch(Type.enumIndex(r)) {
		case 5:
			break;
		default:
			return tools_spark_framework_haxe__$LooseCheck_CheckResult.CMissing(r);
		}
		while( it.hasNext() ) {
			var x3 = it.next();
			if(tools_spark_framework_haxe_LooseCheck.isBlank(x3)) continue;
			return tools_spark_framework_haxe__$LooseCheck_CheckResult.CExtra(x3);
		}
		return tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch;
	}
};
tools_spark_framework_haxe_LooseCheck.makeWhere = function(path) {
	if(path.length == 0) return "";
	var s = "In ";
	var first = true;
	var _g = 0;
	while(_g < path.length) {
		var x = path[_g];
		++_g;
		if(first) first = false; else s += ".";
		s += x.get_nodeName();
	}
	return s + ": ";
};
tools_spark_framework_haxe_LooseCheck.makeString = function(x) {
	if(x.nodeType == Xml.Element) return "element " + x.get_nodeName();
	var s = x.get_nodeValue().split("\r").join("\\r").split("\n").join("\\n").split("\t").join("\\t");
	if(s.length > 20) return HxOverrides.substr(s,0,17) + "...";
	return s;
};
tools_spark_framework_haxe_LooseCheck.makeRule = function(r) {
	switch(Type.enumIndex(r)) {
	case 0:
		var name = r[2];
		return "element " + name;
	case 1:
		return "data";
	case 2:
		var r1 = r[2];
		return tools_spark_framework_haxe_LooseCheck.makeRule(r1);
	case 3:
		var rules = r[2];
		return tools_spark_framework_haxe_LooseCheck.makeRule(rules[0]);
	case 4:
		var choices = r[2];
		return tools_spark_framework_haxe_LooseCheck.makeRule(choices[0]);
	case 5:
		var r2 = r[2];
		return tools_spark_framework_haxe_LooseCheck.makeRule(r2);
	}
};
tools_spark_framework_haxe_LooseCheck.makeError = function(m,path) {
	if(path == null) path = [];
	switch(Type.enumIndex(m)) {
	case 0:
		throw new js__$Boot_HaxeError("assert");
		break;
	case 1:
		var r = m[2];
		return tools_spark_framework_haxe_LooseCheck.makeWhere(path) + "Missing " + tools_spark_framework_haxe_LooseCheck.makeRule(r);
	case 2:
		var x = m[2];
		return tools_spark_framework_haxe_LooseCheck.makeWhere(path) + "Unexpected " + tools_spark_framework_haxe_LooseCheck.makeString(x);
	case 3:
		var x1 = m[3];
		var name = m[2];
		return tools_spark_framework_haxe_LooseCheck.makeWhere(path) + tools_spark_framework_haxe_LooseCheck.makeString(x1) + " while expected element " + name;
	case 4:
		var x2 = m[2];
		return tools_spark_framework_haxe_LooseCheck.makeWhere(path) + tools_spark_framework_haxe_LooseCheck.makeString(x2) + " while data expected";
	case 5:
		var x3 = m[3];
		var att = m[2];
		path.push(x3);
		return tools_spark_framework_haxe_LooseCheck.makeWhere(path) + "unexpected attribute " + att;
	case 6:
		var x4 = m[3];
		var att1 = m[2];
		path.push(x4);
		return tools_spark_framework_haxe_LooseCheck.makeWhere(path) + "missing required attribute " + att1;
	case 7:
		var x5 = m[3];
		var att2 = m[2];
		path.push(x5);
		return tools_spark_framework_haxe_LooseCheck.makeWhere(path) + "invalid attribute value for " + att2;
	case 8:
		var x6 = m[2];
		return tools_spark_framework_haxe_LooseCheck.makeWhere(path) + "invalid data format for " + tools_spark_framework_haxe_LooseCheck.makeString(x6);
	case 9:
		var m1 = m[3];
		var x7 = m[2];
		path.push(x7);
		return tools_spark_framework_haxe_LooseCheck.makeError(m1,path);
	}
};
tools_spark_framework_haxe_LooseCheck.checkNode = function(x,r) {
	var m = tools_spark_framework_haxe_LooseCheck.checkList(HxOverrides.iter([x]),r);
	if(m == tools_spark_framework_haxe__$LooseCheck_CheckResult.CMatch) return;
	throw new js__$Boot_HaxeError(tools_spark_framework_haxe_LooseCheck.makeError(m));
};
var tools_spark_framework_layout_containers_Group = function(p_layoutableEntity,p_layoutableInstanceType,p_layoutableInstance) {
	this.layoutableEntity = p_layoutableEntity;
	this.layoutableInstanceType = p_layoutableInstanceType;
	this.layoutableInstance = p_layoutableInstance;
	this._init();
};
$hxClasses["tools.spark.framework.layout.containers.Group"] = tools_spark_framework_layout_containers_Group;
tools_spark_framework_layout_containers_Group.__name__ = ["tools","spark","framework","layout","containers","Group"];
tools_spark_framework_layout_containers_Group.prototype = {
	_init: function() {
		this.children = [];
		this.x = this.y = this.width = this.height = 0;
		this.visibleStartX = this.visibleStartY = 0;
		this.visibleStartIndex = this.visibleEndIndex = this.numElementsCached = -1;
		this.tileWidthCached = this.tileHeightCached = null;
		this.rowCount = this.columnCount = -1;
	}
	,update: function() {
		this.updateState("layout");
		this.updateState("includeInLayout");
		this.updateState("x");
		this.updateState("y");
		this.updateState("width");
		this.updateState("height");
		this.updateState("left");
		this.updateState("top");
		this.updateState("right");
		this.updateState("bottom");
		this.updateState("horizontalCenter");
		this.updateState("verticalCenter");
		if(this.layout != null) {
			if(this.layout.layoutType != "Basic") {
				this.updateState("paddingLeft");
				this.updateState("paddingRight");
				this.updateState("paddingTop");
				this.updateState("paddingBottom");
				this.updateState("horizontalAlign");
				this.updateState("verticalAlign");
				if(this.layout.layoutType == "Horizontal" || this.layout.layoutType == "Vertical") this.updateState("gap");
				if(this.layout.layoutType == "Horizontal" || this.layout.layoutType == "Tile") {
					this.updateState("columnWidth");
					this.updateState("requestedColumnCount");
				}
				if(this.layout.layoutType == "Horizontal") {
					this.updateState("requestedMaxColumnCount");
					this.updateState("requestedMinColumnCount");
					this.updateState("variableColumnWidth");
				}
				if(this.layout.layoutType == "Vertical" || this.layout.layoutType == "Tile") {
					this.updateState("rowHeight");
					this.updateState("requestedRowCount");
				}
				if(this.layout.layoutType == "Vertical") {
					this.updateState("requestedMaxRowCount");
					this.updateState("requestedMinRowCount");
					this.updateState("variableRowHeight");
				}
				if(this.layout.layoutType == "Tile") {
					this.updateState("horizontalGap");
					this.updateState("verticalGap");
					this.updateState("rowAlign");
					this.updateState("columnAlign");
					this.updateState("orientation");
				}
			}
		}
	}
	,updateState: function(p_state) {
		switch(p_state) {
		case "layout":
			this._updateLayout(this.layoutableEntity.getState(p_state));
			break;
		case "includeInLayout":
			this.includeInLayout = this.layoutableEntity.getState(p_state);
			break;
		case "x":
			if(!(function($this) {
				var $r;
				var f = $this.layoutableEntity.getState(p_state);
				$r = isNaN(f);
				return $r;
			}(this))) this.x = this.layoutableEntity.getState(p_state);
			break;
		case "y":
			if(!(function($this) {
				var $r;
				var f1 = $this.layoutableEntity.getState(p_state);
				$r = isNaN(f1);
				return $r;
			}(this))) this.y = this.layoutableEntity.getState(p_state);
			break;
		case "width":
			this._updateExplicitSize(this.layoutableEntity.getState(p_state),"width");
			break;
		case "height":
			this._updateExplicitSize(this.layoutableEntity.getState(p_state),"height");
			break;
		case "left":
			if(!(function($this) {
				var $r;
				var f2 = $this.layoutableEntity.getState(p_state);
				$r = isNaN(f2);
				return $r;
			}(this))) this.left = this.layoutableEntity.getState(p_state);
			break;
		case "top":
			if(!(function($this) {
				var $r;
				var f3 = $this.layoutableEntity.getState(p_state);
				$r = isNaN(f3);
				return $r;
			}(this))) this.top = this.layoutableEntity.getState(p_state);
			break;
		case "right":
			if(!(function($this) {
				var $r;
				var f4 = $this.layoutableEntity.getState(p_state);
				$r = isNaN(f4);
				return $r;
			}(this))) this.right = this.layoutableEntity.getState(p_state);
			break;
		case "bottom":
			if(!(function($this) {
				var $r;
				var f5 = $this.layoutableEntity.getState(p_state);
				$r = isNaN(f5);
				return $r;
			}(this))) this.bottom = this.layoutableEntity.getState(p_state);
			break;
		case "horizontalCenter":
			if(!(function($this) {
				var $r;
				var f6 = $this.layoutableEntity.getState(p_state);
				$r = isNaN(f6);
				return $r;
			}(this))) this.horizontalCenter = this.layoutableEntity.getState(p_state);
			break;
		case "verticalCenter":
			if(!(function($this) {
				var $r;
				var f7 = $this.layoutableEntity.getState(p_state);
				$r = isNaN(f7);
				return $r;
			}(this))) this.verticalCenter = this.layoutableEntity.getState(p_state);
			break;
		case "paddingLeft":
			this.paddingLeft = this.layoutableEntity.getState(p_state);
			break;
		case "paddingRight":
			this.paddingRight = this.layoutableEntity.getState(p_state);
			break;
		case "paddingTop":
			this.paddingTop = this.layoutableEntity.getState(p_state);
			break;
		case "paddingBottom":
			this.paddingBottom = this.layoutableEntity.getState(p_state);
			break;
		case "gap":
			this.gap = this.layoutableEntity.getState(p_state);
			break;
		case "horizontalAlign":
			var s_horAlignStr = this.layoutableEntity.getState(p_state);
			if(s_horAlignStr == "left") this.horizontalAlign = tools_spark_framework_layout_interfaces_EHorizontalAlign.LEFT; else if(s_horAlignStr == "center") this.horizontalAlign = tools_spark_framework_layout_interfaces_EHorizontalAlign.CENTER; else if(s_horAlignStr == "right") this.horizontalAlign = tools_spark_framework_layout_interfaces_EHorizontalAlign.RIGHT; else if(s_horAlignStr == "justify") this.horizontalAlign = tools_spark_framework_layout_interfaces_EHorizontalAlign.JUSTIFY; else if(s_horAlignStr == "contentJustify") this.horizontalAlign = tools_spark_framework_layout_interfaces_EHorizontalAlign.CONTENT_JUSTIFY;
			break;
		case "verticalAlign":
			var s_verAlignStr = this.layoutableEntity.getState(p_state);
			if(s_verAlignStr == "top") this.verticalAlign = tools_spark_framework_layout_interfaces_EVerticalAlign.TOP; else if(s_verAlignStr == "middle") this.verticalAlign = tools_spark_framework_layout_interfaces_EVerticalAlign.MIDDLE; else if(s_verAlignStr == "bottom") this.verticalAlign = tools_spark_framework_layout_interfaces_EVerticalAlign.BOTTOM; else if(s_verAlignStr == "justify") this.verticalAlign = tools_spark_framework_layout_interfaces_EVerticalAlign.JUSTIFY; else if(s_verAlignStr == "contentJustify") this.verticalAlign = tools_spark_framework_layout_interfaces_EVerticalAlign.CONTENT_JUSTIFY;
			break;
		case "columnWidth":
			var s_columnWidth = this.layoutableEntity.getState(p_state);
			if(s_columnWidth == "calculated") this.columnWidth = this.explicitColumnWidth = null; else this.columnWidth = this.explicitColumnWidth = Std.parseFloat(s_columnWidth);
			break;
		case "requestedColumnCount":
			this.requestedColumnCount = this.layoutableEntity.getState(p_state);
			break;
		case "requestedMaxColumnCount":
			this.requestedMaxColumnCount = this.layoutableEntity.getState(p_state);
			break;
		case "requestedMinColumnCount":
			this.requestedMinColumnCount = this.layoutableEntity.getState(p_state);
			break;
		case "variableColumnWidth":
			this.variableColumnWidth = this.layoutableEntity.getState(p_state);
			break;
		case "rowHeight":
			var s_rowHeight = this.layoutableEntity.getState(p_state);
			if(s_rowHeight == "calculated") this.rowHeight = this.explicitRowHeight = null; else this.rowHeight = this.explicitRowHeight = Std.parseFloat(s_rowHeight);
			break;
		case "requestedRowCount":
			this.requestedRowCount = this.layoutableEntity.getState(p_state);
			break;
		case "requestedMaxRowCount":
			this.requestedMaxRowCount = this.layoutableEntity.getState(p_state);
			break;
		case "requestedMinRowCount":
			this.requestedMinRowCount = this.layoutableEntity.getState(p_state);
			break;
		case "variableRowHeight":
			this.variableRowHeight = this.layoutableEntity.getState(p_state);
			break;
		case "horizontalGap":
			this.horizontalGap = this.explicitHorizontalGap = this.layoutableEntity.getState(p_state);
			break;
		case "verticalGap":
			this.verticalGap = this.explicitVerticalGap = this.layoutableEntity.getState(p_state);
			break;
		case "rowAlign":
			var s_rowAlignStr = this.layoutableEntity.getState(p_state);
			if(s_rowAlignStr == "top") this.rowAlign = tools_spark_framework_layout_interfaces_ERowAlign.TOP; else if(s_rowAlignStr == "justifyUsingHeight") this.rowAlign = tools_spark_framework_layout_interfaces_ERowAlign.JUSTIFY_USING_HEIGHT; else if(s_rowAlignStr == "justifyUsingGap") this.rowAlign = tools_spark_framework_layout_interfaces_ERowAlign.JUSTIFY_USING_GAP;
			break;
		case "columnAlign":
			var s_columnAlignStr = this.layoutableEntity.getState(p_state);
			if(s_columnAlignStr == "left") this.columnAlign = tools_spark_framework_layout_interfaces_EColumnAlign.LEFT; else if(s_columnAlignStr == "justifyUsingWidth") this.columnAlign = tools_spark_framework_layout_interfaces_EColumnAlign.JUSTIFY_USING_WIDTH; else if(s_columnAlignStr == "justifyUsingGap") this.columnAlign = tools_spark_framework_layout_interfaces_EColumnAlign.JUSTIFY_USING_GAP;
			break;
		case "orientation":
			var s_orientationStr = this.layoutableEntity.getState(p_state);
			if(s_orientationStr == "rows") this.orientation = tools_spark_framework_layout_interfaces_ETileOrientation.ROWS; else if(s_orientationStr == "columns") this.orientation = tools_spark_framework_layout_interfaces_ETileOrientation.COLUMNS;
			break;
		}
	}
	,_updateLayout: function(p_stateValue) {
		if(p_stateValue == "Basic") {
			if(this.layout == null) this.set_layout(new tools_spark_framework_layout_layouts_BasicLayout()); else if(this.layout.layoutType != p_stateValue) this.set_layout(new tools_spark_framework_layout_layouts_BasicLayout());
		} else if(p_stateValue == "Horizontal") {
			if(this.layout == null) this.set_layout(new tools_spark_framework_layout_layouts_HorizontalLayout()); else if(this.layout.layoutType != p_stateValue) this.set_layout(new tools_spark_framework_layout_layouts_HorizontalLayout());
		} else if(p_stateValue == "Vertical") {
			if(this.layout == null) this.set_layout(new tools_spark_framework_layout_layouts_VerticalLayout()); else if(this.layout.layoutType != p_stateValue) this.set_layout(new tools_spark_framework_layout_layouts_VerticalLayout());
		} else if(p_stateValue == "Tile") {
			if(this.layout == null) this.set_layout(new tools_spark_framework_layout_layouts_TileLayout()); else if(this.layout.layoutType != p_stateValue) this.set_layout(new tools_spark_framework_layout_layouts_TileLayout());
		}
		this.layout.set_target(this);
	}
	,_updateExplicitSize: function(p_stateValue,p_dimension) {
		var l_explicitSize = null;
		var l_percentSize = null;
		if(p_stateValue != "Implicit") {
			if(p_stateValue.indexOf("%") != -1) l_percentSize = Std.parseFloat(p_stateValue); else l_explicitSize = Std.parseFloat(p_stateValue);
		}
		if(p_dimension == "width") {
			this.explicitWidth = l_explicitSize;
			this.percentWidth = l_percentSize;
		} else {
			this.explicitHeight = l_explicitSize;
			this.percentHeight = l_percentSize;
		}
	}
	,set_layout: function(p_value) {
		if(this.layout == p_value) return this.layout;
		this.layout = p_value;
		return this.layout;
	}
	,measure: function() {
		this.layout.measure();
	}
	,updateDisplayList: function(p_width,p_height) {
		this.layout.updateDisplayList(p_width,p_height);
	}
	,setActualSize: function(p_width,p_height) {
		if(this.explicitWidth != null) this.width = this.explicitWidth; else if(p_width != null && p_width != 0) {
			this.width = p_width;
			this.measuredWidth = p_width;
		} else if(this.get_preferredWidth() != 0) this.width = this.get_preferredWidth();
		if(this.explicitHeight != null) this.height = this.explicitHeight; else if(p_height != null && p_height != 0) {
			this.height = p_height;
			this.measuredHeight = p_height;
		} else if(this.get_preferredHeight() != 0) this.height = this.get_preferredHeight();
	}
	,get_preferredWidth: function() {
		if(this.explicitWidth == null) return this.measuredWidth; else return this.explicitWidth;
	}
	,get_preferredHeight: function() {
		if(this.explicitHeight == null) return this.measuredHeight; else return this.explicitHeight;
	}
	,get_preferredMinWidth: function() {
		if(this.explicitMinWidth == null) return this.measuredMinWidth; else return this.explicitMinWidth;
	}
	,get_preferredMinHeight: function() {
		if(this.explicitMinHeight == null) return this.measuredMinHeight; else return this.explicitMinHeight;
	}
	,get_preferredMaxWidth: function() {
		if(this.explicitMaxWidth == null) return this.measuredMaxWidth; else return this.explicitMaxWidth;
	}
	,get_preferredMaxHeight: function() {
		if(this.explicitMaxHeight == null) return this.measuredMaxHeight; else return this.explicitMaxHeight;
	}
	,__class__: tools_spark_framework_layout_containers_Group
	,__properties__: {get_preferredMaxHeight:"get_preferredMaxHeight",get_preferredMaxWidth:"get_preferredMaxWidth",get_preferredMinHeight:"get_preferredMinHeight",get_preferredMinWidth:"get_preferredMinWidth",get_preferredHeight:"get_preferredHeight",get_preferredWidth:"get_preferredWidth",set_layout:"set_layout"}
};
var tools_spark_framework_layout_helpers_ChildInfo = function() {
	this.size = 0;
};
$hxClasses["tools.spark.framework.layout.helpers.ChildInfo"] = tools_spark_framework_layout_helpers_ChildInfo;
tools_spark_framework_layout_helpers_ChildInfo.__name__ = ["tools","spark","framework","layout","helpers","ChildInfo"];
tools_spark_framework_layout_helpers_ChildInfo.prototype = {
	__class__: tools_spark_framework_layout_helpers_ChildInfo
};
var tools_spark_framework_layout_helpers_LayoutHelper = function() { };
$hxClasses["tools.spark.framework.layout.helpers.LayoutHelper"] = tools_spark_framework_layout_helpers_LayoutHelper;
tools_spark_framework_layout_helpers_LayoutHelper.__name__ = ["tools","spark","framework","layout","helpers","LayoutHelper"];
tools_spark_framework_layout_helpers_LayoutHelper.flexChildrenProportionally = function(p_spaceForChildren,p_spaceToDistribute,p_totalPercent,p_childInfoArray) {
	var l_numChildren = p_childInfoArray.length;
	var l_flexConsumed;
	var l_done;
	var l_unused;
	do {
		l_flexConsumed = 0;
		l_done = true;
		l_unused = p_spaceToDistribute - p_spaceForChildren * p_totalPercent / 100;
		if(l_unused > 0) p_spaceToDistribute -= l_unused; else l_unused = 0;
		var l_spacePerPercent = p_spaceToDistribute / p_totalPercent;
		var l_i = 0;
		while(l_i < l_numChildren) {
			var w_childInfo = p_childInfoArray[l_i];
			var w_size = w_childInfo.percent * l_spacePerPercent;
			if(w_size < w_childInfo.min) {
				var w_min = w_childInfo.min;
				w_childInfo.size = w_min;
				p_childInfoArray[l_i] = p_childInfoArray[--l_numChildren];
				p_childInfoArray[l_numChildren] = w_childInfo;
				p_totalPercent -= w_childInfo.percent;
				if(l_unused >= w_min) l_unused -= w_min; else {
					p_spaceToDistribute -= w_min - l_unused;
					l_unused = 0;
				}
				l_done = false;
				break;
			} else if(w_size > w_childInfo.max) {
				var w_max = w_childInfo.max;
				w_childInfo.size = w_max;
				p_childInfoArray[l_i] = p_childInfoArray[--l_numChildren];
				p_childInfoArray[l_numChildren] = w_childInfo;
				p_totalPercent -= w_childInfo.percent;
				if(l_unused >= w_max) l_unused -= w_max; else {
					p_spaceToDistribute -= w_max - l_unused;
					l_unused = 0;
				}
				l_done = false;
				break;
			} else {
				w_childInfo.size = w_size;
				l_flexConsumed += w_size;
			}
			l_i++;
		}
	} while(!l_done);
	return Math.max(0,Math.floor(p_spaceToDistribute + l_unused - l_flexConsumed));
};
var tools_spark_framework_layout_helpers_SizesAndLimit = function() {
};
$hxClasses["tools.spark.framework.layout.helpers.SizesAndLimit"] = tools_spark_framework_layout_helpers_SizesAndLimit;
tools_spark_framework_layout_helpers_SizesAndLimit.__name__ = ["tools","spark","framework","layout","helpers","SizesAndLimit"];
tools_spark_framework_layout_helpers_SizesAndLimit.prototype = {
	__class__: tools_spark_framework_layout_helpers_SizesAndLimit
};
var tools_spark_framework_layout_interfaces_EColumnAlign = $hxClasses["tools.spark.framework.layout.interfaces.EColumnAlign"] = { __ename__ : ["tools","spark","framework","layout","interfaces","EColumnAlign"], __constructs__ : ["JUSTIFY_USING_GAP","JUSTIFY_USING_WIDTH","LEFT"] };
tools_spark_framework_layout_interfaces_EColumnAlign.JUSTIFY_USING_GAP = ["JUSTIFY_USING_GAP",0];
tools_spark_framework_layout_interfaces_EColumnAlign.JUSTIFY_USING_GAP.__enum__ = tools_spark_framework_layout_interfaces_EColumnAlign;
tools_spark_framework_layout_interfaces_EColumnAlign.JUSTIFY_USING_WIDTH = ["JUSTIFY_USING_WIDTH",1];
tools_spark_framework_layout_interfaces_EColumnAlign.JUSTIFY_USING_WIDTH.__enum__ = tools_spark_framework_layout_interfaces_EColumnAlign;
tools_spark_framework_layout_interfaces_EColumnAlign.LEFT = ["LEFT",2];
tools_spark_framework_layout_interfaces_EColumnAlign.LEFT.__enum__ = tools_spark_framework_layout_interfaces_EColumnAlign;
tools_spark_framework_layout_interfaces_EColumnAlign.__empty_constructs__ = [tools_spark_framework_layout_interfaces_EColumnAlign.JUSTIFY_USING_GAP,tools_spark_framework_layout_interfaces_EColumnAlign.JUSTIFY_USING_WIDTH,tools_spark_framework_layout_interfaces_EColumnAlign.LEFT];
var tools_spark_framework_layout_interfaces_EHorizontalAlign = $hxClasses["tools.spark.framework.layout.interfaces.EHorizontalAlign"] = { __ename__ : ["tools","spark","framework","layout","interfaces","EHorizontalAlign"], __constructs__ : ["LEFT","CENTER","RIGHT","JUSTIFY","CONTENT_JUSTIFY"] };
tools_spark_framework_layout_interfaces_EHorizontalAlign.LEFT = ["LEFT",0];
tools_spark_framework_layout_interfaces_EHorizontalAlign.LEFT.__enum__ = tools_spark_framework_layout_interfaces_EHorizontalAlign;
tools_spark_framework_layout_interfaces_EHorizontalAlign.CENTER = ["CENTER",1];
tools_spark_framework_layout_interfaces_EHorizontalAlign.CENTER.__enum__ = tools_spark_framework_layout_interfaces_EHorizontalAlign;
tools_spark_framework_layout_interfaces_EHorizontalAlign.RIGHT = ["RIGHT",2];
tools_spark_framework_layout_interfaces_EHorizontalAlign.RIGHT.__enum__ = tools_spark_framework_layout_interfaces_EHorizontalAlign;
tools_spark_framework_layout_interfaces_EHorizontalAlign.JUSTIFY = ["JUSTIFY",3];
tools_spark_framework_layout_interfaces_EHorizontalAlign.JUSTIFY.__enum__ = tools_spark_framework_layout_interfaces_EHorizontalAlign;
tools_spark_framework_layout_interfaces_EHorizontalAlign.CONTENT_JUSTIFY = ["CONTENT_JUSTIFY",4];
tools_spark_framework_layout_interfaces_EHorizontalAlign.CONTENT_JUSTIFY.__enum__ = tools_spark_framework_layout_interfaces_EHorizontalAlign;
tools_spark_framework_layout_interfaces_EHorizontalAlign.__empty_constructs__ = [tools_spark_framework_layout_interfaces_EHorizontalAlign.LEFT,tools_spark_framework_layout_interfaces_EHorizontalAlign.CENTER,tools_spark_framework_layout_interfaces_EHorizontalAlign.RIGHT,tools_spark_framework_layout_interfaces_EHorizontalAlign.JUSTIFY,tools_spark_framework_layout_interfaces_EHorizontalAlign.CONTENT_JUSTIFY];
var tools_spark_framework_layout_interfaces_ERowAlign = $hxClasses["tools.spark.framework.layout.interfaces.ERowAlign"] = { __ename__ : ["tools","spark","framework","layout","interfaces","ERowAlign"], __constructs__ : ["JUSTIFY_USING_GAP","JUSTIFY_USING_HEIGHT","TOP"] };
tools_spark_framework_layout_interfaces_ERowAlign.JUSTIFY_USING_GAP = ["JUSTIFY_USING_GAP",0];
tools_spark_framework_layout_interfaces_ERowAlign.JUSTIFY_USING_GAP.__enum__ = tools_spark_framework_layout_interfaces_ERowAlign;
tools_spark_framework_layout_interfaces_ERowAlign.JUSTIFY_USING_HEIGHT = ["JUSTIFY_USING_HEIGHT",1];
tools_spark_framework_layout_interfaces_ERowAlign.JUSTIFY_USING_HEIGHT.__enum__ = tools_spark_framework_layout_interfaces_ERowAlign;
tools_spark_framework_layout_interfaces_ERowAlign.TOP = ["TOP",2];
tools_spark_framework_layout_interfaces_ERowAlign.TOP.__enum__ = tools_spark_framework_layout_interfaces_ERowAlign;
tools_spark_framework_layout_interfaces_ERowAlign.__empty_constructs__ = [tools_spark_framework_layout_interfaces_ERowAlign.JUSTIFY_USING_GAP,tools_spark_framework_layout_interfaces_ERowAlign.JUSTIFY_USING_HEIGHT,tools_spark_framework_layout_interfaces_ERowAlign.TOP];
var tools_spark_framework_layout_interfaces_ETileOrientation = $hxClasses["tools.spark.framework.layout.interfaces.ETileOrientation"] = { __ename__ : ["tools","spark","framework","layout","interfaces","ETileOrientation"], __constructs__ : ["COLUMNS","ROWS"] };
tools_spark_framework_layout_interfaces_ETileOrientation.COLUMNS = ["COLUMNS",0];
tools_spark_framework_layout_interfaces_ETileOrientation.COLUMNS.__enum__ = tools_spark_framework_layout_interfaces_ETileOrientation;
tools_spark_framework_layout_interfaces_ETileOrientation.ROWS = ["ROWS",1];
tools_spark_framework_layout_interfaces_ETileOrientation.ROWS.__enum__ = tools_spark_framework_layout_interfaces_ETileOrientation;
tools_spark_framework_layout_interfaces_ETileOrientation.__empty_constructs__ = [tools_spark_framework_layout_interfaces_ETileOrientation.COLUMNS,tools_spark_framework_layout_interfaces_ETileOrientation.ROWS];
var tools_spark_framework_layout_interfaces_EVerticalAlign = $hxClasses["tools.spark.framework.layout.interfaces.EVerticalAlign"] = { __ename__ : ["tools","spark","framework","layout","interfaces","EVerticalAlign"], __constructs__ : ["TOP","MIDDLE","BOTTOM","JUSTIFY","CONTENT_JUSTIFY"] };
tools_spark_framework_layout_interfaces_EVerticalAlign.TOP = ["TOP",0];
tools_spark_framework_layout_interfaces_EVerticalAlign.TOP.__enum__ = tools_spark_framework_layout_interfaces_EVerticalAlign;
tools_spark_framework_layout_interfaces_EVerticalAlign.MIDDLE = ["MIDDLE",1];
tools_spark_framework_layout_interfaces_EVerticalAlign.MIDDLE.__enum__ = tools_spark_framework_layout_interfaces_EVerticalAlign;
tools_spark_framework_layout_interfaces_EVerticalAlign.BOTTOM = ["BOTTOM",2];
tools_spark_framework_layout_interfaces_EVerticalAlign.BOTTOM.__enum__ = tools_spark_framework_layout_interfaces_EVerticalAlign;
tools_spark_framework_layout_interfaces_EVerticalAlign.JUSTIFY = ["JUSTIFY",3];
tools_spark_framework_layout_interfaces_EVerticalAlign.JUSTIFY.__enum__ = tools_spark_framework_layout_interfaces_EVerticalAlign;
tools_spark_framework_layout_interfaces_EVerticalAlign.CONTENT_JUSTIFY = ["CONTENT_JUSTIFY",4];
tools_spark_framework_layout_interfaces_EVerticalAlign.CONTENT_JUSTIFY.__enum__ = tools_spark_framework_layout_interfaces_EVerticalAlign;
tools_spark_framework_layout_interfaces_EVerticalAlign.__empty_constructs__ = [tools_spark_framework_layout_interfaces_EVerticalAlign.TOP,tools_spark_framework_layout_interfaces_EVerticalAlign.MIDDLE,tools_spark_framework_layout_interfaces_EVerticalAlign.BOTTOM,tools_spark_framework_layout_interfaces_EVerticalAlign.JUSTIFY,tools_spark_framework_layout_interfaces_EVerticalAlign.CONTENT_JUSTIFY];
var tools_spark_framework_layout_layouts_ALayoutBase = function() {
};
$hxClasses["tools.spark.framework.layout.layouts.ALayoutBase"] = tools_spark_framework_layout_layouts_ALayoutBase;
tools_spark_framework_layout_layouts_ALayoutBase.__name__ = ["tools","spark","framework","layout","layouts","ALayoutBase"];
tools_spark_framework_layout_layouts_ALayoutBase.prototype = {
	get_typicalLayoutElement: function() {
		if(this._typicalLayoutElement == null && this.target != null && this.target.children.length > 0) this._typicalLayoutElement = this.target.children[0];
		return this._typicalLayoutElement;
	}
	,set_target: function(p_value) {
		if(this.target == p_value) return this.target;
		this.target = p_value;
		return this.target;
	}
	,measure: function() {
	}
	,updateDisplayList: function(p_unscaledWidth,p_unscaledHeight) {
	}
	,__class__: tools_spark_framework_layout_layouts_ALayoutBase
	,__properties__: {get_typicalLayoutElement:"get_typicalLayoutElement",set_target:"set_target"}
};
var tools_spark_framework_layout_layouts_BasicLayout = function() {
	tools_spark_framework_layout_layouts_ALayoutBase.call(this);
	this.layoutType = "Basic";
};
$hxClasses["tools.spark.framework.layout.layouts.BasicLayout"] = tools_spark_framework_layout_layouts_BasicLayout;
tools_spark_framework_layout_layouts_BasicLayout.__name__ = ["tools","spark","framework","layout","layouts","BasicLayout"];
tools_spark_framework_layout_layouts_BasicLayout._constraintsDetermineWidth = function(p_group) {
	return p_group.percentWidth != null || p_group.left != null && p_group.right != null;
};
tools_spark_framework_layout_layouts_BasicLayout._constraintsDetermineHeight = function(p_group) {
	return p_group.percentHeight != null || p_group.top != null && p_group.bottom != null;
};
tools_spark_framework_layout_layouts_BasicLayout._maxSizeToFitIn = function(p_totalSize,p_center,p_lowConstraint,p_highConstraint,p_position) {
	if(p_center != null) return p_totalSize - 2 * Math.abs(p_center); else if(p_lowConstraint != null) return p_totalSize - p_lowConstraint; else if(p_highConstraint != null) return p_totalSize - p_highConstraint; else return p_totalSize - p_position;
};
tools_spark_framework_layout_layouts_BasicLayout.__super__ = tools_spark_framework_layout_layouts_ALayoutBase;
tools_spark_framework_layout_layouts_BasicLayout.prototype = $extend(tools_spark_framework_layout_layouts_ALayoutBase.prototype,{
	measure: function() {
		var l_width = 0;
		var l_height = 0;
		var l_minWidth = 0;
		var l_minHeight = 0;
		var _g = 0;
		var _g1 = this.target.children;
		while(_g < _g1.length) {
			var f_child = _g1[_g];
			++_g;
			if(f_child == null || f_child.includeInLayout == false) continue;
			var f_extX;
			var f_extY;
			if(f_child.left != null && f_child.right != null) f_extX = f_child.left + f_child.right; else if(f_child.horizontalCenter != null) f_extX = Math.abs(f_child.horizontalCenter) * 2; else if(f_child.left != null || f_child.right != null) {
				if(f_child.left == null) f_extX = 0; else f_extX = f_child.left;
				if(f_child.right == null) f_extX += 0; else f_extX += f_child.right;
			} else f_extX = f_child.x;
			if(f_child.top != null && f_child.bottom != null) f_extY = f_child.top + f_child.bottom; else if(f_child.verticalCenter != null) f_extY = Math.abs(f_child.verticalCenter) * 2; else if(f_child.top != null || f_child.bottom != null) {
				if(f_child.top == null) f_extY = 0; else f_extY = f_child.top;
				if(f_child.bottom == null) f_extY += 0; else f_extY += f_child.bottom;
			} else f_extY = f_child.y;
			l_width = Math.max(l_width,f_extX + f_child.get_preferredWidth());
			l_height = Math.max(l_height,f_extY + f_child.get_preferredHeight());
			var l_elementMinWidth;
			if(tools_spark_framework_layout_layouts_BasicLayout._constraintsDetermineWidth(f_child)) l_elementMinWidth = f_child.get_preferredMinWidth(); else l_elementMinWidth = f_child.get_preferredWidth();
			var l_elementMinHeight;
			if(tools_spark_framework_layout_layouts_BasicLayout._constraintsDetermineHeight(f_child)) l_elementMinHeight = f_child.get_preferredMinHeight(); else l_elementMinHeight = f_child.get_preferredHeight();
			l_minWidth = Math.max(l_minWidth,f_extX + l_elementMinWidth);
			l_minHeight = Math.max(l_minHeight,f_extY + l_elementMinHeight);
		}
		this.target.measuredWidth = Math.ceil(Math.max(l_width,l_minWidth));
		this.target.measuredHeight = Math.ceil(Math.max(l_height,l_minHeight));
		this.target.measuredMinWidth = Math.ceil(l_minWidth);
		this.target.measuredMinHeight = Math.ceil(l_minHeight);
		this.target.measuredMaxWidth = 999999;
		this.target.measuredMaxHeight = 999999;
	}
	,updateDisplayList: function(p_unscaledWidth,p_unscaledHeight) {
		var l_maxX = 0;
		var l_maxY = 0;
		var _g = 0;
		var _g1 = this.target.children;
		while(_g < _g1.length) {
			var f_child = _g1[_g];
			++_g;
			if(f_child == null || f_child.includeInLayout == false) continue;
			var f_elementMaxWidth = null;
			var f_elementMaxHeight = null;
			var f_childWidth = null;
			var f_childHeight = null;
			if(f_child.percentWidth != null) {
				var f_availableWidth = p_unscaledWidth;
				if(f_child.left != null) f_availableWidth -= f_child.left;
				if(f_child.right != null) f_availableWidth -= f_child.right;
				f_childWidth = Math.round(f_availableWidth * Math.min(f_child.percentWidth * 0.01,1));
				f_elementMaxWidth = Math.min(f_child.get_preferredMaxWidth(),tools_spark_framework_layout_layouts_BasicLayout._maxSizeToFitIn(p_unscaledWidth,f_child.horizontalCenter,f_child.left,f_child.right,f_child.x));
			} else if(f_child.left != null && f_child.right != null) f_childWidth = p_unscaledWidth - f_child.right - f_child.left;
			if(f_child.percentHeight != null) {
				var f_availableHeight = p_unscaledHeight;
				if(f_child.top != null) f_availableHeight -= f_child.top;
				if(f_child.bottom != null) f_availableHeight -= f_child.bottom;
				f_childHeight = Math.round(f_availableHeight * Math.min(f_child.percentHeight * 0.01,1));
				f_elementMaxHeight = Math.min(f_child.get_preferredMaxHeight(),tools_spark_framework_layout_layouts_BasicLayout._maxSizeToFitIn(p_unscaledHeight,f_child.verticalCenter,f_child.top,f_child.bottom,f_child.y));
			} else if(f_child.top != null && f_child.bottom != null) f_childHeight = p_unscaledHeight - f_child.bottom - f_child.top;
			if(f_childWidth != null) {
				if(f_elementMaxWidth == null) f_elementMaxWidth = f_child.get_preferredMaxWidth();
				f_childWidth = Math.max(f_child.get_preferredMinWidth(),Math.min(f_elementMaxWidth,f_childWidth));
			}
			if(f_childHeight != null) {
				if(f_elementMaxHeight == null) f_elementMaxHeight = f_child.get_preferredMaxHeight();
				f_childHeight = Math.max(f_child.get_preferredMinHeight(),Math.min(f_elementMaxHeight,f_childHeight));
			}
			f_child.setActualSize(f_childWidth,f_childHeight);
			var f_elementWidth = f_child.width;
			var f_elementHeight = f_child.height;
			var f_childX = null;
			var f_childY = null;
			if(f_child.horizontalCenter != null) f_childX = Math.round((p_unscaledWidth - f_elementWidth) / 2 + f_child.horizontalCenter); else if(f_child.left != null) f_childX = f_child.left; else if(f_child.right != null) f_childX = p_unscaledWidth - f_elementWidth - f_child.right; else f_childX = f_child.x;
			if(f_child.verticalCenter != null) f_childY = Math.round((p_unscaledHeight - f_elementHeight) / 2 + f_child.verticalCenter); else if(f_child.top != null) f_childY = f_child.top; else if(f_child.bottom != null) f_childY = p_unscaledHeight - f_elementHeight - f_child.bottom; else f_childY = f_child.y;
			f_child.x = f_childX;
			f_child.y = f_childY;
			l_maxX = Math.max(l_maxX,f_childX + f_elementWidth);
			l_maxY = Math.max(l_maxY,f_childY + f_elementHeight);
		}
		this.target.width = Math.ceil(p_unscaledWidth);
		this.target.height = Math.ceil(p_unscaledHeight);
	}
	,__class__: tools_spark_framework_layout_layouts_BasicLayout
});
var tools_spark_framework_layout_layouts_HorizontalLayout = function() {
	tools_spark_framework_layout_layouts_ALayoutBase.call(this);
	this.layoutType = "Horizontal";
};
$hxClasses["tools.spark.framework.layout.layouts.HorizontalLayout"] = tools_spark_framework_layout_layouts_HorizontalLayout;
tools_spark_framework_layout_layouts_HorizontalLayout.__name__ = ["tools","spark","framework","layout","layouts","HorizontalLayout"];
tools_spark_framework_layout_layouts_HorizontalLayout._pinBetween = function(p_val,p_min,p_max) {
	return Math.min(p_max,Math.max(p_min,p_val));
};
tools_spark_framework_layout_layouts_HorizontalLayout._calculatePercentHeight = function(p_layoutElement,p_height) {
	var l_percentHeight;
	l_percentHeight = tools_spark_framework_layout_layouts_HorizontalLayout._pinBetween(Math.min(Math.round(p_layoutElement.percentHeight * 0.01 * p_height),p_height),p_layoutElement.get_preferredMinHeight(),p_layoutElement.get_preferredMaxHeight());
	return l_percentHeight;
};
tools_spark_framework_layout_layouts_HorizontalLayout._sizeLayoutElement = function(p_layoutElement,p_height,p_verticalAlign,p_restrictedHeight,p_width,p_variableColumnWidth,p_columnWidth) {
	var l_newHeight = null;
	if(p_verticalAlign == tools_spark_framework_layout_interfaces_EVerticalAlign.JUSTIFY || p_verticalAlign == tools_spark_framework_layout_interfaces_EVerticalAlign.CONTENT_JUSTIFY) l_newHeight = p_restrictedHeight; else if(p_layoutElement.percentHeight != null) l_newHeight = tools_spark_framework_layout_layouts_HorizontalLayout._calculatePercentHeight(p_layoutElement,p_height);
	if(p_variableColumnWidth) p_layoutElement.setActualSize(p_width,l_newHeight); else p_layoutElement.setActualSize(p_columnWidth,l_newHeight);
};
tools_spark_framework_layout_layouts_HorizontalLayout.__super__ = tools_spark_framework_layout_layouts_ALayoutBase;
tools_spark_framework_layout_layouts_HorizontalLayout.prototype = $extend(tools_spark_framework_layout_layouts_ALayoutBase.prototype,{
	_getColumsToMeasure: function(p_numElementsInLayout) {
		var l_columnsToMeasure;
		if(this.target.requestedColumnCount != -1) l_columnsToMeasure = this.target.requestedColumnCount; else {
			l_columnsToMeasure = p_numElementsInLayout;
			if(this.target.requestedMaxColumnCount != -1) l_columnsToMeasure = Std["int"](Math.min(this.target.requestedMaxColumnCount,l_columnsToMeasure));
			if(this.target.requestedMinColumnCount != -1) l_columnsToMeasure = Std["int"](Math.max(this.target.requestedMinColumnCount,l_columnsToMeasure));
		}
		return l_columnsToMeasure;
	}
	,_getElementWidth: function(p_element,p_fixedColumnWidth,p_result) {
		var l_elementPreferredWidth;
		if(p_fixedColumnWidth == null) l_elementPreferredWidth = Math.ceil(p_element.get_preferredWidth()); else l_elementPreferredWidth = p_fixedColumnWidth;
		var l_flexibleWidth = p_element.percentWidth != null;
		var l_elementMinWidth;
		if(l_flexibleWidth) l_elementMinWidth = Math.ceil(p_element.get_preferredMinWidth()); else l_elementMinWidth = l_elementPreferredWidth;
		p_result.preferredSize = l_elementPreferredWidth;
		p_result.minSize = l_elementMinWidth;
	}
	,_getElementHeight: function(p_element,p_justify,p_result) {
		var l_elementPreferredHeight = Math.ceil(p_element.get_preferredHeight());
		var l_flexibleHeight = p_element.percentHeight != null || p_justify;
		var l_elementMinHeight;
		if(l_flexibleHeight) l_elementMinHeight = Math.ceil(p_element.get_preferredMinHeight()); else l_elementMinHeight = l_elementPreferredHeight;
		p_result.preferredSize = l_elementPreferredHeight;
		p_result.minSize = l_elementMinHeight;
	}
	,_distributeWidth: function(p_width,p_height,p_restrictedHeight) {
		var l_spaceToDistribute = p_width;
		var l_totalPercentWidth = 0;
		var l_childInfoArray = [];
		var l_childInfo;
		var l_newHeight;
		var l_layoutElement;
		var l_cw;
		if(this.target.variableColumnWidth) l_cw = 0; else l_cw = Math.ceil(this.target.columnWidth);
		var l_totalCount = this.target.children.length;
		var _g = 0;
		var _g1 = this.target.children;
		while(_g < _g1.length) {
			var f_child = _g1[_g];
			++_g;
			if(f_child == null || f_child.includeInLayout == false) {
				l_totalCount--;
				continue;
			}
			if(f_child.percentWidth != null && this.target.variableColumnWidth) {
				l_totalPercentWidth += f_child.percentWidth;
				l_childInfo = new tools_spark_framework_layout_helpers_ChildInfo();
				l_childInfo.layoutElement = f_child;
				l_childInfo.percent = f_child.percentWidth;
				l_childInfo.min = f_child.get_preferredMinWidth();
				l_childInfo.max = f_child.get_preferredMaxWidth();
				l_childInfoArray.push(l_childInfo);
			} else {
				tools_spark_framework_layout_layouts_HorizontalLayout._sizeLayoutElement(f_child,p_height,this.target.verticalAlign,p_restrictedHeight,null,this.target.variableColumnWidth,l_cw);
				l_spaceToDistribute -= Math.ceil(f_child.width);
			}
		}
		if(l_totalCount > 1) l_spaceToDistribute -= (l_totalCount - 1) * this.target.gap;
		if(l_totalPercentWidth != 0) {
			tools_spark_framework_layout_helpers_LayoutHelper.flexChildrenProportionally(p_width,l_spaceToDistribute,l_totalPercentWidth,l_childInfoArray);
			var l_roundOff = 0;
			var _g2 = 0;
			while(_g2 < l_childInfoArray.length) {
				var f_childInfo = l_childInfoArray[_g2];
				++_g2;
				var l_childSize = Math.round(f_childInfo.size + l_roundOff);
				l_roundOff += f_childInfo.size - l_childSize;
				tools_spark_framework_layout_layouts_HorizontalLayout._sizeLayoutElement(f_childInfo.layoutElement,p_height,this.target.verticalAlign,p_restrictedHeight,l_childSize,this.target.variableColumnWidth,l_cw);
				l_spaceToDistribute -= l_childSize;
			}
		}
		return l_spaceToDistribute;
	}
	,measure: function() {
		var l_size = new tools_spark_framework_layout_helpers_SizesAndLimit();
		var l_justify = this.target.verticalAlign == tools_spark_framework_layout_interfaces_EVerticalAlign.JUSTIFY;
		var l_numElements = this.target.children.length;
		var l_numElementsInLayout = l_numElements;
		var l_requestedColumnCount = this.target.requestedColumnCount;
		var l_columnsMeasured = 0;
		var l_preferredHeight = 0;
		var l_preferredWidth = 0;
		var l_minHeight = 0;
		var l_minWidth = 0;
		var l_fixedColumnWidth = null;
		if(!this.target.variableColumnWidth) {
			if(this.target.columnWidth == null) l_fixedColumnWidth = this.get_typicalLayoutElement().get_preferredWidth(); else l_fixedColumnWidth = this.target.columnWidth;
		}
		var l_columnsToMeasure = this._getColumsToMeasure(l_numElementsInLayout);
		var _g = 0;
		var _g1 = this.target.children;
		while(_g < _g1.length) {
			var f_child = _g1[_g];
			++_g;
			if(f_child == null || f_child.includeInLayout == false) {
				l_numElementsInLayout--;
				continue;
			}
			this._getElementHeight(f_child,l_justify,l_size);
			l_preferredHeight = Math.max(l_preferredHeight,l_size.preferredSize);
			l_minHeight = Math.max(l_minHeight,l_size.minSize);
			if(l_columnsMeasured < l_columnsToMeasure) {
				this._getElementWidth(f_child,l_fixedColumnWidth,l_size);
				l_preferredWidth += l_size.preferredSize;
				l_minWidth += l_size.minSize;
				l_columnsMeasured++;
			}
		}
		l_columnsToMeasure = this._getColumsToMeasure(l_numElementsInLayout);
		if(l_columnsMeasured < l_columnsToMeasure) {
			var l_element = this.get_typicalLayoutElement();
			if(l_element != null) {
				this._getElementHeight(l_element,l_justify,l_size);
				l_preferredHeight = Math.max(l_preferredHeight,l_size.preferredSize);
				l_minHeight = Math.max(l_minHeight,l_size.minSize);
				this._getElementWidth(l_element,l_fixedColumnWidth,l_size);
				l_preferredWidth += l_size.preferredSize * (l_columnsToMeasure - l_columnsMeasured);
				l_minWidth += l_size.minSize * (l_columnsToMeasure - l_columnsMeasured);
				l_columnsMeasured = l_columnsToMeasure;
			}
		}
		if(l_columnsMeasured > 1) {
			var l_hgap = this.target.gap * (l_columnsMeasured - 1);
			l_preferredWidth += l_hgap;
			l_minWidth += l_hgap;
		}
		var l_hPadding = this.target.paddingLeft + this.target.paddingRight;
		var l_vPadding = this.target.paddingTop + this.target.paddingBottom;
		this.target.measuredHeight = Math.ceil(l_preferredHeight + l_vPadding);
		this.target.measuredWidth = Math.ceil(l_preferredWidth + l_hPadding);
		this.target.measuredMinHeight = Math.ceil(l_minHeight + l_vPadding);
		this.target.measuredMinWidth = Math.ceil(l_minWidth + l_hPadding);
		this.target.measuredMaxWidth = 999999;
		this.target.measuredMaxHeight = 999999;
	}
	,updateDisplayList: function(p_unscaledWidth,p_unscaledHeight) {
		if(this.target.children.length == 0 || p_unscaledWidth == 0 || p_unscaledHeight == 0) {
			if(this.target.children.length == 0) {
				this.target.width = Math.ceil(this.target.paddingLeft + this.target.paddingRight);
				this.target.height = Math.ceil(this.target.paddingTop + this.target.paddingBottom);
			}
			return;
		}
		var l_targetWidth = Math.max(0,this.target.width - this.target.paddingLeft - this.target.paddingRight);
		var l_targetHeight = Math.max(0,this.target.height - this.target.paddingTop - this.target.paddingBottom);
		var l_containerHeight = l_targetHeight;
		if(this.target.verticalAlign == tools_spark_framework_layout_interfaces_EVerticalAlign.CONTENT_JUSTIFY) {
			var _g = 0;
			var _g1 = this.target.children;
			while(_g < _g1.length) {
				var f_child = _g1[_g];
				++_g;
				if(f_child == null || f_child.includeInLayout == false) continue;
				var l_layoutElementHeight;
				if(f_child.percentHeight != null) l_layoutElementHeight = tools_spark_framework_layout_layouts_HorizontalLayout._calculatePercentHeight(f_child,l_targetHeight); else l_layoutElementHeight = f_child.get_preferredHeight();
				l_containerHeight = Math.max(l_containerHeight,Math.ceil(l_layoutElementHeight));
			}
		}
		var l_excessWidth = this._distributeWidth(l_targetWidth,l_targetHeight,l_containerHeight);
		var l_vAlign = 0;
		if(this.target.verticalAlign == tools_spark_framework_layout_interfaces_EVerticalAlign.MIDDLE) l_vAlign = .5; else if(this.target.verticalAlign == tools_spark_framework_layout_interfaces_EVerticalAlign.BOTTOM) l_vAlign = 1;
		var l_x = this.target.paddingLeft;
		var l_y0 = this.target.paddingTop;
		var l_maxX = this.target.paddingLeft;
		var l_maxY = this.target.paddingTop;
		if(l_excessWidth > 0 || true) {
			var l_hAlign = this.target.horizontalAlign;
			if(l_hAlign == tools_spark_framework_layout_interfaces_EHorizontalAlign.CENTER) l_x = this.target.paddingLeft + Math.round(l_excessWidth / 2); else if(l_hAlign == tools_spark_framework_layout_interfaces_EHorizontalAlign.RIGHT) l_x = this.target.paddingLeft + l_excessWidth;
		}
		var _g2 = 0;
		var _g11 = this.target.children;
		while(_g2 < _g11.length) {
			var f_child1 = _g11[_g2];
			++_g2;
			if(f_child1 == null || f_child1.includeInLayout == false) continue;
			var l_dx = Math.ceil(f_child1.width);
			var l_dy = Math.ceil(f_child1.height);
			var l_y;
			l_y = l_y0 + (l_containerHeight - l_dy) * l_vAlign;
			if(l_vAlign == 0.5) l_y = Math.round(l_y);
			f_child1.x = l_x;
			f_child1.y = l_y;
			l_maxX = Math.max(l_maxX,l_x + l_dx);
			l_maxY = Math.max(l_maxY,l_y + l_dy);
			l_x += l_dx + this.target.gap;
		}
		this.target.width = Math.ceil(p_unscaledWidth);
		this.target.height = Math.ceil(p_unscaledHeight);
	}
	,__class__: tools_spark_framework_layout_layouts_HorizontalLayout
});
var tools_spark_framework_layout_layouts_TileLayout = function() {
	tools_spark_framework_layout_layouts_ALayoutBase.call(this);
	this.layoutType = "Tile";
};
$hxClasses["tools.spark.framework.layout.layouts.TileLayout"] = tools_spark_framework_layout_layouts_TileLayout;
tools_spark_framework_layout_layouts_TileLayout.__name__ = ["tools","spark","framework","layout","layouts","TileLayout"];
tools_spark_framework_layout_layouts_TileLayout.__super__ = tools_spark_framework_layout_layouts_ALayoutBase;
tools_spark_framework_layout_layouts_TileLayout.prototype = $extend(tools_spark_framework_layout_layouts_ALayoutBase.prototype,{
	_closerToSquare: function(p_colCount1,p_rowCount1,p_colCount2,p_rowCount2) {
		var l_difference1 = Math.abs(p_colCount1 * (this.target.columnWidth + this.target.horizontalGap) - this.target.horizontalGap - p_rowCount1 * (this.target.rowHeight + this.target.verticalGap) + this.target.verticalGap);
		var l_difference2 = Math.abs(p_colCount2 * (this.target.columnWidth + this.target.horizontalGap) - this.target.horizontalGap - p_rowCount2 * (this.target.rowHeight + this.target.verticalGap) + this.target.verticalGap);
		return l_difference1 < l_difference2 || l_difference1 == l_difference2 && p_rowCount1 <= p_rowCount2;
	}
	,_calculateColumnAndRowCount: function(p_width,p_height,p_elementCount) {
		this.target.columnCount = this.target.rowCount = -1;
		if(p_width <= 0) p_width = null;
		if(p_height <= 0) p_height = null;
		if(-1 != this.target.requestedColumnCount || -1 != this.target.requestedRowCount) {
			if(-1 != this.target.requestedRowCount) this.target.rowCount = Std["int"](Math.max(1,this.target.requestedRowCount));
			if(-1 != this.target.requestedColumnCount) this.target.columnCount = Std["int"](Math.max(1,this.target.requestedColumnCount));
		} else if(p_width != null && (this.target.orientation == tools_spark_framework_layout_interfaces_ETileOrientation.ROWS || p_height == null)) {
			if(this.target.columnWidth + this.target.explicitHorizontalGap > 0) this.target.columnCount = Std["int"](Math.max(1,Math.floor((p_width + this.target.explicitHorizontalGap) / (this.target.columnWidth + this.target.explicitHorizontalGap)))); else this.target.columnCount = 1;
		} else if(p_height != null && (this.target.orientation == tools_spark_framework_layout_interfaces_ETileOrientation.COLUMNS || p_width == null)) {
			if(this.target.rowHeight + this.target.explicitVerticalGap > 0) this.target.rowCount = Std["int"](Math.max(1,Math.floor((p_height + this.target.explicitVerticalGap) / (this.target.rowHeight + this.target.explicitVerticalGap)))); else this.target.rowCount = 1;
		} else {
			var l_hGap = this.target.explicitHorizontalGap;
			var l_vGap = this.target.explicitVerticalGap;
			var l_a = Math.max(0,this.target.rowHeight + l_vGap);
			var l_b = l_hGap - l_vGap;
			var l_c = -p_elementCount * (this.target.columnWidth + l_hGap);
			var l_d = l_b * l_b - 4 * l_a * l_c;
			l_d = Math.sqrt(l_d);
			var l_rowCount;
			if(l_a != 0) l_rowCount = (l_b + l_d) / (2 * l_a); else l_rowCount = p_elementCount;
			var l_row1 = Std["int"](Math.max(1,Math.floor(l_rowCount)));
			var l_col1 = Std["int"](Math.max(1,Math.ceil(p_elementCount / l_row1)));
			l_row1 = Std["int"](Math.max(1,Math.ceil(p_elementCount / l_col1)));
			var l_row2 = Std["int"](Math.max(1,Math.ceil(l_rowCount)));
			var l_col2 = Std["int"](Math.max(1,Math.ceil(p_elementCount / l_row2)));
			l_row2 = Std["int"](Math.max(1,Math.ceil(p_elementCount / l_col2)));
			var l_col3 = Std["int"](Math.max(1,Math.floor(p_elementCount / l_rowCount)));
			var l_row3 = Std["int"](Math.max(1,Math.ceil(p_elementCount / l_col3)));
			l_col3 = Std["int"](Math.max(1,Math.ceil(p_elementCount / l_row3)));
			var l_col4 = Std["int"](Math.max(1,Math.ceil(p_elementCount / l_rowCount)));
			var l_row4 = Std["int"](Math.max(1,Math.ceil(p_elementCount / l_col4)));
			l_col4 = Std["int"](Math.max(1,Math.ceil(p_elementCount / l_row4)));
			if(this._closerToSquare(l_col3,l_row3,l_col1,l_row1)) {
				l_col1 = l_col3;
				l_row1 = l_row3;
			}
			if(this._closerToSquare(l_col4,l_row4,l_col2,l_row2)) {
				l_col2 = l_col4;
				l_row2 = l_row4;
			}
			if(this._closerToSquare(l_col1,l_row1,l_col2,l_row2)) {
				this.target.columnCount = l_col1;
				this.target.rowCount = l_row1;
			} else {
				this.target.columnCount = l_col2;
				this.target.rowCount = l_row2;
			}
		}
		if(-1 == this.target.rowCount) this.target.rowCount = Std["int"](Math.max(1,Math.ceil(p_elementCount / this.target.columnCount)));
		if(-1 == this.target.columnCount) this.target.columnCount = Std["int"](Math.max(1,Math.ceil(p_elementCount / this.target.rowCount)));
	}
	,_justifyByGapSize: function(p_totalSize,p_elementSize,p_gap,p_elementCount) {
		if(p_elementSize + p_gap <= 0) return p_gap;
		var l_visibleCount = Std["int"](Math.min(p_elementCount,Math.floor((p_totalSize + p_gap) / (p_elementSize + p_gap))));
		if(l_visibleCount < 1) return p_gap;
		if(l_visibleCount == 1) if(p_elementCount > 1) return Math.max(p_gap,p_totalSize - p_elementSize); else return p_gap;
		return (p_totalSize - l_visibleCount * p_elementSize) / (l_visibleCount - 1);
	}
	,_justifyByElementSize: function(p_totalSize,p_elementSize,p_gap,p_elementCount) {
		var l_elementAndGapSize = p_elementSize + p_gap;
		var l_visibleCount = 0;
		if(l_elementAndGapSize == 0) l_visibleCount = p_elementCount; else l_visibleCount = Std["int"](Math.min(p_elementCount,Math.floor((p_totalSize + p_gap) / l_elementAndGapSize)));
		if(l_visibleCount < 1) return p_elementSize;
		return (p_totalSize - (l_visibleCount - 1) * p_gap) / l_visibleCount;
	}
	,_calculateElementCount: function() {
		if(-1 != this.target.numElementsCached) return this.target.numElementsCached;
		this.target.numElementsCached = this.target.children.length;
		var _g = 0;
		var _g1 = this.target.children;
		while(_g < _g1.length) {
			var f_child = _g1[_g];
			++_g;
			if(f_child == null || f_child.includeInLayout == false) this.target.numElementsCached--;
		}
		return this.target.numElementsCached;
	}
	,_calculateTileSize: function() {
		this.target.columnWidth = this.target.tileWidthCached;
		this.target.rowHeight = this.target.tileHeightCached;
		if(this.target.columnWidth != null && this.target.rowHeight != null) return;
		this.target.columnWidth = this.target.tileWidthCached = this.target.explicitColumnWidth;
		this.target.rowHeight = this.target.tileHeightCached = this.target.explicitRowHeight;
		if(this.target.columnWidth != null && this.target.rowHeight != null) return;
		var l_columnWidth = 0;
		var l_rowHeight = 0;
		this.target.numElementsCached = this.target.children.length;
		var _g = 0;
		var _g1 = this.target.children;
		while(_g < _g1.length) {
			var f_child = _g1[_g];
			++_g;
			if(f_child == null || f_child.includeInLayout == false) {
				this.target.numElementsCached--;
				continue;
			}
			if(this.target.columnWidth == null) l_columnWidth = Math.max(l_columnWidth,f_child.get_preferredWidth());
			if(this.target.rowHeight == null) l_rowHeight = Math.max(l_rowHeight,f_child.get_preferredHeight());
		}
		if(this.target.columnWidth == null) this.target.columnWidth = this.target.tileWidthCached = l_columnWidth;
		if(this.target.rowHeight == null) this.target.rowHeight = this.target.tileHeightCached = l_rowHeight;
	}
	,_updateActualValues: function(p_width,p_height) {
		var l_widthMinusPadding = p_width - this.target.paddingLeft - this.target.paddingRight;
		var l_heightMinusPadding = p_height - this.target.paddingTop - this.target.paddingBottom;
		this._calculateTileSize();
		var l_elementCount = this._calculateElementCount();
		this._calculateColumnAndRowCount(l_widthMinusPadding,l_heightMinusPadding,l_elementCount);
		this.target.horizontalGap = this.target.explicitHorizontalGap;
		this.target.verticalGap = this.target.explicitVerticalGap;
		if(this.target.width != null) {
			var _g = this.target.columnAlign;
			switch(Type.enumIndex(_g)) {
			case 0:
				this.target.horizontalGap = this._justifyByGapSize(l_widthMinusPadding,this.target.columnWidth,this.target.horizontalGap,this.target.columnCount);
				break;
			case 1:
				this.target.columnWidth = this._justifyByElementSize(l_widthMinusPadding,this.target.columnWidth,this.target.horizontalGap,this.target.columnCount);
				break;
			default:
			}
		}
		if(this.target.height != null) {
			var _g1 = this.target.rowAlign;
			switch(Type.enumIndex(_g1)) {
			case 0:
				this.target.verticalGap = this._justifyByGapSize(l_heightMinusPadding,this.target.rowHeight,this.target.verticalGap,this.target.rowCount);
				break;
			case 1:
				this.target.rowHeight = this._justifyByElementSize(l_heightMinusPadding,this.target.rowHeight,this.target.verticalGap,this.target.rowCount);
				break;
			default:
			}
		}
		if(-1 != this.target.requestedColumnCount && -1 != this.target.requestedRowCount) {
			if(this.target.orientation == tools_spark_framework_layout_interfaces_ETileOrientation.ROWS) this.target.rowCount = Std["int"](Math.max(1,Math.ceil(l_elementCount / Math.max(1,this.target.requestedColumnCount)))); else this.target.columnCount = Std["int"](Math.max(1,Math.ceil(l_elementCount / Math.max(1,this.target.requestedRowCount))));
		}
	}
	,_calculateDisplayParameters: function(p_unscaledWidth,p_unscaledHeight) {
		this._updateActualValues(p_unscaledWidth,p_unscaledHeight);
		var l_eltCount = this.target.children.length;
		this.target.visibleStartX = this.target.paddingLeft;
		this.target.visibleStartY = this.target.paddingTop;
		this.target.visibleStartIndex = 0;
		this.target.visibleEndIndex = l_eltCount - 1;
	}
	,_sizeAndPositionElement: function(p_element,p_cellX,p_cellY,p_cellWidth,p_cellHeight) {
		var l_childWidth = null;
		var l_childHeight = null;
		if(this.target.horizontalAlign == tools_spark_framework_layout_interfaces_EHorizontalAlign.JUSTIFY) l_childWidth = p_cellWidth; else if(p_element.percentWidth != null) l_childWidth = Math.round(p_cellWidth * p_element.percentWidth * 0.01); else l_childWidth = p_element.get_preferredWidth();
		if(this.target.verticalAlign == tools_spark_framework_layout_interfaces_EVerticalAlign.JUSTIFY) l_childHeight = p_cellHeight; else if(p_element.percentHeight != null) l_childHeight = Math.round(p_cellHeight * p_element.percentHeight * 0.01); else l_childHeight = p_element.get_preferredHeight();
		var l_maxChildWidth = Math.min(p_element.get_preferredMaxWidth(),p_cellWidth);
		var l_maxChildHeight = Math.min(p_element.get_preferredMaxHeight(),p_cellHeight);
		l_childWidth = Math.max(p_element.get_preferredMinWidth(),Math.min(l_maxChildWidth,l_childWidth));
		l_childHeight = Math.max(p_element.get_preferredMinHeight(),Math.min(l_maxChildHeight,l_childHeight));
		p_element.setActualSize(l_childWidth,l_childHeight);
		var l_x = p_cellX;
		var _g = this.target.horizontalAlign;
		switch(Type.enumIndex(_g)) {
		case 2:
			l_x += p_cellWidth - p_element.width;
			break;
		case 1:
			l_x = p_cellX + Math.floor((p_cellWidth - p_element.width) / 2);
			break;
		default:
		}
		var l_y = p_cellY;
		var _g1 = this.target.verticalAlign;
		switch(Type.enumIndex(_g1)) {
		case 2:
			l_y += p_cellHeight - p_element.height;
			break;
		case 1:
			l_y += Math.floor((p_cellHeight - p_element.height) / 2);
			break;
		default:
		}
		p_element.x = l_x;
		p_element.y = l_y;
	}
	,measure: function() {
		var l_savedColumnCount = this.target.columnCount;
		var l_savedRowCount = this.target.rowCount;
		var l_savedHorizontalGap = this.target.horizontalGap;
		var l_savedVerticalGap = this.target.verticalGap;
		var l_savedColumnWidth = this.target.columnWidth;
		var l_savedRowHeight = this.target.rowHeight;
		this._updateActualValues(this.target.explicitWidth,this.target.explicitHeight);
		var l_columnCount;
		if(this.target.requestedColumnCount != -1) l_columnCount = Std["int"](Math.max(1,this.target.requestedColumnCount)); else l_columnCount = this.target.columnCount;
		var l_rowCount;
		if(this.target.requestedRowCount != -1) l_rowCount = Std["int"](Math.max(1,this.target.requestedRowCount)); else l_rowCount = this.target.rowCount;
		var l_measuredWidth = 0;
		var l_measuredMinWidth = 0;
		var l_measuredHeight = 0;
		var l_measuredMinHeight = 0;
		if(l_columnCount > 0) {
			l_measuredWidth = Math.ceil(l_columnCount * (this.target.columnWidth + this.target.horizontalGap) - this.target.horizontalGap);
			l_measuredMinWidth = Math.ceil(this.target.columnCount * (this.target.columnWidth + this.target.horizontalGap) - this.target.horizontalGap);
		}
		if(l_rowCount > 0) {
			l_measuredHeight = Math.ceil(l_rowCount * (this.target.rowHeight + this.target.verticalGap) - this.target.verticalGap);
			l_measuredMinHeight = Math.ceil(this.target.rowCount * (this.target.rowHeight + this.target.verticalGap) - this.target.verticalGap);
		}
		this.target.numElementsCached = -1;
		var l_hPadding = this.target.paddingLeft + this.target.paddingRight;
		var l_vPadding = this.target.paddingTop + this.target.paddingBottom;
		this.target.measuredWidth = l_measuredWidth + l_hPadding;
		this.target.measuredMinWidth = l_measuredMinWidth + l_hPadding;
		this.target.measuredHeight = l_measuredHeight + l_vPadding;
		this.target.measuredMinHeight = l_measuredMinHeight + l_vPadding;
		this.target.measuredMaxWidth = 999999;
		this.target.measuredMaxHeight = 999999;
		this.target.measuredWidth = 0;
		this.target.measuredMinWidth = 0;
		this.target.requestedColumnCount = Std["int"](Math.max(1,Math.floor((this.target.width + this.target.explicitHorizontalGap) / (this.target.columnWidth + this.target.explicitHorizontalGap))));
		this.target.columnCount = l_savedColumnCount;
		this.target.rowCount = l_savedRowCount;
		this.target.horizontalGap = l_savedHorizontalGap;
		this.target.verticalGap = l_savedVerticalGap;
		this.target.columnWidth = l_savedColumnWidth;
		this.target.rowHeight = l_savedRowHeight;
	}
	,updateDisplayList: function(p_unscaledWidth,p_unscaledHeight) {
		this._calculateDisplayParameters(Std["int"](p_unscaledWidth),Std["int"](p_unscaledHeight));
		var l_xPos = this.target.visibleStartX;
		var l_yPos = this.target.visibleStartY;
		var l_xMajorDelta;
		var l_yMajorDelta;
		var l_xMinorDelta;
		var l_yMinorDelta;
		var l_counter = 0;
		var l_counterLimit;
		if(this.target.orientation == tools_spark_framework_layout_interfaces_ETileOrientation.ROWS) {
			l_counterLimit = this.target.columnCount;
			l_xMajorDelta = this.target.columnWidth + this.target.horizontalGap;
			l_xMinorDelta = 0;
			l_yMajorDelta = 0;
			l_yMinorDelta = this.target.rowHeight + this.target.verticalGap;
		} else {
			l_counterLimit = this.target.rowCount;
			l_xMajorDelta = 0;
			l_xMinorDelta = this.target.columnWidth + this.target.horizontalGap;
			l_yMajorDelta = this.target.rowHeight + this.target.verticalGap;
			l_yMinorDelta = 0;
		}
		var _g = 0;
		var _g1 = this.target.children;
		while(_g < _g1.length) {
			var f_el = _g1[_g];
			++_g;
			if(f_el == null || f_el.includeInLayout == false) continue;
			var l_cellX = Math.round(l_xPos);
			var l_cellY = Math.round(l_yPos);
			var l_cellWidth = Math.round(l_xPos + this.target.columnWidth) - l_cellX;
			var l_cellHeight = Math.round(l_yPos + this.target.rowHeight) - l_cellY;
			this._sizeAndPositionElement(f_el,l_cellX,l_cellY,l_cellWidth,l_cellHeight);
			l_xPos += l_xMajorDelta;
			l_yPos += l_yMajorDelta;
			if(++l_counter >= l_counterLimit) {
				l_counter = 0;
				if(this.target.orientation == tools_spark_framework_layout_interfaces_ETileOrientation.ROWS) {
					l_xPos = this.target.paddingLeft;
					l_yPos += l_yMinorDelta;
				} else {
					l_xPos += l_xMinorDelta;
					l_yPos = this.target.paddingTop;
				}
			}
		}
		var l_hPadding = this.target.paddingLeft + this.target.paddingRight;
		var l_vPadding = this.target.paddingTop + this.target.paddingBottom;
		this.target.width = Math.ceil(p_unscaledWidth);
		this.target.height = Math.ceil(p_unscaledHeight);
		this.target.tileWidthCached = this.target.tileHeightCached = null;
		this.target.numElementsCached = -1;
	}
	,__class__: tools_spark_framework_layout_layouts_TileLayout
});
var tools_spark_framework_layout_layouts_VerticalLayout = function() {
	tools_spark_framework_layout_layouts_ALayoutBase.call(this);
	this.layoutType = "Vertical";
};
$hxClasses["tools.spark.framework.layout.layouts.VerticalLayout"] = tools_spark_framework_layout_layouts_VerticalLayout;
tools_spark_framework_layout_layouts_VerticalLayout.__name__ = ["tools","spark","framework","layout","layouts","VerticalLayout"];
tools_spark_framework_layout_layouts_VerticalLayout._pinBetween = function(p_val,p_min,p_max) {
	return Math.min(p_max,Math.max(p_min,p_val));
};
tools_spark_framework_layout_layouts_VerticalLayout._calculatePercentWidth = function(p_layoutElement,p_width) {
	var l_percentWidth;
	l_percentWidth = tools_spark_framework_layout_layouts_VerticalLayout._pinBetween(Math.min(Math.round(p_layoutElement.percentWidth * 0.01 * p_width),p_width),p_layoutElement.get_preferredMinWidth(),p_layoutElement.get_preferredMaxWidth());
	return l_percentWidth;
};
tools_spark_framework_layout_layouts_VerticalLayout._sizeLayoutElement = function(p_layoutElement,p_width,p_horizontalAlign,p_restrictedWidth,p_height,p_variableRowHeight,p_rowHeight) {
	var l_newWidth = null;
	if(p_horizontalAlign == tools_spark_framework_layout_interfaces_EHorizontalAlign.JUSTIFY || p_horizontalAlign == tools_spark_framework_layout_interfaces_EHorizontalAlign.CONTENT_JUSTIFY) l_newWidth = p_restrictedWidth; else if(p_layoutElement.percentWidth != null) l_newWidth = tools_spark_framework_layout_layouts_VerticalLayout._calculatePercentWidth(p_layoutElement,p_width);
	if(p_variableRowHeight) p_layoutElement.setActualSize(l_newWidth,p_height); else p_layoutElement.setActualSize(l_newWidth,p_rowHeight);
};
tools_spark_framework_layout_layouts_VerticalLayout.__super__ = tools_spark_framework_layout_layouts_ALayoutBase;
tools_spark_framework_layout_layouts_VerticalLayout.prototype = $extend(tools_spark_framework_layout_layouts_ALayoutBase.prototype,{
	_getRowsToMeasure: function(p_numElementsInLayout) {
		var l_rowsToMeasure;
		if(this.target.requestedRowCount != -1) l_rowsToMeasure = this.target.requestedRowCount; else {
			l_rowsToMeasure = p_numElementsInLayout;
			if(this.target.requestedMaxRowCount != -1) l_rowsToMeasure = Std["int"](Math.min(this.target.requestedMaxRowCount,l_rowsToMeasure));
			if(this.target.requestedMinRowCount != -1) l_rowsToMeasure = Std["int"](Math.max(this.target.requestedMinRowCount,l_rowsToMeasure));
		}
		return l_rowsToMeasure;
	}
	,_getElementWidth: function(p_element,p_justify,p_result) {
		var l_elementPreferredWidth = Math.ceil(p_element.get_preferredWidth());
		var l_flexibleWidth = p_element.percentWidth != null || p_justify;
		var l_elementMinWidth;
		if(l_flexibleWidth) l_elementMinWidth = Math.ceil(p_element.get_preferredMinWidth()); else l_elementMinWidth = l_elementPreferredWidth;
		p_result.preferredSize = l_elementPreferredWidth;
		p_result.minSize = l_elementMinWidth;
	}
	,_getElementHeight: function(p_element,p_fixedRowHeight,p_result) {
		var l_elementPreferredHeight;
		if(p_fixedRowHeight == null) l_elementPreferredHeight = Math.ceil(p_element.get_preferredHeight()); else l_elementPreferredHeight = p_fixedRowHeight;
		var l_flexibleHeight = p_element.percentHeight != null;
		var l_elementMinHeight;
		if(l_flexibleHeight) l_elementMinHeight = Math.ceil(p_element.get_preferredMinHeight()); else l_elementMinHeight = l_elementPreferredHeight;
		p_result.preferredSize = l_elementPreferredHeight;
		p_result.minSize = l_elementMinHeight;
	}
	,_distributeHeight: function(p_width,p_height,p_restrictedWidth) {
		var l_spaceToDistribute = p_height;
		var l_totalPercentHeight = 0;
		var l_childInfoArray = [];
		var l_childInfo;
		var l_layoutElement;
		var l_rh;
		if(this.target.variableRowHeight) l_rh = 0; else l_rh = Math.ceil(this.target.rowHeight);
		var l_totalCount = this.target.children.length;
		var _g = 0;
		var _g1 = this.target.children;
		while(_g < _g1.length) {
			var f_child = _g1[_g];
			++_g;
			if(f_child == null || f_child.includeInLayout == false) {
				l_totalCount--;
				continue;
			}
			if(f_child.percentHeight != null && this.target.variableRowHeight) {
				l_totalPercentHeight += f_child.percentHeight;
				l_childInfo = new tools_spark_framework_layout_helpers_ChildInfo();
				l_childInfo.layoutElement = f_child;
				l_childInfo.percent = f_child.percentHeight;
				l_childInfo.min = f_child.get_preferredMinHeight();
				l_childInfo.max = f_child.get_preferredMaxHeight();
				l_childInfoArray.push(l_childInfo);
			} else {
				tools_spark_framework_layout_layouts_VerticalLayout._sizeLayoutElement(f_child,p_width,this.target.horizontalAlign,p_restrictedWidth,null,this.target.variableRowHeight,l_rh);
				l_spaceToDistribute -= Math.ceil(f_child.height);
			}
		}
		if(l_totalCount > 1) l_spaceToDistribute -= (l_totalCount - 1) * this.target.gap;
		if(l_totalPercentHeight != 0) {
			tools_spark_framework_layout_helpers_LayoutHelper.flexChildrenProportionally(p_height,l_spaceToDistribute,l_totalPercentHeight,l_childInfoArray);
			var l_roundOff = 0;
			var _g2 = 0;
			while(_g2 < l_childInfoArray.length) {
				var f_childInfo = l_childInfoArray[_g2];
				++_g2;
				var l_childSize = Math.round(f_childInfo.size + l_roundOff);
				l_roundOff += f_childInfo.size - l_childSize;
				tools_spark_framework_layout_layouts_VerticalLayout._sizeLayoutElement(f_childInfo.layoutElement,p_width,this.target.horizontalAlign,p_restrictedWidth,l_childSize,this.target.variableRowHeight,l_rh);
				l_spaceToDistribute -= l_childSize;
			}
		}
		return l_spaceToDistribute;
	}
	,measure: function() {
		var l_size = new tools_spark_framework_layout_helpers_SizesAndLimit();
		var l_justify = this.target.horizontalAlign == tools_spark_framework_layout_interfaces_EHorizontalAlign.JUSTIFY;
		var l_numElements = this.target.children.length;
		var l_numElementsInLayout = l_numElements;
		var l_requestedRowCount = this.target.requestedRowCount;
		var l_rowsMeasured = 0;
		var l_preferredHeight = 0;
		var l_preferredWidth = 0;
		var l_minHeight = 0;
		var l_minWidth = 0;
		var l_fixedRowHeight = null;
		if(!this.target.variableRowHeight) {
			if(this.target.rowHeight == null) l_fixedRowHeight = this.get_typicalLayoutElement().get_preferredHeight(); else l_fixedRowHeight = this.target.rowHeight;
		}
		var l_rowsToMeasure = this._getRowsToMeasure(l_numElementsInLayout);
		var _g = 0;
		var _g1 = this.target.children;
		while(_g < _g1.length) {
			var f_child = _g1[_g];
			++_g;
			if(f_child == null || f_child.includeInLayout == false) {
				l_numElementsInLayout--;
				continue;
			}
			if(l_rowsMeasured < l_rowsToMeasure) {
				this._getElementHeight(f_child,l_fixedRowHeight,l_size);
				l_preferredHeight += l_size.preferredSize;
				l_minHeight += l_size.minSize;
				l_rowsMeasured++;
			}
			this._getElementWidth(f_child,l_justify,l_size);
			l_preferredWidth = Math.max(l_preferredWidth,l_size.preferredSize);
			l_minWidth = Math.max(l_minWidth,l_size.minSize);
		}
		l_rowsToMeasure = this._getRowsToMeasure(l_numElementsInLayout);
		if(l_rowsMeasured < l_rowsToMeasure) {
			var l_element = this.get_typicalLayoutElement();
			if(l_element != null) {
				this._getElementHeight(l_element,l_fixedRowHeight,l_size);
				l_preferredHeight += l_size.preferredSize * (l_rowsToMeasure - l_rowsMeasured);
				l_minHeight += l_size.minSize * (l_rowsToMeasure - l_rowsMeasured);
				this._getElementWidth(l_element,l_justify,l_size);
				l_preferredWidth = Math.max(l_preferredWidth,l_size.preferredSize);
				l_minWidth = Math.max(l_minWidth,l_size.minSize);
				l_rowsMeasured = l_rowsToMeasure;
			}
		}
		if(l_rowsMeasured > 1) {
			var l_vgap = this.target.gap * (l_rowsMeasured - 1);
			l_preferredHeight += l_vgap;
			l_minHeight += l_vgap;
		}
		var l_hPadding = this.target.paddingLeft + this.target.paddingRight;
		var l_vPadding = this.target.paddingTop + this.target.paddingBottom;
		this.target.measuredHeight = Math.ceil(l_preferredHeight + l_vPadding);
		this.target.measuredWidth = Math.ceil(l_preferredWidth + l_hPadding);
		this.target.measuredMinHeight = Math.ceil(l_minHeight + l_vPadding);
		this.target.measuredMinWidth = Math.ceil(l_minWidth + l_hPadding);
		this.target.measuredMaxWidth = 999999;
		this.target.measuredMaxHeight = 999999;
	}
	,updateDisplayList: function(p_unscaledWidth,p_unscaledHeight) {
		if(this.target.children.length == 0 || p_unscaledWidth == 0 || p_unscaledHeight == 0) {
			if(this.target.children.length == 0) {
				this.target.width = Math.ceil(this.target.paddingLeft + this.target.paddingRight);
				this.target.height = Math.ceil(this.target.paddingTop + this.target.paddingBottom);
			}
			return;
		}
		var l_targetWidth = Math.max(0,this.target.width - this.target.paddingLeft - this.target.paddingRight);
		var l_targetHeight = Math.max(0,this.target.height - this.target.paddingTop - this.target.paddingBottom);
		var l_containerWidth = l_targetWidth;
		if(this.target.horizontalAlign == tools_spark_framework_layout_interfaces_EHorizontalAlign.CONTENT_JUSTIFY) {
			var _g = 0;
			var _g1 = this.target.children;
			while(_g < _g1.length) {
				var f_child = _g1[_g];
				++_g;
				if(f_child == null || f_child.includeInLayout == false) continue;
				var l_layoutElementWidth;
				if(f_child.percentWidth != null) l_layoutElementWidth = tools_spark_framework_layout_layouts_VerticalLayout._calculatePercentWidth(f_child,l_targetWidth); else l_layoutElementWidth = f_child.get_preferredWidth();
				l_containerWidth = Math.max(l_containerWidth,Math.ceil(l_layoutElementWidth));
			}
		}
		var l_excessHeight = this._distributeHeight(l_targetWidth,l_targetHeight,l_containerWidth);
		var l_hAlign = 0;
		if(this.target.horizontalAlign == tools_spark_framework_layout_interfaces_EHorizontalAlign.CENTER) l_hAlign = .5; else if(this.target.horizontalAlign == tools_spark_framework_layout_interfaces_EHorizontalAlign.RIGHT) l_hAlign = 1;
		var l_x0 = this.target.paddingLeft;
		var l_y = this.target.paddingTop;
		var l_maxX = this.target.paddingLeft;
		var l_maxY = this.target.paddingTop;
		if(l_excessHeight > 0 || true) {
			var l_vAlign = this.target.verticalAlign;
			if(l_vAlign == tools_spark_framework_layout_interfaces_EVerticalAlign.MIDDLE) l_y = this.target.paddingTop + Math.round(l_excessHeight / 2); else if(l_vAlign == tools_spark_framework_layout_interfaces_EVerticalAlign.BOTTOM) l_y = this.target.paddingTop + l_excessHeight;
		}
		var _g2 = 0;
		var _g11 = this.target.children;
		while(_g2 < _g11.length) {
			var f_child1 = _g11[_g2];
			++_g2;
			if(f_child1 == null || f_child1.includeInLayout == false) continue;
			var l_dx = Math.ceil(f_child1.width);
			var l_dy = Math.ceil(f_child1.height);
			var l_x = l_x0 + (l_containerWidth - l_dx) * l_hAlign;
			if(l_hAlign == 0.5) l_x = Math.round(l_x);
			f_child1.x = l_x;
			f_child1.y = l_y;
			l_maxX = Math.max(l_maxX,l_x + l_dx);
			l_maxY = Math.max(l_maxY,l_y + l_dy);
			l_y += l_dy + this.target.gap;
		}
		this.target.width = Math.ceil(p_unscaledWidth);
		this.target.height = Math.ceil(p_unscaledHeight);
	}
	,__class__: tools_spark_framework_layout_layouts_VerticalLayout
});
var tools_spark_framework_layout_managers_LayoutManager = function(p_rootLayoutElement) {
	this.rootLayoutElement = p_rootLayoutElement;
	this.validated = false;
};
$hxClasses["tools.spark.framework.layout.managers.LayoutManager"] = tools_spark_framework_layout_managers_LayoutManager;
tools_spark_framework_layout_managers_LayoutManager.__name__ = ["tools","spark","framework","layout","managers","LayoutManager"];
tools_spark_framework_layout_managers_LayoutManager.prototype = {
	validate: function() {
		if(!this.validated) {
			tools_spark_Console.log("Validating Layout...");
			this.measure(this.rootLayoutElement);
			this.updateDisplayList(this.rootLayoutElement);
			this.updateRealObjects(this.rootLayoutElement);
			this.validated = true;
		}
	}
	,getViewGroupByGameEntity: function(p_gameEntity,p_Group) {
		if(p_Group == null) p_Group = this.rootLayoutElement;
		if(p_Group.layoutableEntity == p_gameEntity) return p_Group;
		var _g = 0;
		var _g1 = p_Group.children;
		while(_g < _g1.length) {
			var f_child = _g1[_g];
			++_g;
			if(f_child.layoutableInstanceType != "Entity") {
				var l_found = this.getViewGroupByGameEntity(p_gameEntity,f_child);
				if(l_found != null) return l_found;
			}
		}
		return null;
	}
	,updateRealObjects: function(p_Group,p_parentsX,p_parentsY,p_parentView) {
		if(p_parentsY == null) p_parentsY = 0;
		if(p_parentsX == null) p_parentsX = 0;
		var l_view2_5D = p_parentView;
		if(p_Group.layoutableInstanceType == "View") {
			if(p_Group.layoutableEntity.getState("renderer") == "3D") {
				var l_view3D = p_Group.layoutableInstance;
				l_view3D.x = p_Group.x + p_parentsX;
				l_view3D.y = p_Group.y + p_parentsY;
				l_view3D.width = p_Group.width;
				l_view3D.height = p_Group.height;
			} else {
				l_view2_5D = p_Group.layoutableInstance;
				l_view2_5D.setPosSize(p_Group.x + p_parentsX,p_Group.y + p_parentsY,p_Group.width,p_Group.height);
			}
		} else if(p_Group.layoutableInstanceType == "Entity") {
			var l_entity2_5D = p_Group.layoutableInstance;
			l_entity2_5D.setPosSize(p_Group.x,p_Group.y,p_Group.width,p_Group.height,l_view2_5D);
		}
		var _g = 0;
		var _g1 = p_Group.children;
		while(_g < _g1.length) {
			var f_child = _g1[_g];
			++_g;
			this.updateRealObjects(f_child,p_Group.x + p_parentsX,p_Group.y + p_parentsY,l_view2_5D);
		}
	}
	,measure: function(p_Group) {
		var _g = 0;
		var _g1 = p_Group.children;
		while(_g < _g1.length) {
			var f_child = _g1[_g];
			++_g;
			this.measure(f_child);
		}
		p_Group.measure();
	}
	,updateDisplayList: function(p_Group) {
		p_Group.updateDisplayList(p_Group.get_preferredWidth(),p_Group.get_preferredHeight());
		var _g = 0;
		var _g1 = p_Group.children;
		while(_g < _g1.length) {
			var f_child = _g1[_g];
			++_g;
			this.updateDisplayList(f_child);
		}
	}
	,__class__: tools_spark_framework_layout_managers_LayoutManager
};
var tools_spark_framework_platform_html_Graphics = function() { };
$hxClasses["tools.spark.framework.platform.html.Graphics"] = tools_spark_framework_platform_html_Graphics;
tools_spark_framework_platform_html_Graphics.__name__ = ["tools","spark","framework","platform","html","Graphics"];
tools_spark_framework_platform_html_Graphics.init = function() {
	tools_spark_framework_platform_html_flambe2_$5_Subgraphics.init();
};
tools_spark_framework_platform_html_Graphics.createDisplayRenderers = function() {
	tools_spark_framework_platform_html_flambe2_$5_Subgraphics.createDisplayRenderers();
	var v = new tools_spark_sliced_services_std_display_renderers_core_platform_html_NativeControlsHtmlRenderer();
	tools_spark_sliced_core_Sliced.display.platformRendererSet.set("NativeControls",v);
	v;
};
var tools_spark_framework_platform_html_flambe2_$5_Subgraphics = function() { };
$hxClasses["tools.spark.framework.platform.html.flambe2_5.Subgraphics"] = tools_spark_framework_platform_html_flambe2_$5_Subgraphics;
tools_spark_framework_platform_html_flambe2_$5_Subgraphics.__name__ = ["tools","spark","framework","platform","html","flambe2_5","Subgraphics"];
tools_spark_framework_platform_html_flambe2_$5_Subgraphics.createDisplayRenderers = function() {
	var v = new tools_spark_sliced_services_std_display_renderers_core_platform_html_Flambe2_$5DHtmlRenderer();
	tools_spark_sliced_core_Sliced.display.platformRendererSet.set("2D",v);
	v;
};
tools_spark_framework_platform_html_flambe2_$5_Subgraphics.init = function() {
	tools_spark_framework_platform_html_flambe2_$5_Subgraphics._flambeDisplaySystem = flambe_platform_html_HtmlPlatform.instance.getRenderer();
};
tools_spark_framework_platform_html_flambe2_$5_Subgraphics.onRender = function() {
	tools_spark_framework_platform_html_flambe2_$5_Subgraphics._flambeDisplaySystem.willRender();
	if(tools_spark_sliced_core_Sliced.display != null) {
		if(tools_spark_sliced_core_Sliced.display.projectActiveSpaceReference != null) {
			if(tools_spark_sliced_core_Sliced.display.projectActiveSpaceReference.activeStageReference != null) {
				var _g = 0;
				var _g1 = tools_spark_sliced_core_Sliced.display.projectActiveSpaceReference.activeStageReference.activeViewReferences;
				while(_g < _g1.length) {
					var activeViewReference = _g1[_g];
					++_g;
					activeViewReference.renderer.renderView(activeViewReference.viewEntity);
				}
			}
		}
	}
	tools_spark_framework_platform_html_flambe2_$5_Subgraphics._flambeDisplaySystem.didRender();
};
var tools_spark_sliced_interfaces_IService = function() { };
$hxClasses["tools.spark.sliced.interfaces.IService"] = tools_spark_sliced_interfaces_IService;
tools_spark_sliced_interfaces_IService.__name__ = ["tools","spark","sliced","interfaces","IService"];
var tools_spark_sliced_core_AService = function() {
};
$hxClasses["tools.spark.sliced.core.AService"] = tools_spark_sliced_core_AService;
tools_spark_sliced_core_AService.__name__ = ["tools","spark","sliced","core","AService"];
tools_spark_sliced_core_AService.__interfaces__ = [tools_spark_sliced_interfaces_IService];
tools_spark_sliced_core_AService.prototype = {
	__class__: tools_spark_sliced_core_AService
};
var tools_spark_sliced_interfaces_IServiceFactory = function() { };
$hxClasses["tools.spark.sliced.interfaces.IServiceFactory"] = tools_spark_sliced_interfaces_IServiceFactory;
tools_spark_sliced_interfaces_IServiceFactory.__name__ = ["tools","spark","sliced","interfaces","IServiceFactory"];
var tools_spark_sliced_core_ServiceFactory = function() {
	this._init();
};
$hxClasses["tools.spark.sliced.core.ServiceFactory"] = tools_spark_sliced_core_ServiceFactory;
tools_spark_sliced_core_ServiceFactory.__name__ = ["tools","spark","sliced","core","ServiceFactory"];
tools_spark_sliced_core_ServiceFactory.__interfaces__ = [tools_spark_sliced_interfaces_IServiceFactory];
tools_spark_sliced_core_ServiceFactory.prototype = {
	_init: function() {
		this._createServices();
	}
	,_createServices: function() {
		var l_soundService = this._reflectService(tools_spark_framework_config_ENodeType.SOUND_SERVICE);
		var l_logicService = this._reflectService(tools_spark_framework_config_ENodeType.LOGIC_SERVICE);
		var l_inputService = this._reflectService(tools_spark_framework_config_ENodeType.INPUT_SERVICE);
		var l_commsService = this._reflectService(tools_spark_framework_config_ENodeType.COMMUNICATIONS_SERVICE);
		var l_eventService = this._reflectService(tools_spark_framework_config_ENodeType.EVENT_SERVICE);
		var l_displayService = this._reflectService(tools_spark_framework_config_ENodeType.DISPLAY_SERVICE);
		tools_spark_sliced_core_Sliced.assignServices(l_soundService,l_logicService,l_inputService,l_commsService,l_eventService,l_displayService);
		tools_spark_sliced_core_Sliced.logic.createInterpreters();
	}
	,_reflectService: function(p_slicedService) {
		var l_classPath = tools_spark_framework_Project.main.sliced.get(p_slicedService);
		return Type.createInstance(Type.resolveClass(l_classPath),[]);
	}
	,__class__: tools_spark_sliced_core_ServiceFactory
};
var tools_spark_sliced_core_Sliced = $hx_exports.Sliced = function() { };
$hxClasses["tools.spark.sliced.core.Sliced"] = tools_spark_sliced_core_Sliced;
tools_spark_sliced_core_Sliced.__name__ = ["tools","spark","sliced","core","Sliced"];
tools_spark_sliced_core_Sliced.init = function() {
	var l_serviceFactory = new tools_spark_sliced_core_ServiceFactory();
};
tools_spark_sliced_core_Sliced.assignServices = function(p_sound,p_logic,p_input,p_comms,p_event,p_display) {
	tools_spark_Console.log("Init Core (S.L.I.C.E.D.)...");
	tools_spark_sliced_core_Sliced.sound = p_sound;
	tools_spark_sliced_core_Sliced.logic = p_logic;
	tools_spark_sliced_core_Sliced.input = p_input;
	tools_spark_sliced_core_Sliced.comms = p_comms;
	tools_spark_sliced_core_Sliced.event = p_event;
	tools_spark_sliced_core_Sliced.display = p_display;
};
tools_spark_sliced_core_Sliced.update = function(p_dt) {
	tools_spark_sliced_core_Sliced.dt = p_dt;
	tools_spark_sliced_core_Sliced.input.update();
	tools_spark_sliced_core_Sliced.event.update();
	tools_spark_sliced_core_Sliced.logic.update();
	tools_spark_sliced_core_Sliced.display.update();
	tools_spark_sliced_core_Sliced.comms.update();
};
var tools_spark_sliced_interfaces_IComms = function() { };
$hxClasses["tools.spark.sliced.interfaces.IComms"] = tools_spark_sliced_interfaces_IComms;
tools_spark_sliced_interfaces_IComms.__name__ = ["tools","spark","sliced","interfaces","IComms"];
tools_spark_sliced_interfaces_IComms.__interfaces__ = [tools_spark_sliced_interfaces_IService];
tools_spark_sliced_interfaces_IComms.prototype = {
	__class__: tools_spark_sliced_interfaces_IComms
};
var tools_spark_sliced_interfaces_IDisplay = function() { };
$hxClasses["tools.spark.sliced.interfaces.IDisplay"] = tools_spark_sliced_interfaces_IDisplay;
tools_spark_sliced_interfaces_IDisplay.__name__ = ["tools","spark","sliced","interfaces","IDisplay"];
tools_spark_sliced_interfaces_IDisplay.__interfaces__ = [tools_spark_sliced_interfaces_IService];
tools_spark_sliced_interfaces_IDisplay.prototype = {
	__class__: tools_spark_sliced_interfaces_IDisplay
};
var tools_spark_sliced_interfaces_IEvent = function() { };
$hxClasses["tools.spark.sliced.interfaces.IEvent"] = tools_spark_sliced_interfaces_IEvent;
tools_spark_sliced_interfaces_IEvent.__name__ = ["tools","spark","sliced","interfaces","IEvent"];
tools_spark_sliced_interfaces_IEvent.__interfaces__ = [tools_spark_sliced_interfaces_IService];
tools_spark_sliced_interfaces_IEvent.prototype = {
	__class__: tools_spark_sliced_interfaces_IEvent
};
var tools_spark_sliced_interfaces_IInput = function() { };
$hxClasses["tools.spark.sliced.interfaces.IInput"] = tools_spark_sliced_interfaces_IInput;
tools_spark_sliced_interfaces_IInput.__name__ = ["tools","spark","sliced","interfaces","IInput"];
tools_spark_sliced_interfaces_IInput.__interfaces__ = [tools_spark_sliced_interfaces_IService];
tools_spark_sliced_interfaces_IInput.prototype = {
	__class__: tools_spark_sliced_interfaces_IInput
};
var tools_spark_sliced_interfaces_ILogic = function() { };
$hxClasses["tools.spark.sliced.interfaces.ILogic"] = tools_spark_sliced_interfaces_ILogic;
tools_spark_sliced_interfaces_ILogic.__name__ = ["tools","spark","sliced","interfaces","ILogic"];
tools_spark_sliced_interfaces_ILogic.__interfaces__ = [tools_spark_sliced_interfaces_IService];
tools_spark_sliced_interfaces_ILogic.prototype = {
	__class__: tools_spark_sliced_interfaces_ILogic
};
var tools_spark_sliced_interfaces_ISound = function() { };
$hxClasses["tools.spark.sliced.interfaces.ISound"] = tools_spark_sliced_interfaces_ISound;
tools_spark_sliced_interfaces_ISound.__name__ = ["tools","spark","sliced","interfaces","ISound"];
tools_spark_sliced_interfaces_ISound.__interfaces__ = [tools_spark_sliced_interfaces_IService];
tools_spark_sliced_interfaces_ISound.prototype = {
	__class__: tools_spark_sliced_interfaces_ISound
};
var tools_spark_sliced_services_std_comms_core_Comms = function() {
	tools_spark_sliced_core_AService.call(this);
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.comms.core.Comms"] = tools_spark_sliced_services_std_comms_core_Comms;
tools_spark_sliced_services_std_comms_core_Comms.__name__ = ["tools","spark","sliced","services","std","comms","core","Comms"];
tools_spark_sliced_services_std_comms_core_Comms.__interfaces__ = [tools_spark_sliced_interfaces_IComms];
tools_spark_sliced_services_std_comms_core_Comms.__super__ = tools_spark_sliced_core_AService;
tools_spark_sliced_services_std_comms_core_Comms.prototype = $extend(tools_spark_sliced_core_AService.prototype,{
	_init: function() {
		tools_spark_Console.log("Init Comms std Service...");
		this._socket = new tools_spark_sliced_services_std_comms_sockets_core_pomelo_platform_html5_websocket_Socket();
		this._requestsData = new haxe_ds_StringMap();
		this._serverEventsData = new haxe_ds_StringMap();
		this.isConnected = false;
		this._file_requestsData = new haxe_ds_StringMap();
		this.file_isConnected = false;
	}
	,update: function() {
		this._requestsData = new haxe_ds_StringMap();
		this._serverEventsData = new haxe_ds_StringMap();
		this._file_requestsData = new haxe_ds_StringMap();
	}
	,getRequestData: function(p_requestName) {
		return this._requestsData.get(p_requestName);
	}
	,getServerEventData: function(p_serverEventName) {
		return this._serverEventsData.get(p_serverEventName);
	}
	,connectTo: function(p_hostname,p_port,p_serverIdentifier,p_gameEntity) {
		var _g = this;
		if(p_serverIdentifier == null) p_serverIdentifier = p_hostname + ":" + p_port;
		var l_connectToCallback = function() {
			_g.isConnected = true;
			_g.connectedServerName = p_serverIdentifier;
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_CONNECTED,p_gameEntity,p_serverIdentifier);
		};
		this._socket.init(p_hostname,p_port,null,l_connectToCallback);
	}
	,request: function(p_remoteRoute,p_message,p_requestIdentifier,p_gameEntity) {
		var _g = this;
		if(p_requestIdentifier == null) p_requestIdentifier = p_remoteRoute;
		var l_requestCallback = function(p_data) {
			var v = p_data;
			_g._requestsData.set(p_requestIdentifier,v);
			v;
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_REQUEST,p_gameEntity,p_requestIdentifier);
		};
		this._socket.request(p_remoteRoute,p_message,l_requestCallback);
	}
	,disconnect: function() {
		this._socket.disconnect();
		this.isConnected = false;
		this.connectedServerName = null;
	}
	,notify: function(p_route,p_msg) {
		this._socket.notify(p_route,p_msg);
	}
	,addServerEvent: function(p_serverEventName,p_serverEventIdentifier,p_gameEntity) {
		var _g = this;
		if(p_serverEventIdentifier == null) p_serverEventIdentifier = p_serverEventName;
		var l_serverEventCallback = function(p_data) {
			if(!_g._serverEventsData.exists(p_serverEventIdentifier)) {
				var v = [];
				_g._serverEventsData.set(p_serverEventIdentifier,v);
				v;
			}
			_g._serverEventsData.get(p_serverEventIdentifier).push(p_data);
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_SERVER_EVENT,p_gameEntity,p_serverEventIdentifier);
		};
		this._socket.on(p_serverEventName,l_serverEventCallback);
	}
	,file_connectTo: function(p_hostname,p_port,p_serverIdentifier,p_gameEntity) {
		var _g = this;
		if(this.file_isConnected) tools_spark_Console.warn("Attempting to connect to file server: File Transfer already connected. Disconnect first."); else {
			if(p_serverIdentifier == null) p_serverIdentifier = p_hostname + ":" + p_port;
			var l_connectToCallback = function() {
				_g.file_isConnected = true;
				_g.file_connectedServerName = p_serverIdentifier;
				tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.FILETRANSFER_CONNECTED,p_gameEntity,p_serverIdentifier);
			};
			this._fileTransfer = new tools_spark_sliced_services_std_comms_filetransfer_core_platform_html5_websocket_binaryjs_FileTransfer("ws://" + p_hostname + ":" + p_port);
			this._fileTransfer.onConnected(l_connectToCallback);
		}
	}
	,file_getSendFileRequestData: function(p_fileRequestName) {
		return this._file_requestsData.get(p_fileRequestName);
	}
	,file_disconnect: function() {
		this._fileTransfer.disconnect();
		this.file_isConnected = false;
		this._fileTransfer = null;
		this.file_connectedServerName = null;
	}
	,file_sendFileRequest: function(p_fileReference,p_fileMeta,p_fileRequestIdentifier,p_gameEntity) {
		var _g = this;
		if(!this.file_isConnected) tools_spark_Console.warn("Attempting to send a file: File Transfer is not connected."); else {
			if(p_fileRequestIdentifier == null) p_fileRequestIdentifier = p_fileMeta.name;
			var clsr_progressBytes = 0;
			var l_requestCallback = function(p_data) {
				clsr_progressBytes += p_data.length;
				p_data.progress = clsr_progressBytes / p_fileMeta.size;
				p_data.progressPercent = Math.round(clsr_progressBytes / p_fileMeta.size * 100);
				if(!_g._file_requestsData.exists(p_fileRequestIdentifier)) {
					var v = [];
					_g._file_requestsData.set(p_fileRequestIdentifier,v);
					v;
				}
				_g._file_requestsData.get(p_fileRequestIdentifier).push(p_data);
				tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.FILETRANSFER_SENDREQUEST,p_gameEntity,p_fileRequestIdentifier);
			};
			this._fileTransfer.sendFile(p_fileReference,p_fileMeta,l_requestCallback);
		}
	}
	,__class__: tools_spark_sliced_services_std_comms_core_Comms
});
var tools_spark_sliced_services_std_comms_filetransfer_interfaces_IFileTransfer = function() { };
$hxClasses["tools.spark.sliced.services.std.comms.filetransfer.interfaces.IFileTransfer"] = tools_spark_sliced_services_std_comms_filetransfer_interfaces_IFileTransfer;
tools_spark_sliced_services_std_comms_filetransfer_interfaces_IFileTransfer.__name__ = ["tools","spark","sliced","services","std","comms","filetransfer","interfaces","IFileTransfer"];
tools_spark_sliced_services_std_comms_filetransfer_interfaces_IFileTransfer.prototype = {
	__class__: tools_spark_sliced_services_std_comms_filetransfer_interfaces_IFileTransfer
};
var tools_spark_sliced_services_std_comms_filetransfer_core_platform_html5_websocket_binaryjs_FileTransfer = function(p_address) {
	this._binaryJs = new BinaryClient(p_address);
};
$hxClasses["tools.spark.sliced.services.std.comms.filetransfer.core.platform.html5.websocket.binaryjs.FileTransfer"] = tools_spark_sliced_services_std_comms_filetransfer_core_platform_html5_websocket_binaryjs_FileTransfer;
tools_spark_sliced_services_std_comms_filetransfer_core_platform_html5_websocket_binaryjs_FileTransfer.__name__ = ["tools","spark","sliced","services","std","comms","filetransfer","core","platform","html5","websocket","binaryjs","FileTransfer"];
tools_spark_sliced_services_std_comms_filetransfer_core_platform_html5_websocket_binaryjs_FileTransfer.__interfaces__ = [tools_spark_sliced_services_std_comms_filetransfer_interfaces_IFileTransfer];
tools_spark_sliced_services_std_comms_filetransfer_core_platform_html5_websocket_binaryjs_FileTransfer.prototype = {
	onConnected: function(p_callback) {
		this._binaryJs.on("open",p_callback);
	}
	,disconnect: function() {
		this._binaryJs.close();
		this._binaryJs = null;
	}
	,sendFile: function(p_fileReference,p_fileMeta,p_callBack) {
		var l_stream = this._binaryJs.send(p_fileReference,p_fileMeta);
		l_stream.on("data",p_callBack);
	}
	,__class__: tools_spark_sliced_services_std_comms_filetransfer_core_platform_html5_websocket_binaryjs_FileTransfer
};
var tools_spark_sliced_services_std_comms_sockets_interfaces_ISocket = function() { };
$hxClasses["tools.spark.sliced.services.std.comms.sockets.interfaces.ISocket"] = tools_spark_sliced_services_std_comms_sockets_interfaces_ISocket;
tools_spark_sliced_services_std_comms_sockets_interfaces_ISocket.__name__ = ["tools","spark","sliced","services","std","comms","sockets","interfaces","ISocket"];
tools_spark_sliced_services_std_comms_sockets_interfaces_ISocket.prototype = {
	__class__: tools_spark_sliced_services_std_comms_sockets_interfaces_ISocket
};
var tools_spark_sliced_services_std_comms_sockets_core_pomelo_platform_html5_websocket_Socket = function() {
};
$hxClasses["tools.spark.sliced.services.std.comms.sockets.core.pomelo.platform.html5.websocket.Socket"] = tools_spark_sliced_services_std_comms_sockets_core_pomelo_platform_html5_websocket_Socket;
tools_spark_sliced_services_std_comms_sockets_core_pomelo_platform_html5_websocket_Socket.__name__ = ["tools","spark","sliced","services","std","comms","sockets","core","pomelo","platform","html5","websocket","Socket"];
tools_spark_sliced_services_std_comms_sockets_core_pomelo_platform_html5_websocket_Socket.__interfaces__ = [tools_spark_sliced_services_std_comms_sockets_interfaces_ISocket];
tools_spark_sliced_services_std_comms_sockets_core_pomelo_platform_html5_websocket_Socket.prototype = {
	init: function(p_hostName,p_port,p_log,p_callBack) {
		if(p_log == null) p_log = false;
		window.pomelo.init({ host : p_hostName, port : p_port, log : p_log},p_callBack);
	}
	,request: function(p_route,p_msg,p_callBack) {
		window.pomelo.request(p_route,p_msg,p_callBack);
	}
	,notify: function(p_route,p_msg) {
		window.pomelo.notify(p_route,p_msg);
	}
	,on: function(p_route,p_callback) {
		window.pomelo.on(p_route,p_callback);
	}
	,disconnect: function() {
		window.pomelo.disconnect();
	}
	,__class__: tools_spark_sliced_services_std_comms_sockets_core_pomelo_platform_html5_websocket_Socket
};
var tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveSpaceReference = function() { };
$hxClasses["tools.spark.sliced.services.std.display.active_displayentity_references.interfaces.IActiveSpaceReference"] = tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveSpaceReference;
tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveSpaceReference.__name__ = ["tools","spark","sliced","services","std","display","active_displayentity_references","interfaces","IActiveSpaceReference"];
tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveSpaceReference.prototype = {
	__class__: tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveSpaceReference
};
var tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveSpaceReference = function(p_spaceEntity) {
	this.spaceEntity = p_spaceEntity;
};
$hxClasses["tools.spark.sliced.services.std.display.active_displayentity_references.core.ActiveSpaceReference"] = tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveSpaceReference;
tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveSpaceReference.__name__ = ["tools","spark","sliced","services","std","display","active_displayentity_references","core","ActiveSpaceReference"];
tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveSpaceReference.__interfaces__ = [tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveSpaceReference];
tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveSpaceReference.prototype = {
	__class__: tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveSpaceReference
};
var tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageAreaReference = function() { };
$hxClasses["tools.spark.sliced.services.std.display.active_displayentity_references.interfaces.IActiveStageAreaReference"] = tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageAreaReference;
tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageAreaReference.__name__ = ["tools","spark","sliced","services","std","display","active_displayentity_references","interfaces","IActiveStageAreaReference"];
tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageAreaReference.prototype = {
	__class__: tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageAreaReference
};
var tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageAreaReference = function(p_stageAreaEntity) {
	this.stageAreaEntity = p_stageAreaEntity;
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.display.active_displayentity_references.core.ActiveStageAreaReference"] = tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageAreaReference;
tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageAreaReference.__name__ = ["tools","spark","sliced","services","std","display","active_displayentity_references","core","ActiveStageAreaReference"];
tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageAreaReference.__interfaces__ = [tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageAreaReference];
tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageAreaReference.prototype = {
	_init: function() {
		this.layoutElement = new tools_spark_framework_layout_containers_Group(this.stageAreaEntity,"StageArea",this);
	}
	,__class__: tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageAreaReference
};
var tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageReference = function() { };
$hxClasses["tools.spark.sliced.services.std.display.active_displayentity_references.interfaces.IActiveStageReference"] = tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageReference;
tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageReference.__name__ = ["tools","spark","sliced","services","std","display","active_displayentity_references","interfaces","IActiveStageReference"];
tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageReference.prototype = {
	__class__: tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageReference
};
var tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageReference = function(p_stageEntity) {
	this.stageEntity = p_stageEntity;
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.display.active_displayentity_references.core.ActiveStageReference"] = tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageReference;
tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageReference.__name__ = ["tools","spark","sliced","services","std","display","active_displayentity_references","core","ActiveStageReference"];
tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageReference.__interfaces__ = [tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageReference];
tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageReference.prototype = {
	_init: function() {
		this.activeViewReferences = [];
		this.activeStageAreaReferences = [];
		this.layoutRoot = new tools_spark_framework_layout_containers_Group(this.stageEntity,"Stage",this);
		this.layoutManager = new tools_spark_framework_layout_managers_LayoutManager(this.layoutRoot);
		flambe_System.get_stage().resize.connect($bind(this,this._onResize));
	}
	,_onResize: function() {
		this.layoutRoot.explicitWidth = js_Browser.get_window().innerWidth;
		this.layoutRoot.explicitHeight = js_Browser.get_window().innerHeight;
		tools_spark_sliced_core_Sliced.display.invalidateLayout();
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.STAGE_RESIZED);
	}
	,addView: function(p_viewReference) {
		this.activeViewReferences.push(p_viewReference);
		this.activeViewReferences.sort($bind(this,this._orderViews));
		this._addLayoutElement(p_viewReference.layoutElement);
	}
	,addStageArea: function(p_stageAreaReference) {
		this.activeStageAreaReferences.push(p_stageAreaReference);
		this._addLayoutElement(p_stageAreaReference.layoutElement);
	}
	,removeView: function(p_viewReference) {
		HxOverrides.remove(this.activeViewReferences,p_viewReference);
		this._removeLayoutElement(p_viewReference.layoutElement);
	}
	,removeStageArea: function(p_stageAreaReference) {
		HxOverrides.remove(this.activeStageAreaReferences,p_stageAreaReference);
		this._removeLayoutElement(p_stageAreaReference.layoutElement);
	}
	,_addLayoutElement: function(p_layoutElement) {
		if(p_layoutElement.layoutableEntity.getState("parent") == "Implicit") this.layoutRoot.children.push(p_layoutElement); else {
			var _g = 0;
			var _g1 = this.activeStageAreaReferences;
			while(_g < _g1.length) {
				var activeStageAreaReference = _g1[_g];
				++_g;
				if(activeStageAreaReference.stageAreaEntity.getState("name") == p_layoutElement.layoutableEntity.getState("parent")) {
					activeStageAreaReference.layoutElement.children.push(p_layoutElement);
					break;
				}
			}
		}
	}
	,_removeLayoutElement: function(p_layoutElement) {
		if(p_layoutElement.layoutableEntity.getState("parent") == "Implicit") HxOverrides.remove(this.layoutRoot.children,p_layoutElement); else {
			var _g = 0;
			var _g1 = this.activeStageAreaReferences;
			while(_g < _g1.length) {
				var activeStageAreaReference = _g1[_g];
				++_g;
				if(activeStageAreaReference.stageAreaEntity.getState("name") == p_layoutElement.layoutableEntity.getState("parent")) {
					HxOverrides.remove(activeStageAreaReference.layoutElement.children,p_layoutElement);
					break;
				}
			}
		}
	}
	,_orderViews: function(viewReference1,viewReference2) {
		if(viewReference1.viewEntity.getState("zIndex") > viewReference2.viewEntity.getState("zIndex")) return 1; else if(viewReference1.viewEntity.getState("zIndex") < viewReference2.viewEntity.getState("zIndex")) return -1; else return 0;
	}
	,__class__: tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageReference
};
var tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveViewReference = function() { };
$hxClasses["tools.spark.sliced.services.std.display.active_displayentity_references.interfaces.IActiveViewReference"] = tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveViewReference;
tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveViewReference.__name__ = ["tools","spark","sliced","services","std","display","active_displayentity_references","interfaces","IActiveViewReference"];
tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveViewReference.prototype = {
	__class__: tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveViewReference
};
var tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveViewReference = function(p_viewEntity) {
	this.viewEntity = p_viewEntity;
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.display.active_displayentity_references.core.ActiveViewReference"] = tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveViewReference;
tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveViewReference.__name__ = ["tools","spark","sliced","services","std","display","active_displayentity_references","core","ActiveViewReference"];
tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveViewReference.__interfaces__ = [tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveViewReference];
tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveViewReference.prototype = {
	_init: function() {
		this.layoutElement = new tools_spark_framework_layout_containers_Group(this.viewEntity,"View",this);
	}
	,__class__: tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveViewReference
};
var tools_spark_sliced_services_std_display_core_Display = function() {
	tools_spark_sliced_core_AService.call(this);
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.display.core.Display"] = tools_spark_sliced_services_std_display_core_Display;
tools_spark_sliced_services_std_display_core_Display.__name__ = ["tools","spark","sliced","services","std","display","core","Display"];
tools_spark_sliced_services_std_display_core_Display.__interfaces__ = [tools_spark_sliced_interfaces_IDisplay];
tools_spark_sliced_services_std_display_core_Display.__super__ = tools_spark_sliced_core_AService;
tools_spark_sliced_services_std_display_core_Display.prototype = $extend(tools_spark_sliced_core_AService.prototype,{
	_initRenderStateNames: function() {
		{
			this._renderStateNames.set("2DmeshType",true);
			true;
		}
		{
			this._renderStateNames.set("3DmeshType",true);
			true;
		}
		{
			this._renderStateNames.set("touchable",true);
			true;
		}
		{
			this._renderStateNames.set("2DMeshImageForm",true);
			true;
		}
		{
			this._renderStateNames.set("2DMeshTextForm",true);
			true;
		}
		{
			this._renderStateNames.set("2DMeshSpriterForm",true);
			true;
		}
		{
			this._renderStateNames.set("2DMeshFillRectForm",true);
			true;
		}
		{
			this._renderStateNames.set("2DMeshSpriteForm",true);
			true;
		}
		{
			this._renderStateNames.set("2DMeshSpriterAnimForm",true);
			true;
		}
		{
			this._renderStateNames.set("visibility",true);
			true;
		}
		{
			this._renderStateNames.set("visible",true);
			true;
		}
		{
			this._renderStateNames.set("width",true);
			true;
		}
		{
			this._renderStateNames.set("height",true);
			true;
		}
		{
			this._renderStateNames.set("top",true);
			true;
		}
		{
			this._renderStateNames.set("left",true);
			true;
		}
		{
			this._renderStateNames.set("opacity",true);
			true;
		}
		{
			this._renderStateNames.set("display",true);
			true;
		}
		{
			this._renderStateNames.set("text",true);
			true;
		}
		{
			this._renderStateNames.set("fontSize",true);
			true;
		}
		{
			this._renderStateNames.set("fontWeight",true);
			true;
		}
		{
			this._renderStateNames.set("fontColor",true);
			true;
		}
		{
			this._renderStateNames.set("src",true);
			true;
		}
		{
			this._renderStateNames.set("overflow",true);
			true;
		}
		{
			this._renderStateNames.set("whiteSpace",true);
			true;
		}
		{
			this._renderStateNames.set("backgroundColor",true);
			true;
		}
		{
			this._renderStateNames.set("border",true);
			true;
		}
		{
			this._renderStateNames.set("borderColor",true);
			true;
		}
		{
			this._renderStateNames.set("command_zOrder",true);
			true;
		}
		{
			this._renderStateNames.set("physicsEntity",true);
			true;
		}
		{
			this._renderStateNames.set("transform",true);
			true;
		}
		{
			this._renderStateNames.set("transformScale",true);
			true;
		}
		{
			this._renderStateNames.set("font",true);
			true;
		}
		{
			this._renderStateNames.set("align",true);
			true;
		}
		{
			this._renderStateNames.set("wrapWidth",true);
			true;
		}
		{
			this._renderStateNames.set("letterSpacing",true);
			true;
		}
		{
			this._renderStateNames.set("lineSpacing",true);
			true;
		}
		{
			this._renderStateNames.set("scissorRect",true);
			true;
		}
		{
			this._renderStateNames.set("spaceX",true);
			true;
		}
		{
			this._renderStateNames.set("spaceY",true);
			true;
		}
		{
			this._renderStateNames.set("spaceZ",true);
			true;
		}
		{
			this._renderStateNames.set("scaleX",true);
			true;
		}
		{
			this._renderStateNames.set("scaleY",true);
			true;
		}
		{
			this._renderStateNames.set("scaleZ",true);
			true;
		}
		{
			this._renderStateNames.set("rotation",true);
			true;
		}
		{
			this._renderStateNames.set("animate_x",true);
			true;
		}
		{
			this._renderStateNames.set("animate_y",true);
			true;
		}
		{
			this._renderStateNames.set("animate_scaleX",true);
			true;
		}
		{
			this._renderStateNames.set("animate_scaleY",true);
			true;
		}
		{
			this._renderStateNames.set("animate_rotation",true);
			true;
		}
		{
			this._renderStateNames.set("animate_opacity",true);
			true;
		}
		{
			this._renderStateNames.set("velocityX",true);
			true;
		}
		{
			this._renderStateNames.set("velocityY",true);
			true;
		}
		{
			this._renderStateNames.set("velocityAng",true);
			true;
		}
		{
			this._renderStateNames.set("applyImpulseX",true);
			true;
		}
		{
			this._renderStateNames.set("applyImpulseY",true);
			true;
		}
		{
			this._renderStateNames.set("applyImpulseAngle",true);
			true;
		}
		{
			this._renderStateNames.set("captureAreaX",true);
			true;
		}
		{
			this._renderStateNames.set("captureAreaY",true);
			true;
		}
		{
			this._renderStateNames.set("captureAreaWidth",true);
			true;
		}
		{
			this._renderStateNames.set("captureAreaHeight",true);
			true;
		}
		{
			this._renderStateNames.set("command_updateCamera",true);
			true;
		}
		{
			this._renderStateNames.set("spaceWidth",true);
			true;
		}
		{
			this._renderStateNames.set("spaceHeight",true);
			true;
		}
		{
			this._renderStateNames.set("action_fire",true);
			true;
		}
		{
			this._renderStateNames.set("emitX",true);
			true;
		}
		{
			this._renderStateNames.set("emitY",true);
			true;
		}
		{
			this._renderStateNames.set("particleEnabled",true);
			true;
		}
		{
			this._renderStateNames.set("particleDuration",true);
			true;
		}
		{
			this._renderStateNames.set("stage",true);
			true;
		}
		{
			this._renderStateNames.set("view",true);
			true;
		}
		{
			this._renderStateNames.set("camera",true);
			true;
		}
		{
			this._renderStateNames.set("scene",true);
			true;
		}
		{
			this._renderStateNames.set("space",true);
			true;
		}
		{
			this._renderStateNames.set("active",true);
			true;
		}
	}
	,_init: function() {
		tools_spark_Console.log("Init Display std Service...");
		this._renderStateNames = new haxe_ds_StringMap();
		this._initRenderStateNames();
		this._renderFormStateNames = new haxe_ds_StringMap();
		this._activeReferenceMediator = new tools_spark_sliced_services_std_display_managers_core_ActiveReferenceMediator(this);
		this.platformRendererSet = new haxe_ds_StringMap();
		this._dataBuffer = new tools_spark_sliced_services_std_display_databuffer_core_DataBuffer();
		this._scriptLogger = flambe_System.createLogger("script");
	}
	,setActiveSpace: function(p_spaceEntity) {
		if(p_spaceEntity.getState("displayType") == "Space") {
			this._dataBuffer.addEntry(tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.SET_SPACE,p_spaceEntity);
			return true;
		} else return false;
	}
	,_setActiveSpace: function(p_spaceEntity) {
		if(this._activeReferenceMediator.getActiveSpaceReference(p_spaceEntity) != null) tools_spark_Console.warn("This space object is already bound to the Project. Ignoring..."); else {
			if(this.projectActiveSpaceReference != null) tools_spark_Console.warn("Another space object was already set to this Project! Resetting...");
			this.projectActiveSpaceReference = this._activeReferenceMediator.createSpaceReference(p_spaceEntity);
			this._activeReferenceMediator.spaceReferenceManager.update(this.projectActiveSpaceReference,p_spaceEntity);
		}
	}
	,invalidateLayout: function() {
		this.projectActiveSpaceReference.activeStageReference.layoutManager.validated = false;
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.LAYOUT_INVALIDATED);
	}
	,getSpace2_5Object: function(p_gameEntity,p_bAllRenderers) {
		if(p_bAllRenderers == null) p_bAllRenderers = false;
		if(p_bAllRenderers) return null; else {
			var l_realObject;
			var $it0 = this.platformRendererSet.iterator();
			while( $it0.hasNext() ) {
				var renderer = $it0.next();
				l_realObject = renderer.getRealObject(p_gameEntity);
				if(l_realObject != null) break;
			}
			return l_realObject;
		}
	}
	,update: function() {
		var _g = 0;
		var _g1 = this._dataBuffer.dataBuffer;
		while(_g < _g1.length) {
			var f_bufferEntry = _g1[_g];
			++_g;
			var _g2 = f_bufferEntry.type;
			switch(Type.enumIndex(_g2)) {
			case 0:
				this._setActiveSpace(f_bufferEntry.source);
				break;
			case 1:case 2:
				var _g3 = f_bufferEntry.source.getState("displayType");
				switch(_g3) {
				case "Space":
					break;
				case "Stage":
					this._activeReferenceMediator.stageReferenceManager.addTo(f_bufferEntry.target,this.projectActiveSpaceReference.activeStageReference);
					break;
				case "StageArea":
					break;
				case "View":
					break;
				default:
					var $it0 = this.platformRendererSet.iterator();
					while( $it0.hasNext() ) {
						var renderer = $it0.next();
						if(f_bufferEntry.type == tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.ADDED) renderer.addChild(f_bufferEntry.source,f_bufferEntry.target); else if(f_bufferEntry.type == tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.INSERTED) renderer.insertChild(f_bufferEntry.source,f_bufferEntry.target,Std.parseInt(f_bufferEntry.field));
					}
				}
				break;
			case 3:
				var _g31 = f_bufferEntry.source.getState("displayType");
				switch(_g31) {
				case "Space":
					break;
				case "Stage":
					this._activeReferenceMediator.stageReferenceManager.removeFrom(f_bufferEntry.target,this.projectActiveSpaceReference.activeStageReference);
					break;
				case "StageArea":
					break;
				case "View":
					break;
				default:
					var $it1 = this.platformRendererSet.iterator();
					while( $it1.hasNext() ) {
						var renderer1 = $it1.next();
						renderer1.removeChild(f_bufferEntry.source,f_bufferEntry.target);
					}
				}
				break;
			case 4:
				var _g32 = f_bufferEntry.source.getState("displayType");
				switch(_g32) {
				case "Space":
					this._activeReferenceMediator.spaceReferenceManager.updateState(this._activeReferenceMediator.getActiveSpaceReference(f_bufferEntry.source),f_bufferEntry.source,f_bufferEntry.field);
					break;
				case "Stage":
					this._activeReferenceMediator.stageReferenceManager.updateState(this._activeReferenceMediator.getActiveStageReference(f_bufferEntry.source),f_bufferEntry.source,f_bufferEntry.field);
					break;
				case "StageArea":
					this._activeReferenceMediator.stageAreaReferenceManager.updateState(this._activeReferenceMediator.getActiveStageAreaReference(f_bufferEntry.source),f_bufferEntry.source,f_bufferEntry.field);
					break;
				case "View":
					this._activeReferenceMediator.viewReferenceManager.updateState(this._activeReferenceMediator.getActiveViewReference(f_bufferEntry.source),f_bufferEntry.source,f_bufferEntry.field);
					var $it2 = this.platformRendererSet.iterator();
					while( $it2.hasNext() ) {
						var renderer2 = $it2.next();
						renderer2.updateState(f_bufferEntry.source,f_bufferEntry.field);
					}
					break;
				default:
					var $it3 = this.platformRendererSet.iterator();
					while( $it3.hasNext() ) {
						var renderer3 = $it3.next();
						renderer3.updateState(f_bufferEntry.source,f_bufferEntry.field);
					}
				}
				break;
			default:
				tools_spark_Console.warn("DISPLAY: Unhandled request: " + Std.string(f_bufferEntry.type));
			}
		}
		this._dataBuffer.clearBuffer();
		if(this.projectActiveSpaceReference != null) this.projectActiveSpaceReference.activeStageReference.layoutManager.validate();
	}
	,addDisplayObjectChild: function(p_gameEntityParent,p_gameEntityChild) {
		if(p_gameEntityParent.getState("displayType") != null && p_gameEntityChild.getState("displayType") != null) this._addChild(p_gameEntityParent,p_gameEntityChild);
	}
	,insertDisplayObjectChild: function(p_gameEntityParent,p_gameEntityChild,p_index) {
		if(p_gameEntityParent.getState("displayType") != null && p_gameEntityChild.getState("displayType") != null) this._insertChild(p_gameEntityParent,p_gameEntityChild,p_index);
	}
	,removeDisplayObjectChild: function(p_gameEntityParent,p_gameEntityChild) {
		if(p_gameEntityParent.getState("displayType") != null && p_gameEntityChild.getState("displayType") != null) this._removeChild(p_gameEntityParent,p_gameEntityChild);
	}
	,updateDisplayObjectState: function(p_gameEntity,p_state) {
		if(p_gameEntity.getState("displayType") != null && this._renderStateNames.get(p_state) == true) this._updateState(p_gameEntity,p_state);
	}
	,updateDisplayObjectFormState: function(p_gameEntity,p_state) {
		if(p_gameEntity.getState("displayType") != null && this._renderFormStateNames.get(p_state) == true) this._updateFormState(p_gameEntity,p_state);
	}
	,_addChild: function(p_gameEntityParent,p_gameEntityChild) {
		this._dataBuffer.addEntry(tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.ADDED,p_gameEntityParent,p_gameEntityChild);
	}
	,_insertChild: function(p_gameEntityParent,p_gameEntityChild,p_index) {
		this._dataBuffer.addEntry(tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.INSERTED,p_gameEntityParent,p_gameEntityChild,Std.string(p_index));
	}
	,_removeChild: function(p_gameEntityParent,p_gameEntityChild) {
		this._dataBuffer.addEntry(tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.REMOVED,p_gameEntityParent,p_gameEntityChild);
	}
	,_updateState: function(p_gameEntity,p_state) {
		this._dataBuffer.addEntry(tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.UPDATED_STATE,p_gameEntity,null,p_state);
	}
	,_updateFormState: function(p_gameEntity,p_state) {
		this._dataBuffer.addEntry(tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.UPDATED_FORM_STATE,p_gameEntity,null,p_state);
	}
	,log: function(message,args) {
		this._scriptLogger.info(message,args);
	}
	,warn: function(message,args) {
		this._scriptLogger.warn(message,args);
	}
	,error: function(message,args) {
		this._scriptLogger.error(message,args);
	}
	,dl: function(message,args) {
		this._scriptLogger.info("DEBUG->" + message,args);
	}
	,dw: function(message,args) {
		this._scriptLogger.warn("DEBUG->" + message,args);
	}
	,de: function(message,args) {
		this._scriptLogger.error("DEBUG->" + message,args);
	}
	,__class__: tools_spark_sliced_services_std_display_core_Display
});
var tools_spark_sliced_services_std_display_databuffer_interfaces_IBufferEntry = function() { };
$hxClasses["tools.spark.sliced.services.std.display.databuffer.interfaces.IBufferEntry"] = tools_spark_sliced_services_std_display_databuffer_interfaces_IBufferEntry;
tools_spark_sliced_services_std_display_databuffer_interfaces_IBufferEntry.__name__ = ["tools","spark","sliced","services","std","display","databuffer","interfaces","IBufferEntry"];
tools_spark_sliced_services_std_display_databuffer_interfaces_IBufferEntry.prototype = {
	__class__: tools_spark_sliced_services_std_display_databuffer_interfaces_IBufferEntry
};
var tools_spark_sliced_services_std_display_databuffer_core_BufferEntry = function(p_type,p_source,p_target,p_field) {
	this.type = p_type;
	this.source = p_source;
	this.target = p_target;
	this.field = p_field;
};
$hxClasses["tools.spark.sliced.services.std.display.databuffer.core.BufferEntry"] = tools_spark_sliced_services_std_display_databuffer_core_BufferEntry;
tools_spark_sliced_services_std_display_databuffer_core_BufferEntry.__name__ = ["tools","spark","sliced","services","std","display","databuffer","core","BufferEntry"];
tools_spark_sliced_services_std_display_databuffer_core_BufferEntry.__interfaces__ = [tools_spark_sliced_services_std_display_databuffer_interfaces_IBufferEntry];
tools_spark_sliced_services_std_display_databuffer_core_BufferEntry.prototype = {
	__class__: tools_spark_sliced_services_std_display_databuffer_core_BufferEntry
};
var tools_spark_sliced_services_std_display_databuffer_interfaces_IDataBuffer = function() { };
$hxClasses["tools.spark.sliced.services.std.display.databuffer.interfaces.IDataBuffer"] = tools_spark_sliced_services_std_display_databuffer_interfaces_IDataBuffer;
tools_spark_sliced_services_std_display_databuffer_interfaces_IDataBuffer.__name__ = ["tools","spark","sliced","services","std","display","databuffer","interfaces","IDataBuffer"];
tools_spark_sliced_services_std_display_databuffer_interfaces_IDataBuffer.prototype = {
	__class__: tools_spark_sliced_services_std_display_databuffer_interfaces_IDataBuffer
};
var tools_spark_sliced_services_std_display_databuffer_core_DataBuffer = function() {
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.display.databuffer.core.DataBuffer"] = tools_spark_sliced_services_std_display_databuffer_core_DataBuffer;
tools_spark_sliced_services_std_display_databuffer_core_DataBuffer.__name__ = ["tools","spark","sliced","services","std","display","databuffer","core","DataBuffer"];
tools_spark_sliced_services_std_display_databuffer_core_DataBuffer.__interfaces__ = [tools_spark_sliced_services_std_display_databuffer_interfaces_IDataBuffer];
tools_spark_sliced_services_std_display_databuffer_core_DataBuffer.prototype = {
	_init: function() {
		this.dataBuffer = [];
	}
	,addEntry: function(p_type,p_source,p_target,p_field) {
		this.dataBuffer.push(new tools_spark_sliced_services_std_display_databuffer_core_BufferEntry(p_type,p_source,p_target,p_field));
	}
	,clearBuffer: function() {
		this.dataBuffer = [];
	}
	,__class__: tools_spark_sliced_services_std_display_databuffer_core_DataBuffer
};
var tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType = $hxClasses["tools.spark.sliced.services.std.display.databuffer.interfaces.EBufferEntryType"] = { __ename__ : ["tools","spark","sliced","services","std","display","databuffer","interfaces","EBufferEntryType"], __constructs__ : ["SET_SPACE","ADDED","INSERTED","REMOVED","UPDATED_STATE","UPDATED_FORM_STATE"] };
tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.SET_SPACE = ["SET_SPACE",0];
tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.SET_SPACE.__enum__ = tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType;
tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.ADDED = ["ADDED",1];
tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.ADDED.__enum__ = tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType;
tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.INSERTED = ["INSERTED",2];
tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.INSERTED.__enum__ = tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType;
tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.REMOVED = ["REMOVED",3];
tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.REMOVED.__enum__ = tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType;
tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.UPDATED_STATE = ["UPDATED_STATE",4];
tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.UPDATED_STATE.__enum__ = tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType;
tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.UPDATED_FORM_STATE = ["UPDATED_FORM_STATE",5];
tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.UPDATED_FORM_STATE.__enum__ = tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType;
tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.__empty_constructs__ = [tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.SET_SPACE,tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.ADDED,tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.INSERTED,tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.REMOVED,tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.UPDATED_STATE,tools_spark_sliced_services_std_display_databuffer_interfaces_EBufferEntryType.UPDATED_FORM_STATE];
var tools_spark_sliced_services_std_display_managers_interfaces_IActiveReferenceMediator = function() { };
$hxClasses["tools.spark.sliced.services.std.display.managers.interfaces.IActiveReferenceMediator"] = tools_spark_sliced_services_std_display_managers_interfaces_IActiveReferenceMediator;
tools_spark_sliced_services_std_display_managers_interfaces_IActiveReferenceMediator.__name__ = ["tools","spark","sliced","services","std","display","managers","interfaces","IActiveReferenceMediator"];
tools_spark_sliced_services_std_display_managers_interfaces_IActiveReferenceMediator.prototype = {
	__class__: tools_spark_sliced_services_std_display_managers_interfaces_IActiveReferenceMediator
};
var tools_spark_sliced_services_std_display_managers_core_ActiveReferenceMediator = function(p_display) {
	this.display = p_display;
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.display.managers.core.ActiveReferenceMediator"] = tools_spark_sliced_services_std_display_managers_core_ActiveReferenceMediator;
tools_spark_sliced_services_std_display_managers_core_ActiveReferenceMediator.__name__ = ["tools","spark","sliced","services","std","display","managers","core","ActiveReferenceMediator"];
tools_spark_sliced_services_std_display_managers_core_ActiveReferenceMediator.__interfaces__ = [tools_spark_sliced_services_std_display_managers_interfaces_IActiveReferenceMediator];
tools_spark_sliced_services_std_display_managers_core_ActiveReferenceMediator.prototype = {
	_init: function() {
		this.spaceReferenceManager = new tools_spark_sliced_services_std_display_managers_core_SpaceReferenceManager(this);
		this.stageReferenceManager = new tools_spark_sliced_services_std_display_managers_core_StageReferenceManager(this);
		this.viewReferenceManager = new tools_spark_sliced_services_std_display_managers_core_ViewReferenceManager(this);
		this.stageAreaReferenceManager = new tools_spark_sliced_services_std_display_managers_core_StageAreaReferenceManager(this);
	}
	,createSpaceReference: function(p_spaceEntity) {
		return js_Boot.__cast(this.spaceReferenceManager.create(p_spaceEntity) , tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveSpaceReference);
	}
	,createStageReference: function(p_stageEntity) {
		return js_Boot.__cast(this.stageReferenceManager.create(p_stageEntity) , tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageReference);
	}
	,createViewReference: function(p_viewEntity) {
		return js_Boot.__cast(this.viewReferenceManager.create(p_viewEntity) , tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveViewReference);
	}
	,createStageAreaReference: function(p_stageAreaEntity) {
		return js_Boot.__cast(this.stageAreaReferenceManager.create(p_stageAreaEntity) , tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageAreaReference);
	}
	,getActiveSpaceReference: function(p_spaceEntity) {
		if(this.display.projectActiveSpaceReference == null) return null;
		if(p_spaceEntity == this.display.projectActiveSpaceReference.spaceEntity) return this.display.projectActiveSpaceReference; else return null;
	}
	,getActiveStageReference: function(p_stageEntity) {
		if(this.display.projectActiveSpaceReference == null) return null; else if(this.display.projectActiveSpaceReference.activeStageReference == null) return null;
		if(p_stageEntity == this.display.projectActiveSpaceReference.activeStageReference.stageEntity) return this.display.projectActiveSpaceReference.activeStageReference; else return null;
	}
	,getActiveViewReference: function(p_viewEntity) {
		if(this.display.projectActiveSpaceReference == null) return null; else if(this.display.projectActiveSpaceReference.activeStageReference == null) return null;
		var _g = 0;
		var _g1 = this.display.projectActiveSpaceReference.activeStageReference.activeViewReferences;
		while(_g < _g1.length) {
			var f_activeViewReference = _g1[_g];
			++_g;
			if(f_activeViewReference.viewEntity == p_viewEntity) return f_activeViewReference;
		}
		return null;
	}
	,getActiveStageAreaReference: function(p_stageAreaEntity) {
		if(this.display.projectActiveSpaceReference == null) return null; else if(this.display.projectActiveSpaceReference.activeStageReference == null) return null;
		var _g = 0;
		var _g1 = this.display.projectActiveSpaceReference.activeStageReference.activeStageAreaReferences;
		while(_g < _g1.length) {
			var f_activeStageAreaReference = _g1[_g];
			++_g;
			if(f_activeStageAreaReference.stageAreaEntity == p_stageAreaEntity) return f_activeStageAreaReference;
		}
		return null;
	}
	,__class__: tools_spark_sliced_services_std_display_managers_core_ActiveReferenceMediator
};
var tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager = function() { };
$hxClasses["tools.spark.sliced.services.std.display.managers.interfaces.IDisplayObjectManager"] = tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager;
tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager.__name__ = ["tools","spark","sliced","services","std","display","managers","interfaces","IDisplayObjectManager"];
tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager.prototype = {
	__class__: tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager
};
var tools_spark_sliced_services_std_display_managers_core_DomCameraManager = function(p_renderer) {
	this._renderer = p_renderer;
};
$hxClasses["tools.spark.sliced.services.std.display.managers.core.DomCameraManager"] = tools_spark_sliced_services_std_display_managers_core_DomCameraManager;
tools_spark_sliced_services_std_display_managers_core_DomCameraManager.__name__ = ["tools","spark","sliced","services","std","display","managers","core","DomCameraManager"];
tools_spark_sliced_services_std_display_managers_core_DomCameraManager.__interfaces__ = [tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager];
tools_spark_sliced_services_std_display_managers_core_DomCameraManager.prototype = {
	create: function(p_gameEntity) {
		var l_camera2_5D = new tools_spark_framework_dom2_$5D_DomCamera2_$5D(p_gameEntity);
		return l_camera2_5D;
	}
	,destroy: function(p_object) {
	}
	,update: function(p_object,p_gameEntity) {
	}
	,updateState: function(p_object,p_gameEntity,p_state) {
	}
	,addTo: function(p_objectChild,p_objectParent) {
	}
	,removeFrom: function(p_objectChild,p_objectParent) {
	}
	,__class__: tools_spark_sliced_services_std_display_managers_core_DomCameraManager
};
var tools_spark_sliced_services_std_display_managers_core_DomObjectManager = function(p_renderer) {
	this._renderer = p_renderer;
};
$hxClasses["tools.spark.sliced.services.std.display.managers.core.DomObjectManager"] = tools_spark_sliced_services_std_display_managers_core_DomObjectManager;
tools_spark_sliced_services_std_display_managers_core_DomObjectManager.__name__ = ["tools","spark","sliced","services","std","display","managers","core","DomObjectManager"];
tools_spark_sliced_services_std_display_managers_core_DomObjectManager.__interfaces__ = [tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager];
tools_spark_sliced_services_std_display_managers_core_DomObjectManager.prototype = {
	create: function(p_gameEntity) {
		var l_object2_5D = new tools_spark_framework_dom2_$5D_DomEntity2_$5D(p_gameEntity);
		this.update(l_object2_5D,p_gameEntity);
		return l_object2_5D;
	}
	,destroy: function(p_object) {
	}
	,update: function(p_object,p_gameEntity) {
		var l_entity2_5D;
		l_entity2_5D = js_Boot.__cast(p_object , tools_spark_framework_dom2_$5D_DomEntity2_$5D);
		var _g = 0;
		var _g1 = p_gameEntity.get_children();
		while(_g < _g1.length) {
			var f_childEntity = _g1[_g];
			++_g;
			this.addTo(this._renderer.createObject(f_childEntity),l_entity2_5D);
		}
	}
	,updateState: function(p_object,p_gameEntity,p_state) {
		var l_entity2_5D;
		l_entity2_5D = js_Boot.__cast(p_object , tools_spark_framework_dom2_$5D_DomEntity2_$5D);
		l_entity2_5D.updateState(p_state);
	}
	,addTo: function(p_objectChild,p_objectParent) {
		var l_entity2_5D;
		l_entity2_5D = js_Boot.__cast(p_objectParent , tools_spark_framework_dom2_$5D_DomEntity2_$5D);
		if(p_objectChild != null) l_entity2_5D.addChild(p_objectChild);
	}
	,insertTo: function(p_objectChild,p_objectParent,p_index) {
		var l_entity2_5D;
		l_entity2_5D = js_Boot.__cast(p_objectParent , tools_spark_framework_dom2_$5D_DomEntity2_$5D);
		if(p_objectChild != null) l_entity2_5D.insertChild(p_objectChild,p_index);
	}
	,removeFrom: function(p_objectChild,p_objectParent) {
		var l_entity2_5D;
		l_entity2_5D = js_Boot.__cast(p_objectParent , tools_spark_framework_dom2_$5D_DomEntity2_$5D);
		if(p_objectChild != null) l_entity2_5D.removeChild(p_objectChild);
	}
	,__class__: tools_spark_sliced_services_std_display_managers_core_DomObjectManager
};
var tools_spark_sliced_services_std_display_managers_core_DomSceneManager = function(p_renderer) {
	this._renderer = p_renderer;
};
$hxClasses["tools.spark.sliced.services.std.display.managers.core.DomSceneManager"] = tools_spark_sliced_services_std_display_managers_core_DomSceneManager;
tools_spark_sliced_services_std_display_managers_core_DomSceneManager.__name__ = ["tools","spark","sliced","services","std","display","managers","core","DomSceneManager"];
tools_spark_sliced_services_std_display_managers_core_DomSceneManager.__interfaces__ = [tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager];
tools_spark_sliced_services_std_display_managers_core_DomSceneManager.prototype = {
	create: function(p_gameEntity) {
		var l_scene2_5D = new tools_spark_framework_dom2_$5D_DomScene2_$5D(p_gameEntity);
		this.update(l_scene2_5D,p_gameEntity);
		return l_scene2_5D;
	}
	,destroy: function(p_object) {
	}
	,update: function(p_object,p_gameEntity) {
		var l_scene2_5D;
		l_scene2_5D = js_Boot.__cast(p_object , tools_spark_framework_dom2_$5D_DomScene2_$5D);
		var _g = 0;
		var _g1 = p_gameEntity.get_children();
		while(_g < _g1.length) {
			var f_childEntity = _g1[_g];
			++_g;
			this.addTo(this._renderer.createObject(f_childEntity),l_scene2_5D);
		}
	}
	,updateState: function(p_object,p_gameEntity,p_state) {
	}
	,addTo: function(p_objectChild,p_objectParent) {
		var l_scene2_5D;
		l_scene2_5D = js_Boot.__cast(p_objectParent , tools_spark_framework_dom2_$5D_DomScene2_$5D);
		if(p_objectChild != null) l_scene2_5D.addChild(p_objectChild);
	}
	,insertTo: function(p_objectChild,p_objectParent,p_index) {
		var l_scene2_5D;
		l_scene2_5D = js_Boot.__cast(p_objectParent , tools_spark_framework_dom2_$5D_DomScene2_$5D);
		if(p_objectChild != null) l_scene2_5D.insertChild(p_objectChild,p_index);
	}
	,removeFrom: function(p_objectChild,p_objectParent) {
		var l_scene2_5D;
		l_scene2_5D = js_Boot.__cast(p_objectParent , tools_spark_framework_dom2_$5D_DomScene2_$5D);
		if(p_objectChild != null) l_scene2_5D.removeChild(p_objectChild);
	}
	,__class__: tools_spark_sliced_services_std_display_managers_core_DomSceneManager
};
var tools_spark_sliced_services_std_display_managers_core_DomViewManager = function(p_renderer) {
	this._renderer = p_renderer;
};
$hxClasses["tools.spark.sliced.services.std.display.managers.core.DomViewManager"] = tools_spark_sliced_services_std_display_managers_core_DomViewManager;
tools_spark_sliced_services_std_display_managers_core_DomViewManager.__name__ = ["tools","spark","sliced","services","std","display","managers","core","DomViewManager"];
tools_spark_sliced_services_std_display_managers_core_DomViewManager.__interfaces__ = [tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager];
tools_spark_sliced_services_std_display_managers_core_DomViewManager.prototype = {
	create: function(p_gameEntity) {
		var l_view2_5D = new tools_spark_framework_dom2_$5D_DomView2_$5D(p_gameEntity);
		this.update(l_view2_5D,p_gameEntity);
		return l_view2_5D;
	}
	,destroy: function(p_object) {
		var l_view2_5D;
		l_view2_5D = js_Boot.__cast(p_object , tools_spark_framework_dom2_$5D_DomView2_$5D);
		l_view2_5D.destroy();
	}
	,update: function(p_object,p_gameEntity) {
		this.updateState(p_object,p_gameEntity,"scene");
		this.updateState(p_object,p_gameEntity,"camera");
		this.updateState(p_object,p_gameEntity,"visible");
	}
	,updateState: function(p_object,p_gameEntity,p_state) {
		var l_view2_5D;
		l_view2_5D = js_Boot.__cast(p_object , tools_spark_framework_dom2_$5D_DomView2_$5D);
		switch(p_state) {
		case "scene":
			var l_sceneEntity = p_gameEntity.getState(p_state);
			l_view2_5D.set_scene(this._renderer.createScene(l_sceneEntity));
			break;
		case "camera":
			var l_cameraEntity = p_gameEntity.getState(p_state);
			l_view2_5D.set_camera(this._renderer.createCamera(l_cameraEntity));
			break;
		default:
			l_view2_5D.updateState(p_state);
		}
	}
	,addTo: function(p_objectChild,p_objectParent) {
	}
	,removeFrom: function(p_objectChild,p_objectParent) {
	}
	,__class__: tools_spark_sliced_services_std_display_managers_core_DomViewManager
};
var tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DCameraManager = function(p_renderer) {
	this._renderer = p_renderer;
};
$hxClasses["tools.spark.sliced.services.std.display.managers.core.Flambe2_5DCameraManager"] = tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DCameraManager;
tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DCameraManager.__name__ = ["tools","spark","sliced","services","std","display","managers","core","Flambe2_5DCameraManager"];
tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DCameraManager.__interfaces__ = [tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager];
tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DCameraManager.prototype = {
	create: function(p_gameEntity) {
		var l_camera2_5D = new tools_spark_framework_flambe2_$5D_FlambeCamera2_$5D(p_gameEntity);
		return l_camera2_5D;
	}
	,destroy: function(p_object) {
	}
	,update: function(p_object,p_gameEntity) {
	}
	,updateState: function(p_object,p_gameEntity,p_state) {
		var l_camera2_5D;
		l_camera2_5D = js_Boot.__cast(p_object , tools_spark_framework_flambe2_$5D_FlambeCamera2_$5D);
		l_camera2_5D.updateState(p_state);
	}
	,addTo: function(p_objectChild,p_objectParent) {
	}
	,removeFrom: function(p_objectChild,p_objectParent) {
	}
	,__class__: tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DCameraManager
};
var tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DObjectManager = function(p_renderer) {
	this._renderer = p_renderer;
};
$hxClasses["tools.spark.sliced.services.std.display.managers.core.Flambe2_5DObjectManager"] = tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DObjectManager;
tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DObjectManager.__name__ = ["tools","spark","sliced","services","std","display","managers","core","Flambe2_5DObjectManager"];
tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DObjectManager.__interfaces__ = [tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager];
tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DObjectManager.prototype = {
	create: function(p_gameEntity) {
		var l_object2_5D = new tools_spark_framework_flambe2_$5D_FlambeEntity2_$5D(p_gameEntity);
		this.update(l_object2_5D,p_gameEntity);
		return l_object2_5D;
	}
	,destroy: function(p_object) {
	}
	,update: function(p_object,p_gameEntity) {
		var l_entity2_5D;
		l_entity2_5D = js_Boot.__cast(p_object , tools_spark_framework_flambe2_$5D_FlambeEntity2_$5D);
		var _g = 0;
		var _g1 = p_gameEntity.get_children();
		while(_g < _g1.length) {
			var f_childEntity = _g1[_g];
			++_g;
			this.addTo(this._renderer.createObject(f_childEntity),l_entity2_5D);
		}
	}
	,updateState: function(p_object,p_gameEntity,p_state) {
		var l_entity2_5D;
		l_entity2_5D = js_Boot.__cast(p_object , tools_spark_framework_flambe2_$5D_FlambeEntity2_$5D);
		l_entity2_5D.updateState(p_state);
	}
	,addTo: function(p_objectChild,p_objectParent) {
		var l_entity2_5D;
		l_entity2_5D = js_Boot.__cast(p_objectParent , tools_spark_framework_flambe2_$5D_FlambeEntity2_$5D);
		if(p_objectChild != null) l_entity2_5D.addChild(p_objectChild);
	}
	,insertTo: function(p_objectChild,p_objectParent,p_index) {
		var l_entity2_5D;
		l_entity2_5D = js_Boot.__cast(p_objectParent , tools_spark_framework_flambe2_$5D_FlambeEntity2_$5D);
		if(p_objectChild != null) l_entity2_5D.insertChild(p_objectChild,p_index);
	}
	,removeFrom: function(p_objectChild,p_objectParent) {
		var l_entity2_5D;
		l_entity2_5D = js_Boot.__cast(p_objectParent , tools_spark_framework_flambe2_$5D_FlambeEntity2_$5D);
		if(p_objectChild != null) l_entity2_5D.removeChild(p_objectChild);
	}
	,__class__: tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DObjectManager
};
var tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DSceneManager = function(p_renderer) {
	this._renderer = p_renderer;
};
$hxClasses["tools.spark.sliced.services.std.display.managers.core.Flambe2_5DSceneManager"] = tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DSceneManager;
tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DSceneManager.__name__ = ["tools","spark","sliced","services","std","display","managers","core","Flambe2_5DSceneManager"];
tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DSceneManager.__interfaces__ = [tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager];
tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DSceneManager.prototype = {
	create: function(p_gameEntity) {
		var l_scene2_5D = new tools_spark_framework_flambe2_$5D_FlambeScene2_$5D(p_gameEntity);
		this.update(l_scene2_5D,p_gameEntity);
		return l_scene2_5D;
	}
	,destroy: function(p_object) {
	}
	,update: function(p_object,p_gameEntity) {
		var l_scene2_5D;
		l_scene2_5D = js_Boot.__cast(p_object , tools_spark_framework_flambe2_$5D_FlambeScene2_$5D);
		var _g = 0;
		var _g1 = p_gameEntity.get_children();
		while(_g < _g1.length) {
			var f_childEntity = _g1[_g];
			++_g;
			this.addTo(this._renderer.createObject(f_childEntity),l_scene2_5D);
		}
	}
	,updateState: function(p_object,p_gameEntity,p_state) {
	}
	,addTo: function(p_objectChild,p_objectParent) {
		var l_scene2_5D;
		l_scene2_5D = js_Boot.__cast(p_objectParent , tools_spark_framework_flambe2_$5D_FlambeScene2_$5D);
		if(p_objectChild != null) l_scene2_5D.addChild(p_objectChild);
	}
	,insertTo: function(p_objectChild,p_objectParent,p_index) {
		var l_scene2_5D;
		l_scene2_5D = js_Boot.__cast(p_objectParent , tools_spark_framework_flambe2_$5D_FlambeScene2_$5D);
		if(p_objectChild != null) l_scene2_5D.insertChild(p_objectChild,p_index);
	}
	,removeFrom: function(p_objectChild,p_objectParent) {
		var l_scene2_5D;
		l_scene2_5D = js_Boot.__cast(p_objectParent , tools_spark_framework_flambe2_$5D_FlambeScene2_$5D);
		if(p_objectChild != null) l_scene2_5D.removeChild(p_objectChild);
	}
	,__class__: tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DSceneManager
};
var tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DViewManager = function(p_renderer,p_flambeGraphics) {
	this._renderer = p_renderer;
	this._flambeGraphics = p_flambeGraphics;
};
$hxClasses["tools.spark.sliced.services.std.display.managers.core.Flambe2_5DViewManager"] = tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DViewManager;
tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DViewManager.__name__ = ["tools","spark","sliced","services","std","display","managers","core","Flambe2_5DViewManager"];
tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DViewManager.__interfaces__ = [tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager];
tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DViewManager.prototype = {
	create: function(p_gameEntity) {
		var l_view2_5D = new tools_spark_framework_flambe2_$5D_FlambeView2_$5D(p_gameEntity,this._flambeGraphics);
		this.update(l_view2_5D,p_gameEntity);
		return l_view2_5D;
	}
	,destroy: function(p_object) {
		var l_view2_5D;
		l_view2_5D = js_Boot.__cast(p_object , tools_spark_framework_flambe2_$5D_FlambeView2_$5D);
		l_view2_5D.destroy();
	}
	,update: function(p_object,p_gameEntity) {
		this.updateState(p_object,p_gameEntity,"scene");
		this.updateState(p_object,p_gameEntity,"camera");
	}
	,updateState: function(p_object,p_gameEntity,p_state) {
		var l_view2_5D;
		l_view2_5D = js_Boot.__cast(p_object , tools_spark_framework_flambe2_$5D_FlambeView2_$5D);
		switch(p_state) {
		case "scene":
			var l_sceneEntity = p_gameEntity.getState(p_state);
			l_view2_5D.set_scene(this._renderer.createScene(l_sceneEntity));
			break;
		case "camera":
			var l_cameraEntity = p_gameEntity.getState(p_state);
			l_view2_5D.set_camera(this._renderer.createCamera(l_cameraEntity));
			break;
		case "visible":
			l_view2_5D.setVisible(p_gameEntity.getState(p_state));
			break;
		}
	}
	,addTo: function(p_objectChild,p_objectParent) {
	}
	,removeFrom: function(p_objectChild,p_objectParent) {
	}
	,__class__: tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DViewManager
};
var tools_spark_sliced_services_std_display_managers_core_SpaceReferenceManager = function(p_activeReferenceMediator) {
	this._activeReferenceMediator = p_activeReferenceMediator;
};
$hxClasses["tools.spark.sliced.services.std.display.managers.core.SpaceReferenceManager"] = tools_spark_sliced_services_std_display_managers_core_SpaceReferenceManager;
tools_spark_sliced_services_std_display_managers_core_SpaceReferenceManager.__name__ = ["tools","spark","sliced","services","std","display","managers","core","SpaceReferenceManager"];
tools_spark_sliced_services_std_display_managers_core_SpaceReferenceManager.__interfaces__ = [tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager];
tools_spark_sliced_services_std_display_managers_core_SpaceReferenceManager.prototype = {
	create: function(p_gameEntity) {
		var l_spaceReference = new tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveSpaceReference(p_gameEntity);
		return l_spaceReference;
	}
	,destroy: function(p_object) {
	}
	,update: function(p_object,p_gameEntity) {
		if(p_object == null) return;
		this.updateState(p_object,p_gameEntity,"stage");
	}
	,updateState: function(p_object,p_gameEntity,p_state) {
		if(p_object == null) return;
		var l_spaceReference;
		l_spaceReference = js_Boot.__cast(p_object , tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveSpaceReference);
		switch(p_state) {
		case "stage":
			if(p_gameEntity.getState(p_state) != null) this._setStage(l_spaceReference,this._activeReferenceMediator.createStageReference(p_gameEntity.getState(p_state)),p_gameEntity.getState(p_state));
			break;
		}
	}
	,_setStage: function(p_spaceReference,p_stageReference,p_stageEntity) {
		if(this._activeReferenceMediator.getActiveStageReference(p_stageEntity) != null) tools_spark_Console.warn("This stage object [" + Std.string(p_stageEntity.getState("name")) + "] is already bound to the Active Space. Ignoring..."); else {
			if(this._activeReferenceMediator.display.projectActiveSpaceReference.activeStageReference != null) tools_spark_Console.warn("Another stage object was already set to this Project! Resetting...");
			p_spaceReference.activeStageReference = p_stageReference;
			this._activeReferenceMediator.stageReferenceManager.update(p_stageReference,p_stageEntity);
		}
	}
	,addTo: function(p_objectChild,p_objectParent) {
		if(p_objectParent == null) return;
	}
	,removeFrom: function(p_objectChild,p_objectParent) {
		if(p_objectParent == null) return;
	}
	,__class__: tools_spark_sliced_services_std_display_managers_core_SpaceReferenceManager
};
var tools_spark_sliced_services_std_display_managers_core_StageAreaReferenceManager = function(p_activeReferenceMediator) {
	this._activeReferenceMediator = p_activeReferenceMediator;
};
$hxClasses["tools.spark.sliced.services.std.display.managers.core.StageAreaReferenceManager"] = tools_spark_sliced_services_std_display_managers_core_StageAreaReferenceManager;
tools_spark_sliced_services_std_display_managers_core_StageAreaReferenceManager.__name__ = ["tools","spark","sliced","services","std","display","managers","core","StageAreaReferenceManager"];
tools_spark_sliced_services_std_display_managers_core_StageAreaReferenceManager.__interfaces__ = [tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager];
tools_spark_sliced_services_std_display_managers_core_StageAreaReferenceManager.prototype = {
	create: function(p_gameEntity) {
		var l_stageAreaReference = new tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageAreaReference(p_gameEntity);
		return l_stageAreaReference;
	}
	,destroy: function(p_object) {
	}
	,update: function(p_object,p_gameEntity) {
		if(p_object == null) return;
		var l_stageAreaReference;
		l_stageAreaReference = js_Boot.__cast(p_object , tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageAreaReference);
		l_stageAreaReference.layoutElement.update();
	}
	,updateState: function(p_object,p_gameEntity,p_state) {
		if(p_object == null) return;
		var l_stageAreaReference;
		l_stageAreaReference = js_Boot.__cast(p_object , tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageAreaReference);
		l_stageAreaReference.layoutElement.updateState(p_state);
	}
	,addTo: function(p_objectChild,p_objectParent) {
		if(p_objectParent == null) return;
	}
	,removeFrom: function(p_objectChild,p_objectParent) {
		if(p_objectParent == null) return;
	}
	,__class__: tools_spark_sliced_services_std_display_managers_core_StageAreaReferenceManager
};
var tools_spark_sliced_services_std_display_managers_core_StageReferenceManager = function(p_activeReferenceMediator) {
	this._activeReferenceMediator = p_activeReferenceMediator;
};
$hxClasses["tools.spark.sliced.services.std.display.managers.core.StageReferenceManager"] = tools_spark_sliced_services_std_display_managers_core_StageReferenceManager;
tools_spark_sliced_services_std_display_managers_core_StageReferenceManager.__name__ = ["tools","spark","sliced","services","std","display","managers","core","StageReferenceManager"];
tools_spark_sliced_services_std_display_managers_core_StageReferenceManager.__interfaces__ = [tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager];
tools_spark_sliced_services_std_display_managers_core_StageReferenceManager.prototype = {
	create: function(p_gameEntity) {
		var l_stageReference = new tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageReference(p_gameEntity);
		return l_stageReference;
	}
	,destroy: function(p_object) {
	}
	,update: function(p_object,p_gameEntity) {
		if(p_object == null) return;
		var l_stageReference;
		l_stageReference = js_Boot.__cast(p_object , tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageReference);
		this.updateState(l_stageReference,p_gameEntity,"test");
		this.updateState(l_stageReference,p_gameEntity,"width");
		this.updateState(l_stageReference,p_gameEntity,"height");
		l_stageReference.layoutRoot.update();
		l_stageReference.layoutRoot.explicitWidth = flambe_System.get_stage().get_width();
		l_stageReference.layoutRoot.explicitHeight = flambe_System.get_stage().get_height();
		var _g = 0;
		var _g1 = p_gameEntity.getChildren();
		while(_g < _g1.length) {
			var f_stageChildEntity = _g1[_g];
			++_g;
			this.addTo(f_stageChildEntity,l_stageReference);
		}
	}
	,updateState: function(p_object,p_gameEntity,p_state) {
		if(p_object == null) return;
		var l_activeStageReference;
		l_activeStageReference = js_Boot.__cast(p_object , tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveStageReference);
		switch(p_state) {
		case "width":
			break;
		case "height":
			break;
		}
	}
	,addTo: function(p_objectChild,p_objectParent) {
		if(p_objectParent == null) return;
		var l_stageReference;
		l_stageReference = js_Boot.__cast(p_objectParent , tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageReference);
		var l_stageChildEntity;
		l_stageChildEntity = js_Boot.__cast(p_objectChild , tools_spark_sliced_services_std_logic_gde_core_GameEntity);
		if(l_stageChildEntity.getState("displayType") == "View") this._addView(l_stageReference,this._activeReferenceMediator.createViewReference(l_stageChildEntity),l_stageChildEntity); else if(l_stageChildEntity.getState("displayType") == "StageArea") this._addStageArea(l_stageReference,this._activeReferenceMediator.createStageAreaReference(l_stageChildEntity),l_stageChildEntity); else tools_spark_Console.warn("A child of a Stage gameEntity is NOT a View or a StageArea! Ignoring...");
	}
	,removeFrom: function(p_objectChild,p_objectParent) {
		if(p_objectParent == null) return;
		var l_stageReference;
		l_stageReference = js_Boot.__cast(p_objectParent , tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveStageReference);
		var l_stageChildEntity;
		l_stageChildEntity = js_Boot.__cast(p_objectChild , tools_spark_sliced_services_std_logic_gde_core_GameEntity);
		if(l_stageChildEntity.getState("displayType") == "View") this._removeView(l_stageReference,l_stageChildEntity); else if(l_stageChildEntity.getState("displayType") == "StageArea") this._removeStageArea(l_stageReference,l_stageChildEntity); else tools_spark_Console.warn("A child of a Stage gameEntity is NOT a View or a StageArea! Ignoring...");
	}
	,_addView: function(p_stageReference,p_viewReference,p_viewEntity) {
		if(this._activeReferenceMediator.getActiveViewReference(p_viewEntity) != null) tools_spark_Console.warn("This view object [" + Std.string(p_viewEntity.getState("name")) + "] is already bound to the Active Stage. Ignoring..."); else if(p_viewEntity.getState("scene") == null || p_viewEntity.getState("camera") == null) tools_spark_Console.warn("This view object [" + Std.string(p_viewEntity.getState("name")) + "] is not ready yet (missing camera or scene). Ignoring..."); else {
			p_stageReference.addView(p_viewReference);
			this._activeReferenceMediator.viewReferenceManager.update(p_viewReference,p_viewEntity);
		}
	}
	,_addStageArea: function(p_stageReference,p_stageAreaReference,p_stageAreaEntity) {
		if(this._activeReferenceMediator.getActiveStageAreaReference(p_stageAreaEntity) != null) tools_spark_Console.warn("This stageArea object [" + Std.string(p_stageAreaEntity.getState("name")) + "] is already bound to the Active Stage. Ignoring..."); else {
			p_stageReference.addStageArea(p_stageAreaReference);
			this._activeReferenceMediator.stageAreaReferenceManager.update(p_stageAreaReference,p_stageAreaEntity);
		}
	}
	,_removeView: function(p_stageReference,p_viewEntity) {
		var l_activeViewReference = this._activeReferenceMediator.getActiveViewReference(p_viewEntity);
		if(l_activeViewReference == null) tools_spark_Console.warn("This view object [" + Std.string(p_viewEntity.getState("name")) + "] is not bound to the Active Stage. Ignoring Remove View..."); else {
			p_stageReference.removeView(l_activeViewReference);
			this._activeReferenceMediator.viewReferenceManager.destroy(l_activeViewReference);
		}
	}
	,_removeStageArea: function(p_stageReference,p_stageAreaEntity) {
		var l_activeStageAreaReference = this._activeReferenceMediator.getActiveStageAreaReference(p_stageAreaEntity);
		if(l_activeStageAreaReference == null) tools_spark_Console.warn("This stageArea object [" + Std.string(p_stageAreaEntity.getState("name")) + "] is not bound to the Active Stage. Ignoring Remove StageArea..."); else p_stageReference.removeStageArea(l_activeStageAreaReference);
	}
	,__class__: tools_spark_sliced_services_std_display_managers_core_StageReferenceManager
};
var tools_spark_sliced_services_std_display_managers_core_ViewReferenceManager = function(p_activeReferenceMediator) {
	this._activeReferenceMediator = p_activeReferenceMediator;
};
$hxClasses["tools.spark.sliced.services.std.display.managers.core.ViewReferenceManager"] = tools_spark_sliced_services_std_display_managers_core_ViewReferenceManager;
tools_spark_sliced_services_std_display_managers_core_ViewReferenceManager.__name__ = ["tools","spark","sliced","services","std","display","managers","core","ViewReferenceManager"];
tools_spark_sliced_services_std_display_managers_core_ViewReferenceManager.__interfaces__ = [tools_spark_sliced_services_std_display_managers_interfaces_IDisplayObjectManager];
tools_spark_sliced_services_std_display_managers_core_ViewReferenceManager.prototype = {
	create: function(p_gameEntity) {
		var l_viewReference = new tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveViewReference(p_gameEntity);
		return l_viewReference;
	}
	,destroy: function(p_object) {
		if(p_object == null) return;
		var l_viewReference;
		l_viewReference = js_Boot.__cast(p_object , tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveViewReference);
		if(l_viewReference.renderer != null) l_viewReference.renderer.destroyView(l_viewReference.viewEntity); else tools_spark_Console.error("Tried to remove View from renderer, but view wasn't assigned to one. Ignoring...");
	}
	,update: function(p_object,p_gameEntity) {
		if(p_object == null) return;
		var l_viewReference;
		l_viewReference = js_Boot.__cast(p_object , tools_spark_sliced_services_std_display_active_$displayentity_$references_interfaces_IActiveViewReference);
		this.updateState(l_viewReference,p_gameEntity,"scene");
		this.updateState(l_viewReference,p_gameEntity,"camera");
		l_viewReference.layoutElement.update();
		this._updateRenderer(l_viewReference);
	}
	,updateState: function(p_object,p_gameEntity,p_state) {
		if(p_object == null) return;
		switch(p_state) {
		case "scene":
			this._updateRenderer(js_Boot.__cast(p_object , tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveViewReference));
			break;
		case "camera":
			this._updateRenderer(js_Boot.__cast(p_object , tools_spark_sliced_services_std_display_active_$displayentity_$references_core_ActiveViewReference));
			break;
		}
	}
	,_updateRenderer: function(p_viewReference) {
		if(p_viewReference.renderer == null) {
			if(p_viewReference.viewEntity.getState("renderer") != "Implicit") {
				var key = p_viewReference.viewEntity.getState("renderer");
				p_viewReference.renderer = this._activeReferenceMediator.display.platformRendererSet.get(key);
			} else tools_spark_Console.error("Implicit Renderer selection has not been implemented yet. View " + Std.string(p_viewReference.viewEntity.getState("name")) + " cannot be rendered!");
			if(p_viewReference.renderer != null) p_viewReference.renderer.createView(p_viewReference.viewEntity); else tools_spark_Console.error("Could not create renderer: " + Std.string(p_viewReference.viewEntity.getState("renderer")) + ".");
		}
	}
	,addTo: function(p_objectChild,p_objectParent) {
		if(p_objectParent == null) return;
	}
	,removeFrom: function(p_objectChild,p_objectParent) {
		if(p_objectParent == null) return;
	}
	,__class__: tools_spark_sliced_services_std_display_managers_core_ViewReferenceManager
};
var tools_spark_sliced_services_std_display_renderers_interfaces_IRenderer = function() { };
$hxClasses["tools.spark.sliced.services.std.display.renderers.interfaces.IRenderer"] = tools_spark_sliced_services_std_display_renderers_interfaces_IRenderer;
tools_spark_sliced_services_std_display_renderers_interfaces_IRenderer.__name__ = ["tools","spark","sliced","services","std","display","renderers","interfaces","IRenderer"];
tools_spark_sliced_services_std_display_renderers_interfaces_IRenderer.prototype = {
	__class__: tools_spark_sliced_services_std_display_renderers_interfaces_IRenderer
};
var tools_spark_sliced_services_std_display_renderers_core_ARenderer = function() {
	this._aRendererInit();
};
$hxClasses["tools.spark.sliced.services.std.display.renderers.core.ARenderer"] = tools_spark_sliced_services_std_display_renderers_core_ARenderer;
tools_spark_sliced_services_std_display_renderers_core_ARenderer.__name__ = ["tools","spark","sliced","services","std","display","renderers","core","ARenderer"];
tools_spark_sliced_services_std_display_renderers_core_ARenderer.__interfaces__ = [tools_spark_sliced_services_std_display_renderers_interfaces_IRenderer];
tools_spark_sliced_services_std_display_renderers_core_ARenderer.prototype = {
	_aRendererInit: function() {
	}
	,getRealObject: function(p_gameEntity) {
		return null;
	}
	,__class__: tools_spark_sliced_services_std_display_renderers_core_ARenderer
};
var tools_spark_sliced_services_std_display_renderers_interfaces_IDimensionSpecificRenderer = function() { };
$hxClasses["tools.spark.sliced.services.std.display.renderers.interfaces.IDimensionSpecificRenderer"] = tools_spark_sliced_services_std_display_renderers_interfaces_IDimensionSpecificRenderer;
tools_spark_sliced_services_std_display_renderers_interfaces_IDimensionSpecificRenderer.__name__ = ["tools","spark","sliced","services","std","display","renderers","interfaces","IDimensionSpecificRenderer"];
tools_spark_sliced_services_std_display_renderers_interfaces_IDimensionSpecificRenderer.__interfaces__ = [tools_spark_sliced_services_std_display_renderers_interfaces_IRenderer];
var tools_spark_sliced_services_std_display_renderers_core_dimension_A2_$5DRenderer = function() {
	tools_spark_sliced_services_std_display_renderers_core_ARenderer.call(this);
	this._a2DRendererInit();
};
$hxClasses["tools.spark.sliced.services.std.display.renderers.core.dimension.A2_5DRenderer"] = tools_spark_sliced_services_std_display_renderers_core_dimension_A2_$5DRenderer;
tools_spark_sliced_services_std_display_renderers_core_dimension_A2_$5DRenderer.__name__ = ["tools","spark","sliced","services","std","display","renderers","core","dimension","A2_5DRenderer"];
tools_spark_sliced_services_std_display_renderers_core_dimension_A2_$5DRenderer.__interfaces__ = [tools_spark_sliced_services_std_display_renderers_interfaces_IDimensionSpecificRenderer];
tools_spark_sliced_services_std_display_renderers_core_dimension_A2_$5DRenderer.__super__ = tools_spark_sliced_services_std_display_renderers_core_ARenderer;
tools_spark_sliced_services_std_display_renderers_core_dimension_A2_$5DRenderer.prototype = $extend(tools_spark_sliced_services_std_display_renderers_core_ARenderer.prototype,{
	_a2DRendererInit: function() {
	}
	,__class__: tools_spark_sliced_services_std_display_renderers_core_dimension_A2_$5DRenderer
});
var tools_spark_sliced_services_std_display_renderers_interfaces_ILibrarySpecificRenderer = function() { };
$hxClasses["tools.spark.sliced.services.std.display.renderers.interfaces.ILibrarySpecificRenderer"] = tools_spark_sliced_services_std_display_renderers_interfaces_ILibrarySpecificRenderer;
tools_spark_sliced_services_std_display_renderers_interfaces_ILibrarySpecificRenderer.__name__ = ["tools","spark","sliced","services","std","display","renderers","interfaces","ILibrarySpecificRenderer"];
tools_spark_sliced_services_std_display_renderers_interfaces_ILibrarySpecificRenderer.__interfaces__ = [tools_spark_sliced_services_std_display_renderers_interfaces_IDimensionSpecificRenderer];
tools_spark_sliced_services_std_display_renderers_interfaces_ILibrarySpecificRenderer.prototype = {
	__class__: tools_spark_sliced_services_std_display_renderers_interfaces_ILibrarySpecificRenderer
};
var tools_spark_sliced_services_std_display_renderers_core_library_AFlambe2_$5DRenderer = function() {
	tools_spark_sliced_services_std_display_renderers_core_dimension_A2_$5DRenderer.call(this);
	this._aFlambe2_5dRendererInit();
};
$hxClasses["tools.spark.sliced.services.std.display.renderers.core.library.AFlambe2_5DRenderer"] = tools_spark_sliced_services_std_display_renderers_core_library_AFlambe2_$5DRenderer;
tools_spark_sliced_services_std_display_renderers_core_library_AFlambe2_$5DRenderer.__name__ = ["tools","spark","sliced","services","std","display","renderers","core","library","AFlambe2_5DRenderer"];
tools_spark_sliced_services_std_display_renderers_core_library_AFlambe2_$5DRenderer.__interfaces__ = [tools_spark_sliced_services_std_display_renderers_interfaces_ILibrarySpecificRenderer];
tools_spark_sliced_services_std_display_renderers_core_library_AFlambe2_$5DRenderer.__super__ = tools_spark_sliced_services_std_display_renderers_core_dimension_A2_$5DRenderer;
tools_spark_sliced_services_std_display_renderers_core_library_AFlambe2_$5DRenderer.prototype = $extend(tools_spark_sliced_services_std_display_renderers_core_dimension_A2_$5DRenderer.prototype,{
	_aFlambe2_5dRendererInit: function() {
		this._internalGraphics = this._platform.getRenderer().graphics;
		if(this._internalGraphics == null) tools_spark_Console.error("Flambe renderer does NOT have internal graphics!");
		this._views = new haxe_ds_ObjectMap();
		this._scenes = new haxe_ds_ObjectMap();
		this._cameras = new haxe_ds_ObjectMap();
		this._objects = new haxe_ds_ObjectMap();
		this._viewManager = new tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DViewManager(this,this._internalGraphics);
		this._sceneManager = new tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DSceneManager(this);
		this._cameraManager = new tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DCameraManager(this);
		this._objectManager = new tools_spark_sliced_services_std_display_managers_core_Flambe2_$5DObjectManager(this);
	}
	,renderView: function(p_viewEntity) {
		this._views.get(p_viewEntity).render();
	}
	,createView: function(p_viewEntity) {
		if(this._views.get(p_viewEntity) != null) tools_spark_Console.warn("View " + Std.string(p_viewEntity.getState("name")) + " has already been added to this Flambe2_5DRenderer. Ignoring..."); else {
			var v;
			v = js_Boot.__cast(this._viewManager.create(p_viewEntity) , tools_spark_framework_flambe2_$5D_FlambeView2_$5D);
			this._views.set(p_viewEntity,v);
			v;
		}
		return this._views.get(p_viewEntity);
	}
	,destroyView: function(p_viewEntity) {
		if(this._views.get(p_viewEntity) == null) tools_spark_Console.warn("View " + Std.string(p_viewEntity.getState("name")) + " has not been added to this Flambe2_5DRenderer. Ignoring destroyView..."); else {
			this._viewManager.destroy(this._views.get(p_viewEntity));
			{
				this._views.set(p_viewEntity,null);
				null;
			}
		}
	}
	,createScene: function(p_sceneEntity) {
		if(this._scenes.get(p_sceneEntity) != null) tools_spark_Console.warn("Scene " + Std.string(p_sceneEntity.getState("name")) + " has already been added to this Flambe2_5DRenderer. Ignoring..."); else {
			var v;
			v = js_Boot.__cast(this._sceneManager.create(p_sceneEntity) , tools_spark_framework_flambe2_$5D_FlambeScene2_$5D);
			this._scenes.set(p_sceneEntity,v);
			v;
		}
		return this._scenes.get(p_sceneEntity);
	}
	,createCamera: function(p_cameraEntity) {
		if(this._cameras.get(p_cameraEntity) != null) tools_spark_Console.warn("Camera " + Std.string(p_cameraEntity.getState("name")) + " has already been added to this Flambe2_5DRenderer. Ignoring..."); else {
			var v;
			v = js_Boot.__cast(this._cameraManager.create(p_cameraEntity) , tools_spark_framework_flambe2_$5D_FlambeCamera2_$5D);
			this._cameras.set(p_cameraEntity,v);
			v;
		}
		return this._cameras.get(p_cameraEntity);
	}
	,createObject: function(p_objectEntity) {
		if(p_objectEntity.getState("displayType") == "Entity") {
			if(this._objects.get(p_objectEntity) == null) {
				var v;
				v = js_Boot.__cast(this._objectManager.create(p_objectEntity) , tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D);
				this._objects.set(p_objectEntity,v);
				v;
			}
			return this._objects.get(p_objectEntity);
		} else return null;
	}
	,addChild: function(p_parentEntity,p_childEntity) {
		var _g = p_parentEntity.getState("displayType");
		switch(_g) {
		case "Scene":
			if(this._scenes.get(p_parentEntity) != null) this._sceneManager.addTo(this.createObject(p_childEntity),this._scenes.get(p_parentEntity));
			break;
		case "Entity":
			if(this._objects.get(p_parentEntity) != null) this._objectManager.addTo(this.createObject(p_childEntity),this._objects.get(p_parentEntity));
			break;
		default:
			tools_spark_Console.warn("AFlambe2_5DRenderer: Unhandled add child request: " + Std.string(p_parentEntity.getState("displayType")));
		}
	}
	,insertChild: function(p_parentEntity,p_childEntity,p_index) {
		var _g = p_parentEntity.getState("displayType");
		switch(_g) {
		case "Scene":
			if(this._scenes.get(p_parentEntity) != null) this._sceneManager.insertTo(this.createObject(p_childEntity),this._scenes.get(p_parentEntity),p_index);
			break;
		case "Entity":
			if(this._objects.get(p_parentEntity) != null) this._objectManager.insertTo(this.createObject(p_childEntity),this._objects.get(p_parentEntity),p_index);
			break;
		default:
			tools_spark_Console.warn("AFlambe2_5DRenderer: Unhandled insert child request: " + Std.string(p_parentEntity.getState("displayType")));
		}
	}
	,removeChild: function(p_parentEntity,p_childEntity) {
		var _g = p_parentEntity.getState("displayType");
		switch(_g) {
		case "Scene":
			if(this._scenes.get(p_parentEntity) != null) this._sceneManager.removeFrom(this._objects.get(p_childEntity),this._scenes.get(p_parentEntity));
			break;
		case "Entity":
			if(this._objects.get(p_parentEntity) != null) this._objectManager.removeFrom(this._objects.get(p_childEntity),this._objects.get(p_parentEntity));
			break;
		default:
			tools_spark_Console.warn("AFlambe2_5DRenderer: Unhandled remove child request: " + Std.string(p_parentEntity.getState("displayType")));
		}
	}
	,updateState: function(p_objectEntity,p_state) {
		if(this._objects.get(p_objectEntity) != null) this._objectManager.updateState(this._objects.get(p_objectEntity),p_objectEntity,p_state); else if(this._views.get(p_objectEntity) != null) this._viewManager.updateState(this._views.get(p_objectEntity),p_objectEntity,p_state); else if(this._cameras.get(p_objectEntity) != null) this._cameraManager.updateState(this._cameras.get(p_objectEntity),p_objectEntity,p_state);
	}
	,getRealObject: function(p_gameEntity) {
		if(this._objects.get(p_gameEntity) != null) return this._objects.get(p_gameEntity); else if(this._views.get(p_gameEntity) != null) return this._views.get(p_gameEntity); else if(this._cameras.get(p_gameEntity) != null) return this._cameras.get(p_gameEntity); else if(this._scenes.get(p_gameEntity) != null) return this._scenes.get(p_gameEntity); else return null;
	}
	,__class__: tools_spark_sliced_services_std_display_renderers_core_library_AFlambe2_$5DRenderer
});
var tools_spark_sliced_services_std_display_renderers_core_library_ANativeControls2_$5DRenderer = function() {
	tools_spark_sliced_services_std_display_renderers_core_dimension_A2_$5DRenderer.call(this);
};
$hxClasses["tools.spark.sliced.services.std.display.renderers.core.library.ANativeControls2_5DRenderer"] = tools_spark_sliced_services_std_display_renderers_core_library_ANativeControls2_$5DRenderer;
tools_spark_sliced_services_std_display_renderers_core_library_ANativeControls2_$5DRenderer.__name__ = ["tools","spark","sliced","services","std","display","renderers","core","library","ANativeControls2_5DRenderer"];
tools_spark_sliced_services_std_display_renderers_core_library_ANativeControls2_$5DRenderer.__interfaces__ = [tools_spark_sliced_services_std_display_renderers_interfaces_ILibrarySpecificRenderer];
tools_spark_sliced_services_std_display_renderers_core_library_ANativeControls2_$5DRenderer.__super__ = tools_spark_sliced_services_std_display_renderers_core_dimension_A2_$5DRenderer;
tools_spark_sliced_services_std_display_renderers_core_library_ANativeControls2_$5DRenderer.prototype = $extend(tools_spark_sliced_services_std_display_renderers_core_dimension_A2_$5DRenderer.prototype,{
	renderView: function(p_viewEntity) {
	}
	,createView: function(p_viewEntity) {
		return null;
	}
	,destroyView: function(p_viewEntity) {
	}
	,createScene: function(p_sceneEntity) {
		return null;
	}
	,createCamera: function(p_cameraEntity) {
		return null;
	}
	,createObject: function(p_objectEntity) {
		return null;
	}
	,addChild: function(p_parentEntity,p_childEntity) {
	}
	,insertChild: function(p_parentEntity,p_childEntity,p_index) {
	}
	,removeChild: function(p_parentEntity,p_childEntity) {
	}
	,updateState: function(p_objectEntity,p_state) {
	}
	,__class__: tools_spark_sliced_services_std_display_renderers_core_library_ANativeControls2_$5DRenderer
});
var tools_spark_sliced_services_std_display_renderers_interfaces_IPlatformSpecificRenderer = function() { };
$hxClasses["tools.spark.sliced.services.std.display.renderers.interfaces.IPlatformSpecificRenderer"] = tools_spark_sliced_services_std_display_renderers_interfaces_IPlatformSpecificRenderer;
tools_spark_sliced_services_std_display_renderers_interfaces_IPlatformSpecificRenderer.__name__ = ["tools","spark","sliced","services","std","display","renderers","interfaces","IPlatformSpecificRenderer"];
tools_spark_sliced_services_std_display_renderers_interfaces_IPlatformSpecificRenderer.__interfaces__ = [tools_spark_sliced_services_std_display_renderers_interfaces_ILibrarySpecificRenderer];
var tools_spark_sliced_services_std_display_renderers_core_platform_html_Flambe2_$5DHtmlRenderer = function() {
	this._platform = flambe_platform_html_HtmlPlatform.instance;
	tools_spark_sliced_services_std_display_renderers_core_library_AFlambe2_$5DRenderer.call(this);
	this._flambe2DHtmlRendererInit();
};
$hxClasses["tools.spark.sliced.services.std.display.renderers.core.platform.html.Flambe2_5DHtmlRenderer"] = tools_spark_sliced_services_std_display_renderers_core_platform_html_Flambe2_$5DHtmlRenderer;
tools_spark_sliced_services_std_display_renderers_core_platform_html_Flambe2_$5DHtmlRenderer.__name__ = ["tools","spark","sliced","services","std","display","renderers","core","platform","html","Flambe2_5DHtmlRenderer"];
tools_spark_sliced_services_std_display_renderers_core_platform_html_Flambe2_$5DHtmlRenderer.__interfaces__ = [tools_spark_sliced_services_std_display_renderers_interfaces_IPlatformSpecificRenderer];
tools_spark_sliced_services_std_display_renderers_core_platform_html_Flambe2_$5DHtmlRenderer.__super__ = tools_spark_sliced_services_std_display_renderers_core_library_AFlambe2_$5DRenderer;
tools_spark_sliced_services_std_display_renderers_core_platform_html_Flambe2_$5DHtmlRenderer.prototype = $extend(tools_spark_sliced_services_std_display_renderers_core_library_AFlambe2_$5DRenderer.prototype,{
	_flambe2DHtmlRendererInit: function() {
		tools_spark_Console.log("Creating Flambe 2_5D Html Renderer...");
	}
	,__class__: tools_spark_sliced_services_std_display_renderers_core_platform_html_Flambe2_$5DHtmlRenderer
});
var tools_spark_sliced_services_std_display_renderers_core_platform_html_NativeControlsHtmlRenderer = function() {
	tools_spark_sliced_services_std_display_renderers_core_library_ANativeControls2_$5DRenderer.call(this);
	this._nativeControlsHtmlRendererInit();
};
$hxClasses["tools.spark.sliced.services.std.display.renderers.core.platform.html.NativeControlsHtmlRenderer"] = tools_spark_sliced_services_std_display_renderers_core_platform_html_NativeControlsHtmlRenderer;
tools_spark_sliced_services_std_display_renderers_core_platform_html_NativeControlsHtmlRenderer.__name__ = ["tools","spark","sliced","services","std","display","renderers","core","platform","html","NativeControlsHtmlRenderer"];
tools_spark_sliced_services_std_display_renderers_core_platform_html_NativeControlsHtmlRenderer.__interfaces__ = [tools_spark_sliced_services_std_display_renderers_interfaces_IPlatformSpecificRenderer];
tools_spark_sliced_services_std_display_renderers_core_platform_html_NativeControlsHtmlRenderer.__super__ = tools_spark_sliced_services_std_display_renderers_core_library_ANativeControls2_$5DRenderer;
tools_spark_sliced_services_std_display_renderers_core_platform_html_NativeControlsHtmlRenderer.prototype = $extend(tools_spark_sliced_services_std_display_renderers_core_library_ANativeControls2_$5DRenderer.prototype,{
	_nativeControlsHtmlRendererInit: function() {
		tools_spark_Console.log("Creating Native Controls Html (DOM) Renderer...");
		this._views = new haxe_ds_ObjectMap();
		this._scenes = new haxe_ds_ObjectMap();
		this._cameras = new haxe_ds_ObjectMap();
		this._objects = new haxe_ds_ObjectMap();
		this._viewManager = new tools_spark_sliced_services_std_display_managers_core_DomViewManager(this);
		this._sceneManager = new tools_spark_sliced_services_std_display_managers_core_DomSceneManager(this);
		this._cameraManager = new tools_spark_sliced_services_std_display_managers_core_DomCameraManager(this);
		this._objectManager = new tools_spark_sliced_services_std_display_managers_core_DomObjectManager(this);
	}
	,renderView: function(p_viewEntity) {
		this._views.get(p_viewEntity).render();
	}
	,createView: function(p_viewEntity) {
		if(this._views.get(p_viewEntity) != null) tools_spark_Console.warn("View " + Std.string(p_viewEntity.getState("name")) + " has already been added to this NativeControlsHtmlRenderer. Ignoring createView..."); else {
			var v;
			v = js_Boot.__cast(this._viewManager.create(p_viewEntity) , tools_spark_framework_dom2_$5D_DomView2_$5D);
			this._views.set(p_viewEntity,v);
			v;
		}
		return this._views.get(p_viewEntity);
	}
	,destroyView: function(p_viewEntity) {
		if(this._views.get(p_viewEntity) == null) tools_spark_Console.warn("View " + Std.string(p_viewEntity.getState("name")) + " has not been added to this NativeControlsHtmlRenderer. Ignoring destroyView..."); else {
			this._viewManager.destroy(this._views.get(p_viewEntity));
			{
				this._views.set(p_viewEntity,null);
				null;
			}
		}
	}
	,createScene: function(p_sceneEntity) {
		if(this._scenes.get(p_sceneEntity) != null) tools_spark_Console.warn("Scene " + Std.string(p_sceneEntity.getState("name")) + " has already been added to this NativeControlsHtmlRenderer. Ignoring..."); else {
			var v;
			v = js_Boot.__cast(this._sceneManager.create(p_sceneEntity) , tools_spark_framework_dom2_$5D_DomScene2_$5D);
			this._scenes.set(p_sceneEntity,v);
			v;
		}
		return this._scenes.get(p_sceneEntity);
	}
	,createCamera: function(p_cameraEntity) {
		if(this._cameras.get(p_cameraEntity) != null) tools_spark_Console.warn("Camera " + Std.string(p_cameraEntity.getState("name")) + " has already been added to this NativeControlsHtmlRenderer. Ignoring..."); else {
			var v;
			v = js_Boot.__cast(this._cameraManager.create(p_cameraEntity) , tools_spark_framework_dom2_$5D_DomCamera2_$5D);
			this._cameras.set(p_cameraEntity,v);
			v;
		}
		return this._cameras.get(p_cameraEntity);
	}
	,createObject: function(p_objectEntity) {
		if(p_objectEntity.getState("displayType") == "Entity") {
			if(this._objects.get(p_objectEntity) != null) tools_spark_Console.warn("Object " + Std.string(p_objectEntity.getState("name")) + " has already been added to this NativeControlsHtmlRenderer. Ignoring..."); else {
				var v;
				v = js_Boot.__cast(this._objectManager.create(p_objectEntity) , tools_spark_framework_space2_$5D_core_AObjectContainer2_$5D);
				this._objects.set(p_objectEntity,v);
				v;
			}
			return this._objects.get(p_objectEntity);
		} else return null;
	}
	,addChild: function(p_parentEntity,p_childEntity) {
		var _g = p_parentEntity.getState("displayType");
		switch(_g) {
		case "Scene":
			if(this._scenes.get(p_parentEntity) != null) this._sceneManager.addTo(this.createObject(p_childEntity),this._scenes.get(p_parentEntity));
			break;
		case "Entity":
			if(this._objects.get(p_parentEntity) != null) this._objectManager.addTo(this.createObject(p_childEntity),this._objects.get(p_parentEntity));
			break;
		default:
			tools_spark_Console.warn("NativeControlsHtmlRenderer: Unhandled add child request: " + Std.string(p_parentEntity.getState("displayType")));
		}
	}
	,insertChild: function(p_parentEntity,p_childEntity,p_index) {
		var _g = p_parentEntity.getState("displayType");
		switch(_g) {
		case "Scene":
			if(this._scenes.get(p_parentEntity) != null) this._sceneManager.insertTo(this.createObject(p_childEntity),this._scenes.get(p_parentEntity),p_index);
			break;
		case "Entity":
			if(this._objects.get(p_parentEntity) != null) this._objectManager.insertTo(this.createObject(p_childEntity),this._objects.get(p_parentEntity),p_index);
			break;
		default:
			tools_spark_Console.warn("NativeControlsHtmlRenderer: Unhandled insert child request: " + Std.string(p_parentEntity.getState("displayType")));
		}
	}
	,removeChild: function(p_parentEntity,p_childEntity) {
		var _g = p_parentEntity.getState("displayType");
		switch(_g) {
		case "Scene":
			if(this._scenes.get(p_parentEntity) != null) this._sceneManager.removeFrom(this._objects.get(p_childEntity),this._scenes.get(p_parentEntity));
			break;
		case "Entity":
			if(this._objects.get(p_parentEntity) != null) this._objectManager.removeFrom(this._objects.get(p_childEntity),this._objects.get(p_parentEntity));
			break;
		default:
			tools_spark_Console.warn("NativeControlsHtmlRenderer: Unhandled remove child request: " + Std.string(p_parentEntity.getState("displayType")));
		}
	}
	,updateState: function(p_objectEntity,p_state) {
		if(this._objects.get(p_objectEntity) != null) this._objectManager.updateState(this._objects.get(p_objectEntity),p_objectEntity,p_state); else if(this._views.get(p_objectEntity) != null) this._viewManager.updateState(this._views.get(p_objectEntity),p_objectEntity,p_state);
	}
	,getRealObject: function(p_gameEntity) {
		if(this._objects.get(p_gameEntity) != null) return this._objects.get(p_gameEntity); else if(this._views.get(p_gameEntity) != null) return this._views.get(p_gameEntity); else if(this._cameras.get(p_gameEntity) != null) return this._cameras.get(p_gameEntity); else if(this._scenes.get(p_gameEntity) != null) return this._scenes.get(p_gameEntity); else return null;
	}
	,__class__: tools_spark_sliced_services_std_display_renderers_core_platform_html_NativeControlsHtmlRenderer
});
var tools_spark_sliced_services_std_event_core_Event = function() {
	tools_spark_sliced_core_AService.call(this);
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.event.core.Event"] = tools_spark_sliced_services_std_event_core_Event;
tools_spark_sliced_services_std_event_core_Event.__name__ = ["tools","spark","sliced","services","std","event","core","Event"];
tools_spark_sliced_services_std_event_core_Event.__interfaces__ = [tools_spark_sliced_interfaces_IEvent];
tools_spark_sliced_services_std_event_core_Event.__super__ = tools_spark_sliced_core_AService;
tools_spark_sliced_services_std_event_core_Event.prototype = $extend(tools_spark_sliced_core_AService.prototype,{
	_init: function() {
		var _g = this;
		tools_spark_Console.log("Init Event std Service...");
		this._eventTypeRegisteredTriggers = new haxe_ds_EnumValueMap();
		this._eventEntries = [];
		flambe_System.hidden.get_changed().connect(function(hidden,_) {
			if(hidden) {
				_g._timeBeforePause = flambe_System.get_time();
				_g.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PROJECT_PAUSED);
			} else {
				tools_spark_sliced_core_Sliced.logic.pauseDt = flambe_System.get_time() - _g._timeBeforePause;
				_g.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PROJECT_RESUMED);
			}
		});
	}
	,addTrigger: function(p_gameTrigger) {
		var l_eventType = p_gameTrigger.eventType;
		var l_eventTarget = p_gameTrigger.target;
		if(l_eventTarget == "TargetMe") l_eventTarget = Std.string(p_gameTrigger.parentEntity.uid);
		if(p_gameTrigger.parameter != null) {
			if((function($this) {
				var $r;
				var key = p_gameTrigger.parameter;
				$r = tools_spark_sliced_services_std_logic_gde_interfaces_EventType.keyboardStringToKey.exists(key);
				return $r;
			}(this))) {
				var key1 = p_gameTrigger.parameter;
				p_gameTrigger.parameter = tools_spark_sliced_services_std_logic_gde_interfaces_EventType.keyboardStringToKey.get(key1);
			}
		}
		if(this._eventTypeRegisteredTriggers.exists(l_eventType) == false) {
			var value = new haxe_ds_StringMap();
			this._eventTypeRegisteredTriggers.set(l_eventType,value);
		}
		if(this._eventTypeRegisteredTriggers.get(l_eventType).exists(l_eventTarget) == false) this._eventTypeRegisteredTriggers.get(l_eventType).set(l_eventTarget,[]);
		this._eventTypeRegisteredTriggers.get(l_eventType).get(l_eventTarget).push(p_gameTrigger);
	}
	,raiseEvent: function(p_eventType,p_eventTarget,p_eventParameter) {
		if(this._eventTypeRegisteredTriggers.exists(p_eventType)) {
			var l_eventTargets = [];
			if(p_eventTarget == null) l_eventTargets.push("TargetNone"); else {
				l_eventTargets.push(Std.string(p_eventTarget.uid));
				l_eventTargets.push(Std.string(p_eventTarget.getState("name")));
			}
			var _g = 0;
			while(_g < l_eventTargets.length) {
				var f_eventTarget = l_eventTargets[_g];
				++_g;
				if(this._eventTypeRegisteredTriggers.get(p_eventType).exists(f_eventTarget)) this._eventEntries.push({ eventType : p_eventType, eventTarget : f_eventTarget, parameter : p_eventParameter, pickedObjects : p_eventTarget});
			}
		}
	}
	,_doTriggers: function(p_eventEntry) {
		var _g = 0;
		var _g1 = ((function($this) {
			var $r;
			var key = p_eventEntry.eventType;
			$r = $this._eventTypeRegisteredTriggers.get(key);
			return $r;
		}(this))).get(p_eventEntry.eventTarget);
		while(_g < _g1.length) {
			var gameTrigger = _g1[_g];
			++_g;
			gameTrigger.pickedObject = p_eventEntry.pickedObjects;
			if(gameTrigger.parameter == null || gameTrigger.parameter == p_eventEntry.parameter) gameTrigger.doPass();
		}
	}
	,update: function() {
		while(this._eventEntries.length > 0) this._doTriggers(this._eventEntries.pop());
	}
	,__class__: tools_spark_sliced_services_std_event_core_Event
});
var tools_spark_sliced_services_std_input_core_Input = function() {
	tools_spark_sliced_core_AService.call(this);
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.input.core.Input"] = tools_spark_sliced_services_std_input_core_Input;
tools_spark_sliced_services_std_input_core_Input.__name__ = ["tools","spark","sliced","services","std","input","core","Input"];
tools_spark_sliced_services_std_input_core_Input.__interfaces__ = [tools_spark_sliced_interfaces_IInput];
tools_spark_sliced_services_std_input_core_Input.__super__ = tools_spark_sliced_core_AService;
tools_spark_sliced_services_std_input_core_Input.prototype = $extend(tools_spark_sliced_core_AService.prototype,{
	_init: function() {
		tools_spark_Console.log("Init Input std Service...");
		this.keyboard = new tools_spark_sliced_services_std_input_devices_core_KeyboardDevice();
		this.pointer = new tools_spark_sliced_services_std_input_devices_core_PointerDevice();
		this.mouse = new tools_spark_sliced_services_std_input_devices_core_MouseDevice();
	}
	,update: function() {
		this.keyboard.update();
		this.pointer.update();
		this.mouse.update();
	}
	,__class__: tools_spark_sliced_services_std_input_core_Input
});
var tools_spark_sliced_services_std_input_devices_interfaces_IInputDevice = function() { };
$hxClasses["tools.spark.sliced.services.std.input.devices.interfaces.IInputDevice"] = tools_spark_sliced_services_std_input_devices_interfaces_IInputDevice;
tools_spark_sliced_services_std_input_devices_interfaces_IInputDevice.__name__ = ["tools","spark","sliced","services","std","input","devices","interfaces","IInputDevice"];
var tools_spark_sliced_services_std_input_devices_core_KeyboardDevice = function() {
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.input.devices.core.KeyboardDevice"] = tools_spark_sliced_services_std_input_devices_core_KeyboardDevice;
tools_spark_sliced_services_std_input_devices_core_KeyboardDevice.__name__ = ["tools","spark","sliced","services","std","input","devices","core","KeyboardDevice"];
tools_spark_sliced_services_std_input_devices_core_KeyboardDevice.__interfaces__ = [tools_spark_sliced_services_std_input_devices_interfaces_IInputDevice];
tools_spark_sliced_services_std_input_devices_core_KeyboardDevice.prototype = {
	_init: function() {
		this._keysPressed = [];
		this._keysReleased = [];
		this._keysDown = new haxe_ds_EnumValueMap();
		this._keysJustPressed = new haxe_ds_EnumValueMap();
		this._keysJustReleased = new haxe_ds_EnumValueMap();
		flambe_System.get_keyboard().down.connect($bind(this,this._onKeyDown));
		flambe_System.get_keyboard().up.connect($bind(this,this._onKeyUp));
	}
	,_onKeyDown: function(p_keyboardEvent) {
		this._keysPressed.push(p_keyboardEvent.key);
		this._keysDown.set(p_keyboardEvent.key,true);
	}
	,_onKeyUp: function(p_keyboardEvent) {
		this._keysReleased.push(p_keyboardEvent.key);
		this._keysDown.remove(p_keyboardEvent.key);
	}
	,update: function() {
		this._keysJustPressed = new haxe_ds_EnumValueMap();
		this._keysJustReleased = new haxe_ds_EnumValueMap();
		while(this._keysPressed.length > 0) {
			var w_keyDown = this._keysPressed.pop();
			{
				this._keysJustPressed.set(w_keyDown,true);
				true;
			}
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_PRESSED,null,w_keyDown);
		}
		while(this._keysReleased.length > 0) {
			var w_keyUp = this._keysReleased.pop();
			{
				this._keysJustReleased.set(w_keyUp,true);
				true;
			}
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_RELEASED,null,w_keyUp);
		}
		var $it0 = this._keysDown.keys();
		while( $it0.hasNext() ) {
			var keyDown = $it0.next();
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_DOWN,null,keyDown);
		}
	}
	,registerTrigger: function(p_eventType,p_eventFilter) {
	}
	,isKeyDown: function(type) {
		return flambe_System.get_keyboard().isDown(type);
	}
	,isKeyPressed: function(type) {
		return this._keysJustPressed.exists(type);
	}
	,isKeyReleased: function(type) {
		return this._keysJustReleased.exists(type);
	}
	,__class__: tools_spark_sliced_services_std_input_devices_core_KeyboardDevice
};
var tools_spark_sliced_services_std_input_devices_core_MouseDevice = function() {
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.input.devices.core.MouseDevice"] = tools_spark_sliced_services_std_input_devices_core_MouseDevice;
tools_spark_sliced_services_std_input_devices_core_MouseDevice.__name__ = ["tools","spark","sliced","services","std","input","devices","core","MouseDevice"];
tools_spark_sliced_services_std_input_devices_core_MouseDevice.__interfaces__ = [tools_spark_sliced_services_std_input_devices_interfaces_IInputDevice];
tools_spark_sliced_services_std_input_devices_core_MouseDevice.prototype = {
	getScroll: function() {
		return this.get_scroll();
	}
	,_init: function() {
		flambe_System.get_mouse().scroll.connect($bind(this,this._onScroll));
		flambe_System.get_mouse().down.connect($bind(this,this._onMouseButtonDown));
		this._oldScroll = 0;
		this._scrollTriggered = false;
		this._mouseLeftDown = false;
		this._mouseRightDown = false;
	}
	,update: function() {
		if(this._scrollTriggered) {
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_SCROLL);
			this._scrollTriggered = false;
		} else this._oldScroll = 0;
		if(this._mouseLeftDown) {
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT_DOWN);
			this._mouseLeftDown = false;
		}
		if(this._mouseRightDown) {
			tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_RIGHT_DOWN);
			this._mouseRightDown = false;
		}
	}
	,get_scroll: function() {
		return this._oldScroll;
	}
	,_onScroll: function(p_scrollValue) {
		this._scrollTriggered = true;
		this._oldScroll = p_scrollValue;
	}
	,_onMouseButtonDown: function(p_mouseEvent) {
		if(p_mouseEvent.button == flambe_input_MouseButton.Left) this._mouseLeftDown = true; else if(p_mouseEvent.button == flambe_input_MouseButton.Right) this._mouseRightDown = true;
		this.lastMouseButton = p_mouseEvent.button;
	}
	,registerTrigger: function(p_eventType,p_eventFilter) {
	}
	,isDown: function(p_button) {
		return flambe_System.get_mouse().isDown(p_button);
	}
	,__class__: tools_spark_sliced_services_std_input_devices_core_MouseDevice
	,__properties__: {get_scroll:"get_scroll"}
};
var tools_spark_sliced_services_std_input_devices_core_PointerDevice = function() {
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.input.devices.core.PointerDevice"] = tools_spark_sliced_services_std_input_devices_core_PointerDevice;
tools_spark_sliced_services_std_input_devices_core_PointerDevice.__name__ = ["tools","spark","sliced","services","std","input","devices","core","PointerDevice"];
tools_spark_sliced_services_std_input_devices_core_PointerDevice.__interfaces__ = [tools_spark_sliced_services_std_input_devices_interfaces_IInputDevice];
tools_spark_sliced_services_std_input_devices_core_PointerDevice.prototype = {
	_init: function() {
		this._registeredTriggers = new haxe_ds_EnumValueMap();
	}
	,update: function() {
		this._oldX = this.currentX;
		this._oldY = this.currentY;
		this.currentX = flambe_System.get_pointer().get_x();
		this.currentY = flambe_System.get_pointer().get_y();
	}
	,distX: function() {
		return this.currentX - this._oldX;
	}
	,distY: function() {
		return this.currentY - this._oldY;
	}
	,isDown: function() {
		return flambe_System.get_pointer().isDown();
	}
	,_setTrigger: function(p_eventType,p_eventFilter) {
		if(this._registeredTriggers.get(p_eventType) == null) {
			var v = new haxe_ds_ObjectMap();
			this._registeredTriggers.set(p_eventType,v);
			v;
		}
		var this1 = this._registeredTriggers.get(p_eventType);
		this1.set(p_eventFilter,p_eventFilter);
		p_eventFilter;
	}
	,_getTrigger: function(p_eventType,p_eventFilter) {
		if(this._registeredTriggers.get(p_eventType) == null) return null;
		var this1 = this._registeredTriggers.get(p_eventType);
		return this1.get(p_eventFilter);
	}
	,registerTrigger: function(p_eventType,p_eventFilter) {
		this._setTrigger(p_eventType,p_eventFilter);
	}
	,submitPointerEvent: function(p_eventType,p_eventFilter) {
		tools_spark_sliced_core_Sliced.event.raiseEvent(p_eventType,p_eventFilter);
	}
	,_onMove: function(p) {
		tools_spark_Console.error("PointerMove: " + p.viewX + ", " + p.viewY);
	}
	,__class__: tools_spark_sliced_services_std_input_devices_core_PointerDevice
};
var tools_spark_sliced_services_std_logic_core_Logic = function() {
	tools_spark_sliced_core_AService.call(this);
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.logic.core.Logic"] = tools_spark_sliced_services_std_logic_core_Logic;
tools_spark_sliced_services_std_logic_core_Logic.__name__ = ["tools","spark","sliced","services","std","logic","core","Logic"];
tools_spark_sliced_services_std_logic_core_Logic.__interfaces__ = [tools_spark_sliced_interfaces_ILogic];
tools_spark_sliced_services_std_logic_core_Logic.__super__ = tools_spark_sliced_core_AService;
tools_spark_sliced_services_std_logic_core_Logic.prototype = $extend(tools_spark_sliced_core_AService.prototype,{
	_init: function() {
		tools_spark_Console.log("Init Logic std Service...");
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.init();
		this.gameFactory = new tools_spark_sliced_services_std_logic_gde_core_GameFactory();
		this.levelManager = new tools_spark_sliced_services_std_logic_level_$manager_core_LevelManager();
		this.rootGameEntitiesRunning = new haxe_ds_StringMap();
		this.rootGameEntitiesPaused = new haxe_ds_StringMap();
		this.gameEntitiesByName = new haxe_ds_StringMap();
		this.registerToBackupActive = false;
	}
	,createInterpreters: function() {
		this.scriptInterpreter = new tools_spark_sliced_services_std_logic_interpreter_core_platform_html_HaxeJsInterpreter();
		this.gmlInterpreter = new tools_spark_sliced_services_std_logic_interpreter_core_GmlInterpreter();
	}
	,update: function() {
		var $it0 = this.rootGameEntitiesRunning.iterator();
		while( $it0.hasNext() ) {
			var gameEntity = $it0.next();
			gameEntity.doActions();
		}
	}
	,startAction: function(entity,actionId) {
		return entity.startAction(actionId);
	}
	,createAndRun: function(p_gameEntityUrl) {
		var v = this.gameFactory.createGameEntity(p_gameEntityUrl);
		this.rootGameEntitiesRunning.set(p_gameEntityUrl,v);
		v;
		tools_spark_Console.log("Logic Service: Create and Running entity: " + p_gameEntityUrl);
	}
	,createAndPause: function(p_gameEntityUrl) {
		var v = this.gameFactory.createGameEntity(p_gameEntityUrl);
		this.rootGameEntitiesPaused.set(p_gameEntityUrl,v);
		v;
	}
	,create: function(p_gameEntityUrl,p_dontCache) {
		if(p_dontCache == null) p_dontCache = false;
		return this.gameFactory.createGameEntity(p_gameEntityUrl,null,p_dontCache);
	}
	,createFromXml: function(p_xml,p_cloneFirst) {
		if(p_cloneFirst == null) p_cloneFirst = true;
		if(p_cloneFirst) {
			var _clonedXml = this.xml_clone(p_xml);
			return this.gameFactory.createGameEntity(null,_clonedXml);
		} else return this.gameFactory.createGameEntity(null,p_xml);
	}
	,interpet: function(p_script,p_gameEntity,p_gameBase) {
		var l_parentEntity = null;
		if(p_gameEntity != null) l_parentEntity = p_gameEntity.parentEntity;
		return this.scriptInterpreter.runExpr(this.scriptInterpreter.hashExpr(p_script),p_gameEntity,l_parentEntity,p_gameBase);
	}
	,getAllEntitiesByName: function(p_stateName) {
		return this.gameEntitiesByName.get(p_stateName);
	}
	,getEntityByName: function(p_stateName) {
		if(this.gameEntitiesByName.exists(p_stateName)) return this.gameEntitiesByName.get(p_stateName)[this.gameEntitiesByName.get(p_stateName).length - 1]; else return null;
	}
	,queryGameEntity: function(p_gameEntity,p_query,queryArgument,p_bAllRenderers,p_bAllInstances) {
		if(p_bAllInstances == null) p_bAllInstances = false;
		if(p_bAllRenderers == null) p_bAllRenderers = false;
		if(p_bAllRenderers == false && p_bAllInstances == false) {
			var l_realObject = tools_spark_sliced_core_Sliced.display.getSpace2_5Object(p_gameEntity);
			if(l_realObject != null) return l_realObject.query(p_query,queryArgument); else return null;
		} else return null;
	}
	,registerEntityByName: function(p_entity) {
		if(p_entity.getState("name") != null) {
			var l_entityName = p_entity.getState("name");
			var l_gameEntitiesHash;
			if(this.registerToBackupActive) l_gameEntitiesHash = this.gameEntitiesByNameBackup; else l_gameEntitiesHash = this.gameEntitiesByName;
			if(l_gameEntitiesHash.exists(l_entityName) == false) {
				var value = [];
				l_gameEntitiesHash.set(l_entityName,value);
			}
			l_gameEntitiesHash.get(l_entityName).push(p_entity);
		}
	}
	,deregisterEntityNameClass: function(p_entity) {
		if(p_entity.getState("name") != null) {
			var l_entityName = p_entity.getState("name");
			var l_gameEntitiesHash;
			if(this.registerToBackupActive) l_gameEntitiesHash = this.gameEntitiesByNameBackup; else l_gameEntitiesHash = this.gameEntitiesByName;
			if(l_gameEntitiesHash.exists(l_entityName)) l_gameEntitiesHash.remove(l_entityName);
		}
	}
	,get_storage: function() {
		return flambe_System.get_storage();
	}
	,getStorage: function() {
		return flambe_System.get_storage();
	}
	,getExternal: function() {
		return flambe_System.get_external();
	}
	,getTime: function() {
		return flambe_System.get_time();
	}
	,random: function(p_from,p_to) {
		return p_from + Std.random(p_to - p_from + 1);
	}
	,replace: function(p_source,p_regex,p_regexParameters,p_replaceWith) {
		var l_regEx = new EReg(p_regex,p_regexParameters);
		return l_regEx.replace(p_source,p_replaceWith);
	}
	,getDt: function() {
		return tools_spark_sliced_core_Sliced.dt;
	}
	,reflectField: function(p_object,p_field) {
		return Reflect.getProperty(p_object,p_field);
	}
	,reflectFieldOfField: function(p_object,p_field,p_field2) {
		return Reflect.getProperty(Reflect.getProperty(p_object,p_field),p_field2);
	}
	,copyObject: function(p_object) {
		return Reflect.copy(p_object);
	}
	,insertStr: function(a,b,position) {
		return HxOverrides.substr(a,0,position) + b + HxOverrides.substr(a,position,null);
	}
	,lerp: function(start,end,percent) {
		if(start == end) return start;
		return (end - start) * percent + start;
	}
	,formatStr: function(p_par) {
		var p_string = Std.string(p_par);
		if(p_string.length > 9) {
			p_string = this.insertStr(p_string,",",p_string.length - 9);
			p_string = this.insertStr(p_string,",",p_string.length - 6);
			p_string = this.insertStr(p_string,",",p_string.length - 3);
		} else if(p_string.length > 6) {
			p_string = this.insertStr(p_string,",",p_string.length - 6);
			p_string = this.insertStr(p_string,",",p_string.length - 3);
		} else if(p_string.length > 3) p_string = this.insertStr(p_string,",",p_string.length - 3);
		return p_string;
	}
	,getDbaFlambeId: function(p_asset) {
		return Std.string(p_asset.type) + ":" + Std.string(p_asset.name);
	}
	,xmlToString: function(p_object) {
		return p_object.toString();
	}
	,xml_createDocument: function() {
		return Xml.createDocument();
	}
	,xml_clone: function(p_xml) {
		return Xml.parse(this.xmlToString(p_xml)).firstElement();
	}
	,xml_from_file: function(p_file) {
		return Xml.parse(p_file.toString()).firstElement();
	}
	,xml_getElements: function(p_xml,p_xmlNodes) {
		var l_xmlNode = p_xml;
		var _g = 0;
		while(_g < p_xmlNodes.length) {
			var xmlNodeStr = p_xmlNodes[_g];
			++_g;
			l_xmlNode = this.xml_getElement(l_xmlNode,xmlNodeStr);
			if(l_xmlNode == null) return null;
		}
		return l_xmlNode;
	}
	,xml_getAllStates: function(p_xml,p_merge) {
		var l_states = new haxe_ds_StringMap();
		var l_groupName;
		if(p_merge) l_groupName = "_States"; else l_groupName = "States";
		var l_statesNode = this.xml_getElement(p_xml,l_groupName);
		if(l_statesNode != null) {
			var l_statesChildren = l_statesNode.elementsNamed("State");
			while(l_statesChildren.hasNext()) {
				var f_state = l_statesChildren.next();
				var f_id = this.xml_getElement(f_state,"Id").firstChild().get_nodeValue();
				var f_type = this.xml_getElement(f_state,"Type").firstChild().get_nodeValue();
				var f_value = this.xml_getElement(f_state,"Value").firstChild().get_nodeValue();
				l_states.set(f_id,{ id : f_id, type : f_type, value : f_value, kind : "Normal"});
			}
			return l_states;
		} else return l_states;
	}
	,xml_getState: function(p_xml,p_stateId,p_merge) {
		var this1 = this.xml_getAllStates(p_xml,p_merge);
		return this1.get(p_stateId);
	}
	,xml_getAllMStates: function(p_xml,p_merge) {
		var l_states = new haxe_ds_StringMap();
		var l_groupName;
		if(p_merge) l_groupName = "_States"; else l_groupName = "States";
		var l_statesNode = this.xml_getElement(p_xml,l_groupName);
		if(l_statesNode != null) {
			var l_statesChildren = l_statesNode.elementsNamed("_State");
			while(l_statesChildren.hasNext()) {
				var f_state = l_statesChildren.next();
				var f_id = f_state.get("id");
				var f_value = this.xml_getElement(f_state,"Value").firstChild().get_nodeValue();
				l_states.set(f_id,{ id : f_id, value : f_value, kind : "Merge"});
			}
			return l_states;
		} else return l_states;
	}
	,xml_getMState: function(p_xml,p_mStateId,p_merge) {
		var this1 = this.xml_getAllMStates(p_xml,p_merge);
		return this1.get(p_mStateId);
	}
	,xml_getEveryState: function(p_xml,p_merge) {
		var l_allStates = this.xml_getAllStates(p_xml,p_merge);
		var l_mStates = this.xml_getAllMStates(p_xml,p_merge);
		var $it0 = l_mStates.iterator();
		while( $it0.hasNext() ) {
			var f_mState = $it0.next();
			if(l_allStates.exists(f_mState.id)) l_allStates.get(f_mState.id).value = f_mState.value; else l_allStates.set(f_mState.id,f_mState);
		}
		return l_allStates;
	}
	,xml_getEveryState_Array: function(p_xml,p_merge) {
		var l_states = [];
		var l_groupName;
		if(p_merge) l_groupName = "_States"; else l_groupName = "States";
		var l_statesNode = this.xml_getElement(p_xml,l_groupName);
		if(l_statesNode != null) {
			var l_statesChildren = l_statesNode.elementsNamed("State");
			while(l_statesChildren.hasNext()) {
				var f_state = l_statesChildren.next();
				var f_id = this.xml_getElement(f_state,"Id").firstChild().get_nodeValue();
				var f_type = this.xml_getElement(f_state,"Type").firstChild().get_nodeValue();
				var f_value = this.xml_getElement(f_state,"Value").firstChild().get_nodeValue();
				l_states.push({ id : f_id, type : f_type, value : f_value, kind : "Normal"});
			}
			var l_statesChildren1 = l_statesNode.elementsNamed("_State");
			while(l_statesChildren1.hasNext()) {
				var f_state1 = l_statesChildren1.next();
				var f_id1 = f_state1.get("id");
				var f_value1 = this.xml_getElement(f_state1,"Value").firstChild().get_nodeValue();
				l_states.push({ id : f_id1, value : f_value1, kind : "Merge"});
			}
			return l_states;
		} else return l_states;
	}
	,xml_parseAsset: function(p_asset) {
		return Xml.parse(tools_spark_framework_Assets.getFile(Std.string(p_asset.dir) + "/" + Std.string(p_asset.fileName) + "." + Std.string(p_asset.fileExtension)).toString()).firstElement();
	}
	,xml_parseScript: function(p_script) {
		return Xml.parse(p_script.toString()).firstElement();
	}
	,xml_parseScriptName: function(p_scriptName) {
		return this.xml_parseScript(tools_spark_framework_Assets.getScript(p_scriptName));
	}
	,xml_getElement: function(p_xml,p_xmlNode) {
		var p_iterator = p_xml.elementsNamed(p_xmlNode);
		if(p_iterator.hasNext()) return p_iterator.next(); else return null;
	}
	,xml_createElements: function(p_xmlNodes) {
		var l_Return = { };
		l_Return.first = null;
		l_Return.last = null;
		var _g = 0;
		while(_g < p_xmlNodes.length) {
			var xmlNodeStr = p_xmlNodes[_g];
			++_g;
			var f_xml = Xml.createElement(xmlNodeStr);
			if(l_Return.first == null) l_Return.first = f_xml; else l_Return.last.addChild(f_xml);
			l_Return.last = f_xml;
		}
		return l_Return;
	}
	,xml_createElement: function(p_xmlNode,p_pcdataChild) {
		if(p_pcdataChild == null) return Xml.createElement(p_xmlNode); else {
			var l_xmlNode = Xml.createElement(p_xmlNode);
			l_xmlNode.addChild(Xml.createPCData(p_pcdataChild));
			return l_xmlNode;
		}
	}
	,xml_createElementAttr: function(p_xmlNode,p_attrName,p_attrValue) {
		var l_xml = Xml.createElement(p_xmlNode);
		l_xml.set(p_attrName,p_attrValue);
		return l_xml;
	}
	,xml_entity_removeNode: function(p_EntityXml,p_xmlNodeName) {
		var l_elements = p_EntityXml.elementsNamed(p_xmlNodeName);
		if(l_elements.hasNext()) p_EntityXml.removeChild(l_elements.next());
		return p_EntityXml;
	}
	,xml_entity_removeAllNodes: function(p_EntityXml,p_xmlNodeName) {
		var l_elements = p_EntityXml.elementsNamed(p_xmlNodeName);
		while(l_elements.hasNext()) p_EntityXml.removeChild(l_elements.next());
		return p_EntityXml;
	}
	,xml_entity_addExtend: function(p_EntityXml,p_Entity) {
		var l_groupName = "Extends";
		var l_group;
		var l_elements = p_EntityXml.elementsNamed(l_groupName);
		if(l_elements.hasNext()) l_group = l_elements.next(); else {
			l_group = Xml.createElement(l_groupName);
			p_EntityXml.addChild(l_group);
		}
		var l_entity = Xml.createElement("Entity");
		l_group.addChild(l_entity);
		if(p_Entity.ext != null) l_entity.set("extends",p_Entity.ext);
		return l_entity;
	}
	,xml_entity_getExtendsEntityNames: function(p_EntityXml) {
		var l_array = [];
		var l_groupName = "Extends";
		var l_group = null;
		var l_elements = p_EntityXml.elementsNamed(l_groupName);
		if(l_elements.hasNext()) l_group = l_elements.next();
		if(l_group != null) {
			var l_entities = l_group.elementsNamed("Entity");
			while( l_entities.hasNext() ) {
				var entity = l_entities.next();
				l_array.push(entity.get("extends"));
			}
		}
		return l_array;
	}
	,xml_entity_getExtendsEntities: function(p_EntityXml) {
		var l_array = [];
		var l_groupName = "Extends";
		var l_group = null;
		var l_elements = p_EntityXml.elementsNamed(l_groupName);
		if(l_elements.hasNext()) l_group = l_elements.next();
		if(l_group != null) {
			var l_entities = l_group.elementsNamed("Entity");
			while( l_entities.hasNext() ) {
				var entity = l_entities.next();
				l_array.push({ ext : entity.get("extends"), meta_editor : entity.get("meta_editor"), xml : entity});
			}
		}
		return l_array;
	}
	,xml_entity_addFormState: function(p_EntityXml,p_State,p_mergeForm,p_mergeStates) {
		var l_groupName;
		if(p_mergeForm) l_groupName = "_Form"; else l_groupName = "Form";
		var l_group;
		var l_elements = p_EntityXml.elementsNamed(l_groupName);
		if(l_elements.hasNext()) l_group = l_elements.next(); else {
			l_group = Xml.createElement(l_groupName);
			p_EntityXml.addChild(l_group);
		}
		return this.xml_entity_addState(l_group,p_State,p_mergeStates);
	}
	,xml_entity_updateFormState: function(p_EntityXml,p_State,p_mergeForm,p_mergeStates) {
		var l_groupName;
		if(p_mergeForm) l_groupName = "_Form"; else l_groupName = "Form";
		var l_group;
		var l_elements = p_EntityXml.elementsNamed(l_groupName);
		if(l_elements.hasNext()) l_group = l_elements.next(); else return false;
		return this.xml_entity_updateState(l_group,p_State,p_mergeStates);
	}
	,xml_entity_addState: function(p_EntityXml,p_State,p_merge) {
		var l_groupName;
		if(p_merge) l_groupName = "_States"; else l_groupName = "States";
		var l_group;
		var l_elements = p_EntityXml.elementsNamed(l_groupName);
		if(l_elements.hasNext()) l_group = l_elements.next(); else {
			l_group = Xml.createElement(l_groupName);
			p_EntityXml.addChild(l_group);
		}
		var l_state = Xml.createElement("State");
		l_group.addChild(l_state);
		if(p_State.id != null) {
			var l_xml = Xml.createElement("Id");
			l_state.addChild(l_xml);
			l_xml.addChild(Xml.createPCData(p_State.id));
		}
		if(p_State.type != null) {
			var l_xml1 = Xml.createElement("Type");
			l_state.addChild(l_xml1);
			l_xml1.addChild(Xml.createPCData(p_State.type));
		}
		if(p_State.value != null) {
			var l_xml2 = Xml.createElement("Value");
			l_state.addChild(l_xml2);
			l_xml2.addChild(Xml.createCData(p_State.value));
		}
		return l_state;
	}
	,xml_entity_updateState: function(p_EntityXml,p_State,p_merge,p_forceCreate) {
		if(p_forceCreate == null) p_forceCreate = false;
		var l_groupName;
		if(p_merge) l_groupName = "_States"; else l_groupName = "States";
		var l_group;
		var l_elements = p_EntityXml.elementsNamed(l_groupName);
		if(l_elements.hasNext()) l_group = l_elements.next(); else if(p_forceCreate) {
			this.xml_entity_addState(p_EntityXml,p_State,p_merge);
			return true;
		} else return false;
		var $it0 = l_group.elements();
		while( $it0.hasNext() ) {
			var stateNode = $it0.next();
			var f_id = this.xml_getElement(stateNode,"Id").firstChild().get_nodeValue();
			if(f_id == p_State.id) {
				var f_valueNode = this.xml_getElement(stateNode,"Value");
				f_valueNode.removeChild(f_valueNode.firstChild());
				f_valueNode.addChild(Xml.createCData(p_State.value));
				return true;
			}
		}
		if(p_forceCreate) {
			this.xml_entity_addState(p_EntityXml,p_State,p_merge);
			return true;
		} else return false;
	}
	,xml_entity_addMState: function(p_EntityXml,p_State,p_merge) {
		var l_groupName;
		if(p_merge) l_groupName = "_States"; else l_groupName = "States";
		var l_group;
		var l_elements = p_EntityXml.elementsNamed(l_groupName);
		if(l_elements.hasNext()) l_group = l_elements.next(); else {
			l_group = Xml.createElement(l_groupName);
			p_EntityXml.addChild(l_group);
		}
		var l_state = Xml.createElement("_State");
		l_group.addChild(l_state);
		if(p_State.id != null) l_state.set("id",p_State.id);
		if(p_State.value != null) {
			var l_xml = Xml.createElement("Value");
			l_state.addChild(l_xml);
			l_xml.addChild(Xml.createCData(p_State.value));
		}
		return l_state;
	}
	,xml_entity_updateMState: function(p_EntityXml,p_State,p_merge,p_forceCreate) {
		if(p_forceCreate == null) p_forceCreate = false;
		var l_groupName;
		if(p_merge) l_groupName = "_States"; else l_groupName = "States";
		var l_group;
		var l_elements = p_EntityXml.elementsNamed(l_groupName);
		if(l_elements.hasNext()) l_group = l_elements.next(); else if(p_forceCreate) {
			this.xml_entity_addMState(p_EntityXml,p_State,p_merge);
			return true;
		} else return false;
		var $it0 = l_group.elements();
		while( $it0.hasNext() ) {
			var stateNode = $it0.next();
			var f_id = stateNode.get("id");
			if(f_id == p_State.id) {
				var f_valueNode = this.xml_getElement(stateNode,"Value");
				f_valueNode.removeChild(f_valueNode.firstChild());
				f_valueNode.addChild(Xml.createCData(p_State.value));
				return true;
			}
		}
		if(p_forceCreate) {
			this.xml_entity_addMState(p_EntityXml,p_State,p_merge);
			return true;
		} else return false;
	}
	,xml_entity_addTrigger: function(p_EntityXml,p_Trigger,p_merge) {
		var l_groupName;
		if(p_merge) l_groupName = "_Triggers"; else l_groupName = "Triggers";
		var l_group;
		var l_elements = p_EntityXml.elementsNamed(l_groupName);
		if(l_elements.hasNext()) l_group = l_elements.next(); else {
			l_group = Xml.createElement(l_groupName);
			p_EntityXml.addChild(l_group);
		}
		var l_trigger = Xml.createElement("Trigger");
		l_group.addChild(l_trigger);
		if(p_Trigger.ext != null) l_trigger.set("extends",p_Trigger.ext);
		if(p_Trigger.event != null) {
			var l_xml = Xml.createElement("Event");
			l_trigger.addChild(l_xml);
			l_xml.addChild(Xml.createPCData(p_Trigger.event));
		}
		if(p_Trigger.target != null) {
			var l_xml1 = Xml.createElement("Target");
			l_trigger.addChild(l_xml1);
			l_xml1.addChild(Xml.createPCData(p_Trigger.target));
		}
		if(p_Trigger.parameter != null) {
			var l_xml2 = Xml.createElement("Parameter");
			l_trigger.addChild(l_xml2);
			l_xml2.addChild(Xml.createPCData(p_Trigger.parameter));
		}
		return l_trigger;
	}
	,__class__: tools_spark_sliced_services_std_logic_core_Logic
	,__properties__: {get_storage:"get_storage"}
});
var tools_spark_sliced_services_std_logic_gde_interfaces_IGameBase = function() { };
$hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.IGameBase"] = tools_spark_sliced_services_std_logic_gde_interfaces_IGameBase;
tools_spark_sliced_services_std_logic_gde_interfaces_IGameBase.__name__ = ["tools","spark","sliced","services","std","logic","gde","interfaces","IGameBase"];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameBase.prototype = {
	__class__: tools_spark_sliced_services_std_logic_gde_interfaces_IGameBase
};
var tools_spark_sliced_services_std_logic_gde_core_AGameBase = function() {
};
$hxClasses["tools.spark.sliced.services.std.logic.gde.core.AGameBase"] = tools_spark_sliced_services_std_logic_gde_core_AGameBase;
tools_spark_sliced_services_std_logic_gde_core_AGameBase.__name__ = ["tools","spark","sliced","services","std","logic","gde","core","AGameBase"];
tools_spark_sliced_services_std_logic_gde_core_AGameBase.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameBase];
tools_spark_sliced_services_std_logic_gde_core_AGameBase.prototype = {
	get_parent: function() {
		return this.parentEntity;
	}
	,__class__: tools_spark_sliced_services_std_logic_gde_core_AGameBase
	,__properties__: {get_parent:"get_parent"}
};
var tools_spark_sliced_services_std_logic_gde_interfaces_IGameAction = function() { };
$hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.IGameAction"] = tools_spark_sliced_services_std_logic_gde_interfaces_IGameAction;
tools_spark_sliced_services_std_logic_gde_interfaces_IGameAction.__name__ = ["tools","spark","sliced","services","std","logic","gde","interfaces","IGameAction"];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameAction.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameBase];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameAction.prototype = {
	__class__: tools_spark_sliced_services_std_logic_gde_interfaces_IGameAction
};
var tools_spark_sliced_services_std_logic_gde_core_GameAction = function() {
	tools_spark_sliced_services_std_logic_gde_core_AGameBase.call(this);
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.logic.gde.core.GameAction"] = tools_spark_sliced_services_std_logic_gde_core_GameAction;
tools_spark_sliced_services_std_logic_gde_core_GameAction.__name__ = ["tools","spark","sliced","services","std","logic","gde","core","GameAction"];
tools_spark_sliced_services_std_logic_gde_core_GameAction.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameAction];
tools_spark_sliced_services_std_logic_gde_core_GameAction.__super__ = tools_spark_sliced_services_std_logic_gde_core_AGameBase;
tools_spark_sliced_services_std_logic_gde_core_GameAction.prototype = $extend(tools_spark_sliced_services_std_logic_gde_core_AGameBase.prototype,{
	_init: function() {
		this.scriptSet = [];
		this.gameStateSet = new haxe_ds_StringMap();
	}
	,clone: function(p_parentEntity) {
		var l_clonedAction = new tools_spark_sliced_services_std_logic_gde_core_GameAction();
		l_clonedAction.parentEntity = p_parentEntity;
		l_clonedAction.id = this.id;
		l_clonedAction.concurrency = this.concurrency;
		var _g = 0;
		var _g1 = this.scriptSet;
		while(_g < _g1.length) {
			var scriptId = _g1[_g];
			++_g;
			l_clonedAction.scriptSet.push(scriptId);
		}
		var $it0 = this.gameStateSet.iterator();
		while( $it0.hasNext() ) {
			var state = $it0.next();
			l_clonedAction.addState(state.clone(p_parentEntity));
		}
		return l_clonedAction;
	}
	,addState: function(gameState) {
		if(this.gameStateSet.get(gameState.id) != null) tools_spark_Console.warn("A State with id " + gameState.id + " already exists in this Action.");
		{
			this.gameStateSet.set(gameState.id,gameState);
			gameState;
		}
	}
	,doPass: function() {
		var _g = 0;
		var _g1 = this.scriptSet;
		while(_g < _g1.length) {
			var hashId = _g1[_g];
			++_g;
			if(hashId == -1) tools_spark_sliced_core_Sliced.logic.gmlInterpreter.run(hashId,(function($this) {
				var $r;
				var _g2 = new haxe_ds_StringMap();
				_g2.set("it",$this);
				_g2.set("me",$this.parentEntity);
				_g2.set("parent",$this.parentEntity.parentEntity);
				$r = _g2;
				return $r;
			}(this))); else if(tools_spark_sliced_core_Sliced.logic.scriptInterpreter.run(hashId,(function($this) {
				var $r;
				var _g21 = new haxe_ds_StringMap();
				_g21.set("it",$this);
				_g21.set("me",$this.parentEntity);
				_g21.set("parent",$this.parentEntity.parentEntity);
				$r = _g21;
				return $r;
			}(this))) == false) {
				tools_spark_Console.error("Error: Failed to run Action [" + this.id + "].");
				this.parentEntity.stopAction(this.id);
			}
		}
	}
	,getState: function(p_stateId) {
		if(this.gameStateSet.get(p_stateId) == null) return null; else return this.gameStateSet.get(p_stateId).get_value();
	}
	,s: function(p_stateId) {
		if(this.gameStateSet.get(p_stateId) == null) return null; else return this.gameStateSet.get(p_stateId).get_value();
	}
	,get: function(p_stateId) {
		if(this.gameStateSet.get(p_stateId) == null) return null; else return this.gameStateSet.get(p_stateId).get_value();
	}
	,setState: function(p_stateId,p_value) {
		this.gameStateSet.get(p_stateId).set_value(p_value);
		return this.gameStateSet.get(p_stateId).get_value();
	}
	,set: function(p_stateId,p_value) {
		this.gameStateSet.get(p_stateId).set_value(p_value);
		return this.gameStateSet.get(p_stateId).get_value();
	}
	,addToState: function(p_stateId,p_value) {
		var _g = this.gameStateSet.get(p_stateId);
		_g.set_value(_g.get_value() + p_value);
		return this.gameStateSet.get(p_stateId).get_value();
	}
	,subtractFromState: function(p_stateId,p_value) {
		var _g = this.gameStateSet.get(p_stateId);
		_g.set_value(_g.get_value() - p_value);
		return this.gameStateSet.get(p_stateId).get_value();
	}
	,stop: function() {
		this.parentEntity.stopAction(this.id);
	}
	,__class__: tools_spark_sliced_services_std_logic_gde_core_GameAction
});
var tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassInstantiator = function() { };
$hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.IGameClassInstantiator"] = tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassInstantiator;
tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassInstantiator.__name__ = ["tools","spark","sliced","services","std","logic","gde","interfaces","IGameClassInstantiator"];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassInstantiator.prototype = {
	__class__: tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassInstantiator
};
var tools_spark_sliced_services_std_logic_gde_core_GameClassInstantiator = function(p_xmlNodeTypeToNodeName,p_xmlConcurrencyNameToType,p_xmlStateNameToType) {
	tools_spark_Console.log("Creating Game Class Instantiator");
	this._xmlNodeTypeToNodeName = p_xmlNodeTypeToNodeName;
	this._xmlConcurrencyNameToType = p_xmlConcurrencyNameToType;
	this._xmlStateNameToType = p_xmlStateNameToType;
};
$hxClasses["tools.spark.sliced.services.std.logic.gde.core.GameClassInstantiator"] = tools_spark_sliced_services_std_logic_gde_core_GameClassInstantiator;
tools_spark_sliced_services_std_logic_gde_core_GameClassInstantiator.__name__ = ["tools","spark","sliced","services","std","logic","gde","core","GameClassInstantiator"];
tools_spark_sliced_services_std_logic_gde_core_GameClassInstantiator.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassInstantiator];
tools_spark_sliced_services_std_logic_gde_core_GameClassInstantiator.prototype = {
	instantiateEntity: function(p_gameNode,p_parentEntity) {
		var l_gameEntity = new tools_spark_sliced_services_std_logic_gde_core_GameEntity();
		l_gameEntity.parentEntity = p_parentEntity;
		if(p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES)).hasNext()) {
			var states = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES)).next();
			var $it0 = states.elements();
			while( $it0.hasNext() ) {
				var state = $it0.next();
				l_gameEntity.addState(this.instantiateState(state,l_gameEntity));
			}
		}
		if(p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS)).hasNext()) {
			var actions = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS)).next();
			var $it1 = actions.elements();
			while( $it1.hasNext() ) {
				var action = $it1.next();
				var f_gameAction = this.instantiateAction(action,l_gameEntity);
				l_gameEntity.addAction(f_gameAction);
			}
		}
		if(p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS)).hasNext()) {
			var triggers = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS)).next();
			var $it2 = triggers.elements();
			while( $it2.hasNext() ) {
				var trigger = $it2.next();
				var f_gameTrigger = this.instantiateTrigger(trigger,l_gameEntity);
				l_gameEntity.addTrigger(f_gameTrigger);
			}
		}
		tools_spark_sliced_core_Sliced.logic.registerEntityByName(l_gameEntity);
		l_gameEntity.gameForm = this.instantiateForm(p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM)).next(),l_gameEntity);
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CREATED,l_gameEntity);
		return l_gameEntity;
	}
	,instantiateForm: function(p_gameNode,p_parentEntity) {
		var l_gameForm = new tools_spark_sliced_services_std_logic_gde_core_GameForm();
		l_gameForm.parentEntity = p_parentEntity;
		if(p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES)).hasNext()) {
			var states = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES)).next();
			var $it0 = states.elements();
			while( $it0.hasNext() ) {
				var state = $it0.next();
				l_gameForm.addState(this.instantiateState(state,p_parentEntity));
			}
		}
		l_gameForm.gameSpace = this.instantiateSpace(p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE)).next(),p_parentEntity);
		return l_gameForm;
	}
	,instantiateSpace: function(p_gameNode,p_parentEntity) {
		var l_gameSpace = new tools_spark_sliced_services_std_logic_gde_core_GameSpace();
		l_gameSpace.parentEntity = p_parentEntity;
		if(p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES)).hasNext()) {
			var entities = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES)).next();
			var $it0 = entities.elements();
			while( $it0.hasNext() ) {
				var entity = $it0.next();
				l_gameSpace.gameEntitySet.push(this.instantiateEntity(entity,p_parentEntity));
			}
		}
		return l_gameSpace;
	}
	,instantiateState: function(p_gameNode,p_parentEntity) {
		var l_gameStateType;
		var key = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE)).next().firstChild().get_nodeValue();
		l_gameStateType = this._xmlStateNameToType.get(key);
		var l_gameState;
		if(l_gameStateType == tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.EXPRESSION) l_gameState = new tools_spark_sliced_services_std_logic_gde_core_GameStateExpr(); else l_gameState = new tools_spark_sliced_services_std_logic_gde_core_GameState();
		l_gameState.parentEntity = p_parentEntity;
		l_gameState.id = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID)).next().firstChild().get_nodeValue();
		l_gameState.type = l_gameStateType;
		var l_valueInString = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE)).next().firstChild().get_nodeValue();
		if(l_valueInString.charAt(0) == ";") l_gameState.set_value(tools_spark_sliced_core_Sliced.logic.scriptInterpreter.runExpr(tools_spark_sliced_core_Sliced.logic.scriptInterpreter.hashExpr(HxOverrides.substr(l_valueInString,1,null)),p_parentEntity,p_parentEntity.parentEntity,l_gameState)); else {
			var _g = l_gameState.type;
			switch(Type.enumIndex(_g)) {
			case 4:
				l_gameState.set_value(l_valueInString == "true" || l_valueInString == "True" || l_valueInString == "t" || l_valueInString == "T");
				break;
			case 3:
				l_gameState.set_value(Std.parseFloat(l_valueInString));
				break;
			case 2:
				l_gameState.set_value(Std.parseInt(l_valueInString));
				break;
			case 5:
				l_gameState.set_value(l_valueInString);
				break;
			case 1:
				if(l_valueInString != "null") l_gameState.set_value(tools_spark_sliced_core_Sliced.logic.scriptInterpreter.runExpr(tools_spark_sliced_core_Sliced.logic.scriptInterpreter.hashExpr(l_valueInString),p_parentEntity,p_parentEntity.parentEntity,l_gameState)); else l_gameState.set_value(null);
				break;
			case 0:
				l_gameState.set_value(l_valueInString);
				break;
			}
		}
		return l_gameState;
	}
	,instantiateAction: function(p_gameNode,p_parentEntity) {
		var l_gameAction = new tools_spark_sliced_services_std_logic_gde_core_GameAction();
		l_gameAction.parentEntity = p_parentEntity;
		l_gameAction.id = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID)).next().firstChild().get_nodeValue();
		var key = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY)).next().firstChild().get_nodeValue();
		l_gameAction.concurrency = this._xmlConcurrencyNameToType.get(key);
		var scripts = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS)).next();
		var $it0 = scripts.elements();
		while( $it0.hasNext() ) {
			var script = $it0.next();
			if(script.get_nodeName() == this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT)) l_gameAction.scriptSet.push(tools_spark_sliced_core_Sliced.logic.scriptInterpreter.hash(script.firstChild().get_nodeValue())); else l_gameAction.scriptSet.push(tools_spark_sliced_core_Sliced.logic.gmlInterpreter.hash(script.firstChild().get_nodeValue()));
		}
		if(p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES)).hasNext()) {
			var states = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES)).next();
			var $it1 = states.elements();
			while( $it1.hasNext() ) {
				var state = $it1.next();
				l_gameAction.addState(this.instantiateState(state,p_parentEntity));
			}
		}
		return l_gameAction;
	}
	,instantiateTrigger: function(p_gameNode,p_parentEntity) {
		var l_gameTrigger = new tools_spark_sliced_services_std_logic_gde_core_GameTrigger();
		l_gameTrigger.parentEntity = p_parentEntity;
		var key = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT)).next().firstChild().get_nodeValue();
		l_gameTrigger.eventType = tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMapReverse.get(key);
		if(p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER)).hasNext()) {
			var l_parameter = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER)).next();
			l_gameTrigger.parameter = l_parameter.firstChild().get_nodeValue();
		}
		if(p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET)).hasNext()) {
			var l_target = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET)).next();
			l_gameTrigger.target = l_target.firstChild().get_nodeValue();
		} else l_gameTrigger.target = "TargetMe";
		if(p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE)).hasNext()) {
			var l_targetType = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE)).next();
			l_gameTrigger.targetType = l_targetType.firstChild().get_nodeValue();
		}
		var scripts = p_gameNode.elementsNamed(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS)).next();
		var $it0 = scripts.elements();
		while( $it0.hasNext() ) {
			var script = $it0.next();
			if(script.get_nodeName() == this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT)) l_gameTrigger.scriptSet.push(tools_spark_sliced_core_Sliced.logic.scriptInterpreter.hash(script.firstChild().get_nodeValue())); else l_gameTrigger.scriptSet.push(tools_spark_sliced_core_Sliced.logic.gmlInterpreter.hash(script.firstChild().get_nodeValue()));
		}
		return l_gameTrigger;
	}
	,__class__: tools_spark_sliced_services_std_logic_gde_core_GameClassInstantiator
};
var tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassParser = function() { };
$hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.IGameClassParser"] = tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassParser;
tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassParser.__name__ = ["tools","spark","sliced","services","std","logic","gde","interfaces","IGameClassParser"];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassParser.prototype = {
	__class__: tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassParser
};
var tools_spark_sliced_services_std_logic_gde_core_GameClassParser = function() {
	tools_spark_Console.log("Creating Game Class Parser");
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.logic.gde.core.GameClassParser"] = tools_spark_sliced_services_std_logic_gde_core_GameClassParser;
tools_spark_sliced_services_std_logic_gde_core_GameClassParser.__name__ = ["tools","spark","sliced","services","std","logic","gde","core","GameClassParser"];
tools_spark_sliced_services_std_logic_gde_core_GameClassParser.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassParser];
tools_spark_sliced_services_std_logic_gde_core_GameClassParser.prototype = {
	_init: function() {
		this._initNodeNamesMap();
		this._initNodeTypesMap();
		this._initGameTypesMap();
		this._initNodeToGameMap();
		this._initExtendableNodesMap();
		this._initMergableNodesMap();
		this._initTargetMergableNodesMap();
		this._initArrayNodesMap();
		this._initConcurrencyTypeToNameMap();
		this._initConcurrencyNameToTypeMap();
		this._initStateTypeToNameMap();
		this._initStateNameToTypeMap();
		this._gameClassValidator = new tools_spark_sliced_services_std_logic_gde_core_GameClassValidator(this._xmlNodeTypeToNodeName,this._xmlConcurrencyTypeToName,this._xmlStateTypeToName);
		this._gameClassInstantiator = new tools_spark_sliced_services_std_logic_gde_core_GameClassInstantiator(this._xmlNodeTypeToNodeName,this._xmlConcurrencyNameToType,this._xmlStateNameToType);
	}
	,_initNodeNamesMap: function() {
		this._xmlNodeTypeToNodeName = new haxe_ds_EnumValueMap();
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION,"Action");
			"Action";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS,"Actions");
			"Actions";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES,"Entities");
			"Entities";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY,"Entity");
			"Entity";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM,"Form");
			"Form";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS,"Scripts");
			"Scripts";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT,"Script");
			"Script";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.GML,"Gml");
			"Gml";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS,"Triggers");
			"Triggers";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER,"Trigger");
			"Trigger";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT,"Event");
			"Event";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER,"Parameter");
			"Parameter";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET,"Target");
			"Target";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE,"TargetType");
			"TargetType";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY,"Concurrency");
			"Concurrency";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID,"Id");
			"Id";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE,"Space");
			"Space";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE,"State");
			"State";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES,"States");
			"States";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE,"Type");
			"Type";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE,"Value");
			"Value";
		}
		{
			this._xmlNodeTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EXTENDS,"Extends");
			"Extends";
		}
	}
	,_initNodeTypesMap: function() {
		this._xmlNodeNameToNodeType = new haxe_ds_StringMap();
		var k = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION);
		var v = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION;
		this._xmlNodeNameToNodeType.set(k,v);
		v;
		var k1 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS);
		var v1 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS;
		this._xmlNodeNameToNodeType.set(k1,v1);
		v1;
		var k2 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES);
		var v2 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES;
		this._xmlNodeNameToNodeType.set(k2,v2);
		v2;
		var k3 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY);
		var v3 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY;
		this._xmlNodeNameToNodeType.set(k3,v3);
		v3;
		var k4 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM);
		var v4 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM;
		this._xmlNodeNameToNodeType.set(k4,v4);
		v4;
		var k5 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS);
		var v5 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS;
		this._xmlNodeNameToNodeType.set(k5,v5);
		v5;
		var k6 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT);
		var v6 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT;
		this._xmlNodeNameToNodeType.set(k6,v6);
		v6;
		var k7 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.GML);
		var v7 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.GML;
		this._xmlNodeNameToNodeType.set(k7,v7);
		v7;
		var k8 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS);
		var v8 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS;
		this._xmlNodeNameToNodeType.set(k8,v8);
		v8;
		var k9 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER);
		var v9 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER;
		this._xmlNodeNameToNodeType.set(k9,v9);
		v9;
		var k10 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT);
		var v10 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT;
		this._xmlNodeNameToNodeType.set(k10,v10);
		v10;
		var k11 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER);
		var v11 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER;
		this._xmlNodeNameToNodeType.set(k11,v11);
		v11;
		var k12 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET);
		var v12 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET;
		this._xmlNodeNameToNodeType.set(k12,v12);
		v12;
		var k13 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE);
		var v13 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE;
		this._xmlNodeNameToNodeType.set(k13,v13);
		v13;
		var k14 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY);
		var v14 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY;
		this._xmlNodeNameToNodeType.set(k14,v14);
		v14;
		var k15 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID);
		var v15 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID;
		this._xmlNodeNameToNodeType.set(k15,v15);
		v15;
		var k16 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE);
		var v16 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE;
		this._xmlNodeNameToNodeType.set(k16,v16);
		v16;
		var k17 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE);
		var v17 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE;
		this._xmlNodeNameToNodeType.set(k17,v17);
		v17;
		var k18 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES);
		var v18 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES;
		this._xmlNodeNameToNodeType.set(k18,v18);
		v18;
		var k19 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE);
		var v19 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE;
		this._xmlNodeNameToNodeType.set(k19,v19);
		v19;
		var k20 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE);
		var v20 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE;
		this._xmlNodeNameToNodeType.set(k20,v20);
		v20;
		var k21 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EXTENDS);
		var v21 = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EXTENDS;
		this._xmlNodeNameToNodeType.set(k21,v21);
		v21;
	}
	,_initGameTypesMap: function() {
		this._xmlGameTypeToNodeName = new haxe_ds_EnumValueMap();
		var v = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY);
		this._xmlGameTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.ENTITY,v);
		v;
		var v1 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE);
		this._xmlGameTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.STATE,v1);
		v1;
		var v2 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE);
		this._xmlGameTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.SPACE,v2);
		v2;
		var v3 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM);
		this._xmlGameTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.FORM,v3);
		v3;
		var v4 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION);
		this._xmlGameTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.ACTION,v4);
		v4;
		var v5 = this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER);
		this._xmlGameTypeToNodeName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.TRIGGER,v5);
		v5;
	}
	,_initNodeToGameMap: function() {
		this._xmlNodeTypeToGameType = new haxe_ds_EnumValueMap();
		var v = tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.ENTITY;
		this._xmlNodeTypeToGameType.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY,v);
		v;
		var v1 = tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.STATE;
		this._xmlNodeTypeToGameType.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE,v1);
		v1;
		var v2 = tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.SPACE;
		this._xmlNodeTypeToGameType.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE,v2);
		v2;
		var v3 = tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.FORM;
		this._xmlNodeTypeToGameType.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM,v3);
		v3;
		var v4 = tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.ACTION;
		this._xmlNodeTypeToGameType.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION,v4);
		v4;
		var v5 = tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.TRIGGER;
		this._xmlNodeTypeToGameType.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER,v5);
		v5;
	}
	,_initExtendableNodesMap: function() {
		this._isNodeExtendable = new haxe_ds_EnumValueMap();
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION,true);
			true;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY,true);
			true;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM,true);
			true;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.GML,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER,true);
			true;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE,true);
			true;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE,true);
			true;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE,false);
			false;
		}
		{
			this._isNodeExtendable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EXTENDS,false);
			false;
		}
	}
	,_initMergableNodesMap: function() {
		this._isNodeMergable = new haxe_ds_EnumValueMap();
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS,true);
			true;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES,true);
			true;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM,true);
			true;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS,true);
			true;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.GML,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS,true);
			true;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE,true);
			true;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES,true);
			true;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE,false);
			false;
		}
		{
			this._isNodeMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EXTENDS,false);
			false;
		}
	}
	,_initTargetMergableNodesMap: function() {
		this._isNodeTargetMergable = new haxe_ds_EnumValueMap();
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION,true);
			true;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.GML,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE,true);
			true;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE,false);
			false;
		}
		{
			this._isNodeTargetMergable.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EXTENDS,false);
			false;
		}
	}
	,_initArrayNodesMap: function() {
		this._isNodeArray = new haxe_ds_EnumValueMap();
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS,true);
			true;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES,true);
			true;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS,true);
			true;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.GML,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS,true);
			true;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES,true);
			true;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE,false);
			false;
		}
		{
			this._isNodeArray.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EXTENDS,true);
			true;
		}
	}
	,_initConcurrencyTypeToNameMap: function() {
		this._xmlConcurrencyTypeToName = new haxe_ds_EnumValueMap();
		{
			this._xmlConcurrencyTypeToName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PARALLEL,"Parallel");
			"Parallel";
		}
		{
			this._xmlConcurrencyTypeToName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PERSISTENT,"Persistent");
			"Persistent";
		}
		{
			this._xmlConcurrencyTypeToName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.TRANSIENT,"Transient");
			"Transient";
		}
	}
	,_initConcurrencyNameToTypeMap: function() {
		this._xmlConcurrencyNameToType = new haxe_ds_StringMap();
		var k = this._xmlConcurrencyTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PARALLEL);
		var v = tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PARALLEL;
		this._xmlConcurrencyNameToType.set(k,v);
		v;
		var k1 = this._xmlConcurrencyTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PERSISTENT);
		var v1 = tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PERSISTENT;
		this._xmlConcurrencyNameToType.set(k1,v1);
		v1;
		var k2 = this._xmlConcurrencyTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.TRANSIENT);
		var v2 = tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.TRANSIENT;
		this._xmlConcurrencyNameToType.set(k2,v2);
		v2;
	}
	,_initStateTypeToNameMap: function() {
		this._xmlStateTypeToName = new haxe_ds_EnumValueMap();
		{
			this._xmlStateTypeToName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.EXPRESSION,"Expression");
			"Expression";
		}
		{
			this._xmlStateTypeToName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DYNAMIC,"Dynamic");
			"Dynamic";
		}
		{
			this._xmlStateTypeToName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.BOOLEAN,"Boolean");
			"Boolean";
		}
		{
			this._xmlStateTypeToName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DECIMAL,"Decimal");
			"Decimal";
		}
		{
			this._xmlStateTypeToName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.INTEGER,"Integer");
			"Integer";
		}
		{
			this._xmlStateTypeToName.set(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.TEXT,"Text");
			"Text";
		}
	}
	,_initStateNameToTypeMap: function() {
		this._xmlStateNameToType = new haxe_ds_StringMap();
		var k = this._xmlStateTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.EXPRESSION);
		var v = tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.EXPRESSION;
		this._xmlStateNameToType.set(k,v);
		v;
		var k1 = this._xmlStateTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DYNAMIC);
		var v1 = tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DYNAMIC;
		this._xmlStateNameToType.set(k1,v1);
		v1;
		var k2 = this._xmlStateTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.BOOLEAN);
		var v2 = tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.BOOLEAN;
		this._xmlStateNameToType.set(k2,v2);
		v2;
		var k3 = this._xmlStateTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DECIMAL);
		var v3 = tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DECIMAL;
		this._xmlStateNameToType.set(k3,v3);
		v3;
		var k4 = this._xmlStateTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.INTEGER);
		var v4 = tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.INTEGER;
		this._xmlStateNameToType.set(k4,v4);
		v4;
		var k5 = this._xmlStateTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.TEXT);
		var v5 = tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.TEXT;
		this._xmlStateNameToType.set(k5,v5);
		v5;
	}
	,parseGameNode: function(p_gameNode) {
		if(this._extendGameNode(p_gameNode)) {
			this._mergeGameNode(p_gameNode);
			if(this._validateGameNode(p_gameNode)) return true; else {
				tools_spark_Console.error("Game Entity could not be validated");
				return false;
			}
		} else {
			tools_spark_Console.error("Game Entity Class is not valid!");
			return false;
		}
	}
	,instantiateEntity: function(p_gameNode) {
		return this._gameClassInstantiator.instantiateEntity(p_gameNode);
	}
	,_extendGameNode: function(p_gameNode) {
		var l_gameNodeType;
		if((function($this) {
			var $r;
			var _this = p_gameNode.get_nodeName();
			$r = HxOverrides.substr(_this,0,1);
			return $r;
		}(this)) == "_") {
			var key;
			var _this1 = p_gameNode.get_nodeName();
			key = HxOverrides.substr(_this1,1,null);
			l_gameNodeType = this._xmlNodeNameToNodeType.get(key);
		} else {
			var key1 = p_gameNode.get_nodeName();
			l_gameNodeType = this._xmlNodeNameToNodeType.get(key1);
		}
		if(l_gameNodeType == null) {
			tools_spark_Console.error("Unexpected Element: <" + p_gameNode.get_nodeName() + ">");
			return false;
		} else {
			var $it0 = p_gameNode.elements();
			while( $it0.hasNext() ) {
				var elt = $it0.next();
				if(this._extendGameNode(elt) == false) {
					tools_spark_Console.error("Failed to parse node " + elt.get_nodeName());
					return false;
				}
			}
			if(this._handleExtendsElement(p_gameNode,l_gameNodeType)) {
				if(this._handleExtendsAttribute(p_gameNode,l_gameNodeType)) return true; else {
					tools_spark_Console.error("Failed to extend " + Std.string(l_gameNodeType) + " node from the \"extends\" parameter.");
					return false;
				}
			} else {
				tools_spark_Console.error("Failed to extend " + Std.string(l_gameNodeType) + " node from the \"Extends\" tag.");
				return false;
			}
		}
	}
	,_handleExtendsElement: function(p_gameNode,p_nodeType) {
		var l_extendsElementFound = p_gameNode.elementsNamed("Extends").hasNext();
		if(this._isNodeExtendable.get(p_nodeType) && l_extendsElementFound) {
			var l_extendsElement = p_gameNode.elementsNamed("Extends").next();
			var l_extendsChildren = [];
			var $it0 = l_extendsElement.elements();
			while( $it0.hasNext() ) {
				var elt = $it0.next();
				l_extendsChildren.splice(0,0,elt);
			}
			var _g = 0;
			while(_g < l_extendsChildren.length) {
				var elt1 = l_extendsChildren[_g];
				++_g;
				if(this._xmlNodeTypeToNodeName.get(p_nodeType) == elt1.get_nodeName()) this._moveChildren(p_gameNode,elt1); else {
					tools_spark_Console.error("Expected Node <" + this._xmlNodeTypeToNodeName.get(p_nodeType) + ">. Got <" + elt1.get_nodeName() + ">.");
					return false;
				}
			}
			p_gameNode.removeChild(l_extendsElement);
			return true;
		} else if(l_extendsElementFound) {
			tools_spark_Console.warn("Element " + Std.string(p_nodeType) + " cannot be extended!");
			return false;
		} else return true;
	}
	,_handleExtendsAttribute: function(p_gameNode,p_nodeType) {
		if(this._isNodeExtendable.get(p_nodeType) && p_gameNode.exists("extends")) {
			var l_superNode = this.getGameNode(this._xmlNodeTypeToGameType.get(p_nodeType),p_gameNode.get("extends"));
			p_gameNode.remove("extends");
			if(l_superNode != null) {
				if(this._extendGameNode(l_superNode)) {
					this._moveChildren(p_gameNode,l_superNode);
					return true;
				} else {
					tools_spark_Console.error("" + Std.string(p_nodeType) + " Class is not valid!");
					return false;
				}
			} else {
				tools_spark_Console.error("" + Std.string(p_nodeType) + " Class is not well-formed or not found!");
				return false;
			}
		} else if(p_gameNode.exists("extends")) {
			tools_spark_Console.error("Element " + Std.string(p_nodeType) + " cannot be extended!");
			return false;
		} else return true;
	}
	,_moveChildren: function(p_gameNode,p_superNode) {
		var childrenArray = [];
		var $it0 = p_superNode.elements();
		while( $it0.hasNext() ) {
			var elt = $it0.next();
			childrenArray.push(elt);
		}
		var _g = 0;
		while(_g < childrenArray.length) {
			var elt1 = childrenArray[_g];
			++_g;
			if(p_gameNode.elementsNamed(elt1.get_nodeName()).hasNext() == false) p_gameNode.addChild(elt1); else if((function($this) {
				var $r;
				var _this = elt1.get_nodeName();
				$r = HxOverrides.substr(_this,0,1);
				return $r;
			}(this)) == "_") p_gameNode.insertChild(elt1,0);
		}
	}
	,_validateGameNode: function(p_gameNode) {
		var l_gameNodeType;
		var key = p_gameNode.get_nodeName();
		l_gameNodeType = this._xmlNodeNameToNodeType.get(key);
		if(this._gameClassValidator.validateGameNode(p_gameNode,l_gameNodeType)) {
			var $it0 = p_gameNode.elements();
			while( $it0.hasNext() ) {
				var elt = $it0.next();
				if(this._validateGameNode(elt) == false) {
					tools_spark_Console.error("Failed to validate node " + elt.get_nodeName());
					return false;
				}
			}
			return true;
		} else {
			tools_spark_Console.error("Failed to validate " + Std.string(l_gameNodeType) + " node");
			return false;
		}
	}
	,_mergeGameNode: function(p_gameNode) {
		this._mergeSingleGameNode(p_gameNode);
		var $it0 = p_gameNode.elements();
		while( $it0.hasNext() ) {
			var elt = $it0.next();
			this._mergeGameNode(elt);
		}
	}
	,_mergeSingleGameNode: function(p_gameNode) {
		var childrenArray = [];
		var $it0 = p_gameNode.elements();
		while( $it0.hasNext() ) {
			var elt = $it0.next();
			childrenArray.push(elt);
		}
		var _g = 0;
		while(_g < childrenArray.length) {
			var elt1 = childrenArray[_g];
			++_g;
			if((function($this) {
				var $r;
				var _this = elt1.get_nodeName();
				$r = HxOverrides.substr(_this,0,1);
				return $r;
			}(this)) == "_") {
				var l_elementCleanNodeName;
				var _this1 = elt1.get_nodeName();
				l_elementCleanNodeName = HxOverrides.substr(_this1,1,null);
				if((function($this) {
					var $r;
					var key = $this._xmlNodeNameToNodeType.get(l_elementCleanNodeName);
					$r = $this._isNodeMergable.get(key);
					return $r;
				}(this))) {
					if(p_gameNode.elementsNamed(l_elementCleanNodeName).hasNext()) {
						var l_cleanNode = p_gameNode.elementsNamed(l_elementCleanNodeName).next();
						this._mergeChildren(elt1,l_cleanNode);
						p_gameNode.removeChild(elt1);
					} else elt1.set_nodeName((function($this) {
						var $r;
						var _this2 = elt1.get_nodeName();
						$r = HxOverrides.substr(_this2,1,null);
						return $r;
					}(this)));
				} else if((function($this) {
					var $r;
					var key1 = $this._xmlNodeNameToNodeType.get(l_elementCleanNodeName);
					$r = $this._isNodeTargetMergable.get(key1);
					return $r;
				}(this))) {
					if(elt1.exists("id")) {
						var l_cleanNode1 = null;
						var l_targetNodeFound = false;
						var $it1 = p_gameNode.elementsNamed(l_elementCleanNodeName);
						while( $it1.hasNext() ) {
							var i_cleanNode = $it1.next();
							if(i_cleanNode.elementsNamed("Id").hasNext()) {
								var l_targetMergeElement = i_cleanNode.elementsNamed("Id").next();
								if(l_targetMergeElement.firstChild().get_nodeValue() == elt1.get("id")) {
									l_cleanNode1 = i_cleanNode;
									l_targetNodeFound = true;
									break;
								}
							}
						}
						if(l_targetNodeFound) {
							this._mergeChildren(elt1,l_cleanNode1);
							p_gameNode.removeChild(elt1);
						} else {
							elt1.set_nodeName((function($this) {
								var $r;
								var _this3 = elt1.get_nodeName();
								$r = HxOverrides.substr(_this3,1,null);
								return $r;
							}(this)));
							elt1.remove("id");
						}
					} else tools_spark_Console.warn("Target-Mergable Element " + l_elementCleanNodeName + " does not have a targetMerge attribute");
				} else tools_spark_Console.warn("Non-mergable element " + l_elementCleanNodeName + " has a merge identifier");
			}
		}
	}
	,_mergeChildren: function(mergeNode,cleanNode) {
		var childrenArray = [];
		var $it0 = mergeNode.elements();
		while( $it0.hasNext() ) {
			var elt = $it0.next();
			childrenArray.push(elt);
		}
		if((function($this) {
			var $r;
			var key;
			{
				var key1 = cleanNode.get_nodeName();
				key = $this._xmlNodeNameToNodeType.get(key1);
			}
			$r = $this._isNodeArray.get(key);
			return $r;
		}(this))) {
			var _g = 0;
			while(_g < childrenArray.length) {
				var mergeNodeChild = childrenArray[_g];
				++_g;
				cleanNode.addChild(mergeNodeChild);
			}
		} else {
			var _g1 = 0;
			while(_g1 < childrenArray.length) {
				var mergeNodeChild1 = childrenArray[_g1];
				++_g1;
				if((function($this) {
					var $r;
					var _this = mergeNodeChild1.get_nodeName();
					$r = HxOverrides.substr(_this,0,1);
					return $r;
				}(this)) != "_") {
					if(cleanNode.elementsNamed(mergeNodeChild1.get_nodeName()).hasNext()) cleanNode.removeChild(cleanNode.elementsNamed(mergeNodeChild1.get_nodeName()).next());
				}
				cleanNode.addChild(mergeNodeChild1);
			}
		}
	}
	,_parseEmbeddedStringAsset: function(p_stringAssetUrl) {
		try {
			return Xml.parse(tools_spark_framework_Assets.getScript(p_stringAssetUrl).toString());
		} catch( err ) {
			if (err instanceof js__$Boot_HaxeError) err = err.val;
			tools_spark_Console.error(Std.string(err));
			tools_spark_Console.error("Spark Parser Error: Entity [" + p_stringAssetUrl + "] has not been loaded!");
			return null;
		}
	}
	,getGameNode: function(p_expectedGameType,p_gameClassName,p_gameClassNode) {
		var l_gameClassNode;
		if(p_gameClassName != null && p_gameClassNode != null) {
			tools_spark_Console.warn("Both a game class name and a game class node have been specified to create a game class. Using game class node...");
			l_gameClassNode = p_gameClassNode;
		} else if(p_gameClassName != null) {
			l_gameClassNode = this._parseEmbeddedStringAsset(p_gameClassName);
			if(l_gameClassNode != null) l_gameClassNode = l_gameClassNode.firstElement();
		} else if(p_gameClassNode != null) l_gameClassNode = p_gameClassNode; else l_gameClassNode = Xml.createElement(this._xmlGameTypeToNodeName.get(p_expectedGameType));
		if(l_gameClassNode != null) {
			if(l_gameClassNode.get_nodeName() != this._xmlGameTypeToNodeName.get(p_expectedGameType)) {
				tools_spark_Console.error("Expected " + this._xmlGameTypeToNodeName.get(p_expectedGameType) + ", got " + l_gameClassNode.get_nodeName());
				return null;
			} else return l_gameClassNode;
		} else {
			tools_spark_Console.error("Class " + Std.string(p_expectedGameType) + " [" + p_gameClassName + "] is not well-formed or not found!");
			return null;
		}
	}
	,__class__: tools_spark_sliced_services_std_logic_gde_core_GameClassParser
};
var tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassValidator = function() { };
$hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.IGameClassValidator"] = tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassValidator;
tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassValidator.__name__ = ["tools","spark","sliced","services","std","logic","gde","interfaces","IGameClassValidator"];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassValidator.prototype = {
	__class__: tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassValidator
};
var tools_spark_sliced_services_std_logic_gde_core_GameClassValidator = function(p_xmlNodeTypeToNodeName,p_xmlConcurrencyTypeToName,p_xmlStateTypeToName) {
	tools_spark_Console.log("Creating Game Class Validator");
	this._xmlNodeTypeToNodeName = p_xmlNodeTypeToNodeName;
	this._xmlConcurrencyTypeToName = p_xmlConcurrencyTypeToName;
	this._xmlStateTypeToName = p_xmlStateTypeToName;
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.logic.gde.core.GameClassValidator"] = tools_spark_sliced_services_std_logic_gde_core_GameClassValidator;
tools_spark_sliced_services_std_logic_gde_core_GameClassValidator.__name__ = ["tools","spark","sliced","services","std","logic","gde","core","GameClassValidator"];
tools_spark_sliced_services_std_logic_gde_core_GameClassValidator.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameClassValidator];
tools_spark_sliced_services_std_logic_gde_core_GameClassValidator.prototype = {
	_init: function() {
		this._initNodeRulesMap();
	}
	,_initNodeRulesMap: function() {
		this._xmlNodeTypeToNodeRule = new haxe_ds_EnumValueMap();
		var v = this._createActionNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION,v);
		v;
		var v1 = this._createActionsNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS,v1);
		v1;
		var v2 = this._createEntitiesNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES,v2);
		v2;
		var v3 = this._createEntityNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY,v3);
		v3;
		var v4 = this._createFormNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM,v4);
		v4;
		var v5 = this._createScriptsNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS,v5);
		v5;
		var v6 = this._createScriptNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT,v6);
		v6;
		var v7 = this._createGmlNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.GML,v7);
		v7;
		var v8 = this._createTriggersNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS,v8);
		v8;
		var v9 = this._createTriggerNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER,v9);
		v9;
		var v10 = this._createEventNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT,v10);
		v10;
		var v11 = this._createParameterNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER,v11);
		v11;
		var v12 = this._createTargetNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET,v12);
		v12;
		var v13 = this._createTargetTypeNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE,v13);
		v13;
		var v14 = this._createConcurrencyNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY,v14);
		v14;
		var v15 = this._createIdNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID,v15);
		v15;
		var v16 = this._createSpaceNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE,v16);
		v16;
		var v17 = this._createStateNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE,v17);
		v17;
		var v18 = this._createStatesNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES,v18);
		v18;
		var v19 = this._createTypeNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE,v19);
		v19;
		var v20 = this._createValueNodeRule();
		this._xmlNodeTypeToNodeRule.set(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE,v20);
		v20;
	}
	,validateGameNode: function(p_gameNode,p_nodeType) {
		if(this._xmlNodeTypeToNodeRule.get(p_nodeType) == null) {
			tools_spark_Console.error("This rule has not been created Yet!");
			return false;
		}
		try {
			tools_spark_framework_haxe_LooseCheck.checkNode(p_gameNode,this._xmlNodeTypeToNodeRule.get(p_nodeType));
			return true;
		} catch( m ) {
			if (m instanceof js__$Boot_HaxeError) m = m.val;
			if( js_Boot.__instanceof(m,String) ) {
				tools_spark_Console.error(m);
				tools_spark_Console.error(p_gameNode.toString());
				return false;
			} else throw(m);
		}
	}
	,_createEntityNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RList([tools_spark_framework_haxe_Rule.ROptional(tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS))),tools_spark_framework_haxe_Rule.ROptional(tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES))),tools_spark_framework_haxe_Rule.ROptional(tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS))),tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM))],false);
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY),[],l_children);
	}
	,_createFormNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RList([tools_spark_framework_haxe_Rule.ROptional(tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES))),tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE))],false);
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM),[],l_children);
	}
	,_createStateNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RList([tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID)),tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE)),tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE))],false);
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE),[],l_children);
	}
	,_createActionNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RList([tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID)),tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY)),tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS)),tools_spark_framework_haxe_Rule.ROptional(tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES)))],false);
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION),[],l_children);
	}
	,_createSpaceNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.ROptional(tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES)));
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE),[],l_children);
	}
	,_createEntitiesNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RMulti(tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY)),false);
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES),[],l_children);
	}
	,_createStatesNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RMulti(tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE)),false);
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES),[],l_children);
	}
	,_createActionsNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RMulti(tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION)),false);
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS),[],l_children);
	}
	,_createIdNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RData();
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID),[],l_children);
	}
	,_createScriptsNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RMulti(tools_spark_framework_haxe_Rule.RChoice([tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT)),tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.GML))]),true);
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS),[],l_children);
	}
	,_createScriptNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RData();
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT),[],l_children);
	}
	,_createGmlNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RData();
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.GML),[],l_children);
	}
	,_createTriggersNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RMulti(tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER)),false);
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS),[],l_children);
	}
	,_createTriggerNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RList([tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT)),tools_spark_framework_haxe_Rule.ROptional(tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER))),tools_spark_framework_haxe_Rule.ROptional(tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET))),tools_spark_framework_haxe_Rule.ROptional(tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE))),tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS))],false);
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER),[],l_children);
	}
	,_createParameterNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RData();
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER),[],l_children);
	}
	,_createTargetNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RData();
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET),[],l_children);
	}
	,_createTargetTypeNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RData();
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE),[],l_children);
	}
	,_createConcurrencyNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RData(tools_spark_framework_haxe_Filter.FEnum([this._xmlConcurrencyTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PARALLEL),this._xmlConcurrencyTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PERSISTENT),this._xmlConcurrencyTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.TRANSIENT)]));
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY),[],l_children);
	}
	,_createTypeNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RData(tools_spark_framework_haxe_Filter.FEnum([this._xmlStateTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.EXPRESSION),this._xmlStateTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DYNAMIC),this._xmlStateTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.INTEGER),this._xmlStateTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DECIMAL),this._xmlStateTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.BOOLEAN),this._xmlStateTypeToName.get(tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.TEXT)]));
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE),[],l_children);
	}
	,_createValueNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RData();
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE),[],l_children);
	}
	,_createEventNodeRule: function() {
		var l_children = tools_spark_framework_haxe_Rule.RData(tools_spark_framework_haxe_Filter.FEnum(tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesStringArray));
		return tools_spark_framework_haxe_Rule.RNode(this._xmlNodeTypeToNodeName.get(tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT),[],l_children);
	}
	,__class__: tools_spark_sliced_services_std_logic_gde_core_GameClassValidator
};
var tools_spark_sliced_services_std_logic_gde_interfaces_IGameEntity = function() { };
$hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.IGameEntity"] = tools_spark_sliced_services_std_logic_gde_interfaces_IGameEntity;
tools_spark_sliced_services_std_logic_gde_interfaces_IGameEntity.__name__ = ["tools","spark","sliced","services","std","logic","gde","interfaces","IGameEntity"];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameEntity.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameBase];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameEntity.prototype = {
	__class__: tools_spark_sliced_services_std_logic_gde_interfaces_IGameEntity
	,__properties__: {get_children:"get_children"}
};
var tools_spark_sliced_services_std_logic_gde_core_GameEntity = function() {
	tools_spark_sliced_services_std_logic_gde_core_AGameBase.call(this);
	this.uid = tools_spark_sliced_core_Sliced.logic.gameFactory.issueUID();
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.logic.gde.core.GameEntity"] = tools_spark_sliced_services_std_logic_gde_core_GameEntity;
tools_spark_sliced_services_std_logic_gde_core_GameEntity.__name__ = ["tools","spark","sliced","services","std","logic","gde","core","GameEntity"];
tools_spark_sliced_services_std_logic_gde_core_GameEntity.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameEntity];
tools_spark_sliced_services_std_logic_gde_core_GameEntity.__super__ = tools_spark_sliced_services_std_logic_gde_core_AGameBase;
tools_spark_sliced_services_std_logic_gde_core_GameEntity.prototype = $extend(tools_spark_sliced_services_std_logic_gde_core_AGameBase.prototype,{
	_init: function() {
		this.gameStateSet = new haxe_ds_StringMap();
		this.triggerSet = [];
		this.possibleActionSet = new haxe_ds_StringMap();
		this.currentActionSet = new haxe_ds_StringMap();
	}
	,clone: function(p_parentEntity) {
		var l_clonedEntity = new tools_spark_sliced_services_std_logic_gde_core_GameEntity();
		l_clonedEntity.parentEntity = p_parentEntity;
		l_clonedEntity.gameForm = this.gameForm.clone(l_clonedEntity);
		var $it0 = this.gameStateSet.iterator();
		while( $it0.hasNext() ) {
			var state = $it0.next();
			l_clonedEntity.addState(state.clone(l_clonedEntity));
		}
		var $it1 = this.possibleActionSet.iterator();
		while( $it1.hasNext() ) {
			var action = $it1.next();
			l_clonedEntity.addAction(action.clone(l_clonedEntity));
		}
		var _g = 0;
		var _g1 = this.triggerSet;
		while(_g < _g1.length) {
			var trigger = _g1[_g];
			++_g;
			l_clonedEntity.addTrigger(trigger.clone(l_clonedEntity));
		}
		tools_spark_sliced_core_Sliced.logic.registerEntityByName(l_clonedEntity);
		tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CREATED,l_clonedEntity);
		return l_clonedEntity;
	}
	,doActions: function() {
		var $it0 = this.currentActionSet.iterator();
		while( $it0.hasNext() ) {
			var actions = $it0.next();
			var _g = 0;
			while(_g < actions.length) {
				var action = actions[_g];
				++_g;
				action.doPass();
			}
		}
		var _g1 = 0;
		var _g11 = this.gameForm.gameSpace.gameEntitySet;
		while(_g1 < _g11.length) {
			var entity = _g11[_g1];
			++_g1;
			entity.doActions();
		}
	}
	,addState: function(gameState) {
		if(this.gameStateSet.get(gameState.id) != null) tools_spark_Console.warn("A State with id " + gameState.id + " already exists in this Entity.");
		{
			this.gameStateSet.set(gameState.id,gameState);
			gameState;
		}
	}
	,addAction: function(gameAction) {
		if(this.possibleActionSet.get(gameAction.id) != null) tools_spark_Console.warn("An Action with id " + gameAction.id + " already exists in this Entity."); else {
			var v = [];
			this.currentActionSet.set(gameAction.id,v);
			v;
		}
		{
			this.possibleActionSet.set(gameAction.id,gameAction);
			gameAction;
		}
	}
	,addTrigger: function(gameTrigger) {
		this.triggerSet.push(gameTrigger);
		tools_spark_sliced_core_Sliced.event.addTrigger(gameTrigger);
	}
	,getAction: function(p_actionId) {
		return this.possibleActionSet.get(p_actionId);
	}
	,a: function(p_actionId) {
		return this.possibleActionSet.get(p_actionId);
	}
	,forceAction: function(p_actionId,p_args) {
		var gameAction = this.possibleActionSet.get(p_actionId);
		if(p_args != null) {
			var _g = 0;
			var _g1 = Reflect.fields(p_args);
			while(_g < _g1.length) {
				var f_field = _g1[_g];
				++_g;
				gameAction.setState(f_field,Reflect.field(p_args,f_field));
			}
		}
		gameAction.doPass();
	}
	,fa: function(p_actionId,p_args) {
		this.forceAction(p_actionId,p_args);
	}
	,startAction: function(actionId,p_args) {
		var gameAction = this.possibleActionSet.get(actionId);
		if(gameAction != null) {
			if(p_args != null) {
				var _g = 0;
				var _g1 = Reflect.fields(p_args);
				while(_g < _g1.length) {
					var f_field = _g1[_g];
					++_g;
					gameAction.setState(f_field,Reflect.field(p_args,f_field));
				}
			}
			var _g2 = gameAction.concurrency;
			switch(Type.enumIndex(_g2)) {
			case 0:
				this.currentActionSet.get(gameAction.id).push(gameAction);
				break;
			case 1:
				if(this.currentActionSet.get(gameAction.id).length == 0) this.currentActionSet.get(gameAction.id).push(gameAction);
				break;
			case 2:
				while(this.currentActionSet.get(gameAction.id).length > 0) this.currentActionSet.get(gameAction.id).pop();
				this.currentActionSet.get(gameAction.id).push(gameAction);
				break;
			}
			return true;
		} else {
			tools_spark_Console.warn("Action with id '" + actionId + "' could not be started.");
			return false;
		}
	}
	,sa: function(actionId,p_args) {
		return this.startAction(actionId,p_args);
	}
	,stopAction: function(actionId) {
		if(this.currentActionSet.exists(actionId)) {
			while(this.currentActionSet.get(actionId).length > 0) this.currentActionSet.get(actionId).pop();
			return true;
		} else {
			tools_spark_Console.warn("Action with id '" + actionId + "' could not be stopped.");
			return false;
		}
	}
	,ta: function(actionId) {
		return this.stopAction(actionId);
	}
	,getState: function(p_stateId) {
		if(this.gameStateSet.get(p_stateId) == null) return null; else return this.gameStateSet.get(p_stateId).get_value();
	}
	,s: function(p_stateId) {
		if(this.gameStateSet.get(p_stateId) == null) return null; else return this.gameStateSet.get(p_stateId).get_value();
	}
	,get: function(p_stateId) {
		if(this.gameStateSet.get(p_stateId) == null) return null; else return this.gameStateSet.get(p_stateId).get_value();
	}
	,getStateType: function(p_stateId) {
		if(this.gameStateSet.get(p_stateId) == null) return null; else {
			var e = this.gameStateSet.get(p_stateId).type;
			return Type.enumConstructor(e);
		}
	}
	,setState: function(p_stateId,p_value) {
		try {
			this.gameStateSet.get(p_stateId).set_value(p_value);
			tools_spark_sliced_core_Sliced.display.updateDisplayObjectState(this,p_stateId);
			return this.gameStateSet.get(p_stateId).get_value();
		} catch( e ) {
			if (e instanceof js__$Boot_HaxeError) e = e.val;
			tools_spark_Console.error("Could not Set State " + p_stateId + " to: " + Std.string(p_value) + ", for entity: " + Std.string(this.getState("name")));
			return null;
		}
	}
	,set: function(p_stateId,p_value) {
		try {
			this.gameStateSet.get(p_stateId).set_value(p_value);
			tools_spark_sliced_core_Sliced.display.updateDisplayObjectState(this,p_stateId);
			return this.gameStateSet.get(p_stateId).get_value();
		} catch( e ) {
			if (e instanceof js__$Boot_HaxeError) e = e.val;
			tools_spark_Console.error("Could not Set State " + p_stateId + " to: " + Std.string(p_value) + ", for entity: " + Std.string(this.getState("name")));
			return null;
		}
	}
	,setStateSilent: function(p_stateId,p_value) {
		try {
			this.gameStateSet.get(p_stateId).set_value(p_value);
			return this.gameStateSet.get(p_stateId).get_value();
		} catch( e ) {
			if (e instanceof js__$Boot_HaxeError) e = e.val;
			tools_spark_Console.error("Could not Silently Set State " + p_stateId + " to: " + Std.string(p_value) + ", for entity: " + Std.string(this.getState("name")));
			return null;
		}
	}
	,addToState: function(p_stateId,p_value) {
		var _g = this.gameStateSet.get(p_stateId);
		_g.set_value(_g.get_value() + p_value);
		tools_spark_sliced_core_Sliced.display.updateDisplayObjectState(this,p_stateId);
		return this.gameStateSet.get(p_stateId).get_value();
	}
	,subtractFromState: function(p_stateId,p_value) {
		var _g = this.gameStateSet.get(p_stateId);
		_g.set_value(_g.get_value() - p_value);
		tools_spark_sliced_core_Sliced.display.updateDisplayObjectState(this,p_stateId);
		return this.gameStateSet.get(p_stateId).get_value();
	}
	,addChild: function(p_gameEntity) {
		this.get_children().push(p_gameEntity);
		p_gameEntity.parentEntity = this;
		tools_spark_sliced_core_Sliced.display.addDisplayObjectChild(this,p_gameEntity);
	}
	,setZorder: function(p_location) {
		var l_index = this.parentEntity.get_children().indexOf(this);
		var _this = this.parentEntity.get_children();
		HxOverrides.remove(_this,this);
		tools_spark_Console.error("MY INDEX IS: " + l_index);
		switch(p_location) {
		case "top":
			this.parentEntity.get_children().push(this);
			break;
		case "oneUp":
			var _this1 = this.parentEntity.get_children();
			_this1.splice(l_index + 1,0,this);
			break;
		case "oneDown":
			var _this2 = this.parentEntity.get_children();
			var pos = Std["int"](Math.max(0,l_index - 1));
			_this2.splice(pos,0,this);
			break;
		case "bottom":
			var _this3 = this.parentEntity.get_children();
			_this3.splice(0,0,this);
			break;
		default:
		}
		var _g = 0;
		var _g1 = this.parentEntity.get_children();
		while(_g < _g1.length) {
			var child = _g1[_g];
			++_g;
			child.setState("command_zOrder",this.parentEntity.get_children().indexOf(child));
		}
	}
	,get_zIndex: function() {
		return this.parentEntity.get_children().indexOf(this);
	}
	,insertChild: function(p_gameEntity,p_pos) {
		var _this = this.get_children();
		_this.splice(p_pos,0,p_gameEntity);
		p_gameEntity.parentEntity = this;
		tools_spark_sliced_core_Sliced.display.insertDisplayObjectChild(this,p_gameEntity,p_pos);
	}
	,removeChild: function(p_gameEntity) {
		var _this = this.get_children();
		HxOverrides.remove(_this,p_gameEntity);
		tools_spark_sliced_core_Sliced.display.removeDisplayObjectChild(this,p_gameEntity);
	}
	,remove: function() {
		this.get_parent().removeChild(this);
	}
	,removeChildren: function(p_ignoreFirst) {
		if(p_ignoreFirst == null) p_ignoreFirst = false;
		var l_children = [];
		var _g = 0;
		var _g1 = this.get_children();
		while(_g < _g1.length) {
			var f_child = _g1[_g];
			++_g;
			l_children.push(f_child);
		}
		if(p_ignoreFirst) l_children.shift();
		var _g2 = 0;
		while(_g2 < l_children.length) {
			var f_child1 = l_children[_g2];
			++_g2;
			this.removeChild(f_child1);
		}
	}
	,getChildren: function() {
		return this.get_children();
	}
	,get_children: function() {
		return this.gameForm.gameSpace.gameEntitySet;
	}
	,__class__: tools_spark_sliced_services_std_logic_gde_core_GameEntity
	,__properties__: $extend(tools_spark_sliced_services_std_logic_gde_core_AGameBase.prototype.__properties__,{get_children:"get_children"})
});
var tools_spark_sliced_services_std_logic_gde_interfaces_IGameFactory = function() { };
$hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.IGameFactory"] = tools_spark_sliced_services_std_logic_gde_interfaces_IGameFactory;
tools_spark_sliced_services_std_logic_gde_interfaces_IGameFactory.__name__ = ["tools","spark","sliced","services","std","logic","gde","interfaces","IGameFactory"];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameFactory.prototype = {
	__class__: tools_spark_sliced_services_std_logic_gde_interfaces_IGameFactory
};
var tools_spark_sliced_services_std_logic_gde_core_GameFactory = function() {
	this.instancesCreated = 0;
	tools_spark_Console.log("Creating Game Factory");
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.logic.gde.core.GameFactory"] = tools_spark_sliced_services_std_logic_gde_core_GameFactory;
tools_spark_sliced_services_std_logic_gde_core_GameFactory.__name__ = ["tools","spark","sliced","services","std","logic","gde","core","GameFactory"];
tools_spark_sliced_services_std_logic_gde_core_GameFactory.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameFactory];
tools_spark_sliced_services_std_logic_gde_core_GameFactory.prototype = {
	issueUID: function() {
		return this._numObjects++;
	}
	,_init: function() {
		this._gameClassParser = new tools_spark_sliced_services_std_logic_gde_core_GameClassParser();
		this._cache = new haxe_ds_StringMap();
		this._numObjects = 0;
	}
	,createGameEntityExtended: function(p_gameClassName,p_extendGameClassName) {
		var l_extendGameNode = this._gameClassParser.getGameNode(tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.ENTITY,p_extendGameClassName);
		l_extendGameNode.set("extends",p_gameClassName);
		return this.createGameEntity(null,l_extendGameNode);
	}
	,createGameEntityByXml: function(p_gameClassNode) {
		return this.createGameEntity(null,p_gameClassNode);
	}
	,createGameEntity: function(p_gameClassName,p_gameClassNode,p_dontCache) {
		if(p_dontCache == null) p_dontCache = false;
		this.instancesCreated += 1;
		if(p_gameClassName != null) {
			if(this._cache.exists(p_gameClassName)) {
				if(this._cache.get(p_gameClassName) != null) return this._cache.get(p_gameClassName).clone();
			}
		}
		var l_gameNode = this._gameClassParser.getGameNode(tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.ENTITY,p_gameClassName,p_gameClassNode);
		if(l_gameNode != null) {
			if(this._gameClassParser.parseGameNode(l_gameNode)) {
				var l_gameEntity = this._gameClassParser.instantiateEntity(l_gameNode);
				if(l_gameEntity != null) {
					if(p_gameClassName != null) {
						if(this._cache.exists(p_gameClassName)) {
							if(this._cache.get(p_gameClassName) == null) {
								var value = l_gameEntity.clone();
								this._cache.set(p_gameClassName,value);
							} else tools_spark_Console.warn("Game Entity [" + p_gameClassName + "] exists and is not null. WE SHOULDN'T BE HERE! SOMETHING IS WRONG!!!!!!!!!!!!!!!!!!!");
						} else if(!p_dontCache) this._cache.set(p_gameClassName,null);
					}
					return l_gameEntity;
				} else {
					tools_spark_Console.error("Game Entity could not be instantiated");
					return null;
				}
			} else {
				tools_spark_Console.error("Game Entity could not be parsed");
				tools_spark_Console.warn(l_gameNode.toString());
				return null;
			}
		} else {
			tools_spark_Console.error("Game Entity Class [" + p_gameClassName + "] is not well-formed or not found!");
			return null;
		}
	}
	,__class__: tools_spark_sliced_services_std_logic_gde_core_GameFactory
};
var tools_spark_sliced_services_std_logic_gde_interfaces_IGameForm = function() { };
$hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.IGameForm"] = tools_spark_sliced_services_std_logic_gde_interfaces_IGameForm;
tools_spark_sliced_services_std_logic_gde_interfaces_IGameForm.__name__ = ["tools","spark","sliced","services","std","logic","gde","interfaces","IGameForm"];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameForm.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameBase];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameForm.prototype = {
	__class__: tools_spark_sliced_services_std_logic_gde_interfaces_IGameForm
};
var tools_spark_sliced_services_std_logic_gde_core_GameForm = function() {
	tools_spark_sliced_services_std_logic_gde_core_AGameBase.call(this);
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.logic.gde.core.GameForm"] = tools_spark_sliced_services_std_logic_gde_core_GameForm;
tools_spark_sliced_services_std_logic_gde_core_GameForm.__name__ = ["tools","spark","sliced","services","std","logic","gde","core","GameForm"];
tools_spark_sliced_services_std_logic_gde_core_GameForm.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameForm];
tools_spark_sliced_services_std_logic_gde_core_GameForm.__super__ = tools_spark_sliced_services_std_logic_gde_core_AGameBase;
tools_spark_sliced_services_std_logic_gde_core_GameForm.prototype = $extend(tools_spark_sliced_services_std_logic_gde_core_AGameBase.prototype,{
	_init: function() {
		this.gameStateSet = new haxe_ds_StringMap();
	}
	,clone: function(p_parentEntity) {
		var l_clonedForm = new tools_spark_sliced_services_std_logic_gde_core_GameForm();
		l_clonedForm.parentEntity = p_parentEntity;
		var $it0 = this.gameStateSet.iterator();
		while( $it0.hasNext() ) {
			var state = $it0.next();
			l_clonedForm.addState(state.clone(p_parentEntity));
		}
		l_clonedForm.gameSpace = this.gameSpace.clone(p_parentEntity);
		return l_clonedForm;
	}
	,addState: function(gameState) {
		if(this.gameStateSet.get(gameState.id) != null) tools_spark_Console.warn("A State with id " + gameState.id + " already exists in this Form.");
		{
			this.gameStateSet.set(gameState.id,gameState);
			gameState;
		}
	}
	,getState: function(p_stateId) {
		if(this.gameStateSet.get(p_stateId) == null) return null; else return this.gameStateSet.get(p_stateId).get_value();
	}
	,s: function(p_stateId) {
		if(this.gameStateSet.get(p_stateId) == null) return null; else return this.gameStateSet.get(p_stateId).get_value();
	}
	,get: function(p_stateId) {
		if(this.gameStateSet.get(p_stateId) == null) return null; else return this.gameStateSet.get(p_stateId).get_value();
	}
	,setState: function(p_stateId,p_value) {
		this.gameStateSet.get(p_stateId).set_value(p_value);
		return this.gameStateSet.get(p_stateId).get_value();
	}
	,set: function(p_stateId,p_value) {
		this.gameStateSet.get(p_stateId).set_value(p_value);
		return this.gameStateSet.get(p_stateId).get_value();
	}
	,__class__: tools_spark_sliced_services_std_logic_gde_core_GameForm
});
var tools_spark_sliced_services_std_logic_gde_interfaces_IGameSpace = function() { };
$hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.IGameSpace"] = tools_spark_sliced_services_std_logic_gde_interfaces_IGameSpace;
tools_spark_sliced_services_std_logic_gde_interfaces_IGameSpace.__name__ = ["tools","spark","sliced","services","std","logic","gde","interfaces","IGameSpace"];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameSpace.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameBase];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameSpace.prototype = {
	__class__: tools_spark_sliced_services_std_logic_gde_interfaces_IGameSpace
};
var tools_spark_sliced_services_std_logic_gde_core_GameSpace = function() {
	tools_spark_sliced_services_std_logic_gde_core_AGameBase.call(this);
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.logic.gde.core.GameSpace"] = tools_spark_sliced_services_std_logic_gde_core_GameSpace;
tools_spark_sliced_services_std_logic_gde_core_GameSpace.__name__ = ["tools","spark","sliced","services","std","logic","gde","core","GameSpace"];
tools_spark_sliced_services_std_logic_gde_core_GameSpace.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameSpace];
tools_spark_sliced_services_std_logic_gde_core_GameSpace.__super__ = tools_spark_sliced_services_std_logic_gde_core_AGameBase;
tools_spark_sliced_services_std_logic_gde_core_GameSpace.prototype = $extend(tools_spark_sliced_services_std_logic_gde_core_AGameBase.prototype,{
	_init: function() {
		this.gameEntitySet = [];
	}
	,clone: function(p_parentEntity) {
		var l_clonedSpace = new tools_spark_sliced_services_std_logic_gde_core_GameSpace();
		l_clonedSpace.parentEntity = p_parentEntity;
		var _g = 0;
		var _g1 = this.gameEntitySet;
		while(_g < _g1.length) {
			var entity = _g1[_g];
			++_g;
			l_clonedSpace.gameEntitySet.push(entity.clone(p_parentEntity));
		}
		return l_clonedSpace;
	}
	,__class__: tools_spark_sliced_services_std_logic_gde_core_GameSpace
});
var tools_spark_sliced_services_std_logic_gde_interfaces_IGameState = function() { };
$hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.IGameState"] = tools_spark_sliced_services_std_logic_gde_interfaces_IGameState;
tools_spark_sliced_services_std_logic_gde_interfaces_IGameState.__name__ = ["tools","spark","sliced","services","std","logic","gde","interfaces","IGameState"];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameState.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameBase];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameState.prototype = {
	__class__: tools_spark_sliced_services_std_logic_gde_interfaces_IGameState
	,__properties__: {set_value:"set_value",get_value:"get_value"}
};
var tools_spark_sliced_services_std_logic_gde_core_GameState = function() {
	tools_spark_sliced_services_std_logic_gde_core_AGameBase.call(this);
};
$hxClasses["tools.spark.sliced.services.std.logic.gde.core.GameState"] = tools_spark_sliced_services_std_logic_gde_core_GameState;
tools_spark_sliced_services_std_logic_gde_core_GameState.__name__ = ["tools","spark","sliced","services","std","logic","gde","core","GameState"];
tools_spark_sliced_services_std_logic_gde_core_GameState.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameState];
tools_spark_sliced_services_std_logic_gde_core_GameState.__super__ = tools_spark_sliced_services_std_logic_gde_core_AGameBase;
tools_spark_sliced_services_std_logic_gde_core_GameState.prototype = $extend(tools_spark_sliced_services_std_logic_gde_core_AGameBase.prototype,{
	get_value: function() {
		return this._value;
	}
	,set_value: function(p_value) {
		return this._value = p_value;
	}
	,_init: function() {
	}
	,clone: function(p_parentEntity) {
		var l_clonedState = new tools_spark_sliced_services_std_logic_gde_core_GameState();
		l_clonedState.parentEntity = p_parentEntity;
		l_clonedState.id = this.id;
		l_clonedState.type = this.type;
		l_clonedState.set_value(this.get_value());
		return l_clonedState;
	}
	,__class__: tools_spark_sliced_services_std_logic_gde_core_GameState
	,__properties__: $extend(tools_spark_sliced_services_std_logic_gde_core_AGameBase.prototype.__properties__,{set_value:"set_value",get_value:"get_value"})
});
var tools_spark_sliced_services_std_logic_gde_core_GameStateExpr = function() {
	tools_spark_sliced_services_std_logic_gde_core_AGameBase.call(this);
};
$hxClasses["tools.spark.sliced.services.std.logic.gde.core.GameStateExpr"] = tools_spark_sliced_services_std_logic_gde_core_GameStateExpr;
tools_spark_sliced_services_std_logic_gde_core_GameStateExpr.__name__ = ["tools","spark","sliced","services","std","logic","gde","core","GameStateExpr"];
tools_spark_sliced_services_std_logic_gde_core_GameStateExpr.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameState];
tools_spark_sliced_services_std_logic_gde_core_GameStateExpr.__super__ = tools_spark_sliced_services_std_logic_gde_core_AGameBase;
tools_spark_sliced_services_std_logic_gde_core_GameStateExpr.prototype = $extend(tools_spark_sliced_services_std_logic_gde_core_AGameBase.prototype,{
	get_value: function() {
		return tools_spark_sliced_core_Sliced.logic.scriptInterpreter.runExpr(this._value,this.parentEntity,this.parentEntity.parentEntity,this);
	}
	,set_value: function(p_value) {
		return this._value = tools_spark_sliced_core_Sliced.logic.scriptInterpreter.hashExpr(p_value);
	}
	,get_actualValue: function() {
		return this._value;
	}
	,set_actualValue: function(p_value) {
		return this._value = p_value;
	}
	,_init: function() {
	}
	,clone: function(p_parentEntity) {
		var l_clonedState = new tools_spark_sliced_services_std_logic_gde_core_GameStateExpr();
		l_clonedState.parentEntity = p_parentEntity;
		l_clonedState.id = this.id;
		l_clonedState.type = this.type;
		l_clonedState.set_actualValue(this.get_actualValue());
		return l_clonedState;
	}
	,__class__: tools_spark_sliced_services_std_logic_gde_core_GameStateExpr
	,__properties__: $extend(tools_spark_sliced_services_std_logic_gde_core_AGameBase.prototype.__properties__,{set_actualValue:"set_actualValue",get_actualValue:"get_actualValue",set_value:"set_value",get_value:"get_value"})
});
var tools_spark_sliced_services_std_logic_gde_interfaces_IGameTrigger = function() { };
$hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.IGameTrigger"] = tools_spark_sliced_services_std_logic_gde_interfaces_IGameTrigger;
tools_spark_sliced_services_std_logic_gde_interfaces_IGameTrigger.__name__ = ["tools","spark","sliced","services","std","logic","gde","interfaces","IGameTrigger"];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameTrigger.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameBase];
tools_spark_sliced_services_std_logic_gde_interfaces_IGameTrigger.prototype = {
	__class__: tools_spark_sliced_services_std_logic_gde_interfaces_IGameTrigger
};
var tools_spark_sliced_services_std_logic_gde_core_GameTrigger = function() {
	tools_spark_sliced_services_std_logic_gde_core_AGameBase.call(this);
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.logic.gde.core.GameTrigger"] = tools_spark_sliced_services_std_logic_gde_core_GameTrigger;
tools_spark_sliced_services_std_logic_gde_core_GameTrigger.__name__ = ["tools","spark","sliced","services","std","logic","gde","core","GameTrigger"];
tools_spark_sliced_services_std_logic_gde_core_GameTrigger.__interfaces__ = [tools_spark_sliced_services_std_logic_gde_interfaces_IGameTrigger];
tools_spark_sliced_services_std_logic_gde_core_GameTrigger.__super__ = tools_spark_sliced_services_std_logic_gde_core_AGameBase;
tools_spark_sliced_services_std_logic_gde_core_GameTrigger.prototype = $extend(tools_spark_sliced_services_std_logic_gde_core_AGameBase.prototype,{
	_init: function() {
		this.scriptSet = [];
	}
	,clone: function(p_parentEntity) {
		var l_clonedTrigger = new tools_spark_sliced_services_std_logic_gde_core_GameTrigger();
		l_clonedTrigger.parentEntity = p_parentEntity;
		l_clonedTrigger.eventType = this.eventType;
		l_clonedTrigger.parameter = this.parameter;
		l_clonedTrigger.target = this.target;
		l_clonedTrigger.targetType = this.targetType;
		var _g = 0;
		var _g1 = this.scriptSet;
		while(_g < _g1.length) {
			var scriptId = _g1[_g];
			++_g;
			l_clonedTrigger.scriptSet.push(scriptId);
		}
		return l_clonedTrigger;
	}
	,doPass: function() {
		var _g = 0;
		var _g1 = this.scriptSet;
		while(_g < _g1.length) {
			var hashId = _g1[_g];
			++_g;
			if(hashId == -1) tools_spark_sliced_core_Sliced.logic.gmlInterpreter.run(hashId,(function($this) {
				var $r;
				var _g2 = new haxe_ds_StringMap();
				_g2.set("it",$this);
				_g2.set("me",$this.parentEntity);
				_g2.set("parent",$this.parentEntity.parentEntity);
				$r = _g2;
				return $r;
			}(this))); else if(tools_spark_sliced_core_Sliced.logic.scriptInterpreter.run(hashId,(function($this) {
				var $r;
				var _g21 = new haxe_ds_StringMap();
				_g21.set("it",$this);
				_g21.set("me",$this.parentEntity);
				_g21.set("parent",$this.parentEntity.parentEntity);
				$r = _g21;
				return $r;
			}(this))) == false) tools_spark_Console.error("Error: Failed to run Trigger [" + Std.string(this.eventType) + "].");
		}
	}
	,__class__: tools_spark_sliced_services_std_logic_gde_core_GameTrigger
});
var tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType = $hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.EConcurrencyType"] = { __ename__ : ["tools","spark","sliced","services","std","logic","gde","interfaces","EConcurrencyType"], __constructs__ : ["PARALLEL","PERSISTENT","TRANSIENT"] };
tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PARALLEL = ["PARALLEL",0];
tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PARALLEL.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType;
tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PERSISTENT = ["PERSISTENT",1];
tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PERSISTENT.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType;
tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.TRANSIENT = ["TRANSIENT",2];
tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.TRANSIENT.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType;
tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.__empty_constructs__ = [tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PARALLEL,tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.PERSISTENT,tools_spark_sliced_services_std_logic_gde_interfaces_EConcurrencyType.TRANSIENT];
var tools_spark_sliced_services_std_logic_gde_interfaces_EEventType = $hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.EEventType"] = { __ename__ : ["tools","spark","sliced","services","std","logic","gde","interfaces","EEventType"], __constructs__ : ["CREATED","UPDATE","CHANGED","NETWORK_CONNECTED","NETWORK_REQUEST","NETWORK_SERVER_EVENT","FILETRANSFER_CONNECTED","FILETRANSFER_SENDREQUEST","MOUSE_LEFT_CLICK","MOUSE_RIGHT_CLICK","MOUSE_LEFT_DOWN","MOUSE_RIGHT_DOWN","MOUSE_SCROLL","MOUSE_ENTERED","MOUSE_MOVED","MOUSE_LEFT","MOUSE_DOWN","MOUSE_UP","PHYSICS_COLLISION_START","PHYSICS_COLLISION_END","PHYSICS_SENSOR_START","PHYSICS_SENSOR_START_BIPED_FEET","PHYSICS_SENSOR_END","PHYSICS_SENSOR_END_BIPED_FEET","ON_DRAG_START","ON_DRAG","ON_DRAG_END","ON_DRAG_ENTER","ON_DRAG_OVER","ON_DRAG_LEAVE","ON_DROP","KEY_PRESSED_LOCAL","KEY_DOWN_LOCAL","KEY_RELEASED_LOCAL","KEY_PRESSED","KEY_DOWN","KEY_RELEASED","STATE_CHANGED","CUSTOM_TRIGGER","SCENE_CREATED","PROJECT_PAUSED","PROJECT_RESUMED","SOUND_COMPLETED","LAYOUT_INVALIDATED","STAGE_RESIZED"] };
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CREATED = ["CREATED",0];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CREATED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.UPDATE = ["UPDATE",1];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.UPDATE.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CHANGED = ["CHANGED",2];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CHANGED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_CONNECTED = ["NETWORK_CONNECTED",3];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_CONNECTED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_REQUEST = ["NETWORK_REQUEST",4];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_REQUEST.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_SERVER_EVENT = ["NETWORK_SERVER_EVENT",5];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_SERVER_EVENT.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.FILETRANSFER_CONNECTED = ["FILETRANSFER_CONNECTED",6];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.FILETRANSFER_CONNECTED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.FILETRANSFER_SENDREQUEST = ["FILETRANSFER_SENDREQUEST",7];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.FILETRANSFER_SENDREQUEST.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT_CLICK = ["MOUSE_LEFT_CLICK",8];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT_CLICK.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_RIGHT_CLICK = ["MOUSE_RIGHT_CLICK",9];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_RIGHT_CLICK.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT_DOWN = ["MOUSE_LEFT_DOWN",10];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT_DOWN.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_RIGHT_DOWN = ["MOUSE_RIGHT_DOWN",11];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_RIGHT_DOWN.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_SCROLL = ["MOUSE_SCROLL",12];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_SCROLL.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_ENTERED = ["MOUSE_ENTERED",13];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_ENTERED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_MOVED = ["MOUSE_MOVED",14];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_MOVED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT = ["MOUSE_LEFT",15];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_DOWN = ["MOUSE_DOWN",16];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_DOWN.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_UP = ["MOUSE_UP",17];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_UP.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_COLLISION_START = ["PHYSICS_COLLISION_START",18];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_COLLISION_START.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_COLLISION_END = ["PHYSICS_COLLISION_END",19];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_COLLISION_END.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_START = ["PHYSICS_SENSOR_START",20];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_START.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_START_BIPED_FEET = ["PHYSICS_SENSOR_START_BIPED_FEET",21];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_START_BIPED_FEET.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_END = ["PHYSICS_SENSOR_END",22];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_END.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_END_BIPED_FEET = ["PHYSICS_SENSOR_END_BIPED_FEET",23];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_END_BIPED_FEET.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_START = ["ON_DRAG_START",24];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_START.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG = ["ON_DRAG",25];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_END = ["ON_DRAG_END",26];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_END.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_ENTER = ["ON_DRAG_ENTER",27];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_ENTER.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_OVER = ["ON_DRAG_OVER",28];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_OVER.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_LEAVE = ["ON_DRAG_LEAVE",29];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_LEAVE.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DROP = ["ON_DROP",30];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DROP.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_PRESSED_LOCAL = ["KEY_PRESSED_LOCAL",31];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_PRESSED_LOCAL.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_DOWN_LOCAL = ["KEY_DOWN_LOCAL",32];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_DOWN_LOCAL.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_RELEASED_LOCAL = ["KEY_RELEASED_LOCAL",33];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_RELEASED_LOCAL.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_PRESSED = ["KEY_PRESSED",34];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_PRESSED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_DOWN = ["KEY_DOWN",35];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_DOWN.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_RELEASED = ["KEY_RELEASED",36];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_RELEASED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.STATE_CHANGED = ["STATE_CHANGED",37];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.STATE_CHANGED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CUSTOM_TRIGGER = ["CUSTOM_TRIGGER",38];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CUSTOM_TRIGGER.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.SCENE_CREATED = ["SCENE_CREATED",39];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.SCENE_CREATED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PROJECT_PAUSED = ["PROJECT_PAUSED",40];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PROJECT_PAUSED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PROJECT_RESUMED = ["PROJECT_RESUMED",41];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PROJECT_RESUMED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.SOUND_COMPLETED = ["SOUND_COMPLETED",42];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.SOUND_COMPLETED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.LAYOUT_INVALIDATED = ["LAYOUT_INVALIDATED",43];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.LAYOUT_INVALIDATED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.STAGE_RESIZED = ["STAGE_RESIZED",44];
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.STAGE_RESIZED.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.__empty_constructs__ = [tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CREATED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.UPDATE,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CHANGED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_CONNECTED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_REQUEST,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_SERVER_EVENT,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.FILETRANSFER_CONNECTED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.FILETRANSFER_SENDREQUEST,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT_CLICK,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_RIGHT_CLICK,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT_DOWN,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_RIGHT_DOWN,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_SCROLL,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_ENTERED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_MOVED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_DOWN,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_UP,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_COLLISION_START,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_COLLISION_END,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_START,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_START_BIPED_FEET,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_END,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_END_BIPED_FEET,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_START,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_END,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_ENTER,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_OVER,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_LEAVE,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DROP,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_PRESSED_LOCAL,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_DOWN_LOCAL,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_RELEASED_LOCAL,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_PRESSED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_DOWN,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_RELEASED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.STATE_CHANGED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CUSTOM_TRIGGER,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.SCENE_CREATED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PROJECT_PAUSED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PROJECT_RESUMED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.SOUND_COMPLETED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.LAYOUT_INVALIDATED,tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.STAGE_RESIZED];
var tools_spark_sliced_services_std_logic_gde_interfaces_EGameType = $hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.EGameType"] = { __ename__ : ["tools","spark","sliced","services","std","logic","gde","interfaces","EGameType"], __constructs__ : ["ENTITY","FORM","STATE","SPACE","ACTION","TRIGGER"] };
tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.ENTITY = ["ENTITY",0];
tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.ENTITY.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EGameType;
tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.FORM = ["FORM",1];
tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.FORM.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EGameType;
tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.STATE = ["STATE",2];
tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.STATE.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EGameType;
tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.SPACE = ["SPACE",3];
tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.SPACE.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EGameType;
tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.ACTION = ["ACTION",4];
tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.ACTION.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EGameType;
tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.TRIGGER = ["TRIGGER",5];
tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.TRIGGER.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EGameType;
tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.__empty_constructs__ = [tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.ENTITY,tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.FORM,tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.STATE,tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.SPACE,tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.ACTION,tools_spark_sliced_services_std_logic_gde_interfaces_EGameType.TRIGGER];
var tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType = $hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.ENodeType"] = { __ename__ : ["tools","spark","sliced","services","std","logic","gde","interfaces","ENodeType"], __constructs__ : ["ENTITIES","ENTITY","FORM","STATES","STATE","SPACE","ACTIONS","ACTION","SCRIPTS","SCRIPT","GML","TRIGGERS","TRIGGER","EVENT","PARAMETER","TARGET","TARGET_TYPE","CONCURRENCY","ID","TYPE","VALUE","EXTENDS"] };
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES = ["ENTITIES",0];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY = ["ENTITY",1];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM = ["FORM",2];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES = ["STATES",3];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE = ["STATE",4];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE = ["SPACE",5];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS = ["ACTIONS",6];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION = ["ACTION",7];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS = ["SCRIPTS",8];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT = ["SCRIPT",9];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.GML = ["GML",10];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.GML.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS = ["TRIGGERS",11];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER = ["TRIGGER",12];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT = ["EVENT",13];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER = ["PARAMETER",14];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET = ["TARGET",15];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE = ["TARGET_TYPE",16];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY = ["CONCURRENCY",17];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID = ["ID",18];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE = ["TYPE",19];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE = ["VALUE",20];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EXTENDS = ["EXTENDS",21];
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EXTENDS.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType;
tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.__empty_constructs__ = [tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITIES,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ENTITY,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.FORM,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATES,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.STATE,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SPACE,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTIONS,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ACTION,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPTS,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.SCRIPT,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.GML,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGERS,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TRIGGER,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EVENT,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.PARAMETER,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TARGET_TYPE,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.CONCURRENCY,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.ID,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.TYPE,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.VALUE,tools_spark_sliced_services_std_logic_gde_interfaces_ENodeType.EXTENDS];
var tools_spark_sliced_services_std_logic_gde_interfaces_EStateType = $hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.EStateType"] = { __ename__ : ["tools","spark","sliced","services","std","logic","gde","interfaces","EStateType"], __constructs__ : ["EXPRESSION","DYNAMIC","INTEGER","DECIMAL","BOOLEAN","TEXT"] };
tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.EXPRESSION = ["EXPRESSION",0];
tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.EXPRESSION.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EStateType;
tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DYNAMIC = ["DYNAMIC",1];
tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DYNAMIC.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EStateType;
tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.INTEGER = ["INTEGER",2];
tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.INTEGER.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EStateType;
tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DECIMAL = ["DECIMAL",3];
tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DECIMAL.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EStateType;
tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.BOOLEAN = ["BOOLEAN",4];
tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.BOOLEAN.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EStateType;
tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.TEXT = ["TEXT",5];
tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.TEXT.__enum__ = tools_spark_sliced_services_std_logic_gde_interfaces_EStateType;
tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.__empty_constructs__ = [tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.EXPRESSION,tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DYNAMIC,tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.INTEGER,tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.DECIMAL,tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.BOOLEAN,tools_spark_sliced_services_std_logic_gde_interfaces_EStateType.TEXT];
var tools_spark_sliced_services_std_logic_gde_interfaces_EventType = function() { };
$hxClasses["tools.spark.sliced.services.std.logic.gde.interfaces.EventType"] = tools_spark_sliced_services_std_logic_gde_interfaces_EventType;
tools_spark_sliced_services_std_logic_gde_interfaces_EventType.__name__ = ["tools","spark","sliced","services","std","logic","gde","interfaces","EventType"];
tools_spark_sliced_services_std_logic_gde_interfaces_EventType.init = function() {
	tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap = new haxe_ds_EnumValueMap();
	tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMapReverse = new haxe_ds_StringMap();
	tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesStringArray = [];
	tools_spark_sliced_services_std_logic_gde_interfaces_EventType.keyboardStringToKey = new haxe_ds_StringMap();
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CREATED,"Created");
		"Created";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.UPDATE,"Update");
		"Update";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CHANGED,"Changed");
		"Changed";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_CONNECTED,"NetworkConnected");
		"NetworkConnected";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_REQUEST,"NetworkRequest");
		"NetworkRequest";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.NETWORK_SERVER_EVENT,"NetworkServerEvent");
		"NetworkServerEvent";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.FILETRANSFER_CONNECTED,"FileTransferConnected");
		"FileTransferConnected";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.FILETRANSFER_SENDREQUEST,"FileTransferRequest");
		"FileTransferRequest";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT_CLICK,"MouseLeftClick");
		"MouseLeftClick";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_RIGHT_CLICK,"MouseRightClick");
		"MouseRightClick";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT_DOWN,"MouseLeftDown");
		"MouseLeftDown";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_RIGHT_DOWN,"MouseRightDown");
		"MouseRightDown";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_SCROLL,"MouseScroll");
		"MouseScroll";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_ENTERED,"MouseEntered");
		"MouseEntered";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_MOVED,"MouseMoved");
		"MouseMoved";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_LEFT,"MouseLeft");
		"MouseLeft";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_DOWN,"MouseDown");
		"MouseDown";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.MOUSE_UP,"MouseUp");
		"MouseUp";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_COLLISION_START,"PhysicsCollisionStart");
		"PhysicsCollisionStart";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_COLLISION_END,"PhysicsCollisionEnd");
		"PhysicsCollisionEnd";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_START,"PhysicsSensorStart");
		"PhysicsSensorStart";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_START_BIPED_FEET,"PhysicsSensorStartBipedFeet");
		"PhysicsSensorStartBipedFeet";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_END,"PhysicsSensorEnd");
		"PhysicsSensorEnd";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PHYSICS_SENSOR_END_BIPED_FEET,"PhysicsSensorEndBipedFeet");
		"PhysicsSensorEndBipedFeet";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_START,"OnDragStart");
		"OnDragStart";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG,"OnDrag");
		"OnDrag";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_END,"OnDragEnd");
		"OnDragEnd";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_ENTER,"OnDragEnter");
		"OnDragEnter";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_OVER,"OnDragOver");
		"OnDragOver";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DRAG_LEAVE,"OnDragLeave");
		"OnDragLeave";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.ON_DROP,"OnDrop");
		"OnDrop";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_PRESSED_LOCAL,"KeyPressedLocal");
		"KeyPressedLocal";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_DOWN_LOCAL,"KeyDownLocal");
		"KeyDownLocal";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_RELEASED_LOCAL,"KeyReleasedLocal");
		"KeyReleasedLocal";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_PRESSED,"KeyPressed");
		"KeyPressed";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_DOWN,"KeyDown");
		"KeyDown";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.KEY_RELEASED,"KeyReleased");
		"KeyReleased";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.STATE_CHANGED,"StateChanged");
		"StateChanged";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.CUSTOM_TRIGGER,"CustomTrigger");
		"CustomTrigger";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.SCENE_CREATED,"SceneCreated");
		"SceneCreated";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PROJECT_PAUSED,"ProjectPaused");
		"ProjectPaused";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.PROJECT_RESUMED,"ProjectResumed");
		"ProjectResumed";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.SOUND_COMPLETED,"SoundCompleted");
		"SoundCompleted";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.LAYOUT_INVALIDATED,"LayoutInvalidated");
		"LayoutInvalidated";
	}
	{
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.set(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.STAGE_RESIZED,"StageResized");
		"StageResized";
	}
	var $it0 = tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.keys();
	while( $it0.hasNext() ) {
		var eventType = $it0.next();
		var k = tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.get(eventType);
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMapReverse.set(k,eventType);
		eventType;
	}
	var $it1 = tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesMap.iterator();
	while( $it1.hasNext() ) {
		var eventTypeString = $it1.next();
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.eventTypesStringArray.push(eventTypeString);
	}
	var _g = 0;
	var _g1 = Type.allEnums(flambe_input_Key);
	while(_g < _g1.length) {
		var key = _g1[_g];
		++_g;
		var k1 = Type.enumConstructor(key);
		tools_spark_sliced_services_std_logic_gde_interfaces_EventType.keyboardStringToKey.set(k1,key);
		key;
	}
};
var tools_spark_sliced_services_std_logic_interpreter_interfaces_IInterpreter = function() { };
$hxClasses["tools.spark.sliced.services.std.logic.interpreter.interfaces.IInterpreter"] = tools_spark_sliced_services_std_logic_interpreter_interfaces_IInterpreter;
tools_spark_sliced_services_std_logic_interpreter_interfaces_IInterpreter.__name__ = ["tools","spark","sliced","services","std","logic","interpreter","interfaces","IInterpreter"];
tools_spark_sliced_services_std_logic_interpreter_interfaces_IInterpreter.prototype = {
	__class__: tools_spark_sliced_services_std_logic_interpreter_interfaces_IInterpreter
};
var tools_spark_sliced_services_std_logic_interpreter_core_GmlInterpreter = function() {
	tools_spark_Console.log("Init Gml Interpreter...");
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.logic.interpreter.core.GmlInterpreter"] = tools_spark_sliced_services_std_logic_interpreter_core_GmlInterpreter;
tools_spark_sliced_services_std_logic_interpreter_core_GmlInterpreter.__name__ = ["tools","spark","sliced","services","std","logic","interpreter","core","GmlInterpreter"];
tools_spark_sliced_services_std_logic_interpreter_core_GmlInterpreter.__interfaces__ = [tools_spark_sliced_services_std_logic_interpreter_interfaces_IInterpreter];
tools_spark_sliced_services_std_logic_interpreter_core_GmlInterpreter.prototype = {
	_init: function() {
		this._hashTable = new haxe_ds_IntMap();
	}
	,runExpr: function(hashId,p_me,p_parent,p_it) {
		return null;
	}
	,hashExpr: function(script) {
		return null;
	}
	,run: function(hashId,parameters) {
		var program = this._get(hashId);
		this._deleteMeCircleAround(parameters.get("me"));
		return true;
	}
	,_deleteMeCircleAround: function(me) {
		if(me.getState("std_object") != null) {
			me.setState("std_x",me.getState("initX") + 50 * Math.cos(me.getState("rotationDegree")));
			me.getState("std_object").x = me.getState("std_x");
			me.setState("std_y",me.getState("initY") + 50 * Math.sin(me.getState("rotationDegree")));
			me.getState("std_object").y = me.getState("std_y");
			me.setState("rotationDegree",me.getState("rotationDegree") + 0.1);
		}
	}
	,hash: function(script) {
		return -1;
	}
	,_get: function(hashId) {
		return "doTheCircle";
	}
	,__class__: tools_spark_sliced_services_std_logic_interpreter_core_GmlInterpreter
};
var tools_spark_sliced_services_std_logic_interpreter_core_platform_html_HaxeJsInterpreter = function() {
	this._lalala = 0;
	tools_spark_Console.log("Init HaxeJs Interpreter...");
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.logic.interpreter.core.platform.html.HaxeJsInterpreter"] = tools_spark_sliced_services_std_logic_interpreter_core_platform_html_HaxeJsInterpreter;
tools_spark_sliced_services_std_logic_interpreter_core_platform_html_HaxeJsInterpreter.__name__ = ["tools","spark","sliced","services","std","logic","interpreter","core","platform","html","HaxeJsInterpreter"];
tools_spark_sliced_services_std_logic_interpreter_core_platform_html_HaxeJsInterpreter.__interfaces__ = [tools_spark_sliced_services_std_logic_interpreter_interfaces_IInterpreter];
tools_spark_sliced_services_std_logic_interpreter_core_platform_html_HaxeJsInterpreter.prototype = {
	_init: function() {
		var dummy = Std.random(1);
		var dummy2 = flambe_System.get_storage();
		dummy2 = flambe_System.get_storage().get_supported();
		dummy2 = ($_=flambe_System.get_storage(),$bind($_,$_.clear));
		dummy2 = ($_=flambe_System.get_storage(),$bind($_,$_.get));
		dummy2 = ($_=flambe_System.get_storage(),$bind($_,$_.remove));
		dummy2 = ($_=flambe_System.get_storage(),$bind($_,$_.set));
		dummy2 = flambe_animation_Ease.backIn;
		dummy2 = flambe_animation_Ease.backInOut;
		dummy2 = flambe_animation_Ease.backOut;
		dummy2 = flambe_animation_Ease.bounceIn;
		dummy2 = flambe_animation_Ease.bounceInOut;
		dummy2 = flambe_animation_Ease.bounceOut;
		dummy2 = flambe_animation_Ease.circIn;
		dummy2 = flambe_animation_Ease.circInOut;
		dummy2 = flambe_animation_Ease.circOut;
		dummy2 = flambe_animation_Ease.circOutIn;
		dummy2 = flambe_animation_Ease.cubeIn;
		dummy2 = flambe_animation_Ease.cubeInOut;
		dummy2 = flambe_animation_Ease.cubeOut;
		dummy2 = flambe_animation_Ease.cubeOutIn;
		dummy2 = flambe_animation_Ease.elasticIn;
		dummy2 = flambe_animation_Ease.elasticInOut;
		dummy2 = flambe_animation_Ease.elasticOut;
		dummy2 = flambe_animation_Ease.expoIn;
		dummy2 = flambe_animation_Ease.expoInOut;
		dummy2 = flambe_animation_Ease.expoOut;
		dummy2 = flambe_animation_Ease.expoOutIn;
		dummy2 = flambe_animation_Ease.linear;
		dummy2 = flambe_animation_Ease.quadIn;
		dummy2 = flambe_animation_Ease.quadInOut;
		dummy2 = flambe_animation_Ease.quadOut;
		dummy2 = flambe_animation_Ease.quadOutIn;
		dummy2 = flambe_animation_Ease.quartIn;
		dummy2 = flambe_animation_Ease.quartInOut;
		dummy2 = flambe_animation_Ease.quartOut;
		dummy2 = flambe_animation_Ease.quartOutIn;
		dummy2 = flambe_animation_Ease.quintIn;
		dummy2 = flambe_animation_Ease.quintInOut;
		dummy2 = flambe_animation_Ease.quintOut;
		dummy2 = flambe_animation_Ease.quintOutIn;
		dummy2 = flambe_animation_Ease.sineIn;
		dummy2 = flambe_animation_Ease.sineInOut;
		dummy2 = flambe_animation_Ease.sineOut;
		dummy2 = flambe_animation_Ease.sineOutIn;
		this._hashTable = new haxe_ds_IntMap();
		window.Sound = tools_spark_sliced_core_Sliced.sound;
		window.Logic = tools_spark_sliced_core_Sliced.logic;
		window.Input = tools_spark_sliced_core_Sliced.input;
		window.Comms = tools_spark_sliced_core_Sliced.comms;
		window.Event = tools_spark_sliced_core_Sliced.event;
		window.Display = tools_spark_sliced_core_Sliced.display;
		window.Project = tools_spark_framework_Project;
		window.Module = tools_spark_framework_assets_Module;
		window.Asset = tools_spark_framework_assets_Asset;
		window.Std = Std;
		window.StringMap = haxe_ds_StringMap;
		window.IntMap = haxe_ds_IntMap;
		window.ObjectMap = haxe_ds_ObjectMap;
		window.Assets = tools_spark_framework_Assets;
		window.AssetFormat = flambe_asset_AssetFormat;
		window.StringTools = StringTools;
		window.Xml = Xml;
		window.MouseButton = flambe_input_MouseButton;
		window.EEventType = tools_spark_sliced_services_std_logic_gde_interfaces_EEventType;
		window.EModuleState = tools_spark_framework_assets_EModuleState;
		window.Key = flambe_input_Key;
		window.Ease = flambe_animation_Ease;
		window.System = flambe_System;
		window.ModuleManager = tools_spark_framework_ModuleManager;
		window.Tween = flambe_animation_Tween;
		window.expr = $bind(this,this.runExpr);
		window.e = ($_=tools_spark_sliced_core_Sliced.logic,$bind($_,$_.getEntityByName));
		window.query = ($_=tools_spark_sliced_core_Sliced.logic,$bind($_,$_.queryGameEntity));
		window.string = Std.string;
	}
	,run: function(hashId,parameters) {
		var program = this._get(hashId);
		try {
			program(parameters.get("me"),parameters.get("parent"),parameters.get("it"));
			return true;
		} catch( e ) {
			if (e instanceof js__$Boot_HaxeError) e = e.val;
			tools_spark_Console.error("<<<<<SPARK SCRIPT RUN-TIME JS ERROR>>>>>: " + Std.string(e));
			flambe_System.get_external().call("console.log",[e]);
			flambe_System.get_external().call("console.log",[program]);
			return false;
		}
	}
	,runExpr: function(hashId,p_me,p_parent,p_it) {
		var program = this._get(hashId);
		try {
			return program(p_me,p_parent,p_it);
		} catch( e ) {
			if (e instanceof js__$Boot_HaxeError) e = e.val;
			tools_spark_Console.error("<<<<<SPARK EXPRESSION RUN-TIME JS ERROR>>>>>: " + Std.string(e));
			flambe_System.get_external().call("console.log",[e]);
			flambe_System.get_external().call("console.log",[program]);
			return null;
		}
	}
	,hashExpr: function(script) {
		var l_script = "(function(me,parent,it){return(" + script + ");})";
		return this._store(l_script,haxe_crypto_Crc32.make(haxe_io_Bytes.ofString(l_script)));
	}
	,hash: function(script) {
		var l_script = "(function(me,parent,it){" + script + "})";
		return this._store(l_script,haxe_crypto_Crc32.make(haxe_io_Bytes.ofString(l_script)));
	}
	,_get: function(hashId) {
		var script = this._hashTable.get(hashId);
		if(script == null) tools_spark_Console.error("Script not found on address [" + hashId + "]");
		return script;
	}
	,_store: function(script,hashId) {
		if(this._hashTable.get(hashId) != null) return hashId; else try {
			var v = flambe_System.get_external().call("eval",[script]);
			this._hashTable.set(hashId,v);
			v;
			this._lalala += 1;
			return hashId;
		} catch( e ) {
			if (e instanceof js__$Boot_HaxeError) e = e.val;
			tools_spark_Console.error("<<<<<SPARK SCRIPT PARSING ERROR: " + Std.string(e));
			flambe_System.get_external().call("console.log",[e]);
			flambe_System.get_external().call("console.log",[script]);
			return -1;
		}
	}
	,__class__: tools_spark_sliced_services_std_logic_interpreter_core_platform_html_HaxeJsInterpreter
};
var tools_spark_sliced_services_std_logic_level_$manager_core_LevelManager = function() {
	tools_spark_Console.log("Creating Level Manager");
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.logic.level_manager.core.LevelManager"] = tools_spark_sliced_services_std_logic_level_$manager_core_LevelManager;
tools_spark_sliced_services_std_logic_level_$manager_core_LevelManager.__name__ = ["tools","spark","sliced","services","std","logic","level_manager","core","LevelManager"];
tools_spark_sliced_services_std_logic_level_$manager_core_LevelManager.prototype = {
	_init: function() {
		this.currentLevel = new haxe_ds_StringMap();
		this._preLoaderActive = true;
		this.levelLoaded = new flambe_util_Signal1();
		this.levelCreated = new flambe_util_Signal0();
		this.levelRan = new flambe_util_Signal0();
	}
	,addLevel: function(p_levelEntity) {
		tools_spark_Console.error("addLevel...");
	}
	,loadLevel: function(p_levelEntity) {
		this._actionAfterLoad = tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.DO_NOTHING;
		this._loadLevel(p_levelEntity);
	}
	,runLevel: function(p_levelEntity,p_runSlot,p_parentStage) {
		if(p_parentStage == null) p_parentStage = "Implicit";
		if(p_runSlot == null) p_runSlot = "Main";
		this._actionAfterLoad = tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.RUN;
		this._levelRunSlot = p_runSlot;
		this._levelParentStage = p_parentStage;
		this._loadLevel(p_levelEntity);
	}
	,_loadLevel: function(p_levelEntity) {
		var l_level;
		if(p_levelEntity != null) {
			if(Reflect.hasField(p_levelEntity,"getState")) l_level = p_levelEntity; else if(p_levelEntity.indexOf(".") == -1) l_level = tools_spark_sliced_core_Sliced.logic.getEntityByName(p_levelEntity); else if(tools_spark_framework_Assets.scriptLoaded(p_levelEntity)) l_level = tools_spark_sliced_core_Sliced.logic.create(p_levelEntity); else {
				tools_spark_Console.error("Level Manager->Level " + Std.string(p_levelEntity) + " has not been loaded, and dynamic loaded has been deprecated! Quitting...");
				return;
			}
		} else {
			tools_spark_Console.error("No parameters found for LevelManager.runLevel!");
			return;
		}
		l_level.forceAction("Find References");
		var moduleReferences = l_level.getState("moduleReferences");
		if(moduleReferences != null) {
			this._levelLoading = l_level;
			tools_spark_framework_ModuleManager.successSignal.connect($bind(this,this._onLevelLoaded)).once();
			tools_spark_framework_ModuleManager.execute(moduleReferences[0].getState("url"));
		} else tools_spark_Console.error("No Modules Found for level");
	}
	,_onLevelLoaded: function() {
		tools_spark_Console.log("LEVEL LOADED!");
		this.levelLoaded.emit(this._levelLoading);
		if(this._actionAfterLoad == tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.CREATE) this._createLevel(this._levelLoading); else if(this._actionAfterLoad == tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.RUN) this._runLevel(this._levelLoading,this._levelRunSlot);
	}
	,_createLevel: function(p_level) {
		if(p_level.getState("created") == false) {
			var l_cameraReferences = p_level.getState("cameraReferences");
			var l_levelCamera = null;
			var _g = 0;
			while(_g < l_cameraReferences.length) {
				var f_cameraReference = l_cameraReferences[_g];
				++_g;
				l_levelCamera = tools_spark_sliced_core_Sliced.logic.create(f_cameraReference.getState("url"));
				p_level.addChild(l_levelCamera);
			}
			var l_views = [];
			var l_cameras = [];
			if(l_levelCamera != null) l_cameras.push(l_levelCamera);
			var l_stageAreaReferences = p_level.getState("stageAreaReferences");
			var _g1 = 0;
			while(_g1 < l_stageAreaReferences.length) {
				var f_stageAreaReference = l_stageAreaReferences[_g1];
				++_g1;
				var f_stageArea = tools_spark_sliced_core_Sliced.logic.create(f_stageAreaReference.getState("url"));
				l_views.push(f_stageArea);
			}
			var l_viewReferences = p_level.getState("viewReferences");
			var _g2 = 0;
			while(_g2 < l_viewReferences.length) {
				var f_viewReference = l_viewReferences[_g2];
				++_g2;
				var f_view = tools_spark_sliced_core_Sliced.logic.create(f_viewReference.getState("url"));
				l_views.push(f_view);
				var f_scene = tools_spark_sliced_core_Sliced.logic.create(f_view.getState("initSceneUrl"),true);
				var f_camera = null;
				if(f_view.getState("initCameraUrl") != "Level Camera") {
					f_camera = tools_spark_sliced_core_Sliced.logic.create(f_view.getState("initCameraUrl"));
					l_cameras.push(f_camera);
				}
				f_view.setState("scene",f_scene);
				if(f_camera != null) f_view.setState("camera",f_camera); else f_view.setState("camera",l_levelCamera);
				p_level.addChild(f_scene);
				if(f_camera != null) p_level.addChild(f_camera);
			}
			p_level.setState("created",true);
			p_level.setState("views",l_views);
			p_level.setState("cameras",l_cameras);
			this.levelCreated.emit();
		} else tools_spark_Console.warn("Level already created. Ignoring...");
	}
	,_runLevel: function(p_level,p_runSlot) {
		if(p_level.getState("created") == false) this._createLevel(p_level);
		if(p_level != this.currentLevel.get(p_runSlot)) {
			if(this.currentLevel.get(p_runSlot) != null) {
				this._removeLevel(this.currentLevel.get(p_runSlot));
				this.currentLevel.remove(p_runSlot);
			}
			if(this._preLoaderActive) {
				flambe_System.get_external().call("hidePreloader");
				this._preLoaderActive = false;
			}
			var l_views = p_level.getState("views");
			tools_spark_sliced_core_Sliced.display.projectActiveSpaceReference.spaceEntity.addChild(p_level);
			var _g = 0;
			while(_g < l_views.length) {
				var f_view = l_views[_g];
				++_g;
				f_view.setState("parent",this._levelParentStage);
				tools_spark_sliced_core_Sliced.display.projectActiveSpaceReference.activeStageReference.stageEntity.addChild(f_view);
			}
			{
				this.currentLevel.set(p_runSlot,p_level);
				p_level;
			}
			this.levelRan.emit();
		} else tools_spark_Console.warn("Level already running. Ignoring...");
	}
	,clearRunSlot: function(p_runSlot) {
		if(p_runSlot == null) p_runSlot = "Main";
		if(this.currentLevel.get(p_runSlot) != null) this.currentLevel.remove(p_runSlot);
	}
	,addRunSlotToStage: function(p_runSlot) {
		if(p_runSlot == null) p_runSlot = "Main";
		if(this.currentLevel.get(p_runSlot) != null) this._addLevel(this.currentLevel.get(p_runSlot));
	}
	,removeRunSlotFromStage: function(p_runSlot) {
		if(p_runSlot == null) p_runSlot = "Main";
		if(this.currentLevel.get(p_runSlot) != null) this._removeLevel(this.currentLevel.get(p_runSlot));
	}
	,_addLevel: function(p_level) {
		var l_views = p_level.getState("views");
		tools_spark_sliced_core_Sliced.display.projectActiveSpaceReference.spaceEntity.addChild(p_level);
		var _g = 0;
		while(_g < l_views.length) {
			var f_view = l_views[_g];
			++_g;
			tools_spark_sliced_core_Sliced.display.projectActiveSpaceReference.activeStageReference.stageEntity.addChild(f_view);
		}
	}
	,_removeLevel: function(p_level) {
		var l_views = p_level.getState("views");
		p_level.remove();
		var _g = 0;
		while(_g < l_views.length) {
			var f_view = l_views[_g];
			++_g;
			f_view.remove();
		}
	}
	,__class__: tools_spark_sliced_services_std_logic_level_$manager_core_LevelManager
};
var tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad = $hxClasses["tools.spark.sliced.services.std.logic.level_manager.interfaces.EActionAfterLoad"] = { __ename__ : ["tools","spark","sliced","services","std","logic","level_manager","interfaces","EActionAfterLoad"], __constructs__ : ["DO_NOTHING","CREATE","RUN"] };
tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.DO_NOTHING = ["DO_NOTHING",0];
tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.DO_NOTHING.__enum__ = tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad;
tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.CREATE = ["CREATE",1];
tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.CREATE.__enum__ = tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad;
tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.RUN = ["RUN",2];
tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.RUN.__enum__ = tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad;
tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.__empty_constructs__ = [tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.DO_NOTHING,tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.CREATE,tools_spark_sliced_services_std_logic_level_$manager_interfaces_EActionAfterLoad.RUN];
var tools_spark_sliced_services_std_sound_core_Sound = function() {
	tools_spark_sliced_core_AService.call(this);
	this._init();
};
$hxClasses["tools.spark.sliced.services.std.sound.core.Sound"] = tools_spark_sliced_services_std_sound_core_Sound;
tools_spark_sliced_services_std_sound_core_Sound.__name__ = ["tools","spark","sliced","services","std","sound","core","Sound"];
tools_spark_sliced_services_std_sound_core_Sound.__interfaces__ = [tools_spark_sliced_interfaces_ISound];
tools_spark_sliced_services_std_sound_core_Sound.__super__ = tools_spark_sliced_core_AService;
tools_spark_sliced_services_std_sound_core_Sound.prototype = $extend(tools_spark_sliced_core_AService.prototype,{
	_init: function() {
		tools_spark_Console.log("Init Sound std Service...");
		this._playBacks = new haxe_ds_StringMap();
		this.iOSPlayedBlankSound = false;
	}
	,playSound: function(p_soundName,volume) {
		if(tools_spark_framework_Assets.getSound(p_soundName) != null) {
			var l_playback = tools_spark_framework_Assets.getSound(p_soundName).play(volume);
			{
				this._playBacks.set(p_soundName,l_playback);
				l_playback;
			}
			l_playback.get_complete().get_changed().connect(function(to,from) {
				tools_spark_sliced_core_Sliced.event.raiseEvent(tools_spark_sliced_services_std_logic_gde_interfaces_EEventType.SOUND_COMPLETED,null,p_soundName);
			});
			return l_playback;
		} else {
			tools_spark_Console.warn("Could not play sound: " + p_soundName);
			return null;
		}
	}
	,loopSound: function(p_soundName,volume) {
		if(tools_spark_framework_Assets.getSound(p_soundName) != null) {
			var l_playback = tools_spark_framework_Assets.getSound(p_soundName).loop(volume);
			{
				this._playBacks.set(p_soundName,l_playback);
				l_playback;
			}
			return l_playback;
		} else {
			tools_spark_Console.warn("Could not loop sound: " + p_soundName);
			return null;
		}
	}
	,stopSound: function(p_soundName,p_fadeOut) {
		var l_playback = this._playBacks.get(p_soundName);
		if(l_playback != null) {
			if(l_playback.get_complete().get__() == false) {
				if(p_fadeOut == null) l_playback.dispose(); else l_playback.volume.animateTo(0,p_fadeOut);
			}
		}
	}
	,isPlaying: function(p_soundName) {
		var l_playback = this._playBacks.get(p_soundName);
		if(l_playback == null) return false; else return !l_playback.get_complete().get__();
	}
	,iOSPlayBlankSound: function() {
		this.playSound("_blankSound",0);
		this.iOSPlayedBlankSound = true;
	}
	,stopAllSounds: function(p_fadeOut) {
		var $it0 = this._playBacks.iterator();
		while( $it0.hasNext() ) {
			var f_playback = $it0.next();
			if(f_playback.get_complete().get__() == false) {
				if(p_fadeOut == null) f_playback.dispose(); else f_playback.volume.animateTo(0,p_fadeOut);
			}
		}
	}
	,__class__: tools_spark_sliced_services_std_sound_core_Sound
});
var zpp_$nape_ZPP_$Const = function() { };
$hxClasses["zpp_nape.ZPP_Const"] = zpp_$nape_ZPP_$Const;
zpp_$nape_ZPP_$Const.__name__ = ["zpp_nape","ZPP_Const"];
zpp_$nape_ZPP_$Const.POSINF = function() {
	return Infinity;
};
zpp_$nape_ZPP_$Const.NEGINF = function() {
	return -Infinity;
};
var zpp_$nape_callbacks_ZPP_$Callback = function() {
	this.constraint = null;
	this.body = null;
	this.pre_swapped = false;
	this.pre_arbiter = null;
	this.wrap_arbiters = null;
	this.set = null;
	this.int2 = null;
	this.int1 = null;
	this.length = 0;
	this.prev = null;
	this.next = null;
	this.listener = null;
	this.event = 0;
	this.outer_int = null;
	this.outer_con = null;
	this.outer_body = null;
	this.length = 0;
};
$hxClasses["zpp_nape.callbacks.ZPP_Callback"] = zpp_$nape_callbacks_ZPP_$Callback;
zpp_$nape_callbacks_ZPP_$Callback.__name__ = ["zpp_nape","callbacks","ZPP_Callback"];
zpp_$nape_callbacks_ZPP_$Callback.prototype = {
	wrapper_body: function() {
		if(this.outer_body == null) {
			this.outer_body = new nape_callbacks_BodyCallback();
			this.outer_body.zpp_inner = this;
		}
		return this.outer_body;
	}
	,wrapper_con: function() {
		if(this.outer_con == null) {
			this.outer_con = new nape_callbacks_ConstraintCallback();
			this.outer_con.zpp_inner = this;
		}
		return this.outer_con;
	}
	,wrapper_int: function() {
		if(this.outer_int == null) {
			this.outer_int = new nape_callbacks_InteractionCallback();
			this.outer_int.zpp_inner = this;
		}
		this.genarbs();
		return this.outer_int;
	}
	,push: function(obj) {
		if(this.prev != null) this.prev.next = obj; else this.next = obj;
		obj.prev = this.prev;
		obj.next = null;
		this.prev = obj;
		this.length++;
	}
	,pop: function() {
		var ret = this.next;
		this.next = ret.next;
		if(this.next == null) this.prev = null; else this.next.prev = null;
		this.length--;
		return ret;
	}
	,empty: function() {
		return this.next == null;
	}
	,free: function() {
		this.int1 = this.int2 = null;
		this.body = null;
		this.constraint = null;
		this.listener = null;
		if(this.wrap_arbiters != null) this.wrap_arbiters.zpp_inner.inner = null;
		this.set = null;
	}
	,alloc: function() {
	}
	,genarbs: function() {
		if(this.wrap_arbiters == null) this.wrap_arbiters = zpp_$nape_util_ZPP_$ArbiterList.get(this.set.arbiters,true); else this.wrap_arbiters.zpp_inner.inner = this.set.arbiters;
		this.wrap_arbiters.zpp_inner.zip_length = true;
		this.wrap_arbiters.zpp_inner.at_ite = null;
	}
	,__class__: zpp_$nape_callbacks_ZPP_$Callback
};
var zpp_$nape_callbacks_ZPP_$CbSet = function() {
	this.constraints = null;
	this.interactors = null;
	this.zip_conlisteners = false;
	this.conlisteners = null;
	this.zip_bodylisteners = false;
	this.bodylisteners = null;
	this.zip_listeners = false;
	this.listeners = null;
	this.cbpairs = null;
	this.manager = null;
	this.id = 0;
	this.next = null;
	this.count = 0;
	this.cbTypes = null;
	this.cbTypes = new zpp_$nape_util_ZNPList_$ZPP_$CbType();
	this.listeners = new zpp_$nape_util_ZNPList_$ZPP_$InteractionListener();
	this.zip_listeners = true;
	this.bodylisteners = new zpp_$nape_util_ZNPList_$ZPP_$BodyListener();
	this.zip_bodylisteners = true;
	this.conlisteners = new zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener();
	this.zip_conlisteners = true;
	this.constraints = new zpp_$nape_util_ZNPList_$ZPP_$Constraint();
	this.interactors = new zpp_$nape_util_ZNPList_$ZPP_$Interactor();
	this.id = zpp_$nape_ZPP_$ID.CbSet();
	this.cbpairs = new zpp_$nape_util_ZNPList_$ZPP_$CbSetPair();
};
$hxClasses["zpp_nape.callbacks.ZPP_CbSet"] = zpp_$nape_callbacks_ZPP_$CbSet;
zpp_$nape_callbacks_ZPP_$CbSet.__name__ = ["zpp_nape","callbacks","ZPP_CbSet"];
zpp_$nape_callbacks_ZPP_$CbSet.setlt = function(a,b) {
	var i = a.cbTypes.begin();
	var j = b.cbTypes.begin();
	while(i != null && j != null) {
		var ca = i.elem();
		var cb = j.elem();
		if(zpp_$nape_callbacks_ZPP_$CbType.setlt(ca,cb)) return true;
		if(zpp_$nape_callbacks_ZPP_$CbType.setlt(cb,ca)) return false; else {
			i = i.next;
			j = j.next;
		}
	}
	return j != null && i == null;
};
zpp_$nape_callbacks_ZPP_$CbSet.get = function(cbTypes) {
	var ret;
	if(zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool == null) ret = new zpp_$nape_callbacks_ZPP_$CbSet(); else {
		ret = zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool;
		zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool = ret.next;
		ret.next = null;
	}
	ret.alloc();
	var ite = null;
	var cx_ite = cbTypes.begin();
	while(cx_ite != null) {
		var cb = cx_ite.elem();
		ite = ret.cbTypes.insert(ite,cb);
		cb.cbsets.add(ret);
		cx_ite = cx_ite.next;
	}
	return ret;
};
zpp_$nape_callbacks_ZPP_$CbSet.empty_intersection = function(a,b) {
	return a.manager.pair(a,b).empty_intersection();
};
zpp_$nape_callbacks_ZPP_$CbSet.single_intersection = function(a,b,i) {
	return a.manager.pair(a,b).single_intersection(i);
};
zpp_$nape_callbacks_ZPP_$CbSet.find_all = function(a,b,event,cb) {
	a.manager.pair(a,b).forall(event,cb);
};
zpp_$nape_callbacks_ZPP_$CbSet.prototype = {
	increment: function() {
		this.count++;
	}
	,decrement: function() {
		return --this.count == 0;
	}
	,invalidate_pairs: function() {
		var cx_ite = this.cbpairs.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			cb.invalidate();
			cx_ite = cx_ite.next;
		}
	}
	,invalidate_listeners: function() {
		this.zip_listeners = true;
		this.invalidate_pairs();
	}
	,validate_listeners: function() {
		if(this.zip_listeners) {
			this.zip_listeners = false;
			this.realvalidate_listeners();
		}
	}
	,realvalidate_listeners: function() {
		this.listeners.clear();
		var cx_ite = this.cbTypes.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			var npre = null;
			var nite = this.listeners.begin();
			var cite = cb.listeners.begin();
			while(cite != null) {
				var cx = cite.elem();
				if(nite != null && nite.elem() == cx) {
					cite = cite.next;
					npre = nite;
					nite = nite.next;
				} else if(nite == null || zpp_$nape_callbacks_ZPP_$Listener.setlt(cx,nite.elem())) {
					if(true && this.manager.valid_listener(cx)) npre = this.listeners.inlined_insert(npre,cx);
					cite = cite.next;
				} else {
					npre = nite;
					nite = nite.next;
				}
			}
			cx_ite = cx_ite.next;
		}
	}
	,invalidate_bodylisteners: function() {
		this.zip_bodylisteners = true;
	}
	,validate_bodylisteners: function() {
		if(this.zip_bodylisteners) {
			this.zip_bodylisteners = false;
			this.realvalidate_bodylisteners();
		}
	}
	,realvalidate_bodylisteners: function() {
		this.bodylisteners.clear();
		var cx_ite = this.cbTypes.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			var npre = null;
			var nite = this.bodylisteners.begin();
			var cite = cb.bodylisteners.begin();
			while(cite != null) {
				var cx = cite.elem();
				if(nite != null && nite.elem() == cx) {
					cite = cite.next;
					npre = nite;
					nite = nite.next;
				} else if(nite == null || zpp_$nape_callbacks_ZPP_$Listener.setlt(cx,nite.elem())) {
					if(!cx.options.excluded(this.cbTypes) && this.manager.valid_listener(cx)) npre = this.bodylisteners.inlined_insert(npre,cx);
					cite = cite.next;
				} else {
					npre = nite;
					nite = nite.next;
				}
			}
			cx_ite = cx_ite.next;
		}
	}
	,invalidate_conlisteners: function() {
		this.zip_conlisteners = true;
	}
	,validate_conlisteners: function() {
		if(this.zip_conlisteners) {
			this.zip_conlisteners = false;
			this.realvalidate_conlisteners();
		}
	}
	,realvalidate_conlisteners: function() {
		this.conlisteners.clear();
		var cx_ite = this.cbTypes.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			var npre = null;
			var nite = this.conlisteners.begin();
			var cite = cb.conlisteners.begin();
			while(cite != null) {
				var cx = cite.elem();
				if(nite != null && nite.elem() == cx) {
					cite = cite.next;
					npre = nite;
					nite = nite.next;
				} else if(nite == null || zpp_$nape_callbacks_ZPP_$Listener.setlt(cx,nite.elem())) {
					if(!cx.options.excluded(this.cbTypes) && this.manager.valid_listener(cx)) npre = this.conlisteners.inlined_insert(npre,cx);
					cite = cite.next;
				} else {
					npre = nite;
					nite = nite.next;
				}
			}
			cx_ite = cx_ite.next;
		}
	}
	,validate: function() {
		this.validate_listeners();
		this.validate_bodylisteners();
		this.validate_conlisteners();
	}
	,addConstraint: function(con) {
		this.constraints.add(con);
	}
	,addInteractor: function(intx) {
		this.interactors.add(intx);
	}
	,remConstraint: function(con) {
		this.constraints.remove(con);
	}
	,remInteractor: function(intx) {
		this.interactors.remove(intx);
	}
	,free: function() {
		this.listeners.clear();
		this.zip_listeners = true;
		this.bodylisteners.clear();
		this.zip_bodylisteners = true;
		this.conlisteners.clear();
		this.zip_conlisteners = true;
		while(!this.cbTypes.empty()) {
			var cb = this.cbTypes.pop_unsafe();
			cb.cbsets.remove(this);
		}
	}
	,alloc: function() {
	}
	,__class__: zpp_$nape_callbacks_ZPP_$CbSet
};
var zpp_$nape_callbacks_ZPP_$CbSetPair = function() {
	this.listeners = null;
	this.zip_listeners = false;
	this.next = null;
	this.b = null;
	this.a = null;
	this.listeners = new zpp_$nape_util_ZNPList_$ZPP_$InteractionListener();
};
$hxClasses["zpp_nape.callbacks.ZPP_CbSetPair"] = zpp_$nape_callbacks_ZPP_$CbSetPair;
zpp_$nape_callbacks_ZPP_$CbSetPair.__name__ = ["zpp_nape","callbacks","ZPP_CbSetPair"];
zpp_$nape_callbacks_ZPP_$CbSetPair.get = function(a,b) {
	var ret;
	if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool == null) ret = new zpp_$nape_callbacks_ZPP_$CbSetPair(); else {
		ret = zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;
		zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool = ret.next;
		ret.next = null;
	}
	ret.alloc();
	if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(a,b)) {
		ret.a = a;
		ret.b = b;
	} else {
		ret.a = b;
		ret.b = a;
	}
	return ret;
};
zpp_$nape_callbacks_ZPP_$CbSetPair.setlt = function(x,y) {
	return zpp_$nape_callbacks_ZPP_$CbSet.setlt(x.a,y.a) || x.a == y.a && zpp_$nape_callbacks_ZPP_$CbSet.setlt(x.b,y.b);
};
zpp_$nape_callbacks_ZPP_$CbSetPair.prototype = {
	free: function() {
		this.a = this.b = null;
		this.listeners.clear();
	}
	,alloc: function() {
		this.zip_listeners = true;
	}
	,compatible: function(i) {
		return i.options1.compatible(this.a.cbTypes) && i.options2.compatible(this.b.cbTypes) || i.options2.compatible(this.a.cbTypes) && i.options1.compatible(this.b.cbTypes);
	}
	,invalidate: function() {
		this.zip_listeners = true;
	}
	,validate: function() {
		if(this.zip_listeners) {
			this.zip_listeners = false;
			this.__validate();
		}
	}
	,__validate: function() {
		this.listeners.clear();
		var aite = this.a.listeners.begin();
		var bite = this.b.listeners.begin();
		while(aite != null && bite != null) {
			var ax = aite.elem();
			var bx = bite.elem();
			if(ax == bx) {
				if(this.compatible(ax)) this.listeners.add(ax);
				aite = aite.next;
				bite = bite.next;
			} else if(zpp_$nape_callbacks_ZPP_$Listener.setlt(ax,bx)) aite = aite.next; else bite = bite.next;
		}
	}
	,empty_intersection: function() {
		return this.listeners.empty();
	}
	,single_intersection: function(i) {
		var ite = this.listeners.begin();
		return ite != null && ite.elem() == i && ite.next == null;
	}
	,forall: function(event,cb) {
		var cx_ite = this.listeners.begin();
		while(cx_ite != null) {
			var x = cx_ite.elem();
			if(x.event == event) cb(x);
			cx_ite = cx_ite.next;
		}
	}
	,__class__: zpp_$nape_callbacks_ZPP_$CbSetPair
};
var zpp_$nape_util_ZPP_$Flags = function() { };
$hxClasses["zpp_nape.util.ZPP_Flags"] = zpp_$nape_util_ZPP_$Flags;
zpp_$nape_util_ZPP_$Flags.__name__ = ["zpp_nape","util","ZPP_Flags"];
var zpp_$nape_callbacks_ZPP_$Listener = function() {
	this.space = null;
	this.interaction = null;
	this.constraint = null;
	this.body = null;
	this.precedence = 0;
	this.event = 0;
	this.type = 0;
	this.id = 0;
	this.outer = null;
	this.id = zpp_$nape_ZPP_$ID.Listener();
};
$hxClasses["zpp_nape.callbacks.ZPP_Listener"] = zpp_$nape_callbacks_ZPP_$Listener;
zpp_$nape_callbacks_ZPP_$Listener.__name__ = ["zpp_nape","callbacks","ZPP_Listener"];
zpp_$nape_callbacks_ZPP_$Listener.setlt = function(a,b) {
	return a.precedence > b.precedence || a.precedence == b.precedence && a.id > b.id;
};
zpp_$nape_callbacks_ZPP_$Listener.prototype = {
	addedToSpace: function() {
	}
	,removedFromSpace: function() {
	}
	,__class__: zpp_$nape_callbacks_ZPP_$Listener
};
var zpp_$nape_callbacks_ZPP_$BodyListener = function() {
	this.handler = null;
	this.options = null;
	this.outer_zn = null;
};
$hxClasses["zpp_nape.callbacks.ZPP_BodyListener"] = zpp_$nape_callbacks_ZPP_$BodyListener;
zpp_$nape_callbacks_ZPP_$BodyListener.__name__ = ["zpp_nape","callbacks","ZPP_BodyListener"];
zpp_$nape_callbacks_ZPP_$BodyListener.__super__ = zpp_$nape_callbacks_ZPP_$Listener;
zpp_$nape_callbacks_ZPP_$BodyListener.prototype = $extend(zpp_$nape_callbacks_ZPP_$Listener.prototype,{
	addedToSpace: function() {
		this.options.handler = $bind(this,this.cbtype_change);
		var cx_ite = this.options.includes.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			cb.addbody(this);
			cx_ite = cx_ite.next;
		}
	}
	,removedFromSpace: function() {
		var cx_ite = this.options.includes.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			cb.removebody(this);
			cx_ite = cx_ite.next;
		}
		this.options.handler = null;
	}
	,cbtype_change: function(cb,included,added) {
		this.removedFromSpace();
		this.options.effect_change(cb,included,added);
		this.addedToSpace();
	}
	,__class__: zpp_$nape_callbacks_ZPP_$BodyListener
});
var zpp_$nape_callbacks_ZPP_$ConstraintListener = function() {
	this.handler = null;
	this.options = null;
	this.outer_zn = null;
};
$hxClasses["zpp_nape.callbacks.ZPP_ConstraintListener"] = zpp_$nape_callbacks_ZPP_$ConstraintListener;
zpp_$nape_callbacks_ZPP_$ConstraintListener.__name__ = ["zpp_nape","callbacks","ZPP_ConstraintListener"];
zpp_$nape_callbacks_ZPP_$ConstraintListener.__super__ = zpp_$nape_callbacks_ZPP_$Listener;
zpp_$nape_callbacks_ZPP_$ConstraintListener.prototype = $extend(zpp_$nape_callbacks_ZPP_$Listener.prototype,{
	addedToSpace: function() {
		this.options.handler = $bind(this,this.cbtype_change);
		var cx_ite = this.options.includes.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			cb.addconstraint(this);
			cx_ite = cx_ite.next;
		}
	}
	,removedFromSpace: function() {
		var cx_ite = this.options.includes.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			cb.removeconstraint(this);
			cx_ite = cx_ite.next;
		}
		this.options.handler = null;
	}
	,cbtype_change: function(cb,included,added) {
		this.removedFromSpace();
		this.options.effect_change(cb,included,added);
		this.addedToSpace();
	}
	,__class__: zpp_$nape_callbacks_ZPP_$ConstraintListener
});
var zpp_$nape_util_ZNPList_$ZPP_$CbType = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_CbType"] = zpp_$nape_util_ZNPList_$ZPP_$CbType;
zpp_$nape_util_ZNPList_$ZPP_$CbType.__name__ = ["zpp_nape","util","ZNPList_ZPP_CbType"];
zpp_$nape_util_ZNPList_$ZPP_$CbType.prototype = {
	begin: function() {
		return this.head;
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$CbType(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,insert: function(cur,o) {
		return this.inlined_insert(cur,o);
	}
	,inlined_insert: function(cur,o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$CbType(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		if(cur == null) {
			temp.next = this.begin();
			this.head = temp;
		} else {
			temp.next = cur.next;
			cur.next = temp;
		}
		this.pushmod = this.modified = true;
		this.length++;
		return temp;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,pop_unsafe: function() {
		return this.inlined_pop_unsafe();
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,clear: function() {
		this.inlined_clear();
	}
	,inlined_clear: function() {
		if(true) {
			while(!this.empty()) this.inlined_pop();
			this.pushmod = true;
		}
	}
	,empty: function() {
		return this.begin() == null;
	}
	,has: function(obj) {
		return this.inlined_has(obj);
	}
	,inlined_has: function(obj) {
		var ret;
		ret = false;
		var cx_ite = this.begin();
		while(cx_ite != null) {
			var npite = cx_ite.elem();
			if(npite == obj) {
				ret = true;
				break;
			}
			cx_ite = cx_ite.next;
		}
		return ret;
	}
	,front: function() {
		return this.begin().elem();
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$CbType
};
var zpp_$nape_callbacks_ZPP_$InteractionListener = function(options1,options2,event,type) {
	this.handlerp = null;
	this.pure = false;
	this.allowSleepingCallbacks = false;
	this.handleri = null;
	this.options2 = null;
	this.options1 = null;
	this.itype = 0;
	this.outer_znp = null;
	this.outer_zni = null;
	zpp_$nape_callbacks_ZPP_$Listener.call(this);
	this.type = type;
	this.interaction = this;
	this.event = event;
	this.options1 = options1.zpp_inner;
	this.options2 = options2.zpp_inner;
	this.allowSleepingCallbacks = false;
};
$hxClasses["zpp_nape.callbacks.ZPP_InteractionListener"] = zpp_$nape_callbacks_ZPP_$InteractionListener;
zpp_$nape_callbacks_ZPP_$InteractionListener.__name__ = ["zpp_nape","callbacks","ZPP_InteractionListener"];
zpp_$nape_callbacks_ZPP_$InteractionListener.__super__ = zpp_$nape_callbacks_ZPP_$Listener;
zpp_$nape_callbacks_ZPP_$InteractionListener.prototype = $extend(zpp_$nape_callbacks_ZPP_$Listener.prototype,{
	setInteractionType: function(itype) {
		this.itype = itype;
	}
	,CbSetset: function(A,B,lambda) {
		var U = zpp_$nape_callbacks_ZPP_$InteractionListener.UCbSet;
		var V = zpp_$nape_callbacks_ZPP_$InteractionListener.VCbSet;
		var W = zpp_$nape_callbacks_ZPP_$InteractionListener.WCbSet;
		var aite = A.begin();
		var bite = B.begin();
		while(aite != null && bite != null) {
			var a = aite.elem();
			var b = bite.elem();
			if(a == b) {
				W.inlined_add(a);
				aite = aite.next;
				bite = bite.next;
			} else if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(a,b)) {
				U.inlined_add(a);
				aite = aite.next;
			} else {
				V.inlined_add(b);
				bite = bite.next;
			}
		}
		while(aite != null) {
			U.inlined_add(aite.elem());
			aite = aite.next;
		}
		while(bite != null) {
			V.inlined_add(bite.elem());
			bite = bite.next;
		}
		while(!U.empty()) {
			var x = U.pop_unsafe();
			var cx_ite = B.begin();
			while(cx_ite != null) {
				var y = cx_ite.elem();
				lambda(x,y);
				cx_ite = cx_ite.next;
			}
		}
		while(!V.empty()) {
			var x1 = V.pop_unsafe();
			var cx_ite1 = W.begin();
			while(cx_ite1 != null) {
				var y1 = cx_ite1.elem();
				lambda(x1,y1);
				cx_ite1 = cx_ite1.next;
			}
		}
		while(!W.empty()) {
			var x2 = W.pop_unsafe();
			lambda(x2,x2);
			var cx_ite2 = W.begin();
			while(cx_ite2 != null) {
				var y2 = cx_ite2.elem();
				lambda(x2,y2);
				cx_ite2 = cx_ite2.next;
			}
		}
	}
	,CbTypeset: function(A,B,lambda) {
		var U = zpp_$nape_callbacks_ZPP_$InteractionListener.UCbType;
		var V = zpp_$nape_callbacks_ZPP_$InteractionListener.VCbType;
		var W = zpp_$nape_callbacks_ZPP_$InteractionListener.WCbType;
		var aite = A.begin();
		var bite = B.begin();
		while(aite != null && bite != null) {
			var a = aite.elem();
			var b = bite.elem();
			if(a == b) {
				W.inlined_add(a);
				aite = aite.next;
				bite = bite.next;
			} else if(zpp_$nape_callbacks_ZPP_$CbType.setlt(a,b)) {
				U.inlined_add(a);
				aite = aite.next;
			} else {
				V.inlined_add(b);
				bite = bite.next;
			}
		}
		while(aite != null) {
			U.inlined_add(aite.elem());
			aite = aite.next;
		}
		while(bite != null) {
			V.inlined_add(bite.elem());
			bite = bite.next;
		}
		while(!U.empty()) {
			var x = U.pop_unsafe();
			var cx_ite = B.begin();
			while(cx_ite != null) {
				var y = cx_ite.elem();
				lambda(x,y);
				cx_ite = cx_ite.next;
			}
		}
		while(!V.empty()) {
			var x1 = V.pop_unsafe();
			var cx_ite1 = W.begin();
			while(cx_ite1 != null) {
				var y1 = cx_ite1.elem();
				lambda(x1,y1);
				cx_ite1 = cx_ite1.next;
			}
		}
		while(!W.empty()) {
			var x2 = W.pop_unsafe();
			lambda(x2,x2);
			var cx_ite2 = W.begin();
			while(cx_ite2 != null) {
				var y2 = cx_ite2.elem();
				lambda(x2,y2);
				cx_ite2 = cx_ite2.next;
			}
		}
	}
	,with_uniquesets: function(fresh) {
		var _g = this;
		var set;
		if(zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool == null) set = new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair(); else {
			set = zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool;
			zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool = set.next;
			set.next = null;
		}
		set.alloc();
		set.lt = zpp_$nape_callbacks_ZPP_$CbSetPair.setlt;
		this.CbTypeset(this.options1.includes,this.options2.includes,function(a,b) {
			_g.CbSetset(a.cbsets,b.cbsets,function(a1,b1) {
				a1.validate();
				b1.validate();
				if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(a1,b1,_g)) set.try_insert(zpp_$nape_callbacks_ZPP_$CbSetPair.get(a1,b1));
			});
		});
		set.clear_with(function(pair) {
			if(fresh) _g.space.freshListenerType(pair.a,pair.b); else _g.space.nullListenerType(pair.a,pair.b);
			var o = pair;
			o.free();
			o.next = zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;
			zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool = o;
		});
		var o1 = set;
		o1.free();
		o1.next = zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool;
		zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool = o1;
	}
	,with_union: function(lambda) {
		var ite1 = this.options1.includes.begin();
		var ite2 = this.options2.includes.begin();
		while(ite1 != null && ite2 != null) {
			var cb1 = ite1.elem();
			var cb2 = ite2.elem();
			if(cb1 == cb2) {
				lambda(cb1);
				ite1 = ite1.next;
				ite2 = ite2.next;
			} else if(zpp_$nape_callbacks_ZPP_$CbType.setlt(cb1,cb2)) {
				lambda(cb1);
				ite1 = ite1.next;
			} else {
				lambda(cb2);
				ite2 = ite2.next;
			}
		}
		while(ite1 != null) {
			lambda(ite1.elem());
			ite1 = ite1.next;
		}
		while(ite2 != null) {
			lambda(ite2.elem());
			ite2 = ite2.next;
		}
	}
	,addedToSpace: function() {
		var _g = this;
		var pre = this.type == zpp_$nape_util_ZPP_$Flags.id_ListenerType_PRE;
		this.with_union(function(cb) {
			cb.addint(_g);
			if(pre) {
				var cx_ite = cb.interactors.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					i.wake();
					cx_ite = cx_ite.next;
				}
			}
		});
		this.options1.handler = $bind(this,this.cbtype_change1);
		this.options2.handler = $bind(this,this.cbtype_change2);
		this.with_uniquesets(true);
	}
	,removedFromSpace: function() {
		var _g = this;
		this.with_uniquesets(false);
		var pre = this.type == zpp_$nape_util_ZPP_$Flags.id_ListenerType_PRE;
		this.with_union(function(cb) {
			cb.removeint(_g);
			if(pre) {
				var cx_ite = cb.interactors.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					i.wake();
					cx_ite = cx_ite.next;
				}
			}
		});
		this.options1.handler = null;
		this.options2.handler = null;
	}
	,cbtype_change1: function(cb,included,added) {
		this.cbtype_change(this.options1,cb,included,added);
	}
	,cbtype_change2: function(cb,included,added) {
		this.cbtype_change(this.options2,cb,included,added);
	}
	,cbtype_change: function(options,cb,included,added) {
		this.space.revoke_listener(this);
		this.removedFromSpace();
		options.effect_change(cb,included,added);
		this.addedToSpace();
		this.space.unrevoke_listener(this);
	}
	,__class__: zpp_$nape_callbacks_ZPP_$InteractionListener
});
var zpp_$nape_callbacks_ZPP_$OptionType = function() {
	this.wrap_excludes = null;
	this.wrap_includes = null;
	this.excludes = null;
	this.includes = null;
	this.handler = null;
	this.outer = null;
	this.includes = new zpp_$nape_util_ZNPList_$ZPP_$CbType();
	this.excludes = new zpp_$nape_util_ZNPList_$ZPP_$CbType();
};
$hxClasses["zpp_nape.callbacks.ZPP_OptionType"] = zpp_$nape_callbacks_ZPP_$OptionType;
zpp_$nape_callbacks_ZPP_$OptionType.__name__ = ["zpp_nape","callbacks","ZPP_OptionType"];
zpp_$nape_callbacks_ZPP_$OptionType.argument = function(val) {
	if(val == null) return new nape_callbacks_OptionType(); else if(Std["is"](val,nape_callbacks_OptionType)) return val; else return new nape_callbacks_OptionType().including(val);
};
zpp_$nape_callbacks_ZPP_$OptionType.prototype = {
	setup_includes: function() {
		this.wrap_includes = zpp_$nape_util_ZPP_$CbTypeList.get(this.includes,true);
	}
	,setup_excludes: function() {
		this.wrap_excludes = zpp_$nape_util_ZPP_$CbTypeList.get(this.excludes,true);
	}
	,excluded: function(xs) {
		return this.nonemptyintersection(xs,this.excludes);
	}
	,included: function(xs) {
		return this.nonemptyintersection(xs,this.includes);
	}
	,compatible: function(xs) {
		return this.included(xs) && !this.excluded(xs);
	}
	,nonemptyintersection: function(xs,ys) {
		var ret = false;
		var xite = xs.begin();
		var eite = ys.begin();
		while(eite != null && xite != null) {
			var ex = eite.elem();
			var xi = xite.elem();
			if(ex == xi) {
				ret = true;
				break;
			} else if(zpp_$nape_callbacks_ZPP_$CbType.setlt(ex,xi)) eite = eite.next; else xite = xite.next;
		}
		return ret;
	}
	,effect_change: function(val,included,added) {
		if(included) {
			if(added) {
				var pre = null;
				var cx_ite = this.includes.begin();
				while(cx_ite != null) {
					var j = cx_ite.elem();
					if(zpp_$nape_callbacks_ZPP_$CbType.setlt(val,j)) break;
					pre = cx_ite;
					cx_ite = cx_ite.next;
				}
				this.includes.inlined_insert(pre,val);
			} else this.includes.remove(val);
		} else if(added) {
			var pre1 = null;
			var cx_ite1 = this.excludes.begin();
			while(cx_ite1 != null) {
				var j1 = cx_ite1.elem();
				if(zpp_$nape_callbacks_ZPP_$CbType.setlt(val,j1)) break;
				pre1 = cx_ite1;
				cx_ite1 = cx_ite1.next;
			}
			this.excludes.inlined_insert(pre1,val);
		} else this.excludes.remove(val);
	}
	,append_type: function(list,val) {
		if(list == this.includes) {
			if(!this.includes.has(val)) {
				if(!this.excludes.has(val)) {
					if(this.handler != null) this.handler(val,true,true); else this.effect_change(val,true,true);
				} else if(this.handler != null) this.handler(val,false,false); else this.effect_change(val,false,false);
			}
		} else if(!this.excludes.has(val)) {
			if(!this.includes.has(val)) {
				if(this.handler != null) this.handler(val,false,true); else this.effect_change(val,false,true);
			} else if(this.handler != null) this.handler(val,true,false); else this.effect_change(val,true,false);
		}
	}
	,append: function(list,val) {
		if(Std["is"](val,nape_callbacks_CbType)) {
			var cb = val;
			this.append_type(list,cb.zpp_inner);
		} else if(Std["is"](val,nape_callbacks_CbTypeList)) {
			var cbs = val;
			var $it0 = cbs.iterator();
			while( $it0.hasNext() ) {
				var cb1 = $it0.next();
				this.append_type(list,cb1.zpp_inner);
			}
		} else if(false) {
		} else if(Std["is"](val,Array)) {
			var cbs1 = val;
			var _g = 0;
			while(_g < cbs1.length) {
				var cb2 = cbs1[_g];
				++_g;
				var cbx = cb2;
				this.append_type(list,cbx.zpp_inner);
			}
		} else {
		}
	}
	,__class__: zpp_$nape_callbacks_ZPP_$OptionType
};
var zpp_$nape_constraint_ZPP_$Constraint = function() {
	this.cbSet = null;
	this.cbTypes = null;
	this.__velocity = false;
	this.ignore = false;
	this.component = null;
	this.removeOnBreak = false;
	this.stiff = false;
	this.active = false;
	this.space = null;
	this.compound = null;
	this.outer = null;
};
$hxClasses["zpp_nape.constraint.ZPP_Constraint"] = zpp_$nape_constraint_ZPP_$Constraint;
zpp_$nape_constraint_ZPP_$Constraint.__name__ = ["zpp_nape","constraint","ZPP_Constraint"];
zpp_$nape_constraint_ZPP_$Constraint.prototype = {
	alloc_cbSet: function() {
		if((this.cbSet = this.space.cbsets.get(this.cbTypes)) != null) {
			this.cbSet.increment();
			this.cbSet.addConstraint(this);
		}
	}
	,dealloc_cbSet: function() {
		if(this.cbSet != null) {
			this.cbSet.remConstraint(this);
			if(this.cbSet.decrement()) {
				this.space.cbsets.remove(this.cbSet);
				var o = this.cbSet;
				o.free();
				o.next = zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool;
				zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool = o;
			}
			this.cbSet = null;
		}
	}
	,addedToSpace: function() {
		if(this.active) this.activeInSpace();
		this.activeBodies();
		var cx_ite = this.cbTypes.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			cb.addConstraint(this);
			cx_ite = cx_ite.next;
		}
	}
	,removedFromSpace: function() {
		if(this.active) this.inactiveOrOutSpace();
		this.inactiveBodies();
		var cx_ite = this.cbTypes.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			cb.remConstraint(this);
			cx_ite = cx_ite.next;
		}
	}
	,activeInSpace: function() {
		this.alloc_cbSet();
		if(zpp_$nape_space_ZPP_$Component.zpp_pool == null) this.component = new zpp_$nape_space_ZPP_$Component(); else {
			this.component = zpp_$nape_space_ZPP_$Component.zpp_pool;
			zpp_$nape_space_ZPP_$Component.zpp_pool = this.component.next;
			this.component.next = null;
		}
		this.component.alloc();
		this.component.isBody = false;
		this.component.constraint = this;
	}
	,inactiveOrOutSpace: function() {
		this.dealloc_cbSet();
		var o = this.component;
		o.free();
		o.next = zpp_$nape_space_ZPP_$Component.zpp_pool;
		zpp_$nape_space_ZPP_$Component.zpp_pool = o;
		this.component = null;
	}
	,activeBodies: function() {
	}
	,inactiveBodies: function() {
	}
	,clearcache: function() {
	}
	,wake_connected: function() {
	}
	,forest: function() {
	}
	,pair_exists: function(id,di) {
		return false;
	}
	,broken: function() {
	}
	,warmStart: function() {
	}
	,preStep: function(dt) {
		return false;
	}
	,applyImpulseVel: function() {
		return false;
	}
	,applyImpulsePos: function() {
		return false;
	}
	,__class__: zpp_$nape_constraint_ZPP_$Constraint
};
var zpp_$nape_dynamics_ZPP_$Arbiter = function() {
	this.sensorarb = null;
	this.fluidarb = null;
	this.colarb = null;
	this.type = 0;
	this.pair = null;
	this.ws2 = null;
	this.ws1 = null;
	this.b2 = null;
	this.b1 = null;
	this.invalidated = false;
	this.immState = 0;
	this.fresh = false;
	this.continuous = false;
	this.presentable = false;
	this.intchange = false;
	this.present = 0;
	this.sleeping = false;
	this.cleared = false;
	this.active = false;
	this.endGenerated = 0;
	this.sleep_stamp = 0;
	this.up_stamp = 0;
	this.stamp = 0;
	this.di = 0;
	this.id = 0;
	this.outer = null;
};
$hxClasses["zpp_nape.dynamics.ZPP_Arbiter"] = zpp_$nape_dynamics_ZPP_$Arbiter;
zpp_$nape_dynamics_ZPP_$Arbiter.__name__ = ["zpp_nape","dynamics","ZPP_Arbiter"];
zpp_$nape_dynamics_ZPP_$Arbiter.prototype = {
	wrapper: function() {
		if(this.outer == null) {
			zpp_$nape_dynamics_ZPP_$Arbiter.internal = true;
			if(this.type == zpp_$nape_dynamics_ZPP_$Arbiter.COL) {
				this.colarb.outer_zn = new nape_dynamics_CollisionArbiter();
				this.outer = this.colarb.outer_zn;
			} else if(this.type == zpp_$nape_dynamics_ZPP_$Arbiter.FLUID) {
				this.fluidarb.outer_zn = new nape_dynamics_FluidArbiter();
				this.outer = this.fluidarb.outer_zn;
			} else this.outer = new nape_dynamics_Arbiter();
			this.outer.zpp_inner = this;
			zpp_$nape_dynamics_ZPP_$Arbiter.internal = false;
		}
		return this.outer;
	}
	,acting: function() {
		return this.active && (this.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT) != 0;
	}
	,lazyRetire: function(s,b) {
		this.cleared = true;
		if(b == null || this.b2 == b) this.b1.arbiters.inlined_remove(this);
		if(b == null || this.b1 == b) this.b2.arbiters.inlined_remove(this);
		if(this.pair != null) {
			this.pair.arb = null;
			this.pair = null;
		}
		this.active = false;
		s.f_arbiters.modified = true;
	}
	,sup_assign: function(s1,s2,id,di) {
		this.b1 = s1.body;
		this.ws1 = s1;
		this.b2 = s2.body;
		this.ws2 = s2;
		this.id = id;
		this.di = di;
		this.b1.arbiters.inlined_add(this);
		this.b2.arbiters.inlined_add(this);
		this.active = true;
		this.present = 0;
		this.cleared = false;
		this.sleeping = false;
		this.fresh = false;
		this.presentable = false;
	}
	,sup_retire: function() {
		if(!this.cleared) {
			this.b1.arbiters.inlined_remove(this);
			this.b2.arbiters.inlined_remove(this);
			if(this.pair != null) {
				this.pair.arb = null;
				this.pair = null;
			}
		}
		this.b1 = this.b2 = null;
		this.active = false;
		this.intchange = false;
	}
	,__class__: zpp_$nape_dynamics_ZPP_$Arbiter
};
var zpp_$nape_dynamics_ZPP_$SensorArbiter = function() {
	this.next = null;
	zpp_$nape_dynamics_ZPP_$Arbiter.call(this);
	this.type = zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR;
	this.sensorarb = this;
};
$hxClasses["zpp_nape.dynamics.ZPP_SensorArbiter"] = zpp_$nape_dynamics_ZPP_$SensorArbiter;
zpp_$nape_dynamics_ZPP_$SensorArbiter.__name__ = ["zpp_nape","dynamics","ZPP_SensorArbiter"];
zpp_$nape_dynamics_ZPP_$SensorArbiter.__super__ = zpp_$nape_dynamics_ZPP_$Arbiter;
zpp_$nape_dynamics_ZPP_$SensorArbiter.prototype = $extend(zpp_$nape_dynamics_ZPP_$Arbiter.prototype,{
	alloc: function() {
	}
	,free: function() {
	}
	,assign: function(s1,s2,id,di) {
		this.sup_assign(s1,s2,id,di);
	}
	,retire: function() {
		this.sup_retire();
		var o = this;
		o.free();
		o.next = zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool;
		zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool = o;
	}
	,__class__: zpp_$nape_dynamics_ZPP_$SensorArbiter
});
var zpp_$nape_dynamics_ZPP_$FluidArbiter = function() {
	this.pre_dt = 0.0;
	this.buoyy = 0.0;
	this.buoyx = 0.0;
	this.ny = 0.0;
	this.nx = 0.0;
	this.lgamma = 0.0;
	this.dampy = 0.0;
	this.dampx = 0.0;
	this.vMassc = 0.0;
	this.vMassb = 0.0;
	this.vMassa = 0.0;
	this.agamma = 0.0;
	this.adamp = 0.0;
	this.wMass = 0.0;
	this.nodrag = false;
	this.r2y = 0.0;
	this.r2x = 0.0;
	this.r1y = 0.0;
	this.r1x = 0.0;
	this.overlap = 0.0;
	this.centroidy = 0.0;
	this.centroidx = 0.0;
	this.next = null;
	this.outer_zn = null;
	zpp_$nape_dynamics_ZPP_$Arbiter.call(this);
	this.type = zpp_$nape_dynamics_ZPP_$Arbiter.FLUID;
	this.fluidarb = this;
	this.buoyx = 0;
	this.buoyy = 0;
	this.pre_dt = -1.0;
};
$hxClasses["zpp_nape.dynamics.ZPP_FluidArbiter"] = zpp_$nape_dynamics_ZPP_$FluidArbiter;
zpp_$nape_dynamics_ZPP_$FluidArbiter.__name__ = ["zpp_nape","dynamics","ZPP_FluidArbiter"];
zpp_$nape_dynamics_ZPP_$FluidArbiter.__super__ = zpp_$nape_dynamics_ZPP_$Arbiter;
zpp_$nape_dynamics_ZPP_$FluidArbiter.prototype = $extend(zpp_$nape_dynamics_ZPP_$Arbiter.prototype,{
	alloc: function() {
	}
	,free: function() {
	}
	,assign: function(s1,s2,id,di) {
		this.sup_assign(s1,s2,id,di);
		this.nx = 0;
		this.ny = 1;
		this.dampx = 0;
		this.dampy = 0;
		this.adamp = 0.0;
	}
	,retire: function() {
		this.sup_retire();
		var o = this;
		o.free();
		o.next = zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool;
		zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool = o;
		this.pre_dt = -1.0;
	}
	,inject: function(area,cx,cy) {
		this.overlap = area;
		this.centroidx = cx;
		this.centroidy = cy;
	}
	,preStep: function(s,dt) {
		if(this.pre_dt == -1.0) this.pre_dt = dt;
		var dtratio = dt / this.pre_dt;
		this.pre_dt = dt;
		this.r1x = this.centroidx - this.b1.posx;
		this.r1y = this.centroidy - this.b1.posy;
		this.r2x = this.centroidx - this.b2.posx;
		this.r2y = this.centroidy - this.b2.posy;
		var g1x = 0.0;
		var g1y = 0.0;
		if(this.ws1.fluidEnabled && this.ws1.fluidProperties.wrap_gravity != null) {
			g1x = this.ws1.fluidProperties.gravityx;
			g1y = this.ws1.fluidProperties.gravityy;
		} else {
			g1x = s.gravityx;
			g1y = s.gravityy;
		}
		var g2x = 0.0;
		var g2y = 0.0;
		if(this.ws2.fluidEnabled && this.ws2.fluidProperties.wrap_gravity != null) {
			g2x = this.ws2.fluidProperties.gravityx;
			g2y = this.ws2.fluidProperties.gravityy;
		} else {
			g2x = s.gravityx;
			g2y = s.gravityy;
		}
		var buoyx = 0;
		var buoyy = 0;
		if(this.ws1.fluidEnabled && this.ws2.fluidEnabled) {
			var mass1 = this.overlap * this.ws1.fluidProperties.density;
			var mass2 = this.overlap * this.ws2.fluidProperties.density;
			if(mass1 > mass2) {
				var t = mass1 + mass2;
				buoyx -= g1x * t;
				buoyy -= g1y * t;
			} else if(mass1 < mass2) {
				var t1 = mass1 + mass2;
				buoyx += g2x * t1;
				buoyy += g2y * t1;
			} else {
				var gx = 0.0;
				var gy = 0.0;
				gx = g1x + g2x;
				gy = g1y + g2y;
				var t2 = 0.5;
				gx *= t2;
				gy *= t2;
				if(this.ws1.worldCOMx * gx + this.ws1.worldCOMy * gy > this.ws2.worldCOMx * gx + this.ws2.worldCOMy * gy) {
					var t3 = mass1 + mass2;
					buoyx -= gx * t3;
					buoyy -= gy * t3;
				} else {
					var t4 = mass1 + mass2;
					buoyx += gx * t4;
					buoyy += gy * t4;
				}
			}
		} else if(this.ws1.fluidEnabled) {
			var mass = this.overlap * this.ws1.fluidProperties.density;
			var t5 = mass;
			buoyx -= g1x * t5;
			buoyy -= g1y * t5;
		} else if(this.ws2.fluidEnabled) {
			var mass3 = this.overlap * this.ws2.fluidProperties.density;
			var t6 = mass3;
			buoyx += g2x * t6;
			buoyy += g2y * t6;
		}
		var t7 = dt;
		buoyx *= t7;
		buoyy *= t7;
		this.buoyx = buoyx;
		this.buoyy = buoyy;
		if(this.b1.isDynamic()) {
			var t8 = this.b1.imass;
			this.b1.velx -= buoyx * t8;
			this.b1.vely -= buoyy * t8;
			this.b1.angvel -= (buoyy * this.r1x - buoyx * this.r1y) * this.b1.iinertia;
		}
		if(this.b2.isDynamic()) {
			var t9 = this.b2.imass;
			this.b2.velx += buoyx * t9;
			this.b2.vely += buoyy * t9;
			this.b2.angvel += (buoyy * this.r2x - buoyx * this.r2y) * this.b2.iinertia;
		}
		if((!this.ws1.fluidEnabled || this.ws1.fluidProperties.viscosity == 0) && (!this.ws2.fluidEnabled || this.ws2.fluidProperties.viscosity == 0)) {
			this.nodrag = true;
			this.dampx = 0;
			this.dampy = 0;
			this.adamp = 0;
		} else {
			this.nodrag = false;
			var tViscosity = 0.0;
			if(this.ws1.fluidEnabled) {
				this.ws2.validate_angDrag();
				tViscosity += this.ws1.fluidProperties.viscosity * this.ws2.angDrag * this.overlap / this.ws2.area;
			}
			if(this.ws2.fluidEnabled) {
				this.ws1.validate_angDrag();
				tViscosity += this.ws2.fluidProperties.viscosity * this.ws1.angDrag * this.overlap / this.ws1.area;
			}
			if(tViscosity != 0) {
				var iSum = this.b1.sinertia + this.b2.sinertia;
				if(iSum != 0) this.wMass = 1 / iSum; else this.wMass = 0.0;
				var biasCoef;
				tViscosity *= 0.0004;
				var omega = 2 * Math.PI * tViscosity;
				this.agamma = 1 / (dt * omega * (2 * 1 + omega * dt));
				var ig = 1 / (1 + this.agamma);
				biasCoef = dt * omega * omega * this.agamma;
				this.agamma *= ig;
				this.wMass *= ig;
			} else {
				this.wMass = 0.0;
				this.agamma = 0.0;
			}
			var vrnx = this.b2.velx + this.b2.kinvelx - this.r2y * (this.b2.angvel + this.b2.kinangvel) - (this.b1.velx + this.b1.kinvelx - this.r1y * (this.b2.angvel + this.b2.kinangvel));
			var vrny = this.b2.vely + this.b2.kinvely + this.r2x * (this.b2.angvel + this.b2.kinangvel) - (this.b1.vely + this.b1.kinvely + this.r1x * (this.b1.angvel + this.b1.kinangvel));
			if(vrnx * vrnx + vrny * vrny < nape_Config.epsilon * nape_Config.epsilon) {
			} else {
				var d = vrnx * vrnx + vrny * vrny;
				var imag = zpp_$nape_util_ZPP_$Math.invsqrt(d);
				var t10 = imag;
				vrnx *= t10;
				vrny *= t10;
				this.nx = vrnx;
				this.ny = vrny;
			}
			var tViscosity1 = 0.0;
			if(this.ws1.fluidEnabled) {
				var f = -this.ws1.fluidProperties.viscosity * this.overlap / this.ws2.area;
				if(this.ws2.type == zpp_$nape_util_ZPP_$Flags.id_ShapeType_CIRCLE) tViscosity1 -= f * this.ws2.circle.radius * nape_Config.fluidLinearDrag / (2 * this.ws2.circle.radius * Math.PI); else {
					var poly = this.ws2.polygon;
					var bord = 0.0;
					var acc = 0.0;
					var cx_ite = poly.edges.begin();
					while(cx_ite != null) {
						var ex = cx_ite.elem();
						bord += ex.length;
						var fact = f * ex.length * (ex.gnormx * this.nx + ex.gnormy * this.ny);
						if(fact > 0) fact = fact *= -nape_Config.fluidVacuumDrag;
						acc -= fact * 0.5 * nape_Config.fluidLinearDrag;
						cx_ite = cx_ite.next;
					}
					tViscosity1 += acc / bord;
				}
			}
			if(this.ws2.fluidEnabled) {
				var f1 = -this.ws2.fluidProperties.viscosity * this.overlap / this.ws1.area;
				if(this.ws1.type == zpp_$nape_util_ZPP_$Flags.id_ShapeType_CIRCLE) tViscosity1 -= f1 * this.ws1.circle.radius * nape_Config.fluidLinearDrag / (2 * this.ws1.circle.radius * Math.PI); else {
					var poly1 = this.ws1.polygon;
					var bord1 = 0.0;
					var acc1 = 0.0;
					var cx_ite1 = poly1.edges.begin();
					while(cx_ite1 != null) {
						var ex1 = cx_ite1.elem();
						bord1 += ex1.length;
						var fact1 = f1 * ex1.length * (ex1.gnormx * this.nx + ex1.gnormy * this.ny);
						if(fact1 > 0) fact1 = fact1 *= -nape_Config.fluidVacuumDrag;
						acc1 -= fact1 * 0.5 * nape_Config.fluidLinearDrag;
						cx_ite1 = cx_ite1.next;
					}
					tViscosity1 += acc1 / bord1;
				}
			}
			if(tViscosity1 != 0) {
				var m = this.b1.smass + this.b2.smass;
				var Ka = 0.0;
				var Kb = 0.0;
				var Kc = 0.0;
				Ka = m;
				Kb = 0;
				Kc = m;
				if(this.b1.sinertia != 0) {
					var X = this.r1x * this.b1.sinertia;
					var Y = this.r1y * this.b1.sinertia;
					Ka += Y * this.r1y;
					Kb += -Y * this.r1x;
					Kc += X * this.r1x;
				}
				if(this.b2.sinertia != 0) {
					var X1 = this.r2x * this.b2.sinertia;
					var Y1 = this.r2y * this.b2.sinertia;
					Ka += Y1 * this.r2y;
					Kb += -Y1 * this.r2x;
					Kc += X1 * this.r2x;
				}
				var det = Ka * Kc - Kb * Kb;
				if(det != det) {
					Ka = Kb = Kc = 0;
					3;
				} else if(det == 0) {
					var flag = 0;
					if(Ka != 0) Ka = 1 / Ka; else {
						Ka = 0;
						flag |= 1;
					}
					if(Kc != 0) Kc = 1 / Kc; else {
						Kc = 0;
						flag |= 2;
					}
					Kb = 0;
					flag;
				} else {
					det = 1 / det;
					var t11 = Kc * det;
					Kc = Ka * det;
					Ka = t11;
					Kb *= -det;
					0;
				}
				this.vMassa = Ka;
				this.vMassb = Kb;
				this.vMassc = Kc;
				var biasCoef1;
				var X2;
				var omega1 = 2 * Math.PI * tViscosity1;
				this.lgamma = 1 / (dt * omega1 * (2 * 1 + omega1 * dt));
				var ig1 = 1 / (1 + this.lgamma);
				biasCoef1 = dt * omega1 * omega1 * this.lgamma;
				this.lgamma *= ig1;
				X2 = ig1;
				this.vMassa *= X2;
				this.vMassb *= X2;
				this.vMassc *= X2;
			} else {
				this.vMassa = 0;
				this.vMassb = 0;
				this.vMassc = 0;
				this.lgamma = 0.0;
			}
		}
		var t12 = dtratio;
		this.dampx *= t12;
		this.dampy *= t12;
		this.adamp *= dtratio;
	}
	,warmStart: function() {
		var t = this.b1.imass;
		this.b1.velx -= this.dampx * t;
		this.b1.vely -= this.dampy * t;
		var t1 = this.b2.imass;
		this.b2.velx += this.dampx * t1;
		this.b2.vely += this.dampy * t1;
		this.b1.angvel -= this.b1.iinertia * (this.dampy * this.r1x - this.dampx * this.r1y);
		this.b2.angvel += this.b2.iinertia * (this.dampy * this.r2x - this.dampx * this.r2y);
		this.b1.angvel -= this.adamp * this.b1.iinertia;
		this.b2.angvel += this.adamp * this.b2.iinertia;
	}
	,applyImpulseVel: function() {
		if(!this.nodrag) {
			var w1 = this.b1.angvel + this.b1.kinangvel;
			var w2 = this.b2.angvel + this.b2.kinangvel;
			var jx = this.b1.velx + this.b1.kinvelx - this.r1y * w1 - (this.b2.velx + this.b2.kinvelx - this.r2y * w2);
			var jy = this.b1.vely + this.b1.kinvely + this.r1x * w1 - (this.b2.vely + this.b2.kinvely + this.r2x * w2);
			var t = this.vMassa * jx + this.vMassb * jy;
			jy = this.vMassb * jx + this.vMassc * jy;
			jx = t;
			var t1 = this.lgamma;
			jx -= this.dampx * t1;
			jy -= this.dampy * t1;
			var t2 = 1.0;
			this.dampx += jx * t2;
			this.dampy += jy * t2;
			var t3 = this.b1.imass;
			this.b1.velx -= jx * t3;
			this.b1.vely -= jy * t3;
			var t4 = this.b2.imass;
			this.b2.velx += jx * t4;
			this.b2.vely += jy * t4;
			this.b1.angvel -= this.b1.iinertia * (jy * this.r1x - jx * this.r1y);
			this.b2.angvel += this.b2.iinertia * (jy * this.r2x - jx * this.r2y);
			var j_damp = (w1 - w2) * this.wMass - this.adamp * this.agamma;
			this.adamp += j_damp;
			this.b1.angvel -= j_damp * this.b1.iinertia;
			this.b2.angvel += j_damp * this.b2.iinertia;
		}
	}
	,__class__: zpp_$nape_dynamics_ZPP_$FluidArbiter
});
var zpp_$nape_dynamics_ZPP_$ColArbiter = function() {
	this.pre_dt = 0.0;
	this.stat = false;
	this.next = null;
	this.hpc2 = false;
	this.hc2 = false;
	this.oc2 = null;
	this.c2 = null;
	this.oc1 = null;
	this.c1 = null;
	this.__ref_vertex = 0;
	this.__ref_edge2 = null;
	this.__ref_edge1 = null;
	this.biasCoef = 0.0;
	this.rev = false;
	this.radius = 0.0;
	this.lproj = 0.0;
	this.lnormy = 0.0;
	this.lnormx = 0.0;
	this.surfacey = 0.0;
	this.surfacex = 0.0;
	this.k2y = 0.0;
	this.k2x = 0.0;
	this.k1y = 0.0;
	this.k1x = 0.0;
	this.rt2b = 0.0;
	this.rn2b = 0.0;
	this.rt2a = 0.0;
	this.rn2a = 0.0;
	this.rt1b = 0.0;
	this.rn1b = 0.0;
	this.rt1a = 0.0;
	this.rn1a = 0.0;
	this.jrAcc = 0.0;
	this.rMass = 0.0;
	this.Kc = 0.0;
	this.Kb = 0.0;
	this.Ka = 0.0;
	this.kMassc = 0.0;
	this.kMassb = 0.0;
	this.kMassa = 0.0;
	this.ny = 0.0;
	this.nx = 0.0;
	this.innards = null;
	this.contacts = null;
	this.s2 = null;
	this.s1 = null;
	this.userdef_rfric = false;
	this.userdef_restitution = false;
	this.userdef_stat_fric = false;
	this.userdef_dyn_fric = false;
	this.rfric = 0.0;
	this.restitution = 0.0;
	this.stat_fric = 0.0;
	this.dyn_fric = 0.0;
	this.outer_zn = null;
	zpp_$nape_dynamics_ZPP_$Arbiter.call(this);
	this.pre_dt = -1.0;
	this.contacts = new zpp_$nape_dynamics_ZPP_$Contact();
	this.innards = new zpp_$nape_dynamics_ZPP_$IContact();
	this.type = zpp_$nape_dynamics_ZPP_$Arbiter.COL;
	this.colarb = this;
};
$hxClasses["zpp_nape.dynamics.ZPP_ColArbiter"] = zpp_$nape_dynamics_ZPP_$ColArbiter;
zpp_$nape_dynamics_ZPP_$ColArbiter.__name__ = ["zpp_nape","dynamics","ZPP_ColArbiter"];
zpp_$nape_dynamics_ZPP_$ColArbiter.__super__ = zpp_$nape_dynamics_ZPP_$Arbiter;
zpp_$nape_dynamics_ZPP_$ColArbiter.prototype = $extend(zpp_$nape_dynamics_ZPP_$Arbiter.prototype,{
	alloc: function() {
	}
	,free: function() {
		this.userdef_dyn_fric = false;
		this.userdef_stat_fric = false;
		this.userdef_restitution = false;
		this.userdef_rfric = false;
		this.__ref_edge1 = this.__ref_edge2 = null;
	}
	,injectContact: function(px,py,nx,ny,dist,hash,posOnly) {
		if(posOnly == null) posOnly = false;
		var c = null;
		var cx_ite = this.contacts.begin();
		while(cx_ite != null) {
			var cur = cx_ite.elem();
			if(hash == cur.hash) {
				c = cur;
				break;
			}
			cx_ite = cx_ite.next;
		}
		if(c == null) {
			if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool == null) c = new zpp_$nape_dynamics_ZPP_$Contact(); else {
				c = zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;
				zpp_$nape_dynamics_ZPP_$Contact.zpp_pool = c.next;
				c.next = null;
			}
			c.alloc();
			var ci = c.inner;
			ci.jnAcc = ci.jtAcc = 0;
			c.hash = hash;
			c.fresh = true;
			c.arbiter = this;
			this.jrAcc = 0;
			this.contacts.inlined_add(c);
			this.innards.add(ci);
		} else c.fresh = false;
		c.px = px;
		c.py = py;
		this.nx = nx;
		this.ny = ny;
		c.dist = dist;
		c.stamp = this.stamp;
		c.posOnly = posOnly;
		return c;
	}
	,assign: function(s1,s2,id,di) {
		this.sup_assign(s1,s2,id,di);
		this.s1 = s1;
		this.s2 = s2;
		this.calcProperties();
	}
	,calcProperties: function() {
		if(!this.userdef_restitution) {
			if(this.s1.material.elasticity <= zpp_$nape_ZPP_$Const.NEGINF() || this.s2.material.elasticity <= zpp_$nape_ZPP_$Const.NEGINF()) this.restitution = 0; else if(this.s1.material.elasticity >= zpp_$nape_ZPP_$Const.POSINF() || this.s2.material.elasticity >= zpp_$nape_ZPP_$Const.POSINF()) this.restitution = 1; else this.restitution = (this.s1.material.elasticity + this.s2.material.elasticity) / 2;
			if(this.restitution < 0) this.restitution = 0;
			if(this.restitution > 1) this.restitution = 1;
		}
		if(!this.userdef_dyn_fric) this.dyn_fric = zpp_$nape_util_ZPP_$Math.sqrt(this.s1.material.dynamicFriction * this.s2.material.dynamicFriction);
		if(!this.userdef_stat_fric) this.stat_fric = zpp_$nape_util_ZPP_$Math.sqrt(this.s1.material.staticFriction * this.s2.material.staticFriction);
		if(!this.userdef_rfric) this.rfric = zpp_$nape_util_ZPP_$Math.sqrt(this.s1.material.rollingFriction * this.s2.material.rollingFriction);
	}
	,validate_props: function() {
		if(this.invalidated) {
			this.invalidated = false;
			this.calcProperties();
		}
	}
	,retire: function() {
		this.sup_retire();
		while(!this.contacts.empty()) {
			var o = this.contacts.inlined_pop_unsafe();
			o.free();
			o.next = zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;
			zpp_$nape_dynamics_ZPP_$Contact.zpp_pool = o;
			this.innards.inlined_pop();
		}
		var o1 = this;
		o1.free();
		o1.next = zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool;
		zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool = o1;
		this.pre_dt = -1.0;
	}
	,cleanupContacts: function() {
		var fst = true;
		var pre = null;
		var prei = null;
		var cx_itei = this.innards.begin();
		this.hc2 = false;
		var cx_ite = this.contacts.begin();
		while(cx_ite != null) {
			var c = cx_ite.elem();
			if(c.stamp + nape_Config.arbiterExpirationDelay < this.stamp) {
				cx_ite = this.contacts.inlined_erase(pre);
				cx_itei = this.innards.inlined_erase(prei);
				var o = c;
				o.free();
				o.next = zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;
				zpp_$nape_dynamics_ZPP_$Contact.zpp_pool = o;
				continue;
			}
			var ci = c.inner;
			var pact = c.active;
			c.active = c.stamp == this.stamp;
			if(c.active) {
				if(fst) {
					fst = false;
					this.c1 = ci;
					this.oc1 = c;
				} else {
					this.hc2 = true;
					this.c2 = ci;
					this.oc2 = c;
				}
			}
			if(pact != c.active) this.contacts.modified = true;
			pre = cx_ite;
			prei = cx_itei;
			cx_itei = cx_itei.next;
			cx_ite = cx_ite.next;
		}
		if(this.hc2) {
			this.hpc2 = true;
			if(this.oc1.posOnly) {
				var tmp = this.c1;
				this.c1 = this.c2;
				this.c2 = tmp;
				var tmp2 = this.oc1;
				this.oc1 = this.oc2;
				this.oc2 = tmp2;
				this.hc2 = false;
			} else if(this.oc2.posOnly) this.hc2 = false;
			if(this.oc1.posOnly) fst = true;
		} else this.hpc2 = false;
		return fst;
	}
	,preStep: function(dt) {
		this.validate_props();
		if(this.pre_dt == -1.0) this.pre_dt = dt;
		var dtratio = dt / this.pre_dt;
		this.pre_dt = dt;
		var mass_sum = this.b1.smass + this.b2.smass;
		this.hc2 = false;
		var fst = true;
		var statType = !this.b1.isDynamic() || !this.b2.isDynamic();
		var bias;
		if(statType) {
			if(this.continuous) bias = nape_Config.contactContinuousStaticBiasCoef; else bias = nape_Config.contactStaticBiasCoef;
		} else if(this.continuous) bias = nape_Config.contactContinuousBiasCoef; else bias = nape_Config.contactBiasCoef;
		this.biasCoef = bias;
		this.continuous = false;
		var pre = null;
		var prei = null;
		var cx_itei = this.innards.begin();
		var cx_ite = this.contacts.begin();
		while(cx_ite != null) {
			var c = cx_ite.elem();
			if(c.stamp + nape_Config.arbiterExpirationDelay < this.stamp) {
				cx_ite = this.contacts.inlined_erase(pre);
				cx_itei = this.innards.inlined_erase(prei);
				var o = c;
				o.free();
				o.next = zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;
				zpp_$nape_dynamics_ZPP_$Contact.zpp_pool = o;
				continue;
			}
			var ci = c.inner;
			var pact = c.active;
			c.active = c.stamp == this.stamp;
			if(c.active) {
				if(fst) {
					fst = false;
					this.c1 = ci;
					this.oc1 = c;
				} else {
					this.hc2 = true;
					this.c2 = ci;
					this.oc2 = c;
				}
				ci.r2x = c.px - this.b2.posx;
				ci.r2y = c.py - this.b2.posy;
				ci.r1x = c.px - this.b1.posx;
				ci.r1y = c.py - this.b1.posy;
				var kt = mass_sum + this.b2.sinertia * zpp_$nape_util_ZPP_$Math.sqr(ci.r2x * this.nx + ci.r2y * this.ny);
				kt += this.b1.sinertia * zpp_$nape_util_ZPP_$Math.sqr(ci.r1x * this.nx + ci.r1y * this.ny);
				if(kt < nape_Config.epsilon * nape_Config.epsilon) ci.tMass = 0; else ci.tMass = 1.0 / kt;
				var nt = mass_sum + this.b2.sinertia * zpp_$nape_util_ZPP_$Math.sqr(this.ny * ci.r2x - this.nx * ci.r2y);
				nt += this.b1.sinertia * zpp_$nape_util_ZPP_$Math.sqr(this.ny * ci.r1x - this.nx * ci.r1y);
				if(nt < nape_Config.epsilon * nape_Config.epsilon) ci.nMass = 0; else ci.nMass = 1.0 / nt;
				var vrx = 0.0;
				var vry = 0.0;
				var ang = this.b2.angvel + this.b2.kinangvel;
				vrx = this.b2.velx + this.b2.kinvelx - ci.r2y * ang;
				vry = this.b2.vely + this.b2.kinvely + ci.r2x * ang;
				ang = this.b1.angvel + this.b1.kinangvel;
				vrx -= this.b1.velx + this.b1.kinvelx - ci.r1y * ang;
				vry -= this.b1.vely + this.b1.kinvely + ci.r1x * ang;
				var vdot = this.nx * vrx + this.ny * vry;
				c.elasticity = this.restitution;
				ci.bounce = vdot * c.elasticity;
				if(ci.bounce > -nape_Config.elasticThreshold) ci.bounce = 0;
				vdot = vry * this.nx - vrx * this.ny;
				var thr = nape_Config.staticFrictionThreshold;
				if(vdot * vdot > thr * thr) ci.friction = this.dyn_fric; else ci.friction = this.stat_fric;
				ci.jnAcc *= dtratio;
				ci.jtAcc *= dtratio;
			}
			if(pact != c.active) this.contacts.modified = true;
			pre = cx_ite;
			prei = cx_itei;
			cx_itei = cx_itei.next;
			cx_ite = cx_ite.next;
		}
		if(this.hc2) {
			this.hpc2 = true;
			if(this.oc1.posOnly) {
				var tmp = this.c1;
				this.c1 = this.c2;
				this.c2 = tmp;
				var tmp2 = this.oc1;
				this.oc1 = this.oc2;
				this.oc2 = tmp2;
				this.hc2 = false;
			} else if(this.oc2.posOnly) this.hc2 = false;
			if(this.oc1.posOnly) fst = true;
		} else this.hpc2 = false;
		this.jrAcc *= dtratio;
		if(!fst) {
			this.rn1a = this.ny * this.c1.r1x - this.nx * this.c1.r1y;
			this.rt1a = this.c1.r1x * this.nx + this.c1.r1y * this.ny;
			this.rn1b = this.ny * this.c1.r2x - this.nx * this.c1.r2y;
			this.rt1b = this.c1.r2x * this.nx + this.c1.r2y * this.ny;
			this.k1x = this.b2.kinvelx - this.c1.r2y * this.b2.kinangvel - (this.b1.kinvelx - this.c1.r1y * this.b1.kinangvel);
			this.k1y = this.b2.kinvely + this.c1.r2x * this.b2.kinangvel - (this.b1.kinvely + this.c1.r1x * this.b1.kinangvel);
		}
		if(this.hc2) {
			this.rn2a = this.ny * this.c2.r1x - this.nx * this.c2.r1y;
			this.rt2a = this.c2.r1x * this.nx + this.c2.r1y * this.ny;
			this.rn2b = this.ny * this.c2.r2x - this.nx * this.c2.r2y;
			this.rt2b = this.c2.r2x * this.nx + this.c2.r2y * this.ny;
			this.k2x = this.b2.kinvelx - this.c2.r2y * this.b2.kinangvel - (this.b1.kinvelx - this.c2.r1y * this.b1.kinangvel);
			this.k2y = this.b2.kinvely + this.c2.r2x * this.b2.kinangvel - (this.b1.kinvely + this.c2.r1x * this.b1.kinangvel);
			this.kMassa = mass_sum + this.b1.sinertia * this.rn1a * this.rn1a + this.b2.sinertia * this.rn1b * this.rn1b;
			this.kMassb = mass_sum + this.b1.sinertia * this.rn1a * this.rn2a + this.b2.sinertia * this.rn1b * this.rn2b;
			this.kMassc = mass_sum + this.b1.sinertia * this.rn2a * this.rn2a + this.b2.sinertia * this.rn2b * this.rn2b;
			var norm = this.kMassa * this.kMassa + 2 * this.kMassb * this.kMassb + this.kMassc * this.kMassc;
			if(norm < nape_Config.illConditionedThreshold * (this.kMassa * this.kMassc - this.kMassb * this.kMassb)) {
				this.Ka = this.kMassa;
				this.Kb = this.kMassb;
				this.Kc = this.kMassc;
				var det = this.kMassa * this.kMassc - this.kMassb * this.kMassb;
				if(det != det) {
					this.kMassa = this.kMassb = this.kMassc = 0;
					3;
				} else if(det == 0) {
					var flag = 0;
					if(this.kMassa != 0) this.kMassa = 1 / this.kMassa; else {
						this.kMassa = 0;
						flag |= 1;
					}
					if(this.kMassc != 0) this.kMassc = 1 / this.kMassc; else {
						this.kMassc = 0;
						flag |= 2;
					}
					this.kMassb = 0;
					flag;
				} else {
					det = 1 / det;
					var t = this.kMassc * det;
					this.kMassc = this.kMassa * det;
					this.kMassa = t;
					this.kMassb *= -det;
					0;
				}
			} else {
				this.hc2 = false;
				if(this.oc2.dist < this.oc1.dist) {
					var t1 = this.c1;
					this.c1 = this.c2;
					this.c2 = t1;
				}
				this.oc2.active = false;
				this.contacts.modified = true;
			}
		}
		this.surfacex = this.b2.svelx;
		this.surfacey = this.b2.svely;
		var t2 = 1.0;
		this.surfacex += this.b1.svelx * t2;
		this.surfacey += this.b1.svely * t2;
		this.surfacex = -this.surfacex;
		this.surfacey = -this.surfacey;
		this.rMass = this.b1.sinertia + this.b2.sinertia;
		if(this.rMass != 0) this.rMass = 1 / this.rMass;
		return fst;
	}
	,warmStart: function() {
		var jx = this.nx * this.c1.jnAcc - this.ny * this.c1.jtAcc;
		var jy = this.ny * this.c1.jnAcc + this.nx * this.c1.jtAcc;
		var t = this.b1.imass;
		this.b1.velx -= jx * t;
		this.b1.vely -= jy * t;
		this.b1.angvel -= this.b1.iinertia * (jy * this.c1.r1x - jx * this.c1.r1y);
		var t1 = this.b2.imass;
		this.b2.velx += jx * t1;
		this.b2.vely += jy * t1;
		this.b2.angvel += this.b2.iinertia * (jy * this.c1.r2x - jx * this.c1.r2y);
		if(this.hc2) {
			var jx1 = this.nx * this.c2.jnAcc - this.ny * this.c2.jtAcc;
			var jy1 = this.ny * this.c2.jnAcc + this.nx * this.c2.jtAcc;
			var t2 = this.b1.imass;
			this.b1.velx -= jx1 * t2;
			this.b1.vely -= jy1 * t2;
			this.b1.angvel -= this.b1.iinertia * (jy1 * this.c2.r1x - jx1 * this.c2.r1y);
			var t3 = this.b2.imass;
			this.b2.velx += jx1 * t3;
			this.b2.vely += jy1 * t3;
			this.b2.angvel += this.b2.iinertia * (jy1 * this.c2.r2x - jx1 * this.c2.r2y);
		}
		this.b2.angvel += this.jrAcc * this.b2.iinertia;
		this.b1.angvel -= this.jrAcc * this.b1.iinertia;
	}
	,applyImpulseVel: function() {
		var jx;
		var jy;
		var j;
		var jMax;
		var jOld;
		var cjAcc;
		var v1x = this.k1x + this.b2.velx - this.c1.r2y * this.b2.angvel - (this.b1.velx - this.c1.r1y * this.b1.angvel);
		var v1y = this.k1y + this.b2.vely + this.c1.r2x * this.b2.angvel - (this.b1.vely + this.c1.r1x * this.b1.angvel);
		j = (v1y * this.nx - v1x * this.ny + this.surfacex) * this.c1.tMass;
		jMax = this.c1.friction * this.c1.jnAcc;
		jOld = this.c1.jtAcc;
		cjAcc = jOld - j;
		if(cjAcc > jMax) cjAcc = jMax; else if(cjAcc < -jMax) cjAcc = -jMax;
		j = cjAcc - jOld;
		this.c1.jtAcc = cjAcc;
		jx = -this.ny * j;
		jy = this.nx * j;
		this.b2.velx += jx * this.b2.imass;
		this.b2.vely += jy * this.b2.imass;
		this.b1.velx -= jx * this.b1.imass;
		this.b1.vely -= jy * this.b1.imass;
		this.b2.angvel += this.rt1b * j * this.b2.iinertia;
		this.b1.angvel -= this.rt1a * j * this.b1.iinertia;
		if(this.hc2) {
			var v2x = this.k2x + this.b2.velx - this.c2.r2y * this.b2.angvel - (this.b1.velx - this.c2.r1y * this.b1.angvel);
			var v2y = this.k2y + this.b2.vely + this.c2.r2x * this.b2.angvel - (this.b1.vely + this.c2.r1x * this.b1.angvel);
			j = (v2y * this.nx - v2x * this.ny + this.surfacex) * this.c2.tMass;
			jMax = this.c2.friction * this.c2.jnAcc;
			jOld = this.c2.jtAcc;
			cjAcc = jOld - j;
			if(cjAcc > jMax) cjAcc = jMax; else if(cjAcc < -jMax) cjAcc = -jMax;
			j = cjAcc - jOld;
			this.c2.jtAcc = cjAcc;
			jx = -this.ny * j;
			jy = this.nx * j;
			this.b2.velx += jx * this.b2.imass;
			this.b2.vely += jy * this.b2.imass;
			this.b1.velx -= jx * this.b1.imass;
			this.b1.vely -= jy * this.b1.imass;
			this.b2.angvel += this.rt2b * j * this.b2.iinertia;
			this.b1.angvel -= this.rt2a * j * this.b1.iinertia;
			v1x = this.k1x + this.b2.velx - this.c1.r2y * this.b2.angvel - (this.b1.velx - this.c1.r1y * this.b1.angvel);
			v1y = this.k1y + this.b2.vely + this.c1.r2x * this.b2.angvel - (this.b1.vely + this.c1.r1x * this.b1.angvel);
			v2x = this.k2x + this.b2.velx - this.c2.r2y * this.b2.angvel - (this.b1.velx - this.c2.r1y * this.b1.angvel);
			v2y = this.k2y + this.b2.vely + this.c2.r2x * this.b2.angvel - (this.b1.vely + this.c2.r1x * this.b1.angvel);
			var ax = this.c1.jnAcc;
			var ay = this.c2.jnAcc;
			var jnx = v1x * this.nx + v1y * this.ny + this.surfacey + this.c1.bounce - (this.Ka * ax + this.Kb * ay);
			var jny = v2x * this.nx + v2y * this.ny + this.surfacey + this.c2.bounce - (this.Kb * ax + this.Kc * ay);
			var xx = -(this.kMassa * jnx + this.kMassb * jny);
			var xy = -(this.kMassb * jnx + this.kMassc * jny);
			if(xx >= 0 && xy >= 0) {
				jnx = xx - ax;
				jny = xy - ay;
				this.c1.jnAcc = xx;
				this.c2.jnAcc = xy;
			} else {
				xx = -this.c1.nMass * jnx;
				if(xx >= 0 && this.Kb * xx + jny >= 0) {
					jnx = xx - ax;
					jny = -ay;
					this.c1.jnAcc = xx;
					this.c2.jnAcc = 0;
				} else {
					xy = -this.c2.nMass * jny;
					if(xy >= 0 && this.Kb * xy + jnx >= 0) {
						jnx = -ax;
						jny = xy - ay;
						this.c1.jnAcc = 0;
						this.c2.jnAcc = xy;
					} else if(jnx >= 0 && jny >= 0) {
						jnx = -ax;
						jny = -ay;
						this.c1.jnAcc = this.c2.jnAcc = 0;
					} else {
						jnx = 0;
						jny = 0;
					}
				}
			}
			j = jnx + jny;
			jx = this.nx * j;
			jy = this.ny * j;
			this.b2.velx += jx * this.b2.imass;
			this.b2.vely += jy * this.b2.imass;
			this.b1.velx -= jx * this.b1.imass;
			this.b1.vely -= jy * this.b1.imass;
			this.b2.angvel += (this.rn1b * jnx + this.rn2b * jny) * this.b2.iinertia;
			this.b1.angvel -= (this.rn1a * jnx + this.rn2a * jny) * this.b1.iinertia;
		} else {
			if(this.radius != 0.0) {
				var dw = this.b2.angvel - this.b1.angvel;
				j = dw * this.rMass;
				jMax = this.rfric * this.c1.jnAcc;
				jOld = this.jrAcc;
				this.jrAcc -= j;
				if(this.jrAcc > jMax) this.jrAcc = jMax; else if(this.jrAcc < -jMax) this.jrAcc = -jMax;
				j = this.jrAcc - jOld;
				this.b2.angvel += j * this.b2.iinertia;
				this.b1.angvel -= j * this.b1.iinertia;
			}
			v1x = this.k1x + this.b2.velx - this.c1.r2y * this.b2.angvel - (this.b1.velx - this.c1.r1y * this.b1.angvel);
			v1y = this.k1y + this.b2.vely + this.c1.r2x * this.b2.angvel - (this.b1.vely + this.c1.r1x * this.b1.angvel);
			j = (this.c1.bounce + (this.nx * v1x + this.ny * v1y) + this.surfacey) * this.c1.nMass;
			jOld = this.c1.jnAcc;
			cjAcc = jOld - j;
			if(cjAcc < 0.0) cjAcc = 0.0;
			j = cjAcc - jOld;
			this.c1.jnAcc = cjAcc;
			jx = this.nx * j;
			jy = this.ny * j;
			this.b2.velx += jx * this.b2.imass;
			this.b2.vely += jy * this.b2.imass;
			this.b1.velx -= jx * this.b1.imass;
			this.b1.vely -= jy * this.b1.imass;
			this.b2.angvel += this.rn1b * j * this.b2.iinertia;
			this.b1.angvel -= this.rn1a * j * this.b1.iinertia;
		}
	}
	,applyImpulsePos: function() {
		if(this.ptype == 2) {
			var c = this.c1;
			var dx = 0.0;
			var dy = 0.0;
			var r2x = 0.0;
			var r2y = 0.0;
			r2x = this.b2.axisy * c.lr2x - this.b2.axisx * c.lr2y;
			r2y = c.lr2x * this.b2.axisx + c.lr2y * this.b2.axisy;
			var t = 1.0;
			r2x += this.b2.posx * t;
			r2y += this.b2.posy * t;
			var r1x = 0.0;
			var r1y = 0.0;
			r1x = this.b1.axisy * c.lr1x - this.b1.axisx * c.lr1y;
			r1y = c.lr1x * this.b1.axisx + c.lr1y * this.b1.axisy;
			var t1 = 1.0;
			r1x += this.b1.posx * t1;
			r1y += this.b1.posy * t1;
			var dx1 = 0.0;
			var dy1 = 0.0;
			dx1 = r2x - r1x;
			dy1 = r2y - r1y;
			var dl = zpp_$nape_util_ZPP_$Math.sqrt(dx1 * dx1 + dy1 * dy1);
			var r = this.radius - nape_Config.collisionSlop;
			var err = dl - r;
			if(dx1 * this.nx + dy1 * this.ny < 0) {
				dx1 = -dx1;
				dy1 = -dy1;
				err -= this.radius;
			}
			if(err < 0) {
				if(dl < nape_Config.epsilon) {
					if(this.b1.smass != 0.0) this.b1.posx += nape_Config.epsilon * 10; else this.b2.posx += nape_Config.epsilon * 10;
				} else {
					var t2 = 1.0 / dl;
					dx1 *= t2;
					dy1 *= t2;
					var px = 0.5 * (r1x + r2x);
					var py = 0.5 * (r1y + r2y);
					var pen = dl - r;
					r1x = px - this.b1.posx;
					r1y = py - this.b1.posy;
					r2x = px - this.b2.posx;
					r2y = py - this.b2.posy;
					var rn1 = dy1 * r1x - dx1 * r1y;
					var rn2 = dy1 * r2x - dx1 * r2y;
					var K = this.b2.smass + rn2 * rn2 * this.b2.sinertia + this.b1.smass + rn1 * rn1 * this.b1.sinertia;
					if(K != 0) {
						var jn = -this.biasCoef * pen / K;
						var Jx = 0.0;
						var Jy = 0.0;
						var t3 = jn;
						Jx = dx1 * t3;
						Jy = dy1 * t3;
						var t4 = this.b1.imass;
						this.b1.posx -= Jx * t4;
						this.b1.posy -= Jy * t4;
						this.b1.delta_rot(-rn1 * this.b1.iinertia * jn);
						var t5 = this.b2.imass;
						this.b2.posx += Jx * t5;
						this.b2.posy += Jy * t5;
						this.b2.delta_rot(rn2 * this.b2.iinertia * jn);
					}
				}
			}
		} else {
			var gnormx = 0.0;
			var gnormy = 0.0;
			var gproj;
			var clip1x = 0.0;
			var clip1y = 0.0;
			var clip2x = 0;
			var clip2y = 0;
			if(this.ptype == 0) {
				gnormx = this.b1.axisy * this.lnormx - this.b1.axisx * this.lnormy;
				gnormy = this.lnormx * this.b1.axisx + this.lnormy * this.b1.axisy;
				gproj = this.lproj + (gnormx * this.b1.posx + gnormy * this.b1.posy);
				clip1x = this.b2.axisy * this.c1.lr1x - this.b2.axisx * this.c1.lr1y;
				clip1y = this.c1.lr1x * this.b2.axisx + this.c1.lr1y * this.b2.axisy;
				var t6 = 1.0;
				clip1x += this.b2.posx * t6;
				clip1y += this.b2.posy * t6;
				if(this.hpc2) {
					clip2x = this.b2.axisy * this.c2.lr1x - this.b2.axisx * this.c2.lr1y;
					clip2y = this.c2.lr1x * this.b2.axisx + this.c2.lr1y * this.b2.axisy;
					var t7 = 1.0;
					clip2x += this.b2.posx * t7;
					clip2y += this.b2.posy * t7;
				}
			} else {
				gnormx = this.b2.axisy * this.lnormx - this.b2.axisx * this.lnormy;
				gnormy = this.lnormx * this.b2.axisx + this.lnormy * this.b2.axisy;
				gproj = this.lproj + (gnormx * this.b2.posx + gnormy * this.b2.posy);
				clip1x = this.b1.axisy * this.c1.lr1x - this.b1.axisx * this.c1.lr1y;
				clip1y = this.c1.lr1x * this.b1.axisx + this.c1.lr1y * this.b1.axisy;
				var t8 = 1.0;
				clip1x += this.b1.posx * t8;
				clip1y += this.b1.posy * t8;
				if(this.hpc2) {
					clip2x = this.b1.axisy * this.c2.lr1x - this.b1.axisx * this.c2.lr1y;
					clip2y = this.c2.lr1x * this.b1.axisx + this.c2.lr1y * this.b1.axisy;
					var t9 = 1.0;
					clip2x += this.b1.posx * t9;
					clip2y += this.b1.posy * t9;
				}
			}
			var err1 = clip1x * gnormx + clip1y * gnormy - gproj - this.radius;
			err1 += nape_Config.collisionSlop;
			var err2 = 0.0;
			if(this.hpc2) {
				err2 = clip2x * gnormx + clip2y * gnormy - gproj - this.radius;
				err2 += nape_Config.collisionSlop;
			}
			if(err1 < 0 || err2 < 0) {
				if(this.rev) {
					gnormx = -gnormx;
					gnormy = -gnormy;
				}
				var c1r1x = 0.0;
				var c1r1y = 0.0;
				c1r1x = clip1x - this.b1.posx;
				c1r1y = clip1y - this.b1.posy;
				var c1r2x = 0.0;
				var c1r2y = 0.0;
				c1r2x = clip1x - this.b2.posx;
				c1r2y = clip1y - this.b2.posy;
				var c2r1x = 0;
				var c2r1y = 0;
				var c2r2x = 0;
				var c2r2y = 0;
				if(this.hpc2) {
					c2r1x = clip2x - this.b1.posx;
					c2r1y = clip2y - this.b1.posy;
					c2r2x = clip2x - this.b2.posx;
					c2r2y = clip2y - this.b2.posy;
					var rn1a = gnormy * c1r1x - gnormx * c1r1y;
					var rn1b = gnormy * c1r2x - gnormx * c1r2y;
					var rn2a = gnormy * c2r1x - gnormx * c2r1y;
					var rn2b = gnormy * c2r2x - gnormx * c2r2y;
					var mass_sum = this.b1.smass + this.b2.smass;
					this.kMassa = mass_sum + this.b1.sinertia * rn1a * rn1a + this.b2.sinertia * rn1b * rn1b;
					this.kMassb = mass_sum + this.b1.sinertia * rn1a * rn2a + this.b2.sinertia * rn1b * rn2b;
					this.kMassc = mass_sum + this.b1.sinertia * rn2a * rn2a + this.b2.sinertia * rn2b * rn2b;
					var Ka = 0.0;
					var Kb = 0.0;
					var Kc = 0.0;
					Ka = this.kMassa;
					Kb = this.kMassb;
					Kc = this.kMassc;
					var bx = err1 * this.biasCoef;
					var by = err2 * this.biasCoef;
					do {
						var xx = 0.0;
						var xy = 0.0;
						xx = bx;
						xy = by;
						xx = -xx;
						xy = -xy;
						var det = this.kMassa * this.kMassc - this.kMassb * this.kMassb;
						if(det != det) xx = xy = 0; else if(det == 0) {
							if(this.kMassa != 0) xx /= this.kMassa; else xx = 0;
							if(this.kMassc != 0) xy /= this.kMassc; else xy = 0;
						} else {
							det = 1 / det;
							var t10 = det * (this.kMassc * xx - this.kMassb * xy);
							xy = det * (this.kMassa * xy - this.kMassb * xx);
							xx = t10;
						}
						if(xx >= 0 && xy >= 0) {
							var t11 = (xx + xy) * this.b1.imass;
							this.b1.posx -= gnormx * t11;
							this.b1.posy -= gnormy * t11;
							this.b1.delta_rot(-this.b1.iinertia * (rn1a * xx + rn2a * xy));
							var t12 = (xx + xy) * this.b2.imass;
							this.b2.posx += gnormx * t12;
							this.b2.posy += gnormy * t12;
							this.b2.delta_rot(this.b2.iinertia * (rn1b * xx + rn2b * xy));
							break;
						}
						xx = -bx / Ka;
						xy = 0;
						var vn2 = Kb * xx + by;
						if(xx >= 0 && vn2 >= 0) {
							var t13 = (xx + xy) * this.b1.imass;
							this.b1.posx -= gnormx * t13;
							this.b1.posy -= gnormy * t13;
							this.b1.delta_rot(-this.b1.iinertia * (rn1a * xx + rn2a * xy));
							var t14 = (xx + xy) * this.b2.imass;
							this.b2.posx += gnormx * t14;
							this.b2.posy += gnormy * t14;
							this.b2.delta_rot(this.b2.iinertia * (rn1b * xx + rn2b * xy));
							break;
						}
						xx = 0;
						xy = -by / Kc;
						var vn1 = Kb * xy + bx;
						if(xy >= 0 && vn1 >= 0) {
							var t15 = (xx + xy) * this.b1.imass;
							this.b1.posx -= gnormx * t15;
							this.b1.posy -= gnormy * t15;
							this.b1.delta_rot(-this.b1.iinertia * (rn1a * xx + rn2a * xy));
							var t16 = (xx + xy) * this.b2.imass;
							this.b2.posx += gnormx * t16;
							this.b2.posy += gnormy * t16;
							this.b2.delta_rot(this.b2.iinertia * (rn1b * xx + rn2b * xy));
							break;
						}
					} while(false);
				} else {
					var rn11 = gnormy * c1r1x - gnormx * c1r1y;
					var rn21 = gnormy * c1r2x - gnormx * c1r2y;
					var K1 = this.b2.smass + rn21 * rn21 * this.b2.sinertia + this.b1.smass + rn11 * rn11 * this.b1.sinertia;
					if(K1 != 0) {
						var jn1 = -this.biasCoef * err1 / K1;
						var Jx1 = 0.0;
						var Jy1 = 0.0;
						var t17 = jn1;
						Jx1 = gnormx * t17;
						Jy1 = gnormy * t17;
						var t18 = this.b1.imass;
						this.b1.posx -= Jx1 * t18;
						this.b1.posy -= Jy1 * t18;
						this.b1.delta_rot(-rn11 * this.b1.iinertia * jn1);
						var t19 = this.b2.imass;
						this.b2.posx += Jx1 * t19;
						this.b2.posy += Jy1 * t19;
						this.b2.delta_rot(rn21 * this.b2.iinertia * jn1);
					}
				}
			}
		}
	}
	,__class__: zpp_$nape_dynamics_ZPP_$ColArbiter
});
var zpp_$nape_dynamics_ZPP_$Contact = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this._inuse = false;
	this.next = null;
	this.elasticity = 0.0;
	this.dist = 0.0;
	this.fresh = false;
	this.hash = 0;
	this.stamp = 0;
	this.posOnly = false;
	this.active = false;
	this.inner = null;
	this.arbiter = null;
	this.py = 0.0;
	this.px = 0.0;
	this.outer = null;
	this.inner = new zpp_$nape_dynamics_ZPP_$IContact();
};
$hxClasses["zpp_nape.dynamics.ZPP_Contact"] = zpp_$nape_dynamics_ZPP_$Contact;
zpp_$nape_dynamics_ZPP_$Contact.__name__ = ["zpp_nape","dynamics","ZPP_Contact"];
zpp_$nape_dynamics_ZPP_$Contact.prototype = {
	wrapper: function() {
		if(this.outer == null) {
			zpp_$nape_dynamics_ZPP_$Contact.internal = true;
			this.outer = new nape_dynamics_Contact();
			zpp_$nape_dynamics_ZPP_$Contact.internal = false;
			this.outer.zpp_inner = this;
		}
		return this.outer;
	}
	,free: function() {
		this.arbiter = null;
	}
	,alloc: function() {
	}
	,elem: function() {
		return this;
	}
	,begin: function() {
		return this.next;
	}
	,inlined_add: function(o) {
		var temp;
		o._inuse = true;
		temp = o;
		temp.next = this.begin();
		this.next = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.next = ret.next;
		ret.elem()._inuse = false;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.next = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		old.elem()._inuse = false;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,front: function() {
		return this.begin().elem();
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_dynamics_ZPP_$Contact
};
var zpp_$nape_dynamics_ZPP_$IContact = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this._inuse = false;
	this.next = null;
	this.lr2y = 0.0;
	this.lr2x = 0.0;
	this.lr1y = 0.0;
	this.lr1x = 0.0;
	this.jtAcc = 0.0;
	this.jnAcc = 0.0;
	this.friction = 0.0;
	this.bounce = 0.0;
	this.tMass = 0.0;
	this.nMass = 0.0;
	this.r2y = 0.0;
	this.r2x = 0.0;
	this.r1y = 0.0;
	this.r1x = 0.0;
};
$hxClasses["zpp_nape.dynamics.ZPP_IContact"] = zpp_$nape_dynamics_ZPP_$IContact;
zpp_$nape_dynamics_ZPP_$IContact.__name__ = ["zpp_nape","dynamics","ZPP_IContact"];
zpp_$nape_dynamics_ZPP_$IContact.prototype = {
	elem: function() {
		return this;
	}
	,begin: function() {
		return this.next;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		o._inuse = true;
		temp = o;
		temp.next = this.begin();
		this.next = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.next = ret.next;
		ret.elem()._inuse = false;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.next = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		old.elem()._inuse = false;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,__class__: zpp_$nape_dynamics_ZPP_$IContact
};
var zpp_$nape_dynamics_ZPP_$InteractionFilter = function() {
	this.fluidMask = 0;
	this.fluidGroup = 0;
	this.sensorMask = 0;
	this.sensorGroup = 0;
	this.collisionMask = 0;
	this.collisionGroup = 0;
	this.shapes = null;
	this.outer = null;
	this.next = null;
	this.feature_cons();
	this.collisionGroup = this.sensorGroup = this.fluidGroup = 1;
	this.collisionMask = this.sensorMask = this.fluidMask = -1;
};
$hxClasses["zpp_nape.dynamics.ZPP_InteractionFilter"] = zpp_$nape_dynamics_ZPP_$InteractionFilter;
zpp_$nape_dynamics_ZPP_$InteractionFilter.__name__ = ["zpp_nape","dynamics","ZPP_InteractionFilter"];
zpp_$nape_dynamics_ZPP_$InteractionFilter.prototype = {
	wrapper: function() {
		if(this.outer == null) {
			this.outer = new nape_dynamics_InteractionFilter();
			var o = this.outer.zpp_inner;
			o.free();
			o.next = zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool;
			zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool = o;
			this.outer.zpp_inner = this;
		}
		return this.outer;
	}
	,free: function() {
		this.outer = null;
	}
	,alloc: function() {
	}
	,feature_cons: function() {
		this.shapes = new zpp_$nape_util_ZNPList_$ZPP_$Shape();
	}
	,addShape: function(shape) {
		this.shapes.add(shape);
	}
	,remShape: function(shape) {
		this.shapes.remove(shape);
	}
	,shouldCollide: function(x) {
		return (this.collisionMask & x.collisionGroup) != 0 && (x.collisionMask & this.collisionGroup) != 0;
	}
	,shouldSense: function(x) {
		return (this.sensorMask & x.sensorGroup) != 0 && (x.sensorMask & this.sensorGroup) != 0;
	}
	,shouldFlow: function(x) {
		return (this.fluidMask & x.fluidGroup) != 0 && (x.fluidMask & this.fluidGroup) != 0;
	}
	,invalidate: function() {
		var cx_ite = this.shapes.begin();
		while(cx_ite != null) {
			var s = cx_ite.elem();
			s.invalidate_filter();
			cx_ite = cx_ite.next;
		}
	}
	,__class__: zpp_$nape_dynamics_ZPP_$InteractionFilter
};
var zpp_$nape_dynamics_ZPP_$InteractionGroup = function() {
	this.depth = 0;
	this.interactors = null;
	this.group = null;
	this.ignore = false;
	this.outer = null;
};
$hxClasses["zpp_nape.dynamics.ZPP_InteractionGroup"] = zpp_$nape_dynamics_ZPP_$InteractionGroup;
zpp_$nape_dynamics_ZPP_$InteractionGroup.__name__ = ["zpp_nape","dynamics","ZPP_InteractionGroup"];
zpp_$nape_dynamics_ZPP_$InteractionGroup.prototype = {
	addInteractor: function(intx) {
		this.interactors.add(intx);
	}
	,remInteractor: function(intx,flag) {
		if(flag == null) flag = -1;
		this.interactors.remove(intx);
	}
	,__class__: zpp_$nape_dynamics_ZPP_$InteractionGroup
};
var zpp_$nape_geom_ZPP_$AABB = function() {
	this.wrap_max = null;
	this.maxy = 0.0;
	this.maxx = 0.0;
	this.wrap_min = null;
	this.miny = 0.0;
	this.minx = 0.0;
	this.next = null;
	this.outer = null;
	this._immutable = false;
	this._validate = null;
	this._invalidate = null;
};
$hxClasses["zpp_nape.geom.ZPP_AABB"] = zpp_$nape_geom_ZPP_$AABB;
zpp_$nape_geom_ZPP_$AABB.__name__ = ["zpp_nape","geom","ZPP_AABB"];
zpp_$nape_geom_ZPP_$AABB.get = function(minx,miny,maxx,maxy) {
	var ret;
	if(zpp_$nape_geom_ZPP_$AABB.zpp_pool == null) ret = new zpp_$nape_geom_ZPP_$AABB(); else {
		ret = zpp_$nape_geom_ZPP_$AABB.zpp_pool;
		zpp_$nape_geom_ZPP_$AABB.zpp_pool = ret.next;
		ret.next = null;
	}
	ret.alloc();
	ret.minx = minx;
	ret.miny = miny;
	ret.maxx = maxx;
	ret.maxy = maxy;
	return ret;
};
zpp_$nape_geom_ZPP_$AABB.prototype = {
	validate: function() {
		if(this._validate != null) this._validate();
	}
	,alloc: function() {
	}
	,free: function() {
		if(this.outer != null) {
			this.outer.zpp_inner = null;
			this.outer = null;
		}
		this.wrap_min = this.wrap_max = null;
		this._invalidate = null;
		this._validate = null;
	}
	,width: function() {
		return this.maxx - this.minx;
	}
	,height: function() {
		return this.maxy - this.miny;
	}
	,perimeter: function() {
		return (this.width() + this.height()) * 2;
	}
	,intersectY: function(x) {
		return !(x.miny > this.maxy || this.miny > x.maxy);
	}
	,intersect: function(x) {
		return x.miny <= this.maxy && this.miny <= x.maxy && x.minx <= this.maxx && this.minx <= x.maxx;
	}
	,combine: function(x) {
		if(x.minx < this.minx) this.minx = x.minx;
		if(x.maxx > this.maxx) this.maxx = x.maxx;
		if(x.miny < this.miny) this.miny = x.miny;
		if(x.maxy > this.maxy) this.maxy = x.maxy;
	}
	,contains: function(x) {
		return x.minx >= this.minx && x.miny >= this.miny && x.maxx <= this.maxx && x.maxy <= this.maxy;
	}
	,setCombine: function(a,b) {
		if(a.minx < b.minx) this.minx = a.minx; else this.minx = b.minx;
		if(a.miny < b.miny) this.miny = a.miny; else this.miny = b.miny;
		if(a.maxx > b.maxx) this.maxx = a.maxx; else this.maxx = b.maxx;
		if(a.maxy > b.maxy) this.maxy = a.maxy; else this.maxy = b.maxy;
	}
	,setExpand: function(a,fatten) {
		this.minx = a.minx - fatten;
		this.miny = a.miny - fatten;
		this.maxx = a.maxx + fatten;
		this.maxy = a.maxy + fatten;
	}
	,toString: function() {
		return "{ x: " + this.minx + " y: " + this.miny + " w: " + this.width() + " h: " + this.height() + " }";
	}
	,__class__: zpp_$nape_geom_ZPP_$AABB
};
var zpp_$nape_util_ZNPList_$ZPP_$Vec2 = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_Vec2"] = zpp_$nape_util_ZNPList_$ZPP_$Vec2;
zpp_$nape_util_ZNPList_$ZPP_$Vec2.__name__ = ["zpp_nape","util","ZNPList_ZPP_Vec2"];
zpp_$nape_util_ZNPList_$ZPP_$Vec2.prototype = {
	begin: function() {
		return this.head;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Vec2(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,insert: function(cur,o) {
		return this.inlined_insert(cur,o);
	}
	,inlined_insert: function(cur,o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Vec2(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		if(cur == null) {
			temp.next = this.begin();
			this.head = temp;
		} else {
			temp.next = cur.next;
			cur.next = temp;
		}
		this.pushmod = this.modified = true;
		this.length++;
		return temp;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,pop_unsafe: function() {
		return this.inlined_pop_unsafe();
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,erase: function(pre) {
		return this.inlined_erase(pre);
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,clear: function() {
		this.inlined_clear();
	}
	,inlined_clear: function() {
		if(true) {
			while(!this.empty()) this.inlined_pop();
			this.pushmod = true;
		}
	}
	,empty: function() {
		return this.begin() == null;
	}
	,front: function() {
		return this.begin().elem();
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$Vec2
};
var zpp_$nape_geom_ZPP_$Collide = function() { };
$hxClasses["zpp_nape.geom.ZPP_Collide"] = zpp_$nape_geom_ZPP_$Collide;
zpp_$nape_geom_ZPP_$Collide.__name__ = ["zpp_nape","geom","ZPP_Collide"];
zpp_$nape_geom_ZPP_$Collide.contactCollide = function(s1,s2,arb,rev) {
	if(s2.isPolygon()) {
		if(s1.isPolygon()) {
			var cont = true;
			var max = -1e100;
			var maxmin = -1e100;
			var maxi = -1;
			var axis1 = null;
			var axis2 = null;
			var cx_ite = s1.polygon.edges.begin();
			while(cx_ite != null) {
				var ax = cx_ite.elem();
				var min = 1e100;
				var cx_ite1 = s2.polygon.gverts.begin();
				while(cx_ite1 != null) {
					var v = cx_ite1.elem();
					var k = ax.gnormx * v.x + ax.gnormy * v.y;
					if(k < min) min = k;
					if(min - ax.gprojection <= max) break;
					cx_ite1 = cx_ite1.next;
				}
				min -= ax.gprojection;
				if(min >= 0) {
					cont = false;
					break;
				}
				if(min > max) {
					max = min;
					axis1 = ax;
					maxi = 1;
				}
				cx_ite = cx_ite.next;
			}
			if(cont) {
				var cx_ite2 = s2.polygon.edges.begin();
				while(cx_ite2 != null) {
					var ax1 = cx_ite2.elem();
					var min1 = 1e100;
					var cx_ite3 = s1.polygon.gverts.begin();
					while(cx_ite3 != null) {
						var v1 = cx_ite3.elem();
						var k1 = ax1.gnormx * v1.x + ax1.gnormy * v1.y;
						if(k1 < min1) min1 = k1;
						if(min1 - ax1.gprojection <= max) break;
						cx_ite3 = cx_ite3.next;
					}
					min1 -= ax1.gprojection;
					if(min1 >= 0) {
						cont = false;
						break;
					}
					if(min1 > max) {
						max = min1;
						axis2 = ax1;
						maxi = 2;
					}
					cx_ite2 = cx_ite2.next;
				}
				if(!cont) return false; else {
					var q1;
					var q2;
					var ax2;
					var scale;
					if(maxi == 1) {
						q1 = s1.polygon;
						q2 = s2.polygon;
						ax2 = axis1;
						scale = 1.0;
					} else {
						q1 = s2.polygon;
						q2 = s1.polygon;
						ax2 = axis2;
						scale = -1.0;
					}
					var ay = null;
					var min2 = 1e100;
					var cx_ite4 = q2.edges.begin();
					while(cx_ite4 != null) {
						var axis = cx_ite4.elem();
						var k2 = ax2.gnormx * axis.gnormx + ax2.gnormy * axis.gnormy;
						if(k2 < min2) {
							min2 = k2;
							ay = axis;
						}
						cx_ite4 = cx_ite4.next;
					}
					var c0x = 0.0;
					var c0y = 0.0;
					c0x = ay.gp0.x;
					c0y = ay.gp0.y;
					var c1x = 0.0;
					var c1y = 0.0;
					c1x = ay.gp1.x;
					c1y = ay.gp1.y;
					var dvx = 0.0;
					var dvy = 0.0;
					dvx = c1x - c0x;
					dvy = c1y - c0y;
					var d0 = ax2.gnormy * c0x - ax2.gnormx * c0y;
					var d1 = ax2.gnormy * c1x - ax2.gnormx * c1y;
					var den = 1 / (d1 - d0);
					var t = (-ax2.tp1 - d0) * den;
					if(t > nape_Config.epsilon) {
						var t2 = t;
						c0x += dvx * t2;
						c0y += dvy * t2;
					}
					var t1 = (-ax2.tp0 - d1) * den;
					if(t1 < -nape_Config.epsilon) {
						var t3 = t1;
						c1x += dvx * t3;
						c1y += dvy * t3;
					}
					var nx = 0.0;
					var ny = 0.0;
					var t4 = scale;
					nx = ax2.gnormx * t4;
					ny = ax2.gnormy * t4;
					arb.lnormx = ax2.lnormx;
					arb.lnormy = ax2.lnormy;
					arb.lproj = ax2.lprojection;
					arb.radius = 0;
					arb.rev = rev != (scale == -1);
					if(arb.rev) arb.ptype = 1; else arb.ptype = 0;
					var c0d = c0x * ax2.gnormx + c0y * ax2.gnormy - ax2.gprojection;
					var c1d = c1x * ax2.gnormx + c1y * ax2.gnormy - ax2.gprojection;
					if(c0d > 0 && c1d > 0) return false; else {
						if(rev) {
							nx = -nx;
							ny = -ny;
						}
						var con = arb.injectContact(c0x - ax2.gnormx * c0d * 0.5,c0y - ax2.gnormy * c0d * 0.5,nx,ny,c0d,arb.rev?1:0,c0d > 0);
						var t5 = 1.0;
						c0x -= q2.body.posx * t5;
						c0y -= q2.body.posy * t5;
						con.inner.lr1x = c0x * q2.body.axisy + c0y * q2.body.axisx;
						con.inner.lr1y = c0y * q2.body.axisy - c0x * q2.body.axisx;
						con = arb.injectContact(c1x - ax2.gnormx * c1d * 0.5,c1y - ax2.gnormy * c1d * 0.5,nx,ny,c1d,arb.rev?0:1,c1d > 0);
						var t6 = 1.0;
						c1x -= q2.body.posx * t6;
						c1y -= q2.body.posy * t6;
						con.inner.lr1x = c1x * q2.body.axisy + c1y * q2.body.axisx;
						con.inner.lr1y = c1y * q2.body.axisy - c1x * q2.body.axisx;
						if(maxi == 1) {
							arb.__ref_edge1 = ax2;
							arb.__ref_edge2 = ay;
						} else {
							arb.__ref_edge2 = ax2;
							arb.__ref_edge1 = ay;
						}
						return true;
					}
				}
			} else return false;
		} else {
			var max1 = -1e100;
			var minmax = -1e100;
			var cont1 = true;
			var a0 = null;
			var vi = null;
			var vite = s2.polygon.gverts.begin();
			var cx_ite5 = s2.polygon.edges.begin();
			while(cx_ite5 != null) {
				var a = cx_ite5.elem();
				var dist = a.gnormx * s1.circle.worldCOMx + a.gnormy * s1.circle.worldCOMy - a.gprojection - s1.circle.radius;
				if(dist > 0) {
					cont1 = false;
					break;
				}
				if(dist > max1) {
					max1 = dist;
					a0 = a;
					vi = vite;
				}
				vite = vite.next;
				cx_ite5 = cx_ite5.next;
			}
			if(cont1) {
				var v0 = vi.elem();
				var v11;
				if(vi.next == null) v11 = s2.polygon.gverts.front(); else v11 = vi.next.elem();
				var dt = s1.circle.worldCOMy * a0.gnormx - s1.circle.worldCOMx * a0.gnormy;
				if(dt <= v0.y * a0.gnormx - v0.x * a0.gnormy) {
					var co;
					var minDist = s1.circle.radius + 0;
					var px = 0.0;
					var py = 0.0;
					px = v0.x - s1.circle.worldCOMx;
					py = v0.y - s1.circle.worldCOMy;
					var distSqr = px * px + py * py;
					if(distSqr > minDist * minDist) co = null; else if(distSqr < nape_Config.epsilon * nape_Config.epsilon) co = arb.injectContact(s1.circle.worldCOMx,s1.circle.worldCOMy,1,0,-minDist,0); else {
						var invDist = zpp_$nape_util_ZPP_$Math.invsqrt(distSqr);
						var dist1;
						if(invDist < nape_Config.epsilon) dist1 = 1e100; else dist1 = 1.0 / invDist;
						var df = 0.5 + (s1.circle.radius - 0.5 * minDist) * invDist;
						if(rev) co = arb.injectContact(s1.circle.worldCOMx + px * df,s1.circle.worldCOMy + py * df,-px * invDist,-py * invDist,dist1 - minDist,0); else co = arb.injectContact(s1.circle.worldCOMx + px * df,s1.circle.worldCOMy + py * df,px * invDist,py * invDist,dist1 - minDist,0);
					}
					if(co != null) {
						var con1 = co.inner;
						arb.ptype = 2;
						var vx = 0.0;
						var vy = 0.0;
						vx = v0.x - s2.polygon.body.posx;
						vy = v0.y - s2.polygon.body.posy;
						arb.__ref_edge1 = a0;
						arb.__ref_vertex = -1;
						if(rev) {
							con1.lr1x = vx * s2.polygon.body.axisy + vy * s2.polygon.body.axisx;
							con1.lr1y = vy * s2.polygon.body.axisy - vx * s2.polygon.body.axisx;
							con1.lr2x = s1.circle.localCOMx;
							con1.lr2y = s1.circle.localCOMy;
						} else {
							con1.lr2x = vx * s2.polygon.body.axisy + vy * s2.polygon.body.axisx;
							con1.lr2y = vy * s2.polygon.body.axisy - vx * s2.polygon.body.axisx;
							con1.lr1x = s1.circle.localCOMx;
							con1.lr1y = s1.circle.localCOMy;
						}
						arb.radius = s1.circle.radius;
					}
					return co != null;
				} else if(dt >= v11.y * a0.gnormx - v11.x * a0.gnormy) {
					var co1;
					var minDist1 = s1.circle.radius + 0;
					var px1 = 0.0;
					var py1 = 0.0;
					px1 = v11.x - s1.circle.worldCOMx;
					py1 = v11.y - s1.circle.worldCOMy;
					var distSqr1 = px1 * px1 + py1 * py1;
					if(distSqr1 > minDist1 * minDist1) co1 = null; else if(distSqr1 < nape_Config.epsilon * nape_Config.epsilon) co1 = arb.injectContact(s1.circle.worldCOMx,s1.circle.worldCOMy,1,0,-minDist1,0); else {
						var invDist1 = zpp_$nape_util_ZPP_$Math.invsqrt(distSqr1);
						var dist2;
						if(invDist1 < nape_Config.epsilon) dist2 = 1e100; else dist2 = 1.0 / invDist1;
						var df1 = 0.5 + (s1.circle.radius - 0.5 * minDist1) * invDist1;
						if(rev) co1 = arb.injectContact(s1.circle.worldCOMx + px1 * df1,s1.circle.worldCOMy + py1 * df1,-px1 * invDist1,-py1 * invDist1,dist2 - minDist1,0); else co1 = arb.injectContact(s1.circle.worldCOMx + px1 * df1,s1.circle.worldCOMy + py1 * df1,px1 * invDist1,py1 * invDist1,dist2 - minDist1,0);
					}
					if(co1 != null) {
						var con2 = co1.inner;
						arb.ptype = 2;
						var vx1 = 0.0;
						var vy1 = 0.0;
						vx1 = v11.x - s2.polygon.body.posx;
						vy1 = v11.y - s2.polygon.body.posy;
						arb.__ref_edge1 = a0;
						arb.__ref_vertex = 1;
						if(rev) {
							con2.lr1x = vx1 * s2.polygon.body.axisy + vy1 * s2.polygon.body.axisx;
							con2.lr1y = vy1 * s2.polygon.body.axisy - vx1 * s2.polygon.body.axisx;
							con2.lr2x = s1.circle.localCOMx;
							con2.lr2y = s1.circle.localCOMy;
						} else {
							con2.lr2x = vx1 * s2.polygon.body.axisy + vy1 * s2.polygon.body.axisx;
							con2.lr2y = vy1 * s2.polygon.body.axisy - vx1 * s2.polygon.body.axisx;
							con2.lr1x = s1.circle.localCOMx;
							con2.lr1y = s1.circle.localCOMy;
						}
						arb.radius = s1.circle.radius;
					}
					return co1 != null;
				} else {
					var nx1 = 0.0;
					var ny1 = 0.0;
					var t7 = s1.circle.radius + max1 * 0.5;
					nx1 = a0.gnormx * t7;
					ny1 = a0.gnormy * t7;
					var px2 = 0.0;
					var py2 = 0.0;
					px2 = s1.circle.worldCOMx - nx1;
					py2 = s1.circle.worldCOMy - ny1;
					var con3;
					if(rev) con3 = arb.injectContact(px2,py2,a0.gnormx,a0.gnormy,max1,0); else con3 = arb.injectContact(px2,py2,-a0.gnormx,-a0.gnormy,max1,0);
					if(rev) arb.ptype = 0; else arb.ptype = 1;
					arb.lnormx = a0.lnormx;
					arb.lnormy = a0.lnormy;
					arb.rev = !rev;
					arb.lproj = a0.lprojection;
					arb.radius = s1.circle.radius;
					con3.inner.lr1x = s1.circle.localCOMx;
					con3.inner.lr1y = s1.circle.localCOMy;
					arb.__ref_edge1 = a0;
					arb.__ref_vertex = 0;
					return true;
				}
			} else return false;
		}
	} else {
		var co2;
		var minDist2 = s1.circle.radius + s2.circle.radius;
		var px3 = 0.0;
		var py3 = 0.0;
		px3 = s2.circle.worldCOMx - s1.circle.worldCOMx;
		py3 = s2.circle.worldCOMy - s1.circle.worldCOMy;
		var distSqr2 = px3 * px3 + py3 * py3;
		if(distSqr2 > minDist2 * minDist2) co2 = null; else if(distSqr2 < nape_Config.epsilon * nape_Config.epsilon) co2 = arb.injectContact(s1.circle.worldCOMx,s1.circle.worldCOMy,1,0,-minDist2,0); else {
			var invDist2 = zpp_$nape_util_ZPP_$Math.invsqrt(distSqr2);
			var dist3;
			if(invDist2 < nape_Config.epsilon) dist3 = 1e100; else dist3 = 1.0 / invDist2;
			var df2 = 0.5 + (s1.circle.radius - 0.5 * minDist2) * invDist2;
			if(rev) co2 = arb.injectContact(s1.circle.worldCOMx + px3 * df2,s1.circle.worldCOMy + py3 * df2,-px3 * invDist2,-py3 * invDist2,dist3 - minDist2,0); else co2 = arb.injectContact(s1.circle.worldCOMx + px3 * df2,s1.circle.worldCOMy + py3 * df2,px3 * invDist2,py3 * invDist2,dist3 - minDist2,0);
		}
		if(co2 != null) {
			var con4 = co2.inner;
			if(rev) {
				con4.lr1x = s2.circle.localCOMx;
				con4.lr1y = s2.circle.localCOMy;
				con4.lr2x = s1.circle.localCOMx;
				con4.lr2y = s1.circle.localCOMy;
			} else {
				con4.lr1x = s1.circle.localCOMx;
				con4.lr1y = s1.circle.localCOMy;
				con4.lr2x = s2.circle.localCOMx;
				con4.lr2y = s2.circle.localCOMy;
			}
			arb.radius = s1.circle.radius + s2.circle.radius;
			arb.ptype = 2;
			return true;
		} else return false;
	}
};
zpp_$nape_geom_ZPP_$Collide.testCollide_safe = function(s1,s2) {
	if(s2.isCircle()) {
		var t = s1;
		s1 = s2;
		s2 = t;
	}
	return zpp_$nape_geom_ZPP_$Collide.testCollide(s1,s2);
};
zpp_$nape_geom_ZPP_$Collide.testCollide = function(s1,s2) {
	if(s2.isPolygon()) if(s1.isPolygon()) {
		var cont = true;
		var cx_ite = s1.polygon.edges.begin();
		while(cx_ite != null) {
			var ax = cx_ite.elem();
			var min = 1e100;
			var cx_ite1 = s2.polygon.gverts.begin();
			while(cx_ite1 != null) {
				var v = cx_ite1.elem();
				var k = ax.gnormx * v.x + ax.gnormy * v.y;
				if(k < min) min = k;
				cx_ite1 = cx_ite1.next;
			}
			min -= ax.gprojection;
			if(min > 0) {
				cont = false;
				break;
			}
			cx_ite = cx_ite.next;
		}
		if(cont) {
			var cx_ite2 = s2.polygon.edges.begin();
			while(cx_ite2 != null) {
				var ax1 = cx_ite2.elem();
				var min1 = 1e100;
				var cx_ite3 = s1.polygon.gverts.begin();
				while(cx_ite3 != null) {
					var v1 = cx_ite3.elem();
					var k1 = ax1.gnormx * v1.x + ax1.gnormy * v1.y;
					if(k1 < min1) min1 = k1;
					cx_ite3 = cx_ite3.next;
				}
				min1 -= ax1.gprojection;
				if(min1 > 0) {
					cont = false;
					break;
				}
				cx_ite2 = cx_ite2.next;
			}
			return cont;
		} else return false;
	} else {
		var a0 = null;
		var vi = null;
		var cont1 = true;
		var max = -1e100;
		var vite = s2.polygon.gverts.begin();
		var cx_ite4 = s2.polygon.edges.begin();
		while(cx_ite4 != null) {
			var a = cx_ite4.elem();
			var dist = a.gnormx * s1.circle.worldCOMx + a.gnormy * s1.circle.worldCOMy - a.gprojection - s1.circle.radius;
			if(dist > 0) {
				cont1 = false;
				break;
			}
			if(dist > max) {
				max = dist;
				a0 = a;
				vi = vite;
			}
			vite = vite.next;
			cx_ite4 = cx_ite4.next;
		}
		if(cont1) {
			var v0 = vi.elem();
			var v11;
			if(vi.next == null) v11 = s2.polygon.gverts.front(); else v11 = vi.next.elem();
			var dt = s1.circle.worldCOMy * a0.gnormx - s1.circle.worldCOMx * a0.gnormy;
			if(dt <= v0.y * a0.gnormx - v0.x * a0.gnormy) {
				var minDist = s1.circle.radius + 0;
				var px = 0.0;
				var py = 0.0;
				px = v0.x - s1.circle.worldCOMx;
				py = v0.y - s1.circle.worldCOMy;
				var distSqr = px * px + py * py;
				return distSqr <= minDist * minDist;
			} else if(dt >= v11.y * a0.gnormx - v11.x * a0.gnormy) {
				var minDist1 = s1.circle.radius + 0;
				var px1 = 0.0;
				var py1 = 0.0;
				px1 = v11.x - s1.circle.worldCOMx;
				py1 = v11.y - s1.circle.worldCOMy;
				var distSqr1 = px1 * px1 + py1 * py1;
				return distSqr1 <= minDist1 * minDist1;
			} else return true;
		} else return false;
	} else {
		var minDist2 = s1.circle.radius + s2.circle.radius;
		var px2 = 0.0;
		var py2 = 0.0;
		px2 = s2.circle.worldCOMx - s1.circle.worldCOMx;
		py2 = s2.circle.worldCOMy - s1.circle.worldCOMy;
		var distSqr2 = px2 * px2 + py2 * py2;
		return distSqr2 <= minDist2 * minDist2;
	}
};
zpp_$nape_geom_ZPP_$Collide.flowCollide = function(s1,s2,arb) {
	if(s2.isPolygon()) if(s1.isPolygon()) {
		var out1 = [];
		var out2 = [];
		var cont = true;
		var total = true;
		var cx_ite = s1.polygon.edges.begin();
		while(cx_ite != null) {
			var ax = cx_ite.elem();
			var min = 1e100;
			var ind = 0;
			var cx_ite1 = s2.polygon.gverts.begin();
			while(cx_ite1 != null) {
				var v = cx_ite1.elem();
				var k = ax.gnormx * v.x + ax.gnormy * v.y;
				if(k < min) min = k;
				if(k >= ax.gprojection + nape_Config.epsilon) {
					out2[ind] = true;
					total = false;
				}
				ind++;
				cx_ite1 = cx_ite1.next;
			}
			min -= ax.gprojection;
			if(min > 0) {
				cont = false;
				break;
			}
			cx_ite = cx_ite.next;
		}
		if(total) {
			s2.polygon.validate_worldCOM();
			arb.inject(s2.polygon.area,s2.polygon.worldCOMx,s2.polygon.worldCOMy);
			return true;
		} else if(cont) {
			total = true;
			var cx_ite2 = s2.polygon.edges.begin();
			while(cx_ite2 != null) {
				var ax1 = cx_ite2.elem();
				var min1 = 1e100;
				var ind1 = 0;
				var cx_ite3 = s1.polygon.gverts.begin();
				while(cx_ite3 != null) {
					var v1 = cx_ite3.elem();
					var k1 = ax1.gnormx * v1.x + ax1.gnormy * v1.y;
					if(k1 < min1) min1 = k1;
					if(k1 >= ax1.gprojection + nape_Config.epsilon) {
						out1[ind1] = true;
						total = false;
					}
					ind1++;
					cx_ite3 = cx_ite3.next;
				}
				min1 -= ax1.gprojection;
				if(min1 > 0) {
					cont = false;
					break;
				}
				cx_ite2 = cx_ite2.next;
			}
			if(total) {
				s1.polygon.validate_worldCOM();
				arb.inject(s1.polygon.area,s1.polygon.worldCOMx,s1.polygon.worldCOMy);
				return true;
			} else if(cont) {
				while(!zpp_$nape_geom_ZPP_$Collide.flowpoly.empty()) {
					var p = zpp_$nape_geom_ZPP_$Collide.flowpoly.pop_unsafe();
					if(!p._inuse) {
						var o = p;
						o.free();
						o.next = zpp_$nape_geom_ZPP_$Vec2.zpp_pool;
						zpp_$nape_geom_ZPP_$Vec2.zpp_pool = o;
					}
				}
				var fst_vert = null;
				var poly1 = false;
				var ite1 = s1.polygon.gverts.begin();
				var ind11 = 0;
				var ite2 = s2.polygon.gverts.begin();
				var ind2 = 0;
				var _g1 = 0;
				var _g = s2.polygon.edgeCnt;
				while(_g1 < _g) {
					var i = _g1++;
					if(!out2[i]) {
						ind2 = i;
						break;
					} else ite2 = ite2.next;
				}
				if(ite2 == null) {
					ite2 = s2.polygon.gverts.begin();
					poly1 = true;
					var _g11 = 0;
					var _g2 = s1.polygon.edgeCnt;
					while(_g11 < _g2) {
						var i1 = _g11++;
						if(!out1[i1]) {
							ind11 = i1;
							break;
						} else ite1 = ite1.next;
					}
					if(ite1 == null) ite1 = s1.polygon.gverts.begin(); else {
						zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ite1.elem());
						fst_vert = zpp_$nape_geom_ZPP_$Collide.flowpoly.front();
					}
				} else {
					zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ite2.elem());
					fst_vert = zpp_$nape_geom_ZPP_$Collide.flowpoly.front();
				}
				var cnt = 1;
				if(zpp_$nape_geom_ZPP_$Collide.flowpoly.empty()) {
					var cx_cont = true;
					var cx_itei = s1.polygon.gverts.begin();
					var u = cx_itei.elem();
					var cx_itej = cx_itei.next;
					while(cx_itej != null) {
						var v2 = cx_itej.elem();
						var min2 = 2.0;
						var cx_cont1 = true;
						var cx_itei1 = s2.polygon.gverts.begin();
						var a = cx_itei1.elem();
						var cx_itej1 = cx_itei1.next;
						while(cx_itej1 != null) {
							var b = cx_itej1.elem();
							var t = 0.0;
							if((function($this) {
								var $r;
								var _sx = 0.0;
								var _sy = 0.0;
								{
									_sx = u.x - a.x;
									_sy = u.y - a.y;
								}
								var _vx = 0.0;
								var _vy = 0.0;
								{
									_vx = v2.x - u.x;
									_vy = v2.y - u.y;
								}
								var _qx = 0.0;
								var _qy = 0.0;
								{
									_qx = b.x - a.x;
									_qy = b.y - a.y;
								}
								var den = _vy * _qx - _vx * _qy;
								$r = den * den > nape_Config.epsilon * nape_Config.epsilon?(function($this) {
									var $r;
									den = 1 / den;
									var txx = (_qy * _sx - _qx * _sy) * den;
									$r = txx > nape_Config.epsilon && txx < 1 - nape_Config.epsilon?(function($this) {
										var $r;
										var sxx = (_vy * _sx - _vx * _sy) * den;
										$r = sxx > nape_Config.epsilon && sxx < 1 - nape_Config.epsilon?(function($this) {
											var $r;
											t = txx;
											$r = true;
											return $r;
										}($this)):false;
										return $r;
									}($this)):false;
									return $r;
								}($this)):false;
								return $r;
							}(this))) {
								if(t < min2) {
									min2 = t;
									ite2 = cx_itei1;
								}
							}
							cx_itei1 = cx_itej1;
							a = b;
							cx_itej1 = cx_itej1.next;
						}
						if(cx_cont1) do {
							cx_itej1 = s2.polygon.gverts.begin();
							var b1 = cx_itej1.elem();
							var t1 = 0.0;
							if((function($this) {
								var $r;
								var _sx1 = 0.0;
								var _sy1 = 0.0;
								{
									_sx1 = u.x - a.x;
									_sy1 = u.y - a.y;
								}
								var _vx1 = 0.0;
								var _vy1 = 0.0;
								{
									_vx1 = v2.x - u.x;
									_vy1 = v2.y - u.y;
								}
								var _qx1 = 0.0;
								var _qy1 = 0.0;
								{
									_qx1 = b1.x - a.x;
									_qy1 = b1.y - a.y;
								}
								var den1 = _vy1 * _qx1 - _vx1 * _qy1;
								$r = den1 * den1 > nape_Config.epsilon * nape_Config.epsilon?(function($this) {
									var $r;
									den1 = 1 / den1;
									var txx1 = (_qy1 * _sx1 - _qx1 * _sy1) * den1;
									$r = txx1 > nape_Config.epsilon && txx1 < 1 - nape_Config.epsilon?(function($this) {
										var $r;
										var sxx1 = (_vy1 * _sx1 - _vx1 * _sy1) * den1;
										$r = sxx1 > nape_Config.epsilon && sxx1 < 1 - nape_Config.epsilon?(function($this) {
											var $r;
											t1 = txx1;
											$r = true;
											return $r;
										}($this)):false;
										return $r;
									}($this)):false;
									return $r;
								}($this)):false;
								return $r;
							}(this))) {
								if(t1 < min2) {
									min2 = t1;
									ite2 = cx_itei1;
								}
							}
						} while(false);
						if(min2 != 2.0) {
							var cx = 0.0;
							var cy = 0.0;
							var T = min2;
							cx = u.x + (v2.x - u.x) * T;
							cy = u.y + (v2.y - u.y) * T;
							fst_vert = zpp_$nape_geom_ZPP_$Vec2.get(cx,cy);
							zpp_$nape_geom_ZPP_$Collide.flowpoly.add(fst_vert);
							poly1 = true;
							ite1 = cx_itei;
							cx_cont = false;
							break;
						}
						cx_itei = cx_itej;
						u = v2;
						cx_itej = cx_itej.next;
					}
					if(cx_cont) do {
						cx_itej = s1.polygon.gverts.begin();
						var v3 = cx_itej.elem();
						var min3 = 2.0;
						var cx_cont2 = true;
						var cx_itei2 = s2.polygon.gverts.begin();
						var a1 = cx_itei2.elem();
						var cx_itej2 = cx_itei2.next;
						while(cx_itej2 != null) {
							var b2 = cx_itej2.elem();
							var t2 = 0.0;
							if((function($this) {
								var $r;
								var _sx2 = 0.0;
								var _sy2 = 0.0;
								{
									_sx2 = u.x - a1.x;
									_sy2 = u.y - a1.y;
								}
								var _vx2 = 0.0;
								var _vy2 = 0.0;
								{
									_vx2 = v3.x - u.x;
									_vy2 = v3.y - u.y;
								}
								var _qx2 = 0.0;
								var _qy2 = 0.0;
								{
									_qx2 = b2.x - a1.x;
									_qy2 = b2.y - a1.y;
								}
								var den2 = _vy2 * _qx2 - _vx2 * _qy2;
								$r = den2 * den2 > nape_Config.epsilon * nape_Config.epsilon?(function($this) {
									var $r;
									den2 = 1 / den2;
									var txx2 = (_qy2 * _sx2 - _qx2 * _sy2) * den2;
									$r = txx2 > nape_Config.epsilon && txx2 < 1 - nape_Config.epsilon?(function($this) {
										var $r;
										var sxx2 = (_vy2 * _sx2 - _vx2 * _sy2) * den2;
										$r = sxx2 > nape_Config.epsilon && sxx2 < 1 - nape_Config.epsilon?(function($this) {
											var $r;
											t2 = txx2;
											$r = true;
											return $r;
										}($this)):false;
										return $r;
									}($this)):false;
									return $r;
								}($this)):false;
								return $r;
							}(this))) {
								if(t2 < min3) {
									min3 = t2;
									ite2 = cx_itei2;
								}
							}
							cx_itei2 = cx_itej2;
							a1 = b2;
							cx_itej2 = cx_itej2.next;
						}
						if(cx_cont2) do {
							cx_itej2 = s2.polygon.gverts.begin();
							var b3 = cx_itej2.elem();
							var t3 = 0.0;
							if((function($this) {
								var $r;
								var _sx3 = 0.0;
								var _sy3 = 0.0;
								{
									_sx3 = u.x - a1.x;
									_sy3 = u.y - a1.y;
								}
								var _vx3 = 0.0;
								var _vy3 = 0.0;
								{
									_vx3 = v3.x - u.x;
									_vy3 = v3.y - u.y;
								}
								var _qx3 = 0.0;
								var _qy3 = 0.0;
								{
									_qx3 = b3.x - a1.x;
									_qy3 = b3.y - a1.y;
								}
								var den3 = _vy3 * _qx3 - _vx3 * _qy3;
								$r = den3 * den3 > nape_Config.epsilon * nape_Config.epsilon?(function($this) {
									var $r;
									den3 = 1 / den3;
									var txx3 = (_qy3 * _sx3 - _qx3 * _sy3) * den3;
									$r = txx3 > nape_Config.epsilon && txx3 < 1 - nape_Config.epsilon?(function($this) {
										var $r;
										var sxx3 = (_vy3 * _sx3 - _vx3 * _sy3) * den3;
										$r = sxx3 > nape_Config.epsilon && sxx3 < 1 - nape_Config.epsilon?(function($this) {
											var $r;
											t3 = txx3;
											$r = true;
											return $r;
										}($this)):false;
										return $r;
									}($this)):false;
									return $r;
								}($this)):false;
								return $r;
							}(this))) {
								if(t3 < min3) {
									min3 = t3;
									ite2 = cx_itei2;
								}
							}
						} while(false);
						if(min3 != 2.0) {
							var cx1 = 0.0;
							var cy1 = 0.0;
							var T1 = min3;
							cx1 = u.x + (v3.x - u.x) * T1;
							cy1 = u.y + (v3.y - u.y) * T1;
							fst_vert = zpp_$nape_geom_ZPP_$Vec2.get(cx1,cy1);
							zpp_$nape_geom_ZPP_$Collide.flowpoly.add(fst_vert);
							poly1 = true;
							ite1 = cx_itei;
							break;
						}
					} while(false);
					cnt = 2;
				}
				while(true) if(poly1) {
					ite1 = ite1.next;
					ind11++;
					if(ite1 == null) {
						ite1 = s1.polygon.gverts.begin();
						ind11 = 0;
					}
					if(!out1[ind11]) {
						var ex = ite1.elem();
						if(fst_vert != null && zpp_$nape_geom_ZPP_$VecMath.vec_dsq(ex.x,ex.y,fst_vert.x,fst_vert.y) < nape_Config.epsilon) break;
						zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ex);
						if(fst_vert == null) fst_vert = zpp_$nape_geom_ZPP_$Collide.flowpoly.front();
						cnt = 1;
					} else {
						var a2 = zpp_$nape_geom_ZPP_$Collide.flowpoly.front();
						var b4 = ite1.elem();
						var u1 = ite2.elem();
						var itm = ite2.next;
						if(itm == null) itm = s2.polygon.gverts.begin();
						var max = -1.0;
						var itmo = null;
						var indo = 0;
						var icnt = 0;
						var beg_ite = itm;
						var cx_ite4 = itm;
						do {
							var v5 = cx_ite4.elem();
							var t4 = 0.0;
							if((function($this) {
								var $r;
								var _sx4 = 0.0;
								var _sy4 = 0.0;
								{
									_sx4 = u1.x - a2.x;
									_sy4 = u1.y - a2.y;
								}
								var _vx4 = 0.0;
								var _vy4 = 0.0;
								{
									_vx4 = v5.x - u1.x;
									_vy4 = v5.y - u1.y;
								}
								var _qx4 = 0.0;
								var _qy4 = 0.0;
								{
									_qx4 = b4.x - a2.x;
									_qy4 = b4.y - a2.y;
								}
								var den4 = _vy4 * _qx4 - _vx4 * _qy4;
								$r = den4 * den4 > nape_Config.epsilon * nape_Config.epsilon?(function($this) {
									var $r;
									den4 = 1 / den4;
									var txx4 = (_qy4 * _sx4 - _qx4 * _sy4) * den4;
									$r = txx4 > nape_Config.epsilon && txx4 < 1 - nape_Config.epsilon?(function($this) {
										var $r;
										var sxx4 = (_vy4 * _sx4 - _vx4 * _sy4) * den4;
										$r = sxx4 > nape_Config.epsilon && sxx4 < 1 - nape_Config.epsilon?(function($this) {
											var $r;
											t4 = txx4;
											$r = true;
											return $r;
										}($this)):false;
										return $r;
									}($this)):false;
									return $r;
								}($this)):false;
								return $r;
							}(this))) {
								if(t4 >= max) {
									itmo = ite2;
									indo = ind2;
									if(++icnt == cnt) {
										max = t4;
										cx_ite4 = beg_ite;
										break;
									} else max = t4;
								}
							}
							u1 = v5;
							ite2 = cx_ite4;
							ind2++;
							if(ind2 >= s2.polygon.edgeCnt) ind2 = 0;
							cx_ite4 = cx_ite4.next;
							if(cx_ite4 == null) cx_ite4 = s2.polygon.gverts.begin();
						} while(false);
						while(cx_ite4 != beg_ite) {
							var v6 = cx_ite4.elem();
							var t5 = 0.0;
							if((function($this) {
								var $r;
								var _sx5 = 0.0;
								var _sy5 = 0.0;
								{
									_sx5 = u1.x - a2.x;
									_sy5 = u1.y - a2.y;
								}
								var _vx5 = 0.0;
								var _vy5 = 0.0;
								{
									_vx5 = v6.x - u1.x;
									_vy5 = v6.y - u1.y;
								}
								var _qx5 = 0.0;
								var _qy5 = 0.0;
								{
									_qx5 = b4.x - a2.x;
									_qy5 = b4.y - a2.y;
								}
								var den5 = _vy5 * _qx5 - _vx5 * _qy5;
								$r = den5 * den5 > nape_Config.epsilon * nape_Config.epsilon?(function($this) {
									var $r;
									den5 = 1 / den5;
									var txx5 = (_qy5 * _sx5 - _qx5 * _sy5) * den5;
									$r = txx5 > nape_Config.epsilon && txx5 < 1 - nape_Config.epsilon?(function($this) {
										var $r;
										var sxx5 = (_vy5 * _sx5 - _vx5 * _sy5) * den5;
										$r = sxx5 > nape_Config.epsilon && sxx5 < 1 - nape_Config.epsilon?(function($this) {
											var $r;
											t5 = txx5;
											$r = true;
											return $r;
										}($this)):false;
										return $r;
									}($this)):false;
									return $r;
								}($this)):false;
								return $r;
							}(this))) {
								if(t5 >= max) {
									itmo = ite2;
									indo = ind2;
									if(++icnt == cnt) {
										max = t5;
										cx_ite4 = beg_ite;
										break;
									} else max = t5;
								}
							}
							u1 = v6;
							ite2 = cx_ite4;
							ind2++;
							if(ind2 >= s2.polygon.edgeCnt) ind2 = 0;
							cx_ite4 = cx_ite4.next;
							if(cx_ite4 == null) cx_ite4 = s2.polygon.gverts.begin();
						}
						if(itmo == null) break;
						var u2 = itmo.elem();
						var itm2 = itmo.next;
						if(itm2 == null) itm2 = s2.polygon.gverts.begin();
						var v4 = itm2.elem();
						var cx2 = 0.0;
						var cy2 = 0.0;
						var T2 = max;
						cx2 = u2.x + (v4.x - u2.x) * T2;
						cy2 = u2.y + (v4.y - u2.y) * T2;
						if(fst_vert != null && zpp_$nape_geom_ZPP_$VecMath.vec_dsq(cx2,cy2,fst_vert.x,fst_vert.y) < nape_Config.epsilon) break;
						zpp_$nape_geom_ZPP_$Collide.flowpoly.add(zpp_$nape_geom_ZPP_$Vec2.get(cx2,cy2));
						if(fst_vert == null) fst_vert = zpp_$nape_geom_ZPP_$Collide.flowpoly.front();
						ite2 = itmo;
						ind2 = indo;
						poly1 = !poly1;
						cnt = 2;
					}
				} else {
					ite2 = ite2.next;
					ind2++;
					if(ite2 == null) {
						ite2 = s2.polygon.gverts.begin();
						ind2 = 0;
					}
					if(!out2[ind2]) {
						var ex1 = ite2.elem();
						if(fst_vert != null && zpp_$nape_geom_ZPP_$VecMath.vec_dsq(ex1.x,ex1.y,fst_vert.x,fst_vert.y) < nape_Config.epsilon) break;
						zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ex1);
						if(fst_vert == null) fst_vert = zpp_$nape_geom_ZPP_$Collide.flowpoly.front();
						cnt = 1;
					} else {
						var a3 = zpp_$nape_geom_ZPP_$Collide.flowpoly.front();
						var b5 = ite2.elem();
						var u3 = ite1.elem();
						var itm1 = ite1.next;
						if(itm1 == null) itm1 = s1.polygon.gverts.begin();
						var max1 = -1.0;
						var itmo1 = null;
						var indo1 = 0;
						var icnt1 = 0;
						var beg_ite1 = itm1;
						var cx_ite5 = itm1;
						do {
							var v8 = cx_ite5.elem();
							var t6 = 0.0;
							if((function($this) {
								var $r;
								var _sx6 = 0.0;
								var _sy6 = 0.0;
								{
									_sx6 = u3.x - a3.x;
									_sy6 = u3.y - a3.y;
								}
								var _vx6 = 0.0;
								var _vy6 = 0.0;
								{
									_vx6 = v8.x - u3.x;
									_vy6 = v8.y - u3.y;
								}
								var _qx6 = 0.0;
								var _qy6 = 0.0;
								{
									_qx6 = b5.x - a3.x;
									_qy6 = b5.y - a3.y;
								}
								var den6 = _vy6 * _qx6 - _vx6 * _qy6;
								$r = den6 * den6 > nape_Config.epsilon * nape_Config.epsilon?(function($this) {
									var $r;
									den6 = 1 / den6;
									var txx6 = (_qy6 * _sx6 - _qx6 * _sy6) * den6;
									$r = txx6 > nape_Config.epsilon && txx6 < 1 - nape_Config.epsilon?(function($this) {
										var $r;
										var sxx6 = (_vy6 * _sx6 - _vx6 * _sy6) * den6;
										$r = sxx6 > nape_Config.epsilon && sxx6 < 1 - nape_Config.epsilon?(function($this) {
											var $r;
											t6 = txx6;
											$r = true;
											return $r;
										}($this)):false;
										return $r;
									}($this)):false;
									return $r;
								}($this)):false;
								return $r;
							}(this))) {
								if(t6 >= max1) {
									itmo1 = ite1;
									indo1 = ind11;
									if(++icnt1 == cnt) {
										max1 = t6;
										cx_ite5 = beg_ite1;
										break;
									} else max1 = t6;
								}
							}
							u3 = v8;
							ite1 = cx_ite5;
							ind11++;
							if(ind11 >= s1.polygon.edgeCnt) ind11 = 0;
							cx_ite5 = cx_ite5.next;
							if(cx_ite5 == null) cx_ite5 = s1.polygon.gverts.begin();
						} while(false);
						while(cx_ite5 != beg_ite1) {
							var v9 = cx_ite5.elem();
							var t7 = 0.0;
							if((function($this) {
								var $r;
								var _sx7 = 0.0;
								var _sy7 = 0.0;
								{
									_sx7 = u3.x - a3.x;
									_sy7 = u3.y - a3.y;
								}
								var _vx7 = 0.0;
								var _vy7 = 0.0;
								{
									_vx7 = v9.x - u3.x;
									_vy7 = v9.y - u3.y;
								}
								var _qx7 = 0.0;
								var _qy7 = 0.0;
								{
									_qx7 = b5.x - a3.x;
									_qy7 = b5.y - a3.y;
								}
								var den7 = _vy7 * _qx7 - _vx7 * _qy7;
								$r = den7 * den7 > nape_Config.epsilon * nape_Config.epsilon?(function($this) {
									var $r;
									den7 = 1 / den7;
									var txx7 = (_qy7 * _sx7 - _qx7 * _sy7) * den7;
									$r = txx7 > nape_Config.epsilon && txx7 < 1 - nape_Config.epsilon?(function($this) {
										var $r;
										var sxx7 = (_vy7 * _sx7 - _vx7 * _sy7) * den7;
										$r = sxx7 > nape_Config.epsilon && sxx7 < 1 - nape_Config.epsilon?(function($this) {
											var $r;
											t7 = txx7;
											$r = true;
											return $r;
										}($this)):false;
										return $r;
									}($this)):false;
									return $r;
								}($this)):false;
								return $r;
							}(this))) {
								if(t7 >= max1) {
									itmo1 = ite1;
									indo1 = ind11;
									if(++icnt1 == cnt) {
										max1 = t7;
										cx_ite5 = beg_ite1;
										break;
									} else max1 = t7;
								}
							}
							u3 = v9;
							ite1 = cx_ite5;
							ind11++;
							if(ind11 >= s1.polygon.edgeCnt) ind11 = 0;
							cx_ite5 = cx_ite5.next;
							if(cx_ite5 == null) cx_ite5 = s1.polygon.gverts.begin();
						}
						if(itmo1 == null) break;
						var u4 = itmo1.elem();
						var itm21 = itmo1.next;
						if(itm21 == null) itm21 = s1.polygon.gverts.begin();
						var v7 = itm21.elem();
						var cx3 = 0.0;
						var cy3 = 0.0;
						var T3 = max1;
						cx3 = u4.x + (v7.x - u4.x) * T3;
						cy3 = u4.y + (v7.y - u4.y) * T3;
						if(fst_vert != null && zpp_$nape_geom_ZPP_$VecMath.vec_dsq(cx3,cy3,fst_vert.x,fst_vert.y) < nape_Config.epsilon) break;
						zpp_$nape_geom_ZPP_$Collide.flowpoly.add(zpp_$nape_geom_ZPP_$Vec2.get(cx3,cy3));
						if(fst_vert == null) fst_vert = zpp_$nape_geom_ZPP_$Collide.flowpoly.front();
						ite1 = itmo1;
						ind11 = indo1;
						poly1 = !poly1;
						cnt = 2;
					}
				}
				if(zpp_$nape_geom_ZPP_$Collide.flowpoly.begin() != null && zpp_$nape_geom_ZPP_$Collide.flowpoly.begin().next != null && zpp_$nape_geom_ZPP_$Collide.flowpoly.begin().next.next != null) {
					var area = 0.0;
					var COMx = 0.0;
					var COMy = 0.0;
					COMx = 0;
					COMy = 0;
					area = 0.0;
					var cx_ite6 = zpp_$nape_geom_ZPP_$Collide.flowpoly.begin();
					var u5 = cx_ite6.elem();
					cx_ite6 = cx_ite6.next;
					var v10 = cx_ite6.elem();
					cx_ite6 = cx_ite6.next;
					while(cx_ite6 != null) {
						var w2 = cx_ite6.elem();
						area += v10.x * (w2.y - u5.y);
						var cf = w2.y * v10.x - w2.x * v10.y;
						COMx += (v10.x + w2.x) * cf;
						COMy += (v10.y + w2.y) * cf;
						u5 = v10;
						v10 = w2;
						cx_ite6 = cx_ite6.next;
					}
					cx_ite6 = zpp_$nape_geom_ZPP_$Collide.flowpoly.begin();
					var w = cx_ite6.elem();
					area += v10.x * (w.y - u5.y);
					var cf1 = w.y * v10.x - w.x * v10.y;
					COMx += (v10.x + w.x) * cf1;
					COMy += (v10.y + w.y) * cf1;
					u5 = v10;
					v10 = w;
					cx_ite6 = cx_ite6.next;
					var w1 = cx_ite6.elem();
					area += v10.x * (w1.y - u5.y);
					var cf2 = w1.y * v10.x - w1.x * v10.y;
					COMx += (v10.x + w1.x) * cf2;
					COMy += (v10.y + w1.y) * cf2;
					area *= 0.5;
					var ia = 1 / (6 * area);
					var t8 = ia;
					COMx *= t8;
					COMy *= t8;
					arb.inject(-area,COMx,COMy);
					return true;
				} else return false;
			} else return false;
		} else return false;
	} else {
		var inte = [];
		var total1 = true;
		var a0 = null;
		var vi = null;
		var max2 = -1e100;
		var cont1 = true;
		var vite = s2.polygon.gverts.begin();
		var ind3 = 0;
		var cx_ite7 = s2.polygon.edges.begin();
		while(cx_ite7 != null) {
			var a4 = cx_ite7.elem();
			var dist = a4.gnormx * s1.circle.worldCOMx + a4.gnormy * s1.circle.worldCOMy;
			if(dist > a4.gprojection + s1.circle.radius) {
				cont1 = false;
				break;
			} else if(dist + s1.circle.radius > a4.gprojection + nape_Config.epsilon) {
				total1 = false;
				inte[ind3] = true;
			}
			dist -= a4.gprojection + s1.circle.radius;
			if(dist > max2) {
				max2 = dist;
				a0 = a4;
				vi = vite;
			}
			vite = vite.next;
			ind3++;
			cx_ite7 = cx_ite7.next;
		}
		if(cont1) {
			if(total1) {
				arb.inject(s1.circle.area,s1.circle.worldCOMx,s1.circle.worldCOMy);
				return true;
			} else {
				var v0 = vi.elem();
				var v11;
				if(vi.next == null) v11 = s2.polygon.gverts.front(); else v11 = vi.next.elem();
				var dt = s1.circle.worldCOMy * a0.gnormx - s1.circle.worldCOMx * a0.gnormy;
				if(dt <= v0.y * a0.gnormx - v0.x * a0.gnormy?(function($this) {
					var $r;
					var minDist = s1.circle.radius + 0;
					var px = 0.0;
					var py = 0.0;
					{
						px = v0.x - s1.circle.worldCOMx;
						py = v0.y - s1.circle.worldCOMy;
					}
					var distSqr = px * px + py * py;
					$r = distSqr <= minDist * minDist;
					return $r;
				}(this)):dt >= v11.y * a0.gnormx - v11.x * a0.gnormy?(function($this) {
					var $r;
					var minDist1 = s1.circle.radius + 0;
					var px1 = 0.0;
					var py1 = 0.0;
					{
						px1 = v11.x - s1.circle.worldCOMx;
						py1 = v11.y - s1.circle.worldCOMy;
					}
					var distSqr1 = px1 * px1 + py1 * py1;
					$r = distSqr1 <= minDist1 * minDist1;
					return $r;
				}(this)):true) {
					var ins = [];
					var ind4 = 0;
					var total2 = true;
					var vi1 = null;
					var vind = 0;
					var cx_ite8 = s2.polygon.gverts.begin();
					while(cx_ite8 != null) {
						var v12 = cx_ite8.elem();
						var dist1 = zpp_$nape_geom_ZPP_$VecMath.vec_dsq(v12.x,v12.y,s1.circle.worldCOMx,s1.circle.worldCOMy);
						if(!(ins[ind4] = dist1 <= s1.circle.radius * s1.circle.radius)) total2 = false; else {
							vind = ind4;
							vi1 = cx_ite8;
						}
						ind4++;
						cx_ite8 = cx_ite8.next;
					}
					if(total2) {
						s2.polygon.validate_worldCOM();
						arb.inject(s2.polygon.area,s2.polygon.worldCOMx,s2.polygon.worldCOMy);
						return true;
					} else {
						while(!zpp_$nape_geom_ZPP_$Collide.flowpoly.empty()) {
							var p1 = zpp_$nape_geom_ZPP_$Collide.flowpoly.pop_unsafe();
							if(!p1._inuse) {
								var o1 = p1;
								o1.free();
								o1.next = zpp_$nape_geom_ZPP_$Vec2.zpp_pool;
								zpp_$nape_geom_ZPP_$Vec2.zpp_pool = o1;
							}
						}
						zpp_$nape_geom_ZPP_$Collide.flowsegs.clear();
						var fst_vert1 = null;
						var state = 1;
						if(vi1 == null) {
							vi1 = s2.polygon.gverts.begin();
							state = 2;
						} else zpp_$nape_geom_ZPP_$Collide.flowpoly.add(fst_vert1 = vi1.elem());
						while(state != 0) if(state == 1) {
							vi1 = vi1.next;
							if(vi1 == null) vi1 = s2.polygon.gverts.begin();
							vind++;
							if(vind >= s2.polygon.edgeCnt) vind = 0;
							if(ins[vind]) {
								if(zpp_$nape_geom_ZPP_$VecMath.vec_dsq(fst_vert1.x,fst_vert1.y,vi1.elem().x,vi1.elem().y) < nape_Config.epsilon) break;
								zpp_$nape_geom_ZPP_$Collide.flowpoly.add(vi1.elem());
							} else {
								var u6 = zpp_$nape_geom_ZPP_$Collide.flowpoly.front();
								var v13 = vi1.elem();
								var tval;
								var vx = 0.0;
								var vy = 0.0;
								vx = v13.x - u6.x;
								vy = v13.y - u6.y;
								var qx = 0.0;
								var qy = 0.0;
								qx = u6.x - s1.circle.worldCOMx;
								qy = u6.y - s1.circle.worldCOMy;
								var A = vx * vx + vy * vy;
								var B = 2 * (qx * vx + qy * vy);
								var C = qx * qx + qy * qy - s1.circle.radius * s1.circle.radius;
								var D = Math.sqrt(B * B - 4 * A * C);
								A = 1 / (2 * A);
								var t9 = (-B - D) * A;
								if(t9 < nape_Config.epsilon) tval = (-B + D) * A; else tval = t9;
								var cx4 = 0.0;
								var cy4 = 0.0;
								var T4 = tval;
								cx4 = u6.x + (v13.x - u6.x) * T4;
								cy4 = u6.y + (v13.y - u6.y) * T4;
								if(zpp_$nape_geom_ZPP_$VecMath.vec_dsq(fst_vert1.x,fst_vert1.y,cx4,cy4) < nape_Config.epsilon) break;
								zpp_$nape_geom_ZPP_$Collide.flowpoly.add(zpp_$nape_geom_ZPP_$Vec2.get(cx4,cy4));
								state = 2;
							}
						} else if(state == 2) {
							var vi2 = vi1.next;
							if(vi2 == null) vi2 = s2.polygon.gverts.begin();
							var u7 = vi1.elem();
							state = 0;
							var beg_ite2 = vi2;
							var cx_ite9 = vi2;
							do {
								var v14 = cx_ite9.elem();
								var vind2 = vind + 1;
								if(vind2 == s2.polygon.edgeCnt) vind2 = 0;
								if(inte[vind]) {
									if(ins[vind2]) {
										var tval1;
										var vx1 = 0.0;
										var vy1 = 0.0;
										vx1 = v14.x - u7.x;
										vy1 = v14.y - u7.y;
										var qx1 = 0.0;
										var qy1 = 0.0;
										qx1 = u7.x - s1.circle.worldCOMx;
										qy1 = u7.y - s1.circle.worldCOMy;
										var A1 = vx1 * vx1 + vy1 * vy1;
										var B1 = 2 * (qx1 * vx1 + qy1 * vy1);
										var C1 = qx1 * qx1 + qy1 * qy1 - s1.circle.radius * s1.circle.radius;
										var D1 = Math.sqrt(B1 * B1 - 4 * A1 * C1);
										A1 = 1 / (2 * A1);
										var t10 = (-B1 - D1) * A1;
										if(t10 < nape_Config.epsilon) tval1 = (-B1 + D1) * A1; else tval1 = t10;
										var cx5 = 0.0;
										var cy5 = 0.0;
										var T5 = tval1;
										cx5 = u7.x + (v14.x - u7.x) * T5;
										cy5 = u7.y + (v14.y - u7.y) * T5;
										if(zpp_$nape_geom_ZPP_$VecMath.vec_dsq(fst_vert1.x,fst_vert1.y,cx5,cy5) < nape_Config.epsilon) {
											state = 0;
											cx_ite9 = beg_ite2;
											break;
										}
										var cp = zpp_$nape_geom_ZPP_$Vec2.get(cx5,cy5);
										zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.front());
										zpp_$nape_geom_ZPP_$Collide.flowsegs.add(cp);
										zpp_$nape_geom_ZPP_$Collide.flowpoly.add(cp);
										state = 1;
										cx_ite9 = beg_ite2;
										break;
									} else {
										var t0 = 0.0;
										var t11 = 0.0;
										var two;
										var vx2 = 0.0;
										var vy2 = 0.0;
										vx2 = v14.x - u7.x;
										vy2 = v14.y - u7.y;
										var qx2 = 0.0;
										var qy2 = 0.0;
										qx2 = u7.x - s1.circle.worldCOMx;
										qy2 = u7.y - s1.circle.worldCOMy;
										var A2 = vx2 * vx2 + vy2 * vy2;
										var B2 = 2 * (qx2 * vx2 + qy2 * vy2);
										var C2 = qx2 * qx2 + qy2 * qy2 - s1.circle.radius * s1.circle.radius;
										var D2 = B2 * B2 - 4 * A2 * C2;
										if(D2 * D2 < nape_Config.epsilon) {
											if(D2 < 0) t0 = 10.0; else t0 = t11 = -B2 / (2 * A2);
											two = false;
										} else {
											D2 = Math.sqrt(D2);
											A2 = 1 / (2 * A2);
											t0 = (-B2 - D2) * A2;
											t11 = (-B2 + D2) * A2;
											two = true;
										}
										if(t0 < 1 - nape_Config.epsilon && t11 > nape_Config.epsilon) {
											var cx6 = 0.0;
											var cy6 = 0.0;
											var T6 = t0;
											cx6 = u7.x + (v14.x - u7.x) * T6;
											cy6 = u7.y + (v14.y - u7.y) * T6;
											if(fst_vert1 != null && zpp_$nape_geom_ZPP_$VecMath.vec_dsq(fst_vert1.x,fst_vert1.y,cx6,cy6) < nape_Config.epsilon) {
												state = 0;
												cx_ite9 = beg_ite2;
												break;
											}
											var cp1 = zpp_$nape_geom_ZPP_$Vec2.get(cx6,cy6);
											if(!zpp_$nape_geom_ZPP_$Collide.flowpoly.empty()) {
												zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.front());
												zpp_$nape_geom_ZPP_$Collide.flowsegs.add(cp1);
											}
											zpp_$nape_geom_ZPP_$Collide.flowpoly.add(cp1);
											if(fst_vert1 == null) fst_vert1 = zpp_$nape_geom_ZPP_$Collide.flowpoly.front();
											if(two) {
												var cx7 = 0.0;
												var cy7 = 0.0;
												var T7 = t11;
												cx7 = u7.x + (v14.x - u7.x) * T7;
												cy7 = u7.y + (v14.y - u7.y) * T7;
												zpp_$nape_geom_ZPP_$Collide.flowpoly.add(zpp_$nape_geom_ZPP_$Vec2.get(cx7,cy7));
											}
										}
									}
								}
								u7 = v14;
								vi1 = cx_ite9;
								vind = vind2;
								cx_ite9 = cx_ite9.next;
								if(cx_ite9 == null) cx_ite9 = s2.polygon.gverts.begin();
							} while(false);
							while(cx_ite9 != beg_ite2) {
								var v15 = cx_ite9.elem();
								var vind21 = vind + 1;
								if(vind21 == s2.polygon.edgeCnt) vind21 = 0;
								if(inte[vind]) {
									if(ins[vind21]) {
										var tval2;
										var vx3 = 0.0;
										var vy3 = 0.0;
										vx3 = v15.x - u7.x;
										vy3 = v15.y - u7.y;
										var qx3 = 0.0;
										var qy3 = 0.0;
										qx3 = u7.x - s1.circle.worldCOMx;
										qy3 = u7.y - s1.circle.worldCOMy;
										var A3 = vx3 * vx3 + vy3 * vy3;
										var B3 = 2 * (qx3 * vx3 + qy3 * vy3);
										var C3 = qx3 * qx3 + qy3 * qy3 - s1.circle.radius * s1.circle.radius;
										var D3 = Math.sqrt(B3 * B3 - 4 * A3 * C3);
										A3 = 1 / (2 * A3);
										var t12 = (-B3 - D3) * A3;
										if(t12 < nape_Config.epsilon) tval2 = (-B3 + D3) * A3; else tval2 = t12;
										var cx8 = 0.0;
										var cy8 = 0.0;
										var T8 = tval2;
										cx8 = u7.x + (v15.x - u7.x) * T8;
										cy8 = u7.y + (v15.y - u7.y) * T8;
										if(zpp_$nape_geom_ZPP_$VecMath.vec_dsq(fst_vert1.x,fst_vert1.y,cx8,cy8) < nape_Config.epsilon) {
											state = 0;
											cx_ite9 = beg_ite2;
											break;
										}
										var cp2 = zpp_$nape_geom_ZPP_$Vec2.get(cx8,cy8);
										zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.front());
										zpp_$nape_geom_ZPP_$Collide.flowsegs.add(cp2);
										zpp_$nape_geom_ZPP_$Collide.flowpoly.add(cp2);
										state = 1;
										cx_ite9 = beg_ite2;
										break;
									} else {
										var t01 = 0.0;
										var t13 = 0.0;
										var two1;
										var vx4 = 0.0;
										var vy4 = 0.0;
										vx4 = v15.x - u7.x;
										vy4 = v15.y - u7.y;
										var qx4 = 0.0;
										var qy4 = 0.0;
										qx4 = u7.x - s1.circle.worldCOMx;
										qy4 = u7.y - s1.circle.worldCOMy;
										var A4 = vx4 * vx4 + vy4 * vy4;
										var B4 = 2 * (qx4 * vx4 + qy4 * vy4);
										var C4 = qx4 * qx4 + qy4 * qy4 - s1.circle.radius * s1.circle.radius;
										var D4 = B4 * B4 - 4 * A4 * C4;
										if(D4 * D4 < nape_Config.epsilon) {
											if(D4 < 0) t01 = 10.0; else t01 = t13 = -B4 / (2 * A4);
											two1 = false;
										} else {
											D4 = Math.sqrt(D4);
											A4 = 1 / (2 * A4);
											t01 = (-B4 - D4) * A4;
											t13 = (-B4 + D4) * A4;
											two1 = true;
										}
										if(t01 < 1 - nape_Config.epsilon && t13 > nape_Config.epsilon) {
											var cx9 = 0.0;
											var cy9 = 0.0;
											var T9 = t01;
											cx9 = u7.x + (v15.x - u7.x) * T9;
											cy9 = u7.y + (v15.y - u7.y) * T9;
											if(fst_vert1 != null && zpp_$nape_geom_ZPP_$VecMath.vec_dsq(fst_vert1.x,fst_vert1.y,cx9,cy9) < nape_Config.epsilon) {
												state = 0;
												cx_ite9 = beg_ite2;
												break;
											}
											var cp3 = zpp_$nape_geom_ZPP_$Vec2.get(cx9,cy9);
											if(!zpp_$nape_geom_ZPP_$Collide.flowpoly.empty()) {
												zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.front());
												zpp_$nape_geom_ZPP_$Collide.flowsegs.add(cp3);
											}
											zpp_$nape_geom_ZPP_$Collide.flowpoly.add(cp3);
											if(fst_vert1 == null) fst_vert1 = zpp_$nape_geom_ZPP_$Collide.flowpoly.front();
											if(two1) {
												var cx10 = 0.0;
												var cy10 = 0.0;
												var T10 = t13;
												cx10 = u7.x + (v15.x - u7.x) * T10;
												cy10 = u7.y + (v15.y - u7.y) * T10;
												zpp_$nape_geom_ZPP_$Collide.flowpoly.add(zpp_$nape_geom_ZPP_$Vec2.get(cx10,cy10));
											}
										}
									}
								}
								u7 = v15;
								vi1 = cx_ite9;
								vind = vind21;
								cx_ite9 = cx_ite9.next;
								if(cx_ite9 == null) cx_ite9 = s2.polygon.gverts.begin();
							}
						}
						if(zpp_$nape_geom_ZPP_$Collide.flowpoly.begin() == null) return false; else if(zpp_$nape_geom_ZPP_$Collide.flowpoly.begin().next == null) {
							var all = true;
							var cx_ite10 = s2.polygon.edges.begin();
							while(cx_ite10 != null) {
								var e = cx_ite10.elem();
								var dist2 = e.gnormx * s1.circle.worldCOMx + e.gnormy * s1.circle.worldCOMy;
								if(dist2 > e.gprojection) {
									all = false;
									break;
								}
								cx_ite10 = cx_ite10.next;
							}
							if(all) {
								arb.inject(s1.circle.area,s1.circle.worldCOMx,s1.circle.worldCOMy);
								return true;
							} else return false;
						} else {
							var COMx1 = 0;
							var COMy1 = 0;
							var area1 = 0.0;
							if(zpp_$nape_geom_ZPP_$Collide.flowpoly.begin().next.next != null) {
								var parea = 0.0;
								var pCOMx = 0.0;
								var pCOMy = 0.0;
								pCOMx = 0;
								pCOMy = 0;
								parea = 0.0;
								var cx_ite11 = zpp_$nape_geom_ZPP_$Collide.flowpoly.begin();
								var u8 = cx_ite11.elem();
								cx_ite11 = cx_ite11.next;
								var v16 = cx_ite11.elem();
								cx_ite11 = cx_ite11.next;
								while(cx_ite11 != null) {
									var w5 = cx_ite11.elem();
									parea += v16.x * (w5.y - u8.y);
									var cf3 = w5.y * v16.x - w5.x * v16.y;
									pCOMx += (v16.x + w5.x) * cf3;
									pCOMy += (v16.y + w5.y) * cf3;
									u8 = v16;
									v16 = w5;
									cx_ite11 = cx_ite11.next;
								}
								cx_ite11 = zpp_$nape_geom_ZPP_$Collide.flowpoly.begin();
								var w3 = cx_ite11.elem();
								parea += v16.x * (w3.y - u8.y);
								var cf4 = w3.y * v16.x - w3.x * v16.y;
								pCOMx += (v16.x + w3.x) * cf4;
								pCOMy += (v16.y + w3.y) * cf4;
								u8 = v16;
								v16 = w3;
								cx_ite11 = cx_ite11.next;
								var w4 = cx_ite11.elem();
								parea += v16.x * (w4.y - u8.y);
								var cf5 = w4.y * v16.x - w4.x * v16.y;
								pCOMx += (v16.x + w4.x) * cf5;
								pCOMy += (v16.y + w4.y) * cf5;
								parea *= 0.5;
								var ia1 = 1 / (6 * parea);
								var t14 = ia1;
								pCOMx *= t14;
								pCOMy *= t14;
								var t15 = -parea;
								COMx1 += pCOMx * t15;
								COMy1 += pCOMy * t15;
								area1 -= parea;
							} else {
								zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.front());
								zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.begin().next.elem());
							}
							while(!zpp_$nape_geom_ZPP_$Collide.flowsegs.empty()) {
								var u9 = zpp_$nape_geom_ZPP_$Collide.flowsegs.pop_unsafe();
								var v17 = zpp_$nape_geom_ZPP_$Collide.flowsegs.pop_unsafe();
								var dx = 0.0;
								var dy = 0.0;
								dx = v17.x - u9.x;
								dy = v17.y - u9.y;
								var nx = 0.0;
								var ny = 0.0;
								nx = dx;
								ny = dy;
								var d = nx * nx + ny * ny;
								var imag = zpp_$nape_util_ZPP_$Math.invsqrt(d);
								var t16 = imag;
								nx *= t16;
								ny *= t16;
								var t17 = nx;
								nx = -ny;
								ny = t17;
								var cx11 = 0.0;
								var cy11 = 0.0;
								cx11 = u9.x + v17.x;
								cy11 = u9.y + v17.y;
								var t18 = 1.0 / 2;
								cx11 *= t18;
								cy11 *= t18;
								var t19 = 1.0;
								cx11 -= s1.circle.worldCOMx * t19;
								cy11 -= s1.circle.worldCOMy * t19;
								var xd = nx * cx11 + ny * cy11;
								var carea = 0.0;
								var ccom = 0.0;
								var X = xd;
								var cos = X / s1.circle.radius;
								var sin = Math.sqrt(1 - cos * cos);
								var theta = Math.acos(cos);
								carea = s1.circle.radius * (s1.circle.radius * theta - X * sin);
								ccom = 2 / 3 * s1.circle.radius * sin * sin * sin / (theta - cos * sin);
								cx11 = s1.circle.worldCOMx;
								cy11 = s1.circle.worldCOMy;
								var t20 = ccom;
								cx11 += nx * t20;
								cy11 += ny * t20;
								var t21 = carea;
								COMx1 += cx11 * t21;
								COMy1 += cy11 * t21;
								area1 += carea;
							}
							var t22 = 1.0 / area1;
							COMx1 *= t22;
							COMy1 *= t22;
							arb.inject(area1,COMx1,COMy1);
							return true;
						}
					}
				} else return false;
			}
		} else return false;
	} else {
		var c1 = s1.circle;
		var c2 = s2.circle;
		var deltax = 0.0;
		var deltay = 0.0;
		deltax = c2.worldCOMx - c1.worldCOMx;
		deltay = c2.worldCOMy - c1.worldCOMy;
		var cr = c1.radius + c2.radius;
		var ds = deltax * deltax + deltay * deltay;
		if(ds > cr * cr) return false; else if(ds < nape_Config.epsilon * nape_Config.epsilon) {
			if(c1.radius < c2.radius) arb.inject(c1.area,c1.worldCOMx,c1.worldCOMy); else arb.inject(c2.area,c2.worldCOMx,c2.worldCOMy);
			return true;
		} else {
			var d1 = Math.sqrt(ds);
			var id = 1 / d1;
			var x1 = 0.5 * (d1 - (c2.radius * c2.radius - c1.radius * c1.radius) * id);
			if(x1 <= -c1.radius) arb.inject(c1.area,c1.worldCOMx,c1.worldCOMy); else {
				var x2 = d1 - x1;
				if(x2 <= -c2.radius) arb.inject(c2.area,c2.worldCOMx,c2.worldCOMy); else {
					var area11 = 0.0;
					var y1 = 0.0;
					var area2 = 0.0;
					var y2 = 0.0;
					var X1 = x1;
					var cos1 = X1 / c1.radius;
					var sin1 = Math.sqrt(1 - cos1 * cos1);
					var theta1 = Math.acos(cos1);
					area11 = c1.radius * (c1.radius * theta1 - X1 * sin1);
					y1 = 2 / 3 * c1.radius * sin1 * sin1 * sin1 / (theta1 - cos1 * sin1);
					var X2 = x2;
					var cos2 = X2 / c2.radius;
					var sin2 = Math.sqrt(1 - cos2 * cos2);
					var theta2 = Math.acos(cos2);
					area2 = c2.radius * (c2.radius * theta2 - X2 * sin2);
					y2 = 2 / 3 * c2.radius * sin2 * sin2 * sin2 / (theta2 - cos2 * sin2);
					var tarea = area11 + area2;
					var ya = (y1 * area11 + (d1 - y2) * area2) / tarea * id;
					arb.inject(tarea,c1.worldCOMx + deltax * ya,c1.worldCOMy + deltay * ya);
				}
			}
			return true;
		}
	}
};
var zpp_$nape_geom_ZPP_$ConvexRayResult = function() {
	this.toiDistance = 0.0;
	this.inner = false;
	this.shape = null;
};
$hxClasses["zpp_nape.geom.ZPP_ConvexRayResult"] = zpp_$nape_geom_ZPP_$ConvexRayResult;
zpp_$nape_geom_ZPP_$ConvexRayResult.__name__ = ["zpp_nape","geom","ZPP_ConvexRayResult"];
zpp_$nape_geom_ZPP_$ConvexRayResult.prototype = {
	__class__: zpp_$nape_geom_ZPP_$ConvexRayResult
};
var zpp_$nape_geom_ZPP_$GeomVert = function() {
	this.next = null;
	this.y = 0.0;
	this.x = 0.0;
};
$hxClasses["zpp_nape.geom.ZPP_GeomVert"] = zpp_$nape_geom_ZPP_$GeomVert;
zpp_$nape_geom_ZPP_$GeomVert.__name__ = ["zpp_nape","geom","ZPP_GeomVert"];
zpp_$nape_geom_ZPP_$GeomVert.prototype = {
	__class__: zpp_$nape_geom_ZPP_$GeomVert
};
var zpp_$nape_geom_ZPP_$GeomPoly = function() {
	this.vertices = null;
	this.outer = null;
};
$hxClasses["zpp_nape.geom.ZPP_GeomPoly"] = zpp_$nape_geom_ZPP_$GeomPoly;
zpp_$nape_geom_ZPP_$GeomPoly.__name__ = ["zpp_nape","geom","ZPP_GeomPoly"];
zpp_$nape_geom_ZPP_$GeomPoly.prototype = {
	__class__: zpp_$nape_geom_ZPP_$GeomPoly
};
var zpp_$nape_geom_ZPP_$Mat23 = function() {
	this.ty = 0.0;
	this.tx = 0.0;
	this.d = 0.0;
	this.c = 0.0;
	this.b = 0.0;
	this.a = 0.0;
};
$hxClasses["zpp_nape.geom.ZPP_Mat23"] = zpp_$nape_geom_ZPP_$Mat23;
zpp_$nape_geom_ZPP_$Mat23.__name__ = ["zpp_nape","geom","ZPP_Mat23"];
zpp_$nape_geom_ZPP_$Mat23.prototype = {
	__class__: zpp_$nape_geom_ZPP_$Mat23
};
var zpp_$nape_geom_ZPP_$MatMN = function() {
	this.x = null;
	this.n = 0;
	this.m = 0;
};
$hxClasses["zpp_nape.geom.ZPP_MatMN"] = zpp_$nape_geom_ZPP_$MatMN;
zpp_$nape_geom_ZPP_$MatMN.__name__ = ["zpp_nape","geom","ZPP_MatMN"];
zpp_$nape_geom_ZPP_$MatMN.prototype = {
	__class__: zpp_$nape_geom_ZPP_$MatMN
};
var zpp_$nape_geom_ZPP_$ToiEvent = function() {
	this.kinematic = false;
	this.failed = false;
	this.slipped = false;
	this.axis = null;
	this.c2 = null;
	this.c1 = null;
	this.frozen2 = false;
	this.frozen1 = false;
	this.arbiter = null;
	this.s2 = null;
	this.s1 = null;
	this.toi = 0.0;
	this.next = null;
	this.c1 = new zpp_$nape_geom_ZPP_$Vec2();
	this.c2 = new zpp_$nape_geom_ZPP_$Vec2();
	this.axis = new zpp_$nape_geom_ZPP_$Vec2();
};
$hxClasses["zpp_nape.geom.ZPP_ToiEvent"] = zpp_$nape_geom_ZPP_$ToiEvent;
zpp_$nape_geom_ZPP_$ToiEvent.__name__ = ["zpp_nape","geom","ZPP_ToiEvent"];
zpp_$nape_geom_ZPP_$ToiEvent.prototype = {
	alloc: function() {
		this.failed = false;
		this.s1 = this.s2 = null;
		this.arbiter = null;
	}
	,free: function() {
	}
	,__class__: zpp_$nape_geom_ZPP_$ToiEvent
};
var zpp_$nape_geom_ZPP_$SweepDistance = function() { };
$hxClasses["zpp_nape.geom.ZPP_SweepDistance"] = zpp_$nape_geom_ZPP_$SweepDistance;
zpp_$nape_geom_ZPP_$SweepDistance.__name__ = ["zpp_nape","geom","ZPP_SweepDistance"];
zpp_$nape_geom_ZPP_$SweepDistance.dynamicSweep = function(toi,timeStep,lowerBound,negRadius,userAPI) {
	if(userAPI == null) userAPI = false;
	var s1 = toi.s1;
	var s2 = toi.s2;
	var b1 = s1.body;
	var b2 = s2.body;
	var deltax = 0.0;
	var deltay = 0.0;
	deltax = b2.velx - b1.velx;
	deltay = b2.vely - b1.vely;
	var ang1 = b1.angvel;
	if(ang1 < 0) ang1 = -ang1;
	var ang2 = b2.angvel;
	if(ang2 < 0) ang2 = -ang2;
	var angBias = s1.sweepCoef * ang1 + s2.sweepCoef * ang2;
	if(!userAPI && !toi.kinematic && deltax * deltax + deltay * deltay < nape_Config.dynamicSweepLinearThreshold * nape_Config.dynamicSweepLinearThreshold && angBias < nape_Config.dynamicSweepAngularThreshold) {
		toi.toi = -1;
		toi.failed = true;
		return;
	}
	var c1 = toi.c1;
	var c2 = toi.c2;
	var axis = toi.axis;
	var curTOI = lowerBound;
	var curIter = 0;
	while(true) {
		b1.sweepIntegrate(curTOI * timeStep);
		b1.sweepValidate(s1);
		b2.sweepIntegrate(curTOI * timeStep);
		b2.sweepValidate(s2);
		var sep = zpp_$nape_geom_ZPP_$SweepDistance.distance(s1,s2,c1,c2,axis) + negRadius;
		var dot = deltax * axis.x + deltay * axis.y;
		if(sep < nape_Config.distanceThresholdCCD) {
			if(userAPI) break;
			var d1x = 0.0;
			var d1y = 0.0;
			d1x = c1.x - b1.posx;
			d1y = c1.y - b1.posy;
			var d2x = 0.0;
			var d2y = 0.0;
			d2x = c2.x - b2.posx;
			d2y = c2.y - b2.posy;
			var proj = dot - b1.sweep_angvel * (axis.y * d1x - axis.x * d1y) + b2.sweep_angvel * (axis.y * d2x - axis.x * d2y);
			if(proj > 0) toi.slipped = true;
			if(proj <= 0 || sep < nape_Config.distanceThresholdCCD * 0.5) break;
		}
		var denom = (angBias - dot) * timeStep;
		if(denom <= 0) {
			curTOI = -1;
			break;
		}
		var delta = sep / denom;
		if(delta < 1e-6) delta = 1e-6;
		curTOI += delta;
		if(curTOI >= 1) {
			curTOI = 1;
			b1.sweepIntegrate(curTOI * timeStep);
			b1.sweepValidate(s1);
			b2.sweepIntegrate(curTOI * timeStep);
			b2.sweepValidate(s2);
			var sep1 = zpp_$nape_geom_ZPP_$SweepDistance.distance(s1,s2,c1,c2,axis) + negRadius;
			var dot1 = deltax * axis.x + deltay * axis.y;
			if(sep1 < nape_Config.distanceThresholdCCD) {
				if(userAPI) break;
				var d1x1 = 0.0;
				var d1y1 = 0.0;
				d1x1 = c1.x - b1.posx;
				d1y1 = c1.y - b1.posy;
				var d2x1 = 0.0;
				var d2y1 = 0.0;
				d2x1 = c2.x - b2.posx;
				d2y1 = c2.y - b2.posy;
				var proj1 = dot1 - b1.sweep_angvel * (axis.y * d1x1 - axis.x * d1y1) + b2.sweep_angvel * (axis.y * d2x1 - axis.x * d2y1);
				if(proj1 > 0) toi.slipped = true;
				if(proj1 <= 0 || sep1 < nape_Config.distanceThresholdCCD * 0.5) break;
			}
			curTOI = -1;
			break;
		}
		if(++curIter >= 40) {
			if(sep > negRadius) toi.failed = true;
			break;
		}
	}
	toi.toi = curTOI;
};
zpp_$nape_geom_ZPP_$SweepDistance.staticSweep = function(toi,timeStep,lowerBound,negRadius) {
	var s1 = toi.s1;
	var s2 = toi.s2;
	var b1 = s1.body;
	var b2 = s2.body;
	var deltax = 0.0;
	var deltay = 0.0;
	deltax = -b1.velx;
	deltay = -b1.vely;
	var ang1 = b1.sweep_angvel;
	if(ang1 < 0) ang1 = -ang1;
	var angBias = s1.sweepCoef * ang1;
	var c1 = toi.c1;
	var c2 = toi.c2;
	var axis = toi.axis;
	var curTOI = lowerBound;
	var curIter = 0;
	while(true) {
		b1.sweepIntegrate(curTOI * timeStep);
		b1.sweepValidate(s1);
		var sep = zpp_$nape_geom_ZPP_$SweepDistance.distance(s1,s2,c1,c2,axis) + negRadius;
		var dot = deltax * axis.x + deltay * axis.y;
		if(sep < nape_Config.distanceThresholdCCD) {
			var d1x = 0.0;
			var d1y = 0.0;
			d1x = c1.x - b1.posx;
			d1y = c1.y - b1.posy;
			var proj = dot - b1.sweep_angvel * (axis.y * d1x - axis.x * d1y);
			if(proj > 0) toi.slipped = true;
			if(proj <= 0 || sep < nape_Config.distanceThresholdCCD * 0.5) break;
		}
		var denom = (angBias - dot) * timeStep;
		if(denom <= 0) {
			curTOI = -1;
			break;
		}
		var delta = sep / denom;
		if(delta < 1e-6) delta = 1e-6;
		curTOI += delta;
		if(curTOI >= 1) {
			curTOI = 1;
			b1.sweepIntegrate(curTOI * timeStep);
			b1.sweepValidate(s1);
			var sep1 = zpp_$nape_geom_ZPP_$SweepDistance.distance(s1,s2,c1,c2,axis) + negRadius;
			var dot1 = deltax * axis.x + deltay * axis.y;
			if(sep1 < nape_Config.distanceThresholdCCD) {
				var d1x1 = 0.0;
				var d1y1 = 0.0;
				d1x1 = c1.x - b1.posx;
				d1y1 = c1.y - b1.posy;
				var proj1 = dot1 - b1.sweep_angvel * (axis.y * d1x1 - axis.x * d1y1);
				if(proj1 > 0) toi.slipped = true;
				if(proj1 <= 0 || sep1 < nape_Config.distanceThresholdCCD * 0.5) break;
			}
			curTOI = -1;
			break;
		}
		if(++curIter >= 40) {
			if(sep > negRadius) toi.failed = true;
			break;
		}
	}
	toi.toi = curTOI;
};
zpp_$nape_geom_ZPP_$SweepDistance.distance = function(s1,s2,w1,w2,axis,upperBound) {
	if(upperBound == null) upperBound = 1e100;
	if(s1.isCircle() && s2.isCircle()) {
		var c1 = s1.circle;
		var c2 = s2.circle;
		var dist;
		var nx = 0.0;
		var ny = 0.0;
		nx = c2.worldCOMx - c1.worldCOMx;
		ny = c2.worldCOMy - c1.worldCOMy;
		var len = zpp_$nape_util_ZPP_$Math.sqrt(nx * nx + ny * ny);
		dist = len - (c1.radius + c2.radius);
		if(dist < upperBound) {
			if(len == 0) {
				nx = 1;
				ny = 0;
			} else {
				var t = 1.0 / len;
				nx *= t;
				ny *= t;
			}
			var t1 = c1.radius;
			w1.x = c1.worldCOMx + nx * t1;
			w1.y = c1.worldCOMy + ny * t1;
			var t2 = -c2.radius;
			w2.x = c2.worldCOMx + nx * t2;
			w2.y = c2.worldCOMy + ny * t2;
			axis.x = nx;
			axis.y = ny;
		}
		return dist;
	} else {
		var swapped = false;
		if(s1.isCircle() && s2.isPolygon()) {
			var tmp = s1;
			s1 = s2;
			s2 = tmp;
			var tmp2 = w1;
			w1 = w2;
			w2 = tmp2;
			swapped = true;
		}
		if(s1.isPolygon() && s2.isCircle()) {
			var poly = s1.polygon;
			var circle = s2.circle;
			var best = -1e100;
			var a0 = null;
			var cx_ite = poly.edges.begin();
			while(cx_ite != null) {
				var a = cx_ite.elem();
				var dist1 = a.gnormx * circle.worldCOMx + a.gnormy * circle.worldCOMy - a.gprojection - circle.radius;
				if(dist1 > upperBound) {
					best = dist1;
					break;
				}
				if(dist1 > 0) {
					if(dist1 > best) {
						best = dist1;
						a0 = a;
					}
				} else if(best < 0 && dist1 > best) {
					best = dist1;
					a0 = a;
				}
				cx_ite = cx_ite.next;
			}
			if(best < upperBound) {
				var v0 = a0.gp0;
				var v1 = a0.gp1;
				var dt = circle.worldCOMy * a0.gnormx - circle.worldCOMx * a0.gnormy;
				if(dt <= v0.y * a0.gnormx - v0.x * a0.gnormy) {
					var nx1 = 0.0;
					var ny1 = 0.0;
					nx1 = circle.worldCOMx - v0.x;
					ny1 = circle.worldCOMy - v0.y;
					var len1 = zpp_$nape_util_ZPP_$Math.sqrt(nx1 * nx1 + ny1 * ny1);
					best = len1 - (0 + circle.radius);
					if(best < upperBound) {
						if(len1 == 0) {
							nx1 = 1;
							ny1 = 0;
						} else {
							var t3 = 1.0 / len1;
							nx1 *= t3;
							ny1 *= t3;
						}
						var t4 = 0;
						w1.x = v0.x + nx1 * t4;
						w1.y = v0.y + ny1 * t4;
						var t5 = -circle.radius;
						w2.x = circle.worldCOMx + nx1 * t5;
						w2.y = circle.worldCOMy + ny1 * t5;
						axis.x = nx1;
						axis.y = ny1;
					}
				} else if(dt >= v1.y * a0.gnormx - v1.x * a0.gnormy) {
					var nx2 = 0.0;
					var ny2 = 0.0;
					nx2 = circle.worldCOMx - v1.x;
					ny2 = circle.worldCOMy - v1.y;
					var len2 = zpp_$nape_util_ZPP_$Math.sqrt(nx2 * nx2 + ny2 * ny2);
					best = len2 - (0 + circle.radius);
					if(best < upperBound) {
						if(len2 == 0) {
							nx2 = 1;
							ny2 = 0;
						} else {
							var t6 = 1.0 / len2;
							nx2 *= t6;
							ny2 *= t6;
						}
						var t7 = 0;
						w1.x = v1.x + nx2 * t7;
						w1.y = v1.y + ny2 * t7;
						var t8 = -circle.radius;
						w2.x = circle.worldCOMx + nx2 * t8;
						w2.y = circle.worldCOMy + ny2 * t8;
						axis.x = nx2;
						axis.y = ny2;
					}
				} else {
					var t9 = -circle.radius;
					w2.x = circle.worldCOMx + a0.gnormx * t9;
					w2.y = circle.worldCOMy + a0.gnormy * t9;
					var t10 = -best;
					w1.x = w2.x + a0.gnormx * t10;
					w1.y = w2.y + a0.gnormy * t10;
					axis.x = a0.gnormx;
					axis.y = a0.gnormy;
				}
			}
			if(swapped) {
				axis.x = -axis.x;
				axis.y = -axis.y;
			}
			return best;
		} else {
			var p1 = s1.polygon;
			var p2 = s2.polygon;
			var best1 = -1e100;
			var a1 = null;
			var a2 = null;
			var besti = 0;
			var cx_ite1 = p1.edges.begin();
			while(cx_ite1 != null) {
				var a3 = cx_ite1.elem();
				var min = 1e100;
				var cx_ite2 = p2.gverts.begin();
				while(cx_ite2 != null) {
					var v = cx_ite2.elem();
					var k = a3.gnormx * v.x + a3.gnormy * v.y;
					if(k < min) min = k;
					cx_ite2 = cx_ite2.next;
				}
				min -= a3.gprojection;
				if(min > upperBound) {
					best1 = min;
					break;
				}
				if(min > 0) {
					if(min > best1) {
						best1 = min;
						a1 = a3;
						besti = 1;
					}
				} else if(best1 < 0 && min > best1) {
					best1 = min;
					a1 = a3;
					besti = 1;
				}
				cx_ite1 = cx_ite1.next;
			}
			if(best1 < upperBound) {
				var cx_ite3 = p2.edges.begin();
				while(cx_ite3 != null) {
					var a4 = cx_ite3.elem();
					var min1 = 1e100;
					var cx_ite4 = p1.gverts.begin();
					while(cx_ite4 != null) {
						var v2 = cx_ite4.elem();
						var k1 = a4.gnormx * v2.x + a4.gnormy * v2.y;
						if(k1 < min1) min1 = k1;
						cx_ite4 = cx_ite4.next;
					}
					min1 -= a4.gprojection;
					if(min1 > upperBound) {
						best1 = min1;
						break;
					}
					if(min1 > 0) {
						if(min1 > best1) {
							best1 = min1;
							a2 = a4;
							besti = 2;
						}
					} else if(best1 < 0 && min1 > best1) {
						best1 = min1;
						a2 = a4;
						besti = 2;
					}
					cx_ite3 = cx_ite3.next;
				}
				if(best1 < upperBound) {
					var q1;
					var q2;
					var ax;
					if(besti == 1) {
						q1 = p1;
						q2 = p2;
						ax = a1;
					} else {
						q1 = p2;
						q2 = p1;
						ax = a2;
						var tmp1 = w1;
						w1 = w2;
						w2 = tmp1;
						swapped = !swapped;
					}
					var ay = null;
					var min2 = 1e100;
					var cx_ite5 = q2.edges.begin();
					while(cx_ite5 != null) {
						var a5 = cx_ite5.elem();
						var k2 = ax.gnormx * a5.gnormx + ax.gnormy * a5.gnormy;
						if(k2 < min2) {
							min2 = k2;
							ay = a5;
						}
						cx_ite5 = cx_ite5.next;
					}
					if(swapped) {
						axis.x = -ax.gnormx;
						axis.y = -ax.gnormy;
					} else {
						axis.x = ax.gnormx;
						axis.y = ax.gnormy;
					}
					if(best1 >= 0) {
						var v01 = ax.gp0;
						var v11 = ax.gp1;
						var q0 = ay.gp0;
						var q11 = ay.gp1;
						var vx = 0.0;
						var vy = 0.0;
						var qx = 0.0;
						var qy = 0.0;
						vx = v11.x - v01.x;
						vy = v11.y - v01.y;
						qx = q11.x - q0.x;
						qy = q11.y - q0.y;
						var vdot = 1 / (vx * vx + vy * vy);
						var qdot = 1 / (qx * qx + qy * qy);
						var t11 = -(vx * (v01.x - q0.x) + vy * (v01.y - q0.y)) * vdot;
						var t21 = -(vx * (v01.x - q11.x) + vy * (v01.y - q11.y)) * vdot;
						var s11 = -(qx * (q0.x - v01.x) + qy * (q0.y - v01.y)) * qdot;
						var s21 = -(qx * (q0.x - v11.x) + qy * (q0.y - v11.y)) * qdot;
						if(t11 < 0) t11 = 0; else if(t11 > 1) t11 = 1;
						if(t21 < 0) t21 = 0; else if(t21 > 1) t21 = 1;
						if(s11 < 0) s11 = 0; else if(s11 > 1) s11 = 1;
						if(s21 < 0) s21 = 0; else if(s21 > 1) s21 = 1;
						var f1x = 0.0;
						var f1y = 0.0;
						var t12 = t11;
						f1x = v01.x + vx * t12;
						f1y = v01.y + vy * t12;
						var f2x = 0.0;
						var f2y = 0.0;
						var t13 = t21;
						f2x = v01.x + vx * t13;
						f2y = v01.y + vy * t13;
						var g1x = 0.0;
						var g1y = 0.0;
						var t14 = s11;
						g1x = q0.x + qx * t14;
						g1y = q0.y + qy * t14;
						var g2x = 0.0;
						var g2y = 0.0;
						var t15 = s21;
						g2x = q0.x + qx * t15;
						g2y = q0.y + qy * t15;
						var d1 = zpp_$nape_geom_ZPP_$VecMath.vec_dsq(f1x,f1y,q0.x,q0.y);
						var d2 = zpp_$nape_geom_ZPP_$VecMath.vec_dsq(f2x,f2y,q11.x,q11.y);
						var e1 = zpp_$nape_geom_ZPP_$VecMath.vec_dsq(g1x,g1y,v01.x,v01.y);
						var e2 = zpp_$nape_geom_ZPP_$VecMath.vec_dsq(g2x,g2y,v11.x,v11.y);
						var minfx = 0.0;
						var minfy = 0.0;
						var minq = null;
						if(d1 < d2) {
							minfx = f1x;
							minfy = f1y;
							minq = q0;
						} else {
							minfx = f2x;
							minfy = f2y;
							minq = q11;
							d1 = d2;
						}
						var mingx = 0.0;
						var mingy = 0.0;
						var minv = null;
						if(e1 < e2) {
							mingx = g1x;
							mingy = g1y;
							minv = v01;
						} else {
							mingx = g2x;
							mingy = g2y;
							minv = v11;
							e1 = e2;
						}
						if(d1 < e1) {
							w1.x = minfx;
							w1.y = minfy;
							w2.x = minq.x;
							w2.y = minq.y;
							best1 = Math.sqrt(d1);
						} else {
							w2.x = mingx;
							w2.y = mingy;
							w1.x = minv.x;
							w1.y = minv.y;
							best1 = Math.sqrt(e1);
						}
						if(best1 != 0) {
							axis.x = w2.x - w1.x;
							axis.y = w2.y - w1.y;
							var t16 = 1.0 / best1;
							axis.x *= t16;
							axis.y *= t16;
							if(swapped) {
								axis.x = -axis.x;
								axis.y = -axis.y;
							}
						}
						return best1;
					} else {
						var c0x = 0.0;
						var c0y = 0.0;
						c0x = ay.gp0.x;
						c0y = ay.gp0.y;
						var c1x = 0.0;
						var c1y = 0.0;
						c1x = ay.gp1.x;
						c1y = ay.gp1.y;
						var dvx = 0.0;
						var dvy = 0.0;
						dvx = c1x - c0x;
						dvy = c1y - c0y;
						var d0 = ax.gnormy * c0x - ax.gnormx * c0y;
						var d11 = ax.gnormy * c1x - ax.gnormx * c1y;
						var den = 1 / (d11 - d0);
						var t17 = (-ax.tp1 - d0) * den;
						if(t17 > nape_Config.epsilon) {
							var t19 = t17;
							c0x += dvx * t19;
							c0y += dvy * t19;
						}
						var t18 = (-ax.tp0 - d11) * den;
						if(t18 < -nape_Config.epsilon) {
							var t20 = t18;
							c1x += dvx * t20;
							c1y += dvy * t20;
						}
						var c0d = c0x * ax.gnormx + c0y * ax.gnormy - ax.gprojection;
						var c1d = c1x * ax.gnormx + c1y * ax.gnormy - ax.gprojection;
						if(c0d < c1d) {
							w2.x = c0x;
							w2.y = c0y;
							var t22 = -c0d;
							w1.x = w2.x + ax.gnormx * t22;
							w1.y = w2.y + ax.gnormy * t22;
							return c0d;
						} else {
							w2.x = c1x;
							w2.y = c1y;
							var t23 = -c1d;
							w1.x = w2.x + ax.gnormx * t23;
							w1.y = w2.y + ax.gnormy * t23;
							return c1d;
						}
					}
				} else return upperBound;
			} else return upperBound;
		}
	}
};
var zpp_$nape_geom_ZPP_$Vec2 = function() {
	this.y = 0.0;
	this.x = 0.0;
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this._inuse = false;
	this.next = null;
	this.weak = false;
	this.outer = null;
	this._isimmutable = null;
	this._immutable = false;
	this._validate = null;
	this._invalidate = null;
};
$hxClasses["zpp_nape.geom.ZPP_Vec2"] = zpp_$nape_geom_ZPP_$Vec2;
zpp_$nape_geom_ZPP_$Vec2.__name__ = ["zpp_nape","geom","ZPP_Vec2"];
zpp_$nape_geom_ZPP_$Vec2.get = function(x,y,immutable) {
	if(immutable == null) immutable = false;
	var ret;
	if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool == null) ret = new zpp_$nape_geom_ZPP_$Vec2(); else {
		ret = zpp_$nape_geom_ZPP_$Vec2.zpp_pool;
		zpp_$nape_geom_ZPP_$Vec2.zpp_pool = ret.next;
		ret.next = null;
	}
	ret.alloc();
	ret._immutable = immutable;
	ret.x = x;
	ret.y = y;
	return ret;
};
zpp_$nape_geom_ZPP_$Vec2.prototype = {
	validate: function() {
		if(this._validate != null) this._validate();
	}
	,invalidate: function() {
		if(this._invalidate != null) this._invalidate(this);
	}
	,immutable: function() {
	}
	,wrapper: function() {
		if(this.outer == null) {
			this.outer = new nape_geom_Vec2();
			var o = this.outer.zpp_inner;
			o.free();
			o.next = zpp_$nape_geom_ZPP_$Vec2.zpp_pool;
			zpp_$nape_geom_ZPP_$Vec2.zpp_pool = o;
			this.outer.zpp_inner = this;
		}
		return this.outer;
	}
	,free: function() {
		if(this.outer != null) {
			this.outer.zpp_inner = null;
			this.outer = null;
		}
		this._isimmutable = null;
		this._validate = null;
		this._invalidate = null;
	}
	,alloc: function() {
		this.weak = false;
	}
	,elem: function() {
		return this;
	}
	,begin: function() {
		return this.next;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		o._inuse = true;
		temp = o;
		temp.next = this.begin();
		this.next = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,insert: function(cur,o) {
		return this.inlined_insert(cur,o);
	}
	,inlined_insert: function(cur,o) {
		var temp;
		o._inuse = true;
		temp = o;
		if(cur == null) {
			temp.next = this.begin();
			this.next = temp;
		} else {
			temp.next = cur.next;
			cur.next = temp;
		}
		this.pushmod = this.modified = true;
		this.length++;
		return temp;
	}
	,erase: function(pre) {
		return this.inlined_erase(pre);
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.next = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		old.elem()._inuse = false;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,reverse: function() {
		var cur = this.begin();
		var pre = null;
		while(cur != null) {
			var nx = cur.next;
			cur.next = pre;
			this.next = cur;
			pre = cur;
			cur = nx;
		}
		this.modified = true;
		this.pushmod = true;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,size: function() {
		return this.length;
	}
	,front: function() {
		return this.begin().elem();
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,toString: function() {
		return "{ x: " + this.x + " y: " + this.y + " }";
	}
	,__class__: zpp_$nape_geom_ZPP_$Vec2
};
var zpp_$nape_geom_ZPP_$Vec3 = function() {
	this._validate = null;
	this.z = 0.0;
	this.y = 0.0;
	this.x = 0.0;
};
$hxClasses["zpp_nape.geom.ZPP_Vec3"] = zpp_$nape_geom_ZPP_$Vec3;
zpp_$nape_geom_ZPP_$Vec3.__name__ = ["zpp_nape","geom","ZPP_Vec3"];
zpp_$nape_geom_ZPP_$Vec3.prototype = {
	validate: function() {
		if(this._validate != null) this._validate();
	}
	,__class__: zpp_$nape_geom_ZPP_$Vec3
};
var zpp_$nape_geom_ZPP_$VecMath = function() { };
$hxClasses["zpp_nape.geom.ZPP_VecMath"] = zpp_$nape_geom_ZPP_$VecMath;
zpp_$nape_geom_ZPP_$VecMath.__name__ = ["zpp_nape","geom","ZPP_VecMath"];
zpp_$nape_geom_ZPP_$VecMath.vec_dsq = function(ax,ay,bx,by) {
	var dx = 0.0;
	var dy = 0.0;
	dx = ax - bx;
	dy = ay - by;
	return dx * dx + dy * dy;
};
var zpp_$nape_phys_ZPP_$Interactor = function() {
	this.cbSet = null;
	this.cbTypes = null;
	this.group = null;
	this.cbsets = null;
	this.icompound = null;
	this.ibody = null;
	this.ishape = null;
	this.userData = null;
	this.id = 0;
	this.outer_i = null;
	this.id = zpp_$nape_ZPP_$ID.Interactor();
	this.cbsets = new zpp_$nape_util_ZNPList_$ZPP_$CallbackSet();
	this.cbTypes = new zpp_$nape_util_ZNPList_$ZPP_$CbType();
};
$hxClasses["zpp_nape.phys.ZPP_Interactor"] = zpp_$nape_phys_ZPP_$Interactor;
zpp_$nape_phys_ZPP_$Interactor.__name__ = ["zpp_nape","phys","ZPP_Interactor"];
zpp_$nape_phys_ZPP_$Interactor.get = function(i1,i2) {
	var id;
	if(i1.id < i2.id) id = i1.id; else id = i2.id;
	var di;
	if(i1.id < i2.id) di = i2.id; else di = i1.id;
	var xs;
	if(i1.cbsets.length < i2.cbsets.length) xs = i1.cbsets; else xs = i2.cbsets;
	var ret = null;
	var cx_ite = xs.begin();
	while(cx_ite != null) {
		var x = cx_ite.elem();
		if(x.id == id && x.di == di) {
			ret = x;
			break;
		}
		cx_ite = cx_ite.next;
	}
	return ret;
};
zpp_$nape_phys_ZPP_$Interactor.int_callback = function(set,x,cb) {
	var o1 = set.int1;
	var o2 = set.int2;
	if(x.options1.compatible(o1.cbTypes) && x.options2.compatible(o2.cbTypes)) {
		cb.int1 = o1;
		cb.int2 = o2;
	} else {
		cb.int1 = o2;
		cb.int2 = o1;
	}
};
zpp_$nape_phys_ZPP_$Interactor.prototype = {
	isShape: function() {
		return this.ishape != null;
	}
	,isBody: function() {
		return this.ibody != null;
	}
	,isCompound: function() {
		return this.icompound != null;
	}
	,__iaddedToSpace: function() {
		if(this.group != null) this.group.addInteractor(this);
		var cx_ite = this.cbTypes.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			cb.addInteractor(this);
			cx_ite = cx_ite.next;
		}
		this.alloc_cbSet();
	}
	,__iremovedFromSpace: function() {
		if(this.group != null) this.group.remInteractor(this);
		var cx_ite = this.cbTypes.begin();
		while(cx_ite != null) {
			var cb = cx_ite.elem();
			cb.remInteractor(this);
			cx_ite = cx_ite.next;
		}
		this.dealloc_cbSet();
	}
	,wake: function() {
		if(this.isShape()) {
			var body = this.ishape.body;
			if(body != null && body.space != null) body.space.non_inlined_wake(body);
			true;
		} else if(this.isBody()) {
			if(this.ibody.space != null) this.ibody.space.non_inlined_wake(this.ibody); else false;
		} else {
			if(this.icompound.space != null) this.icompound.space.wakeCompound(this.icompound);
			true;
		}
	}
	,getSpace: function() {
		if(this.isShape()) {
			if(this.ishape.body == null) return null; else return this.ishape.body.space;
		} else if(this.isBody()) return this.ibody.space; else return this.icompound.space;
	}
	,insert_cbtype: function(cb) {
		if(!this.cbTypes.has(cb)) {
			var space = this.getSpace();
			if(space != null) {
				this.dealloc_cbSet();
				cb.addInteractor(this);
			}
			var pre = null;
			var cx_ite = this.cbTypes.begin();
			while(cx_ite != null) {
				var j = cx_ite.elem();
				if(zpp_$nape_callbacks_ZPP_$CbType.setlt(cb,j)) break;
				pre = cx_ite;
				cx_ite = cx_ite.next;
			}
			this.cbTypes.inlined_insert(pre,cb);
			if(space != null) {
				this.alloc_cbSet();
				this.wake();
			}
		}
	}
	,alloc_cbSet: function() {
		var space = this.getSpace();
		if((this.cbSet = space.cbsets.get(this.cbTypes)) != null) {
			this.cbSet.increment();
			this.cbSet.addInteractor(this);
			this.cbSet.validate();
			space.freshInteractorType(this);
		}
	}
	,dealloc_cbSet: function() {
		var space = this.getSpace();
		if(this.cbSet != null) {
			this.cbSet.remInteractor(this);
			space.nullInteractorType(this);
			if(this.cbSet.decrement()) {
				space.cbsets.remove(this.cbSet);
				var o = this.cbSet;
				o.free();
				o.next = zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool;
				zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool = o;
			}
			this.cbSet = null;
		}
	}
	,immutable_midstep: function(n) {
		if(this.isBody()) this.ibody.__immutable_midstep(n); else if(this.isShape()) this.ishape.__immutable_midstep(n); else this.icompound.__imutable_midstep(n);
	}
	,lookup_group: function() {
		var cur = this;
		while(cur != null && cur.group == null) if(cur.isShape()) cur = cur.ishape.body; else if(cur.isCompound()) cur = cur.icompound.compound; else cur = cur.ibody.compound;
		if(cur == null) return null; else return cur.group;
	}
	,__class__: zpp_$nape_phys_ZPP_$Interactor
};
var zpp_$nape_phys_ZPP_$Body = function() {
	this.wrap_worldCOM = null;
	this.wrap_localCOM = null;
	this.zip_worldCOM = false;
	this.worldCOMy = 0.0;
	this.worldCOMx = 0.0;
	this.zip_localCOM = false;
	this.localCOMy = 0.0;
	this.localCOMx = 0.0;
	this.zip_aabb = false;
	this.aabb = null;
	this.norotate = false;
	this.sinertia = 0.0;
	this.iinertia = 0.0;
	this.cinertia = 0.0;
	this.zip_inertia = false;
	this.inertia = 0.0;
	this.inertiaMode = 0;
	this.zip_gravMassScale = false;
	this.gravMassScale = 0.0;
	this.gravMassMode = 0;
	this.zip_gravMass = false;
	this.gravMass = 0.0;
	this.nomove = false;
	this.cmass = 0.0;
	this.smass = 0.0;
	this.imass = 0.0;
	this.massMode = 0;
	this.zip_mass = false;
	this.mass = 0.0;
	this.zip_axis = false;
	this.axisy = 0.0;
	this.axisx = 0.0;
	this.rot = 0.0;
	this.pre_rot = 0.0;
	this.kinangvel = 0.0;
	this.torque = 0.0;
	this.angvel = 0.0;
	this.svely = 0.0;
	this.svelx = 0.0;
	this.kinvely = 0.0;
	this.kinvelx = 0.0;
	this.forcey = 0.0;
	this.forcex = 0.0;
	this.wrap_vel = null;
	this.vely = 0.0;
	this.velx = 0.0;
	this.wrap_pos = null;
	this.posy = 0.0;
	this.posx = 0.0;
	this.pre_posy = 0.0;
	this.pre_posx = 0.0;
	this.disableCCD = false;
	this.bulletEnabled = false;
	this.bullet = false;
	this.sweepRadius = 0.0;
	this.sweepFrozen = false;
	this.sweep_angvel = 0.0;
	this.sweepTime = 0.0;
	this.component = null;
	this.constraints = null;
	this.arbiters = null;
	this.space = null;
	this.wrap_shapes = null;
	this.shapes = null;
	this.compound = null;
	this.type = 0;
	this.world = false;
	this.outer = null;
	zpp_$nape_phys_ZPP_$Interactor.call(this);
	this.ibody = this;
	this.world = false;
	this.bulletEnabled = false;
	this.sweepTime = 0;
	this.sweep_angvel = 0;
	this.norotate = this.nomove = false;
	this.disableCCD = false;
	this.posx = 0;
	this.posy = 0;
	this.rot = 0;
	this.axisx = 0;
	this.axisy = 1;
	this.svelx = 0;
	this.svely = 0;
	this.velx = 0;
	this.vely = 0;
	this.kinvelx = 0;
	this.kinvely = 0;
	this.forcex = 0;
	this.forcey = 0;
	this.torque = this.angvel = this.kinangvel = 0;
	this.pre_posx = zpp_$nape_ZPP_$Const.POSINF();
	this.pre_posy = zpp_$nape_ZPP_$Const.POSINF();
	this.pre_rot = zpp_$nape_ZPP_$Const.POSINF();
	this.localCOMx = 0;
	this.localCOMy = 0;
	this.worldCOMx = 0;
	this.worldCOMy = 0;
	this.zip_aabb = true;
	this.aabb = zpp_$nape_geom_ZPP_$AABB.get(0,0,0,0);
	this.aabb._immutable = true;
	var me = this;
	this.aabb._validate = $bind(this,this.aabb_validate);
	this.massMode = zpp_$nape_util_ZPP_$Flags.id_MassMode_DEFAULT;
	this.gravMassMode = zpp_$nape_util_ZPP_$Flags.id_GravMassMode_DEFAULT;
	this.gravMassScale = 1.0;
	this.inertiaMode = zpp_$nape_util_ZPP_$Flags.id_InertiaMode_DEFAULT;
	this.arbiters = new zpp_$nape_util_ZNPList_$ZPP_$Arbiter();
	this.constraints = new zpp_$nape_util_ZNPList_$ZPP_$Constraint();
	this.shapes = new zpp_$nape_util_ZNPList_$ZPP_$Shape();
	this.wrap_shapes = zpp_$nape_util_ZPP_$ShapeList.get(this.shapes);
	this.wrap_shapes.zpp_inner.adder = $bind(this,this.shapes_adder);
	this.wrap_shapes.zpp_inner.subber = $bind(this,this.shapes_subber);
	this.wrap_shapes.zpp_inner._invalidate = $bind(this,this.shapes_invalidate);
	this.kinematicDelaySleep = false;
};
$hxClasses["zpp_nape.phys.ZPP_Body"] = zpp_$nape_phys_ZPP_$Body;
zpp_$nape_phys_ZPP_$Body.__name__ = ["zpp_nape","phys","ZPP_Body"];
zpp_$nape_phys_ZPP_$Body.__static = function() {
	var ret = new nape_phys_Body(nape_phys_BodyType.get_STATIC());
	var si = ret.zpp_inner;
	si.world = true;
	si.wrap_shapes.zpp_inner.immutable = true;
	si.smass = si.imass = si.cmass = si.mass = si.gravMass = 0.0;
	si.sinertia = si.iinertia = si.cinertia = si.inertia = 0.0;
	si.cbTypes.clear();
	return ret;
};
zpp_$nape_phys_ZPP_$Body.__super__ = zpp_$nape_phys_ZPP_$Interactor;
zpp_$nape_phys_ZPP_$Body.prototype = $extend(zpp_$nape_phys_ZPP_$Interactor.prototype,{
	isStatic: function() {
		return this.type == zpp_$nape_util_ZPP_$Flags.id_BodyType_STATIC;
	}
	,isDynamic: function() {
		return this.type == zpp_$nape_util_ZPP_$Flags.id_BodyType_DYNAMIC;
	}
	,isKinematic: function() {
		return this.type == zpp_$nape_util_ZPP_$Flags.id_BodyType_KINEMATIC;
	}
	,invalidate_type: function() {
		this.invalidate_mass();
		this.invalidate_inertia();
	}
	,invalidate_shapes: function() {
		this.invalidate_aabb();
		this.invalidate_localCOM();
		this.invalidate_mass();
		this.invalidate_inertia();
	}
	,atRest: function(dt) {
		if(!this.isDynamic()) return this.component.sleeping; else {
			var linSq = nape_Config.linearSleepThreshold;
			linSq *= linSq;
			var cansleep;
			if(this.velx * this.velx + this.vely * this.vely > linSq) cansleep = false; else if(zpp_$nape_geom_ZPP_$VecMath.vec_dsq(this.posx,this.posy,this.pre_posx,this.pre_posy) > 0.25 * linSq * dt * dt) cansleep = false; else {
				var dx = 0.0;
				var dy = 0.0;
				dx = this.aabb.maxx - this.aabb.minx;
				dy = this.aabb.maxy - this.aabb.miny;
				var idl = dx * dx + dy * dy;
				var angSq = nape_Config.angularSleepThreshold;
				angSq *= angSq;
				if(4 * this.angvel * this.angvel * idl > angSq) cansleep = false; else {
					var dr = this.rot - this.pre_rot;
					if(dr * dr * idl > angSq * dt * dt) cansleep = false; else cansleep = true;
				}
			}
			if(!cansleep) this.component.waket = this.space.stamp;
			return this.component.waket + nape_Config.sleepDelay < this.space.stamp;
		}
	}
	,refreshArbiters: function() {
		var cx_ite = this.arbiters.begin();
		while(cx_ite != null) {
			var arb = cx_ite.elem();
			arb.invalidated = true;
			cx_ite = cx_ite.next;
		}
	}
	,sweepIntegrate: function(dt) {
		var delta = dt - this.sweepTime;
		if(delta != 0) {
			this.sweepTime = dt;
			var t = delta;
			this.posx += this.velx * t;
			this.posy += this.vely * t;
			if(this.angvel != 0) this.delta_rot(this.sweep_angvel * delta);
		}
	}
	,sweepValidate: function(s) {
		if(s.isCircle()) {
			s.worldCOMx = this.posx + (this.axisy * s.localCOMx - this.axisx * s.localCOMy);
			s.worldCOMy = this.posy + (s.localCOMx * this.axisx + s.localCOMy * this.axisy);
		} else {
			var p = s.polygon;
			var li = p.lverts.begin();
			var cx_ite = p.gverts.begin();
			while(cx_ite != null) {
				var g = cx_ite.elem();
				var l = li.elem();
				li = li.next;
				g.x = this.posx + (this.axisy * l.x - this.axisx * l.y);
				g.y = this.posy + (l.x * this.axisx + l.y * this.axisy);
				cx_ite = cx_ite.next;
			}
			var ite = p.edges.begin();
			var cx_ite1 = p.gverts.begin();
			var u = cx_ite1.elem();
			cx_ite1 = cx_ite1.next;
			while(cx_ite1 != null) {
				var v1 = cx_ite1.elem();
				var e = ite.elem();
				ite = ite.next;
				e.gnormx = this.axisy * e.lnormx - this.axisx * e.lnormy;
				e.gnormy = e.lnormx * this.axisx + e.lnormy * this.axisy;
				e.gprojection = this.posx * e.gnormx + this.posy * e.gnormy + e.lprojection;
				e.tp0 = u.y * e.gnormx - u.x * e.gnormy;
				e.tp1 = v1.y * e.gnormx - v1.x * e.gnormy;
				u = v1;
				cx_ite1 = cx_ite1.next;
			}
			var v = p.gverts.front();
			var e1 = ite.elem();
			ite = ite.next;
			e1.gnormx = this.axisy * e1.lnormx - this.axisx * e1.lnormy;
			e1.gnormy = e1.lnormx * this.axisx + e1.lnormy * this.axisy;
			e1.gprojection = this.posx * e1.gnormx + this.posy * e1.gnormy + e1.lprojection;
			e1.tp0 = u.y * e1.gnormx - u.x * e1.gnormy;
			e1.tp1 = v.y * e1.gnormx - v.x * e1.gnormy;
		}
	}
	,invalidate_pos: function() {
		var cx_ite = this.shapes.begin();
		while(cx_ite != null) {
			var s = cx_ite.elem();
			if(s.type == zpp_$nape_util_ZPP_$Flags.id_ShapeType_POLYGON) {
				s.polygon.invalidate_gverts();
				s.polygon.invalidate_gaxi();
			}
			s.invalidate_worldCOM();
			cx_ite = cx_ite.next;
		}
		this.invalidate_worldCOM();
	}
	,pos_invalidate: function(pos) {
		this.immutable_midstep("Body::position");
		if(!(this.posx == pos.x && this.posy == pos.y)) {
			this.posx = pos.x;
			this.posy = pos.y;
			this.invalidate_pos();
			this.wake();
		}
	}
	,pos_validate: function() {
		this.wrap_pos.zpp_inner.x = this.posx;
		this.wrap_pos.zpp_inner.y = this.posy;
	}
	,vel_invalidate: function(vel) {
		this.velx = vel.x;
		this.vely = vel.y;
		this.invalidate_wake();
	}
	,vel_validate: function() {
		this.wrap_vel.zpp_inner.x = this.velx;
		this.wrap_vel.zpp_inner.y = this.vely;
	}
	,setupPosition: function() {
		this.wrap_pos = nape_geom_Vec2.get(this.posx,this.posy);
		this.wrap_pos.zpp_inner._inuse = true;
		if(this.world) this.wrap_pos.zpp_inner._immutable = true; else {
			this.wrap_pos.zpp_inner._invalidate = $bind(this,this.pos_invalidate);
			this.wrap_pos.zpp_inner._validate = $bind(this,this.pos_validate);
		}
	}
	,setupVelocity: function() {
		this.wrap_vel = nape_geom_Vec2.get(this.velx,this.vely);
		this.wrap_vel.zpp_inner._inuse = true;
		if(this.world) this.wrap_vel.zpp_inner._immutable = true; else {
			this.wrap_vel.zpp_inner._invalidate = $bind(this,this.vel_invalidate);
			this.wrap_vel.zpp_inner._validate = $bind(this,this.vel_validate);
		}
	}
	,invalidate_rot: function() {
		this.zip_axis = true;
		var cx_ite = this.shapes.begin();
		while(cx_ite != null) {
			var s = cx_ite.elem();
			if(s.type == zpp_$nape_util_ZPP_$Flags.id_ShapeType_POLYGON) {
				s.polygon.invalidate_gverts();
				s.polygon.invalidate_gaxi();
			}
			s.invalidate_worldCOM();
			cx_ite = cx_ite.next;
		}
		this.invalidate_worldCOM();
	}
	,validate_axis: function() {
		if(this.zip_axis) {
			this.zip_axis = false;
			this.quick_validate_axis();
		}
	}
	,quick_validate_axis: function() {
		this.axisx = Math.sin(this.rot);
		this.axisy = Math.cos(this.rot);
	}
	,delta_rot: function(dr) {
		this.rot += dr;
		if(dr * dr > 0.0001) this.quick_validate_axis(); else {
			var d2 = dr * dr;
			var p = 1 - 0.5 * d2;
			var m = 1 - d2 * d2 / 8;
			var nx = (p * this.axisx + dr * this.axisy) * m;
			this.axisy = (p * this.axisy - dr * this.axisx) * m;
			this.axisx = nx;
		}
	}
	,invalidate_mass: function() {
		this.zip_mass = true;
		this.invalidate_gravMass();
	}
	,validate_mass: function() {
		var exist = false;
		if(this.zip_mass || this.massMode == zpp_$nape_util_ZPP_$Flags.id_MassMode_DEFAULT && exist) {
			this.zip_mass = false;
			if(this.massMode == zpp_$nape_util_ZPP_$Flags.id_MassMode_DEFAULT) {
				this.cmass = 0;
				var cx_ite = this.shapes.begin();
				while(cx_ite != null) {
					var s = cx_ite.elem();
					s.refmaterial.density = s.material.density;
					s.validate_area_inertia();
					this.cmass += s.area * s.material.density;
					cx_ite = cx_ite.next;
				}
			}
			if(this.isDynamic() && !this.nomove) {
				this.mass = this.cmass;
				this.imass = this.smass = 1.0 / this.mass;
			} else {
				this.mass = zpp_$nape_ZPP_$Const.POSINF();
				this.imass = this.smass = 0.0;
			}
			if(exist) this.invalidate_inertia();
		}
	}
	,invalidate_gravMass: function() {
		if(this.gravMassMode != zpp_$nape_util_ZPP_$Flags.id_GravMassMode_FIXED) this.zip_gravMass = true;
		if(this.gravMassMode != zpp_$nape_util_ZPP_$Flags.id_GravMassMode_SCALED) this.zip_gravMassScale = true;
		this.wake();
	}
	,validate_gravMass: function() {
		if(this.zip_gravMass) {
			this.zip_gravMass = false;
			this.validate_mass();
			if(this.gravMassMode == zpp_$nape_util_ZPP_$Flags.id_GravMassMode_DEFAULT) {
				this.validate_mass();
				this.gravMass = this.cmass;
			} else if(this.gravMassMode == zpp_$nape_util_ZPP_$Flags.id_GravMassMode_SCALED) {
				this.validate_mass();
				this.gravMass = this.cmass * this.gravMassScale;
			}
		}
	}
	,invalidate_inertia: function() {
		this.zip_inertia = true;
		this.wake();
	}
	,validate_inertia: function() {
		var exist = false;
		if(this.zip_inertia || this.inertiaMode == zpp_$nape_util_ZPP_$Flags.id_InertiaMode_DEFAULT && exist) {
			this.zip_inertia = false;
			if(this.inertiaMode == zpp_$nape_util_ZPP_$Flags.id_InertiaMode_DEFAULT) {
				this.cinertia = 0;
				var cx_ite = this.shapes.begin();
				while(cx_ite != null) {
					var s = cx_ite.elem();
					s.refmaterial.density = s.material.density;
					s.validate_area_inertia();
					this.cinertia += s.inertia * s.area * s.material.density;
					cx_ite = cx_ite.next;
				}
			}
			if(this.isDynamic() && !this.norotate) {
				this.inertia = this.cinertia;
				this.sinertia = this.iinertia = 1.0 / this.inertia;
			} else {
				this.inertia = zpp_$nape_ZPP_$Const.POSINF();
				this.sinertia = this.iinertia = 0;
			}
			if(exist) this.invalidate_inertia();
		}
	}
	,invalidate_wake: function() {
		this.wake();
	}
	,validate_aabb: function() {
		if(this.zip_aabb) {
			this.zip_aabb = false;
			this.aabb.minx = zpp_$nape_ZPP_$Const.POSINF();
			this.aabb.miny = zpp_$nape_ZPP_$Const.POSINF();
			this.aabb.maxx = zpp_$nape_ZPP_$Const.NEGINF();
			this.aabb.maxy = zpp_$nape_ZPP_$Const.NEGINF();
			var cx_ite = this.shapes.begin();
			while(cx_ite != null) {
				var s = cx_ite.elem();
				s.validate_aabb();
				this.aabb.combine(s.aabb);
				cx_ite = cx_ite.next;
			}
		}
	}
	,invalidate_aabb: function() {
		this.zip_aabb = true;
	}
	,invalidate_localCOM: function() {
		this.zip_localCOM = true;
		this.invalidate_worldCOM();
	}
	,invalidate_worldCOM: function() {
		this.zip_worldCOM = true;
	}
	,validate_localCOM: function() {
		if(this.zip_localCOM) {
			this.zip_localCOM = false;
			var tempx = 0;
			var tempy = 0;
			var msum = 0.0;
			var cx_ite = this.shapes.begin();
			while(cx_ite != null) {
				var s = cx_ite.elem();
				s.validate_localCOM();
				s.validate_area_inertia();
				var t = s.area * s.material.density;
				tempx += s.localCOMx * t;
				tempy += s.localCOMy * t;
				msum += s.area * s.material.density;
				cx_ite = cx_ite.next;
			}
			if(msum != 0) {
				var t1 = 1.0 / msum;
				this.localCOMx = tempx * t1;
				this.localCOMy = tempy * t1;
			}
			if(this.wrap_localCOM != null) {
				this.wrap_localCOM.zpp_inner.x = this.localCOMx;
				this.wrap_localCOM.zpp_inner.y = this.localCOMy;
			}
			if(this.zip_mass && this.massMode == zpp_$nape_util_ZPP_$Flags.id_MassMode_DEFAULT) {
				this.zip_mass = false;
				this.cmass = msum;
				if(this.isDynamic()) {
					this.mass = this.cmass;
					this.imass = this.smass = 1.0 / this.mass;
				} else {
					this.mass = zpp_$nape_ZPP_$Const.POSINF();
					this.imass = this.smass = 0.0;
				}
			}
		}
	}
	,validate_worldCOM: function() {
		if(this.zip_worldCOM) {
			this.zip_worldCOM = false;
			this.validate_localCOM();
			this.validate_axis();
			this.worldCOMx = this.posx + (this.axisy * this.localCOMx - this.axisx * this.localCOMy);
			this.worldCOMy = this.posy + (this.localCOMx * this.axisx + this.localCOMy * this.axisy);
			if(this.wrap_worldCOM != null) {
				this.wrap_worldCOM.zpp_inner.x = this.worldCOMx;
				this.wrap_worldCOM.zpp_inner.y = this.worldCOMy;
			}
		}
	}
	,__immutable_midstep: function(name) {
	}
	,aabb_validate: function() {
		this.validate_aabb();
	}
	,shapes_adder: function(s) {
		if(s.zpp_inner.body != this) {
			if(s.zpp_inner.body != null) s.zpp_inner.body.wrap_shapes.remove(s);
			s.zpp_inner.body = this;
			s.zpp_inner.addedToBody();
			if(this.space != null) this.space.added_shape(s.zpp_inner);
			if(s.zpp_inner.isPolygon()) {
				s.zpp_inner.polygon.invalidate_gaxi();
				s.zpp_inner.polygon.invalidate_gverts();
			}
			return true;
		} else return false;
	}
	,shapes_subber: function(s) {
		if(this.space != null) this.space.removed_shape(s.zpp_inner);
		s.zpp_inner.body = null;
		s.zpp_inner.removedFromBody();
	}
	,shapes_invalidate: function(_) {
		this.invalidate_shapes();
	}
	,addedToSpace: function() {
		if(zpp_$nape_space_ZPP_$Component.zpp_pool == null) this.component = new zpp_$nape_space_ZPP_$Component(); else {
			this.component = zpp_$nape_space_ZPP_$Component.zpp_pool;
			zpp_$nape_space_ZPP_$Component.zpp_pool = this.component.next;
			this.component.next = null;
		}
		this.component.alloc();
		this.component.isBody = true;
		this.component.body = this;
		this.__iaddedToSpace();
	}
	,removedFromSpace: function() {
		while(!this.arbiters.empty()) {
			var arb = this.arbiters.pop_unsafe();
			arb.lazyRetire(this.space,this);
		}
		var o = this.component;
		o.free();
		o.next = zpp_$nape_space_ZPP_$Component.zpp_pool;
		zpp_$nape_space_ZPP_$Component.zpp_pool = o;
		this.component = null;
		this.__iremovedFromSpace();
	}
	,__class__: zpp_$nape_phys_ZPP_$Body
});
var zpp_$nape_phys_ZPP_$Compound = function() {
	this.space = null;
	this.compound = null;
	this.depth = 0;
	this.wrap_constraints = null;
	this.compounds = null;
	this.constraints = null;
	this.bodies = null;
	this.outer = null;
};
$hxClasses["zpp_nape.phys.ZPP_Compound"] = zpp_$nape_phys_ZPP_$Compound;
zpp_$nape_phys_ZPP_$Compound.__name__ = ["zpp_nape","phys","ZPP_Compound"];
zpp_$nape_phys_ZPP_$Compound.__super__ = zpp_$nape_phys_ZPP_$Interactor;
zpp_$nape_phys_ZPP_$Compound.prototype = $extend(zpp_$nape_phys_ZPP_$Interactor.prototype,{
	__imutable_midstep: function(name) {
	}
	,addedToSpace: function() {
		this.__iaddedToSpace();
	}
	,removedFromSpace: function() {
		this.__iremovedFromSpace();
	}
	,__class__: zpp_$nape_phys_ZPP_$Compound
});
var zpp_$nape_phys_ZPP_$FluidProperties = function() {
	this.wrap_gravity = null;
	this.gravityy = 0.0;
	this.gravityx = 0.0;
	this.density = 0.0;
	this.viscosity = 0.0;
	this.shapes = null;
};
$hxClasses["zpp_nape.phys.ZPP_FluidProperties"] = zpp_$nape_phys_ZPP_$FluidProperties;
zpp_$nape_phys_ZPP_$FluidProperties.__name__ = ["zpp_nape","phys","ZPP_FluidProperties"];
zpp_$nape_phys_ZPP_$FluidProperties.prototype = {
	addShape: function(shape) {
		this.shapes.add(shape);
	}
	,remShape: function(shape) {
		this.shapes.remove(shape);
	}
	,__class__: zpp_$nape_phys_ZPP_$FluidProperties
};
var zpp_$nape_phys_ZPP_$Material = function() {
	this.rollingFriction = 0.0;
	this.elasticity = 0.0;
	this.density = 0.0;
	this.staticFriction = 0.0;
	this.dynamicFriction = 0.0;
	this.shapes = null;
	this.outer = null;
	this.next = null;
	this.feature_cons();
	this.elasticity = 0;
	this.dynamicFriction = 1;
	this.staticFriction = 2;
	this.density = 0.001;
	this.rollingFriction = 0.01;
};
$hxClasses["zpp_nape.phys.ZPP_Material"] = zpp_$nape_phys_ZPP_$Material;
zpp_$nape_phys_ZPP_$Material.__name__ = ["zpp_nape","phys","ZPP_Material"];
zpp_$nape_phys_ZPP_$Material.prototype = {
	wrapper: function() {
		if(this.outer == null) {
			this.outer = new nape_phys_Material();
			var o = this.outer.zpp_inner;
			o.free();
			o.next = zpp_$nape_phys_ZPP_$Material.zpp_pool;
			zpp_$nape_phys_ZPP_$Material.zpp_pool = o;
			this.outer.zpp_inner = this;
		}
		return this.outer;
	}
	,free: function() {
		this.outer = null;
	}
	,alloc: function() {
	}
	,feature_cons: function() {
		this.shapes = new zpp_$nape_util_ZNPList_$ZPP_$Shape();
	}
	,addShape: function(shape) {
		this.shapes.add(shape);
	}
	,remShape: function(shape) {
		this.shapes.remove(shape);
	}
	,set: function(x) {
		this.dynamicFriction = x.dynamicFriction;
		this.staticFriction = x.staticFriction;
		this.density = x.density;
		this.elasticity = x.elasticity;
		this.rollingFriction = x.rollingFriction;
	}
	,invalidate: function(x) {
		var cx_ite = this.shapes.begin();
		while(cx_ite != null) {
			var s = cx_ite.elem();
			s.invalidate_material(x);
			cx_ite = cx_ite.next;
		}
	}
	,__class__: zpp_$nape_phys_ZPP_$Material
};
var zpp_$nape_shape_ZPP_$Shape = function(type) {
	this.zip_aabb = false;
	this.aabb = null;
	this.pairs = null;
	this.node = null;
	this.sweep = null;
	this.sensorEnabled = false;
	this.fluidEnabled = false;
	this.fluidProperties = null;
	this.filter = null;
	this.material = null;
	this.refmaterial = null;
	this.polygon = null;
	this.circle = null;
	this.sweepCoef = 0.0;
	this.zip_sweepRadius = false;
	this.sweepRadius = 0.0;
	this.wrap_localCOM = null;
	this.zip_worldCOM = false;
	this.worldCOMy = 0.0;
	this.worldCOMx = 0.0;
	this.zip_localCOM = false;
	this.localCOMy = 0.0;
	this.localCOMx = 0.0;
	this.zip_angDrag = false;
	this.angDrag = 0.0;
	this.inertia = 0.0;
	this.zip_area_inertia = false;
	this.area = 0.0;
	this.type = 0;
	this.body = null;
	this.outer = null;
	zpp_$nape_phys_ZPP_$Interactor.call(this);
	this.pairs = new zpp_$nape_util_ZNPList_$ZPP_$AABBPair();
	this.ishape = this;
	this.type = type;
	this.aabb = zpp_$nape_geom_ZPP_$AABB.get(0,0,0,0);
	this.aabb._immutable = true;
	var me = this;
	this.aabb._validate = $bind(this,this.aabb_validate);
	this.zip_area_inertia = this.zip_angDrag = this.zip_localCOM = this.zip_sweepRadius = true;
	this.localCOMx = 0;
	this.localCOMy = 0;
	this.worldCOMx = 0;
	this.worldCOMy = 0;
	this.fluidEnabled = false;
	this.sensorEnabled = false;
	this.fluidProperties = null;
	this.body = null;
	this.refmaterial = new zpp_$nape_phys_ZPP_$Material();
	this.sweepRadius = this.sweepCoef = 0;
};
$hxClasses["zpp_nape.shape.ZPP_Shape"] = zpp_$nape_shape_ZPP_$Shape;
zpp_$nape_shape_ZPP_$Shape.__name__ = ["zpp_nape","shape","ZPP_Shape"];
zpp_$nape_shape_ZPP_$Shape.__super__ = zpp_$nape_phys_ZPP_$Interactor;
zpp_$nape_shape_ZPP_$Shape.prototype = $extend(zpp_$nape_phys_ZPP_$Interactor.prototype,{
	isCircle: function() {
		return this.type == zpp_$nape_util_ZPP_$Flags.id_ShapeType_CIRCLE;
	}
	,isPolygon: function() {
		return this.type == zpp_$nape_util_ZPP_$Flags.id_ShapeType_POLYGON;
	}
	,invalidate_sweepRadius: function() {
		this.zip_sweepRadius = true;
	}
	,validate_sweepRadius: function() {
		if(this.zip_sweepRadius) {
			this.zip_sweepRadius = false;
			if(this.isCircle()) this.circle.__validate_sweepRadius(); else this.polygon.__validate_sweepRadius();
		}
	}
	,validate_aabb: function() {
		if(this.zip_aabb) {
			if(this.body != null) {
				this.zip_aabb = false;
				if(this.isCircle()) this.circle.__validate_aabb(); else this.polygon.__validate_aabb();
			}
		}
	}
	,force_validate_aabb: function() {
		if(this.isCircle()) this.circle._force_validate_aabb(); else this.polygon._force_validate_aabb();
	}
	,invalidate_aabb: function() {
		this.zip_aabb = true;
		if(this.body != null) this.body.invalidate_aabb();
	}
	,validate_area_inertia: function() {
		if(this.zip_area_inertia) {
			this.zip_area_inertia = false;
			if(this.isCircle()) this.circle.__validate_area_inertia(); else this.polygon.__validate_area_inertia();
		}
	}
	,validate_angDrag: function() {
		if(this.zip_angDrag || this.refmaterial.dynamicFriction != this.material.dynamicFriction) {
			this.zip_angDrag = false;
			this.refmaterial.dynamicFriction = this.material.dynamicFriction;
			if(this.isCircle()) this.circle.__validate_angDrag(); else this.polygon.__validate_angDrag();
		}
	}
	,validate_localCOM: function() {
		if(this.zip_localCOM) {
			this.zip_localCOM = false;
			if(this.isPolygon()) this.polygon.__validate_localCOM();
			if(this.wrap_localCOM != null) {
				this.wrap_localCOM.zpp_inner.x = this.localCOMx;
				this.wrap_localCOM.zpp_inner.y = this.localCOMy;
			}
		}
	}
	,validate_worldCOM: function() {
		if(this.zip_worldCOM) {
			if(this.body != null) {
				this.zip_worldCOM = false;
				this.validate_localCOM();
				this.body.validate_axis();
				this.worldCOMx = this.body.posx + (this.body.axisy * this.localCOMx - this.body.axisx * this.localCOMy);
				this.worldCOMy = this.body.posy + (this.localCOMx * this.body.axisx + this.localCOMy * this.body.axisy);
			}
		}
	}
	,invalidate_area_inertia: function() {
		this.zip_area_inertia = true;
		if(this.body != null) {
			this.body.invalidate_localCOM();
			this.body.invalidate_mass();
			this.body.invalidate_inertia();
		}
	}
	,invalidate_angDrag: function() {
		this.zip_angDrag = true;
	}
	,invalidate_localCOM: function() {
		this.zip_localCOM = true;
		this.invalidate_area_inertia();
		if(this.isCircle()) this.invalidate_sweepRadius();
		this.invalidate_angDrag();
		this.invalidate_worldCOM();
		if(this.body != null) this.body.invalidate_localCOM();
	}
	,invalidate_worldCOM: function() {
		this.zip_worldCOM = true;
		this.invalidate_aabb();
	}
	,invalidate_material: function(flags) {
		if((flags & zpp_$nape_phys_ZPP_$Material.WAKE) != 0) this.wake();
		if((flags & zpp_$nape_phys_ZPP_$Material.ARBITERS) != 0) {
			if(this.body != null) this.body.refreshArbiters();
		}
		if((flags & zpp_$nape_phys_ZPP_$Material.PROPS) != 0) {
			if(this.body != null) {
				this.body.invalidate_localCOM();
				this.body.invalidate_mass();
				this.body.invalidate_inertia();
			}
		}
		if((flags & zpp_$nape_phys_ZPP_$Material.ANGDRAG) != 0) this.invalidate_angDrag();
		this.refmaterial.set(this.material);
	}
	,invalidate_filter: function() {
		this.wake();
	}
	,aabb_validate: function() {
		this.validate_aabb();
	}
	,setMaterial: function(material) {
		if(this.material != material) {
			if(this.body != null && this.body.space != null) {
				if(this.material != null) this.material.remShape(this);
			}
			this.material = material;
			if(this.body != null && this.body.space != null) material.addShape(this);
			this.wake();
			if(this.body != null) this.body.refreshArbiters();
		}
	}
	,setFilter: function(filter) {
		if(this.filter != filter) {
			if(this.body != null && this.body.space != null) {
				if(this.filter != null) this.filter.remShape(this);
			}
			this.filter = filter;
			if(this.body != null && this.body.space != null) filter.addShape(this);
			this.wake();
		}
	}
	,__immutable_midstep: function(name) {
	}
	,addedToBody: function() {
		this.invalidate_worldCOM();
		this.invalidate_aabb();
	}
	,removedFromBody: function() {
	}
	,addedToSpace: function() {
		this.__iaddedToSpace();
		this.material.addShape(this);
		this.filter.addShape(this);
		if(this.fluidProperties != null) this.fluidProperties.addShape(this);
	}
	,removedFromSpace: function() {
		this.__iremovedFromSpace();
		this.material.remShape(this);
		this.filter.remShape(this);
		if(this.fluidProperties != null) this.fluidProperties.remShape(this);
	}
	,__class__: zpp_$nape_shape_ZPP_$Shape
});
var zpp_$nape_shape_ZPP_$Circle = function() {
	this.radius = 0.0;
	this.outer_zn = null;
	zpp_$nape_shape_ZPP_$Shape.call(this,zpp_$nape_util_ZPP_$Flags.id_ShapeType_CIRCLE);
	this.circle = this;
	this.zip_localCOM = false;
};
$hxClasses["zpp_nape.shape.ZPP_Circle"] = zpp_$nape_shape_ZPP_$Circle;
zpp_$nape_shape_ZPP_$Circle.__name__ = ["zpp_nape","shape","ZPP_Circle"];
zpp_$nape_shape_ZPP_$Circle.__super__ = zpp_$nape_shape_ZPP_$Shape;
zpp_$nape_shape_ZPP_$Circle.prototype = $extend(zpp_$nape_shape_ZPP_$Shape.prototype,{
	invalidate_radius: function() {
		this.invalidate_area_inertia();
		this.invalidate_angDrag();
		this.invalidate_aabb();
		if(this.body != null) this.body.wake();
	}
	,__validate_aabb: function() {
		this.validate_worldCOM();
		var rx = this.radius;
		var ry = this.radius;
		this.aabb.minx = this.worldCOMx - rx;
		this.aabb.miny = this.worldCOMy - ry;
		this.aabb.maxx = this.worldCOMx + rx;
		this.aabb.maxy = this.worldCOMy + ry;
	}
	,_force_validate_aabb: function() {
		this.worldCOMx = this.body.posx + (this.body.axisy * this.localCOMx - this.body.axisx * this.localCOMy);
		this.worldCOMy = this.body.posy + (this.localCOMx * this.body.axisx + this.localCOMy * this.body.axisy);
		this.aabb.minx = this.worldCOMx - this.radius;
		this.aabb.miny = this.worldCOMy - this.radius;
		this.aabb.maxx = this.worldCOMx + this.radius;
		this.aabb.maxy = this.worldCOMy + this.radius;
	}
	,__validate_sweepRadius: function() {
		this.sweepCoef = Math.sqrt(this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy);
		this.sweepRadius = this.sweepCoef + this.radius;
	}
	,__validate_area_inertia: function() {
		var r2 = this.radius * this.radius;
		this.area = r2 * Math.PI;
		this.inertia = r2 * 0.5 + (this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy);
	}
	,__validate_angDrag: function() {
		var lc = this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy;
		var r2 = this.radius * this.radius;
		var skin = this.material.dynamicFriction * nape_Config.fluidAngularDragFriction;
		this.angDrag = (lc + 2 * r2) * skin + 0.5 * nape_Config.fluidAngularDrag * (1 + nape_Config.fluidVacuumDrag) * lc;
		this.angDrag /= 2 * (lc + 0.5 * r2);
	}
	,__class__: zpp_$nape_shape_ZPP_$Circle
});
var zpp_$nape_shape_ZPP_$Edge = function() {
	this.tp1 = 0.0;
	this.tp0 = 0.0;
	this.gp1 = null;
	this.lp1 = null;
	this.gp0 = null;
	this.lp0 = null;
	this.gprojection = 0.0;
	this.lprojection = 0.0;
	this.length = 0.0;
	this.wrap_gnorm = null;
	this.gnormy = 0.0;
	this.gnormx = 0.0;
	this.wrap_lnorm = null;
	this.lnormy = 0.0;
	this.lnormx = 0.0;
	this.outer = null;
	this.polygon = null;
	this.next = null;
	this.lnormx = 0;
	this.lnormy = 0;
	this.gnormx = 0;
	this.gnormy = 0;
	this.length = 0;
	this.lprojection = 0;
	this.gprojection = 0;
};
$hxClasses["zpp_nape.shape.ZPP_Edge"] = zpp_$nape_shape_ZPP_$Edge;
zpp_$nape_shape_ZPP_$Edge.__name__ = ["zpp_nape","shape","ZPP_Edge"];
zpp_$nape_shape_ZPP_$Edge.prototype = {
	free: function() {
		this.polygon = null;
	}
	,alloc: function() {
	}
	,wrapper: function() {
		if(this.outer == null) {
			zpp_$nape_shape_ZPP_$Edge.internal = true;
			this.outer = new nape_shape_Edge();
			zpp_$nape_shape_ZPP_$Edge.internal = false;
			this.outer.zpp_inner = this;
		}
		return this.outer;
	}
	,__class__: zpp_$nape_shape_ZPP_$Edge
};
var zpp_$nape_shape_ZPP_$Polygon = function() {
	this.zip_sanitation = false;
	this.zip_valid = false;
	this.zip_gaxi = false;
	this.zip_gverts = false;
	this.zip_laxi = false;
	this.zip_lverts = false;
	this.reverse_flag = false;
	this.edgeCnt = 0;
	this.wrap_edges = null;
	this.edges = null;
	this.wrap_gverts = null;
	this.gverts = null;
	this.wrap_lverts = null;
	this.lverts = null;
	this.outer_zn = null;
	zpp_$nape_shape_ZPP_$Shape.call(this,zpp_$nape_util_ZPP_$Flags.id_ShapeType_POLYGON);
	this.polygon = this;
	this.lverts = new zpp_$nape_geom_ZPP_$Vec2();
	this.gverts = new zpp_$nape_geom_ZPP_$Vec2();
	this.edges = new zpp_$nape_util_ZNPList_$ZPP_$Edge();
	this.edgeCnt = 0;
};
$hxClasses["zpp_nape.shape.ZPP_Polygon"] = zpp_$nape_shape_ZPP_$Polygon;
zpp_$nape_shape_ZPP_$Polygon.__name__ = ["zpp_nape","shape","ZPP_Polygon"];
zpp_$nape_shape_ZPP_$Polygon.__super__ = zpp_$nape_shape_ZPP_$Shape;
zpp_$nape_shape_ZPP_$Polygon.prototype = $extend(zpp_$nape_shape_ZPP_$Shape.prototype,{
	lverts_pa_invalidate: function(x) {
		this.invalidate_lverts();
	}
	,gverts_pa_validate: function() {
		this.validate_gverts();
	}
	,lverts_post_adder: function(x) {
		x.zpp_inner._invalidate = $bind(this,this.lverts_pa_invalidate);
		var ite = null;
		var ite2 = null;
		var cx_ite = this.lverts.begin();
		while(cx_ite != null) {
			var i = cx_ite.elem();
			if(i == x.zpp_inner) break; else {
				if(ite == null) ite = this.gverts.begin(); else ite = ite.next;
				if(ite2 == null) ite2 = this.edges.begin(); else ite2 = ite2.next;
			}
			cx_ite = cx_ite.next;
		}
		var vec = zpp_$nape_geom_ZPP_$Vec2.get(0,0,true);
		this.gverts.insert(ite,vec);
		if(this.lverts.begin().next != null) {
			if(this.lverts.begin().next.next == null) {
				var ed;
				if(zpp_$nape_shape_ZPP_$Edge.zpp_pool == null) ed = new zpp_$nape_shape_ZPP_$Edge(); else {
					ed = zpp_$nape_shape_ZPP_$Edge.zpp_pool;
					zpp_$nape_shape_ZPP_$Edge.zpp_pool = ed.next;
					ed.next = null;
				}
				ed.alloc();
				ed.polygon = this;
				this.edges.add(ed);
				var ed1;
				if(zpp_$nape_shape_ZPP_$Edge.zpp_pool == null) ed1 = new zpp_$nape_shape_ZPP_$Edge(); else {
					ed1 = zpp_$nape_shape_ZPP_$Edge.zpp_pool;
					zpp_$nape_shape_ZPP_$Edge.zpp_pool = ed1.next;
					ed1.next = null;
				}
				ed1.alloc();
				ed1.polygon = this;
				this.edges.add(ed1);
				this.edgeCnt += 2;
			} else {
				var ed2;
				if(zpp_$nape_shape_ZPP_$Edge.zpp_pool == null) ed2 = new zpp_$nape_shape_ZPP_$Edge(); else {
					ed2 = zpp_$nape_shape_ZPP_$Edge.zpp_pool;
					zpp_$nape_shape_ZPP_$Edge.zpp_pool = ed2.next;
					ed2.next = null;
				}
				ed2.alloc();
				ed2.polygon = this;
				this.edges.insert(ite2,ed2);
				this.edgeCnt++;
			}
		}
		vec._validate = $bind(this,this.gverts_pa_validate);
	}
	,lverts_subber: function(x) {
		this.cleanup_lvert(x.zpp_inner);
	}
	,lverts_invalidate: function(_) {
		this.invalidate_lverts();
	}
	,lverts_validate: function() {
		this.validate_lverts();
	}
	,getlverts: function() {
		var me = this;
		this.wrap_lverts = zpp_$nape_util_ZPP_$MixVec2List.get(this.lverts);
		this.wrap_lverts.zpp_inner.post_adder = $bind(this,this.lverts_post_adder);
		this.wrap_lverts.zpp_inner.subber = $bind(this,this.lverts_subber);
		this.wrap_lverts.zpp_inner._invalidate = $bind(this,this.lverts_invalidate);
		this.wrap_lverts.zpp_inner._validate = $bind(this,this.lverts_validate);
		this.wrap_lverts.zpp_inner.reverse_flag = this.reverse_flag;
	}
	,invalidate_lverts: function() {
		this.invalidate_laxi();
		this.invalidate_area_inertia();
		this.invalidate_angDrag();
		this.invalidate_localCOM();
		this.invalidate_gverts();
		this.zip_lverts = true;
		this.zip_valid = true;
		this.zip_sanitation = true;
		if(this.body != null) this.body.wake();
	}
	,invalidate_laxi: function() {
		this.invalidate_gaxi();
		this.invalidate_sweepRadius();
		this.zip_laxi = true;
	}
	,invalidate_gverts: function() {
		this.invalidate_aabb();
		this.zip_gverts = true;
	}
	,invalidate_gaxi: function() {
		this.zip_gaxi = true;
	}
	,validate_lverts: function() {
		if(this.zip_lverts) {
			this.zip_lverts = false;
			if(this.lverts.size() > 2) {
				this.validate_area_inertia();
				if(this.area < 0) {
					this.reverse_vertices();
					this.area = -this.area;
				}
			}
		}
	}
	,cleanup_lvert: function(x) {
		var ite = null;
		var ite2 = null;
		var cx_ite = this.lverts.begin();
		while(cx_ite != null) {
			var i = cx_ite.elem();
			if(i == x) break; else {
				if(ite == null) ite = this.gverts.begin(); else ite = ite.next;
				if(ite2 == null) ite2 = this.edges.begin(); else ite2 = ite2.next;
			}
			cx_ite = cx_ite.next;
		}
		var rem;
		if(ite == null) rem = this.gverts.front(); else rem = ite.next.elem();
		this.gverts.erase(ite);
		var o = rem;
		o.free();
		o.next = zpp_$nape_geom_ZPP_$Vec2.zpp_pool;
		zpp_$nape_geom_ZPP_$Vec2.zpp_pool = o;
		if(this.edgeCnt == 2) {
			var rem1 = this.edges.pop_unsafe();
			var o1 = rem1;
			o1.free();
			o1.next = zpp_$nape_shape_ZPP_$Edge.zpp_pool;
			zpp_$nape_shape_ZPP_$Edge.zpp_pool = o1;
			rem1 = this.edges.pop_unsafe();
			var o2 = rem1;
			o2.free();
			o2.next = zpp_$nape_shape_ZPP_$Edge.zpp_pool;
			zpp_$nape_shape_ZPP_$Edge.zpp_pool = o2;
			this.edgeCnt = 0;
		} else if(this.edgeCnt != 0) {
			var rem2;
			if(ite2 == null) rem2 = this.edges.front(); else rem2 = ite2.next.elem();
			this.edges.erase(ite2);
			var o3 = rem2;
			o3.free();
			o3.next = zpp_$nape_shape_ZPP_$Edge.zpp_pool;
			zpp_$nape_shape_ZPP_$Edge.zpp_pool = o3;
			this.edgeCnt--;
		}
	}
	,splice_collinear: function() {
		if(this.zip_sanitation) {
			this.zip_sanitation = false;
			this.splice_collinear_real();
		}
	}
	,splice_collinear_real: function() {
		if(this.lverts.begin() == null) return;
		if(this.lverts.begin().next == null) return;
		if(this.lverts.begin().next.next == null) return;
		var pre = null;
		var cur = this.lverts.begin();
		while(cur != null) {
			var nxt;
			if(cur.next == null) nxt = this.lverts.begin(); else nxt = cur.next;
			var u = cur.elem();
			var v = nxt.elem();
			if(zpp_$nape_geom_ZPP_$VecMath.vec_dsq(u.x,u.y,v.x,v.y) < nape_Config.epsilon * nape_Config.epsilon) {
				this.cleanup_lvert(cur.elem());
				cur = this.lverts.erase(pre);
			} else {
				pre = cur;
				cur = cur.next;
			}
		}
		if(this.lverts.empty()) return;
		var removed;
		do {
			removed = false;
			var pre1 = this.lverts.begin();
			while(pre1 != null) {
				var cur1;
				if(pre1.next == null) cur1 = this.lverts.begin(); else cur1 = pre1.next;
				var nxt1;
				if(cur1.next == null) nxt1 = this.lverts.begin(); else nxt1 = cur1.next;
				var u1 = pre1.elem();
				var v1 = cur1.elem();
				var w = nxt1.elem();
				var ax = 0.0;
				var ay = 0.0;
				ax = v1.x - u1.x;
				ay = v1.y - u1.y;
				var bx = 0.0;
				var by = 0.0;
				bx = w.x - v1.x;
				by = w.y - v1.y;
				var crs = by * ax - bx * ay;
				if(crs * crs >= nape_Config.epsilon * nape_Config.epsilon) pre1 = pre1.next; else {
					this.cleanup_lvert(cur1.elem());
					this.lverts.erase(pre1.next == null?null:pre1);
					removed = true;
					pre1 = pre1.next;
				}
			}
		} while(removed);
	}
	,reverse_vertices: function() {
		this.lverts.reverse();
		this.gverts.reverse();
		this.edges.reverse();
		var ite = this.edges.iterator_at(this.edgeCnt - 1);
		var elem = this.edges.pop_unsafe();
		this.edges.insert(ite,elem);
		this.reverse_flag = !this.reverse_flag;
		if(this.wrap_lverts != null) this.wrap_lverts.zpp_inner.reverse_flag = this.reverse_flag;
		if(this.wrap_gverts != null) this.wrap_gverts.zpp_inner.reverse_flag = this.reverse_flag;
		if(this.wrap_edges != null) this.wrap_edges.zpp_inner.reverse_flag = this.reverse_flag;
	}
	,validate_laxi: function() {
		if(this.zip_laxi) {
			this.zip_laxi = false;
			this.validate_lverts();
			var ite = this.edges.begin();
			var cx_ite = this.lverts.begin();
			var u = cx_ite.elem();
			cx_ite = cx_ite.next;
			while(cx_ite != null) {
				var v1 = cx_ite.elem();
				var edge = ite.elem();
				ite = ite.next;
				edge.lp0 = u;
				edge.lp1 = v1;
				var dx = 0.0;
				var dy = 0.0;
				dx = u.x - v1.x;
				dy = u.y - v1.y;
				var l = Math.sqrt(dx * dx + dy * dy);
				edge.length = l;
				var t = 1.0 / l;
				dx *= t;
				dy *= t;
				var t1 = dx;
				dx = -dy;
				dy = t1;
				edge.lprojection = dx * u.x + dy * u.y;
				edge.lnormx = dx;
				edge.lnormy = dy;
				if(edge.wrap_lnorm != null) {
					edge.wrap_lnorm.zpp_inner.x = dx;
					edge.wrap_lnorm.zpp_inner.y = dy;
				}
				u = v1;
				cx_ite = cx_ite.next;
			}
			var v = this.lverts.front();
			var edge1 = ite.elem();
			ite = ite.next;
			edge1.lp0 = u;
			edge1.lp1 = v;
			var dx1 = 0.0;
			var dy1 = 0.0;
			dx1 = u.x - v.x;
			dy1 = u.y - v.y;
			var l1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);
			edge1.length = l1;
			var t2 = 1.0 / l1;
			dx1 *= t2;
			dy1 *= t2;
			var t3 = dx1;
			dx1 = -dy1;
			dy1 = t3;
			edge1.lprojection = dx1 * u.x + dy1 * u.y;
			edge1.lnormx = dx1;
			edge1.lnormy = dy1;
			if(edge1.wrap_lnorm != null) {
				edge1.wrap_lnorm.zpp_inner.x = dx1;
				edge1.wrap_lnorm.zpp_inner.y = dy1;
			}
		}
	}
	,validate_gverts: function() {
		if(this.zip_gverts) {
			if(this.body != null) {
				this.zip_gverts = false;
				this.validate_lverts();
				this.body.validate_axis();
				var li = this.lverts.begin();
				var cx_ite = this.gverts.begin();
				while(cx_ite != null) {
					var g = cx_ite.elem();
					var l = li.elem();
					li = li.next;
					g.x = this.body.posx + (this.body.axisy * l.x - this.body.axisx * l.y);
					g.y = this.body.posy + (l.x * this.body.axisx + l.y * this.body.axisy);
					cx_ite = cx_ite.next;
				}
			}
		}
	}
	,validate_gaxi: function() {
		if(this.zip_gaxi) {
			if(this.body != null) {
				this.zip_gaxi = false;
				this.validate_laxi();
				this.body.validate_axis();
				this.validate_gverts();
				var ite = this.edges.begin();
				var cx_ite = this.gverts.begin();
				var u = cx_ite.elem();
				cx_ite = cx_ite.next;
				while(cx_ite != null) {
					var v1 = cx_ite.elem();
					var e = ite.elem();
					ite = ite.next;
					e.gp0 = u;
					e.gp1 = v1;
					e.gnormx = this.body.axisy * e.lnormx - this.body.axisx * e.lnormy;
					e.gnormy = e.lnormx * this.body.axisx + e.lnormy * this.body.axisy;
					e.gprojection = this.body.posx * e.gnormx + this.body.posy * e.gnormy + e.lprojection;
					if(e.wrap_gnorm != null) {
						e.wrap_gnorm.zpp_inner.x = e.gnormx;
						e.wrap_gnorm.zpp_inner.y = e.gnormy;
					}
					e.tp0 = e.gp0.y * e.gnormx - e.gp0.x * e.gnormy;
					e.tp1 = e.gp1.y * e.gnormx - e.gp1.x * e.gnormy;
					u = v1;
					cx_ite = cx_ite.next;
				}
				var v = this.gverts.front();
				var e1 = ite.elem();
				ite = ite.next;
				e1.gp0 = u;
				e1.gp1 = v;
				e1.gnormx = this.body.axisy * e1.lnormx - this.body.axisx * e1.lnormy;
				e1.gnormy = e1.lnormx * this.body.axisx + e1.lnormy * this.body.axisy;
				e1.gprojection = this.body.posx * e1.gnormx + this.body.posy * e1.gnormy + e1.lprojection;
				if(e1.wrap_gnorm != null) {
					e1.wrap_gnorm.zpp_inner.x = e1.gnormx;
					e1.wrap_gnorm.zpp_inner.y = e1.gnormy;
				}
				e1.tp0 = e1.gp0.y * e1.gnormx - e1.gp0.x * e1.gnormy;
				e1.tp1 = e1.gp1.y * e1.gnormx - e1.gp1.x * e1.gnormy;
			}
		}
	}
	,__validate_aabb: function() {
		this.validate_gverts();
		var p0 = this.gverts.front();
		this.aabb.minx = p0.x;
		this.aabb.miny = p0.y;
		this.aabb.maxx = p0.x;
		this.aabb.maxy = p0.y;
		var cx_ite = this.gverts.begin().next;
		while(cx_ite != null) {
			var p = cx_ite.elem();
			if(p.x < this.aabb.minx) this.aabb.minx = p.x;
			if(p.x > this.aabb.maxx) this.aabb.maxx = p.x;
			if(p.y < this.aabb.miny) this.aabb.miny = p.y;
			if(p.y > this.aabb.maxy) this.aabb.maxy = p.y;
			cx_ite = cx_ite.next;
		}
	}
	,_force_validate_aabb: function() {
		var li = this.lverts.begin();
		var p0 = this.gverts.front();
		var l = li.elem();
		li = li.next;
		p0.x = this.body.posx + (this.body.axisy * l.x - this.body.axisx * l.y);
		p0.y = this.body.posy + (l.x * this.body.axisx + l.y * this.body.axisy);
		this.aabb.minx = p0.x;
		this.aabb.miny = p0.y;
		this.aabb.maxx = p0.x;
		this.aabb.maxy = p0.y;
		var cx_ite = this.gverts.begin().next;
		while(cx_ite != null) {
			var p = cx_ite.elem();
			var l1 = li.elem();
			li = li.next;
			p.x = this.body.posx + (this.body.axisy * l1.x - this.body.axisx * l1.y);
			p.y = this.body.posy + (l1.x * this.body.axisx + l1.y * this.body.axisy);
			if(p.x < this.aabb.minx) this.aabb.minx = p.x;
			if(p.x > this.aabb.maxx) this.aabb.maxx = p.x;
			if(p.y < this.aabb.miny) this.aabb.miny = p.y;
			if(p.y > this.aabb.maxy) this.aabb.maxy = p.y;
			cx_ite = cx_ite.next;
		}
	}
	,__validate_sweepRadius: function() {
		var maxRadius = 0.0;
		var minRadius = 0.0;
		this.validate_laxi();
		var cx_ite = this.lverts.begin();
		while(cx_ite != null) {
			var x = cx_ite.elem();
			var r = x.x * x.x + x.y * x.y;
			if(r > maxRadius) maxRadius = r;
			cx_ite = cx_ite.next;
		}
		var cx_ite1 = this.edges.begin();
		while(cx_ite1 != null) {
			var e = cx_ite1.elem();
			if(e.lprojection < minRadius) {
				minRadius = e.lprojection;
				if(minRadius < 0) break;
			}
			cx_ite1 = cx_ite1.next;
		}
		if(minRadius < 0) minRadius = 0;
		this.sweepRadius = Math.sqrt(maxRadius);
		this.sweepCoef = this.sweepRadius - minRadius;
	}
	,__validate_area_inertia: function() {
		if(this.lverts.begin() == null || this.lverts.begin().next == null || this.lverts.begin().next.next == null) {
			this.area = 0;
			this.inertia = 0;
		} else {
			this.area = 0.0;
			var s1 = 0.0;
			var s2 = 0.0;
			var cx_ite = this.lverts.begin();
			var u = cx_ite.elem();
			cx_ite = cx_ite.next;
			var v = cx_ite.elem();
			cx_ite = cx_ite.next;
			while(cx_ite != null) {
				var w2 = cx_ite.elem();
				var a = v.y * u.x - v.x * u.y;
				var b = v.x * v.x + v.y * v.y + (v.x * u.x + v.y * u.y) + (u.x * u.x + u.y * u.y);
				s1 += a * b;
				s2 += a;
				this.area += v.x * (w2.y - u.y);
				u = v;
				v = w2;
				cx_ite = cx_ite.next;
			}
			cx_ite = this.lverts.begin();
			var w = cx_ite.elem();
			var a1 = v.y * u.x - v.x * u.y;
			var b1 = v.x * v.x + v.y * v.y + (v.x * u.x + v.y * u.y) + (u.x * u.x + u.y * u.y);
			s1 += a1 * b1;
			s2 += a1;
			this.area += v.x * (w.y - u.y);
			u = v;
			v = w;
			cx_ite = cx_ite.next;
			var w1 = cx_ite.elem();
			var a2 = v.y * u.x - v.x * u.y;
			var b2 = v.x * v.x + v.y * v.y + (v.x * u.x + v.y * u.y) + (u.x * u.x + u.y * u.y);
			s1 += a2 * b2;
			s2 += a2;
			this.area += v.x * (w1.y - u.y);
			this.inertia = s1 / (6 * s2);
			this.area *= 0.5;
			if(this.area < 0) {
				this.area = -this.area;
				this.reverse_vertices();
			}
		}
	}
	,__validate_angDrag: function() {
		this.validate_area_inertia();
		this.validate_laxi();
		var accum = 0.0;
		var ei = this.edges.begin();
		var perim = 0.0;
		var cx_cont = true;
		var cx_itei = this.lverts.begin();
		var u = cx_itei.elem();
		var cx_itej = cx_itei.next;
		while(cx_itej != null) {
			var v = cx_itej.elem();
			var edge = ei.elem();
			ei = ei.next;
			perim += edge.length;
			var dx = 0.0;
			var dy = 0.0;
			dx = v.x - u.x;
			dy = v.y - u.y;
			accum += edge.length * nape_Config.fluidAngularDragFriction * this.material.dynamicFriction * edge.lprojection * edge.lprojection;
			var t = -(u.y * edge.lnormx - u.x * edge.lnormy) / (dy * edge.lnormx - dx * edge.lnormy);
			if(t > 0) {
				var ta;
				if(t > 1) ta = 1; else ta = t;
				var cx = 0.0;
				var cy = 0.0;
				cx = u.x;
				cy = u.y;
				var t1 = ta;
				cx += dx * t1;
				cy += dy * t1;
				var dota = edge.lnormy * u.x - edge.lnormx * u.y;
				var dotb = edge.lnormy * cx - edge.lnormx * cy;
				var dots = (dotb * dotb * dotb - dota * dota * dota) / (3 * (dotb - dota));
				accum += dots * ta * edge.length * nape_Config.fluidAngularDrag;
			}
			if(t < 1) {
				var tb;
				if(t < 0) tb = 0; else tb = t;
				var cx1 = 0.0;
				var cy1 = 0.0;
				cx1 = u.x;
				cy1 = u.y;
				var t2 = tb;
				cx1 += dx * t2;
				cy1 += dy * t2;
				var dota1 = edge.lnormy * cx1 - edge.lnormx * cy1;
				var dotb1 = edge.lnormy * v.x - edge.lnormx * v.y;
				var dots1 = (dotb1 * dotb1 * dotb1 - dota1 * dota1 * dota1) / (3 * (dotb1 - dota1));
				accum += dots1 * nape_Config.fluidVacuumDrag * (1 - tb) * edge.length * nape_Config.fluidAngularDrag;
			}
			cx_itei = cx_itej;
			u = v;
			cx_itej = cx_itej.next;
		}
		if(cx_cont) do {
			cx_itej = this.lverts.begin();
			var v1 = cx_itej.elem();
			var edge1 = ei.elem();
			ei = ei.next;
			perim += edge1.length;
			var dx1 = 0.0;
			var dy1 = 0.0;
			dx1 = v1.x - u.x;
			dy1 = v1.y - u.y;
			accum += edge1.length * nape_Config.fluidAngularDragFriction * this.material.dynamicFriction * edge1.lprojection * edge1.lprojection;
			var t3 = -(u.y * edge1.lnormx - u.x * edge1.lnormy) / (dy1 * edge1.lnormx - dx1 * edge1.lnormy);
			if(t3 > 0) {
				var ta1;
				if(t3 > 1) ta1 = 1; else ta1 = t3;
				var cx2 = 0.0;
				var cy2 = 0.0;
				cx2 = u.x;
				cy2 = u.y;
				var t4 = ta1;
				cx2 += dx1 * t4;
				cy2 += dy1 * t4;
				var dota2 = edge1.lnormy * u.x - edge1.lnormx * u.y;
				var dotb2 = edge1.lnormy * cx2 - edge1.lnormx * cy2;
				var dots2 = (dotb2 * dotb2 * dotb2 - dota2 * dota2 * dota2) / (3 * (dotb2 - dota2));
				accum += dots2 * ta1 * edge1.length * nape_Config.fluidAngularDrag;
			}
			if(t3 < 1) {
				var tb1;
				if(t3 < 0) tb1 = 0; else tb1 = t3;
				var cx3 = 0.0;
				var cy3 = 0.0;
				cx3 = u.x;
				cy3 = u.y;
				var t5 = tb1;
				cx3 += dx1 * t5;
				cy3 += dy1 * t5;
				var dota3 = edge1.lnormy * cx3 - edge1.lnormx * cy3;
				var dotb3 = edge1.lnormy * v1.x - edge1.lnormx * v1.y;
				var dots3 = (dotb3 * dotb3 * dotb3 - dota3 * dota3 * dota3) / (3 * (dotb3 - dota3));
				accum += dots3 * nape_Config.fluidVacuumDrag * (1 - tb1) * edge1.length * nape_Config.fluidAngularDrag;
			}
		} while(false);
		this.angDrag = accum / (this.inertia * perim);
	}
	,__validate_localCOM: function() {
		if(this.lverts.begin().next == null) {
			this.localCOMx = this.lverts.front().x;
			this.localCOMy = this.lverts.front().y;
		} else if(this.lverts.begin().next.next == null) {
			this.localCOMx = this.lverts.front().x;
			this.localCOMy = this.lverts.front().y;
			var t = 1.0;
			this.localCOMx += this.lverts.begin().next.elem().x * t;
			this.localCOMy += this.lverts.begin().next.elem().y * t;
			var t1 = 0.5;
			this.localCOMx *= t1;
			this.localCOMy *= t1;
		} else {
			this.localCOMx = 0;
			this.localCOMy = 0;
			var area = 0.0;
			var cx_ite = this.lverts.begin();
			var u = cx_ite.elem();
			cx_ite = cx_ite.next;
			var v = cx_ite.elem();
			cx_ite = cx_ite.next;
			while(cx_ite != null) {
				var w2 = cx_ite.elem();
				area += v.x * (w2.y - u.y);
				var cf = w2.y * v.x - w2.x * v.y;
				this.localCOMx += (v.x + w2.x) * cf;
				this.localCOMy += (v.y + w2.y) * cf;
				u = v;
				v = w2;
				cx_ite = cx_ite.next;
			}
			cx_ite = this.lverts.begin();
			var w = cx_ite.elem();
			area += v.x * (w.y - u.y);
			var cf1 = w.y * v.x - w.x * v.y;
			this.localCOMx += (v.x + w.x) * cf1;
			this.localCOMy += (v.y + w.y) * cf1;
			u = v;
			v = w;
			cx_ite = cx_ite.next;
			var w1 = cx_ite.elem();
			area += v.x * (w1.y - u.y);
			var cf2 = w1.y * v.x - w1.x * v.y;
			this.localCOMx += (v.x + w1.x) * cf2;
			this.localCOMy += (v.y + w1.y) * cf2;
			area = 1 / (3 * area);
			var t2 = area;
			this.localCOMx *= t2;
			this.localCOMy *= t2;
		}
	}
	,__class__: zpp_$nape_shape_ZPP_$Polygon
});
var zpp_$nape_space_ZPP_$Broadphase = function() {
	this.dynab = null;
	this.sweep = null;
	this.is_sweep = false;
	this.space = null;
};
$hxClasses["zpp_nape.space.ZPP_Broadphase"] = zpp_$nape_space_ZPP_$Broadphase;
zpp_$nape_space_ZPP_$Broadphase.__name__ = ["zpp_nape","space","ZPP_Broadphase"];
zpp_$nape_space_ZPP_$Broadphase.prototype = {
	insert: function(shape) {
		if(this.is_sweep) this.sweep.__insert(shape); else this.dynab.__insert(shape);
	}
	,remove: function(shape) {
		if(this.is_sweep) this.sweep.__remove(shape); else this.dynab.__remove(shape);
	}
	,sync: function(shape) {
		if(this.is_sweep) this.sweep.__sync(shape); else this.dynab.__sync(shape);
	}
	,broadphase: function(space,discrete) {
	}
	,__class__: zpp_$nape_space_ZPP_$Broadphase
};
var zpp_$nape_space_ZPP_$AABBNode = function() {
	this.first_sync = false;
	this.synced = false;
	this.snext = null;
	this.moved = false;
	this.mnext = null;
	this.next = null;
	this.height = 0;
	this.child2 = null;
	this.child1 = null;
	this.parent = null;
	this.dyn = false;
	this.shape = null;
	this.aabb = null;
	this.height = -1;
};
$hxClasses["zpp_nape.space.ZPP_AABBNode"] = zpp_$nape_space_ZPP_$AABBNode;
zpp_$nape_space_ZPP_$AABBNode.__name__ = ["zpp_nape","space","ZPP_AABBNode"];
zpp_$nape_space_ZPP_$AABBNode.prototype = {
	alloc: function() {
		if(zpp_$nape_geom_ZPP_$AABB.zpp_pool == null) this.aabb = new zpp_$nape_geom_ZPP_$AABB(); else {
			this.aabb = zpp_$nape_geom_ZPP_$AABB.zpp_pool;
			zpp_$nape_geom_ZPP_$AABB.zpp_pool = this.aabb.next;
			this.aabb.next = null;
		}
		this.aabb.alloc();
		this.moved = false;
		this.synced = false;
		this.first_sync = false;
	}
	,free: function() {
		this.height = -1;
		var o = this.aabb;
		o.free();
		o.next = zpp_$nape_geom_ZPP_$AABB.zpp_pool;
		zpp_$nape_geom_ZPP_$AABB.zpp_pool = o;
		this.child1 = this.child2 = this.parent = null;
		this.next = null;
		this.snext = null;
		this.mnext = null;
	}
	,isLeaf: function() {
		return this.child1 == null;
	}
	,__class__: zpp_$nape_space_ZPP_$AABBNode
};
var zpp_$nape_space_ZPP_$AABBPair = function() {
	this.next = null;
	this.arb = null;
	this.di = 0;
	this.id = 0;
	this.sleeping = false;
	this.first = false;
	this.n2 = null;
	this.n1 = null;
};
$hxClasses["zpp_nape.space.ZPP_AABBPair"] = zpp_$nape_space_ZPP_$AABBPair;
zpp_$nape_space_ZPP_$AABBPair.__name__ = ["zpp_nape","space","ZPP_AABBPair"];
zpp_$nape_space_ZPP_$AABBPair.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.n1 = this.n2 = null;
		this.sleeping = false;
	}
	,__class__: zpp_$nape_space_ZPP_$AABBPair
};
var zpp_$nape_space_ZPP_$AABBTree = function() {
	this.root = null;
};
$hxClasses["zpp_nape.space.ZPP_AABBTree"] = zpp_$nape_space_ZPP_$AABBTree;
zpp_$nape_space_ZPP_$AABBTree.__name__ = ["zpp_nape","space","ZPP_AABBTree"];
zpp_$nape_space_ZPP_$AABBTree.prototype = {
	inlined_insertLeaf: function(leaf) {
		if(this.root == null) {
			this.root = leaf;
			this.root.parent = null;
		} else {
			var leafaabb = leaf.aabb;
			var node = this.root;
			while(!node.isLeaf()) {
				var child1 = node.child1;
				var child2 = node.child2;
				var area = node.aabb.perimeter();
				zpp_$nape_space_ZPP_$AABBTree.tmpaabb.setCombine(node.aabb,leafaabb);
				var carea = zpp_$nape_space_ZPP_$AABBTree.tmpaabb.perimeter();
				var cost = 2 * carea;
				var icost = 2 * (carea - area);
				var cost1;
				zpp_$nape_space_ZPP_$AABBTree.tmpaabb.setCombine(leafaabb,child1.aabb);
				if(child1.isLeaf()) cost1 = zpp_$nape_space_ZPP_$AABBTree.tmpaabb.perimeter() + icost; else {
					var oarea = child1.aabb.perimeter();
					var narea = zpp_$nape_space_ZPP_$AABBTree.tmpaabb.perimeter();
					cost1 = narea - oarea + icost;
				}
				var cost2;
				zpp_$nape_space_ZPP_$AABBTree.tmpaabb.setCombine(leafaabb,child2.aabb);
				if(child2.isLeaf()) cost2 = zpp_$nape_space_ZPP_$AABBTree.tmpaabb.perimeter() + icost; else {
					var oarea1 = child2.aabb.perimeter();
					var narea1 = zpp_$nape_space_ZPP_$AABBTree.tmpaabb.perimeter();
					cost2 = narea1 - oarea1 + icost;
				}
				if(cost < cost1 && cost < cost2) break; else if(cost1 < cost2) node = child1; else node = child2;
			}
			var sibling = node;
			var oparent = sibling.parent;
			var nparent;
			if(zpp_$nape_space_ZPP_$AABBNode.zpp_pool == null) nparent = new zpp_$nape_space_ZPP_$AABBNode(); else {
				nparent = zpp_$nape_space_ZPP_$AABBNode.zpp_pool;
				zpp_$nape_space_ZPP_$AABBNode.zpp_pool = nparent.next;
				nparent.next = null;
			}
			nparent.alloc();
			nparent.parent = oparent;
			nparent.aabb.setCombine(leafaabb,sibling.aabb);
			nparent.height = sibling.height + 1;
			if(oparent != null) {
				if(oparent.child1 == sibling) oparent.child1 = nparent; else oparent.child2 = nparent;
				nparent.child1 = sibling;
				nparent.child2 = leaf;
				sibling.parent = nparent;
				leaf.parent = nparent;
			} else {
				nparent.child1 = sibling;
				nparent.child2 = leaf;
				sibling.parent = nparent;
				leaf.parent = nparent;
				this.root = nparent;
			}
			node = leaf.parent;
			while(node != null) {
				node = this.balance(node);
				var child11 = node.child1;
				var child21 = node.child2;
				node.height = 1 + (function($this) {
					var $r;
					var x = child11.height;
					var y = child21.height;
					$r = x > y?x:y;
					return $r;
				}(this));
				node.aabb.setCombine(child11.aabb,child21.aabb);
				node = node.parent;
			}
		}
	}
	,removeLeaf: function(leaf) {
		this.inlined_removeLeaf(leaf);
	}
	,inlined_removeLeaf: function(leaf) {
		if(leaf == this.root) {
			this.root = null;
			return;
		} else {
			var parent = leaf.parent;
			var gparent = parent.parent;
			var sibling;
			if(parent.child1 == leaf) sibling = parent.child2; else sibling = parent.child1;
			if(gparent != null) {
				if(gparent.child1 == parent) gparent.child1 = sibling; else gparent.child2 = sibling;
				sibling.parent = gparent;
				var o = parent;
				o.free();
				o.next = zpp_$nape_space_ZPP_$AABBNode.zpp_pool;
				zpp_$nape_space_ZPP_$AABBNode.zpp_pool = o;
				var node = gparent;
				while(node != null) {
					node = this.balance(node);
					var child1 = node.child1;
					var child2 = node.child2;
					node.aabb.setCombine(child1.aabb,child2.aabb);
					node.height = 1 + (function($this) {
						var $r;
						var x = child1.height;
						var y = child2.height;
						$r = x > y?x:y;
						return $r;
					}(this));
					node = node.parent;
				}
			} else {
				this.root = sibling;
				sibling.parent = null;
				var o1 = parent;
				o1.free();
				o1.next = zpp_$nape_space_ZPP_$AABBNode.zpp_pool;
				zpp_$nape_space_ZPP_$AABBNode.zpp_pool = o1;
			}
		}
	}
	,balance: function(a) {
		if(a.isLeaf() || a.height < 2) return a; else {
			var b = a.child1;
			var c = a.child2;
			var balance = c.height - b.height;
			if(balance > 1) {
				var f = c.child1;
				var g = c.child2;
				c.child1 = a;
				c.parent = a.parent;
				a.parent = c;
				if(c.parent != null) {
					if(c.parent.child1 == a) c.parent.child1 = c; else c.parent.child2 = c;
				} else this.root = c;
				if(f.height > g.height) {
					c.child2 = f;
					a.child2 = g;
					g.parent = a;
					a.aabb.setCombine(b.aabb,g.aabb);
					c.aabb.setCombine(a.aabb,f.aabb);
					a.height = 1 + (function($this) {
						var $r;
						var x = b.height;
						var y = g.height;
						$r = x > y?x:y;
						return $r;
					}(this));
					c.height = 1 + (function($this) {
						var $r;
						var x1 = a.height;
						var y1 = f.height;
						$r = x1 > y1?x1:y1;
						return $r;
					}(this));
				} else {
					c.child2 = g;
					a.child2 = f;
					f.parent = a;
					a.aabb.setCombine(b.aabb,f.aabb);
					c.aabb.setCombine(a.aabb,g.aabb);
					a.height = 1 + (function($this) {
						var $r;
						var x2 = b.height;
						var y2 = f.height;
						$r = x2 > y2?x2:y2;
						return $r;
					}(this));
					c.height = 1 + (function($this) {
						var $r;
						var x3 = a.height;
						var y3 = g.height;
						$r = x3 > y3?x3:y3;
						return $r;
					}(this));
				}
				return c;
			} else if(balance < -1) {
				var f1 = b.child1;
				var g1 = b.child2;
				b.child1 = a;
				b.parent = a.parent;
				a.parent = b;
				if(b.parent != null) {
					if(b.parent.child1 == a) b.parent.child1 = b; else b.parent.child2 = b;
				} else this.root = b;
				if(f1.height > g1.height) {
					b.child2 = f1;
					a.child1 = g1;
					g1.parent = a;
					a.aabb.setCombine(c.aabb,g1.aabb);
					b.aabb.setCombine(a.aabb,f1.aabb);
					a.height = 1 + (function($this) {
						var $r;
						var x4 = c.height;
						var y4 = g1.height;
						$r = x4 > y4?x4:y4;
						return $r;
					}(this));
					b.height = 1 + (function($this) {
						var $r;
						var x5 = a.height;
						var y5 = f1.height;
						$r = x5 > y5?x5:y5;
						return $r;
					}(this));
				} else {
					b.child2 = g1;
					a.child1 = f1;
					f1.parent = a;
					a.aabb.setCombine(c.aabb,f1.aabb);
					b.aabb.setCombine(a.aabb,g1.aabb);
					a.height = 1 + (function($this) {
						var $r;
						var x6 = c.height;
						var y6 = f1.height;
						$r = x6 > y6?x6:y6;
						return $r;
					}(this));
					b.height = 1 + (function($this) {
						var $r;
						var x7 = a.height;
						var y7 = g1.height;
						$r = x7 > y7?x7:y7;
						return $r;
					}(this));
				}
				return b;
			} else return a;
		}
	}
	,__class__: zpp_$nape_space_ZPP_$AABBTree
};
var zpp_$nape_space_ZPP_$DynAABBPhase = function(space) {
	this.moves = null;
	this.syncs = null;
	this.pairs = null;
	this.dtree = null;
	this.stree = null;
	zpp_$nape_space_ZPP_$Broadphase.call(this);
	this.space = space;
	this.is_sweep = false;
	this.dynab = this;
	this.stree = new zpp_$nape_space_ZPP_$AABBTree();
	this.dtree = new zpp_$nape_space_ZPP_$AABBTree();
};
$hxClasses["zpp_nape.space.ZPP_DynAABBPhase"] = zpp_$nape_space_ZPP_$DynAABBPhase;
zpp_$nape_space_ZPP_$DynAABBPhase.__name__ = ["zpp_nape","space","ZPP_DynAABBPhase"];
zpp_$nape_space_ZPP_$DynAABBPhase.__super__ = zpp_$nape_space_ZPP_$Broadphase;
zpp_$nape_space_ZPP_$DynAABBPhase.prototype = $extend(zpp_$nape_space_ZPP_$Broadphase.prototype,{
	dyn: function(shape) {
		if(shape.body.isStatic()) return false; else return !shape.body.component.sleeping;
	}
	,__insert: function(shape) {
		var node;
		if(zpp_$nape_space_ZPP_$AABBNode.zpp_pool == null) node = new zpp_$nape_space_ZPP_$AABBNode(); else {
			node = zpp_$nape_space_ZPP_$AABBNode.zpp_pool;
			zpp_$nape_space_ZPP_$AABBNode.zpp_pool = node.next;
			node.next = null;
		}
		node.alloc();
		node.shape = shape;
		shape.node = node;
		node.synced = true;
		node.first_sync = true;
		node.snext = this.syncs;
		this.syncs = node;
	}
	,__remove: function(shape) {
		var node = shape.node;
		if(!node.first_sync) {
			if(node.dyn) this.dtree.removeLeaf(node); else this.stree.removeLeaf(node);
		}
		shape.node = null;
		if(node.synced) {
			var pre1 = null;
			var cur1 = this.syncs;
			while(cur1 != null) {
				if(cur1 == node) break;
				pre1 = cur1;
				cur1 = cur1.snext;
			}
			if(pre1 == null) this.syncs = cur1.snext; else pre1.snext = cur1.snext;
			cur1.snext = null;
			node.synced = false;
		}
		if(node.moved) {
			var pre2 = null;
			var cur2 = this.moves;
			while(cur2 != null) {
				if(cur2 == node) break;
				pre2 = cur2;
				cur2 = cur2.mnext;
			}
			if(pre2 == null) this.moves = cur2.mnext; else pre2.mnext = cur2.mnext;
			cur2.mnext = null;
			node.moved = false;
		}
		var pre = null;
		var cur = this.pairs;
		while(cur != null) {
			var nxt = cur.next;
			if(cur.n1 == node || cur.n2 == node) {
				if(pre == null) this.pairs = nxt; else pre.next = nxt;
				if(cur.arb != null) cur.arb.pair = null;
				cur.arb = null;
				cur.n1.shape.pairs.remove(cur);
				cur.n2.shape.pairs.remove(cur);
				var o = cur;
				o.free();
				o.next = zpp_$nape_space_ZPP_$AABBPair.zpp_pool;
				zpp_$nape_space_ZPP_$AABBPair.zpp_pool = o;
				cur = nxt;
				continue;
			}
			pre = cur;
			cur = nxt;
		}
		while(!shape.pairs.empty()) {
			var cur3 = shape.pairs.pop_unsafe();
			if(cur3.n1 == node) cur3.n2.shape.pairs.remove(cur3); else cur3.n1.shape.pairs.remove(cur3);
			if(cur3.arb != null) cur3.arb.pair = null;
			cur3.arb = null;
			var o1 = cur3;
			o1.free();
			o1.next = zpp_$nape_space_ZPP_$AABBPair.zpp_pool;
			zpp_$nape_space_ZPP_$AABBPair.zpp_pool = o1;
		}
		var o2 = node;
		o2.free();
		o2.next = zpp_$nape_space_ZPP_$AABBNode.zpp_pool;
		zpp_$nape_space_ZPP_$AABBNode.zpp_pool = o2;
	}
	,__sync: function(shape) {
		var node = shape.node;
		if(!node.synced) {
			if(!this.space.continuous) shape.validate_aabb();
			var sync = node.dyn != this.dyn(shape) || !node.aabb.contains(shape.aabb);
			if(sync) {
				node.synced = true;
				node.snext = this.syncs;
				this.syncs = node;
			}
		}
	}
	,broadphase: function(space,discrete) {
		var node = this.syncs;
		while(node != null) {
			var shape = node.shape;
			if(!node.first_sync) {
				var tree1;
				if(node.dyn) tree1 = this.dtree; else tree1 = this.stree;
				tree1.inlined_removeLeaf(node);
			} else node.first_sync = false;
			var aabb = node.aabb;
			if(!space.continuous) shape.validate_aabb();
			aabb.setExpand(shape.aabb,3.0);
			var tree;
			if(node.dyn = this.dyn(shape)) tree = this.dtree; else tree = this.stree;
			tree.inlined_insertLeaf(node);
			node.synced = false;
			node = node.snext;
		}
		while(this.syncs != null) {
			var leaf;
			var ret = this.syncs;
			this.syncs = ret.snext;
			ret.snext = null;
			leaf = ret;
			if("syncs" != "moves" && leaf.moved) continue;
			leaf.moved = false;
			var lshape = leaf.shape;
			var lbody = lshape.body;
			if(lbody.component.sleeping) continue;
			var ab = leaf.aabb;
			var stack = null;
			if(this.dtree.root != null) {
				this.dtree.root.next = stack;
				stack = this.dtree.root;
			}
			while(stack != null) {
				var node1;
				var ret1 = stack;
				stack = ret1.next;
				ret1.next = null;
				node1 = ret1;
				if(node1 == leaf) continue;
				if(node1.isLeaf()) {
					var shape1 = node1.shape;
					if(shape1.body != lshape.body && !(shape1.body.isStatic() && lshape.body.isStatic())) {
						if(ab.intersect(node1.aabb)) {
							var id;
							var di;
							if(lshape.id < shape1.id) {
								id = lshape.id;
								di = shape1.id;
							} else {
								id = shape1.id;
								di = lshape.id;
							}
							var s;
							if(lshape.pairs.length < shape1.pairs.length) s = lshape; else s = shape1;
							var p = null;
							var cx_ite = s.pairs.begin();
							while(cx_ite != null) {
								var px = cx_ite.elem();
								if(px.id == id && px.di == di) {
									p = px;
									break;
								}
								cx_ite = cx_ite.next;
							}
							if(p != null) {
								if(p.sleeping) {
									p.sleeping = false;
									p.next = this.pairs;
									this.pairs = p;
									p.first = true;
								}
								continue;
							}
							if(zpp_$nape_space_ZPP_$AABBPair.zpp_pool == null) p = new zpp_$nape_space_ZPP_$AABBPair(); else {
								p = zpp_$nape_space_ZPP_$AABBPair.zpp_pool;
								zpp_$nape_space_ZPP_$AABBPair.zpp_pool = p.next;
								p.next = null;
							}
							p.alloc();
							p.n1 = leaf;
							p.n2 = node1;
							p.id = id;
							p.di = di;
							p.next = this.pairs;
							this.pairs = p;
							p.first = true;
							lshape.pairs.inlined_add(p);
							shape1.pairs.inlined_add(p);
						}
					}
				} else if(ab.intersect(node1.aabb)) {
					if(node1.child1 != null) {
						node1.child1.next = stack;
						stack = node1.child1;
					}
					if(node1.child2 != null) {
						node1.child2.next = stack;
						stack = node1.child2;
					}
				}
			}
			if(this.stree.root != null) {
				this.stree.root.next = stack;
				stack = this.stree.root;
			}
			while(stack != null) {
				var node2;
				var ret2 = stack;
				stack = ret2.next;
				ret2.next = null;
				node2 = ret2;
				if(node2 == leaf) continue;
				if(node2.isLeaf()) {
					var shape2 = node2.shape;
					if(shape2.body != lshape.body && !(shape2.body.isStatic() && lshape.body.isStatic())) {
						if(ab.intersect(node2.aabb)) {
							var id1;
							var di1;
							if(lshape.id < shape2.id) {
								id1 = lshape.id;
								di1 = shape2.id;
							} else {
								id1 = shape2.id;
								di1 = lshape.id;
							}
							var s1;
							if(lshape.pairs.length < shape2.pairs.length) s1 = lshape; else s1 = shape2;
							var p1 = null;
							var cx_ite1 = s1.pairs.begin();
							while(cx_ite1 != null) {
								var px1 = cx_ite1.elem();
								if(px1.id == id1 && px1.di == di1) {
									p1 = px1;
									break;
								}
								cx_ite1 = cx_ite1.next;
							}
							if(p1 != null) {
								if(p1.sleeping) {
									p1.sleeping = false;
									p1.next = this.pairs;
									this.pairs = p1;
									p1.first = true;
								}
								continue;
							}
							if(zpp_$nape_space_ZPP_$AABBPair.zpp_pool == null) p1 = new zpp_$nape_space_ZPP_$AABBPair(); else {
								p1 = zpp_$nape_space_ZPP_$AABBPair.zpp_pool;
								zpp_$nape_space_ZPP_$AABBPair.zpp_pool = p1.next;
								p1.next = null;
							}
							p1.alloc();
							p1.n1 = leaf;
							p1.n2 = node2;
							p1.id = id1;
							p1.di = di1;
							p1.next = this.pairs;
							this.pairs = p1;
							p1.first = true;
							lshape.pairs.inlined_add(p1);
							shape2.pairs.inlined_add(p1);
						}
					}
				} else if(ab.intersect(node2.aabb)) {
					if(node2.child1 != null) {
						node2.child1.next = stack;
						stack = node2.child1;
					}
					if(node2.child2 != null) {
						node2.child2.next = stack;
						stack = node2.child2;
					}
				}
			}
		}
		while(this.moves != null) {
			var leaf1;
			var ret3 = this.moves;
			this.moves = ret3.mnext;
			ret3.mnext = null;
			leaf1 = ret3;
			if("moves" != "moves" && leaf1.moved) continue;
			leaf1.moved = false;
			var lshape1 = leaf1.shape;
			var lbody1 = lshape1.body;
			if(lbody1.component.sleeping) continue;
			var ab1 = leaf1.aabb;
			var stack1 = null;
			if(this.dtree.root != null) {
				this.dtree.root.next = stack1;
				stack1 = this.dtree.root;
			}
			while(stack1 != null) {
				var node3;
				var ret4 = stack1;
				stack1 = ret4.next;
				ret4.next = null;
				node3 = ret4;
				if(node3 == leaf1) continue;
				if(node3.isLeaf()) {
					var shape3 = node3.shape;
					if(shape3.body != lshape1.body && !(shape3.body.isStatic() && lshape1.body.isStatic())) {
						if(ab1.intersect(node3.aabb)) {
							var id2;
							var di2;
							if(lshape1.id < shape3.id) {
								id2 = lshape1.id;
								di2 = shape3.id;
							} else {
								id2 = shape3.id;
								di2 = lshape1.id;
							}
							var s2;
							if(lshape1.pairs.length < shape3.pairs.length) s2 = lshape1; else s2 = shape3;
							var p2 = null;
							var cx_ite2 = s2.pairs.begin();
							while(cx_ite2 != null) {
								var px2 = cx_ite2.elem();
								if(px2.id == id2 && px2.di == di2) {
									p2 = px2;
									break;
								}
								cx_ite2 = cx_ite2.next;
							}
							if(p2 != null) {
								if(p2.sleeping) {
									p2.sleeping = false;
									p2.next = this.pairs;
									this.pairs = p2;
									p2.first = true;
								}
								continue;
							}
							if(zpp_$nape_space_ZPP_$AABBPair.zpp_pool == null) p2 = new zpp_$nape_space_ZPP_$AABBPair(); else {
								p2 = zpp_$nape_space_ZPP_$AABBPair.zpp_pool;
								zpp_$nape_space_ZPP_$AABBPair.zpp_pool = p2.next;
								p2.next = null;
							}
							p2.alloc();
							p2.n1 = leaf1;
							p2.n2 = node3;
							p2.id = id2;
							p2.di = di2;
							p2.next = this.pairs;
							this.pairs = p2;
							p2.first = true;
							lshape1.pairs.inlined_add(p2);
							shape3.pairs.inlined_add(p2);
						}
					}
				} else if(ab1.intersect(node3.aabb)) {
					if(node3.child1 != null) {
						node3.child1.next = stack1;
						stack1 = node3.child1;
					}
					if(node3.child2 != null) {
						node3.child2.next = stack1;
						stack1 = node3.child2;
					}
				}
			}
			if(this.stree.root != null) {
				this.stree.root.next = stack1;
				stack1 = this.stree.root;
			}
			while(stack1 != null) {
				var node4;
				var ret5 = stack1;
				stack1 = ret5.next;
				ret5.next = null;
				node4 = ret5;
				if(node4 == leaf1) continue;
				if(node4.isLeaf()) {
					var shape4 = node4.shape;
					if(shape4.body != lshape1.body && !(shape4.body.isStatic() && lshape1.body.isStatic())) {
						if(ab1.intersect(node4.aabb)) {
							var id3;
							var di3;
							if(lshape1.id < shape4.id) {
								id3 = lshape1.id;
								di3 = shape4.id;
							} else {
								id3 = shape4.id;
								di3 = lshape1.id;
							}
							var s3;
							if(lshape1.pairs.length < shape4.pairs.length) s3 = lshape1; else s3 = shape4;
							var p3 = null;
							var cx_ite3 = s3.pairs.begin();
							while(cx_ite3 != null) {
								var px3 = cx_ite3.elem();
								if(px3.id == id3 && px3.di == di3) {
									p3 = px3;
									break;
								}
								cx_ite3 = cx_ite3.next;
							}
							if(p3 != null) {
								if(p3.sleeping) {
									p3.sleeping = false;
									p3.next = this.pairs;
									this.pairs = p3;
									p3.first = true;
								}
								continue;
							}
							if(zpp_$nape_space_ZPP_$AABBPair.zpp_pool == null) p3 = new zpp_$nape_space_ZPP_$AABBPair(); else {
								p3 = zpp_$nape_space_ZPP_$AABBPair.zpp_pool;
								zpp_$nape_space_ZPP_$AABBPair.zpp_pool = p3.next;
								p3.next = null;
							}
							p3.alloc();
							p3.n1 = leaf1;
							p3.n2 = node4;
							p3.id = id3;
							p3.di = di3;
							p3.next = this.pairs;
							this.pairs = p3;
							p3.first = true;
							lshape1.pairs.inlined_add(p3);
							shape4.pairs.inlined_add(p3);
						}
					}
				} else if(ab1.intersect(node4.aabb)) {
					if(node4.child1 != null) {
						node4.child1.next = stack1;
						stack1 = node4.child1;
					}
					if(node4.child2 != null) {
						node4.child2.next = stack1;
						stack1 = node4.child2;
					}
				}
			}
		}
		var pre = null;
		var cur = this.pairs;
		while(cur != null) {
			if(!cur.first && !cur.n1.aabb.intersect(cur.n2.aabb)) {
				if(pre == null) this.pairs = cur.next; else pre.next = cur.next;
				cur.n1.shape.pairs.inlined_remove(cur);
				cur.n2.shape.pairs.inlined_remove(cur);
				var nxt = cur.next;
				if(cur.arb != null) cur.arb.pair = null;
				cur.arb = null;
				var o = cur;
				o.free();
				o.next = zpp_$nape_space_ZPP_$AABBPair.zpp_pool;
				zpp_$nape_space_ZPP_$AABBPair.zpp_pool = o;
				cur = nxt;
				continue;
			}
			var s11 = cur.n1.shape;
			var b1 = s11.body;
			var s21 = cur.n2.shape;
			var b2 = s21.body;
			if(!cur.first) {
				if((b1.component.sleeping || b1.isStatic()) && (b2.component.sleeping || b2.isStatic())) {
					cur.sleeping = true;
					if(pre == null) this.pairs = cur.next; else pre.next = cur.next;
					cur = cur.next;
					continue;
				}
			}
			cur.first = false;
			if(s11.aabb.intersect(s21.aabb)) {
				var oarb = cur.arb;
				if(discrete) cur.arb = space.narrowPhase(s11,s21,!b1.isDynamic() || !b2.isDynamic(),cur.arb,false); else cur.arb = space.continuousEvent(s11,s21,!b1.isDynamic() || !b2.isDynamic(),cur.arb,false);
				if(cur.arb == null) {
					if(oarb != null) oarb.pair = null;
				} else cur.arb.pair = cur;
			}
			pre = cur;
			cur = cur.next;
		}
	}
	,__class__: zpp_$nape_space_ZPP_$DynAABBPhase
});
var zpp_$nape_space_ZPP_$Island = function() {
	this.waket = 0;
	this.sleep = false;
	this.comps = null;
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this._inuse = false;
	this.next = null;
	this.comps = new zpp_$nape_util_ZNPList_$ZPP_$Component();
};
$hxClasses["zpp_nape.space.ZPP_Island"] = zpp_$nape_space_ZPP_$Island;
zpp_$nape_space_ZPP_$Island.__name__ = ["zpp_nape","space","ZPP_Island"];
zpp_$nape_space_ZPP_$Island.prototype = {
	elem: function() {
		return this;
	}
	,begin: function() {
		return this.next;
	}
	,inlined_add: function(o) {
		var temp;
		o._inuse = true;
		temp = o;
		temp.next = this.begin();
		this.next = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.next = ret.next;
		ret.elem()._inuse = false;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,front: function() {
		return this.begin().elem();
	}
	,free: function() {
	}
	,alloc: function() {
		this.waket = 0;
	}
	,__class__: zpp_$nape_space_ZPP_$Island
};
var zpp_$nape_space_ZPP_$Component = function() {
	this.woken = false;
	this.waket = 0;
	this.sleeping = false;
	this.island = null;
	this.constraint = null;
	this.body = null;
	this.isBody = false;
	this.rank = 0;
	this.parent = null;
	this.next = null;
	this.reset();
	this.woken = false;
};
$hxClasses["zpp_nape.space.ZPP_Component"] = zpp_$nape_space_ZPP_$Component;
zpp_$nape_space_ZPP_$Component.__name__ = ["zpp_nape","space","ZPP_Component"];
zpp_$nape_space_ZPP_$Component.prototype = {
	free: function() {
		this.body = null;
		this.constraint = null;
	}
	,alloc: function() {
	}
	,reset: function() {
		this.sleeping = false;
		this.island = null;
		this.parent = this;
		this.rank = 0;
	}
	,__class__: zpp_$nape_space_ZPP_$Component
};
var zpp_$nape_space_ZPP_$CallbackSet = function() {
	this.lazydel = false;
	this.freed = false;
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this._inuse = false;
	this.next = null;
	this.int2 = null;
	this.int1 = null;
	this.di = 0;
	this.id = 0;
	this.arbiters = new zpp_$nape_util_ZNPList_$ZPP_$Arbiter();
};
$hxClasses["zpp_nape.space.ZPP_CallbackSet"] = zpp_$nape_space_ZPP_$CallbackSet;
zpp_$nape_space_ZPP_$CallbackSet.__name__ = ["zpp_nape","space","ZPP_CallbackSet"];
zpp_$nape_space_ZPP_$CallbackSet.get = function(i1,i2) {
	var ret;
	if(zpp_$nape_space_ZPP_$CallbackSet.zpp_pool == null) ret = new zpp_$nape_space_ZPP_$CallbackSet(); else {
		ret = zpp_$nape_space_ZPP_$CallbackSet.zpp_pool;
		zpp_$nape_space_ZPP_$CallbackSet.zpp_pool = ret.next;
		ret.next = null;
	}
	ret.alloc();
	if(i1.id < i2.id) {
		ret.int1 = i1;
		ret.int2 = i2;
	} else {
		ret.int1 = i2;
		ret.int2 = i1;
	}
	ret.id = ret.int1.id;
	ret.di = ret.int2.id;
	return ret;
};
zpp_$nape_space_ZPP_$CallbackSet.prototype = {
	elem: function() {
		return this;
	}
	,begin: function() {
		return this.next;
	}
	,inlined_add: function(o) {
		var temp;
		o._inuse = true;
		temp = o;
		temp.next = this.begin();
		this.next = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.next = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		old.elem()._inuse = false;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,free: function() {
		this.int1 = this.int2 = null;
		this.id = this.di = -1;
		this.freed = true;
	}
	,alloc: function() {
		this.freed = false;
		this.lazydel = false;
		this.COLLISIONstate = zpp_$nape_util_ZPP_$Flags.id_PreFlag_ACCEPT;
		this.COLLISIONstamp = 0;
		this.SENSORstate = zpp_$nape_util_ZPP_$Flags.id_PreFlag_ACCEPT;
		this.SENSORstamp = 0;
		this.FLUIDstate = zpp_$nape_util_ZPP_$Flags.id_PreFlag_ACCEPT;
		this.FLUIDstamp = 0;
	}
	,add_arb: function(x) {
		if(!this.arbiters.inlined_has(x)) {
			this.arbiters.inlined_add(x);
			return true;
		} else return false;
	}
	,remove_arb: function(x) {
		this.arbiters.inlined_remove(x);
	}
	,empty_arb: function(type) {
		var retvar;
		retvar = true;
		var cx_ite = this.arbiters.begin();
		while(cx_ite != null) {
			var x = cx_ite.elem();
			if((x.type & type) == 0) {
				cx_ite = cx_ite.next;
				continue;
			} else {
				retvar = false;
				break;
			}
			cx_ite = cx_ite.next;
		}
		return retvar;
	}
	,really_empty: function() {
		return this.arbiters.empty();
	}
	,sleeping: function() {
		var ret;
		ret = true;
		var cx_ite = this.arbiters.begin();
		while(cx_ite != null) {
			var x = cx_ite.elem();
			if(x.sleeping) {
				cx_ite = cx_ite.next;
				continue;
			} else {
				ret = false;
				break;
			}
			cx_ite = cx_ite.next;
		}
		return ret;
	}
	,__class__: zpp_$nape_space_ZPP_$CallbackSet
};
var zpp_$nape_space_ZPP_$CbSetManager = function(space) {
	this.space = null;
	this.cbsets = null;
	if(zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool == null) this.cbsets = new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet(); else {
		this.cbsets = zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool;
		zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool = this.cbsets.next;
		this.cbsets.next = null;
	}
	this.cbsets.alloc();
	this.cbsets.lt = zpp_$nape_callbacks_ZPP_$CbSet.setlt;
	this.space = space;
};
$hxClasses["zpp_nape.space.ZPP_CbSetManager"] = zpp_$nape_space_ZPP_$CbSetManager;
zpp_$nape_space_ZPP_$CbSetManager.__name__ = ["zpp_nape","space","ZPP_CbSetManager"];
zpp_$nape_space_ZPP_$CbSetManager.prototype = {
	get: function(cbTypes) {
		if(cbTypes.empty()) return null;
		var fake;
		if(zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool == null) fake = new zpp_$nape_callbacks_ZPP_$CbSet(); else {
			fake = zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool;
			zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool = fake.next;
			fake.next = null;
		}
		fake.alloc();
		var faketypes = fake.cbTypes;
		fake.cbTypes = cbTypes;
		var res = this.cbsets.find_weak(fake);
		var ret;
		if(res != null) ret = res.data; else {
			var set = zpp_$nape_callbacks_ZPP_$CbSet.get(cbTypes);
			this.cbsets.insert(set);
			set.manager = this;
			ret = set;
		}
		fake.cbTypes = faketypes;
		var o = fake;
		o.free();
		o.next = zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool;
		zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool = o;
		return ret;
	}
	,remove: function(set) {
		this.cbsets.remove(set);
		while(!set.cbpairs.empty()) {
			var pair = set.cbpairs.pop_unsafe();
			if(pair.a != pair.b) {
				if(set == pair.a) pair.b.cbpairs.remove(pair); else pair.a.cbpairs.remove(pair);
			}
			var o = pair;
			o.free();
			o.next = zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;
			zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool = o;
		}
		set.manager = null;
	}
	,validate: function() {
		if(!this.cbsets.empty()) {
			var set_ite = this.cbsets.parent;
			while(set_ite.prev != null) set_ite = set_ite.prev;
			while(set_ite != null) {
				var cb = set_ite.data;
				cb.validate();
				if(set_ite.next != null) {
					set_ite = set_ite.next;
					while(set_ite.prev != null) set_ite = set_ite.prev;
				} else {
					while(set_ite.parent != null && set_ite == set_ite.parent.next) set_ite = set_ite.parent;
					set_ite = set_ite.parent;
				}
			}
		}
	}
	,pair: function(a,b) {
		var ret = null;
		var pairs;
		if(a.cbpairs.length < b.cbpairs.length) pairs = a.cbpairs; else pairs = b.cbpairs;
		var cx_ite = pairs.begin();
		while(cx_ite != null) {
			var p = cx_ite.elem();
			if(p.a == a && p.b == b || p.a == b && p.b == a) {
				ret = p;
				break;
			}
			cx_ite = cx_ite.next;
		}
		if(ret == null) {
			ret = zpp_$nape_callbacks_ZPP_$CbSetPair.get(a,b);
			a.cbpairs.add(ret);
			if(b != a) b.cbpairs.add(ret);
		}
		ret.validate();
		return ret;
	}
	,valid_listener: function(i) {
		return i.space == this.space;
	}
	,__class__: zpp_$nape_space_ZPP_$CbSetManager
};
var zpp_$nape_space_ZPP_$Space = function(gravity,broadphase) {
	this.prelisteners = null;
	this.precb = null;
	this.continuous = false;
	this.toiEvents = null;
	this.pre_dt = 0.0;
	this.cbsets = null;
	this.callbackset_list = null;
	this.callbacks = null;
	this.wrap_listeners = null;
	this.listeners = null;
	this.islands = null;
	this.staticsleep = null;
	this.wrap_livecon = null;
	this.live_constraints = null;
	this.wrap_live = null;
	this.live = null;
	this.s_arbiters = null;
	this.f_arbiters = null;
	this.c_arbiters_false = null;
	this.c_arbiters_true = null;
	this.sortcontacts = false;
	this.time = 0.0;
	this.midstep = false;
	this.stamp = 0;
	this.global_ang_drag = 0.0;
	this.global_lin_drag = 0.0;
	this.__static = null;
	this.bphase = null;
	this.kinematics = null;
	this.wrap_constraints = null;
	this.constraints = null;
	this.wrap_compounds = null;
	this.compounds = null;
	this.wrap_bodies = null;
	this.bodies = null;
	this.gravityy = 0.0;
	this.gravityx = 0.0;
	this.outer = null;
	this.toiEvents = new zpp_$nape_util_ZNPList_$ZPP_$ToiEvent();
	this.global_lin_drag = 0.015;
	this.global_ang_drag = 0.015;
	this.precb = new nape_callbacks_PreCallback();
	this.precb.zpp_inner = new zpp_$nape_callbacks_ZPP_$Callback();
	this.sortcontacts = true;
	this.pre_dt = 0.0;
	if(broadphase == null || broadphase == nape_space_Broadphase.get_DYNAMIC_AABB_TREE()) this.bphase = new zpp_$nape_space_ZPP_$DynAABBPhase(this); else if(broadphase == nape_space_Broadphase.get_SWEEP_AND_PRUNE()) this.bphase = new zpp_$nape_space_ZPP_$SweepPhase(this);
	this.time = 0.0;
	var me = this;
	if(gravity != null) {
		this.gravityx = gravity.x;
		this.gravityy = gravity.y;
	} else {
		this.gravityx = 0;
		this.gravityy = 0;
	}
	this.bodies = new zpp_$nape_util_ZNPList_$ZPP_$Body();
	this.wrap_bodies = zpp_$nape_util_ZPP_$BodyList.get(this.bodies);
	this.wrap_bodies.zpp_inner.adder = $bind(this,this.bodies_adder);
	this.wrap_bodies.zpp_inner.subber = $bind(this,this.bodies_subber);
	this.compounds = new zpp_$nape_util_ZNPList_$ZPP_$Compound();
	this.wrap_compounds = zpp_$nape_util_ZPP_$CompoundList.get(this.compounds);
	this.wrap_compounds.zpp_inner.adder = $bind(this,this.compounds_adder);
	this.wrap_compounds.zpp_inner.subber = $bind(this,this.compounds_subber);
	this.kinematics = new zpp_$nape_util_ZNPList_$ZPP_$Body();
	this.c_arbiters_true = new zpp_$nape_util_ZNPList_$ZPP_$ColArbiter();
	this.c_arbiters_false = new zpp_$nape_util_ZNPList_$ZPP_$ColArbiter();
	this.f_arbiters = new zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter();
	this.s_arbiters = new zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter();
	this.islands = new zpp_$nape_space_ZPP_$Island();
	this.live = new zpp_$nape_util_ZNPList_$ZPP_$Body();
	this.wrap_live = zpp_$nape_util_ZPP_$BodyList.get(this.live,true);
	this.staticsleep = new zpp_$nape_util_ZNPList_$ZPP_$Body();
	this.constraints = new zpp_$nape_util_ZNPList_$ZPP_$Constraint();
	this.wrap_constraints = zpp_$nape_util_ZPP_$ConstraintList.get(this.constraints);
	this.wrap_constraints.zpp_inner.adder = $bind(this,this.constraints_adder);
	this.wrap_constraints.zpp_inner.subber = $bind(this,this.constraints_subber);
	this.live_constraints = new zpp_$nape_util_ZNPList_$ZPP_$Constraint();
	this.wrap_livecon = zpp_$nape_util_ZPP_$ConstraintList.get(this.live_constraints,true);
	this.__static = zpp_$nape_phys_ZPP_$Body.__static();
	this.__static.zpp_inner.space = this;
	this.callbacks = new zpp_$nape_callbacks_ZPP_$Callback();
	this.midstep = false;
	this.listeners = new zpp_$nape_util_ZNPList_$ZPP_$Listener();
	this.wrap_listeners = zpp_$nape_util_ZPP_$ListenerList.get(this.listeners);
	this.wrap_listeners.zpp_inner.adder = $bind(this,this.listeners_adder);
	this.wrap_listeners.zpp_inner.subber = $bind(this,this.listeners_subber);
	this.callbackset_list = new zpp_$nape_space_ZPP_$CallbackSet();
	this.mrca1 = new zpp_$nape_util_ZNPList_$ZPP_$Interactor();
	this.mrca2 = new zpp_$nape_util_ZNPList_$ZPP_$Interactor();
	this.prelisteners = new zpp_$nape_util_ZNPList_$ZPP_$InteractionListener();
	this.cbsets = new zpp_$nape_space_ZPP_$CbSetManager(this);
};
$hxClasses["zpp_nape.space.ZPP_Space"] = zpp_$nape_space_ZPP_$Space;
zpp_$nape_space_ZPP_$Space.__name__ = ["zpp_nape","space","ZPP_Space"];
zpp_$nape_space_ZPP_$Space.prototype = {
	bodies_adder: function(x) {
		if(x.zpp_inner.space != this) {
			if(x.zpp_inner.space != null) x.zpp_inner.space.outer.get_bodies().remove(x);
			this.addBody(x.zpp_inner);
			return true;
		} else return false;
	}
	,bodies_subber: function(x) {
		this.remBody(x.zpp_inner);
	}
	,compounds_adder: function(x) {
		if(x.zpp_inner.space != this) {
			if(x.zpp_inner.space != null) x.zpp_inner.space.wrap_compounds.remove(x);
			this.addCompound(x.zpp_inner);
			return true;
		} else return false;
	}
	,compounds_subber: function(x) {
		this.remCompound(x.zpp_inner);
	}
	,constraints_adder: function(x) {
		if(x.zpp_inner.space != this) {
			if(x.zpp_inner.space != null) x.zpp_inner.space.outer.get_constraints().remove(x);
			this.addConstraint(x.zpp_inner);
			return true;
		} else return false;
	}
	,constraints_subber: function(x) {
		this.remConstraint(x.zpp_inner);
	}
	,listeners_adder: function(x) {
		if(x.zpp_inner.space != this) {
			if(x.zpp_inner.space != null) x.zpp_inner.space.outer.get_listeners().remove(x);
			this.addListener(x.zpp_inner);
			return true;
		} else return false;
	}
	,listeners_subber: function(x) {
		this.remListener(x.zpp_inner);
	}
	,revoke_listener: function(x) {
	}
	,unrevoke_listener: function(x) {
	}
	,addListener: function(x) {
		x.space = this;
		x.addedToSpace();
		if(x.interaction != null) this.unrevoke_listener(x.interaction);
	}
	,remListener: function(x) {
		if(x.interaction != null) this.revoke_listener(x.interaction);
		x.removedFromSpace();
		x.space = null;
	}
	,add_callbackset: function(cb) {
		cb.int1.cbsets.inlined_add(cb);
		cb.int2.cbsets.inlined_add(cb);
		this.callbackset_list.inlined_add(cb);
	}
	,remove_callbackset: function(cb) {
		cb.lazydel = true;
		cb.int1.cbsets.inlined_remove(cb);
		cb.int2.cbsets.inlined_remove(cb);
	}
	,transmitType: function(p,new_type) {
		var o = p;
		if(!o.world) {
			o.component.waket = this.stamp + (this.midstep?0:1);
			if(o.isKinematic()) o.kinematicDelaySleep = true;
			if(o.component.sleeping) this.really_wake(o,false);
		}
		if(p.type == zpp_$nape_util_ZPP_$Flags.id_BodyType_DYNAMIC) this.live.remove(p); else if(p.type == zpp_$nape_util_ZPP_$Flags.id_BodyType_KINEMATIC) {
			this.kinematics.remove(p);
			this.staticsleep.remove(p);
		} else if(p.type == zpp_$nape_util_ZPP_$Flags.id_BodyType_STATIC) this.staticsleep.remove(p);
		p.type = new_type;
		if(p.type == zpp_$nape_util_ZPP_$Flags.id_BodyType_KINEMATIC) this.kinematics.add(p);
		if(p.type == zpp_$nape_util_ZPP_$Flags.id_BodyType_STATIC) this.static_validation(p);
		p.component.sleeping = true;
		var o1 = p;
		if(!o1.world) {
			o1.component.waket = this.stamp + (this.midstep?0:1);
			if(o1.isKinematic()) o1.kinematicDelaySleep = true;
			if(o1.component.sleeping) this.really_wake(o1,true);
		}
	}
	,added_shape: function(s,dontwake) {
		if(dontwake == null) dontwake = false;
		if(!dontwake) {
			var o = s.body;
			if(!o.world) {
				o.component.waket = this.stamp + (this.midstep?0:1);
				if(o.isKinematic()) o.kinematicDelaySleep = true;
				if(o.component.sleeping) this.really_wake(o,false);
			}
		}
		this.bphase.insert(s);
		s.addedToSpace();
	}
	,removed_shape: function(s,deleting) {
		if(deleting == null) deleting = false;
		var _g = this;
		var body = s.body;
		if(!deleting) body.wake();
		var pre = null;
		var cx_ite = body.arbiters.begin();
		while(cx_ite != null) {
			var xarb = [cx_ite.elem()];
			var rem = xarb[0].ws1 == s || xarb[0].ws2 == s;
			if(rem) {
				if(xarb[0].present != 0) {
					this.MRCA_chains(xarb[0].ws1,xarb[0].ws2);
					var cx_ite1 = this.mrca1.begin();
					while(cx_ite1 != null) {
						var i1 = cx_ite1.elem();
						var cx_ite2 = this.mrca2.begin();
						while(cx_ite2 != null) {
							var i2 = cx_ite2.elem();
							var cb1 = i1.cbSet;
							var cb2 = i2.cbSet;
							cb1.validate();
							cb2.validate();
							if(zpp_$nape_callbacks_ZPP_$CbSet.empty_intersection(cb1,cb2)) {
								cx_ite2 = cx_ite2.next;
								continue;
							}
							var callbackset = [zpp_$nape_phys_ZPP_$Interactor.get(i1,i2)];
							callbackset[0].remove_arb(xarb[0]);
							xarb[0].present--;
							zpp_$nape_callbacks_ZPP_$CbSet.find_all(cb1,cb2,zpp_$nape_util_ZPP_$Flags.id_CbEvent_END,(function(callbackset,xarb) {
								return function(listener) {
									if((listener.itype & xarb[0].type) != 0 && callbackset[0].empty_arb(listener.itype)) {
										var cb = _g.push_callback(listener);
										cb.event = zpp_$nape_util_ZPP_$Flags.id_CbEvent_END;
										zpp_$nape_phys_ZPP_$Interactor.int_callback(callbackset[0],listener,cb);
										cb.set = callbackset[0];
									}
								};
							})(callbackset,xarb));
							if(callbackset[0].really_empty()) this.remove_callbackset(callbackset[0]);
							cx_ite2 = cx_ite2.next;
						}
						cx_ite1 = cx_ite1.next;
					}
				}
				if(xarb[0].b1 != body && xarb[0].b1.isDynamic()) {
					var o = xarb[0].b1;
					if(!o.world) {
						o.component.waket = this.stamp + (this.midstep?0:1);
						if(o.isKinematic()) o.kinematicDelaySleep = true;
						if(o.component.sleeping) this.really_wake(o,false);
					}
				}
				if(xarb[0].b2 != body && xarb[0].b2.isDynamic()) {
					var o1 = xarb[0].b2;
					if(!o1.world) {
						o1.component.waket = this.stamp + (this.midstep?0:1);
						if(o1.isKinematic()) o1.kinematicDelaySleep = true;
						if(o1.component.sleeping) this.really_wake(o1,false);
					}
				}
				xarb[0].lazyRetire(this,body);
				cx_ite = body.arbiters.erase(pre);
				continue;
			}
			pre = cx_ite;
			cx_ite = cx_ite.next;
		}
		this.bphase.remove(s);
		s.removedFromSpace();
	}
	,addConstraint: function(con) {
		con.space = this;
		con.addedToSpace();
		if(con.active) {
			con.component.sleeping = true;
			this.wake_constraint(con,true);
		}
	}
	,remConstraint: function(con) {
		if(con.active) {
			this.wake_constraint(con,true);
			this.live_constraints.remove(con);
		}
		con.removedFromSpace();
		con.space = null;
	}
	,addCompound: function(x) {
		x.space = this;
		x.addedToSpace();
		var cx_ite = x.bodies.begin();
		while(cx_ite != null) {
			var i = cx_ite.elem();
			this.addBody(i);
			cx_ite = cx_ite.next;
		}
		var cx_ite1 = x.constraints.begin();
		while(cx_ite1 != null) {
			var i1 = cx_ite1.elem();
			this.addConstraint(i1);
			cx_ite1 = cx_ite1.next;
		}
		var cx_ite2 = x.compounds.begin();
		while(cx_ite2 != null) {
			var i2 = cx_ite2.elem();
			this.addCompound(i2);
			cx_ite2 = cx_ite2.next;
		}
	}
	,remCompound: function(x) {
		var cx_ite = x.bodies.begin();
		while(cx_ite != null) {
			var i = cx_ite.elem();
			this.remBody(i);
			cx_ite = cx_ite.next;
		}
		var cx_ite1 = x.constraints.begin();
		while(cx_ite1 != null) {
			var i1 = cx_ite1.elem();
			this.remConstraint(i1);
			cx_ite1 = cx_ite1.next;
		}
		var cx_ite2 = x.compounds.begin();
		while(cx_ite2 != null) {
			var i2 = cx_ite2.elem();
			this.remCompound(i2);
			cx_ite2 = cx_ite2.next;
		}
		x.removedFromSpace();
		x.space = null;
	}
	,addBody: function(body,flag) {
		if(flag == null) flag = -1;
		body.space = this;
		body.addedToSpace();
		body.component.sleeping = true;
		var o = body;
		if(!o.world) {
			o.component.waket = this.stamp + (this.midstep?0:1);
			if(o.isKinematic()) o.kinematicDelaySleep = true;
			if(o.component.sleeping) this.really_wake(o,true);
		}
		var cx_ite = body.shapes.begin();
		while(cx_ite != null) {
			var shape = cx_ite.elem();
			this.added_shape(shape,true);
			cx_ite = cx_ite.next;
		}
		if(body.isStatic()) {
			this.static_validation(body);
		} else if(body.isDynamic()) {
		} else {
			if(flag != zpp_$nape_util_ZPP_$Flags.id_BodyType_KINEMATIC) this.kinematics.add(body);
		}
	}
	,remBody: function(body,flag) {
		if(flag == null) flag = -1;
		if(body.isStatic()) {
			var o = body;
			if(!o.world) {
				o.component.waket = this.stamp + (this.midstep?0:1);
				if(o.isKinematic()) o.kinematicDelaySleep = true;
				if(o.component.sleeping) this.really_wake(o,true);
			}
			this.staticsleep.remove(body);
		} else if(body.isDynamic()) {
			var o1 = body;
			if(!o1.world) {
				o1.component.waket = this.stamp + (this.midstep?0:1);
				if(o1.isKinematic()) o1.kinematicDelaySleep = true;
				if(o1.component.sleeping) this.really_wake(o1,true);
			}
			this.live.remove(body);
		} else {
			if(flag != zpp_$nape_util_ZPP_$Flags.id_BodyType_KINEMATIC) this.kinematics.remove(body);
			var o2 = body;
			if(!o2.world) {
				o2.component.waket = this.stamp + (this.midstep?0:1);
				if(o2.isKinematic()) o2.kinematicDelaySleep = true;
				if(o2.component.sleeping) this.really_wake(o2,true);
			}
			this.staticsleep.remove(body);
		}
		var cx_ite = body.shapes.begin();
		while(cx_ite != null) {
			var shape = cx_ite.elem();
			this.removed_shape(shape,true);
			cx_ite = cx_ite.next;
		}
		body.removedFromSpace();
		body.space = null;
	}
	,push_callback: function(i) {
		var cb;
		if(zpp_$nape_callbacks_ZPP_$Callback.zpp_pool == null) cb = new zpp_$nape_callbacks_ZPP_$Callback(); else {
			cb = zpp_$nape_callbacks_ZPP_$Callback.zpp_pool;
			zpp_$nape_callbacks_ZPP_$Callback.zpp_pool = cb.next;
			cb.next = null;
		}
		cb.alloc();
		this.callbacks.push(cb);
		cb.listener = i;
		return cb;
	}
	,step: function(deltaTime,velocityIterations,positionIterations) {
		var _g = this;
		this.time += deltaTime;
		this.pre_dt = deltaTime;
		this.midstep = true;
		this.stamp++;
		this.validation();
		this.bphase.broadphase(this,true);
		this.prestep(deltaTime);
		if(this.sortcontacts) {
			var xxlist = this.c_arbiters_false;
			if(!xxlist.empty() && xxlist.begin().next != null) {
				var head = xxlist.begin();
				var tail = null;
				var left = null;
				var right = null;
				var nxt = null;
				var listSize = 1;
				var numMerges;
				var leftSize;
				var rightSize;
				do {
					numMerges = 0;
					left = head;
					tail = head = null;
					while(left != null) {
						numMerges++;
						right = left;
						leftSize = 0;
						rightSize = listSize;
						while(right != null && leftSize < listSize) {
							leftSize++;
							right = right.next;
						}
						while(leftSize > 0 || rightSize > 0 && right != null) {
							if(leftSize == 0) {
								nxt = right;
								right = right.next;
								rightSize--;
							} else if(rightSize == 0 || right == null) {
								nxt = left;
								left = left.next;
								leftSize--;
							} else if(left.elem().active && right.elem().active?left.elem().oc1.dist < right.elem().oc1.dist:true) {
								nxt = left;
								left = left.next;
								leftSize--;
							} else {
								nxt = right;
								right = right.next;
								rightSize--;
							}
							if(tail != null) tail.next = nxt; else head = nxt;
							tail = nxt;
						}
						left = right;
					}
					tail.next = null;
					listSize <<= 1;
				} while(numMerges > 1);
				xxlist.setbegin(head);
			}
		}
		this.updateVel(deltaTime);
		this.warmStart();
		this.iterateVel(velocityIterations);
		var cx_ite = this.kinematics.begin();
		while(cx_ite != null) {
			var cur = cx_ite.elem();
			cur.pre_posx = cur.posx;
			cur.pre_posy = cur.posy;
			cur.pre_rot = cur.rot;
			cx_ite = cx_ite.next;
		}
		var cx_ite1 = this.live.begin();
		while(cx_ite1 != null) {
			var cur1 = cx_ite1.elem();
			cur1.pre_posx = cur1.posx;
			cur1.pre_posy = cur1.posy;
			cur1.pre_rot = cur1.rot;
			cx_ite1 = cx_ite1.next;
		}
		this.updatePos(deltaTime);
		this.continuous = true;
		this.continuousCollisions(deltaTime);
		this.continuous = false;
		this.iteratePos(positionIterations);
		var cx_ite2 = this.kinematics.begin();
		while(cx_ite2 != null) {
			var cur2 = cx_ite2.elem();
			var upos = !(cur2.posx == cur2.pre_posx && cur2.posy == cur2.pre_posy);
			var urot = cur2.pre_rot != cur2.rot;
			if(upos) cur2.invalidate_pos();
			if(urot) cur2.invalidate_rot();
			cx_ite2 = cx_ite2.next;
		}
		var cx_ite3 = this.live.begin();
		while(cx_ite3 != null) {
			var cur3 = cx_ite3.elem();
			var upos1 = !(cur3.posx == cur3.pre_posx && cur3.posy == cur3.pre_posy);
			var urot1 = cur3.pre_rot != cur3.rot;
			if(upos1) cur3.invalidate_pos();
			if(urot1) cur3.invalidate_rot();
			cx_ite3 = cx_ite3.next;
		}
		var pre = null;
		var cx_ite4 = this.staticsleep.begin();
		while(cx_ite4 != null) {
			var b = cx_ite4.elem();
			if(!b.isKinematic() || b.velx == 0 && b.vely == 0 && b.angvel == 0) {
				if(b.kinematicDelaySleep) {
					b.kinematicDelaySleep = false;
					cx_ite4 = cx_ite4.next;
					continue;
				}
				b.component.sleeping = true;
				cx_ite4 = this.staticsleep.inlined_erase(pre);
				continue;
			}
			pre = cx_ite4;
			cx_ite4 = cx_ite4.next;
		}
		this.doForests(deltaTime);
		this.sleepArbiters();
		this.midstep = false;
		var pre1 = null;
		var cx_ite5 = this.callbackset_list.begin();
		while(cx_ite5 != null) {
			var set = [cx_ite5.elem()];
			if(set[0].really_empty()) {
				cx_ite5 = this.callbackset_list.inlined_erase(pre1);
				var o = set[0];
				o.free();
				o.next = zpp_$nape_space_ZPP_$CallbackSet.zpp_pool;
				zpp_$nape_space_ZPP_$CallbackSet.zpp_pool = o;
				continue;
			}
			var sleeping = [set[0].sleeping()];
			zpp_$nape_callbacks_ZPP_$CbSet.find_all(set[0].int1.cbSet,set[0].int2.cbSet,zpp_$nape_util_ZPP_$Flags.id_CbEvent_ONGOING,(function(sleeping,set) {
				return function(x) {
					if((!sleeping[0] || x.allowSleepingCallbacks) && !set[0].empty_arb(x.itype)) {
						var cb = _g.push_callback(x);
						cb.event = zpp_$nape_util_ZPP_$Flags.id_CbEvent_ONGOING;
						zpp_$nape_phys_ZPP_$Interactor.int_callback(set[0],x,cb);
						cb.set = set[0];
					}
				};
			})(sleeping,set));
			pre1 = cx_ite5;
			cx_ite5 = cx_ite5.next;
		}
		while(!this.callbacks.empty()) {
			var cb1 = this.callbacks.pop();
			if(cb1.listener.type == zpp_$nape_util_ZPP_$Flags.id_ListenerType_BODY) {
				var o1 = cb1.listener.body;
				o1.handler(cb1.wrapper_body());
			} else if(cb1.listener.type == zpp_$nape_util_ZPP_$Flags.id_ListenerType_CONSTRAINT) {
				var o2 = cb1.listener.constraint;
				o2.handler(cb1.wrapper_con());
			} else if(cb1.listener.type == zpp_$nape_util_ZPP_$Flags.id_ListenerType_INTERACTION) {
				var o3 = cb1.listener.interaction;
				o3.handleri(cb1.wrapper_int());
			}
			var o4 = cb1;
			o4.free();
			o4.next = zpp_$nape_callbacks_ZPP_$Callback.zpp_pool;
			zpp_$nape_callbacks_ZPP_$Callback.zpp_pool = o4;
		}
	}
	,continuousCollisions: function(deltaTime) {
		var MAX_VEL = 2 * Math.PI / deltaTime;
		this.bphase.broadphase(this,false);
		var curTimeAlpha = 0.0;
		while(curTimeAlpha < 1 && !this.toiEvents.empty()) {
			var minTOI = null;
			var minTime = 2.0;
			var minKinematic = false;
			var preMin = null;
			var pre = null;
			var cx_ite = this.toiEvents.begin();
			while(cx_ite != null) {
				var toi = cx_ite.elem();
				var b11 = toi.s1.body;
				var b21 = toi.s2.body;
				if(b11.sweepFrozen && b21.sweepFrozen) {
					if(toi.toi != 0 && zpp_$nape_geom_ZPP_$Collide.testCollide_safe(toi.s1,toi.s2)) toi.toi = 0; else {
						cx_ite = this.toiEvents.erase(pre);
						var o = toi;
						o.free();
						o.next = zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;
						zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool = o;
						continue;
					}
				}
				if(toi.frozen1 != b11.sweepFrozen || toi.frozen2 != b21.sweepFrozen) {
					if(!toi.kinematic) {
						toi.frozen1 = b11.sweepFrozen;
						toi.frozen2 = b21.sweepFrozen;
						if(toi.frozen1) {
							var tmp = toi.s1;
							toi.s1 = toi.s2;
							toi.s2 = tmp;
							toi.frozen1 = false;
							toi.frozen2 = true;
						}
						zpp_$nape_geom_ZPP_$SweepDistance.staticSweep(toi,deltaTime,0,nape_Config.collisionSlopCCD);
						if(toi.toi < 0) {
							cx_ite = this.toiEvents.erase(pre);
							var o1 = toi;
							o1.free();
							o1.next = zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;
							zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool = o1;
							continue;
						}
					} else {
						cx_ite = this.toiEvents.erase(pre);
						var o2 = toi;
						o2.free();
						o2.next = zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;
						zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool = o2;
						continue;
					}
				}
				if(toi.toi >= 0 && (toi.toi < minTime || !minKinematic && toi.kinematic)) {
					minTOI = toi;
					minTime = toi.toi;
					minKinematic = toi.kinematic;
					preMin = pre;
				}
				pre = cx_ite;
				cx_ite = cx_ite.next;
			}
			if(minTOI == null) break;
			this.toiEvents.erase(preMin);
			curTimeAlpha = minTOI.toi;
			var b1 = minTOI.s1.body;
			var b2 = minTOI.s2.body;
			if(!b1.sweepFrozen) {
				b1.sweepIntegrate(curTimeAlpha * deltaTime);
				b1.sweepValidate(minTOI.s1);
			}
			if(!b2.sweepFrozen) {
				b2.sweepIntegrate(curTimeAlpha * deltaTime);
				b2.sweepValidate(minTOI.s2);
			}
			var wasnull = minTOI.arbiter == null;
			var arb = this.narrowPhase(minTOI.s1,minTOI.s2,true,minTOI.arbiter,true);
			if(arb == null) {
				if(minTOI.arbiter != null && minTOI.arbiter.pair != null) {
					minTOI.arbiter.pair.arb = null;
					minTOI.arbiter.pair = null;
				}
			} else if(!this.presteparb(arb,deltaTime,true)) {
				if(arb.type == zpp_$nape_dynamics_ZPP_$Arbiter.COL && arb.acting()) {
					arb.colarb.warmStart();
					arb.colarb.applyImpulseVel();
					arb.colarb.applyImpulseVel();
					arb.colarb.applyImpulseVel();
					arb.colarb.applyImpulseVel();
					b1.sweep_angvel = b1.angvel % MAX_VEL;
					b2.sweep_angvel = b2.angvel % MAX_VEL;
				}
			}
			if(arb != null && arb.acting() && arb.type == zpp_$nape_dynamics_ZPP_$Arbiter.COL) {
				if(!b1.sweepFrozen && !b1.isKinematic()) {
					b1.sweepFrozen = true;
					if(minTOI.failed) b1.angvel = b1.sweep_angvel = 0; else if(minTOI.slipped) b1.angvel = b1.sweep_angvel *= nape_Config.angularCCDSlipScale; else b1.angvel = b1.sweep_angvel;
				}
				if(!b2.sweepFrozen && !b2.isKinematic()) {
					b2.sweepFrozen = true;
					if(minTOI.failed) b2.angvel = b2.sweep_angvel = 0; else if(minTOI.slipped) b2.angvel = b2.sweep_angvel *= nape_Config.angularCCDSlipScale; else b2.angvel = b2.sweep_angvel;
				}
			}
			var o3 = minTOI;
			o3.free();
			o3.next = zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;
			zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool = o3;
		}
		while(!this.toiEvents.empty()) {
			var toi1 = this.toiEvents.pop_unsafe();
			var o4 = toi1;
			o4.free();
			o4.next = zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;
			zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool = o4;
		}
		var cx_ite1 = this.kinematics.begin();
		while(cx_ite1 != null) {
			var cur = cx_ite1.elem();
			cur.sweepIntegrate(deltaTime);
			cur.sweepTime = 0;
			cx_ite1 = cx_ite1.next;
		}
		var cx_ite2 = this.live.begin();
		while(cx_ite2 != null) {
			var cur1 = cx_ite2.elem();
			if(!cur1.sweepFrozen) cur1.sweepIntegrate(deltaTime);
			cur1.sweepTime = 0;
			cx_ite2 = cx_ite2.next;
		}
	}
	,continuousEvent: function(s1,s2,stat,in_arb,_) {
		if(s1.body.sweepFrozen && s2.body.sweepFrozen) return in_arb;
		if(s1.body.disableCCD || s2.body.disableCCD) return in_arb;
		if(in_arb != null && in_arb.colarb == null || this.interactionType(s1,s2,s1.body,s2.body) <= 0) return in_arb;
		var b1 = s1.body;
		var b2 = s2.body;
		if(stat || b1.bullet || b2.bullet) {
			var toi;
			if(zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool == null) toi = new zpp_$nape_geom_ZPP_$ToiEvent(); else {
				toi = zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;
				zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool = toi.next;
				toi.next = null;
			}
			toi.alloc();
			var kin = b1.isKinematic() || b2.isKinematic();
			if(stat && !kin) {
				if(!s1.body.isDynamic()) {
					toi.s2 = s1;
					toi.s1 = s2;
				} else {
					toi.s1 = s1;
					toi.s2 = s2;
				}
				toi.kinematic = false;
				zpp_$nape_geom_ZPP_$SweepDistance.staticSweep(toi,this.pre_dt,0,nape_Config.collisionSlopCCD);
			} else {
				toi.s1 = s1;
				toi.s2 = s2;
				toi.kinematic = kin;
				if(toi.s1.body.sweepFrozen || toi.s2.body.sweepFrozen) {
					if(toi.s1.body.sweepFrozen) {
						var tmp = toi.s1;
						toi.s1 = toi.s2;
						toi.s2 = tmp;
						toi.frozen1 = false;
						toi.frozen2 = true;
					}
					zpp_$nape_geom_ZPP_$SweepDistance.staticSweep(toi,this.pre_dt,0,nape_Config.collisionSlopCCD);
				} else zpp_$nape_geom_ZPP_$SweepDistance.dynamicSweep(toi,this.pre_dt,0,nape_Config.collisionSlopCCD);
			}
			if(stat && toi.toi < 0 || toi.failed) {
				var o = toi;
				o.free();
				o.next = zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;
				zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool = o;
			} else {
				this.toiEvents.add(toi);
				toi.frozen1 = toi.s1.body.sweepFrozen;
				toi.frozen2 = toi.s2.body.sweepFrozen;
				if(in_arb != null) toi.arbiter = in_arb.colarb; else toi.arbiter = null;
			}
		}
		return in_arb;
	}
	,bodyCbWake: function(b) {
		if(b.isDynamic() && b.cbSet != null) {
			if(this.midstep) {
				var cx_ite = b.cbSet.bodylisteners.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(i.event != zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE) {
						cx_ite = cx_ite.next;
						continue;
					}
					var cb = this.push_callback(i);
					cb.event = zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE;
					cb.body = b;
					cx_ite = cx_ite.next;
				}
			} else b.component.woken = true;
		}
	}
	,bodyCbSleep: function(b) {
		if(b.isDynamic() && b.cbSet != null) {
			var cx_ite = b.cbSet.bodylisteners.begin();
			while(cx_ite != null) {
				var i = cx_ite.elem();
				if(i.event != zpp_$nape_util_ZPP_$Flags.id_CbEvent_SLEEP) {
					cx_ite = cx_ite.next;
					continue;
				}
				var cb = this.push_callback(i);
				cb.event = zpp_$nape_util_ZPP_$Flags.id_CbEvent_SLEEP;
				cb.body = b;
				cx_ite = cx_ite.next;
			}
		}
	}
	,constraintCbWake: function(con) {
		if(con.cbSet != null) {
			if(this.midstep) {
				var cx_ite = con.cbSet.conlisteners.begin();
				while(cx_ite != null) {
					var i = cx_ite.elem();
					if(i.event != zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE) {
						cx_ite = cx_ite.next;
						continue;
					}
					var cb = this.push_callback(i);
					cb.event = zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE;
					cb.constraint = con;
					cx_ite = cx_ite.next;
				}
			} else con.component.woken = true;
		}
	}
	,constraintCbSleep: function(con) {
		if(con.cbSet != null) {
			var cx_ite = con.cbSet.conlisteners.begin();
			while(cx_ite != null) {
				var i = cx_ite.elem();
				if(i.event != zpp_$nape_util_ZPP_$Flags.id_CbEvent_SLEEP) {
					cx_ite = cx_ite.next;
					continue;
				}
				var cb = this.push_callback(i);
				cb.event = zpp_$nape_util_ZPP_$Flags.id_CbEvent_SLEEP;
				cb.constraint = con;
				cx_ite = cx_ite.next;
			}
		}
	}
	,constraintCbBreak: function(con) {
		if(con.cbSet != null) {
			var cx_ite = con.cbSet.conlisteners.begin();
			while(cx_ite != null) {
				var i = cx_ite.elem();
				if(i.event != zpp_$nape_util_ZPP_$Flags.id_CbEvent_BREAK) {
					cx_ite = cx_ite.next;
					continue;
				}
				var cb = this.push_callback(i);
				cb.event = zpp_$nape_util_ZPP_$Flags.id_CbEvent_BREAK;
				cb.constraint = con;
				cx_ite = cx_ite.next;
			}
		}
	}
	,nullListenerType: function(cb1,cb2) {
		var stack = new zpp_$nape_util_ZNPList_$ZPP_$Interactor();
		var cx_ite = cb1.interactors.begin();
		while(cx_ite != null) {
			var i = cx_ite.elem();
			stack.add(i);
			cx_ite = cx_ite.next;
		}
		if(cb1 != cb2) {
			var cx_ite1 = cb2.interactors.begin();
			while(cx_ite1 != null) {
				var i1 = cx_ite1.elem();
				stack.add(i1);
				cx_ite1 = cx_ite1.next;
			}
		}
		while(!stack.empty()) {
			var intx = stack.pop_unsafe();
			if(intx.isCompound()) {
				var comp = intx.icompound;
				var cx_ite2 = comp.bodies.begin();
				while(cx_ite2 != null) {
					var i2 = cx_ite2.elem();
					stack.add(i2);
					cx_ite2 = cx_ite2.next;
				}
				var cx_ite3 = comp.compounds.begin();
				while(cx_ite3 != null) {
					var i3 = cx_ite3.elem();
					stack.add(i3);
					cx_ite3 = cx_ite3.next;
				}
			} else {
				var xbody;
				if(intx.isBody()) xbody = intx.ibody; else xbody = intx.ishape.body;
				var xshp;
				if(intx.isShape()) xshp = intx.ishape; else xshp = null;
				var cx_ite4 = xbody.arbiters.begin();
				while(cx_ite4 != null) {
					var xarb = cx_ite4.elem();
					if(xarb.present == 0) {
						cx_ite4 = cx_ite4.next;
						continue;
					}
					if(xshp != null && !(xarb.ws1 == xshp || xarb.ws2 == xshp)) {
						cx_ite4 = cx_ite4.next;
						continue;
					}
					this.MRCA_chains(xarb.ws1,xarb.ws2);
					var cx_ite5 = this.mrca1.begin();
					while(cx_ite5 != null) {
						var i11 = cx_ite5.elem();
						if(i11.cbSet != cb1 && i11.cbSet != cb2) {
							cx_ite5 = cx_ite5.next;
							continue;
						}
						var cx_ite6 = this.mrca2.begin();
						while(cx_ite6 != null) {
							var i21 = cx_ite6.elem();
							if(i11.cbSet == cb1 && i21.cbSet != cb2 || i11.cbSet == cb2 && i21.cbSet != cb1) {
								cx_ite6 = cx_ite6.next;
								continue;
							}
							var callbackset = zpp_$nape_phys_ZPP_$Interactor.get(i11,i21);
							if(callbackset != null) {
								while(!callbackset.arbiters.empty()) {
									var arb = callbackset.arbiters.pop_unsafe();
									arb.present--;
								}
								this.remove_callbackset(callbackset);
							}
							cx_ite6 = cx_ite6.next;
						}
						cx_ite5 = cx_ite5.next;
					}
					cx_ite4 = cx_ite4.next;
				}
			}
		}
	}
	,nullInteractorType: function(intx,me) {
		if(me == null) me = intx;
		if(intx.isCompound()) {
			var comp = intx.icompound;
			var cx_ite = comp.bodies.begin();
			while(cx_ite != null) {
				var body = cx_ite.elem();
				this.nullInteractorType(body,me);
				cx_ite = cx_ite.next;
			}
			var cx_ite1 = comp.compounds.begin();
			while(cx_ite1 != null) {
				var comp1 = cx_ite1.elem();
				this.nullInteractorType(comp1,me);
				cx_ite1 = cx_ite1.next;
			}
		} else {
			var xbody;
			if(intx.isBody()) xbody = intx.ibody; else xbody = intx.ishape.body;
			var xshp;
			if(intx.isShape()) xshp = intx.ishape; else xshp = null;
			var cx_ite2 = xbody.arbiters.begin();
			while(cx_ite2 != null) {
				var xarb = cx_ite2.elem();
				if(xarb.present == 0) {
					cx_ite2 = cx_ite2.next;
					continue;
				}
				if(xshp != null && !(xarb.ws1 == xshp || xarb.ws2 == xshp)) {
					cx_ite2 = cx_ite2.next;
					continue;
				}
				this.MRCA_chains(xarb.ws1,xarb.ws2);
				var cx_ite3 = this.mrca1.begin();
				while(cx_ite3 != null) {
					var i1 = cx_ite3.elem();
					var cx_ite4 = this.mrca2.begin();
					while(cx_ite4 != null) {
						var i2 = cx_ite4.elem();
						if(i1 != me && i2 != me) {
							cx_ite4 = cx_ite4.next;
							continue;
						}
						var callbackset = zpp_$nape_phys_ZPP_$Interactor.get(i1,i2);
						if(callbackset != null) {
							xarb.present--;
							callbackset.remove_arb(xarb);
							if(callbackset.really_empty()) this.remove_callbackset(callbackset);
						}
						cx_ite4 = cx_ite4.next;
					}
					cx_ite3 = cx_ite3.next;
				}
				cx_ite2 = cx_ite2.next;
			}
		}
	}
	,freshListenerType: function(cb1,cb2) {
		var stack = new zpp_$nape_util_ZNPList_$ZPP_$Interactor();
		var cx_ite = cb1.interactors.begin();
		while(cx_ite != null) {
			var i = cx_ite.elem();
			stack.add(i);
			cx_ite = cx_ite.next;
		}
		if(cb1 != cb2) {
			var cx_ite1 = cb2.interactors.begin();
			while(cx_ite1 != null) {
				var i1 = cx_ite1.elem();
				stack.add(i1);
				cx_ite1 = cx_ite1.next;
			}
		}
		while(!stack.empty()) {
			var intx = stack.pop_unsafe();
			if(intx.isCompound()) {
				var comp = intx.icompound;
				var cx_ite2 = comp.bodies.begin();
				while(cx_ite2 != null) {
					var i2 = cx_ite2.elem();
					stack.add(i2);
					cx_ite2 = cx_ite2.next;
				}
				var cx_ite3 = comp.compounds.begin();
				while(cx_ite3 != null) {
					var i3 = cx_ite3.elem();
					stack.add(i3);
					cx_ite3 = cx_ite3.next;
				}
			} else {
				var xbody;
				if(intx.isBody()) xbody = intx.ibody; else xbody = intx.ishape.body;
				var xshp;
				if(intx.isShape()) xshp = intx.ishape; else xshp = null;
				var cx_ite4 = xbody.arbiters.begin();
				while(cx_ite4 != null) {
					var xarb = cx_ite4.elem();
					if(!xarb.presentable) {
						cx_ite4 = cx_ite4.next;
						continue;
					}
					if(xshp != null && !(xarb.ws1 == xshp || xarb.ws2 == xshp)) {
						cx_ite4 = cx_ite4.next;
						continue;
					}
					this.MRCA_chains(xarb.ws1,xarb.ws2);
					var cx_ite5 = this.mrca1.begin();
					while(cx_ite5 != null) {
						var i11 = cx_ite5.elem();
						if(i11.cbSet != cb1 && i11.cbSet != cb2) {
							cx_ite5 = cx_ite5.next;
							continue;
						}
						var cx_ite6 = this.mrca2.begin();
						while(cx_ite6 != null) {
							var i21 = cx_ite6.elem();
							if(i11.cbSet == cb1 && i21.cbSet != cb2 || i11.cbSet == cb2 && i21.cbSet != cb1) {
								cx_ite6 = cx_ite6.next;
								continue;
							}
							var callbackset = zpp_$nape_phys_ZPP_$Interactor.get(i11,i21);
							if(callbackset == null) {
								callbackset = zpp_$nape_space_ZPP_$CallbackSet.get(i11,i21);
								this.add_callbackset(callbackset);
							}
							if(callbackset.add_arb(xarb)) xarb.present++;
							cx_ite6 = cx_ite6.next;
						}
						cx_ite5 = cx_ite5.next;
					}
					cx_ite4 = cx_ite4.next;
				}
			}
		}
	}
	,freshInteractorType: function(intx,me) {
		if(me == null) me = intx;
		if(intx.isCompound()) {
			var comp = intx.icompound;
			var cx_ite = comp.bodies.begin();
			while(cx_ite != null) {
				var body = cx_ite.elem();
				this.freshInteractorType(body,me);
				cx_ite = cx_ite.next;
			}
			var cx_ite1 = comp.compounds.begin();
			while(cx_ite1 != null) {
				var comp1 = cx_ite1.elem();
				this.freshInteractorType(comp1,me);
				cx_ite1 = cx_ite1.next;
			}
		} else {
			var xbody;
			if(intx.isBody()) xbody = intx.ibody; else xbody = intx.ishape.body;
			var xshp;
			if(intx.isShape()) xshp = intx.ishape; else xshp = null;
			var cx_ite2 = xbody.arbiters.begin();
			while(cx_ite2 != null) {
				var xarb = cx_ite2.elem();
				if(!xarb.presentable) {
					cx_ite2 = cx_ite2.next;
					continue;
				}
				if(xshp != null && !(xarb.ws1 == xshp || xarb.ws2 == xshp)) {
					cx_ite2 = cx_ite2.next;
					continue;
				}
				this.MRCA_chains(xarb.ws1,xarb.ws2);
				var cx_ite3 = this.mrca1.begin();
				while(cx_ite3 != null) {
					var i1 = cx_ite3.elem();
					var cx_ite4 = this.mrca2.begin();
					while(cx_ite4 != null) {
						var i2 = cx_ite4.elem();
						if(i1 != me && i2 != me) {
							cx_ite4 = cx_ite4.next;
							continue;
						}
						var cb1 = i1.cbSet;
						var cb2 = i2.cbSet;
						cb1.validate();
						cb2.validate();
						if(!zpp_$nape_callbacks_ZPP_$CbSet.empty_intersection(cb1,cb2)) {
							var callbackset = zpp_$nape_phys_ZPP_$Interactor.get(i1,i2);
							if(callbackset == null) {
								callbackset = zpp_$nape_space_ZPP_$CallbackSet.get(i1,i2);
								this.add_callbackset(callbackset);
							}
							if(callbackset.add_arb(xarb)) xarb.present++;
						}
						cx_ite4 = cx_ite4.next;
					}
					cx_ite3 = cx_ite3.next;
				}
				cx_ite2 = cx_ite2.next;
			}
		}
	}
	,wakeCompound: function(x) {
		var cx_ite = x.bodies.begin();
		while(cx_ite != null) {
			var y = cx_ite.elem();
			var o = y;
			if(!o.world) {
				o.component.waket = this.stamp + (this.midstep?0:1);
				if(o.isKinematic()) o.kinematicDelaySleep = true;
				if(o.component.sleeping) this.really_wake(o,false);
			}
			cx_ite = cx_ite.next;
		}
		var cx_ite1 = x.constraints.begin();
		while(cx_ite1 != null) {
			var i = cx_ite1.elem();
			this.wake_constraint(i);
			cx_ite1 = cx_ite1.next;
		}
		var cx_ite2 = x.compounds.begin();
		while(cx_ite2 != null) {
			var i1 = cx_ite2.elem();
			this.wakeCompound(i1);
			cx_ite2 = cx_ite2.next;
		}
	}
	,wakeIsland: function(i) {
		while(!i.comps.empty()) {
			var c = i.comps.pop_unsafe();
			c.waket = this.stamp + (this.midstep?0:1);
			if(c.isBody) {
				var b = c.body;
				this.live.add(b);
				var cx_ite = b.arbiters.begin();
				while(cx_ite != null) {
					var arb = cx_ite.elem();
					if(arb.sleeping) {
						arb.sleeping = false;
						arb.up_stamp += this.stamp - arb.sleep_stamp;
						if(arb.type == zpp_$nape_dynamics_ZPP_$Arbiter.COL) {
							var carb = arb.colarb;
							if(carb.stat) this.c_arbiters_true.inlined_add(carb); else this.c_arbiters_false.inlined_add(carb);
						} else if(arb.type == zpp_$nape_dynamics_ZPP_$Arbiter.FLUID) this.f_arbiters.inlined_add(arb.fluidarb); else this.s_arbiters.inlined_add(arb.sensorarb);
					}
					cx_ite = cx_ite.next;
				}
				this.bodyCbWake(b);
				c.reset();
				if(!b.isStatic()) {
					var cx_ite1 = b.shapes.begin();
					while(cx_ite1 != null) {
						var shape = cx_ite1.elem();
						if(shape.node != null) this.bphase.sync(shape);
						cx_ite1 = cx_ite1.next;
					}
				}
			} else {
				var con = c.constraint;
				this.live_constraints.inlined_add(con);
				this.constraintCbWake(con);
				c.reset();
			}
		}
		var o = i;
		o.free();
		o.next = zpp_$nape_space_ZPP_$Island.zpp_pool;
		zpp_$nape_space_ZPP_$Island.zpp_pool = o;
	}
	,non_inlined_wake: function(o,fst) {
		if(fst == null) fst = false;
		var o1 = o;
		if(!o1.world) {
			o1.component.waket = this.stamp + (this.midstep?0:1);
			if(o1.isKinematic()) o1.kinematicDelaySleep = true;
			if(o1.component.sleeping) this.really_wake(o1,fst);
		}
	}
	,really_wake: function(o,fst) {
		if(fst == null) fst = false;
		if(o.component.island == null) {
			o.component.sleeping = false;
			if(o.isKinematic() || o.isStatic()) this.staticsleep.inlined_add(o); else this.live.inlined_add(o);
			var cx_ite = o.constraints.begin();
			while(cx_ite != null) {
				var con = cx_ite.elem();
				if(con.space == this) this.wake_constraint(con);
				cx_ite = cx_ite.next;
			}
			var cx_ite1 = o.arbiters.begin();
			while(cx_ite1 != null) {
				var arb = cx_ite1.elem();
				if(arb.sleeping) {
					arb.sleeping = false;
					arb.up_stamp += this.stamp + (this.midstep?0:1) - arb.sleep_stamp;
					if(arb.type == zpp_$nape_dynamics_ZPP_$Arbiter.COL) {
						var carb = arb.colarb;
						if(carb.stat) this.c_arbiters_true.inlined_add(carb); else this.c_arbiters_false.inlined_add(carb);
					} else if(arb.type == zpp_$nape_dynamics_ZPP_$Arbiter.FLUID) this.f_arbiters.inlined_add(arb.fluidarb); else this.s_arbiters.inlined_add(arb.sensorarb);
				}
				if(arb.type != zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR && !arb.cleared && arb.up_stamp >= this.stamp && (arb.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT) != 0) {
					if(arb.b1.isDynamic() && arb.b1.component.sleeping) {
						var o1 = arb.b1;
						if(!o1.world) {
							o1.component.waket = this.stamp + (this.midstep?0:1);
							if(o1.isKinematic()) o1.kinematicDelaySleep = true;
							if(o1.component.sleeping) this.really_wake(o1,false);
						}
					}
					if(arb.b2.isDynamic() && arb.b2.component.sleeping) {
						var o2 = arb.b2;
						if(!o2.world) {
							o2.component.waket = this.stamp + (this.midstep?0:1);
							if(o2.isKinematic()) o2.kinematicDelaySleep = true;
							if(o2.component.sleeping) this.really_wake(o2,false);
						}
					}
				}
				cx_ite1 = cx_ite1.next;
			}
			if(!fst && o.isDynamic()) this.bodyCbWake(o);
			if(!fst && !this.bphase.is_sweep && !o.isStatic()) {
				var cx_ite2 = o.shapes.begin();
				while(cx_ite2 != null) {
					var shape = cx_ite2.elem();
					if(shape.node != null) this.bphase.sync(shape);
					cx_ite2 = cx_ite2.next;
				}
			}
		} else this.wakeIsland(o.component.island);
	}
	,wake_constraint: function(con,fst) {
		if(fst == null) fst = false;
		if(con.active) {
			con.component.waket = this.stamp + (this.midstep?0:1);
			if(con.component.sleeping) {
				if(con.component.island == null) {
					con.component.sleeping = false;
					this.live_constraints.inlined_add(con);
					con.wake_connected();
					if(!fst) this.constraintCbWake(con);
				} else this.wakeIsland(con.component.island);
				return true;
			} else return false;
		} else return false;
	}
	,doForests: function(dt) {
		var cx_ite = this.c_arbiters_false.begin();
		while(cx_ite != null) {
			var arb = cx_ite.elem();
			if(!arb.cleared && arb.up_stamp == this.stamp && (arb.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT) != 0) {
				if(arb.b1.isDynamic() && arb.b2.isDynamic()) {
					var xr;
					if(arb.b1.component == arb.b1.component.parent) xr = arb.b1.component; else {
						var obj = arb.b1.component;
						var stack = null;
						while(obj != obj.parent) {
							var nxt = obj.parent;
							obj.parent = stack;
							stack = obj;
							obj = nxt;
						}
						while(stack != null) {
							var nxt1 = stack.parent;
							stack.parent = obj;
							stack = nxt1;
						}
						xr = obj;
					}
					var yr;
					if(arb.b2.component == arb.b2.component.parent) yr = arb.b2.component; else {
						var obj1 = arb.b2.component;
						var stack1 = null;
						while(obj1 != obj1.parent) {
							var nxt2 = obj1.parent;
							obj1.parent = stack1;
							stack1 = obj1;
							obj1 = nxt2;
						}
						while(stack1 != null) {
							var nxt3 = stack1.parent;
							stack1.parent = obj1;
							stack1 = nxt3;
						}
						yr = obj1;
					}
					if(xr != yr) {
						if(xr.rank < yr.rank) xr.parent = yr; else if(xr.rank > yr.rank) yr.parent = xr; else {
							yr.parent = xr;
							xr.rank++;
						}
					}
				}
			}
			cx_ite = cx_ite.next;
		}
		var cx_ite1 = this.f_arbiters.begin();
		while(cx_ite1 != null) {
			var arb1 = cx_ite1.elem();
			if(!arb1.cleared && arb1.up_stamp == this.stamp && (arb1.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT) != 0) {
				if(arb1.b1.isDynamic() && arb1.b2.isDynamic()) {
					var xr1;
					if(arb1.b1.component == arb1.b1.component.parent) xr1 = arb1.b1.component; else {
						var obj2 = arb1.b1.component;
						var stack2 = null;
						while(obj2 != obj2.parent) {
							var nxt4 = obj2.parent;
							obj2.parent = stack2;
							stack2 = obj2;
							obj2 = nxt4;
						}
						while(stack2 != null) {
							var nxt5 = stack2.parent;
							stack2.parent = obj2;
							stack2 = nxt5;
						}
						xr1 = obj2;
					}
					var yr1;
					if(arb1.b2.component == arb1.b2.component.parent) yr1 = arb1.b2.component; else {
						var obj3 = arb1.b2.component;
						var stack3 = null;
						while(obj3 != obj3.parent) {
							var nxt6 = obj3.parent;
							obj3.parent = stack3;
							stack3 = obj3;
							obj3 = nxt6;
						}
						while(stack3 != null) {
							var nxt7 = stack3.parent;
							stack3.parent = obj3;
							stack3 = nxt7;
						}
						yr1 = obj3;
					}
					if(xr1 != yr1) {
						if(xr1.rank < yr1.rank) xr1.parent = yr1; else if(xr1.rank > yr1.rank) yr1.parent = xr1; else {
							yr1.parent = xr1;
							xr1.rank++;
						}
					}
				}
			}
			cx_ite1 = cx_ite1.next;
		}
		var cx_ite2 = this.live_constraints.begin();
		while(cx_ite2 != null) {
			var con = cx_ite2.elem();
			con.forest();
			cx_ite2 = cx_ite2.next;
		}
		while(!this.live.empty()) {
			var o = this.live.inlined_pop_unsafe();
			var oc = o.component;
			var root;
			if(oc == oc.parent) root = oc; else {
				var obj4 = oc;
				var stack4 = null;
				while(obj4 != obj4.parent) {
					var nxt8 = obj4.parent;
					obj4.parent = stack4;
					stack4 = obj4;
					obj4 = nxt8;
				}
				while(stack4 != null) {
					var nxt9 = stack4.parent;
					stack4.parent = obj4;
					stack4 = nxt9;
				}
				root = obj4;
			}
			if(root.island == null) {
				if(zpp_$nape_space_ZPP_$Island.zpp_pool == null) root.island = new zpp_$nape_space_ZPP_$Island(); else {
					root.island = zpp_$nape_space_ZPP_$Island.zpp_pool;
					zpp_$nape_space_ZPP_$Island.zpp_pool = root.island.next;
					root.island.next = null;
				}
				root.island.alloc();
				this.islands.inlined_add(root.island);
				root.island.sleep = true;
			}
			oc.island = root.island;
			oc.island.comps.inlined_add(oc);
			var rest = o.atRest(dt);
			oc.island.sleep = oc.island.sleep && rest;
			if(oc.waket > oc.island.waket) oc.island.waket = oc.waket;
		}
		while(!this.live_constraints.empty()) {
			var o1 = this.live_constraints.inlined_pop_unsafe();
			var oc1 = o1.component;
			var root1;
			if(oc1 == oc1.parent) root1 = oc1; else {
				var obj5 = oc1;
				var stack5 = null;
				while(obj5 != obj5.parent) {
					var nxt10 = obj5.parent;
					obj5.parent = stack5;
					stack5 = obj5;
					obj5 = nxt10;
				}
				while(stack5 != null) {
					var nxt11 = stack5.parent;
					stack5.parent = obj5;
					stack5 = nxt11;
				}
				root1 = obj5;
			}
			oc1.island = root1.island;
			oc1.island.comps.inlined_add(oc1);
			if(oc1.waket > oc1.island.waket) oc1.island.waket = oc1.waket;
		}
		while(!this.islands.empty()) {
			var i = this.islands.inlined_pop_unsafe();
			if(i.sleep) {
				var cx_ite3 = i.comps.begin();
				while(cx_ite3 != null) {
					var c = cx_ite3.elem();
					if(c.isBody) {
						var b = c.body;
						b.velx = 0;
						b.vely = 0;
						b.angvel = 0;
						c.sleeping = true;
						var cx_ite4 = b.shapes.begin();
						while(cx_ite4 != null) {
							var shape = cx_ite4.elem();
							this.bphase.sync(shape);
							cx_ite4 = cx_ite4.next;
						}
						this.bodyCbSleep(b);
					} else {
						var con1 = c.constraint;
						this.constraintCbSleep(con1);
						c.sleeping = true;
					}
					cx_ite3 = cx_ite3.next;
				}
			} else {
				while(!i.comps.empty()) {
					var c1 = i.comps.inlined_pop_unsafe();
					c1.waket = i.waket;
					if(c1.isBody) this.live.inlined_add(c1.body); else this.live_constraints.inlined_add(c1.constraint);
					c1.reset();
				}
				var o2 = i;
				o2.free();
				o2.next = zpp_$nape_space_ZPP_$Island.zpp_pool;
				zpp_$nape_space_ZPP_$Island.zpp_pool = o2;
			}
		}
	}
	,sleepArbiters: function() {
		var pre = null;
		var arbs = this.c_arbiters_true;
		var arbite = arbs.begin();
		var fst = this.c_arbiters_false != null;
		if(fst && arbite == null) {
			fst = false;
			arbite = this.c_arbiters_false.begin();
			arbs = this.c_arbiters_false;
			pre = null;
		}
		while(arbite != null) {
			var arb = arbite.elem();
			if(arb.b1.component.sleeping && arb.b2.component.sleeping) {
				arb.sleep_stamp = this.stamp;
				arb.sleeping = true;
				arbite = arbs.inlined_erase(pre);
				if(fst && arbite == null) {
					fst = false;
					arbite = this.c_arbiters_false.begin();
					arbs = this.c_arbiters_false;
					pre = null;
				}
				continue;
			}
			pre = arbite;
			arbite = arbite.next;
			if(fst && arbite == null) {
				fst = false;
				arbite = this.c_arbiters_false.begin();
				arbs = this.c_arbiters_false;
				pre = null;
			}
		}
		var pre1 = null;
		var arbs1 = this.f_arbiters;
		var arbite1 = arbs1.begin();
		var fst1 = null != null;
		if(fst1 && arbite1 == null) {
			fst1 = false;
			arbs1 = null;
			pre1 = null;
		}
		while(arbite1 != null) {
			var arb1 = arbite1.elem();
			if(arb1.b1.component.sleeping && arb1.b2.component.sleeping) {
				arb1.sleep_stamp = this.stamp;
				arb1.sleeping = true;
				arbite1 = arbs1.inlined_erase(pre1);
				if(fst1 && arbite1 == null) {
					fst1 = false;
					arbs1 = null;
					pre1 = null;
				}
				continue;
			}
			pre1 = arbite1;
			arbite1 = arbite1.next;
			if(fst1 && arbite1 == null) {
				fst1 = false;
				arbs1 = null;
				pre1 = null;
			}
		}
		var pre2 = null;
		var arbs2 = this.s_arbiters;
		var arbite2 = arbs2.begin();
		var fst2 = null != null;
		if(fst2 && arbite2 == null) {
			fst2 = false;
			arbs2 = null;
			pre2 = null;
		}
		while(arbite2 != null) {
			var arb2 = arbite2.elem();
			if(arb2.b1.component.sleeping && arb2.b2.component.sleeping) {
				arb2.sleep_stamp = this.stamp;
				arb2.sleeping = true;
				arbite2 = arbs2.inlined_erase(pre2);
				if(fst2 && arbite2 == null) {
					fst2 = false;
					arbs2 = null;
					pre2 = null;
				}
				continue;
			}
			pre2 = arbite2;
			arbite2 = arbite2.next;
			if(fst2 && arbite2 == null) {
				fst2 = false;
				arbs2 = null;
				pre2 = null;
			}
		}
	}
	,static_validation: function(body) {
		if(!body.shapes.empty()) body.validate_aabb();
		body.validate_mass();
		body.validate_inertia();
		var cx_ite = body.shapes.begin();
		while(cx_ite != null) {
			var s = cx_ite.elem();
			if(s.isPolygon()) {
				s.polygon.splice_collinear();
				s.polygon.validate_gaxi();
			}
			cx_ite = cx_ite.next;
		}
		body.sweepFrozen = true;
	}
	,validation: function() {
		this.cbsets.validate();
		var cx_ite = this.live.begin();
		while(cx_ite != null) {
			var cur = cx_ite.elem();
			cur.sweepRadius = 0;
			var cx_ite1 = cur.shapes.begin();
			while(cx_ite1 != null) {
				var s = cx_ite1.elem();
				if(s.isPolygon()) {
					s.polygon.splice_collinear();
					s.polygon.validate_gaxi();
				}
				s.validate_sweepRadius();
				if(s.sweepRadius > cur.sweepRadius) cur.sweepRadius = s.sweepRadius;
				cx_ite1 = cx_ite1.next;
			}
			cur.validate_mass();
			cur.validate_inertia();
			if(!cur.shapes.empty()) {
				cur.validate_aabb();
				cur.validate_worldCOM();
			}
			cur.validate_gravMass();
			cur.validate_axis();
			if(!false) {
				if(cur.component.woken && cur.cbSet != null) {
					var cx_ite2 = cur.cbSet.bodylisteners.begin();
					while(cx_ite2 != null) {
						var i = cx_ite2.elem();
						if(i.event != zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE) {
							cx_ite2 = cx_ite2.next;
							continue;
						}
						var cb = this.push_callback(i);
						cb.event = zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE;
						cb.body = cur;
						cx_ite2 = cx_ite2.next;
					}
				}
				cur.component.woken = false;
			}
			var cx_ite3 = cur.shapes.begin();
			while(cx_ite3 != null) {
				var shape = cx_ite3.elem();
				this.bphase.sync(shape);
				cx_ite3 = cx_ite3.next;
			}
			cx_ite = cx_ite.next;
		}
		var cx_ite4 = this.kinematics.begin();
		while(cx_ite4 != null) {
			var cur1 = cx_ite4.elem();
			cur1.sweepRadius = 0;
			var cx_ite5 = cur1.shapes.begin();
			while(cx_ite5 != null) {
				var s1 = cx_ite5.elem();
				if(s1.isPolygon()) {
					s1.polygon.splice_collinear();
					s1.polygon.validate_gaxi();
				}
				s1.validate_sweepRadius();
				if(s1.sweepRadius > cur1.sweepRadius) cur1.sweepRadius = s1.sweepRadius;
				cx_ite5 = cx_ite5.next;
			}
			cur1.validate_mass();
			cur1.validate_inertia();
			if(!cur1.shapes.empty()) {
				cur1.validate_aabb();
				cur1.validate_worldCOM();
			}
			cur1.validate_gravMass();
			cur1.validate_axis();
			if(!true) {
				if(cur1.component.woken && cur1.cbSet != null) {
					var cx_ite6 = cur1.cbSet.bodylisteners.begin();
					while(cx_ite6 != null) {
						var i1 = cx_ite6.elem();
						if(i1.event != zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE) {
							cx_ite6 = cx_ite6.next;
							continue;
						}
						var cb1 = this.push_callback(i1);
						cb1.event = zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE;
						cb1.body = cur1;
						cx_ite6 = cx_ite6.next;
					}
				}
				cur1.component.woken = false;
			}
			var cx_ite7 = cur1.shapes.begin();
			while(cx_ite7 != null) {
				var shape1 = cx_ite7.elem();
				this.bphase.sync(shape1);
				cx_ite7 = cx_ite7.next;
			}
			cx_ite4 = cx_ite4.next;
		}
		var cx_ite8 = this.live_constraints.begin();
		while(cx_ite8 != null) {
			var con = cx_ite8.elem();
			if(con.active) {
				if(con.component.woken && con.cbSet != null) {
					var cx_ite9 = con.cbSet.conlisteners.begin();
					while(cx_ite9 != null) {
						var i2 = cx_ite9.elem();
						if(i2.event != zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE) {
							cx_ite9 = cx_ite9.next;
							continue;
						}
						var cb2 = this.push_callback(i2);
						cb2.event = zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE;
						cb2.constraint = con;
						cx_ite9 = cx_ite9.next;
					}
				}
				con.component.woken = false;
			}
			cx_ite8 = cx_ite8.next;
		}
	}
	,updateVel: function(dt) {
		var pre = null;
		var linDrag = 1 - dt * this.global_lin_drag;
		var angDrag = 1 - dt * this.global_ang_drag;
		var cx_ite = this.live.begin();
		while(cx_ite != null) {
			var cur = cx_ite.elem();
			if(cur.smass != 0.0) {
				var time = dt * cur.imass;
				cur.velx = linDrag * cur.velx + (cur.forcex + this.gravityx * cur.gravMass) * time;
				cur.vely = linDrag * cur.vely + (cur.forcey + this.gravityy * cur.gravMass) * time;
			}
			if(cur.sinertia != 0.0) {
				var dpx = 0.0;
				var dpy = 0.0;
				dpx = cur.worldCOMx - cur.posx;
				dpy = cur.worldCOMy - cur.posy;
				var torque = cur.torque + (this.gravityy * dpx - this.gravityx * dpy) * cur.gravMass;
				cur.angvel = angDrag * cur.angvel + torque * dt * cur.iinertia;
			}
			pre = cx_ite;
			cx_ite = cx_ite.next;
		}
	}
	,updatePos: function(dt) {
		var MAX_VEL = 2 * Math.PI / dt;
		var cx_ite = this.live.begin();
		while(cx_ite != null) {
			var cur = cx_ite.elem();
			cur.pre_posx = cur.posx;
			cur.pre_posy = cur.posy;
			cur.pre_rot = cur.rot;
			cur.sweepTime = 0;
			cur.sweep_angvel = cur.angvel % MAX_VEL;
			cur.sweepIntegrate(dt);
			if(!cur.disableCCD) {
				var linThreshold = nape_Config.staticCCDLinearThreshold * cur.sweepRadius;
				var angThreshold = nape_Config.staticCCDAngularThreshold;
				if((cur.velx * cur.velx + cur.vely * cur.vely) * dt * dt > linThreshold * linThreshold || cur.angvel * cur.angvel * dt * dt > angThreshold * angThreshold || cur.isKinematic()) {
					var angvel = cur.sweep_angvel;
					if(angvel < 0) angvel = -angvel;
					var iangvel = 1 / angvel;
					var cx_ite1 = cur.shapes.begin();
					while(cx_ite1 != null) {
						var s = cx_ite1.elem();
						var aabb = s.aabb;
						var minx = aabb.minx;
						var miny = aabb.miny;
						var maxx = aabb.maxx;
						var maxy = aabb.maxy;
						var count = Std["int"](angvel * dt * s.sweepCoef * (1 / 120));
						if(count > 8) count = 8;
						var anginc = angvel * dt / count;
						cur.sweepIntegrate(dt);
						s.force_validate_aabb();
						if(minx < aabb.minx) aabb.minx = minx; else minx = aabb.minx;
						if(miny < aabb.miny) aabb.miny = miny; else miny = aabb.miny;
						if(maxx > aabb.maxx) aabb.maxx = maxx; else maxx = aabb.maxx;
						if(maxy > aabb.maxy) aabb.maxy = maxy; else maxy = aabb.maxy;
						var _g = 1;
						while(_g < count) {
							var i = _g++;
							cur.sweepIntegrate(anginc * i * iangvel);
							s.force_validate_aabb();
							if(minx < aabb.minx) aabb.minx = minx; else minx = aabb.minx;
							if(miny < aabb.miny) aabb.miny = miny; else miny = aabb.miny;
							if(maxx > aabb.maxx) aabb.maxx = maxx; else maxx = aabb.maxx;
							if(maxy > aabb.maxy) aabb.maxy = maxy; else maxy = aabb.maxy;
						}
						this.bphase.sync(s);
						cx_ite1 = cx_ite1.next;
					}
					cur.sweepFrozen = false;
					if(cur.isDynamic() && cur.bulletEnabled) {
						var linThreshold2 = nape_Config.bulletCCDLinearThreshold * cur.sweepRadius;
						var angThreshold2 = nape_Config.bulletCCDAngularThreshold;
						if((cur.velx * cur.velx + cur.vely * cur.vely) * dt * dt > linThreshold2 * linThreshold2 || cur.angvel * cur.angvel * dt * dt > angThreshold2 * angThreshold2) cur.bullet = true;
					}
				} else {
					cur.sweepFrozen = true;
					cur.bullet = false;
				}
			} else {
				cur.sweepFrozen = true;
				cur.bullet = false;
			}
			cx_ite = cx_ite.next;
		}
		var cx_ite2 = this.kinematics.begin();
		while(cx_ite2 != null) {
			var cur1 = cx_ite2.elem();
			cur1.pre_posx = cur1.posx;
			cur1.pre_posy = cur1.posy;
			cur1.pre_rot = cur1.rot;
			cur1.sweepTime = 0;
			cur1.sweep_angvel = cur1.angvel % MAX_VEL;
			cur1.sweepIntegrate(dt);
			if(!cur1.disableCCD) {
				var linThreshold1 = nape_Config.staticCCDLinearThreshold * cur1.sweepRadius;
				var angThreshold1 = nape_Config.staticCCDAngularThreshold;
				if((cur1.velx * cur1.velx + cur1.vely * cur1.vely) * dt * dt > linThreshold1 * linThreshold1 || cur1.angvel * cur1.angvel * dt * dt > angThreshold1 * angThreshold1 || cur1.isKinematic()) {
					var angvel1 = cur1.sweep_angvel;
					if(angvel1 < 0) angvel1 = -angvel1;
					var iangvel1 = 1 / angvel1;
					var cx_ite3 = cur1.shapes.begin();
					while(cx_ite3 != null) {
						var s1 = cx_ite3.elem();
						var aabb1 = s1.aabb;
						var minx1 = aabb1.minx;
						var miny1 = aabb1.miny;
						var maxx1 = aabb1.maxx;
						var maxy1 = aabb1.maxy;
						var count1 = Std["int"](angvel1 * dt * s1.sweepCoef * (1 / 120));
						if(count1 > 8) count1 = 8;
						var anginc1 = angvel1 * dt / count1;
						cur1.sweepIntegrate(dt);
						s1.force_validate_aabb();
						if(minx1 < aabb1.minx) aabb1.minx = minx1; else minx1 = aabb1.minx;
						if(miny1 < aabb1.miny) aabb1.miny = miny1; else miny1 = aabb1.miny;
						if(maxx1 > aabb1.maxx) aabb1.maxx = maxx1; else maxx1 = aabb1.maxx;
						if(maxy1 > aabb1.maxy) aabb1.maxy = maxy1; else maxy1 = aabb1.maxy;
						var _g1 = 1;
						while(_g1 < count1) {
							var i1 = _g1++;
							cur1.sweepIntegrate(anginc1 * i1 * iangvel1);
							s1.force_validate_aabb();
							if(minx1 < aabb1.minx) aabb1.minx = minx1; else minx1 = aabb1.minx;
							if(miny1 < aabb1.miny) aabb1.miny = miny1; else miny1 = aabb1.miny;
							if(maxx1 > aabb1.maxx) aabb1.maxx = maxx1; else maxx1 = aabb1.maxx;
							if(maxy1 > aabb1.maxy) aabb1.maxy = maxy1; else maxy1 = aabb1.maxy;
						}
						this.bphase.sync(s1);
						cx_ite3 = cx_ite3.next;
					}
					cur1.sweepFrozen = false;
					if(cur1.isDynamic() && cur1.bulletEnabled) {
						var linThreshold21 = nape_Config.bulletCCDLinearThreshold * cur1.sweepRadius;
						var angThreshold21 = nape_Config.bulletCCDAngularThreshold;
						if((cur1.velx * cur1.velx + cur1.vely * cur1.vely) * dt * dt > linThreshold21 * linThreshold21 || cur1.angvel * cur1.angvel * dt * dt > angThreshold21 * angThreshold21) cur1.bullet = true;
					}
				} else {
					cur1.sweepFrozen = true;
					cur1.bullet = false;
				}
			} else {
				cur1.sweepFrozen = true;
				cur1.bullet = false;
			}
			cx_ite2 = cx_ite2.next;
		}
	}
	,presteparb: function(arb,dt,cont) {
		if(cont == null) cont = false;
		var _g = this;
		if(!arb.cleared && (arb.b1.component.sleeping && arb.b2.component.sleeping)) {
			arb.sleep_stamp = this.stamp;
			arb.sleeping = true;
			return true;
		}
		if(!arb.cleared || arb.present != 0 || arb.intchange) {
			var endcb = !cont && arb.up_stamp == this.stamp - 1 && !arb.cleared && !arb.intchange;
			var begcb = arb.fresh && !arb.cleared && !arb.intchange;
			if(endcb) arb.endGenerated = this.stamp;
			if(begcb || endcb || arb.cleared || arb.intchange) {
				this.inlined_MRCA_chains(arb.ws1,arb.ws2);
				var cx_ite = this.mrca1.begin();
				while(cx_ite != null) {
					var i1 = cx_ite.elem();
					var cx_ite1 = this.mrca2.begin();
					while(cx_ite1 != null) {
						var i2 = cx_ite1.elem();
						var cb1 = i1.cbSet;
						var cb2 = i2.cbSet;
						if(zpp_$nape_callbacks_ZPP_$CbSet.empty_intersection(cb1,cb2)) {
							cx_ite1 = cx_ite1.next;
							continue;
						}
						var callbackset = [zpp_$nape_phys_ZPP_$Interactor.get(i1,i2)];
						if(begcb || arb.intchange) {
							if(callbackset[0] == null) {
								callbackset[0] = zpp_$nape_space_ZPP_$CallbackSet.get(i1,i2);
								this.add_callbackset(callbackset[0]);
							}
							zpp_$nape_callbacks_ZPP_$CbSet.find_all(cb1,cb2,zpp_$nape_util_ZPP_$Flags.id_CbEvent_BEGIN,(function(callbackset) {
								return function(listener) {
									if((listener.itype & arb.type) != 0 && callbackset[0].empty_arb(listener.itype)) {
										var cb = _g.push_callback(listener);
										cb.event = zpp_$nape_util_ZPP_$Flags.id_CbEvent_BEGIN;
										zpp_$nape_phys_ZPP_$Interactor.int_callback(callbackset[0],listener,cb);
										cb.set = callbackset[0];
									}
								};
							})(callbackset));
							if(callbackset[0].add_arb(arb)) arb.present++;
						} else {
							arb.present--;
							callbackset[0].remove_arb(arb);
							zpp_$nape_callbacks_ZPP_$CbSet.find_all(cb1,cb2,zpp_$nape_util_ZPP_$Flags.id_CbEvent_END,(function(callbackset) {
								return function(listener1) {
									if((listener1.itype & arb.type) != 0 && callbackset[0].empty_arb(listener1.itype)) {
										var cb3 = _g.push_callback(listener1);
										cb3.event = zpp_$nape_util_ZPP_$Flags.id_CbEvent_END;
										zpp_$nape_phys_ZPP_$Interactor.int_callback(callbackset[0],listener1,cb3);
										cb3.set = callbackset[0];
									}
								};
							})(callbackset));
							if(callbackset[0].really_empty()) this.remove_callbackset(callbackset[0]);
						}
						cx_ite1 = cx_ite1.next;
					}
					cx_ite = cx_ite.next;
				}
			}
			arb.fresh = false;
			arb.intchange = false;
		}
		if(arb.cleared || arb.up_stamp + (arb.type == zpp_$nape_dynamics_ZPP_$Arbiter.COL?nape_Config.arbiterExpirationDelay:0) < this.stamp) {
			if(arb.type == zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR) arb.sensorarb.retire(); else if(arb.type == zpp_$nape_dynamics_ZPP_$Arbiter.FLUID) arb.fluidarb.retire(); else arb.colarb.retire();
			return true;
		}
		var pact = arb.active;
		arb.active = arb.presentable = arb.up_stamp == this.stamp;
		if((arb.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT) != 0) {
			if(arb.active && arb.type != zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR) {
				if(arb.colarb != null) {
					if(arb.colarb.preStep(dt)) arb.active = false;
				} else arb.fluidarb.preStep(this,dt);
			}
		} else if(arb.colarb != null) {
			if(arb.colarb.cleanupContacts()) arb.active = false;
		}
		if(pact != arb.active) {
			arb.b1.arbiters.modified = true;
			arb.b2.arbiters.modified = true;
			this.c_arbiters_true.modified = this.c_arbiters_false.modified = true;
			this.s_arbiters.modified = this.f_arbiters.modified = true;
		}
		return false;
	}
	,prestep: function(dt) {
		var pre = null;
		var cx_ite = this.live_constraints.begin();
		while(cx_ite != null) {
			var con = cx_ite.elem();
			if(con.preStep(dt)) {
				cx_ite = this.live_constraints.erase(pre);
				con.broken();
				this.constraintCbBreak(con);
				if(con.removeOnBreak) {
					con.component.sleeping = true;
					this.midstep = false;
					if(con.compound != null) con.compound.wrap_constraints.remove(con.outer); else this.wrap_constraints.remove(con.outer);
					this.midstep = true;
				} else con.active = false;
				con.clearcache();
				continue;
			}
			pre = cx_ite;
			cx_ite = cx_ite.next;
		}
		var pre1 = null;
		var arbs = this.c_arbiters_true;
		var arbite = arbs.begin();
		var fst = this.c_arbiters_false != null;
		if(fst && arbite == null) {
			fst = false;
			arbite = this.c_arbiters_false.begin();
			arbs = this.c_arbiters_false;
			pre1 = null;
		}
		while(arbite != null) {
			var arb = arbite.elem();
			if(this.presteparb(arb,dt)) {
				arbite = arbs.inlined_erase(pre1);
				if(fst && arbite == null) {
					fst = false;
					arbite = this.c_arbiters_false.begin();
					arbs = this.c_arbiters_false;
					pre1 = null;
				}
				continue;
			}
			pre1 = arbite;
			arbite = arbite.next;
			if(fst && arbite == null) {
				fst = false;
				arbite = this.c_arbiters_false.begin();
				arbs = this.c_arbiters_false;
				pre1 = null;
			}
		}
		var pre2 = null;
		var arbs1 = this.f_arbiters;
		var arbite1 = arbs1.begin();
		var fst1 = null != null;
		if(fst1 && arbite1 == null) {
			fst1 = false;
			arbs1 = null;
			pre2 = null;
		}
		while(arbite1 != null) {
			var arb1 = arbite1.elem();
			if(this.presteparb(arb1,dt)) {
				arbite1 = arbs1.inlined_erase(pre2);
				if(fst1 && arbite1 == null) {
					fst1 = false;
					arbs1 = null;
					pre2 = null;
				}
				continue;
			}
			pre2 = arbite1;
			arbite1 = arbite1.next;
			if(fst1 && arbite1 == null) {
				fst1 = false;
				arbs1 = null;
				pre2 = null;
			}
		}
		var pre3 = null;
		var arbs2 = this.s_arbiters;
		var arbite2 = arbs2.begin();
		var fst2 = null != null;
		if(fst2 && arbite2 == null) {
			fst2 = false;
			arbs2 = null;
			pre3 = null;
		}
		while(arbite2 != null) {
			var arb2 = arbite2.elem();
			if(this.presteparb(arb2,dt)) {
				arbite2 = arbs2.inlined_erase(pre3);
				if(fst2 && arbite2 == null) {
					fst2 = false;
					arbs2 = null;
					pre3 = null;
				}
				continue;
			}
			pre3 = arbite2;
			arbite2 = arbite2.next;
			if(fst2 && arbite2 == null) {
				fst2 = false;
				arbs2 = null;
				pre3 = null;
			}
		}
	}
	,warmStart: function() {
		var cx_ite = this.f_arbiters.begin();
		while(cx_ite != null) {
			var arb = cx_ite.elem();
			if(arb.acting()) arb.warmStart();
			cx_ite = cx_ite.next;
		}
		var arbi = this.c_arbiters_false.begin();
		var fst = true;
		if(arbi == null) {
			arbi = this.c_arbiters_true.begin();
			fst = false;
		}
		while(arbi != null) {
			var arb1 = arbi.elem();
			if(arb1.acting()) arb1.warmStart();
			arbi = arbi.next;
			if(fst && arbi == null) {
				arbi = this.c_arbiters_true.begin();
				fst = false;
			}
		}
		var cx_ite1 = this.live_constraints.begin();
		while(cx_ite1 != null) {
			var con = cx_ite1.elem();
			con.warmStart();
			cx_ite1 = cx_ite1.next;
		}
	}
	,iterateVel: function(times) {
		var _g = 0;
		while(_g < times) {
			var i = _g++;
			var cx_ite = this.f_arbiters.begin();
			while(cx_ite != null) {
				var arb = cx_ite.elem();
				if(arb.acting()) arb.applyImpulseVel();
				cx_ite = cx_ite.next;
			}
			var pre = null;
			var cx_ite1 = this.live_constraints.begin();
			while(cx_ite1 != null) {
				var con = cx_ite1.elem();
				if(con.applyImpulseVel()) {
					cx_ite1 = this.live_constraints.erase(pre);
					con.broken();
					this.constraintCbBreak(con);
					if(con.removeOnBreak) {
						con.component.sleeping = true;
						this.midstep = false;
						if(con.compound != null) con.compound.wrap_constraints.remove(con.outer); else this.wrap_constraints.remove(con.outer);
						this.midstep = true;
					} else con.active = false;
					con.clearcache();
					continue;
				}
				pre = cx_ite1;
				cx_ite1 = cx_ite1.next;
			}
			var arbi = this.c_arbiters_false.begin();
			var fst = true;
			if(arbi == null) {
				arbi = this.c_arbiters_true.begin();
				fst = false;
			}
			while(arbi != null) {
				var arb1 = arbi.elem();
				if(arb1.acting()) arb1.applyImpulseVel();
				arbi = arbi.next;
				if(fst && arbi == null) {
					arbi = this.c_arbiters_true.begin();
					fst = false;
				}
			}
		}
	}
	,iteratePos: function(times) {
		var _g = 0;
		while(_g < times) {
			var i = _g++;
			var pre = null;
			var cx_ite = this.live_constraints.begin();
			while(cx_ite != null) {
				var con = cx_ite.elem();
				if(!con.__velocity && con.stiff) {
					if(con.applyImpulsePos()) {
						cx_ite = this.live_constraints.erase(pre);
						con.broken();
						this.constraintCbBreak(con);
						if(con.removeOnBreak) {
							con.component.sleeping = true;
							this.midstep = false;
							if(con.compound != null) con.compound.wrap_constraints.remove(con.outer); else this.wrap_constraints.remove(con.outer);
							this.midstep = true;
						} else con.active = false;
						con.clearcache();
						continue;
					}
				}
				pre = cx_ite;
				cx_ite = cx_ite.next;
			}
			var arbi = this.c_arbiters_false.begin();
			var fst = true;
			if(arbi == null) {
				arbi = this.c_arbiters_true.begin();
				fst = false;
			}
			while(arbi != null) {
				var arb = arbi.elem();
				if(arb.acting()) arb.applyImpulsePos();
				arbi = arbi.next;
				if(fst && arbi == null) {
					arbi = this.c_arbiters_true.begin();
					fst = false;
				}
			}
		}
	}
	,group_ignore: function(s1,s2) {
		var g1 = s1.lookup_group();
		if(g1 == null) return false; else {
			var g2 = s2.lookup_group();
			if(g2 == null) return false; else {
				var ret = false;
				while(g1 != null && g2 != null) {
					if(g1 == g2) {
						ret = g1.ignore;
						break;
					}
					if(g1.depth < g2.depth) g2 = g2.group; else g1 = g1.group;
				}
				return ret;
			}
		}
	}
	,interactionType: function(s1,s2,b1,b2) {
		var con_ignore;
		con_ignore = false;
		var cx_ite = b1.constraints.begin();
		while(cx_ite != null) {
			var con = cx_ite.elem();
			if(con.ignore && con.pair_exists(b1.id,b2.id)) {
				con_ignore = true;
				break;
			}
			cx_ite = cx_ite.next;
		}
		if(!con_ignore && !this.group_ignore(s1,s2)) {
			if((s1.sensorEnabled || s2.sensorEnabled) && s1.filter.shouldSense(s2.filter)) return 2; else if((s1.fluidEnabled || s2.fluidEnabled) && s1.filter.shouldFlow(s2.filter) && !(b1.imass == 0 && b2.imass == 0 && b1.iinertia == 0 && b2.iinertia == 0)) return 0; else if(s1.filter.shouldCollide(s2.filter) && !(b1.imass == 0 && b2.imass == 0 && b1.iinertia == 0 && b2.iinertia == 0)) return 1; else return -1;
		} else return -1;
	}
	,narrowPhase: function(s1,s2,stat,in_arb,continuous) {
		var _g = this;
		var ret = null;
		var b1 = s1.body;
		var b2 = s2.body;
		var itype = this.interactionType(s1,s2,b1,b2);
		if(itype != -1) {
			var sa;
			var sb;
			if(s1.type > s2.type) {
				sa = s2;
				sb = s1;
			} else if(s1.type == s2.type) {
				if(s1.id < s2.id) {
					sa = s1;
					sb = s2;
				} else {
					sb = s1;
					sa = s2;
				}
			} else {
				sa = s1;
				sb = s2;
			}
			var reverse = sa == s2;
			if(itype == 0) {
				var xarb;
				if(in_arb == null) {
					var ret1 = null;
					var b;
					if(b1.arbiters.length < b2.arbiters.length) b = b1; else b = b2;
					var cx_ite = b.arbiters.begin();
					while(cx_ite != null) {
						var arb1 = cx_ite.elem();
						if(arb1.id == sa.id && arb1.di == sb.id) {
							ret1 = arb1;
							break;
						}
						cx_ite = cx_ite.next;
					}
					xarb = ret1;
				} else xarb = in_arb;
				var first = xarb == null;
				var arb;
				var swapped = false;
				if(first) {
					if(zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool == null) arb = new zpp_$nape_dynamics_ZPP_$FluidArbiter(); else {
						arb = zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool;
						zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool = arb.next;
						arb.next = null;
					}
					arb.alloc();
				} else if(xarb.fluidarb == null) {
					xarb.lazyRetire(this,null);
					if(zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool == null) arb = new zpp_$nape_dynamics_ZPP_$FluidArbiter(); else {
						arb = zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool;
						zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool = arb.next;
						arb.next = null;
					}
					arb.alloc();
					arb.intchange = true;
					first = true;
					swapped = true;
				} else arb = xarb.fluidarb;
				var inttype = zpp_$nape_util_ZPP_$Flags.id_InteractionType_FLUID;
				if(first || arb.stamp != this.stamp || continuous) {
					arb.stamp = this.stamp;
					if(zpp_$nape_geom_ZPP_$Collide.flowCollide(sa,sb,arb)) {
						if(first) {
							arb.assign(s1,s2,sa.id,sb.id);
							this.f_arbiters.inlined_add(arb);
							arb.fresh = !swapped;
						} else arb.fresh = arb.up_stamp < this.stamp - 1 || arb.endGenerated == this.stamp && continuous;
						arb.up_stamp = arb.stamp;
						if(arb.fresh || (arb.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS) == 0) {
							arb.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT;
							var anyimpure = false;
							var arbs1;
							if(arb.ws1.id > arb.ws2.id) arbs1 = arb.ws2; else arbs1 = arb.ws1;
							var arbs2;
							if(arb.ws1.id > arb.ws2.id) arbs2 = arb.ws1; else arbs2 = arb.ws2;
							this.inlined_MRCA_chains(arbs1,arbs2);
							var cx_ite1 = this.mrca1.begin();
							while(cx_ite1 != null) {
								var i1 = cx_ite1.elem();
								var cx_ite2 = this.mrca2.begin();
								while(cx_ite2 != null) {
									var i2 = cx_ite2.elem();
									var cb1 = i1.cbSet;
									var cb2 = i2.cbSet;
									if(zpp_$nape_callbacks_ZPP_$CbSet.empty_intersection(cb1,cb2)) {
										cx_ite2 = cx_ite2.next;
										continue;
									}
									var callbackset = null;
									var ncallbackset = null;
									this.prelisteners.inlined_clear();
									var lite = [null];
									zpp_$nape_callbacks_ZPP_$CbSet.find_all(cb1,cb2,zpp_$nape_util_ZPP_$Flags.id_CbEvent_PRE,(function(lite) {
										return function(listener) {
											if((listener.itype & inttype) != 0) {
												lite[0] = _g.prelisteners.inlined_insert(lite[0],listener);
												anyimpure = anyimpure || !listener.pure;
											}
										};
									})(lite));
									if(this.prelisteners.empty()) {
										cx_ite2 = cx_ite2.next;
										continue;
									}
									callbackset = zpp_$nape_phys_ZPP_$Interactor.get(i1,i2);
									if(callbackset == null) {
										ncallbackset = zpp_$nape_space_ZPP_$CallbackSet.get(i1,i2);
										this.add_callbackset(ncallbackset);
									}
									if(callbackset == null || (callbackset.FLUIDstamp != this.stamp || continuous) && (callbackset.FLUIDstate & zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS) == 0) {
										if(ncallbackset != null) callbackset = ncallbackset;
										if(callbackset != null) {
											var cx_ite3 = this.prelisteners.begin();
											while(cx_ite3 != null) {
												var listener1 = cx_ite3.elem();
												if(listener1.itype == zpp_$nape_util_ZPP_$Flags.id_InteractionType_ANY) {
													callbackset.COLLISIONstamp = this.stamp;
													callbackset.SENSORstamp = this.stamp;
													callbackset.FLUIDstamp = this.stamp;
												} else callbackset.FLUIDstamp = this.stamp;
												cx_ite3 = cx_ite3.next;
											}
										}
										var pact = arb.active;
										arb.active = true;
										var emptycontacts = false;
										this.precb.zpp_inner.pre_arbiter = arb;
										this.precb.zpp_inner.set = callbackset;
										var cx_ite4 = this.prelisteners.begin();
										while(cx_ite4 != null) {
											var listener2 = cx_ite4.elem();
											this.precb.zpp_inner.listener = listener2;
											zpp_$nape_phys_ZPP_$Interactor.int_callback(callbackset,listener2,this.precb.zpp_inner);
											this.precb.zpp_inner.pre_swapped = i1 != this.precb.zpp_inner.int1;
											var ret2 = listener2.handlerp(this.precb);
											if(ret2 != null) if(ret2 == nape_callbacks_PreFlag.get_ACCEPT()) arb.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT | zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS; else if(ret2 == nape_callbacks_PreFlag.get_ACCEPT_ONCE()) arb.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT; else if(ret2 == nape_callbacks_PreFlag.get_IGNORE()) arb.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_IGNORE | zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS; else arb.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_IGNORE;
											cx_ite4 = cx_ite4.next;
										}
										arb.active = pact;
										if(callbackset != null) {
											var cx_ite5 = this.prelisteners.begin();
											while(cx_ite5 != null) {
												var listener3 = cx_ite5.elem();
												if(listener3.itype == zpp_$nape_util_ZPP_$Flags.id_InteractionType_ANY) {
													callbackset.COLLISIONstate = arb.immState;
													callbackset.SENSORstate = arb.immState;
													callbackset.FLUIDstate = arb.immState;
												} else callbackset.FLUIDstate = arb.immState;
												cx_ite5 = cx_ite5.next;
											}
										}
									} else if(callbackset == null) {
										if((arb.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS) == 0) arb.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT;
									} else arb.immState = callbackset.FLUIDstate;
									cx_ite2 = cx_ite2.next;
								}
								cx_ite1 = cx_ite1.next;
							}
							if(anyimpure && (arb.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS) == 0) {
								if(true) {
									if(arb.b1.isDynamic()) {
										var o = arb.b1;
										if(!o.world) {
											o.component.waket = this.stamp + (this.midstep?0:1);
											if(o.isKinematic()) o.kinematicDelaySleep = true;
											if(o.component.sleeping) this.really_wake(o,false);
										}
									}
									if(arb.b1.isDynamic()) {
										var o1 = arb.b2;
										if(!o1.world) {
											o1.component.waket = this.stamp + (this.midstep?0:1);
											if(o1.isKinematic()) o1.kinematicDelaySleep = true;
											if(o1.component.sleeping) this.really_wake(o1,false);
										}
									}
								} else {
									if(!arb.b1.isStatic()) {
										var o2 = arb.b1;
										if(!o2.world) {
											o2.component.waket = this.stamp + (this.midstep?0:1);
											if(o2.isKinematic()) o2.kinematicDelaySleep = true;
											if(o2.component.sleeping) this.really_wake(o2,false);
										}
									}
									if(!arb.b2.isStatic()) {
										var o3 = arb.b2;
										if(!o3.world) {
											o3.component.waket = this.stamp + (this.midstep?0:1);
											if(o3.isKinematic()) o3.kinematicDelaySleep = true;
											if(o3.component.sleeping) this.really_wake(o3,false);
										}
									}
								}
							}
						}
						if(true && (arb.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT) != 0) {
							if(arb.b1.isDynamic() && arb.b1.component.sleeping) {
								var o4 = arb.b1;
								if(!o4.world) {
									o4.component.waket = this.stamp + (this.midstep?0:1);
									if(o4.isKinematic()) o4.kinematicDelaySleep = true;
									if(o4.component.sleeping) this.really_wake(o4,false);
								}
							}
							if(arb.b2.isDynamic() && arb.b2.component.sleeping) {
								var o5 = arb.b2;
								if(!o5.world) {
									o5.component.waket = this.stamp + (this.midstep?0:1);
									if(o5.isKinematic()) o5.kinematicDelaySleep = true;
									if(o5.component.sleeping) this.really_wake(o5,false);
								}
							}
						}
						if(arb.sleeping) {
							arb.sleeping = false;
							this.f_arbiters.inlined_add(arb);
						}
						ret = arb;
					} else if(first) {
						var o6 = arb;
						o6.free();
						o6.next = zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool;
						zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool = o6;
						ret = null;
					} else ret = arb;
				} else ret = arb;
			} else if(itype == 1) {
				var carbs;
				if(stat) carbs = this.c_arbiters_true; else carbs = this.c_arbiters_false;
				var xarb1;
				if(in_arb == null) {
					var ret3 = null;
					var b3;
					if(b1.arbiters.length < b2.arbiters.length) b3 = b1; else b3 = b2;
					var cx_ite6 = b3.arbiters.begin();
					while(cx_ite6 != null) {
						var arb3 = cx_ite6.elem();
						if(arb3.id == sa.id && arb3.di == sb.id) {
							ret3 = arb3;
							break;
						}
						cx_ite6 = cx_ite6.next;
					}
					xarb1 = ret3;
				} else xarb1 = in_arb;
				var first1 = xarb1 == null;
				var arb2;
				var swapped1 = false;
				if(first1) {
					if(zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool == null) arb2 = new zpp_$nape_dynamics_ZPP_$ColArbiter(); else {
						arb2 = zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool;
						zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool = arb2.next;
						arb2.next = null;
					}
					arb2.alloc();
					arb2.stat = stat;
				} else if(xarb1.colarb == null) {
					xarb1.lazyRetire(this,null);
					if(zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool == null) arb2 = new zpp_$nape_dynamics_ZPP_$ColArbiter(); else {
						arb2 = zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool;
						zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool = arb2.next;
						arb2.next = null;
					}
					arb2.alloc();
					arb2.intchange = true;
					arb2.stat = stat;
					first1 = true;
					swapped1 = true;
				} else {
					arb2 = xarb1.colarb;
					reverse = sa != arb2.s1;
					if(arb2.stat != stat) {
						arb2.stat = stat;
						if(!arb2.sleeping) {
							(stat?this.c_arbiters_false:this.c_arbiters_true).remove(arb2);
							carbs.add(arb2);
						}
					}
				}
				var inttype1 = zpp_$nape_util_ZPP_$Flags.id_InteractionType_COLLISION;
				if(first1 || arb2.stamp != this.stamp || continuous) {
					arb2.stamp = this.stamp;
					if(zpp_$nape_geom_ZPP_$Collide.contactCollide(sa,sb,arb2,reverse)) {
						if(first1) {
							arb2.assign(s1,s2,sa.id,sb.id);
							carbs.inlined_add(arb2);
							arb2.fresh = !swapped1;
						} else arb2.fresh = arb2.up_stamp < this.stamp - 1 || arb2.endGenerated == this.stamp && continuous;
						arb2.up_stamp = arb2.stamp;
						if(arb2.fresh || (arb2.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS) == 0) {
							arb2.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT;
							var anyimpure1 = false;
							var arbs11;
							if(arb2.ws1.id > arb2.ws2.id) arbs11 = arb2.ws2; else arbs11 = arb2.ws1;
							var arbs21;
							if(arb2.ws1.id > arb2.ws2.id) arbs21 = arb2.ws1; else arbs21 = arb2.ws2;
							this.inlined_MRCA_chains(arbs11,arbs21);
							var cx_ite7 = this.mrca1.begin();
							while(cx_ite7 != null) {
								var i11 = cx_ite7.elem();
								var cx_ite8 = this.mrca2.begin();
								while(cx_ite8 != null) {
									var i21 = cx_ite8.elem();
									var cb11 = i11.cbSet;
									var cb21 = i21.cbSet;
									if(zpp_$nape_callbacks_ZPP_$CbSet.empty_intersection(cb11,cb21)) {
										cx_ite8 = cx_ite8.next;
										continue;
									}
									var callbackset1 = null;
									var ncallbackset1 = null;
									this.prelisteners.inlined_clear();
									var lite1 = [null];
									zpp_$nape_callbacks_ZPP_$CbSet.find_all(cb11,cb21,zpp_$nape_util_ZPP_$Flags.id_CbEvent_PRE,(function(lite1) {
										return function(listener4) {
											if((listener4.itype & inttype1) != 0) {
												lite1[0] = _g.prelisteners.inlined_insert(lite1[0],listener4);
												anyimpure1 = anyimpure1 || !listener4.pure;
											}
										};
									})(lite1));
									if(this.prelisteners.empty()) {
										cx_ite8 = cx_ite8.next;
										continue;
									}
									callbackset1 = zpp_$nape_phys_ZPP_$Interactor.get(i11,i21);
									if(callbackset1 == null) {
										ncallbackset1 = zpp_$nape_space_ZPP_$CallbackSet.get(i11,i21);
										this.add_callbackset(ncallbackset1);
									}
									if(callbackset1 == null || (callbackset1.COLLISIONstamp != this.stamp || continuous) && (callbackset1.COLLISIONstate & zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS) == 0) {
										if(ncallbackset1 != null) callbackset1 = ncallbackset1;
										if(callbackset1 != null) {
											var cx_ite9 = this.prelisteners.begin();
											while(cx_ite9 != null) {
												var listener5 = cx_ite9.elem();
												if(listener5.itype == zpp_$nape_util_ZPP_$Flags.id_InteractionType_ANY) {
													callbackset1.COLLISIONstamp = this.stamp;
													callbackset1.SENSORstamp = this.stamp;
													callbackset1.FLUIDstamp = this.stamp;
												} else callbackset1.COLLISIONstamp = this.stamp;
												cx_ite9 = cx_ite9.next;
											}
										}
										var pact1 = arb2.active;
										arb2.active = true;
										var emptycontacts1 = false;
										arb2.cleanupContacts();
										this.precb.zpp_inner.pre_arbiter = arb2;
										this.precb.zpp_inner.set = callbackset1;
										var cx_ite10 = this.prelisteners.begin();
										while(cx_ite10 != null) {
											var listener6 = cx_ite10.elem();
											this.precb.zpp_inner.listener = listener6;
											zpp_$nape_phys_ZPP_$Interactor.int_callback(callbackset1,listener6,this.precb.zpp_inner);
											this.precb.zpp_inner.pre_swapped = i11 != this.precb.zpp_inner.int1;
											var ret4 = listener6.handlerp(this.precb);
											if(ret4 != null) if(ret4 == nape_callbacks_PreFlag.get_ACCEPT()) arb2.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT | zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS; else if(ret4 == nape_callbacks_PreFlag.get_ACCEPT_ONCE()) arb2.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT; else if(ret4 == nape_callbacks_PreFlag.get_IGNORE()) arb2.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_IGNORE | zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS; else arb2.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_IGNORE;
											cx_ite10 = cx_ite10.next;
										}
										arb2.active = pact1;
										if(callbackset1 != null) {
											var cx_ite11 = this.prelisteners.begin();
											while(cx_ite11 != null) {
												var listener7 = cx_ite11.elem();
												if(listener7.itype == zpp_$nape_util_ZPP_$Flags.id_InteractionType_ANY) {
													callbackset1.COLLISIONstate = arb2.immState;
													callbackset1.SENSORstate = arb2.immState;
													callbackset1.FLUIDstate = arb2.immState;
												} else callbackset1.COLLISIONstate = arb2.immState;
												cx_ite11 = cx_ite11.next;
											}
										}
									} else if(callbackset1 == null) {
										if((arb2.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS) == 0) arb2.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT;
									} else arb2.immState = callbackset1.COLLISIONstate;
									cx_ite8 = cx_ite8.next;
								}
								cx_ite7 = cx_ite7.next;
							}
							if(anyimpure1 && (arb2.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS) == 0) {
								if(true) {
									if(arb2.b1.isDynamic()) {
										var o7 = arb2.b1;
										if(!o7.world) {
											o7.component.waket = this.stamp + (this.midstep?0:1);
											if(o7.isKinematic()) o7.kinematicDelaySleep = true;
											if(o7.component.sleeping) this.really_wake(o7,false);
										}
									}
									if(arb2.b1.isDynamic()) {
										var o8 = arb2.b2;
										if(!o8.world) {
											o8.component.waket = this.stamp + (this.midstep?0:1);
											if(o8.isKinematic()) o8.kinematicDelaySleep = true;
											if(o8.component.sleeping) this.really_wake(o8,false);
										}
									}
								} else {
									if(!arb2.b1.isStatic()) {
										var o9 = arb2.b1;
										if(!o9.world) {
											o9.component.waket = this.stamp + (this.midstep?0:1);
											if(o9.isKinematic()) o9.kinematicDelaySleep = true;
											if(o9.component.sleeping) this.really_wake(o9,false);
										}
									}
									if(!arb2.b2.isStatic()) {
										var o10 = arb2.b2;
										if(!o10.world) {
											o10.component.waket = this.stamp + (this.midstep?0:1);
											if(o10.isKinematic()) o10.kinematicDelaySleep = true;
											if(o10.component.sleeping) this.really_wake(o10,false);
										}
									}
								}
							}
						}
						if(true && (arb2.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT) != 0) {
							if(arb2.b1.isDynamic() && arb2.b1.component.sleeping) {
								var o11 = arb2.b1;
								if(!o11.world) {
									o11.component.waket = this.stamp + (this.midstep?0:1);
									if(o11.isKinematic()) o11.kinematicDelaySleep = true;
									if(o11.component.sleeping) this.really_wake(o11,false);
								}
							}
							if(arb2.b2.isDynamic() && arb2.b2.component.sleeping) {
								var o12 = arb2.b2;
								if(!o12.world) {
									o12.component.waket = this.stamp + (this.midstep?0:1);
									if(o12.isKinematic()) o12.kinematicDelaySleep = true;
									if(o12.component.sleeping) this.really_wake(o12,false);
								}
							}
						}
						if(arb2.sleeping) {
							arb2.sleeping = false;
							carbs.inlined_add(arb2);
						}
						ret = arb2;
					} else if(first1) {
						var o13 = arb2;
						o13.free();
						o13.next = zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool;
						zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool = o13;
						ret = null;
					} else ret = arb2;
				} else ret = arb2;
			} else {
				var xarb2;
				if(in_arb == null) {
					var ret5 = null;
					var b4;
					if(b1.arbiters.length < b2.arbiters.length) b4 = b1; else b4 = b2;
					var cx_ite12 = b4.arbiters.begin();
					while(cx_ite12 != null) {
						var arb5 = cx_ite12.elem();
						if(arb5.id == sa.id && arb5.di == sb.id) {
							ret5 = arb5;
							break;
						}
						cx_ite12 = cx_ite12.next;
					}
					xarb2 = ret5;
				} else xarb2 = in_arb;
				var first2 = xarb2 == null;
				var arb4;
				var swapped2 = false;
				if(first2) {
					if(zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool == null) arb4 = new zpp_$nape_dynamics_ZPP_$SensorArbiter(); else {
						arb4 = zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool;
						zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool = arb4.next;
						arb4.next = null;
					}
					arb4.alloc();
				} else if(xarb2.sensorarb == null) {
					xarb2.lazyRetire(this,null);
					if(zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool == null) arb4 = new zpp_$nape_dynamics_ZPP_$SensorArbiter(); else {
						arb4 = zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool;
						zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool = arb4.next;
						arb4.next = null;
					}
					arb4.alloc();
					arb4.intchange = true;
					first2 = true;
					swapped2 = true;
				} else arb4 = xarb2.sensorarb;
				var inttype2 = zpp_$nape_util_ZPP_$Flags.id_InteractionType_SENSOR;
				if(first2 || arb4.stamp != this.stamp || continuous) {
					arb4.stamp = this.stamp;
					if(zpp_$nape_geom_ZPP_$Collide.testCollide(sa,sb)) {
						if(first2) {
							arb4.assign(s1,s2,sa.id,sb.id);
							this.s_arbiters.inlined_add(arb4);
							arb4.fresh = !swapped2;
						} else arb4.fresh = arb4.up_stamp < this.stamp - 1 || arb4.endGenerated == this.stamp && continuous;
						arb4.up_stamp = arb4.stamp;
						if(arb4.fresh || (arb4.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS) == 0) {
							arb4.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT;
							var anyimpure2 = false;
							var arbs12;
							if(arb4.ws1.id > arb4.ws2.id) arbs12 = arb4.ws2; else arbs12 = arb4.ws1;
							var arbs22;
							if(arb4.ws1.id > arb4.ws2.id) arbs22 = arb4.ws1; else arbs22 = arb4.ws2;
							this.inlined_MRCA_chains(arbs12,arbs22);
							var cx_ite13 = this.mrca1.begin();
							while(cx_ite13 != null) {
								var i12 = cx_ite13.elem();
								var cx_ite14 = this.mrca2.begin();
								while(cx_ite14 != null) {
									var i22 = cx_ite14.elem();
									var cb12 = i12.cbSet;
									var cb22 = i22.cbSet;
									if(zpp_$nape_callbacks_ZPP_$CbSet.empty_intersection(cb12,cb22)) {
										cx_ite14 = cx_ite14.next;
										continue;
									}
									var callbackset2 = null;
									var ncallbackset2 = null;
									this.prelisteners.inlined_clear();
									var lite2 = [null];
									zpp_$nape_callbacks_ZPP_$CbSet.find_all(cb12,cb22,zpp_$nape_util_ZPP_$Flags.id_CbEvent_PRE,(function(lite2) {
										return function(listener8) {
											if((listener8.itype & inttype2) != 0) {
												lite2[0] = _g.prelisteners.inlined_insert(lite2[0],listener8);
												anyimpure2 = anyimpure2 || !listener8.pure;
											}
										};
									})(lite2));
									if(this.prelisteners.empty()) {
										cx_ite14 = cx_ite14.next;
										continue;
									}
									callbackset2 = zpp_$nape_phys_ZPP_$Interactor.get(i12,i22);
									if(callbackset2 == null) {
										ncallbackset2 = zpp_$nape_space_ZPP_$CallbackSet.get(i12,i22);
										this.add_callbackset(ncallbackset2);
									}
									if(callbackset2 == null || (callbackset2.SENSORstamp != this.stamp || continuous) && (callbackset2.SENSORstate & zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS) == 0) {
										if(ncallbackset2 != null) callbackset2 = ncallbackset2;
										if(callbackset2 != null) {
											var cx_ite15 = this.prelisteners.begin();
											while(cx_ite15 != null) {
												var listener9 = cx_ite15.elem();
												if(listener9.itype == zpp_$nape_util_ZPP_$Flags.id_InteractionType_ANY) {
													callbackset2.COLLISIONstamp = this.stamp;
													callbackset2.SENSORstamp = this.stamp;
													callbackset2.FLUIDstamp = this.stamp;
												} else callbackset2.SENSORstamp = this.stamp;
												cx_ite15 = cx_ite15.next;
											}
										}
										var pact2 = arb4.active;
										arb4.active = true;
										var emptycontacts2 = false;
										this.precb.zpp_inner.pre_arbiter = arb4;
										this.precb.zpp_inner.set = callbackset2;
										var cx_ite16 = this.prelisteners.begin();
										while(cx_ite16 != null) {
											var listener10 = cx_ite16.elem();
											this.precb.zpp_inner.listener = listener10;
											zpp_$nape_phys_ZPP_$Interactor.int_callback(callbackset2,listener10,this.precb.zpp_inner);
											this.precb.zpp_inner.pre_swapped = i12 != this.precb.zpp_inner.int1;
											var ret6 = listener10.handlerp(this.precb);
											if(ret6 != null) if(ret6 == nape_callbacks_PreFlag.get_ACCEPT()) arb4.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT | zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS; else if(ret6 == nape_callbacks_PreFlag.get_ACCEPT_ONCE()) arb4.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT; else if(ret6 == nape_callbacks_PreFlag.get_IGNORE()) arb4.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_IGNORE | zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS; else arb4.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_IGNORE;
											cx_ite16 = cx_ite16.next;
										}
										arb4.active = pact2;
										if(callbackset2 != null) {
											var cx_ite17 = this.prelisteners.begin();
											while(cx_ite17 != null) {
												var listener11 = cx_ite17.elem();
												if(listener11.itype == zpp_$nape_util_ZPP_$Flags.id_InteractionType_ANY) {
													callbackset2.COLLISIONstate = arb4.immState;
													callbackset2.SENSORstate = arb4.immState;
													callbackset2.FLUIDstate = arb4.immState;
												} else callbackset2.SENSORstate = arb4.immState;
												cx_ite17 = cx_ite17.next;
											}
										}
									} else if(callbackset2 == null) {
										if((arb4.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS) == 0) arb4.immState = zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT;
									} else arb4.immState = callbackset2.SENSORstate;
									cx_ite14 = cx_ite14.next;
								}
								cx_ite13 = cx_ite13.next;
							}
							if(anyimpure2 && (arb4.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS) == 0) {
								if(false) {
									if(arb4.b1.isDynamic()) {
										var o14 = arb4.b1;
										if(!o14.world) {
											o14.component.waket = this.stamp + (this.midstep?0:1);
											if(o14.isKinematic()) o14.kinematicDelaySleep = true;
											if(o14.component.sleeping) this.really_wake(o14,false);
										}
									}
									if(arb4.b1.isDynamic()) {
										var o15 = arb4.b2;
										if(!o15.world) {
											o15.component.waket = this.stamp + (this.midstep?0:1);
											if(o15.isKinematic()) o15.kinematicDelaySleep = true;
											if(o15.component.sleeping) this.really_wake(o15,false);
										}
									}
								} else {
									if(!arb4.b1.isStatic()) {
										var o16 = arb4.b1;
										if(!o16.world) {
											o16.component.waket = this.stamp + (this.midstep?0:1);
											if(o16.isKinematic()) o16.kinematicDelaySleep = true;
											if(o16.component.sleeping) this.really_wake(o16,false);
										}
									}
									if(!arb4.b2.isStatic()) {
										var o17 = arb4.b2;
										if(!o17.world) {
											o17.component.waket = this.stamp + (this.midstep?0:1);
											if(o17.isKinematic()) o17.kinematicDelaySleep = true;
											if(o17.component.sleeping) this.really_wake(o17,false);
										}
									}
								}
							}
						}
						if(false && (arb4.immState & zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT) != 0) {
							if(arb4.b1.isDynamic() && arb4.b1.component.sleeping) {
								var o18 = arb4.b1;
								if(!o18.world) {
									o18.component.waket = this.stamp + (this.midstep?0:1);
									if(o18.isKinematic()) o18.kinematicDelaySleep = true;
									if(o18.component.sleeping) this.really_wake(o18,false);
								}
							}
							if(arb4.b2.isDynamic() && arb4.b2.component.sleeping) {
								var o19 = arb4.b2;
								if(!o19.world) {
									o19.component.waket = this.stamp + (this.midstep?0:1);
									if(o19.isKinematic()) o19.kinematicDelaySleep = true;
									if(o19.component.sleeping) this.really_wake(o19,false);
								}
							}
						}
						if(arb4.sleeping) {
							arb4.sleeping = false;
							this.s_arbiters.inlined_add(arb4);
						}
						ret = arb4;
					} else if(first2) {
						var o20 = arb4;
						o20.free();
						o20.next = zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool;
						zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool = o20;
						ret = null;
					} else ret = arb4;
				} else ret = arb4;
			}
		}
		return ret;
	}
	,MRCA_chains: function(s1,s2) {
		this.inlined_MRCA_chains(s1,s2);
	}
	,inlined_MRCA_chains: function(s1,s2) {
		this.mrca1.inlined_clear();
		this.mrca2.inlined_clear();
		if(s1.cbSet != null) this.mrca1.inlined_add(s1);
		if(s1.body.cbSet != null) this.mrca1.inlined_add(s1.body);
		if(s2.cbSet != null) this.mrca2.inlined_add(s2);
		if(s2.body.cbSet != null) this.mrca2.inlined_add(s2.body);
		var c1 = s1.body.compound;
		var c2 = s2.body.compound;
		while(c1 != c2) {
			var d1;
			if(c1 == null) d1 = 0; else d1 = c1.depth;
			var d2;
			if(c2 == null) d2 = 0; else d2 = c2.depth;
			if(d1 < d2) {
				if(c2.cbSet != null) this.mrca2.inlined_add(c2);
				c2 = c2.compound;
			} else {
				if(c1.cbSet != null) this.mrca1.inlined_add(c1);
				c1 = c1.compound;
			}
		}
	}
	,__class__: zpp_$nape_space_ZPP_$Space
};
var zpp_$nape_space_ZPP_$SweepData = function() {
	this.aabb = null;
	this.shape = null;
	this.prev = null;
	this.next = null;
};
$hxClasses["zpp_nape.space.ZPP_SweepData"] = zpp_$nape_space_ZPP_$SweepData;
zpp_$nape_space_ZPP_$SweepData.__name__ = ["zpp_nape","space","ZPP_SweepData"];
zpp_$nape_space_ZPP_$SweepData.prototype = {
	free: function() {
		this.prev = null;
		this.shape = null;
		this.aabb = null;
	}
	,alloc: function() {
	}
	,gt: function(x) {
		return this.aabb.minx > x.aabb.minx;
	}
	,__class__: zpp_$nape_space_ZPP_$SweepData
};
var zpp_$nape_space_ZPP_$SweepPhase = function(space) {
	this.list = null;
	zpp_$nape_space_ZPP_$Broadphase.call(this);
	this.space = space;
	this.is_sweep = true;
	this.sweep = this;
};
$hxClasses["zpp_nape.space.ZPP_SweepPhase"] = zpp_$nape_space_ZPP_$SweepPhase;
zpp_$nape_space_ZPP_$SweepPhase.__name__ = ["zpp_nape","space","ZPP_SweepPhase"];
zpp_$nape_space_ZPP_$SweepPhase.__super__ = zpp_$nape_space_ZPP_$Broadphase;
zpp_$nape_space_ZPP_$SweepPhase.prototype = $extend(zpp_$nape_space_ZPP_$Broadphase.prototype,{
	__insert: function(shape) {
		var dat;
		if(zpp_$nape_space_ZPP_$SweepData.zpp_pool == null) dat = new zpp_$nape_space_ZPP_$SweepData(); else {
			dat = zpp_$nape_space_ZPP_$SweepData.zpp_pool;
			zpp_$nape_space_ZPP_$SweepData.zpp_pool = dat.next;
			dat.next = null;
		}
		dat.alloc();
		shape.sweep = dat;
		dat.shape = shape;
		dat.aabb = shape.aabb;
		dat.next = this.list;
		if(this.list != null) this.list.prev = dat;
		this.list = dat;
	}
	,__remove: function(shape) {
		var dat = shape.sweep;
		if(dat.prev == null) this.list = dat.next; else dat.prev.next = dat.next;
		if(dat.next != null) dat.next.prev = dat.prev;
		shape.sweep = null;
		var o = dat;
		o.free();
		o.next = zpp_$nape_space_ZPP_$SweepData.zpp_pool;
		zpp_$nape_space_ZPP_$SweepData.zpp_pool = o;
	}
	,__sync: function(shape) {
		if(!this.space.continuous) shape.validate_aabb();
	}
	,sync_broadphase_fast: function() {
		var a = this.list.next;
		while(a != null) {
			var n = a.next;
			var b = a.prev;
			if(a.gt(b)) {
				a = n;
				continue;
			}
			while(b.prev != null && b.prev.gt(a)) b = b.prev;
			var prev = a.prev;
			prev.next = a.next;
			if(a.next != null) a.next.prev = prev;
			if(b.prev == null) {
				a.prev = null;
				this.list = a;
				a.next = b;
				b.prev = a;
			} else {
				a.prev = b.prev;
				b.prev = a;
				a.prev.next = a;
				a.next = b;
			}
			a = n;
		}
	}
	,broadphase: function(space,discrete) {
		if(this.list != null) {
			this.sync_broadphase_fast();
			var d1 = this.list;
			while(d1 != null) {
				var d2 = d1.next;
				var s1 = d1.shape;
				var b1 = s1.body;
				var bottom = d1.aabb.maxx;
				while(d2 != null) {
					if(d2.aabb.minx > bottom) break;
					var s2 = d2.shape;
					var b2 = s2.body;
					if(b2 == b1) {
						d2 = d2.next;
						continue;
					}
					if(b1.isStatic() && b2.isStatic()) {
						d2 = d2.next;
						continue;
					}
					if(b1.component.sleeping && b2.component.sleeping) {
						d2 = d2.next;
						continue;
					}
					if(s1.aabb.intersectY(s2.aabb)) {
						if(discrete) space.narrowPhase(s1,s2,!b1.isDynamic() || !b2.isDynamic(),null,false); else space.continuousEvent(s1,s2,!b1.isDynamic() || !b2.isDynamic(),null,false);
					}
					d2 = d2.next;
				}
				d1 = d1.next;
			}
		}
	}
	,__class__: zpp_$nape_space_ZPP_$SweepPhase
});
var zpp_$nape_util_ZNPList_$ZPP_$CallbackSet = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_CallbackSet"] = zpp_$nape_util_ZNPList_$ZPP_$CallbackSet;
zpp_$nape_util_ZNPList_$ZPP_$CallbackSet.__name__ = ["zpp_nape","util","ZNPList_ZPP_CallbackSet"];
zpp_$nape_util_ZNPList_$ZPP_$CallbackSet.prototype = {
	begin: function() {
		return this.head;
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,inlined_remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$CallbackSet
};
var zpp_$nape_util_ZNPList_$ZPP_$Shape = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_Shape"] = zpp_$nape_util_ZNPList_$ZPP_$Shape;
zpp_$nape_util_ZNPList_$ZPP_$Shape.__name__ = ["zpp_nape","util","ZNPList_ZPP_Shape"];
zpp_$nape_util_ZNPList_$ZPP_$Shape.prototype = {
	begin: function() {
		return this.head;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Shape(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,insert: function(cur,o) {
		return this.inlined_insert(cur,o);
	}
	,inlined_insert: function(cur,o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Shape(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		if(cur == null) {
			temp.next = this.begin();
			this.head = temp;
		} else {
			temp.next = cur.next;
			cur.next = temp;
		}
		this.pushmod = this.modified = true;
		this.length++;
		return temp;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$Shape
};
var zpp_$nape_util_ZNPList_$ZPP_$Body = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_Body"] = zpp_$nape_util_ZNPList_$ZPP_$Body;
zpp_$nape_util_ZNPList_$ZPP_$Body.__name__ = ["zpp_nape","util","ZNPList_ZPP_Body"];
zpp_$nape_util_ZNPList_$ZPP_$Body.prototype = {
	begin: function() {
		return this.head;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Body(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,insert: function(cur,o) {
		return this.inlined_insert(cur,o);
	}
	,inlined_insert: function(cur,o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Body(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		if(cur == null) {
			temp.next = this.begin();
			this.head = temp;
		} else {
			temp.next = cur.next;
			cur.next = temp;
		}
		this.pushmod = this.modified = true;
		this.length++;
		return temp;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,front: function() {
		return this.begin().elem();
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$Body
};
var zpp_$nape_util_ZNPList_$ZPP_$Compound = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_Compound"] = zpp_$nape_util_ZNPList_$ZPP_$Compound;
zpp_$nape_util_ZNPList_$ZPP_$Compound.__name__ = ["zpp_nape","util","ZNPList_ZPP_Compound"];
zpp_$nape_util_ZNPList_$ZPP_$Compound.prototype = {
	begin: function() {
		return this.head;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$Compound
};
var zpp_$nape_util_ZNPList_$ZPP_$Arbiter = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_Arbiter"] = zpp_$nape_util_ZNPList_$ZPP_$Arbiter;
zpp_$nape_util_ZNPList_$ZPP_$Arbiter.__name__ = ["zpp_nape","util","ZNPList_ZPP_Arbiter"];
zpp_$nape_util_ZNPList_$ZPP_$Arbiter.prototype = {
	begin: function() {
		return this.head;
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,pop_unsafe: function() {
		return this.inlined_pop_unsafe();
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,inlined_remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,erase: function(pre) {
		return this.inlined_erase(pre);
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,inlined_has: function(obj) {
		var ret;
		ret = false;
		var cx_ite = this.begin();
		while(cx_ite != null) {
			var npite = cx_ite.elem();
			if(npite == obj) {
				ret = true;
				break;
			}
			cx_ite = cx_ite.next;
		}
		return ret;
	}
	,front: function() {
		return this.begin().elem();
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$Arbiter
};
var zpp_$nape_util_ZNPList_$ZPP_$CbSetPair = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_CbSetPair"] = zpp_$nape_util_ZNPList_$ZPP_$CbSetPair;
zpp_$nape_util_ZNPList_$ZPP_$CbSetPair.__name__ = ["zpp_nape","util","ZNPList_ZPP_CbSetPair"];
zpp_$nape_util_ZNPList_$ZPP_$CbSetPair.prototype = {
	begin: function() {
		return this.head;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,pop_unsafe: function() {
		return this.inlined_pop_unsafe();
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,front: function() {
		return this.begin().elem();
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$CbSetPair
};
var zpp_$nape_util_ZNPList_$ZPP_$AABBPair = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_AABBPair"] = zpp_$nape_util_ZNPList_$ZPP_$AABBPair;
zpp_$nape_util_ZNPList_$ZPP_$AABBPair.__name__ = ["zpp_nape","util","ZNPList_ZPP_AABBPair"];
zpp_$nape_util_ZNPList_$ZPP_$AABBPair.prototype = {
	begin: function() {
		return this.head;
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,pop_unsafe: function() {
		return this.inlined_pop_unsafe();
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,front: function() {
		return this.begin().elem();
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$AABBPair
};
var zpp_$nape_util_ZNPList_$ZPP_$Edge = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_Edge"] = zpp_$nape_util_ZNPList_$ZPP_$Edge;
zpp_$nape_util_ZNPList_$ZPP_$Edge.__name__ = ["zpp_nape","util","ZNPList_ZPP_Edge"];
zpp_$nape_util_ZNPList_$ZPP_$Edge.prototype = {
	begin: function() {
		return this.head;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Edge(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,insert: function(cur,o) {
		return this.inlined_insert(cur,o);
	}
	,inlined_insert: function(cur,o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Edge(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		if(cur == null) {
			temp.next = this.begin();
			this.head = temp;
		} else {
			temp.next = cur.next;
			cur.next = temp;
		}
		this.pushmod = this.modified = true;
		this.length++;
		return temp;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,pop_unsafe: function() {
		return this.inlined_pop_unsafe();
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,erase: function(pre) {
		return this.inlined_erase(pre);
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,reverse: function() {
		var cur = this.begin();
		var pre = null;
		while(cur != null) {
			var nx = cur.next;
			cur.next = pre;
			this.head = cur;
			pre = cur;
			cur = nx;
		}
		this.modified = true;
		this.pushmod = true;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,front: function() {
		return this.begin().elem();
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$Edge
};
var zpp_$nape_util_ZNPList_$ZPP_$Component = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_Component"] = zpp_$nape_util_ZNPList_$ZPP_$Component;
zpp_$nape_util_ZNPList_$ZPP_$Component.__name__ = ["zpp_nape","util","ZNPList_ZPP_Component"];
zpp_$nape_util_ZNPList_$ZPP_$Component.prototype = {
	begin: function() {
		return this.head;
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Component(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,pop_unsafe: function() {
		return this.inlined_pop_unsafe();
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,front: function() {
		return this.begin().elem();
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$Component
};
var zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_InteractionGroup"] = zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup;
zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup.__name__ = ["zpp_nape","util","ZNPList_ZPP_InteractionGroup"];
zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup.prototype = {
	begin: function() {
		return this.head;
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup
};
var zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_FluidArbiter"] = zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter;
zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter.__name__ = ["zpp_nape","util","ZNPList_ZPP_FluidArbiter"];
zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter.prototype = {
	begin: function() {
		return this.head;
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter
};
var zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_SensorArbiter"] = zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter;
zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter.__name__ = ["zpp_nape","util","ZNPList_ZPP_SensorArbiter"];
zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter.prototype = {
	begin: function() {
		return this.head;
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter
};
var zpp_$nape_util_ZNPList_$ZPP_$ColArbiter = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_ColArbiter"] = zpp_$nape_util_ZNPList_$ZPP_$ColArbiter;
zpp_$nape_util_ZNPList_$ZPP_$ColArbiter.__name__ = ["zpp_nape","util","ZNPList_ZPP_ColArbiter"];
zpp_$nape_util_ZNPList_$ZPP_$ColArbiter.prototype = {
	begin: function() {
		return this.head;
	}
	,setbegin: function(i) {
		this.head = i;
		this.modified = true;
		this.pushmod = true;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$ColArbiter
};
var zpp_$nape_util_ZNPList_$ZPP_$Listener = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_Listener"] = zpp_$nape_util_ZNPList_$ZPP_$Listener;
zpp_$nape_util_ZNPList_$ZPP_$Listener.__name__ = ["zpp_nape","util","ZNPList_ZPP_Listener"];
zpp_$nape_util_ZNPList_$ZPP_$Listener.prototype = {
	begin: function() {
		return this.head;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Listener(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,insert: function(cur,o) {
		return this.inlined_insert(cur,o);
	}
	,inlined_insert: function(cur,o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$Listener(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		if(cur == null) {
			temp.next = this.begin();
			this.head = temp;
		} else {
			temp.next = cur.next;
			cur.next = temp;
		}
		this.pushmod = this.modified = true;
		this.length++;
		return temp;
	}
	,remove: function(obj) {
		this.inlined_try_remove(obj);
	}
	,inlined_try_remove: function(obj) {
		var pre = null;
		var cur = this.begin();
		var ret = false;
		while(cur != null) {
			if(cur.elem() == obj) {
				this.inlined_erase(pre);
				ret = true;
				break;
			}
			pre = cur;
			cur = cur.next;
		}
		return ret;
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$Listener
};
var zpp_$nape_util_ZNPList_$ZPP_$ToiEvent = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_ToiEvent"] = zpp_$nape_util_ZNPList_$ZPP_$ToiEvent;
zpp_$nape_util_ZNPList_$ZPP_$ToiEvent.__name__ = ["zpp_nape","util","ZNPList_ZPP_ToiEvent"];
zpp_$nape_util_ZNPList_$ZPP_$ToiEvent.prototype = {
	begin: function() {
		return this.head;
	}
	,add: function(o) {
		return this.inlined_add(o);
	}
	,inlined_add: function(o) {
		var temp;
		var ret;
		if(zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool == null) ret = new zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent(); else {
			ret = zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool;
			zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool = ret.next;
			ret.next = null;
		}
		ret.alloc();
		ret.elt = o;
		temp = ret;
		temp.next = this.begin();
		this.head = temp;
		this.modified = true;
		this.length++;
		return o;
	}
	,pop: function() {
		this.inlined_pop();
	}
	,inlined_pop: function() {
		var ret = this.begin();
		this.head = ret.next;
		var o = ret;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool = o;
		if(this.empty()) this.pushmod = true;
		this.modified = true;
		this.length--;
	}
	,pop_unsafe: function() {
		return this.inlined_pop_unsafe();
	}
	,inlined_pop_unsafe: function() {
		var ret = this.front();
		this.pop();
		return ret;
	}
	,erase: function(pre) {
		return this.inlined_erase(pre);
	}
	,inlined_erase: function(pre) {
		var old;
		var ret;
		if(pre == null) {
			old = this.begin();
			ret = old.next;
			this.head = ret;
			if(this.empty()) this.pushmod = true;
		} else {
			old = pre.next;
			ret = old.next;
			pre.next = ret;
			if(ret == null) this.pushmod = true;
		}
		var o = old;
		o.free();
		o.next = zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool;
		zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool = o;
		this.modified = true;
		this.length--;
		this.pushmod = true;
		return ret;
	}
	,empty: function() {
		return this.begin() == null;
	}
	,front: function() {
		return this.begin().elem();
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$ToiEvent
};
var zpp_$nape_util_ZNPList_$ConvexResult = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ConvexResult"] = zpp_$nape_util_ZNPList_$ConvexResult;
zpp_$nape_util_ZNPList_$ConvexResult.__name__ = ["zpp_nape","util","ZNPList_ConvexResult"];
zpp_$nape_util_ZNPList_$ConvexResult.prototype = {
	begin: function() {
		return this.head;
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$ConvexResult
};
var zpp_$nape_util_ZNPList_$ZPP_$GeomPoly = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_ZPP_GeomPoly"] = zpp_$nape_util_ZNPList_$ZPP_$GeomPoly;
zpp_$nape_util_ZNPList_$ZPP_$GeomPoly.__name__ = ["zpp_nape","util","ZNPList_ZPP_GeomPoly"];
zpp_$nape_util_ZNPList_$ZPP_$GeomPoly.prototype = {
	begin: function() {
		return this.head;
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$ZPP_$GeomPoly
};
var zpp_$nape_util_ZNPList_$RayResult = function() {
	this.length = 0;
	this.pushmod = false;
	this.modified = false;
	this.head = null;
};
$hxClasses["zpp_nape.util.ZNPList_RayResult"] = zpp_$nape_util_ZNPList_$RayResult;
zpp_$nape_util_ZNPList_$RayResult.__name__ = ["zpp_nape","util","ZNPList_RayResult"];
zpp_$nape_util_ZNPList_$RayResult.prototype = {
	begin: function() {
		return this.head;
	}
	,iterator_at: function(ind) {
		var ret = this.begin();
		while(ind-- > 0 && ret != null) ret = ret.next;
		return ret;
	}
	,__class__: zpp_$nape_util_ZNPList_$RayResult
};
var zpp_$nape_util_ZNPNode_$ZPP_$CbType = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_CbType"] = zpp_$nape_util_ZNPNode_$ZPP_$CbType;
zpp_$nape_util_ZNPNode_$ZPP_$CbType.__name__ = ["zpp_nape","util","ZNPNode_ZPP_CbType"];
zpp_$nape_util_ZNPNode_$ZPP_$CbType.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$CbType
};
var zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_CallbackSet"] = zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet;
zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.__name__ = ["zpp_nape","util","ZNPNode_ZPP_CallbackSet"];
zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet
};
var zpp_$nape_util_ZNPNode_$ZPP_$Shape = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_Shape"] = zpp_$nape_util_ZNPNode_$ZPP_$Shape;
zpp_$nape_util_ZNPNode_$ZPP_$Shape.__name__ = ["zpp_nape","util","ZNPNode_ZPP_Shape"];
zpp_$nape_util_ZNPNode_$ZPP_$Shape.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$Shape
};
var zpp_$nape_util_ZNPNode_$ZPP_$Body = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_Body"] = zpp_$nape_util_ZNPNode_$ZPP_$Body;
zpp_$nape_util_ZNPNode_$ZPP_$Body.__name__ = ["zpp_nape","util","ZNPNode_ZPP_Body"];
zpp_$nape_util_ZNPNode_$ZPP_$Body.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$Body
};
var zpp_$nape_util_ZNPNode_$ZPP_$Constraint = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_Constraint"] = zpp_$nape_util_ZNPNode_$ZPP_$Constraint;
zpp_$nape_util_ZNPNode_$ZPP_$Constraint.__name__ = ["zpp_nape","util","ZNPNode_ZPP_Constraint"];
zpp_$nape_util_ZNPNode_$ZPP_$Constraint.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$Constraint
};
var zpp_$nape_util_ZNPNode_$ZPP_$Compound = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_Compound"] = zpp_$nape_util_ZNPNode_$ZPP_$Compound;
zpp_$nape_util_ZNPNode_$ZPP_$Compound.__name__ = ["zpp_nape","util","ZNPNode_ZPP_Compound"];
zpp_$nape_util_ZNPNode_$ZPP_$Compound.prototype = {
	free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$Compound
};
var zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_InteractionListener"] = zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener;
zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.__name__ = ["zpp_nape","util","ZNPNode_ZPP_InteractionListener"];
zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener
};
var zpp_$nape_util_ZNPNode_$ZPP_$CbSet = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_CbSet"] = zpp_$nape_util_ZNPNode_$ZPP_$CbSet;
zpp_$nape_util_ZNPNode_$ZPP_$CbSet.__name__ = ["zpp_nape","util","ZNPNode_ZPP_CbSet"];
zpp_$nape_util_ZNPNode_$ZPP_$CbSet.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$CbSet
};
var zpp_$nape_util_ZNPNode_$ZPP_$Interactor = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_Interactor"] = zpp_$nape_util_ZNPNode_$ZPP_$Interactor;
zpp_$nape_util_ZNPNode_$ZPP_$Interactor.__name__ = ["zpp_nape","util","ZNPNode_ZPP_Interactor"];
zpp_$nape_util_ZNPNode_$ZPP_$Interactor.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$Interactor
};
var zpp_$nape_util_ZNPNode_$ZPP_$BodyListener = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_BodyListener"] = zpp_$nape_util_ZNPNode_$ZPP_$BodyListener;
zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.__name__ = ["zpp_nape","util","ZNPNode_ZPP_BodyListener"];
zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$BodyListener
};
var zpp_$nape_util_ZNPNode_$ZPP_$Arbiter = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_Arbiter"] = zpp_$nape_util_ZNPNode_$ZPP_$Arbiter;
zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.__name__ = ["zpp_nape","util","ZNPNode_ZPP_Arbiter"];
zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$Arbiter
};
var zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"] = zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener;
zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.__name__ = ["zpp_nape","util","ZNPNode_ZPP_ConstraintListener"];
zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener
};
var zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_CbSetPair"] = zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair;
zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.__name__ = ["zpp_nape","util","ZNPNode_ZPP_CbSetPair"];
zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair
};
var zpp_$nape_util_ZNPNode_$ZPP_$AABBPair = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_AABBPair"] = zpp_$nape_util_ZNPNode_$ZPP_$AABBPair;
zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.__name__ = ["zpp_nape","util","ZNPNode_ZPP_AABBPair"];
zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$AABBPair
};
var zpp_$nape_util_ZNPNode_$ZPP_$Edge = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_Edge"] = zpp_$nape_util_ZNPNode_$ZPP_$Edge;
zpp_$nape_util_ZNPNode_$ZPP_$Edge.__name__ = ["zpp_nape","util","ZNPNode_ZPP_Edge"];
zpp_$nape_util_ZNPNode_$ZPP_$Edge.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$Edge
};
var zpp_$nape_util_ZNPNode_$ZPP_$Vec2 = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_Vec2"] = zpp_$nape_util_ZNPNode_$ZPP_$Vec2;
zpp_$nape_util_ZNPNode_$ZPP_$Vec2.__name__ = ["zpp_nape","util","ZNPNode_ZPP_Vec2"];
zpp_$nape_util_ZNPNode_$ZPP_$Vec2.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$Vec2
};
var zpp_$nape_util_ZNPNode_$ZPP_$Component = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_Component"] = zpp_$nape_util_ZNPNode_$ZPP_$Component;
zpp_$nape_util_ZNPNode_$ZPP_$Component.__name__ = ["zpp_nape","util","ZNPNode_ZPP_Component"];
zpp_$nape_util_ZNPNode_$ZPP_$Component.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$Component
};
var zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"] = zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup;
zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.__name__ = ["zpp_nape","util","ZNPNode_ZPP_InteractionGroup"];
zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.prototype = {
	elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup
};
var zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"] = zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter;
zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.__name__ = ["zpp_nape","util","ZNPNode_ZPP_FluidArbiter"];
zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter
};
var zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"] = zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter;
zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.__name__ = ["zpp_nape","util","ZNPNode_ZPP_SensorArbiter"];
zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter
};
var zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_ColArbiter"] = zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter;
zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.__name__ = ["zpp_nape","util","ZNPNode_ZPP_ColArbiter"];
zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter
};
var zpp_$nape_util_ZNPNode_$ZPP_$Listener = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_Listener"] = zpp_$nape_util_ZNPNode_$ZPP_$Listener;
zpp_$nape_util_ZNPNode_$ZPP_$Listener.__name__ = ["zpp_nape","util","ZNPNode_ZPP_Listener"];
zpp_$nape_util_ZNPNode_$ZPP_$Listener.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$Listener
};
var zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_ToiEvent"] = zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent;
zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.__name__ = ["zpp_nape","util","ZNPNode_ZPP_ToiEvent"];
zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.prototype = {
	alloc: function() {
	}
	,free: function() {
		this.elt = null;
	}
	,elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent
};
var zpp_$nape_util_ZNPNode_$ConvexResult = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ConvexResult"] = zpp_$nape_util_ZNPNode_$ConvexResult;
zpp_$nape_util_ZNPNode_$ConvexResult.__name__ = ["zpp_nape","util","ZNPNode_ConvexResult"];
zpp_$nape_util_ZNPNode_$ConvexResult.prototype = {
	elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ConvexResult
};
var zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_ZPP_GeomPoly"] = zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly;
zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.__name__ = ["zpp_nape","util","ZNPNode_ZPP_GeomPoly"];
zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.prototype = {
	elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly
};
var zpp_$nape_util_ZNPNode_$RayResult = function() {
	this.elt = null;
	this.next = null;
};
$hxClasses["zpp_nape.util.ZNPNode_RayResult"] = zpp_$nape_util_ZNPNode_$RayResult;
zpp_$nape_util_ZNPNode_$RayResult.__name__ = ["zpp_nape","util","ZNPNode_RayResult"];
zpp_$nape_util_ZNPNode_$RayResult.prototype = {
	elem: function() {
		return this.elt;
	}
	,__class__: zpp_$nape_util_ZNPNode_$RayResult
};
var zpp_$nape_util_ZPP_$MixVec2List = function() {
	this.at_index = 0;
	this.at_ite = null;
	this.zip_length = false;
	this._length = 0;
	this.inner = null;
	nape_geom_Vec2List.call(this);
	this.at_ite = null;
	this.at_index = 0;
	this.zip_length = true;
	this._length = 0;
};
$hxClasses["zpp_nape.util.ZPP_MixVec2List"] = zpp_$nape_util_ZPP_$MixVec2List;
zpp_$nape_util_ZPP_$MixVec2List.__name__ = ["zpp_nape","util","ZPP_MixVec2List"];
zpp_$nape_util_ZPP_$MixVec2List.get = function(list,immutable) {
	if(immutable == null) immutable = false;
	var ret = new zpp_$nape_util_ZPP_$MixVec2List();
	ret.inner = list;
	ret.zpp_inner.immutable = immutable;
	return ret;
};
zpp_$nape_util_ZPP_$MixVec2List.__super__ = nape_geom_Vec2List;
zpp_$nape_util_ZPP_$MixVec2List.prototype = $extend(nape_geom_Vec2List.prototype,{
	zpp_gl: function() {
		this.zpp_vm();
		if(this.zip_length) {
			this._length = 0;
			var cx_ite = this.inner.begin();
			while(cx_ite != null) {
				var i = cx_ite.elem();
				if(true) this._length++;
				cx_ite = cx_ite.next;
			}
			this.zip_length = false;
		}
		return this._length;
	}
	,zpp_vm: function() {
		this.zpp_inner.validate();
		if(this.inner.modified) {
			this.zip_length = true;
			this._length = 0;
			this.at_ite = null;
		}
	}
	,at: function(index) {
		this.zpp_vm();
		if(this.zpp_inner.reverse_flag) index = this.get_length() - 1 - index;
		if(index < this.at_index || this.at_ite == null) {
			this.at_index = 0;
			this.at_ite = this.inner.begin();
			while(true) {
				var x = this.at_ite.elem();
				if(true) break;
				this.at_ite = this.at_ite.next;
			}
		}
		while(this.at_index != index) {
			this.at_index++;
			this.at_ite = this.at_ite.next;
			while(true) {
				var x1 = this.at_ite.elem();
				if(true) break;
				this.at_ite = this.at_ite.next;
			}
		}
		return this.at_ite.elem().wrapper();
	}
	,push: function(obj) {
		this.zpp_inner.modify_test();
		this.zpp_vm();
		var cont;
		if(this.zpp_inner.adder != null) cont = this.zpp_inner.adder(obj); else cont = true;
		if(cont) {
			if(this.zpp_inner.reverse_flag) this.inner.add(obj.zpp_inner); else {
				var ite = this.inner.iterator_at(this.get_length() - 1);
				this.inner.insert(ite,obj.zpp_inner);
			}
			this.zpp_inner.invalidate();
			if(this.zpp_inner.post_adder != null) this.zpp_inner.post_adder(obj);
		}
		return cont;
	}
	,__class__: zpp_$nape_util_ZPP_$MixVec2List
});
var zpp_$nape_util_ZPP_$ConstraintList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this.dontremove = false;
	this.subber = null;
	this.adder = null;
	this._validate = null;
	this._invalidate = null;
	this._invalidated = false;
	this.immutable = false;
	this.inner = null;
	this.outer = null;
	this.inner = new zpp_$nape_util_ZNPList_$ZPP_$Constraint();
	this._invalidated = true;
};
$hxClasses["zpp_nape.util.ZPP_ConstraintList"] = zpp_$nape_util_ZPP_$ConstraintList;
zpp_$nape_util_ZPP_$ConstraintList.__name__ = ["zpp_nape","util","ZPP_ConstraintList"];
zpp_$nape_util_ZPP_$ConstraintList.get = function(list,imm) {
	if(imm == null) imm = false;
	var ret = new nape_constraint_ConstraintList();
	ret.zpp_inner.inner = list;
	if(imm) ret.zpp_inner.immutable = true;
	ret.zpp_inner.zip_length = true;
	return ret;
};
zpp_$nape_util_ZPP_$ConstraintList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,modify_test: function() {
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,invalidate: function() {
		this._invalidated = true;
		if(this._invalidate != null) this._invalidate(this);
	}
	,__class__: zpp_$nape_util_ZPP_$ConstraintList
};
var zpp_$nape_util_ZPP_$BodyList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this.dontremove = false;
	this.subber = null;
	this.post_adder = null;
	this.adder = null;
	this._validate = null;
	this._invalidate = null;
	this._invalidated = false;
	this.immutable = false;
	this.inner = null;
	this.outer = null;
	this.inner = new zpp_$nape_util_ZNPList_$ZPP_$Body();
	this._invalidated = true;
};
$hxClasses["zpp_nape.util.ZPP_BodyList"] = zpp_$nape_util_ZPP_$BodyList;
zpp_$nape_util_ZPP_$BodyList.__name__ = ["zpp_nape","util","ZPP_BodyList"];
zpp_$nape_util_ZPP_$BodyList.get = function(list,imm) {
	if(imm == null) imm = false;
	var ret = new nape_phys_BodyList();
	ret.zpp_inner.inner = list;
	if(imm) ret.zpp_inner.immutable = true;
	ret.zpp_inner.zip_length = true;
	return ret;
};
zpp_$nape_util_ZPP_$BodyList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,modify_test: function() {
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,invalidate: function() {
		this._invalidated = true;
		if(this._invalidate != null) this._invalidate(this);
	}
	,__class__: zpp_$nape_util_ZPP_$BodyList
};
var zpp_$nape_util_ZPP_$InteractorList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this._validate = null;
	this._invalidated = false;
	this.inner = null;
};
$hxClasses["zpp_nape.util.ZPP_InteractorList"] = zpp_$nape_util_ZPP_$InteractorList;
zpp_$nape_util_ZPP_$InteractorList.__name__ = ["zpp_nape","util","ZPP_InteractorList"];
zpp_$nape_util_ZPP_$InteractorList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,__class__: zpp_$nape_util_ZPP_$InteractorList
};
var zpp_$nape_util_ZPP_$CompoundList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this.dontremove = false;
	this.subber = null;
	this.adder = null;
	this._validate = null;
	this._invalidate = null;
	this._invalidated = false;
	this.immutable = false;
	this.inner = null;
	this.outer = null;
	this.inner = new zpp_$nape_util_ZNPList_$ZPP_$Compound();
	this._invalidated = true;
};
$hxClasses["zpp_nape.util.ZPP_CompoundList"] = zpp_$nape_util_ZPP_$CompoundList;
zpp_$nape_util_ZPP_$CompoundList.__name__ = ["zpp_nape","util","ZPP_CompoundList"];
zpp_$nape_util_ZPP_$CompoundList.get = function(list,imm) {
	if(imm == null) imm = false;
	var ret = new nape_phys_CompoundList();
	ret.zpp_inner.inner = list;
	if(imm) ret.zpp_inner.immutable = true;
	ret.zpp_inner.zip_length = true;
	return ret;
};
zpp_$nape_util_ZPP_$CompoundList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,modify_test: function() {
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,invalidate: function() {
		this._invalidated = true;
		if(this._invalidate != null) this._invalidate(this);
	}
	,__class__: zpp_$nape_util_ZPP_$CompoundList
};
var zpp_$nape_util_ZPP_$ListenerList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this.dontremove = false;
	this.subber = null;
	this.post_adder = null;
	this.adder = null;
	this._validate = null;
	this._invalidate = null;
	this._invalidated = false;
	this.immutable = false;
	this.inner = null;
	this.outer = null;
	this.inner = new zpp_$nape_util_ZNPList_$ZPP_$Listener();
	this._invalidated = true;
};
$hxClasses["zpp_nape.util.ZPP_ListenerList"] = zpp_$nape_util_ZPP_$ListenerList;
zpp_$nape_util_ZPP_$ListenerList.__name__ = ["zpp_nape","util","ZPP_ListenerList"];
zpp_$nape_util_ZPP_$ListenerList.get = function(list,imm) {
	if(imm == null) imm = false;
	var ret = new nape_callbacks_ListenerList();
	ret.zpp_inner.inner = list;
	if(imm) ret.zpp_inner.immutable = true;
	ret.zpp_inner.zip_length = true;
	return ret;
};
zpp_$nape_util_ZPP_$ListenerList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,modify_test: function() {
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,invalidate: function() {
		this._invalidated = true;
		if(this._invalidate != null) this._invalidate(this);
	}
	,__class__: zpp_$nape_util_ZPP_$ListenerList
};
var zpp_$nape_util_ZPP_$CbTypeList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this._validate = null;
	this._invalidated = false;
	this.immutable = false;
	this.inner = null;
	this.outer = null;
	this.inner = new zpp_$nape_util_ZNPList_$ZPP_$CbType();
	this._invalidated = true;
};
$hxClasses["zpp_nape.util.ZPP_CbTypeList"] = zpp_$nape_util_ZPP_$CbTypeList;
zpp_$nape_util_ZPP_$CbTypeList.__name__ = ["zpp_nape","util","ZPP_CbTypeList"];
zpp_$nape_util_ZPP_$CbTypeList.get = function(list,imm) {
	if(imm == null) imm = false;
	var ret = new nape_callbacks_CbTypeList();
	ret.zpp_inner.inner = list;
	if(imm) ret.zpp_inner.immutable = true;
	ret.zpp_inner.zip_length = true;
	return ret;
};
zpp_$nape_util_ZPP_$CbTypeList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,__class__: zpp_$nape_util_ZPP_$CbTypeList
};
var zpp_$nape_util_ZPP_$Vec2List = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this.subber = null;
	this.post_adder = null;
	this.adder = null;
	this._validate = null;
	this._invalidate = null;
	this._invalidated = false;
	this.immutable = false;
	this.inner = null;
	this.outer = null;
	this.inner = new zpp_$nape_util_ZNPList_$ZPP_$Vec2();
	this._invalidated = true;
};
$hxClasses["zpp_nape.util.ZPP_Vec2List"] = zpp_$nape_util_ZPP_$Vec2List;
zpp_$nape_util_ZPP_$Vec2List.__name__ = ["zpp_nape","util","ZPP_Vec2List"];
zpp_$nape_util_ZPP_$Vec2List.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,modify_test: function() {
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,invalidate: function() {
		this._invalidated = true;
		if(this._invalidate != null) this._invalidate(this);
	}
	,__class__: zpp_$nape_util_ZPP_$Vec2List
};
var zpp_$nape_util_ZPP_$GeomPolyList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this._validate = null;
	this._invalidated = false;
	this.inner = null;
};
$hxClasses["zpp_nape.util.ZPP_GeomPolyList"] = zpp_$nape_util_ZPP_$GeomPolyList;
zpp_$nape_util_ZPP_$GeomPolyList.__name__ = ["zpp_nape","util","ZPP_GeomPolyList"];
zpp_$nape_util_ZPP_$GeomPolyList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,__class__: zpp_$nape_util_ZPP_$GeomPolyList
};
var zpp_$nape_util_ZPP_$RayResultList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this._validate = null;
	this._invalidated = false;
	this.inner = null;
};
$hxClasses["zpp_nape.util.ZPP_RayResultList"] = zpp_$nape_util_ZPP_$RayResultList;
zpp_$nape_util_ZPP_$RayResultList.__name__ = ["zpp_nape","util","ZPP_RayResultList"];
zpp_$nape_util_ZPP_$RayResultList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,__class__: zpp_$nape_util_ZPP_$RayResultList
};
var zpp_$nape_util_ZPP_$ConvexResultList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this._validate = null;
	this._invalidated = false;
	this.inner = null;
};
$hxClasses["zpp_nape.util.ZPP_ConvexResultList"] = zpp_$nape_util_ZPP_$ConvexResultList;
zpp_$nape_util_ZPP_$ConvexResultList.__name__ = ["zpp_nape","util","ZPP_ConvexResultList"];
zpp_$nape_util_ZPP_$ConvexResultList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,__class__: zpp_$nape_util_ZPP_$ConvexResultList
};
var zpp_$nape_util_ZPP_$EdgeList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this._validate = null;
	this._invalidated = false;
	this.inner = null;
};
$hxClasses["zpp_nape.util.ZPP_EdgeList"] = zpp_$nape_util_ZPP_$EdgeList;
zpp_$nape_util_ZPP_$EdgeList.__name__ = ["zpp_nape","util","ZPP_EdgeList"];
zpp_$nape_util_ZPP_$EdgeList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,__class__: zpp_$nape_util_ZPP_$EdgeList
};
var zpp_$nape_util_ZPP_$ShapeList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this.dontremove = false;
	this.subber = null;
	this.post_adder = null;
	this.adder = null;
	this._validate = null;
	this._invalidate = null;
	this._invalidated = false;
	this.immutable = false;
	this.inner = null;
	this.outer = null;
	this.inner = new zpp_$nape_util_ZNPList_$ZPP_$Shape();
	this._invalidated = true;
};
$hxClasses["zpp_nape.util.ZPP_ShapeList"] = zpp_$nape_util_ZPP_$ShapeList;
zpp_$nape_util_ZPP_$ShapeList.__name__ = ["zpp_nape","util","ZPP_ShapeList"];
zpp_$nape_util_ZPP_$ShapeList.get = function(list,imm) {
	if(imm == null) imm = false;
	var ret = new nape_shape_ShapeList();
	ret.zpp_inner.inner = list;
	if(imm) ret.zpp_inner.immutable = true;
	ret.zpp_inner.zip_length = true;
	return ret;
};
zpp_$nape_util_ZPP_$ShapeList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,modify_test: function() {
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,invalidate: function() {
		this._invalidated = true;
		if(this._invalidate != null) this._invalidate(this);
	}
	,__class__: zpp_$nape_util_ZPP_$ShapeList
};
var zpp_$nape_util_ZPP_$InteractionGroupList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this._validate = null;
	this._invalidated = false;
	this.inner = null;
};
$hxClasses["zpp_nape.util.ZPP_InteractionGroupList"] = zpp_$nape_util_ZPP_$InteractionGroupList;
zpp_$nape_util_ZPP_$InteractionGroupList.__name__ = ["zpp_nape","util","ZPP_InteractionGroupList"];
zpp_$nape_util_ZPP_$InteractionGroupList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,__class__: zpp_$nape_util_ZPP_$InteractionGroupList
};
var zpp_$nape_util_ZPP_$ArbiterList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this._validate = null;
	this._invalidated = false;
	this.immutable = false;
	this.inner = null;
	this.outer = null;
	this.inner = new zpp_$nape_util_ZNPList_$ZPP_$Arbiter();
	this._invalidated = true;
};
$hxClasses["zpp_nape.util.ZPP_ArbiterList"] = zpp_$nape_util_ZPP_$ArbiterList;
zpp_$nape_util_ZPP_$ArbiterList.__name__ = ["zpp_nape","util","ZPP_ArbiterList"];
zpp_$nape_util_ZPP_$ArbiterList.get = function(list,imm) {
	if(imm == null) imm = false;
	var ret = new nape_dynamics_ArbiterList();
	ret.zpp_inner.inner = list;
	if(imm) ret.zpp_inner.immutable = true;
	ret.zpp_inner.zip_length = true;
	return ret;
};
zpp_$nape_util_ZPP_$ArbiterList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,__class__: zpp_$nape_util_ZPP_$ArbiterList
};
var zpp_$nape_util_ZPP_$ContactList = function() {
	this.user_length = 0;
	this.zip_length = false;
	this.push_ite = null;
	this.at_ite = null;
	this.at_index = 0;
	this.reverse_flag = false;
	this._validate = null;
	this._invalidated = false;
	this.inner = null;
};
$hxClasses["zpp_nape.util.ZPP_ContactList"] = zpp_$nape_util_ZPP_$ContactList;
zpp_$nape_util_ZPP_$ContactList.__name__ = ["zpp_nape","util","ZPP_ContactList"];
zpp_$nape_util_ZPP_$ContactList.prototype = {
	valmod: function() {
		this.validate();
		if(this.inner.modified) {
			if(this.inner.pushmod) this.push_ite = null;
			this.at_ite = null;
			this.inner.modified = false;
			this.inner.pushmod = false;
			this.zip_length = true;
		}
	}
	,validate: function() {
		if(this._invalidated) {
			this._invalidated = false;
			if(this._validate != null) this._validate();
		}
	}
	,__class__: zpp_$nape_util_ZPP_$ContactList
};
var zpp_$nape_util_ZPP_$Math = function() { };
$hxClasses["zpp_nape.util.ZPP_Math"] = zpp_$nape_util_ZPP_$Math;
zpp_$nape_util_ZPP_$Math.__name__ = ["zpp_nape","util","ZPP_Math"];
zpp_$nape_util_ZPP_$Math.sqrt = function(x) {
	return Math.sqrt(x);
};
zpp_$nape_util_ZPP_$Math.invsqrt = function(x) {
	return 1.0 / zpp_$nape_util_ZPP_$Math.sqrt(x);
};
zpp_$nape_util_ZPP_$Math.sqr = function(x) {
	return x * x;
};
var zpp_$nape_util_ZPP_$PubPool = function() { };
$hxClasses["zpp_nape.util.ZPP_PubPool"] = zpp_$nape_util_ZPP_$PubPool;
zpp_$nape_util_ZPP_$PubPool.__name__ = ["zpp_nape","util","ZPP_PubPool"];
var zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair = function() {
	this.colour = 0;
	this.parent = null;
	this.next = null;
	this.prev = null;
	this.data = null;
	this.swapped = null;
	this.lt = null;
};
$hxClasses["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"] = zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair;
zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.__name__ = ["zpp_nape","util","ZPP_Set_ZPP_CbSetPair"];
zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.prototype = {
	free: function() {
		this.data = null;
		this.lt = null;
		this.swapped = null;
	}
	,alloc: function() {
	}
	,clear_with: function(lambda) {
		if(this.parent == null) return; else {
			var cur = this.parent;
			while(cur != null) if(cur.prev != null) cur = cur.prev; else if(cur.next != null) cur = cur.next; else cur = this.clear_node(cur,lambda);
			this.parent = null;
		}
	}
	,clear_node: function(node,lambda) {
		lambda(node.data);
		var ret = node.parent;
		if(ret != null) {
			if(node == ret.prev) ret.prev = null; else ret.next = null;
			node.parent = null;
		}
		var o = node;
		o.free();
		o.next = zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool;
		zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool = o;
		return ret;
	}
	,__fix_dbl_red: function(x) {
		while(true) {
			var par = x.parent;
			var g = par.parent;
			if(g == null) {
				par.colour = 1;
				break;
			}
			var n1;
			var n2;
			var n3;
			var t1;
			var t2;
			var t3;
			var t4;
			if(par == g.prev) {
				n3 = g;
				t4 = g.next;
				if(x == par.prev) {
					n1 = x;
					n2 = par;
					t1 = x.prev;
					t2 = x.next;
					t3 = par.next;
				} else {
					n1 = par;
					n2 = x;
					t1 = par.prev;
					t2 = x.prev;
					t3 = x.next;
				}
			} else {
				n1 = g;
				t1 = g.prev;
				if(x == par.prev) {
					n2 = x;
					n3 = par;
					t2 = x.prev;
					t3 = x.next;
					t4 = par.next;
				} else {
					n2 = par;
					n3 = x;
					t2 = par.prev;
					t3 = x.prev;
					t4 = x.next;
				}
			}
			var par1 = g.parent;
			if(par1 == null) this.parent = n2; else if(par1.prev == g) par1.prev = n2; else par1.next = n2;
			if(n2 != null) n2.parent = par1;
			n1.prev = t1;
			if(t1 != null) t1.parent = n1;
			n1.next = t2;
			if(t2 != null) t2.parent = n1;
			n2.prev = n1;
			if(n1 != null) n1.parent = n2;
			n2.next = n3;
			if(n3 != null) n3.parent = n2;
			n3.prev = t3;
			if(t3 != null) t3.parent = n3;
			n3.next = t4;
			if(t4 != null) t4.parent = n3;
			n2.colour = g.colour - 1;
			n1.colour = 1;
			n3.colour = 1;
			if(n2 == this.parent) this.parent.colour = 1; else if(n2.colour == 0 && n2.parent.colour == 0) {
				x = n2;
				continue;
			}
			break;
		}
	}
	,try_insert: function(obj) {
		var x = null;
		var cur = null;
		if(this.parent == null) {
			if(zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool == null) x = new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair(); else {
				x = zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool;
				zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool = x.next;
				x.next = null;
			}
			x.alloc();
			x.data = obj;
			this.parent = x;
		} else {
			cur = this.parent;
			while(true) if(this.lt(obj,cur.data)) {
				if(cur.prev == null) {
					if(zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool == null) x = new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair(); else {
						x = zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool;
						zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool = x.next;
						x.next = null;
					}
					x.alloc();
					x.data = obj;
					cur.prev = x;
					x.parent = cur;
					break;
				} else cur = cur.prev;
			} else if(this.lt(cur.data,obj)) {
				if(cur.next == null) {
					if(zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool == null) x = new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair(); else {
						x = zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool;
						zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool = x.next;
						x.next = null;
					}
					x.alloc();
					x.data = obj;
					cur.next = x;
					x.parent = cur;
					break;
				} else cur = cur.next;
			} else break;
		}
		if(x == null) return cur; else {
			if(x.parent == null) x.colour = 1; else {
				x.colour = 0;
				if(x.parent.colour == 0) this.__fix_dbl_red(x);
			}
			return x;
		}
	}
	,__class__: zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair
};
var zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet = function() {
	this.colour = 0;
	this.parent = null;
	this.next = null;
	this.prev = null;
	this.data = null;
	this.swapped = null;
	this.lt = null;
};
$hxClasses["zpp_nape.util.ZPP_Set_ZPP_CbSet"] = zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet;
zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.__name__ = ["zpp_nape","util","ZPP_Set_ZPP_CbSet"];
zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.prototype = {
	free: function() {
		this.data = null;
		this.lt = null;
		this.swapped = null;
	}
	,alloc: function() {
	}
	,empty: function() {
		return this.parent == null;
	}
	,find: function(obj) {
		var cur = this.parent;
		while(cur != null && cur.data != obj) if(this.lt(obj,cur.data)) cur = cur.prev; else cur = cur.next;
		return cur;
	}
	,find_weak: function(obj) {
		var cur = this.parent;
		while(cur != null) if(this.lt(obj,cur.data)) cur = cur.prev; else if(this.lt(cur.data,obj)) cur = cur.next; else break;
		return cur;
	}
	,remove: function(obj) {
		var node = this.find(obj);
		this.remove_node(node);
	}
	,remove_node: function(cur) {
		if(cur.next != null && cur.prev != null) {
			var sm = cur.next;
			while(sm.prev != null) sm = sm.prev;
			var t = cur.data;
			cur.data = sm.data;
			sm.data = t;
			if(this.swapped != null) this.swapped(cur.data,sm.data);
			cur = sm;
		}
		var child;
		if(cur.prev == null) child = cur.next; else child = cur.prev;
		if(cur.colour == 1) {
			if(cur.prev != null || cur.next != null) child.colour = 1; else if(cur.parent != null) {
				var parent = cur.parent;
				while(true) {
					parent.colour++;
					parent.prev.colour--;
					parent.next.colour--;
					var child1 = parent.prev;
					if(child1.colour == -1) {
						this.__fix_neg_red(child1);
						break;
					} else if(child1.colour == 0) {
						if(child1.prev != null && child1.prev.colour == 0) {
							this.__fix_dbl_red(child1.prev);
							break;
						}
						if(child1.next != null && child1.next.colour == 0) {
							this.__fix_dbl_red(child1.next);
							break;
						}
					}
					var child2 = parent.next;
					if(child2.colour == -1) {
						this.__fix_neg_red(child2);
						break;
					} else if(child2.colour == 0) {
						if(child2.prev != null && child2.prev.colour == 0) {
							this.__fix_dbl_red(child2.prev);
							break;
						}
						if(child2.next != null && child2.next.colour == 0) {
							this.__fix_dbl_red(child2.next);
							break;
						}
					}
					if(parent.colour == 2) {
						if(parent.parent == null) parent.colour = 1; else {
							parent = parent.parent;
							continue;
						}
					}
					break;
				}
			}
		}
		var par = cur.parent;
		if(par == null) this.parent = child; else if(par.prev == cur) par.prev = child; else par.next = child;
		if(child != null) child.parent = par;
		cur.parent = cur.prev = cur.next = null;
		var o = cur;
		o.free();
		o.next = zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool;
		zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool = o;
	}
	,__fix_neg_red: function(negred) {
		var parent = negred.parent;
		var child;
		if(parent.prev == negred) {
			var nl = negred.prev;
			var nr = negred.next;
			var trl = nr.prev;
			var trr = nr.next;
			nl.colour = 0;
			negred.colour = parent.colour = 1;
			negred.next = trl;
			if(trl != null) trl.parent = negred;
			var t = parent.data;
			parent.data = nr.data;
			nr.data = t;
			if(this.swapped != null) this.swapped(parent.data,nr.data);
			nr.prev = trr;
			if(trr != null) trr.parent = nr;
			nr.next = parent.next;
			if(parent.next != null) parent.next.parent = nr;
			parent.next = nr;
			if(nr != null) nr.parent = parent;
			child = nl;
		} else {
			var nl1 = negred.next;
			var nr1 = negred.prev;
			var trl1 = nr1.next;
			var trr1 = nr1.prev;
			nl1.colour = 0;
			negred.colour = parent.colour = 1;
			negred.prev = trl1;
			if(trl1 != null) trl1.parent = negred;
			var t1 = parent.data;
			parent.data = nr1.data;
			nr1.data = t1;
			if(this.swapped != null) this.swapped(parent.data,nr1.data);
			nr1.next = trr1;
			if(trr1 != null) trr1.parent = nr1;
			nr1.prev = parent.prev;
			if(parent.prev != null) parent.prev.parent = nr1;
			parent.prev = nr1;
			if(nr1 != null) nr1.parent = parent;
			child = nl1;
		}
		if(child.prev != null && child.prev.colour == 0) this.__fix_dbl_red(child.prev); else if(child.next != null && child.next.colour == 0) this.__fix_dbl_red(child.next);
	}
	,__fix_dbl_red: function(x) {
		while(true) {
			var par = x.parent;
			var g = par.parent;
			if(g == null) {
				par.colour = 1;
				break;
			}
			var n1;
			var n2;
			var n3;
			var t1;
			var t2;
			var t3;
			var t4;
			if(par == g.prev) {
				n3 = g;
				t4 = g.next;
				if(x == par.prev) {
					n1 = x;
					n2 = par;
					t1 = x.prev;
					t2 = x.next;
					t3 = par.next;
				} else {
					n1 = par;
					n2 = x;
					t1 = par.prev;
					t2 = x.prev;
					t3 = x.next;
				}
			} else {
				n1 = g;
				t1 = g.prev;
				if(x == par.prev) {
					n2 = x;
					n3 = par;
					t2 = x.prev;
					t3 = x.next;
					t4 = par.next;
				} else {
					n2 = par;
					n3 = x;
					t2 = par.prev;
					t3 = x.prev;
					t4 = x.next;
				}
			}
			var par1 = g.parent;
			if(par1 == null) this.parent = n2; else if(par1.prev == g) par1.prev = n2; else par1.next = n2;
			if(n2 != null) n2.parent = par1;
			n1.prev = t1;
			if(t1 != null) t1.parent = n1;
			n1.next = t2;
			if(t2 != null) t2.parent = n1;
			n2.prev = n1;
			if(n1 != null) n1.parent = n2;
			n2.next = n3;
			if(n3 != null) n3.parent = n2;
			n3.prev = t3;
			if(t3 != null) t3.parent = n3;
			n3.next = t4;
			if(t4 != null) t4.parent = n3;
			n2.colour = g.colour - 1;
			n1.colour = 1;
			n3.colour = 1;
			if(n2 == this.parent) this.parent.colour = 1; else if(n2.colour == 0 && n2.parent.colour == 0) {
				x = n2;
				continue;
			}
			break;
		}
	}
	,insert: function(obj) {
		var x;
		if(zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool == null) x = new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet(); else {
			x = zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool;
			zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool = x.next;
			x.next = null;
		}
		x.alloc();
		x.data = obj;
		if(this.parent == null) this.parent = x; else {
			var cur = this.parent;
			while(true) if(this.lt(x.data,cur.data)) {
				if(cur.prev == null) {
					cur.prev = x;
					x.parent = cur;
					break;
				} else cur = cur.prev;
			} else if(cur.next == null) {
				cur.next = x;
				x.parent = cur;
				break;
			} else cur = cur.next;
		}
		if(x.parent == null) x.colour = 1; else {
			x.colour = 0;
			if(x.parent.colour == 0) this.__fix_dbl_red(x);
		}
		return x;
	}
	,__class__: zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet
};
function $iterator(o) { if( o instanceof Array ) return function() { return HxOverrides.iter(o); }; return typeof(o.iterator) == 'function' ? $bind(o,o.iterator) : o.iterator; }
var $_, $fid = 0;
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $fid++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = function(){ return f.method.apply(f.scope, arguments); }; f.scope = o; f.method = m; o.hx__closures__[m.__id__] = f; } return f; }
$hxClasses.Math = Math;
String.prototype.__class__ = $hxClasses.String = String;
String.__name__ = ["String"];
$hxClasses.Array = Array;
Array.__name__ = ["Array"];
Date.prototype.__class__ = $hxClasses.Date = Date;
Date.__name__ = ["Date"];
var Int = $hxClasses.Int = { __name__ : ["Int"]};
var Dynamic = $hxClasses.Dynamic = { __name__ : ["Dynamic"]};
var Float = $hxClasses.Float = Number;
Float.__name__ = ["Float"];
var Bool = $hxClasses.Bool = Boolean;
Bool.__ename__ = ["Bool"];
var Class = $hxClasses.Class = { __name__ : ["Class"]};
var Enum = { };
var __map_reserved = {}
var ArrayBuffer = (Function("return typeof ArrayBuffer != 'undefined' ? ArrayBuffer : null"))() || js_html_compat_ArrayBuffer;
if(ArrayBuffer.prototype.slice == null) ArrayBuffer.prototype.slice = js_html_compat_ArrayBuffer.sliceImpl;
var DataView = (Function("return typeof DataView != 'undefined' ? DataView : null"))() || js_html_compat_DataView;
var Uint8Array = (Function("return typeof Uint8Array != 'undefined' ? Uint8Array : null"))() || js_html_compat_Uint8Array._new;
Xml.Element = 0;
Xml.PCData = 1;
Xml.CData = 2;
Xml.Comment = 3;
Xml.DocType = 4;
Xml.ProcessingInstruction = 5;
Xml.Document = 6;
flambe_platform_html_HtmlPlatform.instance = new flambe_platform_html_HtmlPlatform();
flambe_util_SignalBase.DISPATCHING_SENTINEL = new flambe_util_SignalConnection(null,null);
flambe_System.root = new flambe_Entity();
flambe_System.uncaughtError = new flambe_util_Signal1();
flambe_System.hidden = new flambe_util_Value(false);
flambe_System.volume = new flambe_animation_AnimatedFloat(1);
flambe_System._platform = flambe_platform_html_HtmlPlatform.instance;
flambe_System._calledInit = false;
flambe_Log.logger = flambe_System.createLogger("flambe");
flambe_asset_Manifest.__meta__ = { obj : { assets : [{ 'dummy.txt' : []}]}};
flambe_asset_Manifest._supportsCrossOrigin = (function() {
	var detected = (function() {
		if(js_Browser.get_navigator().userAgent.indexOf("Linux; U; Android") >= 0) return false;
		var xhr = new XMLHttpRequest();
		return xhr.withCredentials != null;
	})();
	if(!detected) flambe_Log.warn("This browser does not support cross-domain asset loading, any Manifest.remoteBase setting will be ignored.");
	return detected;
})();
flambe_display_Sprite._scratchPoint = new flambe_math_Point();
flambe_display_Font.NEWLINE = new flambe_display_Glyph(10);
flambe_platform_BasicKeyboard._sharedEvent = new flambe_input_KeyboardEvent();
flambe_platform_BasicMouse._sharedEvent = new flambe_input_MouseEvent();
flambe_platform_BasicPointer._sharedEvent = new flambe_input_PointerEvent();
flambe_platform_html_CanvasRenderer.CANVAS_TEXTURES = (function() {
	var pattern = new EReg("(iPhone|iPod|iPad)","");
	return pattern.match(js_Browser.get_window().navigator.userAgent);
})();
flambe_platform_html_HtmlAssetPackLoader._mediaRefCount = 0;
flambe_platform_html_HtmlAssetPackLoader._detectBlobSupport = true;
flambe_platform_html_HtmlUtil.VENDOR_PREFIXES = ["webkit","moz","ms","o","khtml"];
flambe_platform_html_HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER = js_Browser.get_window().top == js_Browser.get_window() && new EReg("Mobile(/.*)? Safari","").match(js_Browser.get_navigator().userAgent);
flambe_platform_html_WebAudioSound._detectSupport = true;
flambe_platform_html_WebGLGraphics._scratchMatrix = new flambe_math_Matrix();
haxe_Serializer.USE_CACHE = false;
haxe_Serializer.USE_ENUM_INDEX = false;
haxe_Serializer.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
haxe_Unserializer.DEFAULT_RESOLVER = Type;
haxe_Unserializer.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
haxe_ds_ObjectMap.count = 0;
haxe_io_FPHelper.i64tmp = (function($this) {
	var $r;
	var x = new haxe__$Int64__$_$_$Int64(0 >> 31,0);
	$r = x;
	return $r;
}(this));
haxe_xml_Check.blanks = new EReg("^[ \r\n\t]*$","");
haxe_xml_Parser.escapes = (function($this) {
	var $r;
	var h = new haxe_ds_StringMap();
	h.set("lt","<");
	h.set("gt",">");
	h.set("amp","&");
	h.set("quot","\"");
	h.set("apos","'");
	$r = h;
	return $r;
}(this));
js_Boot.__toStr = {}.toString;
js_html_compat_Uint8Array.BYTES_PER_ELEMENT = 1;
nape_Config.epsilon = 1e-8;
nape_Config.fluidAngularDragFriction = 2.5;
nape_Config.fluidAngularDrag = 100;
nape_Config.fluidVacuumDrag = 0.5;
nape_Config.fluidLinearDrag = 0.5;
nape_Config.collisionSlop = 0.2;
nape_Config.collisionSlopCCD = 0.5;
nape_Config.distanceThresholdCCD = 0.05;
nape_Config.staticCCDLinearThreshold = 0.05;
nape_Config.staticCCDAngularThreshold = 0.005;
nape_Config.bulletCCDLinearThreshold = 0.125;
nape_Config.bulletCCDAngularThreshold = 0.0125;
nape_Config.dynamicSweepLinearThreshold = 17;
nape_Config.dynamicSweepAngularThreshold = 0.6;
nape_Config.angularCCDSlipScale = 0.75;
nape_Config.arbiterExpirationDelay = 6;
nape_Config.staticFrictionThreshold = 2;
nape_Config.elasticThreshold = 20;
nape_Config.sleepDelay = 60;
nape_Config.linearSleepThreshold = 0.2;
nape_Config.angularSleepThreshold = 0.4;
nape_Config.contactBiasCoef = 0.3;
nape_Config.contactStaticBiasCoef = 0.6;
nape_Config.contactContinuousBiasCoef = 0.4;
nape_Config.contactContinuousStaticBiasCoef = 0.5;
nape_Config.illConditionedThreshold = 2e+8;
tools_spark_framework_space2_$5D_core_AScene2_$5D._rect = new flambe_math_Rectangle();
zpp_$nape_callbacks_ZPP_$CbType.ANY_SHAPE = new nape_callbacks_CbType();
zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY = new nape_callbacks_CbType();
zpp_$nape_callbacks_ZPP_$CbType.ANY_COMPOUND = new nape_callbacks_CbType();
zpp_$nape_callbacks_ZPP_$CbType.ANY_CONSTRAINT = new nape_callbacks_CbType();
zpp_$nape_ZPP_$ID._Interactor = 0;
zpp_$nape_ZPP_$ID._CbType = 0;
zpp_$nape_ZPP_$ID._CbSet = 0;
zpp_$nape_ZPP_$ID._Listener = 0;
tools_spark_framework_flambe2_$5D_FlambeScene2_$5D.BIPED_FEET = new nape_callbacks_CbType();
tools_spark_framework_haxe_LooseCheck.blanks = new EReg("^[ \r\n\t]*$","");
zpp_$nape_util_ZPP_$Flags.internal = false;
zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT = 1;
zpp_$nape_util_ZPP_$Flags.id_ImmState_IGNORE = 2;
zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS = 4;
zpp_$nape_util_ZPP_$Flags.id_GravMassMode_DEFAULT = 0;
zpp_$nape_util_ZPP_$Flags.id_GravMassMode_FIXED = 1;
zpp_$nape_util_ZPP_$Flags.id_GravMassMode_SCALED = 2;
zpp_$nape_util_ZPP_$Flags.id_InertiaMode_DEFAULT = 0;
zpp_$nape_util_ZPP_$Flags.id_InertiaMode_FIXED = 1;
zpp_$nape_util_ZPP_$Flags.id_MassMode_DEFAULT = 0;
zpp_$nape_util_ZPP_$Flags.id_BodyType_STATIC = 1;
zpp_$nape_util_ZPP_$Flags.id_BodyType_DYNAMIC = 2;
zpp_$nape_util_ZPP_$Flags.id_BodyType_KINEMATIC = 3;
zpp_$nape_util_ZPP_$Flags.id_ListenerType_BODY = 0;
zpp_$nape_util_ZPP_$Flags.id_ListenerType_CONSTRAINT = 1;
zpp_$nape_util_ZPP_$Flags.id_PreFlag_ACCEPT = 1;
zpp_$nape_util_ZPP_$Flags.id_ListenerType_INTERACTION = 2;
zpp_$nape_util_ZPP_$Flags.id_ListenerType_PRE = 3;
zpp_$nape_util_ZPP_$Flags.id_CbEvent_BEGIN = 0;
zpp_$nape_util_ZPP_$Flags.id_CbEvent_ONGOING = 6;
zpp_$nape_util_ZPP_$Flags.id_InteractionType_COLLISION = 1;
zpp_$nape_util_ZPP_$Flags.id_CbEvent_END = 1;
zpp_$nape_util_ZPP_$Flags.id_InteractionType_SENSOR = 2;
zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE = 2;
zpp_$nape_util_ZPP_$Flags.id_InteractionType_FLUID = 4;
zpp_$nape_util_ZPP_$Flags.id_CbEvent_SLEEP = 3;
zpp_$nape_util_ZPP_$Flags.id_InteractionType_ANY = 7;
zpp_$nape_util_ZPP_$Flags.id_CbEvent_BREAK = 4;
zpp_$nape_util_ZPP_$Flags.id_CbEvent_PRE = 5;
zpp_$nape_util_ZPP_$Flags.id_ShapeType_CIRCLE = 0;
zpp_$nape_util_ZPP_$Flags.id_ShapeType_POLYGON = 1;
zpp_$nape_callbacks_ZPP_$InteractionListener.UCbSet = new zpp_$nape_util_ZNPList_$ZPP_$CbSet();
zpp_$nape_callbacks_ZPP_$InteractionListener.VCbSet = new zpp_$nape_util_ZNPList_$ZPP_$CbSet();
zpp_$nape_callbacks_ZPP_$InteractionListener.WCbSet = new zpp_$nape_util_ZNPList_$ZPP_$CbSet();
zpp_$nape_callbacks_ZPP_$InteractionListener.UCbType = new zpp_$nape_util_ZNPList_$ZPP_$CbType();
zpp_$nape_callbacks_ZPP_$InteractionListener.VCbType = new zpp_$nape_util_ZNPList_$ZPP_$CbType();
zpp_$nape_callbacks_ZPP_$InteractionListener.WCbType = new zpp_$nape_util_ZNPList_$ZPP_$CbType();
zpp_$nape_dynamics_ZPP_$Arbiter.internal = false;
zpp_$nape_dynamics_ZPP_$Arbiter.COL = 1;
zpp_$nape_dynamics_ZPP_$Arbiter.FLUID = 4;
zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR = 2;
zpp_$nape_dynamics_ZPP_$Contact.internal = false;
zpp_$nape_geom_ZPP_$Collide.flowpoly = new zpp_$nape_util_ZNPList_$ZPP_$Vec2();
zpp_$nape_geom_ZPP_$Collide.flowsegs = new zpp_$nape_util_ZNPList_$ZPP_$Vec2();
zpp_$nape_phys_ZPP_$Body.types = [null,nape_phys_BodyType.get_STATIC(),nape_phys_BodyType.get_DYNAMIC(),nape_phys_BodyType.get_KINEMATIC()];
zpp_$nape_phys_ZPP_$Material.WAKE = 1;
zpp_$nape_phys_ZPP_$Material.PROPS = 2;
zpp_$nape_phys_ZPP_$Material.ANGDRAG = 4;
zpp_$nape_phys_ZPP_$Material.ARBITERS = 8;
zpp_$nape_shape_ZPP_$Edge.internal = false;
zpp_$nape_space_ZPP_$AABBTree.tmpaabb = new zpp_$nape_geom_ZPP_$AABB();
zpp_$nape_util_ZPP_$ConstraintList.internal = false;
zpp_$nape_util_ZPP_$BodyList.internal = false;
zpp_$nape_util_ZPP_$InteractorList.internal = false;
zpp_$nape_util_ZPP_$CompoundList.internal = false;
zpp_$nape_util_ZPP_$ListenerList.internal = false;
zpp_$nape_util_ZPP_$CbTypeList.internal = false;
zpp_$nape_util_ZPP_$Vec2List.internal = false;
zpp_$nape_util_ZPP_$GeomPolyList.internal = false;
zpp_$nape_util_ZPP_$RayResultList.internal = false;
zpp_$nape_util_ZPP_$ConvexResultList.internal = false;
zpp_$nape_util_ZPP_$EdgeList.internal = false;
zpp_$nape_util_ZPP_$ShapeList.internal = false;
zpp_$nape_util_ZPP_$InteractionGroupList.internal = false;
zpp_$nape_util_ZPP_$ArbiterList.internal = false;
zpp_$nape_util_ZPP_$ContactList.internal = false;
tools_spark_Main.main();
})(typeof window != "undefined" ? window : exports);

//# sourceMappingURL=main-html.js.map