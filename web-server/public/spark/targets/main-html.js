/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function z(a,b){function d(){}d.prototype=a;var m=new d,c;for(c in b)m[c]=b[c];b.toString!==Object.prototype.toString&&(m.toString=b.toString);return m}function ak(a){return a instanceof Array?function(){return C.iter(a)}:"function"==typeof a.iterator?v(a,a.iterator):a.iterator}function v(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=rl++);var d;null==a.hx__closures__?a.hx__closures__={}:d=a.hx__closures__[b.__id__];null==d&&(d=function(){return d.method.apply(d.scope,
arguments)},d.scope=a,d.method=b,a.hx__closures__[b.__id__]=d);return d}var j={},g=function(){return A.__string_rec(this,"")},mb=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};j.EReg=mb;mb.__name__=!0;mb.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},replace:function(a,b){return a.replace(this.r,b)},__class__:mb};var C=function(){};j.HxOverrides=C;C.__name__=!0;C.cca=function(a,b){var d=a.charCodeAt(b);return d!=
d?void 0:d};C.substr=function(a,b,d){if(null!=b&&0!=b&&null!=d&&0>d)return"";null==d&&(d=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>d&&(d=a.length+d-b);return a.substr(b,d)};C.remove=function(a,b){var d=a.indexOf(b);if(-1==d)return!1;a.splice(d,1);return!0};C.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Yh=function(a,b){this.min=a;this.max=b};j.IntIterator=Yh;Yh.__name__=!0;Yh.prototype={__class__:Yh};var kf=
function(){};j.Lambda=kf;kf.__name__=!0;kf.array=function(a){for(var b=[],a=ak(a)();a.hasNext();){var d=a.next();b.push(d)}return b};kf.count=function(a,b){var d=0;if(null==b)for(var m=ak(a)();m.hasNext();)m.next(),d++;else for(m=ak(a)();m.hasNext();){var c=m.next();b(c)&&d++}return d};var Zh=function(){this.length=0};j.List=Zh;Zh.__name__=!0;Zh.prototype={add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},iterator:function(){return new $h(this.h)},__class__:Zh};var $h=
function(a){this.head=a;this.val=null};j["_List.ListIterator"]=$h;$h.__name__=!0;$h.prototype={hasNext:function(){return null!=this.head},next:function(){this.val=this.head[0];this.head=this.head[1];return this.val},__class__:$h};Math.__name__=!0;var ha=function(){};j.Reflect=ha;ha.__name__=!0;ha.field=function(a,b){try{return a[b]}catch(d){return d instanceof p&&(d=d.val),null}};ha.getProperty=function(a,b){var d;return null==a?null:a.__properties__&&(d=a.__properties__["get_"+b])?a[d]():a[b]};ha.callMethod=
function(a,b,d){return b.apply(a,d)};ha.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};ha.compare=function(a,b){return a==b?0:a>b?1:-1};ha.isEnumValue=function(a){return null!=a&&null!=a.__enum__};ha.makeVarArgs=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a(b)}};var r=function(){};j.Std=r;r.__name__=!0;r.is=function(a,b){return A.__instanceof(a,b)};r.instance=function(a,b){return a instanceof b?a:null};r.string=function(a){return A.__string_rec(a,
"")};r["int"]=function(a){return a|0};r.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==C.cca(a,1)||88==C.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};r.parseFloat=function(a){return parseFloat(a)};r.random=function(a){return 0>=a?0:Math.floor(Math.random()*a)};var yb=function(){this.b=""};j.StringBuf=yb;yb.__name__=!0;yb.prototype={add:function(a){this.b+=r.string(a)},addSub:function(a,b,d){this.b=null==d?this.b+C.substr(a,b,null):this.b+C.substr(a,b,d)},__class__:yb};var fa=function(){};
j.StringTools=fa;fa.__name__=!0;fa.htmlEscape=function(a,b){a=a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");return b?a.split('"').join("&quot;").split("'").join("&#039;"):a};fa.isSpace=function(a,b){var d=C.cca(a,b);return 8<d&&14>d||32==d};fa.ltrim=function(a){for(var b=a.length,d=0;d<b&&fa.isSpace(a,d);)d++;return 0<d?C.substr(a,d,b-d):a};fa.rtrim=function(a){for(var b=a.length,d=0;d<b&&fa.isSpace(a,b-d-1);)d++;return 0<d?C.substr(a,0,b-d):a};fa.trim=function(a){return fa.ltrim(fa.rtrim(a))};
fa.replace=function(a,b,d){return a.split(b).join(d)};fa.fastCodeAt=function(a,b){return a.charCodeAt(b)};var la=j.ValueType={__ename__:!0,__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};la.TNull=["TNull",0];la.TNull.toString=g;la.TNull.__enum__=la;la.TInt=["TInt",1];la.TInt.toString=g;la.TInt.__enum__=la;la.TFloat=["TFloat",2];la.TFloat.toString=g;la.TFloat.__enum__=la;la.TBool=["TBool",3];la.TBool.toString=g;la.TBool.__enum__=la;la.TObject=["TObject",
4];la.TObject.toString=g;la.TObject.__enum__=la;la.TFunction=["TFunction",5];la.TFunction.toString=g;la.TFunction.__enum__=la;la.TClass=function(a){a=["TClass",6,a];a.__enum__=la;a.toString=g;return a};la.TEnum=function(a){a=["TEnum",7,a];a.__enum__=la;a.toString=g;return a};la.TUnknown=["TUnknown",8];la.TUnknown.toString=g;la.TUnknown.__enum__=la;var Ua=function(){};j.Type=Ua;Ua.__name__=!0;Ua.resolveClass=function(a){a=j[a];return null==a||!a.__name__?null:a};Ua.resolveEnum=function(a){a=j[a];return null==
a||!a.__ename__?null:a};Ua.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw new p("Too many arguments");}};Ua.createEnum=function(a,
b,d){var m=ha.field(a,b);if(null==m)throw new p("No such constructor "+b);if(ha.isFunction(m)){if(null==d)throw new p("Constructor "+b+" need parameters");return ha.callMethod(a,m,d)}if(null!=d&&0!=d.length)throw new p("Constructor "+b+" does not need parameters");return m};Ua.enumEq=function(a,b){if(a==b)return!0;try{if(a[0]!=b[0])return!1;for(var d=2,m=a.length;d<m;){var c=d++;if(!Ua.enumEq(a[c],b[c]))return!1}var i=a.__enum__;if(i!=b.__enum__||null==i)return!1}catch(o){return o instanceof p&&(o=
o.val),!1}return!0};var q=function(a){this.nodeType=a;this.children=[];this.attributeMap=new E};j.Xml=q;q.__name__=!0;q.parse=function(a){return md.parse(a)};q.createElement=function(a){var b=new q(q.Element);if(b.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+b.nodeType);b.nodeName=a;return b};q.createPCData=function(a){var b=new q(q.PCData);if(b.nodeType==q.Document||b.nodeType==q.Element)throw new p("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};
q.createCData=function(a){var b=new q(q.CData);if(b.nodeType==q.Document||b.nodeType==q.Element)throw new p("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};q.createComment=function(a){var b=new q(q.Comment);if(b.nodeType==q.Document||b.nodeType==q.Element)throw new p("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};q.createDocType=function(a){var b=new q(q.DocType);if(b.nodeType==q.Document||b.nodeType==q.Element)throw new p("Bad node type, unexpected "+b.nodeType);
b.nodeValue=a;return b};q.createProcessingInstruction=function(a){var b=new q(q.ProcessingInstruction);if(b.nodeType==q.Document||b.nodeType==q.Element)throw new p("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};q.createDocument=function(){return new q(q.Document)};q.prototype={get_nodeName:function(){if(this.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+this.nodeType);return this.nodeName},set_nodeName:function(a){if(this.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+
this.nodeType);return this.nodeName=a},get_nodeValue:function(){if(this.nodeType==q.Document||this.nodeType==q.Element)throw new p("Bad node type, unexpected "+this.nodeType);return this.nodeValue},get:function(a){if(this.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+this.nodeType);return this.attributeMap.get(a)},set:function(a,b){if(this.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+this.nodeType);this.attributeMap.set(a,b)},remove:function(a){if(this.nodeType!=
q.Element)throw new p("Bad node type, expected Element but found "+this.nodeType);this.attributeMap.remove(a)},exists:function(a){if(this.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+this.nodeType);return this.attributeMap.exists(a)},attributes:function(){if(this.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+this.nodeType);return this.attributeMap.keys()},elements:function(){if(this.nodeType!=q.Document&&this.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+
this.nodeType);for(var a=[],b=0,d=this.children;b<d.length;){var m=d[b];++b;m.nodeType==q.Element&&a.push(m)}return C.iter(a)},elementsNamed:function(a){if(this.nodeType!=q.Document&&this.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+this.nodeType);for(var b=[],d=0,m=this.children;d<m.length;){var c=m[d];++d;var i;if(i=c.nodeType==q.Element){if(c.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+c.nodeType);i=c.nodeName==a}i&&b.push(c)}return C.iter(b)},
firstChild:function(){if(this.nodeType!=q.Document&&this.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+this.nodeType);return this.children[0]},firstElement:function(){if(this.nodeType!=q.Document&&this.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+this.nodeType);for(var a=0,b=this.children;a<b.length;){var d=b[a];++a;if(d.nodeType==q.Element)return d}return null},addChild:function(a){if(this.nodeType!=q.Document&&
this.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+this.nodeType);null!=a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this},removeChild:function(a){if(this.nodeType!=q.Document&&this.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+this.nodeType);return C.remove(this.children,a)?(a.parent=null,!0):!1},insertChild:function(a,b){if(this.nodeType!=q.Document&&this.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+
this.nodeType);null!=a.parent&&C.remove(a.parent.children,a);this.children.splice(b,0,a);a.parent=this},__class__:q,__properties__:{get_nodeValue:"get_nodeValue",set_nodeName:"set_nodeName",get_nodeName:"get_nodeName"}};var Kc=function(){};j["flambe.util.Disposable"]=Kc;Kc.__name__=!0;Kc.prototype={__class__:Kc};var ia=function(){this._flags=0;this.owner=this.next=null};j["flambe.Component"]=ia;ia.__name__=!0;ia.__interfaces__=[Kc];ia.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},
onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:ia,__properties__:{get_name:"get_name"}};var Kb=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};j["flambe.Entity"]=Kb;Kb.__name__=!0;Kb.__interfaces__=[Kc];Kb.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),d=this._compMap[b];null!=d&&this.remove(d);this._compMap[b]=a;b=null;for(d=
this.firstComponent;null!=d;)b=d,d=d.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,d=this.firstComponent;null!=d;){var m=d.next;if(d==a)return null==b?this.firstComponent=m:(b.owner=this,b.next=m),delete this._compMap[d.get_name()],0!=(d._flags&1)&&(d.onStop(),d._flags&=-2),d.onRemoved(),d.owner=null,d.next=null,!0;b=d;d=m}return!1},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=
this;if(b){for(var d=null,m=this.firstChild;null!=m;)d=m,m=m.next;null!=d?d.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=null,d=this.firstChild;null!=d;){var m=d.next;if(d==a){null==b?this.firstChild=m:b.next=m;d.parent=null;d.next=null;break}b=d;d=m}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();
this.disposeChildren()},__class__:Kb};var Kg=function(){};j["flambe.util.PackageLog"]=Kg;Kg.__name__=!0;var ai=function(){};j["flambe.platform.Platform"]=ai;ai.__name__=!0;ai.prototype={__class__:ai};var Xb=function(){};j["flambe.platform.html.HtmlPlatform"]=Xb;Xb.__name__=!0;Xb.__interfaces__=[ai];Xb.prototype={init:function(){var a=this;W.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(d){d instanceof p&&(d=d.val)}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor=
"transparent";this._stage=new we(b);this._pointer=new ua;this._mouse=new lf(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new ud;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var m=0,c=function(d){if(!(1E3>d.timeStamp-m)){var c=b.getBoundingClientRect(),f=a.getX(d,c),c=a.getY(d,c);switch(d.type){case "mousedown":d.target==b&&(d.preventDefault(),
a._mouse.submitDown(f,c,d.button),b.focus());break;case "mousemove":a._mouse.submitMove(f,c);break;case "mouseup":a._mouse.submitUp(f,c,d.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(f,c,"mousewheel"==d.type?d.wheelDelta/40:-d.detail)&&d.preventDefault()}}};window.addEventListener("mousedown",c,!1);window.addEventListener("mousemove",c,!1);window.addEventListener("mouseup",c,!1);b.addEventListener("mousewheel",c,!1);b.addEventListener("DOMMouseScroll",c,!1);b.addEventListener("contextmenu",
function(a){a.preventDefault()},!1);var i="undefined"!=typeof window.ontouchstart,c="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(i||c){var o=new Lg(this._pointer,i?4:window.navigator.msMaxTouchPoints);this._touch=o;c=function(b){var d;d=i?b.changedTouches:[b];var c=b.target.getBoundingClientRect();m=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();W.SHOULD_HIDE_MOBILE_BROWSER&&W.hideMobileBrowser();for(b=0;b<d.length;){var f=
d[b];++b;var h=a.getX(f,c),bi=a.getY(f,c);o.submitDown((i?f.identifier:f.pointerId)|0,h,bi)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<d.length;)f=d[b],++b,h=a.getX(f,c),bi=a.getY(f,c),o.submitMove((i?f.identifier:f.pointerId)|0,h,bi);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<d.length;)f=d[b],++b,h=a.getX(f,c),bi=a.getY(f,c),o.submitUp((i?f.identifier:f.pointerId)|0,h,bi)}};i?(b.addEventListener("touchstart",
c,!1),b.addEventListener("touchmove",c,!1),b.addEventListener("touchend",c,!1),b.addEventListener("touchcancel",c,!1)):(b.addEventListener("MSPointerDown",c,!1),b.addEventListener("MSPointerMove",c,!1),b.addEventListener("MSPointerUp",c,!1))}else this._touch=new nf;var h=window.onerror;window.onerror=function(a,b,d){S.uncaughtError.emit(a);return null!=h?h(a,b,d):!1};var Mg=W.loadExtension("hidden",window.document);null!=Mg.value?(c=function(){S.hidden.set__(ha.field(window.document,Mg.field))},c(null),
window.document.addEventListener(Mg.prefix+"visibilitychange",c,!1)):(c=function(a){S.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",c,!1),window.addEventListener("pagehide",c,!1));S.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var e=W.loadExtension("requestAnimationFrame").value;if(null!=e){var g=window.performance,j=null!=g&&W.polyfill("now",g);j?this._lastUpdate=g.now():ea.logger.warn("No monotonic timer support, falling back to the system date",
null);var k=null,k=function(d){a.update(j?g.now():d);e(k,b)};e(k,b)}else ea.logger.warn("No requestAnimationFrame support, falling back to setInterval",null),window.setInterval(function(){a.update(Date.now())},16);ea.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new oa(this,a)).promise},getStage:function(){return this._stage},createLogHandler:function(a){return xe.isSupported()?new xe(a):null},update:function(a){var b=(a-this._lastUpdate)/
1E3;this._lastUpdate=a;S.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),Lc.onRender()))},getPointer:function(){return this._pointer},getMouse:function(){return this._mouse},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new ab;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",
b,!1)}return this._keyboard},getExternal:function(){null==this._external&&(this._external=new Ng);return this._external},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){try{var b=bk.getContextWebGL(a,{depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=b)if(W.detectSlowDriver(b))ea.logger.warn("Detected a slow WebGL driver, falling back to canvas",
null);else return new of(this._stage,b)}catch(d){d instanceof p&&(d=d.val)}return new he(a)},__class__:Xb};var kb=function(a,b){this._value=a;this._changed=null!=b?new rd(b):null};j["flambe.util.Value"]=kb;kb.__name__=!0;kb.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new rd);return this._changed},
__class__:kb,__properties__:{get_changed:"get_changed",set__:"set__"}};var ye=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};j["flambe.util.SignalConnection"]=ye;ye.__name__=!0;ye.__interfaces__=[Kc];ye.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:ye};var Fa=function(a){this._head=null!=a?new ye(this,a):null;this._deferredTasks=null};j["flambe.util.SignalBase"]=
Fa;Fa.__name__=!0;Fa.prototype={hasListeners:function(){return null!=this._head},connectImpl:function(a,b){var d=this,m=new ye(this,a);this._head==Fa.DISPATCHING_SENTINEL?this.defer(function(){d.listAdd(m,b)}):this.listAdd(m,b);return m},disconnect:function(a){var b=this;this._head==Fa.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,d=this._deferredTasks;null!=d;)b=d,d=d.next;a=new ci(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=
this._head;this._head=Fa.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var d=null,m=this._head;null!=m;)d=m,m=m._next;null!=d?d._next=a:this._head=a}},listRemove:function(a){for(var b=null,d=this._head;null!=d;){if(d==a){a=d._next;null==b?this._head=a:b._next=a;break}b=d;d=d._next}},__class__:Fa};var rd=function(a){Fa.call(this,a)};j["flambe.util.Signal2"]=
rd;rd.__name__=!0;rd.__super__=Fa;rd.prototype=z(Fa.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var d=this;this._head==Fa.DISPATCHING_SENTINEL?this.defer(function(){d.emitImpl(a,b)}):this.emitImpl(a,b)},emitImpl:function(a,b){for(var d=this.willEmit(),m=d;null!=m;)m._listener(a,b),m.stayInList||m.dispose(),m=m._next;this.didEmit(d)},__class__:rd});var ma=function(a){Fa.call(this,a)};j["flambe.util.Signal1"]=ma;ma.__name__=!0;ma.__super__=Fa;ma.prototype=
z(Fa.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==Fa.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},emitImpl:function(a){for(var b=this.willEmit(),d=b;null!=d;)d._listener(a),d.stayInList||d.dispose(),d=d._next;this.didEmit(b)},__class__:ma});var bb=function(a,b){this._behavior=null;kb.call(this,a,b)};j["flambe.animation.AnimatedFloat"]=bb;bb.__name__=!0;bb.__super__=kb;bb.prototype=z(kb.prototype,
{set__:function(a){this._behavior=null;return kb.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(kb.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},__class__:bb});var S=function(){};j["flambe.System"]=S;S.__name__=!0;S.init=function(){S._calledInit||(S._platform.init(),S._calledInit=!0)};var Og=function(a){this._handler=a};j["flambe.util.Logger"]=Og;Og.__name__=!0;Og.prototype={info:function(a,b){this.log(eb.Info,a,b)},
warn:function(a,b){this.log(eb.Warn,a,b)},error:function(a,b){this.log(eb.Error,a,b)},log:function(a,b,d){null!=this._handler&&(null==b&&(b=""),null!=d&&(b=Yb.withFields(b,d)),this._handler.log(a,b))},__class__:Og};var ea=function(){};j["flambe.Log"]=ea;ea.__name__=!0;ea.info=function(a,b){ea.logger.info(a,b)};ea.__super__=Kg;ea.prototype=z(Kg.prototype,{__class__:ea});var di=function(){this._realDt=0};j["flambe.SpeedAdjuster"]=di;di.__name__=!0;di.__super__=ia;di.prototype=z(ia.prototype,{get_name:function(){return"SpeedAdjuster_4"},
onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:di});var ck=function(){};j["flambe.animation.Behavior"]=ck;ck.__name__=!0;ck.prototype={__class__:ck};var ie=function(){};j["flambe.asset.Asset"]=ie;ie.__name__=!0;ie.__interfaces__=[Kc];ie.prototype={__class__:ie};var x=j["flambe.asset.AssetFormat"]={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",")};x.WEBP=["WEBP",0];x.WEBP.toString=g;x.WEBP.__enum__=
x;x.JXR=["JXR",1];x.JXR.toString=g;x.JXR.__enum__=x;x.PNG=["PNG",2];x.PNG.toString=g;x.PNG.__enum__=x;x.JPG=["JPG",3];x.JPG.toString=g;x.JPG.__enum__=x;x.GIF=["GIF",4];x.GIF.toString=g;x.GIF.__enum__=x;x.DDS=["DDS",5];x.DDS.toString=g;x.DDS.__enum__=x;x.PVR=["PVR",6];x.PVR.toString=g;x.PVR.__enum__=x;x.PKM=["PKM",7];x.PKM.toString=g;x.PKM.__enum__=x;x.MP3=["MP3",8];x.MP3.toString=g;x.MP3.__enum__=x;x.M4A=["M4A",9];x.M4A.toString=g;x.M4A.__enum__=x;x.OPUS=["OPUS",10];x.OPUS.toString=g;x.OPUS.__enum__=
x;x.OGG=["OGG",11];x.OGG.toString=g;x.OGG.__enum__=x;x.WAV=["WAV",12];x.WAV.toString=g;x.WAV.__enum__=x;x.Data=["Data",13];x.Data.toString=g;x.Data.__enum__=x;var ei=function(a,b,d,m){this.name=a;this.url=b;this.format=d;this.bytes=m};j["flambe.asset.AssetEntry"]=ei;ei.__name__=!0;ei.prototype={__class__:ei};var pf=function(){};j["flambe.asset.AssetPack"]=pf;pf.__name__=!0;pf.__interfaces__=[Kc];pf.prototype={__class__:pf};var Pg=function(){};j["flambe.asset.File"]=Pg;Pg.__name__=!0;Pg.__interfaces__=
[ie];Pg.prototype={__class__:Pg};var nd=function(){this._localBase=this._remoteBase=null;this._entries=[]};j["flambe.asset.Manifest"]=nd;nd.__name__=!0;nd.inferFormat=function(a){var b=Yb.getUrlExtension(a);if(null!=b)switch(b.toLowerCase()){case "gif":return x.GIF;case "jpg":case "jpeg":return x.JPG;case "jxr":case "wdp":return x.JXR;case "png":return x.PNG;case "webp":return x.WEBP;case "dds":return x.DDS;case "pvr":return x.PVR;case "pkm":return x.PKM;case "m4a":return x.M4A;case "mp3":return x.MP3;
case "ogg":return x.OGG;case "opus":return x.OPUS;case "wav":return x.WAV}else ea.logger.warn("No file extension for asset, it will be loaded as data",["url",a]);return x.Data};nd.prototype={add:function(a,b,d,m){null==d&&(d=0);null==m&&(m=nd.inferFormat(b));a=new ei(a,b,m,d);this._entries.push(a);return a},iterator:function(){return C.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&nd._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?
Yb.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},get_remoteBase:function(){return this._remoteBase},__class__:nd,__properties__:{get_remoteBase:"get_remoteBase",get_localBase:"get_localBase"}};var na=j["flambe.display.BlendMode"]={__ename__:!0,__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(",")};na.Normal=["Normal",0];na.Normal.toString=g;na.Normal.__enum__=na;na.Add=["Add",1];na.Add.toString=g;na.Add.__enum__=na;na.Multiply=["Multiply",2];na.Multiply.toString=
g;na.Multiply.__enum__=na;na.Screen=["Screen",3];na.Screen.toString=g;na.Screen.__enum__=na;na.Mask=["Mask",4];na.Mask.toString=g;na.Mask.__enum__=na;na.Copy=["Copy",5];na.Copy.toString=g;na.Copy.__enum__=na;var Mc=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};j["flambe.math.Point"]=Mc;Mc.__name__=!0;Mc.prototype={__class__:Mc};var P=function(){this._sinCache=this._cosCache=0;this.blendMode=this.scissor=null;var a=this;ia.call(this);this._flags|=182;this._localMatrix=new Lb;var b=
function(){a._flags|=24};this.x=new bb(0,b);this.y=new bb(0,b);this.rotation=new bb(0,function(){a._flags|=152});this.scaleX=new bb(1,b);this.scaleY=new bb(1,b);this.anchorX=new bb(0,b);this.anchorY=new bb(0,b);this.alpha=new bb(1)};j["flambe.display.Sprite"]=P;P.__name__=!0;P.hitTest=function(a,b,d){var m=a._compMap.Sprite_3;if(null!=m){if(6!=(m._flags&6))return null;m.getLocalMatrix().inverseTransform(b,d,P._scratchPoint)&&(b=P._scratchPoint.x,d=P._scratchPoint.y);var c=m.scissor;if(null!=c&&!c.contains(b,
d))return null}a=P.hitTestBackwards(a.firstChild,b,d);return null!=a?a:null!=m&&m.containsLocal(b,d)?m:null};P.getBounds=function(a,b){null==b&&(b=new cd);b.set(1.79769313486231E308,1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308);P.getBoundsImpl(a,null,b);b.width-=b.x;b.height-=b.y;return b};P.render=function(a,b){var d=a._compMap.Sprite_3;if(null!=d){var m=d.alpha._value;if(0==(d._flags&2)||0>=m)return;b.save();1>m&&b.multiplyAlpha(m);null!=d.blendMode&&b.setBlendMode(d.blendMode);
var m=d.getLocalMatrix(),c=m.m02,i=m.m12;0!=(d._flags&32)&&(c=Math.round(c),i=Math.round(i));b.transform(m.m00,m.m10,m.m01,m.m11,c,i);m=d.scissor;null!=m&&b.applyScissor(m.x,m.y,m.width,m.height);d.draw(b)}m=a._compMap.Director_6;if(null!=m){m=m.occludedScenes;for(c=0;c<m.length;)i=m[c],++c,P.render(i,b)}for(m=a.firstChild;null!=m;)c=m.next,P.render(m,b),m=c;null!=d&&b.restore()};P.hitTestBackwards=function(a,b,d){if(null!=a){var m=P.hitTestBackwards(a.next,b,d);return null!=m?m:P.hitTest(a,b,d)}return null};
P.getBoundsImpl=function(a,b,d){var m=a._compMap.Sprite_3;if(null!=m){var b=null!=b?Lb.multiply(b,m.getLocalMatrix()):m.getLocalMatrix(),c=m.getNaturalWidth(),m=m.getNaturalHeight();0<c&&0<m&&(P.extendRect(b,0,0,d),P.extendRect(b,c,0,d),P.extendRect(b,c,m,d),P.extendRect(b,0,m,d))}c=a._compMap.Director_6;if(null!=c)for(var c=c.occludedScenes,m=0,i=c.length;m<i;)P.getBoundsImpl(c[m],b,d),++m;for(a=a.firstChild;null!=a;)c=a.next,P.getBoundsImpl(a,b,d),a=c};P.extendRect=function(a,b,d,m){a=a.transform(b,
d,P._scratchPoint);b=a.x;d=a.y;b<m.x&&(m.x=b);d<m.y&&(m.y=d);b>m.width&&(m.width=b);d>m.height&&(m.height=d)};P.__super__=ia;P.prototype=z(ia.prototype,{get_name:function(){return"Sprite_3"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){if(0!=(this._flags&8)){this._flags&=-9;if(0!=(this._flags&128)){this._flags&=-129;var a=3.141592653589793*this.rotation._value/
180;this._sinCache=Math.sin(a);this._cosCache=Math.cos(a)}var a=this.scaleX._value,b=this.scaleY._value;this._localMatrix.set(this._cosCache*a,this._sinCache*a,-this._sinCache*b,this._cosCache*b,this.x._value,this.y._value);this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value)}return this._localMatrix},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setXY:function(a,b){this.x.set__(a);this.y.set__(b);
return this},setAlpha:function(a){this.alpha.set__(a);return this},setScaleXY:function(a,b){this.scaleX.set__(a);this.scaleY.set__(b);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},
draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_3;if(null!=b)return b;a=a.parent}return null},get_pointerDown:function(){null==this._pointerDown&&(this._pointerDown=new ma);return this._pointerDown},get_pointerMove:function(){null==this._pointerMove&&(this._pointerMove=new ma);return this._pointerMove},get_pointerIn:function(){null==this._pointerIn&&(this._pointerIn=new ma);return this._pointerIn},get_pointerOut:function(){null==
this._pointerOut&&(this._pointerOut=new ma);return this._pointerOut},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=S._platform.getPointer().move.connect(function(b){for(var d=b.hit;null!=d;){if(d==a)return;d=d.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;null!=a._hoverConnection&&(a._hoverConnection.dispose(),a._hoverConnection=null)}))},set_visible:function(a){this._flags=fi.set(this._flags,2,a);return a},set_pointerEnabled:function(a){this._flags=
fi.set(this._flags,4,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),
this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:P,__properties__:z(ia.prototype.__properties__,{get_pointerOut:"get_pointerOut",get_pointerIn:"get_pointerIn",get_pointerMove:"get_pointerMove",get_pointerDown:"get_pointerDown",set_pointerEnabled:"set_pointerEnabled",set_visible:"set_visible"})});var od=function(a,b,d){P.call(this);this.color=a;this.width=new bb(b);this.height=new bb(d)};
j["flambe.display.FillSprite"]=od;od.__name__=!0;od.__super__=P;od.prototype=z(P.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},setSize:function(a,b){this.width.set__(a);this.height.set__(b);return this},onUpdate:function(a){P.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:od});var gi=function(){};j["flambe.display.Graphics"]=
gi;gi.__name__=!0;gi.prototype={__class__:gi};var je=function(a){P.call(this);this.texture=a};j["flambe.display.ImageSprite"]=je;je.__name__=!0;je.__super__=P;je.prototype=z(P.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:je});var Td=j["flambe.display.Orientation"]={__ename__:!0,__constructs__:["Portrait",
"Landscape"]};Td.Portrait=["Portrait",0];Td.Portrait.toString=g;Td.Portrait.__enum__=Td;Td.Landscape=["Landscape",1];Td.Landscape.toString=g;Td.Landscape.__enum__=Td;var qf=function(){};j["flambe.display.Texture"]=qf;qf.__name__=!0;qf.__interfaces__=[ie];qf.prototype={__class__:qf,__properties__:{get_height:"get_height",get_width:"get_width"}};var dk=function(){};j["flambe.display.SubTexture"]=dk;dk.__name__=!0;dk.__interfaces__=[qf];var e=j["flambe.input.Key"]={__ename__:!0,__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
e.A=["A",0];e.A.toString=g;e.A.__enum__=e;e.B=["B",1];e.B.toString=g;e.B.__enum__=e;e.C=["C",2];e.C.toString=g;e.C.__enum__=e;e.D=["D",3];e.D.toString=g;e.D.__enum__=e;e.E=["E",4];e.E.toString=g;e.E.__enum__=e;e.F=["F",5];e.F.toString=g;e.F.__enum__=e;e.G=["G",6];e.G.toString=g;e.G.__enum__=e;e.H=["H",7];e.H.toString=g;e.H.__enum__=e;e.I=["I",8];e.I.toString=g;e.I.__enum__=e;e.J=["J",9];e.J.toString=g;e.J.__enum__=e;e.K=["K",10];e.K.toString=g;e.K.__enum__=e;e.L=["L",11];e.L.toString=g;e.L.__enum__=
e;e.M=["M",12];e.M.toString=g;e.M.__enum__=e;e.N=["N",13];e.N.toString=g;e.N.__enum__=e;e.O=["O",14];e.O.toString=g;e.O.__enum__=e;e.P=["P",15];e.P.toString=g;e.P.__enum__=e;e.Q=["Q",16];e.Q.toString=g;e.Q.__enum__=e;e.R=["R",17];e.R.toString=g;e.R.__enum__=e;e.S=["S",18];e.S.toString=g;e.S.__enum__=e;e.T=["T",19];e.T.toString=g;e.T.__enum__=e;e.U=["U",20];e.U.toString=g;e.U.__enum__=e;e.V=["V",21];e.V.toString=g;e.V.__enum__=e;e.W=["W",22];e.W.toString=g;e.W.__enum__=e;e.X=["X",23];e.X.toString=
g;e.X.__enum__=e;e.Y=["Y",24];e.Y.toString=g;e.Y.__enum__=e;e.Z=["Z",25];e.Z.toString=g;e.Z.__enum__=e;e.Number0=["Number0",26];e.Number0.toString=g;e.Number0.__enum__=e;e.Number1=["Number1",27];e.Number1.toString=g;e.Number1.__enum__=e;e.Number2=["Number2",28];e.Number2.toString=g;e.Number2.__enum__=e;e.Number3=["Number3",29];e.Number3.toString=g;e.Number3.__enum__=e;e.Number4=["Number4",30];e.Number4.toString=g;e.Number4.__enum__=e;e.Number5=["Number5",31];e.Number5.toString=g;e.Number5.__enum__=
e;e.Number6=["Number6",32];e.Number6.toString=g;e.Number6.__enum__=e;e.Number7=["Number7",33];e.Number7.toString=g;e.Number7.__enum__=e;e.Number8=["Number8",34];e.Number8.toString=g;e.Number8.__enum__=e;e.Number9=["Number9",35];e.Number9.toString=g;e.Number9.__enum__=e;e.Numpad0=["Numpad0",36];e.Numpad0.toString=g;e.Numpad0.__enum__=e;e.Numpad1=["Numpad1",37];e.Numpad1.toString=g;e.Numpad1.__enum__=e;e.Numpad2=["Numpad2",38];e.Numpad2.toString=g;e.Numpad2.__enum__=e;e.Numpad3=["Numpad3",39];e.Numpad3.toString=
g;e.Numpad3.__enum__=e;e.Numpad4=["Numpad4",40];e.Numpad4.toString=g;e.Numpad4.__enum__=e;e.Numpad5=["Numpad5",41];e.Numpad5.toString=g;e.Numpad5.__enum__=e;e.Numpad6=["Numpad6",42];e.Numpad6.toString=g;e.Numpad6.__enum__=e;e.Numpad7=["Numpad7",43];e.Numpad7.toString=g;e.Numpad7.__enum__=e;e.Numpad8=["Numpad8",44];e.Numpad8.toString=g;e.Numpad8.__enum__=e;e.Numpad9=["Numpad9",45];e.Numpad9.toString=g;e.Numpad9.__enum__=e;e.NumpadAdd=["NumpadAdd",46];e.NumpadAdd.toString=g;e.NumpadAdd.__enum__=e;e.NumpadDecimal=
["NumpadDecimal",47];e.NumpadDecimal.toString=g;e.NumpadDecimal.__enum__=e;e.NumpadDivide=["NumpadDivide",48];e.NumpadDivide.toString=g;e.NumpadDivide.__enum__=e;e.NumpadEnter=["NumpadEnter",49];e.NumpadEnter.toString=g;e.NumpadEnter.__enum__=e;e.NumpadMultiply=["NumpadMultiply",50];e.NumpadMultiply.toString=g;e.NumpadMultiply.__enum__=e;e.NumpadSubtract=["NumpadSubtract",51];e.NumpadSubtract.toString=g;e.NumpadSubtract.__enum__=e;e.F1=["F1",52];e.F1.toString=g;e.F1.__enum__=e;e.F2=["F2",53];e.F2.toString=
g;e.F2.__enum__=e;e.F3=["F3",54];e.F3.toString=g;e.F3.__enum__=e;e.F4=["F4",55];e.F4.toString=g;e.F4.__enum__=e;e.F5=["F5",56];e.F5.toString=g;e.F5.__enum__=e;e.F6=["F6",57];e.F6.toString=g;e.F6.__enum__=e;e.F7=["F7",58];e.F7.toString=g;e.F7.__enum__=e;e.F8=["F8",59];e.F8.toString=g;e.F8.__enum__=e;e.F9=["F9",60];e.F9.toString=g;e.F9.__enum__=e;e.F10=["F10",61];e.F10.toString=g;e.F10.__enum__=e;e.F11=["F11",62];e.F11.toString=g;e.F11.__enum__=e;e.F12=["F12",63];e.F12.toString=g;e.F12.__enum__=e;e.F13=
["F13",64];e.F13.toString=g;e.F13.__enum__=e;e.F14=["F14",65];e.F14.toString=g;e.F14.__enum__=e;e.F15=["F15",66];e.F15.toString=g;e.F15.__enum__=e;e.Left=["Left",67];e.Left.toString=g;e.Left.__enum__=e;e.Up=["Up",68];e.Up.toString=g;e.Up.__enum__=e;e.Right=["Right",69];e.Right.toString=g;e.Right.__enum__=e;e.Down=["Down",70];e.Down.toString=g;e.Down.__enum__=e;e.Alt=["Alt",71];e.Alt.toString=g;e.Alt.__enum__=e;e.Backquote=["Backquote",72];e.Backquote.toString=g;e.Backquote.__enum__=e;e.Backslash=
["Backslash",73];e.Backslash.toString=g;e.Backslash.__enum__=e;e.Backspace=["Backspace",74];e.Backspace.toString=g;e.Backspace.__enum__=e;e.CapsLock=["CapsLock",75];e.CapsLock.toString=g;e.CapsLock.__enum__=e;e.Comma=["Comma",76];e.Comma.toString=g;e.Comma.__enum__=e;e.Command=["Command",77];e.Command.toString=g;e.Command.__enum__=e;e.Control=["Control",78];e.Control.toString=g;e.Control.__enum__=e;e.Delete=["Delete",79];e.Delete.toString=g;e.Delete.__enum__=e;e.End=["End",80];e.End.toString=g;e.End.__enum__=
e;e.Enter=["Enter",81];e.Enter.toString=g;e.Enter.__enum__=e;e.Equals=["Equals",82];e.Equals.toString=g;e.Equals.__enum__=e;e.Escape=["Escape",83];e.Escape.toString=g;e.Escape.__enum__=e;e.Home=["Home",84];e.Home.toString=g;e.Home.__enum__=e;e.Insert=["Insert",85];e.Insert.toString=g;e.Insert.__enum__=e;e.LeftBracket=["LeftBracket",86];e.LeftBracket.toString=g;e.LeftBracket.__enum__=e;e.Minus=["Minus",87];e.Minus.toString=g;e.Minus.__enum__=e;e.PageDown=["PageDown",88];e.PageDown.toString=g;e.PageDown.__enum__=
e;e.PageUp=["PageUp",89];e.PageUp.toString=g;e.PageUp.__enum__=e;e.Period=["Period",90];e.Period.toString=g;e.Period.__enum__=e;e.Quote=["Quote",91];e.Quote.toString=g;e.Quote.__enum__=e;e.RightBracket=["RightBracket",92];e.RightBracket.toString=g;e.RightBracket.__enum__=e;e.Semicolon=["Semicolon",93];e.Semicolon.toString=g;e.Semicolon.__enum__=e;e.Shift=["Shift",94];e.Shift.toString=g;e.Shift.__enum__=e;e.Slash=["Slash",95];e.Slash.toString=g;e.Slash.__enum__=e;e.Space=["Space",96];e.Space.toString=
g;e.Space.__enum__=e;e.Tab=["Tab",97];e.Tab.toString=g;e.Tab.__enum__=e;e.Menu=["Menu",98];e.Menu.toString=g;e.Menu.__enum__=e;e.Search=["Search",99];e.Search.toString=g;e.Search.__enum__=e;e.Unknown=function(a){a=["Unknown",100,a];a.__enum__=e;a.toString=g;return a};var hi=function(){this.init(0,null)};j["flambe.input.KeyboardEvent"]=hi;hi.__name__=!0;hi.prototype={init:function(a,b){this.id=a;this.key=b},__class__:hi};var Ga=j["flambe.input.MouseButton"]={__ename__:!0,__constructs__:["Left","Middle",
"Right","Unknown"]};Ga.Left=["Left",0];Ga.Left.toString=g;Ga.Left.__enum__=Ga;Ga.Middle=["Middle",1];Ga.Middle.toString=g;Ga.Middle.__enum__=Ga;Ga.Right=["Right",2];Ga.Right.toString=g;Ga.Right.__enum__=Ga;Ga.Unknown=function(a){a=["Unknown",3,a];a.__enum__=Ga;a.toString=g;return a};var pb=j["flambe.input.MouseCursor"]={__ename__:!0,__constructs__:["Default","Button","None"]};pb.Default=["Default",0];pb.Default.toString=g;pb.Default.__enum__=pb;pb.Button=["Button",1];pb.Button.toString=g;pb.Button.__enum__=
pb;pb.None=["None",2];pb.None.toString=g;pb.None.__enum__=pb;var ii=function(){this.init(0,0,0,null)};j["flambe.input.MouseEvent"]=ii;ii.__name__=!0;ii.prototype={init:function(a,b,d,m){this.id=a;this.viewX=b;this.viewY=d;this.button=m},__class__:ii};var Qg=j["flambe.input.EventSource"]={__ename__:!0,__constructs__:["Mouse","Touch"]};Qg.Mouse=function(a){a=["Mouse",0,a];a.__enum__=Qg;a.toString=g;return a};Qg.Touch=function(a){a=["Touch",1,a];a.__enum__=Qg;a.toString=g;return a};var ji=function(){this.init(0,
0,0,null,null)};j["flambe.input.PointerEvent"]=ji;ji.__name__=!0;ji.prototype={init:function(a,b,d,m,c){this.id=a;this.viewX=b;this.viewY=d;this.hit=m;this.source=c;this._stopped=!1},__class__:ji};var ki=function(a){this.id=a;this._source=Qg.Touch(this)};j["flambe.input.TouchPoint"]=ki;ki.__name__=!0;ki.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:ki};var Va=function(){};j["flambe.math.FMath"]=Va;Va.__name__=!0;Va.toRadians=function(a){return 3.141592653589793*a/180};Va.max=
function(a,b){return a>b?a:b};Va.min=function(a,b){return a<b?a:b};var Lb=function(){this.identity()};j["flambe.math.Matrix"]=Lb;Lb.__name__=!0;Lb.multiply=function(a,b,d){null==d&&(d=new Lb);var m=a.m00*b.m00+a.m01*b.m10,c=a.m00*b.m01+a.m01*b.m11,i=a.m00*b.m02+a.m01*b.m12+a.m02;d.m00=m;d.m01=c;d.m02=i;m=a.m10*b.m00+a.m11*b.m10;c=a.m10*b.m01+a.m11*b.m11;i=a.m10*b.m02+a.m11*b.m12+a.m12;d.m10=m;d.m11=c;d.m12=i;return d};Lb.prototype={set:function(a,b,d,m,c,i){this.m00=a;this.m01=d;this.m02=c;this.m10=
b;this.m11=m;this.m12=i},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,d,m,c){var i=Math.sin(c),c=Math.cos(c);this.set(c*d,i*d,-i*m,c*m,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transform:function(a,b,d){null==d&&(d=new Mc);
d.x=a*this.m00+b*this.m01+this.m02;d.y=a*this.m10+b*this.m11+this.m12;return d},transformArray:function(a,b,d){for(var m=0;m<b;){var c=a[m],i=a[m+1];d[m++]=c*this.m00+i*this.m01+this.m02;d[m++]=c*this.m10+i*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,d){var m=this.determinant();if(0==m)return!1;a-=this.m02;b-=this.m12;d.x=(a*this.m11-b*this.m01)/m;d.y=(b*this.m00-a*this.m10)/m;return!0},clone:function(a){null==a&&(a=new Lb);
a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:Lb};var cd=function(a,b,d,m){null==m&&(m=0);null==d&&(d=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,d,m)};j["flambe.math.Rectangle"]=cd;cd.__name__=!0;cd.prototype={set:function(a,b,d,m){this.x=a;this.y=b;this.width=d;this.height=m},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<
b||b<this.height)return!1;return!0},clone:function(a){null==a&&(a=new cd);a.set(this.x,this.y,this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},__class__:cd};var Oa=function(){this._disposed=!1};j["flambe.platform.BasicAsset"]=Oa;Oa.__name__=!0;Oa.__interfaces__=[ie];Oa.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:Oa};var pd=function(a,b){var d=
this;this.manifest=b;this._platform=a;this.promise=new rf;this._bytesLoaded=new E;this._pack=new Rg(b,this);var m=kf.array(b);if(0==m.length)this.handleSuccess();else{for(var c=new E,i=0;i<m.length;){var o=m[i];++i;var h=c.get(o.name);null==h&&(h=[],c.set(o.name,h));h.push(o)}this._assetsRemaining=kf.count(c);for(m=new sf(c,c.arrayKeys());m.hasNext();)c=[m.next()],this.pickBestEntry(c[0],function(a){return function(m){if(null!=m){var c=b.getFullURL(m);try{d.loadEntry(c,m)}catch(f){f instanceof p&&
(f=f.val),d.handleError(m,"Unexpected error: "+r.string(f))}c=d.promise;c.set_total(c._total+m.bytes)}else m=a[0][0],pd.isAudio(m.format)?(ea.logger.warn("Could not find a supported audio format to load",["name",m.name]),d.handleLoad(m,zb.getInstance())):d.handleError(m,"Could not find a supported format to load")}}(c))}};j["flambe.platform.BasicAssetPackLoader"]=pd;pd.__name__=!0;pd.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};pd.prototype={onDisposed:function(){},
pickBestEntry:function(a,b){this.getAssetFormats(function(d){for(var m=0;m<d.length;){var c=d[m];++m;for(var i=0;i<a.length;){var o=a[i];++i;if(o.format==c){b(o);return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var d;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:d=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:d=this._pack.sounds;break;case 13:d=
this._pack.files}d.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var d=0,m=this._bytesLoaded.iterator();m.hasNext();)var c=m.next(),d=d+c;this.promise.set_progress(d)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){ea.logger.warn("Error loading asset pack",["error",b,"url",a.url]);this.promise.error.emit(Yb.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,
"Failed to create texture. Is the GPU context unavailable?")},__class__:pd};var Rg=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new E;this.sounds=new E;this.files=new E};j["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=Rg;Rg.__name__=!0;Rg.__interfaces__=[pf];Rg.prototype={getTexture:function(a,b){null==b&&(b=!0);var d=this.textures.get(a);if(null==d&&b)throw new p(Yb.withFields("Missing texture",["name",a]));return d},getSound:function(a,b){null==b&&(b=!0);
var d=this.sounds.get(a);if(null==d&&b)throw new p(Yb.withFields("Missing sound",["name",a]));return d},getFile:function(a,b){null==b&&(b=!0);var d=this.files.get(a);if(null==d&&b)throw new p(Yb.withFields("Missing file",["name",a]));return d},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();
this.files=null;this.loader.onDisposed()}},__class__:Rg};var ze=function(a){this._disposed=!1;this._content=a};j["flambe.platform.BasicFile"]=ze;ze.__name__=!0;ze.__interfaces__=[Pg];ze.__super__=Oa;ze.prototype=z(Oa.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:ze});var li=function(){};j["flambe.subsystem.KeyboardSystem"]=li;li.__name__=!0;li.prototype={__class__:li};var ab=function(){this.down=new ma;this.up=new ma;this.backButton=new Nc;
this._keyStates=new dd};j["flambe.platform.BasicKeyboard"]=ab;ab.__name__=!0;ab.__interfaces__=[li];ab.prototype={isDown:function(a){return this.isCodeDown(tf.toKeyCode(a))},isCodeDown:function(a){return this._keyStates.h.hasOwnProperty(a)},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.h.hasOwnProperty(a)||(this._keyStates.h[a]=!0,ab._sharedEvent.init(ab._sharedEvent.id+1,tf.toKey(a)),this.down.emit(ab._sharedEvent));return!0},
submitUp:function(a){this._keyStates.h.hasOwnProperty(a)&&(this._keyStates.remove(a),ab._sharedEvent.init(ab._sharedEvent.id+1,tf.toKey(a)),this.up.emit(ab._sharedEvent))},__class__:ab};var mi=function(){};j["flambe.subsystem.MouseSystem"]=mi;mi.__name__=!0;mi.prototype={__class__:mi};var qb=function(a){this._pointer=a;this._source=Qg.Mouse(qb._sharedEvent);this.down=new ma;this.move=new ma;this.up=new ma;this.scroll=new ma;this._y=this._x=0;this._cursor=pb.Default;this._buttonStates=new dd};j["flambe.platform.BasicMouse"]=
qb;qb.__name__=!0;qb.__interfaces__=[mi];qb.prototype={isDown:function(a){return this.isCodeDown(Ae.toButtonCode(a))},submitDown:function(a,b,d){this._buttonStates.h.hasOwnProperty(d)||(this._buttonStates.h[d]=!0,this.prepare(a,b,Ae.toButton(d)),this._pointer.submitDown(a,b,this._source),this.down.emit(qb._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(qb._sharedEvent)},submitUp:function(a,b,d){this._buttonStates.h.hasOwnProperty(d)&&
(this._buttonStates.remove(d),this.prepare(a,b,Ae.toButton(d)),this._pointer.submitUp(a,b,this._source),this.up.emit(qb._sharedEvent))},submitScroll:function(a,b,d){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(d);return!0},isCodeDown:function(a){return this._buttonStates.h.hasOwnProperty(a)},prepare:function(a,b,d){this._x=a;this._y=b;qb._sharedEvent.init(qb._sharedEvent.id+1,a,b,d)},__class__:qb};var ni=function(){};j["flambe.subsystem.PointerSystem"]=ni;ni.__name__=!0;
ni.prototype={__class__:ni,__properties__:{get_y:"get_y",get_x:"get_x"}};var ua=function(a,b,d){null==d&&(d=!1);null==b&&(b=0);null==a&&(a=0);this.down=new ma;this.move=new ma;this.up=new ma;this._x=a;this._y=b;this._isDown=d};j["flambe.platform.BasicPointer"]=ua;ua.__name__=!0;ua.__interfaces__=[ni];ua.prototype={get_x:function(){return this._x},get_y:function(){return this._y},isDown:function(){return this._isDown},submitDown:function(a,b,d){if(!this._isDown){this.submitMove(a,b,d);this._isDown=
!0;var m=[],c=P.hitTest(S.root,a,b);if(null!=c){var i=c.owner;do{var o=i._compMap.Sprite_3;null!=o&&m.push(o);i=i.parent}while(null!=i)}this.prepare(a,b,c,d);for(a=0;a<m.length;)if(b=m[a],++a,b.onPointerDown(ua._sharedEvent),ua._sharedEvent._stopped)return;this.down.emit(ua._sharedEvent)}},submitMove:function(a,b,d){if(!(a==this._x&&b==this._y)){var m=[],c=P.hitTest(S.root,a,b);if(null!=c){var i=c.owner;do{var o=i._compMap.Sprite_3;null!=o&&m.push(o);i=i.parent}while(null!=i)}this.prepare(a,b,c,d);
for(a=0;a<m.length;)if(b=m[a],++a,b.onPointerMove(ua._sharedEvent),ua._sharedEvent._stopped)return;this.move.emit(ua._sharedEvent)}},submitUp:function(a,b,d){if(this._isDown){this.submitMove(a,b,d);this._isDown=!1;var m=[],c=P.hitTest(S.root,a,b);if(null!=c){var i=c.owner;do{var o=i._compMap.Sprite_3;null!=o&&m.push(o);i=i.parent}while(null!=i)}this.prepare(a,b,c,d);for(a=0;a<m.length;)if(b=m[a],++a,b.onPointerUp(ua._sharedEvent),ua._sharedEvent._stopped)return;this.up.emit(ua._sharedEvent)}},prepare:function(a,
b,d,m){this._x=a;this._y=b;ua._sharedEvent.init(ua._sharedEvent.id+1,a,b,d,m)},__class__:ua,__properties__:{get_y:"get_y",get_x:"get_x"}};var Zb=function(a,b,d){this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=b;this._height=d};j["flambe.platform.BasicTexture"]=Zb;Zb.__name__=!0;Zb.__interfaces__=[dk];Zb.__super__=Oa;Zb.prototype=z(Oa.prototype,{onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},
__class__:Zb,__properties__:{get_height:"get_height",get_width:"get_width"}});var ek=function(){};j["flambe.subsystem.TouchSystem"]=ek;ek.__name__=!0;var Lg=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new dd;this._points=[];this.down=new ma;this.move=new ma;this.up=new ma};j["flambe.platform.BasicTouch"]=Lg;Lg.__name__=!0;Lg.__interfaces__=[ek];Lg.prototype={submitDown:function(a,b,d){if(!this._pointMap.h.hasOwnProperty(a)){var m=new ki(a);m.init(b,d);this._pointMap.h[a]=
m;this._points.push(m);null==this._pointerTouch&&(this._pointerTouch=m,this._pointer.submitDown(b,d,m._source));this.down.emit(m)}},submitMove:function(a,b,d){a=this._pointMap.h[a];null!=a&&(a.init(b,d),this._pointerTouch==a&&this._pointer.submitMove(b,d,a._source),this.move.emit(a))},submitUp:function(a,b,d){var m=this._pointMap.h[a];null!=m&&(m.init(b,d),this._pointMap.remove(a),C.remove(this._points,m),this._pointerTouch==m&&(this._pointerTouch=null,this._pointer.submitUp(b,d,m._source)),this.up.emit(m))},
__class__:Lg};var Be=function(){};j["flambe.sound.Sound"]=Be;Be.__name__=!0;Be.__interfaces__=[ie];Be.prototype={__class__:Be};var zb=function(){this._disposed=!1;this._playback=new Sg(this)};j["flambe.platform.DummySound"]=zb;zb.__name__=!0;zb.__interfaces__=[Be];zb.getInstance=function(){null==zb._instance&&(zb._instance=new zb);return zb._instance};zb.__super__=Oa;zb.prototype=z(Oa.prototype,{play:function(){return this._playback},loop:function(){return this._playback},onDisposed:function(){},
__class__:zb});var ke=function(){};j["flambe.sound.Playback"]=ke;ke.__name__=!0;ke.__interfaces__=[Kc];ke.prototype={__class__:ke};var Sg=function(a){this._sound=a;this.volume=new bb(0);this._complete=new kb(!0)};j["flambe.platform.DummyPlayback"]=Sg;Sg.__name__=!0;Sg.__interfaces__=[ke];Sg.prototype={dispose:function(){},__class__:Sg};var nf=function(){this.down=new ma;this.move=new ma;this.up=new ma};j["flambe.platform.DummyTouch"]=nf;nf.__name__=!0;nf.__interfaces__=[ek];nf.prototype={__class__:nf};
var uf=function(){this._entries=[]};j["flambe.platform.EventGroup"]=uf;uf.__name__=!0;uf.__interfaces__=[Kc];uf.prototype={addListener:function(a,b,d){a.addEventListener(b,d,!1);this._entries.push(new oi(a,b,d))},addDisposingListener:function(a,b,d){var m=this;this.addListener(a,b,function(a){m.dispose();d(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var d=b[a];++a;d.dispatcher.removeEventListener(d.type,d.listener,!1)}this._entries=[]},__class__:uf};var oi=function(a,b,d){this.dispatcher=
a;this.type=b;this.listener=d};j["flambe.platform._EventGroup.Entry"]=oi;oi.__name__=!0;oi.prototype={__class__:oi};var Ce=function(){};j["flambe.platform.InternalGraphics"]=Ce;Ce.__name__=!0;Ce.__interfaces__=[gi];Ce.prototype={__class__:Ce};var pi=function(){};j["flambe.subsystem.RendererSystem"]=pi;pi.__name__=!0;pi.prototype={__class__:pi,__properties__:{get_type:"get_type"}};var vf=function(){};j["flambe.platform.InternalRenderer"]=vf;vf.__name__=!0;vf.__interfaces__=[pi];vf.prototype={__class__:vf};
var tf=function(){};j["flambe.platform.KeyCodes"]=tf;tf.__name__=!0;tf.toKey=function(a){switch(a){case 65:return e.A;case 66:return e.B;case 67:return e.C;case 68:return e.D;case 69:return e.E;case 70:return e.F;case 71:return e.G;case 72:return e.H;case 73:return e.I;case 74:return e.J;case 75:return e.K;case 76:return e.L;case 77:return e.M;case 78:return e.N;case 79:return e.O;case 80:return e.P;case 81:return e.Q;case 82:return e.R;case 83:return e.S;case 84:return e.T;case 85:return e.U;case 86:return e.V;
case 87:return e.W;case 88:return e.X;case 89:return e.Y;case 90:return e.Z;case 48:return e.Number0;case 49:return e.Number1;case 50:return e.Number2;case 51:return e.Number3;case 52:return e.Number4;case 53:return e.Number5;case 54:return e.Number6;case 55:return e.Number7;case 56:return e.Number8;case 57:return e.Number9;case 96:return e.Numpad0;case 97:return e.Numpad1;case 98:return e.Numpad2;case 99:return e.Numpad3;case 100:return e.Numpad4;case 101:return e.Numpad5;case 102:return e.Numpad6;
case 103:return e.Numpad7;case 104:return e.Numpad8;case 105:return e.Numpad9;case 107:return e.NumpadAdd;case 110:return e.NumpadDecimal;case 111:return e.NumpadDivide;case 108:return e.NumpadEnter;case 106:return e.NumpadMultiply;case 109:return e.NumpadSubtract;case 112:return e.F1;case 113:return e.F2;case 114:return e.F3;case 115:return e.F4;case 116:return e.F5;case 117:return e.F6;case 118:return e.F7;case 119:return e.F8;case 120:return e.F9;case 121:return e.F10;case 122:return e.F11;case 123:return e.F12;
case 37:return e.Left;case 38:return e.Up;case 39:return e.Right;case 40:return e.Down;case 18:return e.Alt;case 192:return e.Backquote;case 220:return e.Backslash;case 8:return e.Backspace;case 20:return e.CapsLock;case 188:return e.Comma;case 15:return e.Command;case 17:return e.Control;case 46:return e.Delete;case 35:return e.End;case 13:return e.Enter;case 187:return e.Equals;case 27:return e.Escape;case 36:return e.Home;case 45:return e.Insert;case 219:return e.LeftBracket;case 189:return e.Minus;
case 34:return e.PageDown;case 33:return e.PageUp;case 190:return e.Period;case 222:return e.Quote;case 221:return e.RightBracket;case 186:return e.Semicolon;case 16:return e.Shift;case 191:return e.Slash;case 32:return e.Space;case 9:return e.Tab;case 16777234:return e.Menu;case 16777247:return e.Search}return e.Unknown(a)};tf.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;
case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;
case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;
case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;
case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return a[2]}};var ud=function(){this._tickables=[]};j["flambe.platform.MainLoop"]=ud;ud.__name__=!0;ud.updateEntity=function(a,b){var d=a._compMap.SpeedAdjuster_4;if(null!=d&&(d._realDt=b,b*=d.scale._value,0>=b)){d.onUpdate(b);return}for(d=a.firstComponent;null!=d;){var m=d.next;0==(d._flags&1)&&(d._flags|=1,d.onStart());
d.onUpdate(b);d=m}for(d=a.firstChild;null!=d;)m=d.next,ud.updateEntity(d,b),d=m};ud.prototype={update:function(a){if(0>=a)ea.logger.warn("Zero or negative time elapsed since the last frame!",["dt",a]);else{1<a&&(a=1);for(var b=0;b<this._tickables.length;){var d=this._tickables[b];null==d||d.update(a)?this._tickables.splice(b,1):++b}S.volume.update(a);ud.updateEntity(S.root,a)}},addTickable:function(a){this._tickables.push(a)},__class__:ud};var qi=function(){};j["flambe.platform.MathUtil"]=qi;qi.__name__=
!0;qi.nextPowerOfTwo=function(a){for(var b=1;b<a;)b<<=1;return b};var Ae=function(){};j["flambe.platform.MouseCodes"]=Ae;Ae.__name__=!0;Ae.toButton=function(a){switch(a){case 0:return Ga.Left;case 1:return Ga.Middle;case 2:return Ga.Right}return Ga.Unknown(a)};Ae.toButtonCode=function(a){switch(a[1]){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return a[2]}};var fk=function(){};j["flambe.platform.TextureRoot"]=fk;fk.__name__=!0;var wf=function(){};j["flambe.platform.Tickable"]=wf;wf.__name__=
!0;wf.prototype={__class__:wf};var Tg=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};j["flambe.platform.html.CanvasGraphics"]=Tg;Tg.__name__=!0;Tg.__interfaces__=[Ce];Tg.prototype={save:function(){this._canvasCtx.save()},translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},rotate:function(a){this._canvasCtx.rotate(3.141592653589793*a/180)},transform:function(a,b,d,m,c,i){this._canvasCtx.transform(a,b,d,m,c,i)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,
b,d){this.drawSubTexture(a,b,d,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,d,m,c,i,o){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,d,m,c,i,o),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+m|0,a.rootY+c|0,i|0,o|0,b|0,d|0,i|0,o|0)},fillRect:function(a,b,d,m,c){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,
d,m,c),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+r.string(a);this._canvasCtx.fillStyle="#"+r.string(a);this._canvasCtx.fillRect(b|0,d|0,m|0,c|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=
b},applyScissor:function(a,b,d,m){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,d|0,m|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){},__class__:Tg};var he=function(a){this.graphics=new Tg(a,!0);this._hasGPU=new kb(!0)};j["flambe.platform.html.CanvasRenderer"]=he;he.__name__=!0;he.__interfaces__=[vf];he.prototype={get_type:function(){return Mb.Canvas},createTextureFromImage:function(a){a=new De(he.CANVAS_TEXTURES?W.createCanvas(a):
a);return a.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:he,__properties__:{get_type:"get_type"}};var xf=function(a,b,d){Zb.call(this,a,b,d)};j["flambe.platform.html.CanvasTexture"]=xf;xf.__name__=!0;xf.__super__=Zb;xf.prototype=z(Zb.prototype,{__class__:xf});var De=function(a){this._graphics=null;this._disposed=
!1;this.image=a;this.width=a.width;this.height=a.height};j["flambe.platform.html.CanvasTextureRoot"]=De;De.__name__=!0;De.__interfaces__=[fk];De.__super__=Oa;De.prototype=z(Oa.prototype,{createTexture:function(a,b){return new xf(this,a,b)},onDisposed:function(){this._graphics=this.image=null},__class__:De});var oa=function(a,b){pd.call(this,a,b)};j["flambe.platform.html.HtmlAssetPackLoader"]=oa;oa.__name__=!0;oa.detectImageFormats=function(a){var b=[x.PNG,x.JPG,x.GIF],d=2,m;m=window.document.createElement("img");
m.onload=m.onerror=function(){1==m.width&&b.unshift(x.WEBP);--d;0==d&&a(b)};m.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var c;c=window.document.createElement("img");c.onload=c.onerror=function(){1==c.width&&b.unshift(x.JXR);--d;0==d&&a(b)};c.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};oa.detectAudioFormats=
function(){var a;a=window.document.createElement("audio");if(null==a||null==v(a,a.canPlayType))return ea.logger.warn("Audio is not supported at all in this browser!",null),[];var b=new mb("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),d=window.navigator.userAgent;if(!Z.get_supported()&&b.match(d))return ea.logger.warn("HTML5 audio is blacklisted for this browser",["userAgent",d]),[];for(var b=[{format:x.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:x.MP3,mimeType:"audio/mpeg"},{format:x.OPUS,
mimeType:"audio/ogg; codecs=opus"},{format:x.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:x.WAV,mimeType:"audio/wav"}],d=[],m=0;m<b.length;){var c=b[m];++m;var i="";try{i=a.canPlayType(c.mimeType)}catch(o){o instanceof p&&(o=o.val)}""!=i&&d.push(c.format)}return d};oa.supportsBlob=function(){if(oa._detectBlobSupport){oa._detectBlobSupport=!1;if((new mb("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;
a.responseType="blob";if("blob"!=a.responseType)return!1;oa._URL=W.loadExtension("URL").value}return null!=oa._URL&&null!=oa._URL.createObjectURL};oa.__super__=pd;oa.prototype=z(pd.prototype,{loadEntry:function(a,b){var d=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var m;m=window.document.createElement("img");var c=new uf;c.addDisposingListener(m,"load",function(){oa.supportsBlob()&&oa._URL.revokeObjectURL(m.src);var a=d._platform.getRenderer().createTextureFromImage(m);null!=a?d.handleLoad(b,
a):d.handleTextureError(b)});c.addDisposingListener(m,"error",function(){d.handleError(b,"Failed to load image")});oa.supportsBlob()?this.download(a,b,"blob",function(a){m.src=oa._URL.createObjectURL(a)}):m.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=d._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?d.handleLoad(b,a):d.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(Z.get_supported())this.download(a,b,"arraybuffer",
function(m){Z.ctx.decodeAudioData(m,function(a){d.handleLoad(b,new Z(a))},function(){ea.logger.warn("Couldn't decode Web Audio, ignoring this asset",["url",a]);d.handleLoad(b,zb.getInstance())})});else{var i;i=window.document.createElement("audio");i.preload="auto";var o=++oa._mediaRefCount;null==oa._mediaElements&&(oa._mediaElements=new dd);oa._mediaElements.h[o]=i;c=new uf;c.addDisposingListener(i,"canplaythrough",function(){oa._mediaElements.remove(o);d.handleLoad(b,new yf(i))});c.addDisposingListener(i,
"error",function(){oa._mediaElements.remove(o);var m=i.error.code;3==m||4==m?(ea.logger.warn("Couldn't decode HTML5 audio, ignoring this asset",["url",a,"code",m]),d.handleLoad(b,zb.getInstance())):d.handleError(b,"Failed to load audio: "+i.error.code)});c.addListener(i,"progress",function(){if(0<i.buffered.length&&0<i.duration){var a=i.buffered.end(0)/i.duration;d.handleProgress(b,a*b.bytes|0)}});i.src=a;i.load()}break;case 13:this.download(a,b,"text",function(a){d.handleLoad(b,new ze(a))})}},getAssetFormats:function(a){var b=
this;null==oa._supportedFormats&&(oa._supportedFormats=new rf,oa.detectImageFormats(function(a){oa._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(oa.detectAudioFormats()).concat([x.Data]))}));oa._supportedFormats.get(a)},download:function(a,b,d,m){var c=this,i=null,o=null,h=0,Mg=!1,e=function(){Mg&&(Mg=!1,window.clearInterval(h))},g=3,j=function(){--g;return 0<=g?(ea.logger.warn("Retrying asset download",["url",b.url]),o(),!0):!1},o=function(){e();
null!=i&&i.abort();i=new XMLHttpRequest;i.open("GET",a,!0);i.responseType=d;var o=0;i.onprogress=function(a){Mg||(Mg=!0,h=window.setInterval(function(){4!=i.readyState&&5E3<Date.now()-o&&!j()&&(e(),c.handleError(b,"Download stalled"))},1E3));o=Date.now();c.handleProgress(b,a.loaded)};i.onerror=function(){if(0!=i.status||!j())e(),c.handleError(b,"HTTP error "+i.status)};i.onload=function(){var a=i.response;null==a&&(a=i.responseText);e();m(a)};i.send()};o()},__class__:oa});var ri=function(){};j["flambe.subsystem.ExternalSystem"]=
ri;ri.__name__=!0;ri.prototype={__class__:ri};var Ng=function(){};j["flambe.platform.html.HtmlExternal"]=Ng;Ng.__name__=!0;Ng.__interfaces__=[ri];Ng.prototype={call:function(a,b){null==b&&(b=[]);for(var d=window,m=d,c=0,i=a.split(".");c<i.length;){var o=i[c];++c;d=m;m=ha.field(d,o)}return ha.callMethod(d,m,b)},__class__:Ng};var si=function(){};j["flambe.util.LogHandler"]=si;si.__name__=!0;si.prototype={__class__:si};var xe=function(a){this._tagPrefix=a+": "};j["flambe.platform.html.HtmlLogHandler"]=
xe;xe.__name__=!0;xe.__interfaces__=[si];xe.isSupported=function(){return"object"==typeof console&&null!=console.info};xe.prototype={log:function(a,b){b=this._tagPrefix+b;switch(a[1]){case 0:console.info(b);break;case 1:console.warn(b);break;case 2:console.error(b)}},__class__:xe};var lf=function(a,b){qb.call(this,a);this._canvas=b};j["flambe.platform.html.HtmlMouse"]=lf;lf.__name__=!0;lf.__super__=qb;lf.prototype=z(qb.prototype,{__class__:lf});var yf=function(a){this._disposed=!1;this.audioElement=
a};j["flambe.platform.html.HtmlSound"]=yf;yf.__name__=!0;yf.__interfaces__=[Be];yf.__super__=Oa;yf.prototype=z(Oa.prototype,{play:function(a){null==a&&(a=1);return new Ee(this,a,!1)},loop:function(a){null==a&&(a=1);return new Ee(this,a,!0)},onDisposed:function(){this.audioElement=null},__class__:yf});var Ee=function(a,b,d){var m=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=d;this._clonedElement.src=a.audioElement.src;
this.volume=new bb(b,function(){m.updateVolume()});this.updateVolume();this._complete=new kb(!1);this.playAudio();S.hidden._value&&this.set_paused(!0)};j["flambe.platform.html._HtmlSound.HtmlPlayback"]=Ee;Ee.__name__=!0;Ee.__interfaces__=[wf,ke];Ee.prototype={set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||this._clonedElement.paused?
(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(Xb.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=S.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=S.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},
updateVolume:function(){this._clonedElement.volume=S.volume._value*this.volume._value},__class__:Ee,__properties__:{set_paused:"set_paused"}};var ti=function(){};j["flambe.subsystem.StageSystem"]=ti;ti.__name__=!0;ti.prototype={__class__:ti,__properties__:{get_height:"get_height",get_width:"get_width"}};var we=function(a){var b=this;this._canvas=a;this.resize=new Nc;this.scaleFactor=we.computeScaleFactor();1!=this.scaleFactor&&(ea.logger.info("Reversing device DPI scaling",["scaleFactor",this.scaleFactor]),
W.setVendorStyle(this._canvas,"transform-origin","top left"),W.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));W.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){W.callLater(v(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",v(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new kb(null);null!=window.orientation&&(window.addEventListener("orientationchange",v(this,this.onOrientationChange),
!1),this.onOrientationChange(null));this.fullscreen=new kb(!1);W.addVendorListener(window.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};j["flambe.platform.html.HtmlStage"]=we;we.__name__=!0;we.__interfaces__=[ti];we.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d",null),b=W.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=window.screen.height;return 1136<
a*window.screen.width||1136<a*b?1:a};we.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var d=this.scaleFactor*a,m=this.scaleFactor*b;if(this._canvas.width==d&&this._canvas.height==m)return!1;this._canvas.width=d|0;this._canvas.height=m|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=
this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";W.callLater(function(){W.hideMobileBrowser();W.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(W.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==W.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:we,
__properties__:{get_height:"get_height",get_width:"get_width"}};var W=function(){};j["flambe.platform.html.HtmlUtil"]=W;W.__name__=!0;W.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};W.hideMobileBrowser=function(){window.scrollTo(1,0)};W.loadExtension=function(a,b){null==b&&(b=window);var d=ha.field(b,a);if(null!=d)return{prefix:"",field:a,value:d};for(var d=a.charAt(0).toUpperCase()+C.substr(a,1,null),m=0,c=W.VENDOR_PREFIXES;m<c.length;){var i=c[m];++m;var o=i+d,h=ha.field(b,o);if(null!=
h)return{prefix:i,field:o,value:h}}return{prefix:null,field:null,value:null}};W.loadFirstExtension=function(a,b){for(var d=0;d<a.length;){var m=a[d];++d;m=W.loadExtension(m,b);if(null!=m.field)return m}return{prefix:null,field:null,value:null}};W.polyfill=function(a,b){null==b&&(b=window);var d=W.loadExtension(a,b).value;if(null==d)return!1;b[a]=d;return!0};W.setVendorStyle=function(a,b,d){for(var a=a.style,m=0,c=W.VENDOR_PREFIXES;m<c.length;){var i=c[m];++m;a.setProperty("-"+i+"-"+b,d)}a.setProperty(b,
d)};W.addVendorListener=function(a,b,d,m){for(var c=0,i=W.VENDOR_PREFIXES;c<i.length;){var o=i[c];++c;a.addEventListener(o+b,d,m)}a.addEventListener(b,d,m)};W.orientation=function(a){switch(a){case -90:case 90:return Td.Landscape;default:return Td.Portrait}};W.createEmptyCanvas=function(a,b){var d;d=window.document.createElement("canvas");d.width=a;d.height=b;return d};W.createCanvas=function(a){var b=W.createEmptyCanvas(a.width,a.height),d=b.getContext("2d",null);d.save();d.globalCompositeOperation=
"copy";d.drawImage(a,0,0);d.restore();return b};W.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&null!=window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var d=a[b];++b;if(0<=d.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};W.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){ea.logger.warn("Monkey patching around Android sin/cos bug",null);var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==
b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var Z=function(a){this._disposed=!1;this.buffer=a};j["flambe.platform.html.WebAudioSound"]=Z;Z.__name__=!0;Z.__interfaces__=[Be];Z.__properties__={get_supported:"get_supported"};Z.get_supported=function(){if(Z._detectSupport){Z._detectSupport=!1;var a=W.loadExtension("AudioContext").value;null!=a&&(Z.ctx=new a,Z.gain=Z.createGain(),Z.gain.connect(Z.ctx.destination),S.volume.watch(function(a){Z.gain.gain.value=a}))}return null!=Z.ctx};Z.createGain=
function(){return null!=Z.ctx.createGain?Z.ctx.createGain():Z.ctx.createGainNode()};Z.start=function(a,b){null!=a.start?a.start(b):a.noteOn(b)};Z.__super__=Oa;Z.prototype=z(Oa.prototype,{play:function(a){null==a&&(a=1);return new zf(this,a,!1)},loop:function(a){null==a&&(a=1);return new zf(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:Z,__properties__:{get_duration:"get_duration"}});var zf=function(a,b,d){var m=this;this._sound=
a;this._head=Z.gain;this._complete=new kb(!1);this._sourceNode=Z.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=d;this._sourceNode.onended=function(){m._complete.set__(!0)};Z.start(this._sourceNode,0);this.playAudio();this.volume=new bb(b,function(a){m.setVolume(a)});1!=b&&this.setVolume(b);S.hidden._value&&this.set_paused(!0)};j["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=zf;zf.__name__=!0;zf.__interfaces__=[wf,ke];zf.prototype={set_paused:function(a){a!=
0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_position:function(){return this._complete._value?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(Z.ctx.currentTime-this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},
dispose:function(){this.set_paused(!0);this._complete.set__(!0)},setVolume:function(a){null==this._gainNode&&(this._gainNode=Z.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=Z.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(Xb.instance.mainLoop.addTickable(this),
this._tickableAdded=!0,this._hideBinding=S.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},__class__:zf,__properties__:{get_position:"get_position",set_paused:"set_paused"}};var ui=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=
this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new Ug(a);this._drawPatternShader=new Af(a);this._fillRectShader=new Vg(a);this.resize(16)};j["flambe.platform.html.WebGLBatcher"]=ui;ui.__name__=!0;ui.prototype={resizeBackbuffer:function(a,
b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},willRender:function(){this._gl.clear(16384)},didRender:function(){this.flush()},bindTexture:function(a){this.flush();this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},deleteTexture:function(a){null!=this._lastTexture&&this._lastTexture.root==a&&(this.flush(),this._currentTexture=this._lastTexture=null);this._gl.deleteTexture(a.nativeTexture)},deleteFramebuffer:function(a){a==this._lastRenderTarget&&
(this.flush(),this._currentRenderTarget=this._lastRenderTarget=null);this._gl.deleteFramebuffer(a.framebuffer)},prepareDrawTexture:function(a,b,d,m){m!=this._lastTexture&&(this.flush(),this._lastTexture=m);return this.prepareQuad(5,a,b,d,this._drawTextureShader)},prepareFillRect:function(a,b,d){return this.prepareQuad(6,a,b,d,this._fillRectShader)},prepareQuad:function(a,b,d,m,c){b!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=b);d!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=
d);c!=this._lastShader&&(this.flush(),this._lastShader=c);if(null!=m||null!=this._lastScissor)if(null==m||null==this._lastScissor||!this._lastScissor.equals(m))this.flush(),this._lastScissor=null!=m?m.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=4*a;return b},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);
if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(774,771);break;case 3:this._gl.blendFunc(1,769);break;case 4:this._gl.blendFunc(0,770);break;case 5:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|
0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==this._drawPatternShader){var a=this._lastTexture,b=a.root;this._drawPatternShader.setRegion(a.rootX/b.width,a.rootY/b.height,
a._width/b.width,a._height/b.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),d=0;d<a;){var m=d++;b[6*m]=4*m;b[6*m+1]=4*m+1;b[6*m+2]=4*m+2;b[6*m+3]=4*m+2;b[6*m+4]=4*m+3;b[6*m+5]=4*m}this._gl.bufferData(34963,b,35044)}},
bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=this._currentRenderTarget=a},resetLastStateVars:function(){this._gl.enable(3042);this._gl.disable(2960);this._gl.disable(2929);this._gl.bindBuffer(34962,this._vertexBuffer);this._gl.bindBuffer(34963,this._quadIndexBuffer);null!=this._lastRenderTarget&&
this.bindRenderTarget(this._lastRenderTarget);this._gl.blendFunc(1,771);null!=this._lastTexture&&this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture);null!=this._lastShader&&(this._lastShader.useProgram(),this._lastShader.prepare())},__class__:ui};var Nb=function(a,b){this._inverseProjection=this._stateList=null;null==Nb._scratchQuadArray&&(Nb._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=b};j["flambe.platform.html.WebGLGraphics"]=Nb;Nb.__name__=!0;Nb.__interfaces__=
[Ce];Nb.prototype={save:function(){var a=this._stateList,b=this._stateList.next;null==b&&(b=new Bf,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=b},translate:function(a,b){var d=this._stateList.matrix;d.m02+=d.m00*a+d.m01*b;d.m12+=d.m10*a+d.m11*b},rotate:function(a){var b=this._stateList.matrix,a=3.141592653589793*a/180,d=Math.sin(a),a=Math.cos(a),m=b.m00,c=b.m10,i=b.m01,o=b.m11;b.m00=m*
a+i*d;b.m10=c*a+o*d;b.m01=i*a-m*d;b.m11=o*a-c*d},transform:function(a,b,d,m,c,i){var o=this._stateList;Nb._scratchMatrix.set(a,b,d,m,c,i);Lb.multiply(o.matrix,Nb._scratchMatrix,o.matrix)},restore:function(){this._stateList=this._stateList.prev},drawTexture:function(a,b,d){this._batcher.resetLastStateVars();this.drawSubTexture(a,b,d,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,d,m,c,i,o){var h=this._stateList,e=a.root,b=this.transformQuad(b,d,i,o),d=e.width,e=e.height,m=(a.rootX+
m)/d,c=(a.rootY+c)/e,i=m+i/d,o=c+o/e,d=h.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,h.blendMode,h.scissor,a),h=this._batcher.data;h[a]=b[0];h[++a]=b[1];h[++a]=m;h[++a]=c;h[++a]=d;h[++a]=b[2];h[++a]=b[3];h[++a]=i;h[++a]=c;h[++a]=d;h[++a]=b[4];h[++a]=b[5];h[++a]=i;h[++a]=o;h[++a]=d;h[++a]=b[6];h[++a]=b[7];h[++a]=m;h[++a]=o;h[++a]=d},fillRect:function(a,b,d,m,c){var i=this._stateList,b=this.transformQuad(b,d,m,c),d=(a&16711680)/16711680,m=(a&65280)/65280,a=(a&255)/255,c=i.alpha,i=this._batcher.prepareFillRect(this._renderTarget,
i.blendMode,i.scissor),o=this._batcher.data;o[i]=b[0];o[++i]=b[1];o[++i]=d;o[++i]=m;o[++i]=a;o[++i]=c;o[++i]=b[2];o[++i]=b[3];o[++i]=d;o[++i]=m;o[++i]=a;o[++i]=c;o[++i]=b[4];o[++i]=b[5];o[++i]=d;o[++i]=m;o[++i]=a;o[++i]=c;o[++i]=b[6];o[++i]=b[7];o[++i]=d;o[++i]=m;o[++i]=a;o[++i]=c},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,b,d,m){var c=this._stateList,i=Nb._scratchQuadArray;i[0]=a;i[1]=b;i[2]=a+d;i[3]=b+m;c.matrix.transformArray(i,
4,i);this._inverseProjection.transformArray(i,4,i);a=i[0];b=i[1];d=i[2]-a;m=i[3]-b;0>d&&(a+=d,d=-d);0>m&&(b+=m,m=-m);c.applyScissor(a,b,d,m)},willRender:function(){this._batcher.resetLastStateVars();this._batcher.willRender()},didRender:function(){this._batcher.resetLastStateVars();this._batcher.didRender()},onResize:function(a,b){this._stateList=new Bf;var d;d=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*d/b,-1,d);this._inverseProjection=new Lb;this._inverseProjection.set(2/
a,0,0,2/b,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,b,d,m){var d=a+d,m=b+m,c=Nb._scratchQuadArray;c[0]=a;c[1]=b;c[2]=d;c[3]=b;c[4]=d;c[5]=m;c[6]=a;c[7]=m;this._stateList.matrix.transformArray(c,8,c);return c},__class__:Nb};var Bf=function(){this.scissor=this.prev=this.next=null;this.matrix=new Lb;this.alpha=1;this.blendMode=na.Normal};j["flambe.platform.html._WebGLGraphics.DrawingState"]=Bf;Bf.__name__=!0;Bf.prototype={applyScissor:function(a,b,d,m){if(null!=this.scissor)var c=
Va.max(this.scissor.x,a),i=Va.max(this.scissor.y,b),d=Va.min(this.scissor.x+this.scissor.width,a+d),m=Va.min(this.scissor.y+this.scissor.height,b+m),a=c,b=i,d=d-c,m=m-i;else this.scissor=new cd;this.scissor.set(Math.round(a),Math.round(b),Math.round(d),Math.round(m))},__class__:Bf};var of=function(a,b){var d=this;this._hasGPU=new kb(!0);this.gl=b;b.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();ea.logger.warn("WebGL context lost",null);d._hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",
function(){ea.logger.warn("WebGL context restored",null);d.init();d._hasGPU.set__(!0)},!1);a.resize.connect(v(this,this.onResize));this.init()};j["flambe.platform.html.WebGLRenderer"]=of;of.__name__=!0;of.__interfaces__=[vf];of.prototype={get_type:function(){return Mb.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;var b=new Ed(this,a.width,a.height);b.uploadImageData(a);return b.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){this.gl.isContextLost();
return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var a=this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},init:function(){this.batcher=new ui(this.gl);this.graphics=new Nb(this.batcher,null);this.onResize()},__class__:of,__properties__:{get_type:"get_type"}};var Wg=function(a,b,d){Zb.call(this,a,b,d)};j["flambe.platform.html.WebGLTexture"]=Wg;Wg.__name__=!0;Wg.__super__=
Zb;Wg.prototype=z(Zb.prototype,{__class__:Wg});var Ed=function(a,b,d){this.framebuffer=this._graphics=null;this._disposed=!1;this._renderer=a;this.width=Va.max(2,qi.nextPowerOfTwo(b));this.height=Va.max(2,qi.nextPowerOfTwo(d));b=a.gl;this.nativeTexture=b.createTexture();a.batcher.bindTexture(this.nativeTexture);b.texParameteri(3553,10242,33071);b.texParameteri(3553,10243,33071);b.texParameteri(3553,10240,9729);b.texParameteri(3553,10241,9728)};j["flambe.platform.html.WebGLTextureRoot"]=Ed;Ed.__name__=
!0;Ed.__interfaces__=[fk];Ed.drawBorder=function(a,b,d){var m=a.getContext("2d",null);m.drawImage(a,b-1,0,1,d,b,0,1,d);m.drawImage(a,0,d-1,b,1,0,d,b,1)};Ed.__super__=Oa;Ed.prototype=z(Oa.prototype,{createTexture:function(a,b){return new Wg(this,a,b)},uploadImageData:function(a){if(this.width!=a.width||this.height!=a.height){var b=W.createEmptyCanvas(this.width,this.height);b.getContext("2d",null).drawImage(a,0,0);Ed.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);
this._renderer.gl.texImage2D(3553,0,6408,6408,5121,a)},onDisposed:function(){var a=this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&a.deleteFramebuffer(this);this._graphics=this.framebuffer=this.nativeTexture=null},__class__:Ed});var va=function(a,b,d){d="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+d;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,va.createShader(a,35633,b));a.attachShader(this._program,va.createShader(a,35632,d));a.linkProgram(this._program);
a.useProgram(this._program)};j["flambe.platform.shader.ShaderGL"]=va;va.__name__=!0;va.createShader=function(a,b,d){b=a.createShader(b);a.shaderSource(b,d);a.compileShader(b);return b};va.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},__class__:va};var Af=function(a){va.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};j["flambe.platform.shader.DrawPatternGL"]=
Af;Af.__name__=!0;Af.__super__=va;Af.prototype=z(va.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,b,d,m){this._gl.uniform4f(this.u_region,a,b,d,m)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,
1,5126,!1,20,16)},__class__:Af});var Ug=function(a){va.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");
this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};j["flambe.platform.shader.DrawTextureGL"]=Ug;Ug.__name__=!0;Ug.__super__=va;Ug.prototype=z(va.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,
2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:Ug});var Vg=function(a){va.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}","varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");
this.a_rgb=this.getAttribLocation("a_rgb");this.a_alpha=this.getAttribLocation("a_alpha")};j["flambe.platform.shader.FillRectGL"]=Vg;Vg.__name__=!0;Vg.__super__=va;Vg.prototype=z(va.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,
1,5126,!1,24,20)},__class__:Vg});var vi=function(){this._transitor=null};j["flambe.scene.Director"]=vi;vi.__name__=!0;vi.__super__=ia;vi.prototype=z(ia.prototype,{get_name:function(){return"Director_6"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var d=b[a];++a;d.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},
get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},show:function(a){a=a._compMap.Scene_8;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_8;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=
null,this.invalidateVisibility())},__class__:vi,__properties__:z(ia.prototype.__properties__,{get_topScene:"get_topScene"})});var gk=function(){};j["flambe.scene._Director.Transitor"]=gk;gk.__name__=!0;gk.prototype={update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();this._onComplete()},__class__:gk};var wi=function(){};j["flambe.scene.Scene"]=wi;wi.__name__=!0;wi.__super__=ia;wi.prototype=z(ia.prototype,{get_name:function(){return"Scene_8"},__class__:wi});
var hk=function(){};j["flambe.scene.Transition"]=hk;hk.__name__=!0;hk.prototype={update:function(){return!0},complete:function(){},__class__:hk};var Mb=j["flambe.subsystem.RendererType"]={__ename__:!0,__constructs__:["Stage3D","WebGL","Canvas"]};Mb.Stage3D=["Stage3D",0];Mb.Stage3D.toString=g;Mb.Stage3D.__enum__=Mb;Mb.WebGL=["WebGL",1];Mb.WebGL.toString=g;Mb.WebGL.__enum__=Mb;Mb.Canvas=["Canvas",2];Mb.Canvas.toString=g;Mb.Canvas.__enum__=Mb;var fi=function(){};j["flambe.util.BitSets"]=fi;fi.__name__=
!0;fi.set=function(a,b,d){return d?a|b:a&~b};var eb=j["flambe.util.LogLevel"]={__ename__:!0,__constructs__:["Info","Warn","Error"]};eb.Info=["Info",0];eb.Info.toString=g;eb.Info.__enum__=eb;eb.Warn=["Warn",1];eb.Warn.toString=g;eb.Warn.__enum__=eb;eb.Error=["Error",2];eb.Error.toString=g;eb.Error.__enum__=eb;var xi=function(a){this._capacity=2147483647;this._allocator=a;this._freeObjects=[]};j["flambe.util.Pool"]=xi;xi.__name__=!0;xi.prototype={take:function(){return 0<this._freeObjects.length?this._freeObjects.pop():
this._allocator()},put:function(a){this._freeObjects.length<this._capacity&&this._freeObjects.push(a)},setSize:function(a){if(this._freeObjects.length>a)this._freeObjects.length=a;else for(var a=a-this._freeObjects.length,b=0;b<a;)b++,this._freeObjects.push(this._allocator());return this},__class__:xi};var rf=function(){this.success=new ma;this.error=new ma;this.progressChanged=new Nc;this.hasResult=!1;this._total=this._progress=0};j["flambe.util.Promise"]=rf;rf.__name__=!0;rf.prototype={set_result:function(a){if(this.hasResult)throw new p("Promise result already assigned");
this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:rf,__properties__:{set_total:"set_total",set_progress:"set_progress",set_result:"set_result"}};var Nc=function(a){Fa.call(this,a)};j["flambe.util.Signal0"]=
Nc;Nc.__name__=!0;Nc.__super__=Fa;Nc.prototype=z(Fa.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==Fa.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:Nc});var ci=function(a){this.next=null;this.fn=a};j["flambe.util._SignalBase.Task"]=ci;ci.__name__=!0;ci.prototype={__class__:ci};
var Yb=function(){};j["flambe.util.Strings"]=Yb;Yb.__name__=!0;Yb.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?C.substr(a,b+1,null):null};Yb.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=C.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=C.substr(a,b+1,null));return Yb.getFileExtension(a)};Yb.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};Yb.withFields=function(a,b){var d=b.length;if(0<d){for(var a=0<a.length?a+" [":a+"[",m=0;m<
d;){0<m&&(a+=", ");var c=b[m],i=b[m+1];if(r.is(i,Error)){var o=i.stack;null!=o&&(i=o)}a+=c+"="+r.string(i);m+=2}a+="]"}return a};var Fe=function(){};j["haxe.IMap"]=Fe;Fe.__name__=!0;Fe.prototype={__class__:Fe};var yi=function(a,b){this.high=a;this.low=b};j["haxe._Int64.___Int64"]=yi;yi.__name__=!0;yi.prototype={__class__:yi};var ik=function(){};j["haxe.Log"]=ik;ik.__name__=!0;ik.trace=function(a,b){A.__trace(a,b)};var zi=function(){};j["haxe.crypto.Crc32"]=zi;zi.__name__=!0;zi.make=function(a){for(var b=
-1,d=a.b.bufferValue,m=0,a=a.length;m<a;){for(var c=m++,c=(b^d.bytes[c])&255,i=0;8>i;)i++,c=1==(c&1)?c>>>1^-306674912:c>>>1;b=b>>>8^c}return b^-1};var Cf=function(){};j["haxe.ds.BalancedTree"]=Cf;Cf.__name__=!0;Cf.prototype={set:function(a,b){this.root=this.setLoop(a,b,this.root)},get:function(a){for(var b=this.root;null!=b;){var d=this.compare(a,b.key);if(0==d)return b.value;b=0>d?b.left:b.right}return null},exists:function(a){for(var b=this.root;null!=b;){var d=this.compare(a,b.key);if(0==d)return!0;
b=0>d?b.left:b.right}return!1},iterator:function(){var a=[];this.iteratorLoop(this.root,a);return C.iter(a)},keys:function(){var a=[];this.keysLoop(this.root,a);return C.iter(a)},setLoop:function(a,b,d){if(null==d)return new fb(null,a,b,null);var m=this.compare(a,d.key);if(0==m)return new fb(d.left,a,b,d.right,null==d?0:d._height);if(0>m)return this.balance(this.setLoop(a,b,d.left),d.key,d.value,d.right);a=this.setLoop(a,b,d.right);return this.balance(d.left,d.key,d.value,a)},iteratorLoop:function(a,
b){null!=a&&(this.iteratorLoop(a.left,b),b.push(a.value),this.iteratorLoop(a.right,b))},keysLoop:function(a,b){null!=a&&(this.keysLoop(a.left,b),b.push(a.key),this.keysLoop(a.right,b))},balance:function(a,b,d,m){var c;c=null==a?0:a._height;var i;i=null==m?0:m._height;return c>i+2?function(){var b=a.left;return null==b?0:b._height}(this)>=function(){var b=a.right;return null==b?0:b._height}(this)?new fb(a.left,a.key,a.value,new fb(a.right,b,d,m)):new fb(new fb(a.left,a.key,a.value,a.right.left),a.right.key,
a.right.value,new fb(a.right.right,b,d,m)):i>c+2?function(){var a=m.right;return null==a?0:a._height}(this)>function(){var a=m.left;return null==a?0:a._height}(this)?new fb(new fb(a,b,d,m.left),m.key,m.value,m.right):new fb(new fb(a,b,d,m.left.left),m.left.key,m.left.value,new fb(m.left.right,m.key,m.value,m.right)):new fb(a,b,d,m,(c>i?c:i)+1)},compare:function(a,b){return ha.compare(a,b)},__class__:Cf};var fb=function(a,b,d,m,c){null==c&&(c=-1);this.left=a;this.key=b;this.value=d;this.right=m;this._height=
-1==c?(function(a){a=a.left;return null==a?0:a._height}(this)>function(a){a=a.right;return null==a?0:a._height}(this)?function(a){a=a.left;return null==a?0:a._height}(this):function(a){a=a.right;return null==a?0:a._height}(this))+1:c};j["haxe.ds.TreeNode"]=fb;fb.__name__=!0;fb.prototype={__class__:fb};var pa=function(){};j["haxe.ds.EnumValueMap"]=pa;pa.__name__=!0;pa.__interfaces__=[Fe];pa.__super__=Cf;pa.prototype=z(Cf.prototype,{compare:function(a,b){var d=a[1]-b[1];if(0!=d)return d;var d=a.slice(2),
m=b.slice(2);return 0==d.length&&0==m.length?0:this.compareArgs(d,m)},compareArgs:function(a,b){var d=a.length-b.length;if(0!=d)return d;for(var d=0,m=a.length;d<m;){var c=d++,c=this.compareArg(a[c],b[c]);if(0!=c)return c}return 0},compareArg:function(a,b){return ha.isEnumValue(a)&&ha.isEnumValue(b)?this.compare(a,b):a instanceof Array&&null==a.__enum__&&b instanceof Array&&null==b.__enum__?this.compareArgs(a,b):ha.compare(a,b)},__class__:pa});var Ai=function(a,b){this.elt=a;this.next=b};j["haxe.ds.GenericCell"]=
Ai;Ai.__name__=!0;Ai.prototype={__class__:Ai};var Bi=function(){};j["haxe.ds.GenericStack"]=Bi;Bi.__name__=!0;Bi.prototype={add:function(a){this.head=new Ai(a,this.head)},pop:function(){var a=this.head;if(null==a)return null;this.head=a.next;return a.elt},__class__:Bi};var dd=function(){this.h={}};j["haxe.ds.IntMap"]=dd;dd.__name__=!0;dd.__interfaces__=[Fe];dd.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;
delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return C.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref[this.it.next()]}}},__class__:dd};var Ca=function(){this.h={};this.h.__keys__={}};j["haxe.ds.ObjectMap"]=Ca;Ca.__name__=!0;Ca.__interfaces__=[Fe];Ca.prototype={set:function(a,b){var d=a.__id__||(a.__id__=++Ca.count);this.h[d]=b;this.h.__keys__[d]=
a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return C.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref[this.it.next().__id__]}}},__class__:Ca};var sf=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};j["haxe.ds._StringMap.StringMapIterator"]=
sf;sf.__name__=!0;sf.prototype={hasNext:function(){return this.index<this.count},next:function(){return this.map.get(this.keys[this.index++])},__class__:sf};var E=function(){this.h={}};j["haxe.ds.StringMap"]=E;E.__name__=!0;E.__interfaces__=[Fe];E.prototype={set:function(a,b){null!=Ob[a]?this.setReserved(a,b):this.h[a]=b},get:function(a){return null!=Ob[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=Ob[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},setReserved:function(a,b){null==
this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){if(null!=Ob[a]){a="$"+a;if(null==this.rh||!this.rh.hasOwnProperty(a))return!1;delete this.rh[a]}else{if(!this.h.hasOwnProperty(a))return!1;delete this.h[a]}return!0},keys:function(){var a=this.arrayKeys();return C.iter(a)},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&
a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},iterator:function(){return new sf(this,this.arrayKeys())},__class__:E};var $b=function(a){this.length=a.byteLength;this.b=new Ci(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b};j["haxe.io.Bytes"]=$b;$b.__name__=!0;$b.alloc=function(a){return new $b(new jk(a))};$b.ofString=function(a){for(var b=[],d=0;d<a.length;){var m=fa.fastCodeAt(a,d++);55296<=m&&56319>=m&&(m=m-55232<<10|fa.fastCodeAt(a,d++)&1023);
127>=m?b.push(m):(2047>=m?b.push(192|m>>6):(65535>=m?b.push(224|m>>12):(b.push(240|m>>18),b.push(128|m>>12&63)),b.push(128|m>>6&63)),b.push(128|m&63))}return new $b((new Ci(b)).buffer)};$b.prototype={getString:function(a,b){if(0>a||0>b||a+b>this.length)throw new p(Wa.OutsideBounds);for(var d="",m=this.b,c=String.fromCharCode,i=a,o=a+b;i<o;){var h=m[i++];if(128>h){if(0==h)break;d+=c(h)}else if(224>h)d+=c((h&63)<<6|m[i++]&127);else if(240>h)var e=m[i++],d=d+c((h&31)<<12|(e&127)<<6|m[i++]&127);else var e=
m[i++],g=m[i++],h=(h&15)<<18|(e&127)<<12|(g&127)<<6|m[i++]&127,d=d+c((h>>10)+55232),d=d+c(h&1023|56320)}return d},toString:function(){return this.getString(0,this.length)},__class__:$b};var Di=function(){this.b=[]};j["haxe.io.BytesBuffer"]=Di;Di.__name__=!0;Di.prototype={getBytes:function(){var a=new $b((new Ci(this.b)).buffer);this.b=null;return a},__class__:Di};var Xg=function(){};j["haxe.io.Input"]=Xg;Xg.__name__=!0;Xg.prototype={readByte:function(){throw new p("Not implemented");},readBytes:function(a,
b,d){var m=d,c=a.b;if(0>b||0>d||b+d>a.length)throw new p(Wa.OutsideBounds);for(;0<m;)c[b]=this.readByte(),b++,m--;return d},readFullBytes:function(a,b,d){for(;0<d;)var m=this.readBytes(a,b,d),b=b+m,d=d-m},readString:function(a){var b=$b.alloc(a);this.readFullBytes(b,0,a);return b.toString()},__class__:Xg};var Fd=function(a,b,d){null==b&&(b=0);null==d&&(d=a.length-b);if(0>b||0>d||b+d>a.length)throw new p(Wa.OutsideBounds);this.b=a.b;this.pos=b;this.totlen=this.len=d};j["haxe.io.BytesInput"]=Fd;Fd.__name__=
!0;Fd.__super__=Xg;Fd.prototype=z(Xg.prototype,{readByte:function(){if(0==this.len)throw new p(new Df);this.len--;return this.b[this.pos++]},readBytes:function(a,b,d){if(0>b||0>d||b+d>a.length)throw new p(Wa.OutsideBounds);if(0==this.len&&0<d)throw new p(new Df);this.len<d&&(d=this.len);for(var m=this.b,a=a.b,c=0;c<d;){var i=c++;a[b+i]=m[this.pos+i]}this.pos+=d;this.len-=d;return d},__class__:Fd});var kk=function(){};j["haxe.io.Output"]=kk;kk.__name__=!0;var Yg=function(){this.b=new Di};j["haxe.io.BytesOutput"]=
Yg;Yg.__name__=!0;Yg.__super__=kk;Yg.prototype=z(kk.prototype,{writeByte:function(a){this.b.b.push(a)},getBytes:function(){return this.b.getBytes()},__class__:Yg});var Df=function(){};j["haxe.io.Eof"]=Df;Df.__name__=!0;Df.prototype={toString:function(){return"Eof"},__class__:Df};var Wa=j["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};Wa.Blocked=["Blocked",0];Wa.Blocked.toString=g;Wa.Blocked.__enum__=Wa;Wa.Overflow=["Overflow",1];Wa.Overflow.toString=
g;Wa.Overflow.__enum__=Wa;Wa.OutsideBounds=["OutsideBounds",2];Wa.OutsideBounds.toString=g;Wa.OutsideBounds.__enum__=Wa;Wa.Custom=function(a){a=["Custom",3,a];a.__enum__=Wa;a.toString=g;return a};var ed=function(){};j["haxe.io.FPHelper"]=ed;ed.__name__=!0;ed.i32ToFloat=function(a){var b=a>>>23&255,d=a&8388607;return 0==d&&0==b?0:(1-(a>>>31<<1))*(1+Math.pow(2,-23)*d)*Math.pow(2,b-127)};ed.floatToI32=function(a){if(0==a)return 0;var b;b=0>a?-a:a;var d=Math.floor(Math.log(b)/0.6931471805599453);-127>
d?d=-127:128<d&&(d=128);b=Math.round(8388608*(b/Math.pow(2,d)-1))&8388607;return(0>a?-2147483648:0)|d+127<<23|b};ed.i64ToDouble=function(a,b){var d=(b>>20&2047)-1023,m=4294967296*(b&1048575)+2147483648*(a>>>31)+(a&2147483647);return 0==m&&-1023==d?0:(1-(b>>>31<<1))*(1+Math.pow(2,-52)*m)*Math.pow(2,d)};ed.doubleToI64=function(a){var b=ed.i64tmp;if(0==a)b.low=0,b.high=0;else{var d;d=0>a?-a:a;var m=Math.floor(Math.log(d)/0.6931471805599453);d=4503599627370496*(d/Math.pow(2,m)-1);d=Math.round(d);b.low=
d|0;b.high=(0>a?-2147483648:0)|m+1023<<20|d/4294967296|0}return b};var Ef=function(a){Fd.call(this,$b.ofString(a))};j["haxe.io.StringInput"]=Ef;Ef.__name__=!0;Ef.__super__=Fd;Ef.prototype=z(Fd.prototype,{__class__:Ef});var Pb=j["haxe.xml.Filter"]={__ename__:!0,__constructs__:["FInt","FBool","FEnum","FReg"]};Pb.FInt=["FInt",0];Pb.FInt.toString=g;Pb.FInt.__enum__=Pb;Pb.FBool=["FBool",1];Pb.FBool.toString=g;Pb.FBool.__enum__=Pb;Pb.FEnum=function(a){a=["FEnum",2,a];a.__enum__=Pb;a.toString=g;return a};
Pb.FReg=function(a){a=["FReg",3,a];a.__enum__=Pb;a.toString=g;return a};var Qb=j["haxe.xml.Attrib"]={__ename__:!0,__constructs__:["Att"]};Qb.Att=function(a,b,d){a=["Att",0,a,b,d];a.__enum__=Qb;a.toString=g;return a};var F=j["haxe.xml.Rule"]={__ename__:!0,__constructs__:"RNode,RData,RMulti,RList,RChoice,ROptional".split(",")};F.RNode=function(a,b,d){a=["RNode",0,a,b,d];a.__enum__=F;a.toString=g;return a};F.RData=function(a){a=["RData",1,a];a.__enum__=F;a.toString=g;return a};F.RMulti=function(a,b){var d=
["RMulti",2,a,b];d.__enum__=F;d.toString=g;return d};F.RList=function(a,b){var d=["RList",3,a,b];d.__enum__=F;d.toString=g;return d};F.RChoice=function(a){a=["RChoice",4,a];a.__enum__=F;a.toString=g;return a};F.ROptional=function(a){a=["ROptional",5,a];a.__enum__=F;a.toString=g;return a};var L=j["haxe.xml._Check.CheckResult"]={__ename__:!0,__constructs__:"CMatch,CMissing,CExtra,CElementExpected,CDataExpected,CExtraAttrib,CMissingAttrib,CInvalidAttrib,CInvalidData,CInElement".split(",")};L.CMatch=
["CMatch",0];L.CMatch.toString=g;L.CMatch.__enum__=L;L.CMissing=function(a){a=["CMissing",1,a];a.__enum__=L;a.toString=g;return a};L.CExtra=function(a){a=["CExtra",2,a];a.__enum__=L;a.toString=g;return a};L.CElementExpected=function(a,b){var d=["CElementExpected",3,a,b];d.__enum__=L;d.toString=g;return d};L.CDataExpected=function(a){a=["CDataExpected",4,a];a.__enum__=L;a.toString=g;return a};L.CExtraAttrib=function(a,b){var d=["CExtraAttrib",5,a,b];d.__enum__=L;d.toString=g;return d};L.CMissingAttrib=
function(a,b){var d=["CMissingAttrib",6,a,b];d.__enum__=L;d.toString=g;return d};L.CInvalidAttrib=function(a,b,d){a=["CInvalidAttrib",7,a,b,d];a.__enum__=L;a.toString=g;return a};L.CInvalidData=function(a,b){var d=["CInvalidData",8,a,b];d.__enum__=L;d.toString=g;return d};L.CInElement=function(a,b){var d=["CInElement",9,a,b];d.__enum__=L;d.toString=g;return d};var N=function(){};j["haxe.xml.Check"]=N;N.__name__=!0;N.isBlank=function(a){return a.nodeType==q.PCData&&N.blanks.match(function(){if(a.nodeType==
q.Document||a.nodeType==q.Element)throw new p("Bad node type, unexpected "+a.nodeType);return a.nodeValue}(this))||a.nodeType==q.Comment};N.filterMatch=function(a,b){switch(b[1]){case 0:return N.filterMatch(a,Pb.FReg(new mb("[0-9]+","")));case 1:return N.filterMatch(a,Pb.FEnum(["true","false","0","1"]));case 2:for(var d=b[2],m=0;m<d.length;){var c=d[m];++m;if(a==c)return!0}return!1;case 3:return b[2].match(a)}};N.isNullable=function(a){switch(a[1]){case 2:var b=a[2];return!0!=a[3]||N.isNullable(b);
case 3:a=a[2];for(b=0;b<a.length;){var d=a[b];++b;if(!N.isNullable(d))return!1}return!0;case 4:a=a[2];for(b=0;b<a.length;)if(d=a[b],++b,N.isNullable(d))return!0;return!1;case 1:return!1;case 0:return!1;case 5:return!0}};N.check=function(a,b){switch(b[1]){case 0:var d=b[4],m=b[3],c=b[2],i;if(!(i=a.nodeType!=q.Element)){if(a.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+a.nodeType);i=a.nodeName!=c}if(i)return L.CElementExpected(c,a);m=null==m?[]:m.slice();for(c=a.attributes();c.hasNext();){i=
c.next();for(var o=!1,h=0;h<m.length;){var e=m[h];++h;var g=e[3],j=e[2];if(i==j){if(null!=g&&!N.filterMatch(a.get(i),g))return L.CInvalidAttrib(j,a,g);C.remove(m,e);o=!0}}if(!o)return L.CExtraAttrib(i,a)}for(c=0;c<m.length;)if(i=m[c],++c,o=i[2],null==i[4])return L.CMissingAttrib(o,a);null==d&&(d=F.RList([]));d=N.checkList(function(){if(a.nodeType!=q.Document&&a.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+a.nodeType);return C.iter(a.children)}(this),d);
if(d!=L.CMatch)return L.CInElement(a,d);for(d=0;d<m.length;)c=m[d],++d,a.set(c[2],c[4]);return L.CMatch;case 1:return d=b[2],a.nodeType!=q.PCData&&a.nodeType!=q.CData?L.CDataExpected(a):null!=d&&!N.filterMatch(function(){if(a.nodeType==q.Document||a.nodeType==q.Element)throw new p("Bad node type, unexpected "+a.nodeType);return a.nodeValue}(this),d)?L.CInvalidData(a,d):L.CMatch;case 4:d=b[2];if(0==d.length)throw new p("No choice possible");for(m=0;m<d.length;)if(c=d[m],++m,N.check(a,c)==L.CMatch)return L.CMatch;
return N.check(a,d[0]);case 5:return N.check(a,b[2]);default:throw new p("Unexpected "+r.string(b));}};N.checkList=function(a,b){switch(b[1]){case 3:for(var d=b[3],m=b[2].slice();a.hasNext();){var c=a.next();if(!N.isBlank(c)){for(var i=!1,o=0;o<m.length;){var h=m[o];++o;var e=N.checkList(C.iter([c]),h);if(e==L.CMatch){i=!0;switch(h[1]){case 2:o=h[2];if(h[3])for(var e=0,g=m.length;e<g;){var j=e++;m[j]==h&&(m[j]=F.RMulti(o))}break;default:C.remove(m,h)}break}else if(d&&!N.isNullable(h))return e}if(!i)return L.CExtra(c)}}for(d=
0;d<m.length;)if(c=m[d],++d,!N.isNullable(c))return L.CMissing(c);return L.CMatch;case 2:m=b[3];d=b[2];for(c=!1;a.hasNext();)if(i=a.next(),!N.isBlank(i)){c=N.checkList(C.iter([i]),d);if(c!=L.CMatch)return c;c=!0}return m&&!c?L.CMissing(d):L.CMatch;default:for(m=!1;a.hasNext();)if(d=a.next(),!N.isBlank(d)){m=N.check(d,b);if(m!=L.CMatch)return m;m=!0;break}if(!m)switch(b[1]){case 5:break;default:return L.CMissing(b)}for(;a.hasNext();)if(m=a.next(),!N.isBlank(m))return L.CExtra(m);return L.CMatch}};
N.makeWhere=function(a){if(0==a.length)return"";for(var b="In ",d=!0,c=0;c<a.length;){var f=a[c];++c;d?d=!1:b+=".";if(f.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+f.nodeType);b+=f.nodeName}return b+": "};N.makeString=function(a){if(a.nodeType==q.Element){if(a.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+a.nodeType);return"element "+a.nodeName}if(a.nodeType==q.Document||a.nodeType==q.Element)throw new p("Bad node type, unexpected "+
a.nodeType);a=a.nodeValue.split("\r").join("\\r").split("\n").join("\\n").split("\t").join("\\t");return 20<a.length?C.substr(a,0,17)+"...":a};N.makeRule=function(a){switch(a[1]){case 0:return"element "+a[2];case 1:return"data";case 2:return N.makeRule(a[2]);case 3:return N.makeRule(a[2][0]);case 4:return N.makeRule(a[2][0]);case 5:return N.makeRule(a[2])}};N.makeError=function(a,b){null==b&&(b=[]);switch(a[1]){case 0:throw new p("assert");case 1:var d=a[2];return N.makeWhere(b)+"Missing "+N.makeRule(d);
case 2:return d=a[2],N.makeWhere(b)+"Unexpected "+N.makeString(d);case 3:var d=a[3],c=a[2];return N.makeWhere(b)+N.makeString(d)+" while expected element "+c;case 4:return d=a[2],N.makeWhere(b)+N.makeString(d)+" while data expected";case 5:return d=a[2],b.push(a[3]),N.makeWhere(b)+"unexpected attribute "+d;case 6:return d=a[2],b.push(a[3]),N.makeWhere(b)+"missing required attribute "+d;case 7:return d=a[2],b.push(a[3]),N.makeWhere(b)+"invalid attribute value for "+d;case 8:return d=a[2],N.makeWhere(b)+
"invalid data format for "+N.makeString(d);case 9:return d=a[3],b.push(a[2]),N.makeError(d,b)}};N.checkNode=function(a,b){var d=N.checkList(C.iter([a]),b);if(d!=L.CMatch)throw new p(N.makeError(d));};var Ei=function(a){this.__x=a};j["haxe.xml._Fast.NodeAccess"]=Ei;Ei.__name__=!0;Ei.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b)throw b=this.__x.nodeType==q.Document?"Document":this.__x.get_nodeName(),new p(b+" is missing element "+a);return new Ud(b)},__class__:Ei};
var Fi=function(a){this.__x=a};j["haxe.xml._Fast.AttribAccess"]=Fi;Fi.__name__=!0;Fi.prototype={resolve:function(a){if(this.__x.nodeType==q.Document)throw new p("Cannot access document attribute "+a);var b=this.__x.get(a);if(null==b)throw new p(this.__x.get_nodeName()+" is missing attribute "+a);return b},__class__:Fi};var Gi=function(a){this.__x=a};j["haxe.xml._Fast.HasAttribAccess"]=Gi;Gi.__name__=!0;Gi.prototype={resolve:function(a){if(this.__x.nodeType==q.Document)throw new p("Cannot access document attribute "+
a);return this.__x.exists(a)},__class__:Gi};var Hi=function(a){this.__x=a};j["haxe.xml._Fast.HasNodeAccess"]=Hi;Hi.__name__=!0;Hi.prototype={resolve:function(a){return this.__x.elementsNamed(a).hasNext()},__class__:Hi};var Ii=function(a){this.__x=a};j["haxe.xml._Fast.NodeListAccess"]=Ii;Ii.__name__=!0;Ii.prototype={resolve:function(a){for(var b=new Zh,a=this.__x.elementsNamed(a);a.hasNext();){var d=a.next();b.add(new Ud(d))}return b},__class__:Ii};var Ud=function(a){if(a.nodeType!=q.Document&&a.nodeType!=
q.Element)throw new p("Invalid nodeType "+a.nodeType);this.x=a;this.node=new Ei(a);this.nodes=new Ii(a);this.att=new Fi(a);this.has=new Gi(a);this.hasNode=new Hi(a)};j["haxe.xml.Fast"]=Ud;Ud.__name__=!0;Ud.prototype={get_name:function(){return this.x.nodeType==q.Document?"Document":this.x.get_nodeName()},get_elements:function(){var a=this.x.elements();return{hasNext:v(a,a.hasNext),next:function(){var b=a.next();return null==b?null:new Ud(b)}}},__class__:Ud,__properties__:{get_elements:"get_elements",
get_name:"get_name"}};var md=function(){};j["haxe.xml.Parser"]=md;md.__name__=!0;md.parse=function(a,b){null==b&&(b=!1);var d=q.createDocument();md.doParse(a,b,0,d);return d};md.doParse=function(a,b,d,c){null==d&&(d=0);for(var f=null,i=1,o=1,h=null,e=0,g=0,j=0,k=a.charCodeAt(d),l=new yb,n=1,t=-1;k==k;){switch(i){case 0:switch(k){case 10:case 13:case 9:case 32:break;default:i=o;continue}break;case 1:switch(k){case 60:i=0;o=2;break;default:e=d;i=13;continue}break;case 13:60==k?(l.addSub(a,e,d-e),o=
q.createPCData(l.b),l=new yb,c.addChild(o),g++,i=0,o=2):38==k&&(l.addSub(a,e,d-e),i=18,n=13,e=d+1);break;case 17:93==k&&93==a.charCodeAt(d+1)&&62==a.charCodeAt(d+2)&&(k=q.createCData(C.substr(a,e,d-e)),c.addChild(k),g++,d+=2,i=1);break;case 2:switch(k){case 33:if(91==a.charCodeAt(d+1)){d+=2;if("CDATA["!=C.substr(a,d,6).toUpperCase())throw new p("Expected <![CDATA[");d+=5;i=17}else if(68==a.charCodeAt(d+1)||100==a.charCodeAt(d+1)){if("OCTYPE"!=C.substr(a,d+2,6).toUpperCase())throw new p("Expected <!DOCTYPE");
d+=8;i=16}else{if(45!=a.charCodeAt(d+1)||45!=a.charCodeAt(d+2))throw new p("Expected <\!--");d+=2;i=15}e=d+1;break;case 63:i=14;e=d;break;case 47:if(null==c)throw new p("Expected node name");e=d+1;i=0;o=10;break;default:i=3;e=d;continue}break;case 3:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(d==e)throw new p("Expected node name");f=q.createElement(C.substr(a,e,d-e));c.addChild(f);g++;i=0;o=4;continue}break;case 4:switch(k){case 47:i=11;break;case 62:i=9;break;
default:i=5;e=d;continue}break;case 5:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(e==d)throw new p("Expected attribute name");h=C.substr(a,e,d-e);if(f.exists(h))throw new p("Duplicate attribute");i=0;o=6;continue}break;case 6:switch(k){case 61:i=0;o=7;break;default:throw new p("Expected =");}break;case 7:switch(k){case 34:case 39:l=new yb;i=8;e=d+1;t=k;break;default:throw new p('Expected "');}break;case 8:switch(k){case 38:l.addSub(a,e,d-e);i=18;n=8;e=d+1;break;
case 62:if(b)throw new p("Invalid unescaped "+String.fromCharCode(k)+" in attribute value");k==t&&(l.addSub(a,e,d-e),o=l.b,l=new yb,f.set(h,o),i=0,o=4);break;case 60:if(b)throw new p("Invalid unescaped "+String.fromCharCode(k)+" in attribute value");k==t&&(l.addSub(a,e,d-e),o=l.b,l=new yb,f.set(h,o),i=0,o=4);break;default:k==t&&(l.addSub(a,e,d-e),o=l.b,l=new yb,f.set(h,o),i=0,o=4)}break;case 9:e=d=md.doParse(a,b,d,f);i=1;break;case 11:switch(k){case 62:i=1;break;default:throw new p("Expected >");
}break;case 12:switch(k){case 62:return 0==g&&c.addChild(q.createPCData("")),d;default:throw new p("Expected >");}case 10:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(e==d)throw new p("Expected node name");o=C.substr(a,e,d-e);if(c.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+c.nodeType);if(o!=c.nodeName)throw new p("Expected </"+function(){if(c.nodeType!=q.Element)throw"Bad node type, expected Element but found "+c.nodeType;return c.nodeName}(this)+
">");i=0;o=12;continue}break;case 15:45==k&&45==a.charCodeAt(d+1)&&62==a.charCodeAt(d+2)&&(k=q.createComment(C.substr(a,e,d-e)),c.addChild(k),g++,d+=2,i=1);break;case 16:91==k?j++:93==k?j--:62==k&&0==j&&(k=q.createDocType(C.substr(a,e,d-e)),c.addChild(k),g++,i=1);break;case 14:63==k&&62==a.charCodeAt(d+1)&&(d++,k=C.substr(a,e+1,d-e-2),k=q.createProcessingInstruction(k),c.addChild(k),g++,i=1);break;case 18:if(59==k){e=C.substr(a,e,d-e);if(35==e.charCodeAt(0))e=120==e.charCodeAt(1)?r.parseInt("0"+C.substr(e,
1,e.length-1)):r.parseInt(C.substr(e,1,e.length-1)),l.b+=String.fromCharCode(e);else if(md.escapes.exists(e))l.add(md.escapes.get(e));else{if(b)throw new p("Undefined entity: "+e);l.b+=r.string("&"+e+";")}e=d+1;i=n}else if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)&&35!=k){if(b)throw new p("Invalid character in entity: "+String.fromCharCode(k));l.b+="&";l.addSub(a,e,d-e);d--;e=d+1;i=n}}k=fa.fastCodeAt(a,++d)}1==i&&(e=d,i=13);if(13==i){if(d!=e||0==g)l.addSub(a,e,d-e),
a=q.createPCData(l.b),c.addChild(a),g++;return d}if(!b&&18==i&&13==n)return l.b+="&",l.addSub(a,e,d-e),a=q.createPCData(l.b),c.addChild(a),g++,d;throw new p("Unexpected end");};var Ge=function(a){this.output=new yb;this.pretty=a};j["haxe.xml.Printer"]=Ge;Ge.__name__=!0;Ge.print=function(a,b){null==b&&(b=!1);var d=new Ge(b);d.writeNode(a,"");return d.output.b};Ge.prototype={writeNode:function(a,b){switch(a.nodeType){case 2:this.output.b+=r.string(b+"<![CDATA[");this.write(fa.trim(function(){if(a.nodeType==
q.Document||a.nodeType==q.Element)throw new p("Bad node type, unexpected "+a.nodeType);return a.nodeValue}(this)));this.output.b+="]]\>";this.pretty&&(this.output.b+="");break;case 3:var d;if(a.nodeType==q.Document||a.nodeType==q.Element)throw new p("Bad node type, unexpected "+a.nodeType);d=a.nodeValue;d=(new mb("[\n\r\t]+","g")).replace(d,"");this.output.b=null==b?this.output.b+"null":this.output.b+(""+b);this.write(fa.trim("<\!--"+d+"--\>"));this.pretty&&(this.output.b+="");break;case 6:if(a.nodeType!=
q.Document&&a.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+a.nodeType);for(d=C.iter(a.children);d.hasNext();)this.writeNode(d.next(),b);break;case 0:this.output.b+=r.string(b+"<");this.write(function(){if(a.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+a.nodeType);return a.nodeName}(this));for(d=a.attributes();d.hasNext();){var c=d.next();this.output.b+=r.string(" "+c+'="');this.write(fa.htmlEscape(a.get(c),!0));this.output.b+=
'"'}if(this.hasChildren(a)){this.output.b+=">";this.pretty&&(this.output.b+="");if(a.nodeType!=q.Document&&a.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+a.nodeType);for(d=C.iter(a.children);d.hasNext();)this.writeNode(d.next(),this.pretty?b+"\t":b);this.output.b+=r.string(b+"</");this.write(function(){if(a.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+a.nodeType);return a.nodeName}(this));this.output.b+=">"}else this.output.b+=
"/>";this.pretty&&(this.output.b+="");break;case 1:if(a.nodeType==q.Document||a.nodeType==q.Element)throw new p("Bad node type, unexpected "+a.nodeType);d=a.nodeValue;0!=d.length&&(this.write(b+fa.htmlEscape(d)),this.pretty&&(this.output.b+=""));break;case 5:this.write("<?"+function(){if(a.nodeType==q.Document||a.nodeType==q.Element)throw new p("Bad node type, unexpected "+a.nodeType);return a.nodeValue}(this)+"?>");break;case 4:this.write("<!DOCTYPE "+function(){if(a.nodeType==q.Document||a.nodeType==
q.Element)throw new p("Bad node type, unexpected "+a.nodeType);return a.nodeValue}(this)+">")}},write:function(a){this.output.b=null==a?this.output.b+"null":this.output.b+(""+a)},hasChildren:function(a){if(a.nodeType!=q.Document&&a.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+a.nodeType);for(a=C.iter(a.children);a.hasNext();){var b=a.next();switch(b.nodeType){case 0:case 1:return!0;case 2:case 3:if(0!=fa.ltrim(function(){if(b.nodeType==q.Document||b.nodeType==
q.Element)throw new p("Bad node type, unexpected "+b.nodeType);return b.nodeValue}(this)).length)return!0}}return!1},__class__:Ge};var ac=j["hscript.Const"]={__ename__:!0,__constructs__:["CInt","CFloat","CString"]};ac.CInt=function(a){a=["CInt",0,a];a.__enum__=ac;a.toString=g;return a};ac.CFloat=function(a){a=["CFloat",1,a];a.__enum__=ac;a.toString=g;return a};ac.CString=function(a){a=["CString",2,a];a.__enum__=ac;a.toString=g;return a};var s=j["hscript.Expr"]={__ename__:!0,__constructs__:"EConst,EIdent,EVar,EParent,EBlock,EField,EBinop,EUnop,ECall,EIf,EWhile,EFor,EBreak,EContinue,EFunction,EReturn,EArray,EArrayDecl,ENew,EThrow,ETry,EObject,ETernary,ESwitch".split(",")};
s.EConst=function(a){a=["EConst",0,a];a.__enum__=s;a.toString=g;return a};s.EIdent=function(a){a=["EIdent",1,a];a.__enum__=s;a.toString=g;return a};s.EVar=function(a,b,d){a=["EVar",2,a,b,d];a.__enum__=s;a.toString=g;return a};s.EParent=function(a){a=["EParent",3,a];a.__enum__=s;a.toString=g;return a};s.EBlock=function(a){a=["EBlock",4,a];a.__enum__=s;a.toString=g;return a};s.EField=function(a,b){var d=["EField",5,a,b];d.__enum__=s;d.toString=g;return d};s.EBinop=function(a,b,d){a=["EBinop",6,a,b,
d];a.__enum__=s;a.toString=g;return a};s.EUnop=function(a,b,d){a=["EUnop",7,a,b,d];a.__enum__=s;a.toString=g;return a};s.ECall=function(a,b){var d=["ECall",8,a,b];d.__enum__=s;d.toString=g;return d};s.EIf=function(a,b,d){a=["EIf",9,a,b,d];a.__enum__=s;a.toString=g;return a};s.EWhile=function(a,b){var d=["EWhile",10,a,b];d.__enum__=s;d.toString=g;return d};s.EFor=function(a,b,d){a=["EFor",11,a,b,d];a.__enum__=s;a.toString=g;return a};s.EBreak=["EBreak",12];s.EBreak.toString=g;s.EBreak.__enum__=s;s.EContinue=
["EContinue",13];s.EContinue.toString=g;s.EContinue.__enum__=s;s.EFunction=function(a,b,d,c){a=["EFunction",14,a,b,d,c];a.__enum__=s;a.toString=g;return a};s.EReturn=function(a){a=["EReturn",15,a];a.__enum__=s;a.toString=g;return a};s.EArray=function(a,b){var d=["EArray",16,a,b];d.__enum__=s;d.toString=g;return d};s.EArrayDecl=function(a){a=["EArrayDecl",17,a];a.__enum__=s;a.toString=g;return a};s.ENew=function(a,b){var d=["ENew",18,a,b];d.__enum__=s;d.toString=g;return d};s.EThrow=function(a){a=
["EThrow",19,a];a.__enum__=s;a.toString=g;return a};s.ETry=function(a,b,d,c){a=["ETry",20,a,b,d,c];a.__enum__=s;a.toString=g;return a};s.EObject=function(a){a=["EObject",21,a];a.__enum__=s;a.toString=g;return a};s.ETernary=function(a,b,d){a=["ETernary",22,a,b,d];a.__enum__=s;a.toString=g;return a};s.ESwitch=function(a,b,d){a=["ESwitch",23,a,b,d];a.__enum__=s;a.toString=g;return a};var bc=j["hscript.CType"]={__ename__:!0,__constructs__:["CTPath","CTFun","CTAnon","CTParent"]};bc.CTPath=function(a,b){var d=
["CTPath",0,a,b];d.__enum__=bc;d.toString=g;return d};bc.CTFun=function(a,b){var d=["CTFun",1,a,b];d.__enum__=bc;d.toString=g;return d};bc.CTAnon=function(a){a=["CTAnon",2,a];a.__enum__=bc;a.toString=g;return a};bc.CTParent=function(a){a=["CTParent",3,a];a.__enum__=bc;a.toString=g;return a};var ba=j["hscript.Error"]={__ename__:!0,__constructs__:"EInvalidChar,EUnexpected,EUnterminatedString,EUnterminatedComment,EUnknownVariable,EInvalidIterator,EInvalidOp,EInvalidAccess".split(",")};ba.EInvalidChar=
function(a){a=["EInvalidChar",0,a];a.__enum__=ba;a.toString=g;return a};ba.EUnexpected=function(a){a=["EUnexpected",1,a];a.__enum__=ba;a.toString=g;return a};ba.EUnterminatedString=["EUnterminatedString",2];ba.EUnterminatedString.toString=g;ba.EUnterminatedString.__enum__=ba;ba.EUnterminatedComment=["EUnterminatedComment",3];ba.EUnterminatedComment.toString=g;ba.EUnterminatedComment.__enum__=ba;ba.EUnknownVariable=function(a){a=["EUnknownVariable",4,a];a.__enum__=ba;a.toString=g;return a};ba.EInvalidIterator=
function(a){a=["EInvalidIterator",5,a];a.__enum__=ba;a.toString=g;return a};ba.EInvalidOp=function(a){a=["EInvalidOp",6,a];a.__enum__=ba;a.toString=g;return a};ba.EInvalidAccess=function(a){a=["EInvalidAccess",7,a];a.__enum__=ba;a.toString=g;return a};var wa=j["hscript._Interp.Stop"]={__ename__:!0,__constructs__:["SBreak","SContinue","SReturn"]};wa.SBreak=["SBreak",0];wa.SBreak.toString=g;wa.SBreak.__enum__=wa;wa.SContinue=["SContinue",1];wa.SContinue.toString=g;wa.SContinue.__enum__=wa;wa.SReturn=
function(a){a=["SReturn",2,a];a.__enum__=wa;a.toString=g;return a};var Ji=function(){this.variables=new E;this.locals=new E;this.variables.set("null",null);this.variables.set("true",!0);this.variables.set("false",!1);this.variables.set("trace",function(a){ik.trace(r.string(a),{fileName:"hscript",lineNumber:0})});this.initOps()};j["hscript.Interp"]=Ji;Ji.__name__=!0;Ji.prototype={initOps:function(){var a=this;this.binops=new E;this.binops.set("+",function(b,d){return a.expr(b)+a.expr(d)});this.binops.set("-",
function(b,d){return a.expr(b)-a.expr(d)});this.binops.set("*",function(b,d){return a.expr(b)*a.expr(d)});this.binops.set("/",function(b,d){return a.expr(b)/a.expr(d)});this.binops.set("%",function(b,d){return a.expr(b)%a.expr(d)});this.binops.set("&",function(b,d){return a.expr(b)&a.expr(d)});this.binops.set("|",function(b,d){return a.expr(b)|a.expr(d)});this.binops.set("^",function(b,d){return a.expr(b)^a.expr(d)});this.binops.set("<<",function(b,d){return a.expr(b)<<a.expr(d)});this.binops.set(">>",
function(b,d){return a.expr(b)>>a.expr(d)});this.binops.set(">>>",function(b,d){return a.expr(b)>>>a.expr(d)});this.binops.set("==",function(b,d){return a.expr(b)==a.expr(d)});this.binops.set("!=",function(b,d){return a.expr(b)!=a.expr(d)});this.binops.set(">=",function(b,d){return a.expr(b)>=a.expr(d)});this.binops.set("<=",function(b,d){return a.expr(b)<=a.expr(d)});this.binops.set(">",function(b,d){return a.expr(b)>a.expr(d)});this.binops.set("<",function(b,d){return a.expr(b)<a.expr(d)});this.binops.set("||",
function(b,d){return!0==a.expr(b)||!0==a.expr(d)});this.binops.set("&&",function(b,d){return!0==a.expr(b)&&!0==a.expr(d)});this.binops.set("=",v(this,this.assign));this.binops.set("...",function(b,d){return new Yh(a.expr(b),a.expr(d))});this.assignOp("+=",function(a,d){return a+d});this.assignOp("-=",function(a,d){return a-d});this.assignOp("*=",function(a,d){return a*d});this.assignOp("/=",function(a,d){return a/d});this.assignOp("%=",function(a,d){return a%d});this.assignOp("&=",function(a,d){return a&
d});this.assignOp("|=",function(a,d){return a|d});this.assignOp("^=",function(a,d){return a^d});this.assignOp("<<=",function(a,d){return a<<d});this.assignOp(">>=",function(a,d){return a>>d});this.assignOp(">>>=",function(a,d){return a>>>d})},assign:function(a,b){var d=this.expr(b);switch(a[1]){case 1:var c=a[2],f=this.locals.get(c);null==f?this.variables.set(c,d):f.r=d;break;case 5:c=a[3];d=this.set(this.expr(a[2]),c,d);break;case 16:c=a[3];this.expr(a[2])[this.expr(c)]=d;break;default:this.error(ba.EInvalidOp("="))}return d},
assignOp:function(a,b){var d=this;this.binops.set(a,function(c,f){return d.evalAssignOp(a,b,c,f)})},evalAssignOp:function(a,b,d,c){switch(d[1]){case 1:var a=d[2],f=this.locals.get(a),b=b(this.expr(d),this.expr(c));null==f?this.variables.set(a,b):f.r=b;break;case 5:a=d[3];d=this.expr(d[2]);b=b(this.get(d,a),this.expr(c));b=this.set(d,a,b);break;case 16:a=d[3];d=this.expr(d[2]);a=this.expr(a);b=b(d[a],this.expr(c));d[a]=b;break;default:return this.error(ba.EInvalidOp(a))}return b},increment:function(a,
b,d){switch(a[1]){case 1:var c=a[2],a=this.locals.get(c),f;f=null==a?this.variables.get(c):a.r;b?(f+=d,null==a?this.variables.set(c,f):a.r=f):null==a?this.variables.set(c,f+d):a.r=f+d;return f;case 5:return c=a[3],a=this.expr(a[2]),f=this.get(a,c),b?(f+=d,this.set(a,c,f)):this.set(a,c,f+d),f;case 16:return f=a[3],c=this.expr(a[2]),a=this.expr(f),f=c[a],b?(f+=d,c[a]=f):c[a]=f+d,f;default:return this.error(ba.EInvalidOp(0<d?"++":"--"))}},execute:function(a){this.depth=0;this.locals=new E;this.declared=
[];return this.exprReturn(a)},exprReturn:function(a){try{return this.expr(a)}catch(b){if(b instanceof p&&(b=b.val),A.__instanceof(b,wa))switch(b[1]){case 0:throw new p("Invalid break");case 1:throw new p("Invalid continue");case 2:return b[2]}else throw b;}return null},duplicate:function(a){for(var b=new E,d=a.keys();d.hasNext();){var c=d.next(),f;f=null!=Ob[c]?a.getReserved(c):a.h[c];null!=Ob[c]?b.setReserved(c,f):b.h[c]=f}return b},restore:function(a){for(;this.declared.length>a;){var b=this.declared.pop();
this.locals.set(b.n,b.old)}},error:function(a){throw new p(a);},resolve:function(a){var b=this.locals.get(a);if(null!=b)return b.r;b=this.variables.get(a);null==b&&!this.variables.exists(a)&&this.error(ba.EUnknownVariable(a));return b},expr:function(a){var b=this;switch(a[1]){case 0:a=a[2];switch(a[1]){case 0:return a[2];case 1:return a[2];case 2:return a[2]}break;case 1:return this.resolve(a[2]);case 2:var d=a[4],a=a[2];this.declared.push({n:a,old:this.locals.get(a)});d={r:null==d?null:this.expr(d)};
this.locals.set(a,d);break;case 3:return this.expr(a[2]);case 4:for(var a=a[2],d=this.declared.length,c=null,f=0;f<a.length;)c=a[f],++f,c=this.expr(c);this.restore(d);return c;case 5:return d=a[3],this.get(this.expr(a[2]),d);case 6:return d=a[4],f=a[3],a=a[2],c=this.binops.get(a),null==c&&this.error(ba.EInvalidOp(a)),c(f,d);case 7:d=a[4];f=a[3];a=a[2];switch(a){case "!":return!0!=this.expr(d);case "-":return-this.expr(d);case "++":return this.increment(d,f,1);case "--":return this.increment(d,f,-1);
case "~":return~this.expr(d);default:this.error(ba.EInvalidOp(a))}break;case 8:d=a[3];f=a[2];a=[];for(c=0;c<d.length;){var i=d[c];++c;a.push(this.expr(i))}switch(f[1]){case 5:return d=f[3],f=this.expr(f[2]),null==f&&this.error(ba.EInvalidAccess(d)),this.fcall(f,d,a);default:return this.call(null,this.expr(f),a)}case 9:d=a[4];f=a[3];if(!0==this.expr(a[2]))return this.expr(f);if(null==d)break;else return this.expr(d);case 10:this.whileLoop(a[2],a[3]);break;case 11:this.forLoop(a[2],a[3],a[4]);break;
case 12:throw new p(wa.SBreak);case 13:throw new p(wa.SContinue);case 15:throw a=a[2],new p(wa.SReturn(null==a?null:this.expr(a)));case 14:for(var o=a[4],h=a[3],e=a[2],g=this.duplicate(this.locals),j=this,k=0,a=0;a<e.length;)d=e[a],++a,d.opt||k++;a=ha.makeVarArgs(function(a){if(a.length!=e.length){if(a.length<k)throw a="Invalid number of parameters. Got "+a.length+", required "+k,null!=o&&(a+=" for function '"+o+"'"),new p(a);for(var d=[],c=a.length-k,m=0,f=0;f<e.length;){var i=e[f];++f;i.opt?0<c?
(d.push(a[m++]),c--):d.push(null):d.push(a[m++])}a=d}d=j.locals;c=j.depth;j.depth++;j.locals=j.duplicate(g);m=0;for(f=e.length;m<f;)i=m++,j.locals.set(e[i].name,{r:a[i]});a=null;if(b.inTry)try{a=j.exprReturn(h)}catch(l){throw l instanceof p&&(l=l.val),j.locals=d,j.depth=c,new p(l);}else a=j.exprReturn(h);j.locals=d;j.depth=c;return a});null!=o&&(0==this.depth?this.variables.set(o,a):(this.declared.push({n:o,old:this.locals.get(o)}),d={r:a},this.locals.set(o,d),null!=Ob[o]?g.setReserved(o,d):g.h[o]=
d));return a;case 17:a=a[2];d=[];for(f=0;f<a.length;)c=a[f],++f,d.push(this.expr(c));return d;case 16:return d=a[3],this.expr(a[2])[this.expr(d)];case 18:d=a[3];a=a[2];f=[];for(c=0;c<d.length;)i=d[c],++c,f.push(this.expr(i));return this.cnew(a,f);case 19:throw new p(this.expr(a[2]));case 20:var d=a[5],f=a[3],l=a[2],a=this.declared.length,c=this.inTry;try{return this.inTry=!0,i=this.expr(l),this.restore(a),this.inTry=c,i}catch(n){n instanceof p&&(n=n.val);if(A.__instanceof(n,wa))throw this.inTry=c,
new p(n);i=n;this.restore(a);this.inTry=c;this.declared.push({n:f,old:this.locals.get(f)});this.locals.set(f,{r:i});d=this.expr(d);this.restore(a);return d}case 21:a=a[2];d={};for(f=0;f<a.length;)c=a[f],++f,this.set(d,c.name,this.expr(c.e));return d;case 22:return d=a[4],f=a[3],!0==this.expr(a[2])?this.expr(f):this.expr(d);case 23:d=a[4];f=a[3];a=this.expr(a[2]);c=!1;for(i=0;i<f.length;){l=f[i];++i;for(var q=0,t=l.values;q<t.length;){var r=t[q];++q;if(this.expr(r)==a){c=!0;break}}if(c){a=this.expr(l.expr);
break}}c||(a=null==d?null:this.expr(d));return a}return null},whileLoop:function(a,b){var d=this.declared.length;try{for(;!0==this.expr(a);)try{this.expr(b)}catch(c){if(c instanceof p&&(c=c.val),A.__instanceof(c,wa))switch(c[1]){case 0:throw"__break__";case 2:throw new p(c);}else throw c;}}catch(f){if("__break__"!=f)throw f;}this.restore(d)},makeIterator:function(a){try{a=ak(a)()}catch(b){b instanceof p&&(b=b.val)}(null==a.hasNext||null==a.next)&&this.error(ba.EInvalidIterator(a));return a},forLoop:function(a,
b,d){var c=this.declared.length;this.declared.push({n:a,old:this.locals.get(a)});b=this.makeIterator(this.expr(b));try{for(;b.hasNext();){var f={r:b.next()};this.locals.set(a,f);try{this.expr(d)}catch(i){if(i instanceof p&&(i=i.val),A.__instanceof(i,wa))switch(i[1]){case 0:throw"__break__";case 2:throw new p(i);}else throw i;}}}catch(o){if("__break__"!=o)throw o;}this.restore(c)},get:function(a,b){null==a&&this.error(ba.EInvalidAccess(b));return ha.field(a,b)},set:function(a,b,d){null==a&&this.error(ba.EInvalidAccess(b));
return a[b]=d},fcall:function(a,b,d){return this.call(a,ha.field(a,b),d)},call:function(a,b,d){return ha.callMethod(a,b,d)},cnew:function(a,b){var d=Ua.resolveClass(a);null==d&&(d=this.resolve(a));return Ua.createInstance(d,b)},__class__:Ji};var u=j["hscript.Token"]={__ename__:!0,__constructs__:"TEof,TConst,TId,TOp,TPOpen,TPClose,TBrOpen,TBrClose,TDot,TComma,TSemicolon,TBkOpen,TBkClose,TQuestion,TDoubleDot".split(",")};u.TEof=["TEof",0];u.TEof.toString=g;u.TEof.__enum__=u;u.TConst=function(a){a=["TConst",
1,a];a.__enum__=u;a.toString=g;return a};u.TId=function(a){a=["TId",2,a];a.__enum__=u;a.toString=g;return a};u.TOp=function(a){a=["TOp",3,a];a.__enum__=u;a.toString=g;return a};u.TPOpen=["TPOpen",4];u.TPOpen.toString=g;u.TPOpen.__enum__=u;u.TPClose=["TPClose",5];u.TPClose.toString=g;u.TPClose.__enum__=u;u.TBrOpen=["TBrOpen",6];u.TBrOpen.toString=g;u.TBrOpen.__enum__=u;u.TBrClose=["TBrClose",7];u.TBrClose.toString=g;u.TBrClose.__enum__=u;u.TDot=["TDot",8];u.TDot.toString=g;u.TDot.__enum__=u;u.TComma=
["TComma",9];u.TComma.toString=g;u.TComma.__enum__=u;u.TSemicolon=["TSemicolon",10];u.TSemicolon.toString=g;u.TSemicolon.__enum__=u;u.TBkOpen=["TBkOpen",11];u.TBkOpen.toString=g;u.TBkOpen.__enum__=u;u.TBkClose=["TBkClose",12];u.TBkClose.toString=g;u.TBkClose.__enum__=u;u.TQuestion=["TQuestion",13];u.TQuestion.toString=g;u.TQuestion.__enum__=u;u.TDoubleDot=["TDoubleDot",14];u.TDoubleDot.toString=g;u.TDoubleDot.__enum__=u;var Ki=function(){this.uid=0;this.line=1;this.opChars="+*/-=!><&|^%~";this.identChars=
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_";var a=[["%"],["*","/"],["+","-"],["<<",">>",">>>"],["|","&","^"],"==,!=,>,<,>=,<=".split(","),["..."],["&&"],["||"],"=,+=,-=,*=,/=,%=,<<=,>>=,>>>=,|=,&=,^=".split(",")];this.opPriority=new E;this.opRightAssoc=new E;this.unops=new E;for(var b=0,d=a.length;b<d;)for(var c=b++,f=0,i=a[c];f<i.length;){var o=i[f];++f;this.opPriority.set(o,c);9==c&&this.opRightAssoc.set(o,!0)}a=0;for(b=["!","++","--","-","~"];a<b.length;)d=b[a],++a,this.unops.set(d,
"++"==d||"--"==d)};j["hscript.Parser"]=Ki;Ki.__name__=!0;Ki.prototype={error:function(a){throw new p(a);},invalidChar:function(a){this.error(ba.EInvalidChar(a),0,0)},parseString:function(a){this.line=1;this.uid=0;return this.parse(new Ef(a))},parse:function(a){this.tokens=new Bi;this["char"]=-1;this.input=a;this.ops=[];this.idents=[];for(var a=0,b=this.opChars.length;a<b;){var d=a++;this.ops[C.cca(this.opChars,d)]=!0}a=0;for(b=this.identChars.length;a<b;)d=a++,this.idents[C.cca(this.identChars,d)]=
!0;for(a=[];;){b=this.token();if(b==u.TEof)break;this.tokens.add(b);a.push(this.parseFullExpr())}return 1==a.length?a[0]:this.mk(s.EBlock(a),0,null)},unexpected:function(a){this.error(ba.EUnexpected(this.tokenString(a)),0,0);return null},push:function(a){this.tokens.add(a)},ensure:function(a){var b=this.token();b!=a&&this.unexpected(b)},mk:function(a){return a},isBlock:function(a){switch(a[1]){case 4:case 21:case 23:return!0;case 14:return this.isBlock(a[3]);case 2:return a=a[4],null!=a&&this.isBlock(a);
case 9:var b=a[4],a=a[3];return null!=b?this.isBlock(b):this.isBlock(a);case 6:return this.isBlock(a[4]);case 7:return b=a[4],!a[3]&&this.isBlock(b);case 10:return this.isBlock(a[3]);case 11:return this.isBlock(a[4]);case 15:return a=a[2],null!=a&&this.isBlock(a);case 20:return this.isBlock(a[5]);default:return!1}},parseFullExpr:function(){var a=this.parseExpr(),b=this.token();b!=u.TSemicolon&&b!=u.TEof&&(this.isBlock(a)?this.tokens.add(b):this.unexpected(b));return a},parseObject:function(a){var b=
[];try{for(;;){var d=this.token(),c=null;switch(d[1]){case 2:c=d[2];break;case 1:var f=d[2];this.allowJSON||this.unexpected(d);switch(f[1]){case 2:c=f[2];break;default:this.unexpected(d)}break;case 7:throw"__break__";default:this.unexpected(d)}this.ensure(u.TDoubleDot);b.push({name:c,e:this.parseExpr()});d=this.token();switch(d[1]){case 7:throw"__break__";case 9:break;default:this.unexpected(d)}}}catch(i){if("__break__"!=i)throw i;}return this.parseExprNext(this.mk(s.EObject(b),a,null))},parseExpr:function(){var a=
this.token();switch(a[1]){case 2:var a=a[2],b=this.parseStructure(a);null==b&&(b=this.mk(s.EIdent(a),null,null));return this.parseExprNext(b);case 1:return this.parseExprNext(this.mk(s.EConst(a[2]),null,null));case 4:return a=this.parseExpr(),this.ensure(u.TPClose),this.parseExprNext(this.mk(s.EParent(a),0,0));case 6:a=this.token();switch(a[1]){case 7:return this.parseExprNext(this.mk(s.EObject([]),0,null));case 2:b=this.token();this.tokens.add(b);this.tokens.add(a);switch(b[1]){case 14:return this.parseExprNext(this.parseObject(0))}break;
case 1:b=a[2];if(this.allowJSON)switch(b[1]){case 2:b=this.token();this.tokens.add(b);this.tokens.add(a);switch(b[1]){case 14:return this.parseExprNext(this.parseObject(0))}break;default:this.tokens.add(a)}else this.tokens.add(a);break;default:this.tokens.add(a)}for(b=[];;){b.push(this.parseFullExpr());a=this.token();if(a==u.TBrClose)break;this.tokens.add(a)}return this.mk(s.EBlock(b),0,null);case 3:return b=a[2],this.unops.exists(b)?this.makeUnop(b,this.parseExpr()):this.unexpected(a);case 11:b=
[];for(a=this.token();a!=u.TBkClose;)this.tokens.add(a),b.push(this.parseExpr()),a=this.token(),a==u.TComma&&(a=this.token());if(1==b.length)switch(b[0][1]){case 11:case 10:return a="__a_"+this.uid++,this.parseExprNext(this.mk(s.EBlock([this.mk(s.EVar(a,null,this.mk(s.EArrayDecl([]),0,null)),0,null),this.mapCompr(a,b[0]),this.mk(s.EIdent(a),0,null)]),0,null))}return this.parseExprNext(this.mk(s.EArrayDecl(b),0,null));default:return this.unexpected(a)}},mapCompr:function(a,b){var d;switch(b[1]){case 11:d=
s.EFor(b[2],b[3],this.mapCompr(a,b[4]));break;case 10:d=s.EWhile(b[2],this.mapCompr(a,b[3]));break;case 9:d=b[3];var c=b[2];d=null==b[4]?s.EIf(c,this.mapCompr(a,d),null):s.ECall(this.mk(s.EField(this.mk(s.EIdent(a),0,0),"push"),0,0),[b]);break;case 4:switch(b[2].length){case 1:d=s.EBlock([this.mapCompr(a,b[2][0])]);break;default:d=s.ECall(this.mk(s.EField(this.mk(s.EIdent(a),0,0),"push"),0,0),[b])}break;case 3:d=s.EParent(this.mapCompr(a,b[2]));break;default:d=s.ECall(this.mk(s.EField(this.mk(s.EIdent(a),
0,0),"push"),0,0),[b])}return d},makeUnop:function(a,b){switch(b[1]){case 6:var d=b[4];return this.mk(s.EBinop(b[2],this.makeUnop(a,b[3]),d),0,0);case 22:var d=b[4],c=b[3];return this.mk(s.ETernary(this.makeUnop(a,b[2]),c,d),0,0);default:return this.mk(s.EUnop(a,!0,b),0,0)}},makeBinop:function(a,b,d){switch(d[1]){case 6:var c=d[4],f=d[3],i=d[2];return this.opPriority.get(a)<=this.opPriority.get(i)&&!this.opRightAssoc.exists(a)?this.mk(s.EBinop(i,this.makeBinop(a,b,f),c),0,0):this.mk(s.EBinop(a,b,
d),0,0);case 22:return c=d[4],f=d[3],i=d[2],this.opRightAssoc.exists(a)?this.mk(s.EBinop(a,b,d),0,0):this.mk(s.ETernary(this.makeBinop(a,b,i),f,c),0,0);default:return this.mk(s.EBinop(a,b,d),0,0)}},parseStructure:function(a){switch(a){case "if":this.ensure(u.TPOpen);var b=this.parseExpr();this.ensure(u.TPClose);var d=this.parseExpr(),a=null,c=!1,f=this.token();f==u.TSemicolon&&(c=!0,f=this.token());Ua.enumEq(f,u.TId("else"))?a=this.parseExpr():(this.tokens.add(f),c&&this.tokens.add(u.TSemicolon));
return this.mk(s.EIf(b,d,a),0,null==a?0:0);case "var":b=this.token();d=null;switch(b[1]){case 2:d=b[2];break;default:this.unexpected(b)}b=this.token();a=null;b==u.TDoubleDot&&this.allowTypes&&(a=this.parseType(),b=this.token());c=null;Ua.enumEq(b,u.TOp("="))?c=this.parseExpr():this.tokens.add(b);return this.mk(s.EVar(d,a,c),0,null==c?0:0);case "while":return b=this.parseExpr(),d=this.parseExpr(),this.mk(s.EWhile(b,d),0,0);case "for":this.ensure(u.TPOpen);d=this.token();b=null;switch(d[1]){case 2:b=
d[2];break;default:this.unexpected(d)}d=this.token();Ua.enumEq(d,u.TId("in"))||this.unexpected(d);d=this.parseExpr();this.ensure(u.TPClose);a=this.parseExpr();return this.mk(s.EFor(b,d,a),0,0);case "break":return s.EBreak;case "continue":return s.EContinue;case "else":return this.unexpected(u.TId(a));case "function":a=this.token();b=null;switch(a[1]){case 2:b=a[2];break;default:this.tokens.add(a)}this.ensure(u.TPOpen);d=[];a=this.token();if(a!=u.TPClose)for(c=!1;!c;){var i=null,f=!1;switch(a[1]){case 13:f=
!0,a=this.token()}switch(a[1]){case 2:i=a[2];break;default:this.unexpected(a)}a=this.token();i={name:i};d.push(i);f&&(i.opt=!0);a==u.TDoubleDot&&this.allowTypes&&(i.t=this.parseType(),a=this.token());switch(a[1]){case 9:a=this.token();break;case 5:c=!0;break;default:this.unexpected(a)}}c=null;this.allowTypes&&(a=this.token(),a!=u.TDoubleDot?this.tokens.add(a):c=this.parseType());a=this.parseExpr();return this.mk(s.EFunction(d,a,b,c),0,0);case "return":return b=this.token(),this.tokens.add(b),b=b==
u.TSemicolon?null:this.parseExpr(),this.mk(s.EReturn(b),0,null==b?0:0);case "new":b=[];d=this.token();switch(d[1]){case 2:b.push(d[2]);break;default:this.unexpected(d)}for(a=!0;a;)switch(d=this.token(),d[1]){case 8:d=this.token();switch(d[1]){case 2:b.push(d[2]);break;default:this.unexpected(d)}break;case 4:a=!1;break;default:this.unexpected(d)}d=this.parseExprList(u.TPClose);return this.mk(s.ENew(b.join("."),d),0,null);case "throw":return b=this.parseExpr(),this.mk(s.EThrow(b),0,0);case "try":b=
this.parseExpr();c=this.token();Ua.enumEq(c,u.TId("catch"))||this.unexpected(c);this.ensure(u.TPOpen);c=this.token();switch(c[1]){case 2:d=c[2];break;default:d=this.unexpected(c)}this.ensure(u.TDoubleDot);a=null;this.allowTypes?a=this.parseType():(c=this.token(),Ua.enumEq(c,u.TId("Dynamic"))||this.unexpected(c));this.ensure(u.TPClose);c=this.parseExpr();return this.mk(s.ETry(b,d,a,c),0,0);case "switch":a=this.parseExpr();c=null;f=[];this.ensure(u.TBrOpen);try{for(;;)switch(b=this.token(),b[1]){case 2:switch(b[2]){case "case":i=
{values:[],expr:null};f.push(i);try{for(;;)switch(d=this.parseExpr(),i.values.push(d),b=this.token(),b[1]){case 9:break;case 14:throw"__break__";default:this.unexpected(b)}}catch(o){if("__break__"!=o)throw o;}var h=[];try{for(;;)switch(b=this.token(),this.tokens.add(b),b[1]){case 2:switch(b[2]){case "case":case "default":throw"__break__";default:h.push(this.parseFullExpr())}break;case 7:throw"__break__";default:h.push(this.parseFullExpr())}}catch(e){if("__break__"!=e)throw e;}i.expr=1==h.length?h[0]:
0==h.length?this.mk(s.EBlock([]),0,0):this.mk(s.EBlock(h),0,0);break;case "default":null!=c&&this.unexpected(b);this.ensure(u.TDoubleDot);i=[];try{for(;;)switch(b=this.token(),this.tokens.add(b),b[1]){case 2:switch(b[2]){case "case":case "default":throw"__break__";default:i.push(this.parseFullExpr())}break;case 7:throw"__break__";default:i.push(this.parseFullExpr())}}catch(g){if("__break__"!=g)throw g;}c=1==i.length?i[0]:0==i.length?this.mk(s.EBlock([]),0,0):this.mk(s.EBlock(i),0,0);break;default:this.unexpected(b)}break;
case 7:throw"__break__";default:this.unexpected(b)}}catch(j){if("__break__"!=j)throw j;}return this.mk(s.ESwitch(a,f,c),0,0);default:return null}},parseExprNext:function(a){var b=this.token();switch(b[1]){case 3:var d=b[2];if(this.unops.get(d)){var c;if(!(c=this.isBlock(a)))switch(a[1]){case 3:c=!0;break;default:c=!1}return c?(this.tokens.add(b),a):this.parseExprNext(this.mk(s.EUnop(d,!1,a),0,null))}return this.makeBinop(d,a,this.parseExpr());case 8:b=this.token();d=null;switch(b[1]){case 2:d=b[2];
break;default:this.unexpected(b)}return this.parseExprNext(this.mk(s.EField(a,d),0,null));case 4:return this.parseExprNext(this.mk(s.ECall(a,this.parseExprList(u.TPClose)),0,null));case 11:return b=this.parseExpr(),this.ensure(u.TBkClose),this.parseExprNext(this.mk(s.EArray(a,b),0,null));case 13:return b=this.parseExpr(),this.ensure(u.TDoubleDot),d=this.parseExpr(),this.mk(s.ETernary(a,b,d),0,0);default:return this.tokens.add(b),a}},parseType:function(){var a=this.token();switch(a[1]){case 2:for(var b=
[a[2]];;){a=this.token();if(a!=u.TDot)break;a=this.token();switch(a[1]){case 2:b.push(a[2]);break;default:this.unexpected(a)}}var d=null;switch(a[1]){case 3:if("<"==a[2]){d=[];try{for(;;){d.push(this.parseType());a=this.token();switch(a[1]){case 9:continue;case 3:if(">"==a[2])throw"__break__";}this.unexpected(a)}}catch(c){if("__break__"!=c)throw c;}}else this.tokens.add(a);break;default:this.tokens.add(a)}return this.parseTypeNext(bc.CTPath(b,d));case 4:return a=this.parseType(),this.ensure(u.TPClose),
this.parseTypeNext(bc.CTParent(a));case 6:b=[];try{for(;;)switch(a=this.token(),a[1]){case 7:throw"__break__";case 2:d=a[2];this.ensure(u.TDoubleDot);b.push({name:d,t:this.parseType()});a=this.token();switch(a[1]){case 9:break;case 7:throw"__break__";default:this.unexpected(a)}break;default:this.unexpected(a)}}catch(f){if("__break__"!=f)throw f;}return this.parseTypeNext(bc.CTAnon(b));default:return this.unexpected(a)}},parseTypeNext:function(a){var b=this.token();switch(b[1]){case 3:if("->"!=b[2])return this.tokens.add(b),
a;break;default:return this.tokens.add(b),a}b=this.parseType();switch(b[1]){case 1:return b[2].unshift(a),b;default:return bc.CTFun([a],b)}},parseExprList:function(a){var b=[],d=this.token();if(d==a)return b;this.tokens.add(d);try{for(;;)switch(b.push(this.parseExpr()),d=this.token(),d[1]){case 9:break;default:if(d==a)throw"__break__";this.unexpected(d)}}catch(c){if("__break__"!=c)throw c;}return b},readChar:function(){try{return this.input.readByte()}catch(a){return a instanceof p&&(a=a.val),0}},
readString:function(a){for(var b=0,d=new Yg,c=!1,f=this.line,i=this.input;;){try{b=i.readByte()}catch(o){throw o instanceof p&&(o=o.val),this.line=f,new p(ba.EUnterminatedString);}if(c)switch(c=!1,b){case 110:d.writeByte(10);break;case 114:d.writeByte(13);break;case 116:d.writeByte(9);break;case 39:case 34:case 92:d.writeByte(b);break;case 47:this.allowJSON?d.writeByte(b):this.invalidChar(b);break;case 117:if(!this.allowJSON)throw new p(this.invalidChar(b));var h=null;try{h=i.readString(4)}catch(e){throw e instanceof
p&&(e=e.val),this.line=f,new p(ba.EUnterminatedString);}for(var g=0,j=0;4>j;){var k=j++,g=g<<4,k=C.cca(h,k);if(null!=k)switch(k){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:g+=k-48;break;case 65:case 66:case 67:case 68:case 69:case 70:g+=k-55;break;case 97:case 98:case 99:case 100:case 101:case 102:g+=k-87;break;default:this.invalidChar(k)}else this.invalidChar(k)}127>=g?d.writeByte(g):(2047>=g?d.writeByte(192|g>>6):(d.writeByte(224|g>>12),d.writeByte(128|g>>6&
63)),d.writeByte(128|g&63));break;default:this.invalidChar(b)}else if(92==b)c=!0;else if(b==a)break;else 10==b&&this.line++,d.writeByte(b)}return d.getBytes().toString()},token:function(){if(null!=this.tokens.head)return this.tokens.pop();var a;0>this["char"]?a=this.readChar():(a=this["char"],this["char"]=-1);for(;;){switch(a){case 0:return u.TEof;case 32:case 9:case 13:break;case 10:this.line++;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:for(var b=1*(a-48),
d=0;;)switch(a=this.readChar(),d*=10,a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:b=10*b+(a-48);break;case 46:if(0<d){if(10==d&&46==this.readChar())return this.push(u.TOp("...")),a=b|0,u.TConst(a==b?ac.CInt(a):ac.CFloat(b));this.invalidChar(a)}d=1;break;case 120:(0<b||0<d)&&this.invalidChar(a);for(var c=0;;)switch(a=this.readChar(),a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:c=(c<<4)+a-48;break;case 65:case 66:case 67:case 68:case 69:case 70:c=
(c<<4)+(a-55);break;case 97:case 98:case 99:case 100:case 101:case 102:c=(c<<4)+(a-87);break;default:return this["char"]=a,u.TConst(ac.CInt(c))}break;default:return this["char"]=a,a=b|0,u.TConst(0<d?ac.CFloat(10*b/d):a==b?ac.CInt(a):ac.CFloat(b))}break;case 59:return u.TSemicolon;case 40:return u.TPOpen;case 41:return u.TPClose;case 44:return u.TComma;case 46:a=this.readChar();switch(a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:b=a-48;for(d=1;;)switch(a=this.readChar(),
d*=10,a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:b=10*b+(a-48);break;default:return this["char"]=a,u.TConst(ac.CFloat(b/d))}break;case 46:return a=this.readChar(),46!=a&&this.invalidChar(a),u.TOp("...");default:return this["char"]=a,u.TDot}break;case 123:return u.TBrOpen;case 125:return u.TBrClose;case 91:return u.TBkOpen;case 93:return u.TBkClose;case 39:return u.TConst(ac.CString(this.readString(39)));case 34:return u.TConst(ac.CString(this.readString(34)));
case 63:return u.TQuestion;case 58:return u.TDoubleDot;default:if(this.ops[a])for(b=String.fromCharCode(a);;){a=this.readChar();if(!this.ops[a]){if(47==C.cca(b,0))return this.tokenComment(b,a);this["char"]=a;return u.TOp(b)}b+=String.fromCharCode(a)}if(this.idents[a])for(b=String.fromCharCode(a);;){a=this.readChar();if(!this.idents[a])return this["char"]=a,u.TId(b);b+=String.fromCharCode(a)}this.invalidChar(a)}a=this.readChar()}return null},tokenComment:function(a,b){var d=C.cca(a,1),c=this.input;
if(47==d){try{for(;10!=b&&13!=b;)b=c.readByte();this["char"]=b}catch(f){f instanceof p&&(f=f.val)}return this.token()}if(42==d){d=this.line;try{for(;;){for(;42!=b;)10==b&&this.line++,b=c.readByte();b=c.readByte();if(47==b)break}}catch(i){throw i instanceof p&&(i=i.val),this.line=d,new p(ba.EUnterminatedComment);}return this.token()}this["char"]=b;return u.TOp(a)},constString:function(a){switch(a[1]){case 0:return a=a[2],null==a?"null":""+a;case 1:return a=a[2],null==a?"null":""+a;case 2:return a[2]}},
tokenString:function(a){switch(a[1]){case 0:return"<eof>";case 1:return this.constString(a[2]);case 2:return a[2];case 3:return a[2];case 4:return"(";case 5:return")";case 6:return"{";case 7:return"}";case 8:return".";case 9:return",";case 10:return";";case 11:return"[";case 12:return"]";case 13:return"?";case 14:return":"}},__class__:Ki};var p=function(a){Error.call(this);this.val=a;this.message=""+a;Error.captureStackTrace&&Error.captureStackTrace(this,p)};j["js._Boot.HaxeError"]=p;p.__name__=!0;
p.__super__=Error;p.prototype=z(Error.prototype,{__class__:p});var A=function(){};j["js.Boot"]=A;A.__name__=!0;A.__unhtml=function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")};A.__trace=function(a,b){var d;d=null!=b?b.fileName+":"+b.lineNumber+": ":"";d+=A.__string_rec(a,"");if(null!=b&&null!=b.customParams)for(var c=0,f=b.customParams;c<f.length;){var i=f[c];++c;d+=","+A.__string_rec(i,"")}var o;"undefined"!=typeof document&&null!=(o=document.getElementById("haxe:trace"))?
o.innerHTML+=A.__unhtml(d)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(d)};A.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=A.__nativeClassName(a);return null!=a?A.__resolveNativeClass(a):null};A.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var d=typeof a;if("function"==d&&(a.__name__||a.__ename__))d="object";switch(d){case "object":if(a instanceof Array){if(a.__enum__){if(2==
a.length)return a[0];for(var d=a[0]+"(",b=b+"\t",c=2,f=a.length;c<f;)var i=c++,d=2!=i?d+(","+A.__string_rec(a[i],b)):d+A.__string_rec(a[i],b);return d+")"}d=a.length;c="[";b+="\t";for(f=0;f<d;)i=f++,c+=(0<i?",":"")+A.__string_rec(a[i],b);return c+"]"}try{c=a.toString}catch(o){return o instanceof p&&(o=o.val),"???"}if(null!=c&&c!=Object.toString&&"function"==typeof c&&(d=a.toString(),"[object Object]"!=d))return d;d=null;c="{\n";b+="\t";f=null!=a.hasOwnProperty;for(d in a)if(!f||a.hasOwnProperty(d))"prototype"==
d||"__class__"==d||"__super__"==d||"__interfaces__"==d||"__properties__"==d||(2!=c.length&&(c+=", \n"),c+=b+d+" : "+A.__string_rec(a[d],b));b=b.substring(1);return c+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};A.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var d=a.__interfaces__;if(null!=d)for(var c=0,f=d.length;c<f;){var i=c++,i=d[i];if(i==b||A.__interfLoop(i,b))return!0}return A.__interfLoop(a.__super__,b)};A.__instanceof=function(a,
b){if(null==b)return!1;switch(b){case sl:return(a|0)===a;case Zk:return"number"==typeof a;case $k:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case tl:return!0;default:if(null!=a)if("function"==typeof b){if(a instanceof b||A.__interfLoop(A.getClass(a),b))return!0}else{if("object"==typeof b&&A.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==ul&&null!=a.__name__||b==vl&&null!=a.__ename__?!0:a.__enum__==b}};A.__cast=
function(a,b){if(A.__instanceof(a,b))return a;throw new p("Cannot cast "+r.string(a)+" to "+r.string(b));};A.__nativeClassName=function(a){a=A.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};A.__isNativeObj=function(a){return null!=A.__nativeClassName(a)};A.__resolveNativeClass=function(a){return Function("return typeof "+a+' != "undefined" ? '+a+" : null")()};var bk=function(){};j["js.html._CanvasElement.CanvasUtil"]=bk;bk.__name__=!0;bk.getContextWebGL=
function(a,b){for(var d=0,c=["webgl","experimental-webgl"];d<c.length;){var f=c[d];++d;f=a.getContext(f,b);if(null!=f)return f}return null};var fd=function(a){if(a instanceof Array&&null==a.__enum__)this.a=a,this.byteLength=a.length;else{this.a=[];for(var b=0;b<a;)this.a[b++]=0;this.byteLength=a}};j["js.html.compat.ArrayBuffer"]=fd;fd.__name__=!0;fd.sliceImpl=function(a,b){var d=new Ci(this,a,null==b?null:b-a),c=new jk(d.byteLength);(new Ci(c)).set(d);return c};fd.prototype={slice:function(a,b){return new fd(this.a.slice(a,
b))},__class__:fd};var lk=function(a,b,d){this.buf=a;this.offset=null==b?0:b;this.length=null==d?a.byteLength-this.offset:d;if(0>this.offset||0>this.length||this.offset+this.length>a.byteLength)throw new p(Wa.OutsideBounds);};j["js.html.compat.DataView"]=lk;lk.__name__=!0;lk.prototype={getInt8:function(a){a=this.buf.a[this.offset+a];return 128<=a?a-256:a},getUint8:function(a){return this.buf.a[this.offset+a]},getInt16:function(a,b){var d=this.getUint16(a,b);return 32768<=d?d-65536:d},getUint16:function(a,
b){return b?this.buf.a[this.offset+a]|this.buf.a[this.offset+a+1]<<8:this.buf.a[this.offset+a]<<8|this.buf.a[this.offset+a+1]},getInt32:function(a,b){var d=this.offset+a,c=this.buf.a[d++],f=this.buf.a[d++],i=this.buf.a[d++],d=this.buf.a[d++];return b?c|f<<8|i<<16|d<<24:d|i<<8|f<<16|c<<24},getUint32:function(a,b){var d=this.getInt32(a,b);return 0>d?d+4294967296:d},getFloat32:function(a,b){return ed.i32ToFloat(this.getInt32(a,b))},getFloat64:function(a,b){var d=this.getInt32(a,b),c=this.getInt32(a+
4,b);return ed.i64ToDouble(b?d:c,b?c:d)},setInt8:function(a,b){this.buf.a[a+this.offset]=0>b?b+128&255:b&255},setUint8:function(a,b){this.buf.a[a+this.offset]=b&255},setInt16:function(a,b,d){this.setUint16(a,0>b?b+65536:b,d)},setUint16:function(a,b,d){a+=this.offset;d?(this.buf.a[a]=b&255,this.buf.a[a++]=b>>8&255):(this.buf.a[a++]=b>>8&255,this.buf.a[a]=b&255)},setInt32:function(a,b,d){this.setUint32(a,b,d)},setUint32:function(a,b,d){a+=this.offset;d?(this.buf.a[a++]=b&255,this.buf.a[a++]=b>>8&255,
this.buf.a[a++]=b>>16&255,this.buf.a[a++]=b>>>24):(this.buf.a[a++]=b>>>24,this.buf.a[a++]=b>>16&255,this.buf.a[a++]=b>>8&255,this.buf.a[a++]=b&255)},setFloat32:function(a,b,d){this.setUint32(a,ed.floatToI32(b),d)},setFloat64:function(a,b,d){b=ed.doubleToI64(b);d?(this.setUint32(a,b.low),this.setUint32(a,b.high)):(this.setUint32(a,b.high),this.setUint32(a,b.low))},__class__:lk};var sd=function(){};j["js.html.compat.Uint8Array"]=sd;sd.__name__=!0;sd._new=function(a,b,d){if("number"==typeof a){d=[];
for(b=0;b<a;){var c=b++;d[c]=0}d.byteLength=d.length;d.byteOffset=0;d.buffer=new fd(d)}else if(A.__instanceof(a,fd))null==b&&(b=0),null==d&&(d=a.byteLength-b),d=0==b?a.a:a.a.slice(b,b+d),d.byteLength=d.length,d.byteOffset=b,d.buffer=a;else if(a instanceof Array&&null==a.__enum__)d=a.slice(),d.byteLength=d.length,d.byteOffset=0,d.buffer=new fd(d);else throw new p("TODO "+r.string(a));d.subarray=sd._subarray;d.set=sd._set;return d};sd._set=function(a,b){if(A.__instanceof(a.buffer,fd)){if(a.byteLength+
b>this.byteLength)throw new p("set() outside of range");for(var d=0,c=a.byteLength;d<c;){var f=d++;this[f+b]=a[f]}}else if(a instanceof Array&&null==a.__enum__){if(a.length+b>this.byteLength)throw new p("set() outside of range");d=0;for(c=a.length;d<c;)f=d++,this[f+b]=a[f]}else throw new p("TODO");};sd._subarray=function(a,b){var d=sd._new(this.slice(a,b));d.byteOffset=a;return d};var t=function(){};j["nape.Config"]=t;t.__name__=!0;var cc=function(){this.zpp_inner=null};j["nape.callbacks.Callback"]=
cc;cc.__name__=!0;cc.prototype={toString:function(){return""},__class__:cc};var Zg=function(){this.zpp_inner=null};j["nape.callbacks.BodyCallback"]=Zg;Zg.__name__=!0;Zg.__super__=cc;Zg.prototype=z(cc.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP"][this.zpp_inner.event-h.id_CbEvent_WAKE];a+=":"+this.zpp_inner.body.outer.toString();return a+=" : listener: "+r.string(this.zpp_inner.listener.outer)},__class__:Zg});var gd=function(){this.zpp_inner=null};j["nape.callbacks.Listener"]=gd;gd.__name__=
!0;gd.prototype={toString:function(){var a="BEGIN,END,WAKE,SLEEP,BREAK,PRE,ONGOING".split(",")[this.zpp_inner.event];if(this.zpp_inner.type==h.id_ListenerType_BODY)return"BodyListener{"+a+"::"+r.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer)+"}";if(this.zpp_inner.type==h.id_ListenerType_CONSTRAINT)return"ConstraintListener{"+a+"::"+r.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer)+"}";var b=this.zpp_inner.interaction,d;switch(b.itype){case 1:d="COLLISION";break;
case 2:d="SENSOR";break;case 4:d="FLUID";break;default:d="ALL"}return(this.zpp_inner.type==h.id_ListenerType_INTERACTION?"InteractionListener{"+a+"#"+d+"::"+r.string(b.outer_zni.zpp_inner_zn.options1.outer)+":"+r.string(b.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+d+"::"+r.string(b.outer_znp.zpp_inner_zn.options1.outer)+":"+r.string(b.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence},__class__:gd};var Li=function(){this.zpp_inner_zn=null};j["nape.callbacks.BodyListener"]=
Li;Li.__name__=!0;Li.__super__=gd;Li.prototype=z(gd.prototype,{__class__:Li});var gb=function(){};j["nape.callbacks.CbEvent"]=gb;gb.__name__=!0;gb.prototype={toString:function(){var a;null==h.CbEvent_PRE&&(h.internal=!0,h.CbEvent_PRE=new gb,h.internal=!1);this==h.CbEvent_PRE?a="PRE":(null==h.CbEvent_BEGIN&&(h.internal=!0,h.CbEvent_BEGIN=new gb,h.internal=!1),this==h.CbEvent_BEGIN?a="BEGIN":(null==h.CbEvent_ONGOING&&(h.internal=!0,h.CbEvent_ONGOING=new gb,h.internal=!1),this==h.CbEvent_ONGOING?a="ONGOING":
(null==h.CbEvent_END&&(h.internal=!0,h.CbEvent_END=new gb,h.internal=!1),this==h.CbEvent_END?a="END":(null==h.CbEvent_WAKE&&(h.internal=!0,h.CbEvent_WAKE=new gb,h.internal=!1),this==h.CbEvent_WAKE?a="WAKE":(null==h.CbEvent_SLEEP&&(h.internal=!0,h.CbEvent_SLEEP=new gb,h.internal=!1),this==h.CbEvent_SLEEP?a="SLEEP":(null==h.CbEvent_BREAK&&(h.internal=!0,h.CbEvent_BREAK=new gb,h.internal=!1),a=this==h.CbEvent_BREAK?"BREAK":""))))));return a},__class__:gb};var vd=function(){this.zpp_inner=null;this.zpp_inner=
new sa;this.zpp_inner.outer=this};j["nape.callbacks.CbType"]=vd;vd.__name__=!0;vd.prototype={toString:function(){return this==sa.ANY_BODY?"ANY_BODY":this==sa.ANY_SHAPE?"ANY_SHAPE":this==sa.ANY_COMPOUND?"ANY_COMPOUND":this==sa.ANY_CONSTRAINT?"ANY_CONSTRAINT":"CbType#"+this.zpp_inner.id},__class__:vd};var dc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};j["nape.callbacks.CbTypeIterator"]=dc;dc.__name__=!0;dc.get=function(a){var b;null==dc.zpp_pool?(Rb.internal=
!0,b=new dc,Rb.internal=!1):(b=dc.zpp_pool,dc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};dc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=dc.zpp_pool;dc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:dc};var Ff=function(){this.zpp_inner=null;this.zpp_inner=new Rb;this.zpp_inner.outer=
this};j["nape.callbacks.CbTypeList"]=Ff;Ff.__name__=!0;Ff.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=
a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,
a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,
a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=dc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Ff,__properties__:{get_length:"get_length"}};var $g=
function(){this.zpp_inner=null};j["nape.callbacks.ConstraintCallback"]=$g;$g.__name__=!0;$g.__super__=cc;$g.prototype=z(cc.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP","BREAK"][this.zpp_inner.event-h.id_CbEvent_WAKE];a+=":"+this.zpp_inner.constraint.outer.toString();return a+=" : listener: "+r.string(this.zpp_inner.listener.outer)},__class__:$g});var Mi=function(){this.zpp_inner_zn=null};j["nape.callbacks.ConstraintListener"]=Mi;Mi.__name__=!0;Mi.__super__=gd;Mi.prototype=z(gd.prototype,
{__class__:Mi});var Gf=function(){this.zpp_inner=null};j["nape.callbacks.InteractionCallback"]=Gf;Gf.__name__=!0;Gf.__super__=cc;Gf.prototype=z(cc.prototype,{toString:function(){var a;a="Cb:"+"BEGIN,END,,,,,ONGOING".split(",")[this.zpp_inner.event];a+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString();a+=" : "+this.zpp_inner.wrap_arbiters.toString();return a+=" : listener: "+r.string(this.zpp_inner.listener.outer)},__class__:Gf});var Oc=function(a,b,d,c,f,i){null==
i&&(i=0);this.zpp_inner=this.zpp_inner_zn=null;var o=-1;null==h.CbEvent_BEGIN&&(h.internal=!0,h.CbEvent_BEGIN=new gb,h.internal=!1);a==h.CbEvent_BEGIN?o=h.id_CbEvent_BEGIN:(null==h.CbEvent_END&&(h.internal=!0,h.CbEvent_END=new gb,h.internal=!1),a==h.CbEvent_END?o=h.id_CbEvent_END:(null==h.CbEvent_ONGOING&&(h.internal=!0,h.CbEvent_ONGOING=new gb,h.internal=!1),a==h.CbEvent_ONGOING&&(o=h.id_CbEvent_ONGOING)));this.zpp_inner=this.zpp_inner_zn=new Ja(le.argument(d),le.argument(c),o,h.id_ListenerType_INTERACTION);
this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zni=this;this.zpp_inner.precedence=i;this.zpp_inner_zn.handleri=f;this.set_interactionType(b)};j["nape.callbacks.InteractionListener"]=Oc;Oc.__name__=!0;Oc.__super__=gd;Oc.prototype=z(gd.prototype,{get_interactionType:function(){var a=this.zpp_inner_zn.itype;if(a==h.id_InteractionType_COLLISION)return null==h.InteractionType_COLLISION&&(h.internal=!0,h.InteractionType_COLLISION=new Xa,h.internal=!1),h.InteractionType_COLLISION;if(a==h.id_InteractionType_SENSOR)return null==
h.InteractionType_SENSOR&&(h.internal=!0,h.InteractionType_SENSOR=new Xa,h.internal=!1),h.InteractionType_SENSOR;if(a==h.id_InteractionType_FLUID)return null==h.InteractionType_FLUID&&(h.internal=!0,h.InteractionType_FLUID=new Xa,h.internal=!1),h.InteractionType_FLUID;return a==h.id_InteractionType_ANY?(null==h.InteractionType_ANY&&(h.internal=!0,h.InteractionType_ANY=new Xa,h.internal=!1),h.InteractionType_ANY):null},set_interactionType:function(a){if(this.get_interactionType()!=a){var b=this.zpp_inner_zn;
null==h.InteractionType_COLLISION&&(h.internal=!0,h.InteractionType_COLLISION=new Xa,h.internal=!1);a==h.InteractionType_COLLISION?a=h.id_InteractionType_COLLISION:(null==h.InteractionType_SENSOR&&(h.internal=!0,h.InteractionType_SENSOR=new Xa,h.internal=!1),a==h.InteractionType_SENSOR?a=h.id_InteractionType_SENSOR:(null==h.InteractionType_FLUID&&(h.internal=!0,h.InteractionType_FLUID=new Xa,h.internal=!1),a=a==h.InteractionType_FLUID?h.id_InteractionType_FLUID:h.id_InteractionType_ANY));b.itype=
a}return this.get_interactionType()},__class__:Oc,__properties__:{set_interactionType:"set_interactionType",get_interactionType:"get_interactionType"}});var Xa=function(){};j["nape.callbacks.InteractionType"]=Xa;Xa.__name__=!0;Xa.prototype={toString:function(){var a;null==h.InteractionType_COLLISION&&(h.internal=!0,h.InteractionType_COLLISION=new Xa,h.internal=!1);this==h.InteractionType_COLLISION?a="COLLISION":(null==h.InteractionType_SENSOR&&(h.internal=!0,h.InteractionType_SENSOR=new Xa,h.internal=
!1),this==h.InteractionType_SENSOR?a="SENSOR":(null==h.InteractionType_FLUID&&(h.internal=!0,h.InteractionType_FLUID=new Xa,h.internal=!1),this==h.InteractionType_FLUID?a="FLUID":(null==h.InteractionType_ANY&&(h.internal=!0,h.InteractionType_ANY=new Xa,h.internal=!1),a=this==h.InteractionType_ANY?"ANY":"")));return a},__class__:Xa};var Na=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};j["nape.callbacks.ListenerIterator"]=Na;Na.__name__=!0;Na.get=function(a){var b;
null==Na.zpp_pool?(Vd.internal=!0,b=new Na,Vd.internal=!1):(b=Na.zpp_pool,Na.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Na.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Na.zpp_pool;Na.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Na};var Ni=function(){this.zpp_inner=null;this.zpp_inner=
new Vd;this.zpp_inner.outer=this};j["nape.callbacks.ListenerList"]=Ni;Ni.__name__=!0;Ni.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);
else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),
this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-
1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var d=this.zpp_inner.inner.head;null!=d;){if(d.elt==a.zpp_inner){b=!0;break}d=d.next}b&&(null!=this.zpp_inner.subber&&
this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=Na.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Ni,__properties__:{get_length:"get_length"}};var He=function(){};j["nape.callbacks.ListenerType"]=He;He.__name__=!0;He.prototype={toString:function(){var a;
null==h.ListenerType_BODY&&(h.internal=!0,h.ListenerType_BODY=new He,h.internal=!1);this==h.ListenerType_BODY?a="BODY":(null==h.ListenerType_CONSTRAINT&&(h.internal=!0,h.ListenerType_CONSTRAINT=new He,h.internal=!1),this==h.ListenerType_CONSTRAINT?a="CONSTRAINT":(null==h.ListenerType_INTERACTION&&(h.internal=!0,h.ListenerType_INTERACTION=new He,h.internal=!1),this==h.ListenerType_INTERACTION?a="INTERACTION":(null==h.ListenerType_PRE&&(h.internal=!0,h.ListenerType_PRE=new He,h.internal=!1),a=this==
h.ListenerType_PRE?"PRE":"")));return a},__class__:He};var Ie=function(a,b){this.zpp_inner=null;this.zpp_inner=new le;this.zpp_inner.outer=this;null!=a&&this.including(a);null!=b&&this.excluding(b)};j["nape.callbacks.OptionType"]=Ie;Ie.__name__=!0;Ie.prototype={including:function(a){this.zpp_inner.append(this.zpp_inner.includes,a);return this},excluding:function(a){this.zpp_inner.append(this.zpp_inner.excludes,a);return this},toString:function(){null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();
var a=this.zpp_inner.wrap_includes.toString();null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes();return"@{"+a+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},__class__:Ie};var ah=function(){this.zpp_inner=null};j["nape.callbacks.PreCallback"]=ah;ah.__name__=!0;ah.__super__=cc;ah.prototype=z(cc.prototype,{toString:function(){var a;a="Cb:PRE:"+(":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString());a+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString();
return a+=" : listnener: "+r.string(this.zpp_inner.listener.outer)},__class__:ah});var Pa=function(){};j["nape.callbacks.PreFlag"]=Pa;Pa.__name__=!0;Pa.prototype={toString:function(){var a;null==h.PreFlag_ACCEPT&&(h.internal=!0,h.PreFlag_ACCEPT=new Pa,h.internal=!1);this==h.PreFlag_ACCEPT?a="ACCEPT":(null==h.PreFlag_IGNORE&&(h.internal=!0,h.PreFlag_IGNORE=new Pa,h.internal=!1),this==h.PreFlag_IGNORE?a="IGNORE":(null==h.PreFlag_ACCEPT_ONCE&&(h.internal=!0,h.PreFlag_ACCEPT_ONCE=new Pa,h.internal=!1),
this==h.PreFlag_ACCEPT_ONCE?a="ACCEPT_ONCE":(null==h.PreFlag_IGNORE_ONCE&&(h.internal=!0,h.PreFlag_IGNORE_ONCE=new Pa,h.internal=!1),a=this==h.PreFlag_IGNORE_ONCE?"IGNORE_ONCE":"")));return a},__class__:Pa};var Oi=function(){this.zpp_inner_zn=null};j["nape.callbacks.PreListener"]=Oi;Oi.__name__=!0;Oi.__super__=gd;Oi.prototype=z(gd.prototype,{__class__:Oi});var mk=function(){};j["nape.constraint.Constraint"]=mk;mk.__name__=!0;mk.prototype={toString:function(){return"{Constraint}"},__class__:mk};var ec=
function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};j["nape.constraint.ConstraintIterator"]=ec;ec.__name__=!0;ec.get=function(a){var b;null==ec.zpp_pool?(rc.internal=!0,b=new ec,rc.internal=!1):(b=ec.zpp_pool,ec.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};ec.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=ec.zpp_pool;ec.zpp_pool=
this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:ec};var Pi=function(){this.zpp_inner=null;this.zpp_inner=new rc;this.zpp_inner.outer=this};j["nape.constraint.ConstraintList"]=Pi;Pi.__name__=!0;Pi.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();
this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var d=this.zpp_inner.inner.head;null!=d;){if(d.elt==a.zpp_inner){b=
!0;break}d=d.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=ec.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Pi,__properties__:{get_length:"get_length"}};var Wd=function(){this.zpp_inner=null};j["nape.dynamics.Arbiter"]=
Wd;Wd.__name__=!0;Wd.prototype={get_state:function(){var a=this.zpp_inner.immState;if(a==(h.id_ImmState_ACCEPT|h.id_ImmState_ALWAYS))return null==h.PreFlag_ACCEPT&&(h.internal=!0,h.PreFlag_ACCEPT=new Pa,h.internal=!1),h.PreFlag_ACCEPT;switch(a){case 1:return null==h.PreFlag_ACCEPT_ONCE&&(h.internal=!0,h.PreFlag_ACCEPT_ONCE=new Pa,h.internal=!1),h.PreFlag_ACCEPT_ONCE;default:if(a==(h.id_ImmState_IGNORE|h.id_ImmState_ALWAYS))return null==h.PreFlag_IGNORE&&(h.internal=!0,h.PreFlag_IGNORE=new Pa,h.internal=
!1),h.PreFlag_IGNORE;null==h.PreFlag_IGNORE_ONCE&&(h.internal=!0,h.PreFlag_IGNORE_ONCE=new Pa,h.internal=!1);return h.PreFlag_IGNORE_ONCE}},toString:function(){var a;a=this.zpp_inner.type==da.COL?"CollisionArbiter":this.zpp_inner.type==da.FLUID?"FluidArbiter":"SensorArbiter";return this.zpp_inner.cleared?a+"(object-pooled)":a+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|"+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:
this.zpp_inner.ws2.outer).toString()+")"+(this.zpp_inner.type==da.COL?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"")+"<-"+this.get_state().toString()},__class__:Wd,__properties__:{get_state:"get_state"}};var sc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};j["nape.dynamics.ArbiterIterator"]=sc;sc.__name__=!0;sc.get=function(a){var b;null==sc.zpp_pool?(wd.internal=!0,b=new sc,wd.internal=!1):(b=sc.zpp_pool,sc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=
a;b.zpp_critical=!1;return b};sc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=sc.zpp_pool;sc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:sc};var Qi=function(){this.zpp_inner=null;this.zpp_inner=new wd;this.zpp_inner.outer=this};j["nape.dynamics.ArbiterList"]=Qi;Qi.__name__=!0;Qi.prototype={zpp_gl:function(){this.zpp_inner.valmod();
if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.head;null!=a;)a.elt.active&&this.zpp_inner.user_length++,a=a.next}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.head;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=
this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.wrapper()},iterator:function(){this.zpp_vm();return sc.get(this)},toString:function(){for(var a="[",b=!0,d=this.iterator();d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+
"]"},__class__:Qi};var Hf=function(){};j["nape.dynamics.ArbiterType"]=Hf;Hf.__name__=!0;Hf.prototype={toString:function(){var a;null==h.ArbiterType_COLLISION&&(h.internal=!0,h.ArbiterType_COLLISION=new Hf,h.internal=!1);this==h.ArbiterType_COLLISION?a="COLLISION":(null==h.ArbiterType_SENSOR&&(h.internal=!0,h.ArbiterType_SENSOR=new Hf,h.internal=!1),this==h.ArbiterType_SENSOR?a="SENSOR":(null==h.ArbiterType_FLUID&&(h.internal=!0,h.ArbiterType_FLUID=new Hf,h.internal=!1),a=this==h.ArbiterType_FLUID?
"FLUID":""));return a},__class__:Hf};var If=function(){this.zpp_inner=null};j["nape.dynamics.CollisionArbiter"]=If;If.__name__=!0;If.__super__=Wd;If.prototype=z(Wd.prototype,{__class__:If});var Ri=function(){this.zpp_inner=null};j["nape.dynamics.Contact"]=Ri;Ri.__name__=!0;Ri.prototype={toString:function(){return null==this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?"{object-pooled}":"{Contact}"},__class__:Ri};var Pc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=
null};j["nape.dynamics.ContactIterator"]=Pc;Pc.__name__=!0;Pc.get=function(a){var b;null==Pc.zpp_pool?(Je.internal=!0,b=new Pc,Je.internal=!1):(b=Pc.zpp_pool,Pc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Pc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Pc.zpp_pool;Pc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},
__class__:Pc};var nk=function(){this.zpp_inner=null};j["nape.dynamics.ContactList"]=nk;nk.__name__=!0;nk.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.next;null!=a;){var b=a;b.active&&b.arbiter.active&&this.zpp_inner.user_length++;a=a.next}}return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<
this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.next;;){var b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.wrapper()},
toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=Pc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:nk,__properties__:{get_length:"get_length"}};var bh=function(){this.zpp_inner=null};j["nape.dynamics.FluidArbiter"]=bh;bh.__name__=!0;bh.__super__=Wd;bh.prototype=z(Wd.prototype,{__class__:bh});var Si=function(a,b,d,c,f,i){null==i&&(i=-1);null==f&&(f=1);null==c&&(c=-1);null==d&&(d=
1);null==b&&(b=-1);null==a&&(a=1);this.zpp_inner=null;null==nb.zpp_pool?this.zpp_inner=new nb:(this.zpp_inner=nb.zpp_pool,nb.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;this.zpp_inner.collisionGroup!=a&&(this.zpp_inner.collisionGroup=a,this.zpp_inner.invalidate());this.zpp_inner.collisionGroup;this.zpp_inner.collisionMask!=b&&(this.zpp_inner.collisionMask=b,this.zpp_inner.invalidate());this.zpp_inner.collisionMask;this.zpp_inner.sensorGroup!=d&&(this.zpp_inner.sensorGroup=
d,this.zpp_inner.invalidate());this.zpp_inner.sensorGroup;this.zpp_inner.sensorMask!=c&&(this.zpp_inner.sensorMask=c,this.zpp_inner.invalidate());this.zpp_inner.sensorMask;this.zpp_inner.fluidGroup!=f&&(this.zpp_inner.fluidGroup=f,this.zpp_inner.invalidate());this.zpp_inner.fluidGroup;this.zpp_inner.fluidMask!=i&&(this.zpp_inner.fluidMask=i,this.zpp_inner.invalidate());this.zpp_inner.fluidMask};j["nape.dynamics.InteractionFilter"]=Si;Si.__name__=!0;Si.prototype={__class__:Si};var ok=function(){this.zpp_inner=
null};j["nape.dynamics.InteractionGroup"]=ok;ok.__name__=!0;ok.prototype={toString:function(){var a="InteractionGroup";this.zpp_inner.ignore&&(a+=":ignore");return a},__class__:ok};var tc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};j["nape.dynamics.InteractionGroupIterator"]=tc;tc.__name__=!0;tc.get=function(a){var b;null==tc.zpp_pool?(Jf.internal=!0,b=new tc,Jf.internal=!1):(b=tc.zpp_pool,tc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};
tc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=tc.zpp_pool;tc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:tc};var pk=function(){this.zpp_inner=null};j["nape.dynamics.InteractionGroupList"]=pk;pk.__name__=!0;pk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=
!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a=
"[",b=!0,d;this.zpp_inner.valmod();for(d=tc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:pk,__properties__:{get_length:"get_length"}};var qk=function(){this.zpp_inner=null};j["nape.geom.AABB"]=qk;qk.__name__=!0;qk.prototype={toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:qk};var rk=function(){this.zpp_inner=null};j["nape.geom.ConvexResult"]=rk;rk.__name__=
!0;rk.prototype={toString:function(){return"{ shape: "+r.string(this.zpp_inner.shape)+" toi: "+this.zpp_inner.toiDistance+" }"},__class__:rk};var Qc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};j["nape.geom.ConvexResultIterator"]=Qc;Qc.__name__=!0;Qc.get=function(a){var b;null==Qc.zpp_pool?(Ke.internal=!0,b=new Qc,Ke.internal=!1):(b=Qc.zpp_pool,Qc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Qc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();
var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Qc.zpp_pool;Qc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Qc};var sk=function(){this.zpp_inner=null};j["nape.geom.ConvexResultList"]=sk;sk.__name__=!0;sk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);
return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=Qc.get(this);d.hasNext();){var c;
d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:sk,__properties__:{get_length:"get_length"}};var Ti=function(){this.zpp_inner=null};j["nape.geom.GeomPoly"]=Ti;Ti.__name__=!0;Ti.prototype={toString:function(){var a="GeomPoly[",b=this.zpp_inner.vertices,d=this.zpp_inner.vertices;if(null!=b){do{var c=b;c!=this.zpp_inner.vertices&&(a+=",");a+="{"+c.x+","+c.y+"}";b=b.next}while(b!=d)}return a+"]"},__class__:Ti};var uc=function(){this.zpp_next=
null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};j["nape.geom.GeomPolyIterator"]=uc;uc.__name__=!0;uc.get=function(a){var b;null==uc.zpp_pool?(Kf.internal=!0,b=new uc,Kf.internal=!1):(b=uc.zpp_pool,uc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};uc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=uc.zpp_pool;uc.zpp_pool=this;this.zpp_inner=null;return!1},
next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:uc};var tk=function(){this.zpp_inner=null};j["nape.geom.GeomPolyList"]=tk;tk.__name__=!0;tk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||
null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=uc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:tk,__properties__:{get_length:"get_length"}};
var uk=function(){this.zpp_inner=null};j["nape.geom.Mat23"]=uk;uk.__name__=!0;uk.prototype={toString:function(){return"{ a: "+this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},__class__:uk};var vk=function(){this.zpp_inner=null};j["nape.geom.MatMN"]=vk;vk.__name__=!0;vk.prototype={toString:function(){for(var a="{ ",b=!0,d=0,c=this.zpp_inner.m;d<c;){var f=d++;b||(a+="; ");for(var b=!1,i=0,o=this.zpp_inner.n;i<
o;)var h=i++,a=a+(this.zpp_inner.x[f*this.zpp_inner.n+h]+" ")}return a+"}"},__class__:vk};var wk=function(){this.zpp_inner=null};j["nape.geom.RayResult"]=wk;wk.__name__=!0;wk.prototype={toString:function(){return"{ shape: "+r.string(this.zpp_inner.shape)+" distance: "+this.zpp_inner.toiDistance+" ?inner: "+r.string(this.zpp_inner.inner)+" }"},__class__:wk};var vc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};j["nape.geom.RayResultIterator"]=vc;vc.__name__=!0;
vc.get=function(a){var b;null==vc.zpp_pool?(Le.internal=!0,b=new vc,Le.internal=!1):(b=vc.zpp_pool,vc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};vc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=vc.zpp_pool;vc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:vc};var xk=function(){this.zpp_inner=
null};j["nape.geom.RayResultList"]=xk;xk.__name__=!0;xk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=
a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=vc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:xk,__properties__:{get_length:"get_length"}};var Q=function(a,b){null==b&&(b=0);null==a&&(a=0);this.zpp_inner=this.zpp_pool=null;this.zpp_inner=X.get(a,b,null);this.zpp_inner.outer=
this};j["nape.geom.Vec2"]=Q;Q.__name__=!0;Q.get=function(a,b,d){null==d&&(d=!1);null==b&&(b=0);null==a&&(a=0);var c;null==Lf.poolVec2?c=new Q:(c=Lf.poolVec2,Lf.poolVec2=c.zpp_pool,c.zpp_pool=null);if(null==c.zpp_inner)c.zpp_inner=X.get(a,b,null),c.zpp_inner.outer=c;else{var f;c.zpp_inner.validate();if(f=c.zpp_inner.x==a)c.zpp_inner.validate(),f=c.zpp_inner.y==b;f||(c.zpp_inner.x=a,c.zpp_inner.y=b,c.zpp_inner.invalidate());c}c.zpp_inner.weak=d;return c};Q.prototype={dispose:function(){var a=this.zpp_inner;
this.zpp_inner=this.zpp_inner.outer=null;this.zpp_pool=Lf.poolVec2;Lf.poolVec2=this;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=X.zpp_pool;X.zpp_pool=a},set_x:function(a){this.zpp_inner.validate();this.zpp_inner.x!=a&&(this.zpp_inner.x=a,this.zpp_inner.invalidate());this.zpp_inner.validate();return this.zpp_inner.x},set_y:function(a){this.zpp_inner.validate();this.zpp_inner.y!=a&&(this.zpp_inner.y=a,this.zpp_inner.invalidate());
this.zpp_inner.validate();return this.zpp_inner.y},set:function(a){var b=this.setxy(function(){a.zpp_inner.validate();return a.zpp_inner.x}(this),function(){a.zpp_inner.validate();return a.zpp_inner.y}(this));a.zpp_inner.weak?(a.dispose(),!0):!1;return b},setxy:function(a,b){var d;this.zpp_inner.validate();if(d=this.zpp_inner.x==a)this.zpp_inner.validate(),d=this.zpp_inner.y==b;d||(this.zpp_inner.x=a,this.zpp_inner.y=b,this.zpp_inner.invalidate());return this},toString:function(){this.zpp_inner.validate();
return this.zpp_inner.toString()},__class__:Q,__properties__:{set_y:"set_y",set_x:"set_x"}};var wc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};j["nape.geom.Vec2Iterator"]=wc;wc.__name__=!0;wc.get=function(a){var b;null==wc.zpp_pool?(Gd.internal=!0,b=new wc,Gd.internal=!1):(b=wc.zpp_pool,wc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};wc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();
this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=wc.zpp_pool;wc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:wc};var Xd=function(){this.zpp_inner=null;this.zpp_inner=new Gd;this.zpp_inner.outer=this};j["nape.geom.Vec2List"]=Xd;Xd.__name__=!0;Xd.prototype={zpp_gl:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);
return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},push:function(a){this.zpp_inner.modify_test();
this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},empty:function(){return 0==this.zpp_gl()},
iterator:function(){this.zpp_vm();return wc.get(this)},toString:function(){for(var a="[",b=!0,d=this.iterator();d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Xd};var yk=function(){this.zpp_inner=null};j["nape.geom.Vec3"]=yk;yk.__name__=!0;yk.prototype={toString:function(){this.zpp_inner.validate();var a="{ x: "+this.zpp_inner.x+" y: ";this.zpp_inner.validate();a=a+this.zpp_inner.y+" z: ";this.zpp_inner.validate();
return a+this.zpp_inner.z+" }"},__class__:yk};var Me=function(){};j["nape.geom.Winding"]=Me;Me.__name__=!0;Me.prototype={toString:function(){var a;null==h.Winding_UNDEFINED&&(h.internal=!0,h.Winding_UNDEFINED=new Me,h.internal=!1);this==h.Winding_UNDEFINED?a="UNDEFINED":(null==h.Winding_CLOCKWISE&&(h.internal=!0,h.Winding_CLOCKWISE=new Me,h.internal=!1),this==h.Winding_CLOCKWISE?a="CLOCKWISE":(null==h.Winding_ANTICLOCKWISE&&(h.internal=!0,h.Winding_ANTICLOCKWISE=new Me,h.internal=!1),a=this==h.Winding_ANTICLOCKWISE?
"ANTICLOCKWISE":""));return a},__class__:Me};var fc=function(){this.zpp_inner_i=null};j["nape.phys.Interactor"]=fc;fc.__name__=!0;fc.prototype={get_userData:function(){null==this.zpp_inner_i.userData&&(this.zpp_inner_i.userData={});return this.zpp_inner_i.userData},get_castShape:function(){return null!=this.zpp_inner_i.ishape?this.zpp_inner_i.ishape.outer:null},toString:function(){return""},__class__:fc,__properties__:{get_castShape:"get_castShape",get_userData:"get_userData"}};var Mf=function(a,
b){this.zpp_inner_i=this.zpp_inner=null;this.zpp_inner=new Rc;this.zpp_inner.outer=this;this.zpp_inner.outer_i=this;this.zpp_inner_i=this.zpp_inner;null!=b?(b.zpp_inner.validate(),this.zpp_inner.posx=b.zpp_inner.x,b.zpp_inner.validate(),this.zpp_inner.posy=b.zpp_inner.y):(this.zpp_inner.posx=0,this.zpp_inner.posy=0);this.set_type(null==a?function(){null==h.BodyType_DYNAMIC&&(h.internal=!0,h.BodyType_DYNAMIC=new Ya,h.internal=!1);return h.BodyType_DYNAMIC}(this):a);null!=b&&(b.zpp_inner.weak?(b.dispose(),
!0):!1);this.zpp_inner_i.insert_cbtype(sa.ANY_BODY.zpp_inner)};j["nape.phys.Body"]=Mf;Mf.__name__=!0;Mf.__super__=fc;Mf.prototype=z(fc.prototype,{set_type:function(a){this.zpp_inner.immutable_midstep("Body::type");Rc.types[this.zpp_inner.type]!=a&&(null==h.BodyType_DYNAMIC&&(h.internal=!0,h.BodyType_DYNAMIC=new Ya,h.internal=!1),a==h.BodyType_DYNAMIC?a=h.id_BodyType_DYNAMIC:(null==h.BodyType_KINEMATIC&&(h.internal=!0,h.BodyType_KINEMATIC=new Ya,h.internal=!1),a=a==h.BodyType_KINEMATIC?h.id_BodyType_KINEMATIC:
h.id_BodyType_STATIC),a==h.id_BodyType_STATIC&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,a):this.zpp_inner.type=a);return Rc.types[this.zpp_inner.type]},set_space:function(a){this.zpp_inner.immutable_midstep("Body::space");if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=a){if(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer))this.zpp_inner.component.woken=
!1;if(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer))(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(this);null!=a&&a.zpp_inner.wrap_bodies.add(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},get_position:function(){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},set_position:function(a){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();this.zpp_inner.wrap_pos.set(a);
null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},set_velocity:function(a){null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();this.zpp_inner.wrap_vel.set(a);null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();return this.zpp_inner.wrap_vel},applyImpulse:function(a,b,d){null==d&&(d=!1);if(d&&this.zpp_inner.component.sleeping)return a.zpp_inner.weak?(a.dispose(),!0):!1,null!=b&&(b.zpp_inner.weak?(b.dispose(),!0):!1),this;this.zpp_inner.validate_mass();
var c=this.zpp_inner.imass,f=this.zpp_inner,i=this.zpp_inner.velx;a.zpp_inner.validate();f.velx=i+a.zpp_inner.x*c;f=this.zpp_inner;i=this.zpp_inner.vely;a.zpp_inner.validate();f.vely=i+a.zpp_inner.y*c;if(null!=b){var o=0,c=0;b.zpp_inner.validate();o=b.zpp_inner.x-this.zpp_inner.posx;b.zpp_inner.validate();c=b.zpp_inner.y-this.zpp_inner.posy;this.zpp_inner.validate_inertia();f=this.zpp_inner;i=this.zpp_inner.angvel;a.zpp_inner.validate();o*=a.zpp_inner.y;a.zpp_inner.validate();f.angvel=i+(o-a.zpp_inner.x*
c)*this.zpp_inner.iinertia;b.zpp_inner.weak?(b.dispose(),!0):!1}d||this.zpp_inner.type==h.id_BodyType_DYNAMIC&&this.zpp_inner.wake();a.zpp_inner.weak?(a.dispose(),!0):!1;return this},toString:function(){return(this.zpp_inner.world?"(space::world":"("+(this.zpp_inner.type==h.id_BodyType_DYNAMIC?"dynamic":this.zpp_inner.type==h.id_BodyType_STATIC?"static":"kinematic"))+")#"+this.zpp_inner_i.id},__class__:Mf,__properties__:z(fc.prototype.__properties__,{set_velocity:"set_velocity",set_position:"set_position",
get_position:"get_position",set_space:"set_space",set_type:"set_type"})});var xc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};j["nape.phys.BodyIterator"]=xc;xc.__name__=!0;xc.get=function(a){var b;null==xc.zpp_pool?(yc.internal=!0,b=new xc,yc.internal=!1):(b=xc.zpp_pool,xc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};xc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=
!0;if(this.zpp_i<a)return!0;this.zpp_next=xc.zpp_pool;xc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:xc};var Ui=function(){this.zpp_inner=null;this.zpp_inner=new yc;this.zpp_inner.outer=this};j["nape.phys.BodyList"]=Ui;Ui.__name__=!0;Ui.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},
at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):
!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?
this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},
remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var d=this.zpp_inner.inner.head;null!=d;){if(d.elt==a.zpp_inner){b=!0;break}d=d.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=xc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==
c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Ui,__properties__:{get_length:"get_length"}};var Ya=function(){};j["nape.phys.BodyType"]=Ya;Ya.__name__=!0;Ya.prototype={toString:function(){var a;null==h.BodyType_STATIC&&(h.internal=!0,h.BodyType_STATIC=new Ya,h.internal=!1);this==h.BodyType_STATIC?a="STATIC":(null==h.BodyType_DYNAMIC&&(h.internal=!0,h.BodyType_DYNAMIC=new Ya,h.internal=!1),this==h.BodyType_DYNAMIC?a="DYNAMIC":(null==h.BodyType_KINEMATIC&&(h.internal=!0,h.BodyType_KINEMATIC=
new Ya,h.internal=!1),a=this==h.BodyType_KINEMATIC?"KINEMATIC":""));return a},__class__:Ya};var Vi=function(){this.zpp_inner=null};j["nape.phys.Compound"]=Vi;Vi.__name__=!0;Vi.__super__=fc;Vi.prototype=z(fc.prototype,{toString:function(){return"Compound"+this.zpp_inner_i.id},__class__:Vi});var hd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};j["nape.phys.CompoundIterator"]=hd;hd.__name__=!0;hd.get=function(a){var b;null==hd.zpp_pool?(Yd.internal=!0,b=new hd,
Yd.internal=!1):(b=hd.zpp_pool,hd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};hd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=hd.zpp_pool;hd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:hd};var Wi=function(){this.zpp_inner=null;this.zpp_inner=new Yd;this.zpp_inner.outer=this};
j["nape.phys.CompoundList"]=Wi;Wi.__name__=!0;Wi.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=
a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var d=this.zpp_inner.inner.head;null!=d;){if(d.elt==a.zpp_inner){b=!0;break}d=d.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();
for(d=hd.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Wi,__properties__:{get_length:"get_length"}};var zk=function(){this.zpp_inner=null};j["nape.phys.FluidProperties"]=zk;zk.__name__=!0;zk.prototype={toString:function(){return"{ density: "+1E3*this.zpp_inner.density+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+r.string(this.zpp_inner.wrap_gravity)+" }"},__class__:zk};var Ne=function(){};
j["nape.phys.GravMassMode"]=Ne;Ne.__name__=!0;Ne.prototype={toString:function(){var a;null==h.GravMassMode_DEFAULT&&(h.internal=!0,h.GravMassMode_DEFAULT=new Ne,h.internal=!1);this==h.GravMassMode_DEFAULT?a="DEFAULT":(null==h.GravMassMode_FIXED&&(h.internal=!0,h.GravMassMode_FIXED=new Ne,h.internal=!1),this==h.GravMassMode_FIXED?a="FIXED":(null==h.GravMassMode_SCALED&&(h.internal=!0,h.GravMassMode_SCALED=new Ne,h.internal=!1),a=this==h.GravMassMode_SCALED?"SCALED":""));return a},__class__:Ne};var Nf=
function(){};j["nape.phys.InertiaMode"]=Nf;Nf.__name__=!0;Nf.prototype={toString:function(){var a;null==h.InertiaMode_DEFAULT&&(h.internal=!0,h.InertiaMode_DEFAULT=new Nf,h.internal=!1);this==h.InertiaMode_DEFAULT?a="DEFAULT":(null==h.InertiaMode_FIXED&&(h.internal=!0,h.InertiaMode_FIXED=new Nf,h.internal=!1),a=this==h.InertiaMode_FIXED?"FIXED":"");return a},__class__:Nf};var Sc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};j["nape.phys.InteractorIterator"]=
Sc;Sc.__name__=!0;Sc.get=function(a){var b;null==Sc.zpp_pool?(Of.internal=!0,b=new Sc,Of.internal=!1):(b=Sc.zpp_pool,Sc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Sc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Sc.zpp_pool;Sc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Sc};
var Ak=function(){this.zpp_inner=null};j["nape.phys.InteractorList"]=Ak;Ak.__name__=!0;Ak.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);
else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer_i},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=Sc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Ak,__properties__:{get_length:"get_length"}};var ch=function(){};j["nape.phys.MassMode"]=ch;ch.__name__=!0;ch.prototype={toString:function(){var a;
null==h.MassMode_DEFAULT&&(h.internal=!0,h.MassMode_DEFAULT=new ch,h.internal=!1);this==h.MassMode_DEFAULT?a="DEFAULT":(null==h.MassMode_FIXED&&(h.internal=!0,h.MassMode_FIXED=new ch,h.internal=!1),a=this==h.MassMode_FIXED?"FIXED":"");return a},__class__:ch};var Aa=function(a,b,d,c,f){null==f&&(f=0.001);null==c&&(c=1);null==d&&(d=2);null==b&&(b=1);null==a&&(a=0);this.zpp_inner=null;null==ca.zpp_pool?this.zpp_inner=new ca:(this.zpp_inner=ca.zpp_pool,ca.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=
null);null;this.zpp_inner.outer=this;a!=this.zpp_inner.elasticity&&(this.zpp_inner.elasticity=a/1,this.zpp_inner.invalidate(ca.WAKE|ca.ARBITERS));this.zpp_inner.elasticity;b!=this.zpp_inner.dynamicFriction&&(this.zpp_inner.dynamicFriction=b/1,this.zpp_inner.invalidate(ca.WAKE|ca.ANGDRAG|ca.ARBITERS));this.zpp_inner.dynamicFriction;d!=this.zpp_inner.staticFriction&&(this.zpp_inner.staticFriction=d/1,this.zpp_inner.invalidate(ca.WAKE|ca.ARBITERS));this.zpp_inner.staticFriction;c!=1E3*this.zpp_inner.density&&
(this.zpp_inner.density=c/1E3,this.zpp_inner.invalidate(ca.WAKE|ca.PROPS));1E3*this.zpp_inner.density;f!=this.zpp_inner.rollingFriction&&(this.zpp_inner.rollingFriction=f/1,this.zpp_inner.invalidate(ca.WAKE|ca.ARBITERS));this.zpp_inner.rollingFriction};j["nape.phys.Material"]=Aa;Aa.__name__=!0;Aa.wood=function(){return new Aa(0.4,0.2,0.38,0.7,0.005)};Aa.steel=function(){return new Aa(0.2,0.57,0.74,7.8,0.001)};Aa.ice=function(){return new Aa(0.3,0.03,0.1,0.9,1.0E-4)};Aa.rubber=function(){return new Aa(0.8,
1,1.4,1.5,0.01)};Aa.glass=function(){return new Aa(0.4,0.4,0.94,2.6,0.002)};Aa.sand=function(){return new Aa(-1,0.45,0.6,1.6,16)};Aa.prototype={toString:function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+1E3*this.zpp_inner.density+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},__class__:Aa};var Hd=function(){this.zpp_inner_i=this.zpp_inner=null};j["nape.shape.Shape"]=
Hd;Hd.__name__=!0;Hd.__super__=fc;Hd.prototype=z(fc.prototype,{get_body:function(){return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},set_sensorEnabled:function(a){this.zpp_inner.immutable_midstep("Shape::sensorEnabled");this.zpp_inner.sensorEnabled=a;this.zpp_inner.wake();return this.zpp_inner.sensorEnabled},toString:function(){return(this.zpp_inner.type==h.id_ShapeType_CIRCLE?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},__class__:Hd,__properties__:z(fc.prototype.__properties__,{set_sensorEnabled:"set_sensorEnabled",
get_body:"get_body"})});var Oe=function(a,b,d,c){this.zpp_inner_zn=null;Hd.call(this);this.zpp_inner_zn=new Pf;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i.outer_i=this;this.zpp_inner.immutable_midstep("Circle::radius");a!=this.zpp_inner_zn.radius&&(this.zpp_inner_zn.radius=a,this.zpp_inner_zn.invalidate_radius());this.zpp_inner_zn.radius;null==b?(this.zpp_inner.localCOMx=0,this.zpp_inner.localCOMy=0):(b.zpp_inner.validate(),
this.zpp_inner.localCOMx=b.zpp_inner.x,b.zpp_inner.validate(),this.zpp_inner.localCOMy=b.zpp_inner.y,b.zpp_inner.weak?(b.dispose(),!0):!1);null==d?(null==ca.zpp_pool?this.zpp_inner.material=new ca:(this.zpp_inner.material=ca.zpp_pool,ca.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null),null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(d.zpp_inner),this.zpp_inner.material.wrapper());null==c?(null==nb.zpp_pool?this.zpp_inner.filter=new nb:(this.zpp_inner.filter=
nb.zpp_pool,nb.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(c.zpp_inner),this.zpp_inner.filter.wrapper());this.zpp_inner_i.insert_cbtype(sa.ANY_SHAPE.zpp_inner)};j["nape.shape.Circle"]=Oe;Oe.__name__=!0;Oe.__super__=Hd;Oe.prototype=z(Hd.prototype,{__class__:Oe});var Xi=function(){this.zpp_inner=null};j["nape.shape.Edge"]=Xi;Xi.__name__=!0;Xi.prototype={toString:function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";
if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" }";this.zpp_inner.polygon.validate_gaxi();return"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" worldNormal : "+("{ x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" }")+" }"},__class__:Xi};var id=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};j["nape.shape.EdgeIterator"]=
id;id.__name__=!0;id.get=function(a){var b;null==id.zpp_pool?(Pe.internal=!0,b=new id,Pe.internal=!1):(b=id.zpp_pool,id.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};id.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=id.zpp_pool;id.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:id};
var Bk=function(){this.zpp_inner=null};j["nape.shape.EdgeList"]=Bk;Bk.__name__=!0;Bk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&a!=this.get_length()-1&&(a=this.get_length()-2-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=
this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=id.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Bk,__properties__:{get_length:"get_length"}};var Ba=function(a,b,d){this.zpp_inner_zn=null;
Hd.call(this);this.zpp_inner_zn=new dh;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i.outer_i=this;if(a instanceof Array&&null==a.__enum__)for(var c=0;c<a.length;){var f=a[c];++c;var i=f;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(Q.get(function(){i.zpp_inner.validate();return i.zpp_inner.x}(this),function(){i.zpp_inner.validate();return i.zpp_inner.y}(this),!1))}else if(A.__instanceof(a,
Xd))for(c=a.iterator();c.hasNext();){var o;c.zpp_critical=!1;o=c.zpp_inner.at(c.zpp_i++);null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(Q.get(function(){o.zpp_inner.validate();return o.zpp_inner.x}(this),function(){o.zpp_inner.validate();return o.zpp_inner.y}(this),!1))}else if(A.__instanceof(a,Ti)&&(c=a.zpp_inner.vertices,null!=c)){f=c;do{var h=Q.get(f.x,f.y,null),f=f.next;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(Q.get(function(){h.zpp_inner.validate();
return h.zpp_inner.x}(this),function(){h.zpp_inner.validate();return h.zpp_inner.y}(this),!1));h.dispose()}while(f!=c)}if(a instanceof Array&&null==a.__enum__)for(c=0;c<a.length;){var f=a[c],e;if(e=f.zpp_inner.weak)f.dispose(),e=!0;e?a.splice(c,1):c++}else if(A.__instanceof(a,Xd)){null!=a.zpp_inner._validate&&a.zpp_inner._validate();a=a.zpp_inner.inner;c=null;for(f=a.head;null!=f;)e=f.elt,e.outer.zpp_inner.weak?(f=a.erase(c),e.outer.zpp_inner.weak?(e.outer.dispose(),!0):!1):(c=f,f=f.next)}null==b?
(null==ca.zpp_pool?this.zpp_inner.material=new ca:(this.zpp_inner.material=ca.zpp_pool,ca.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null),null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(b.zpp_inner),this.zpp_inner.material.wrapper());null==d?(null==nb.zpp_pool?this.zpp_inner.filter=new nb:(this.zpp_inner.filter=nb.zpp_pool,nb.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),null):(this.zpp_inner.immutable_midstep("Shape::filter"),
this.zpp_inner.setFilter(d.zpp_inner),this.zpp_inner.filter.wrapper());this.zpp_inner_i.insert_cbtype(sa.ANY_SHAPE.zpp_inner)};j["nape.shape.Polygon"]=Ba;Ba.__name__=!0;Ba.rect=function(a,b,d,c,f){null==f&&(f=!1);return[Q.get(a,b,f),Q.get(a+d,b,f),Q.get(a+d,b+c,f),Q.get(a,b+c,f)]};Ba.box=function(a,b,d){null==d&&(d=!1);return Ba.rect(-a/2,-b/2,a,b,d)};Ba.__super__=Hd;Ba.prototype=z(Hd.prototype,{__class__:Ba});var Tc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};
j["nape.shape.ShapeIterator"]=Tc;Tc.__name__=!0;Tc.get=function(a){var b;null==Tc.zpp_pool?(Id.internal=!0,b=new Tc,Id.internal=!1):(b=Tc.zpp_pool,Tc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Tc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Tc.zpp_pool;Tc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},
__class__:Tc};var Yi=function(){this.zpp_inner=null;this.zpp_inner=new Id;this.zpp_inner.outer=this};j["nape.shape.ShapeList"]=Yi;Yi.__name__=!0;Yi.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=
a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?
null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?
null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var d=this.zpp_inner.inner.head;null!=d;){if(d.elt==
a.zpp_inner){b=!0;break}d=d.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=Tc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Yi,__properties__:{get_length:"get_length"}};var Qf=function(){};j["nape.shape.ShapeType"]=
Qf;Qf.__name__=!0;Qf.prototype={toString:function(){var a;null==h.ShapeType_CIRCLE&&(h.internal=!0,h.ShapeType_CIRCLE=new Qf,h.internal=!1);this==h.ShapeType_CIRCLE?a="CIRCLE":(null==h.ShapeType_POLYGON&&(h.internal=!0,h.ShapeType_POLYGON=new Qf,h.internal=!1),a=this==h.ShapeType_POLYGON?"POLYGON":"");return a},__class__:Qf};var me=function(){};j["nape.shape.ValidationResult"]=me;me.__name__=!0;me.prototype={toString:function(){var a;null==h.ValidationResult_VALID&&(h.internal=!0,h.ValidationResult_VALID=
new me,h.internal=!1);this==h.ValidationResult_VALID?a="VALID":(null==h.ValidationResult_DEGENERATE&&(h.internal=!0,h.ValidationResult_DEGENERATE=new me,h.internal=!1),this==h.ValidationResult_DEGENERATE?a="DEGENERATE":(null==h.ValidationResult_CONCAVE&&(h.internal=!0,h.ValidationResult_CONCAVE=new me,h.internal=!1),this==h.ValidationResult_CONCAVE?a="CONCAVE":(null==h.ValidationResult_SELF_INTERSECTING&&(h.internal=!0,h.ValidationResult_SELF_INTERSECTING=new me,h.internal=!1),a=this==h.ValidationResult_SELF_INTERSECTING?
"SELF_INTERSECTING":"")));return a},__class__:me};var Qe=function(){};j["nape.space.Broadphase"]=Qe;Qe.__name__=!0;Qe.prototype={toString:function(){var a;null==h.Broadphase_DYNAMIC_AABB_TREE&&(h.internal=!0,h.Broadphase_DYNAMIC_AABB_TREE=new Qe,h.internal=!1);this==h.Broadphase_DYNAMIC_AABB_TREE?a="DYNAMIC_AABB_TREE":(null==h.Broadphase_SWEEP_AND_PRUNE&&(h.internal=!0,h.Broadphase_SWEEP_AND_PRUNE=new Qe,h.internal=!1),a=this==h.Broadphase_SWEEP_AND_PRUNE?"SWEEP_AND_PRUNE":"");return a},__class__:Qe};
var $i=function(a,b){this.zpp_inner=null;this.zpp_inner=new Zi(null==a?null:a.zpp_inner,b);this.zpp_inner.outer=this;null!=a&&(a.zpp_inner.weak?(a.dispose(),!0):!1)};j["nape.space.Space"]=$i;$i.__name__=!0;$i.prototype={step:function(a,b,d){null==d&&(d=10);null==b&&(b=10);this.zpp_inner.step(a,b,d)},__class__:$i};var Jd=function(a){this.time=0;null!=a&&(this.id=a.has.resolve("id")?r.parseInt(a.att.resolve("id")):0,this.time=a.has.resolve("time")?r.parseInt(a.att.resolve("time")):0,this.curveType=
a.has.resolve("curve_type")?Ua.createEnum(Ka,a.att.resolve("curve_type").toUpperCase()):Ka.LINEAR,this.c1=a.has.resolve("c1")?r.parseFloat(a.att.resolve("c1")):0,this.c2=a.has.resolve("c2")?r.parseFloat(a.att.resolve("c2")):0)};j["spriter.definitions.TimelineKey"]=Jd;Jd.__name__=!0;Jd.prototype={copy:function(){return this.clone(new Jd)},clone:function(a){a.id=this.id;a.time=this.time;a.curveType=this.curveType;a.c1=this.c1;a.c2=this.c2;return a},interpolate:function(a,b,d){this.linearKey(a,this.getTWithNextKey(a,
b,d))},getTWithNextKey:function(a,b,d){if(this.curveType==Ka.INSTANT||this.time==a.time)return 0;a=(d-this.time)/(a.time-this.time);return this.curveType==Ka.LINEAR?a:this.curveType==Ka.QUADRATIC?this.quadratic(0,this.c1,1,a):this.curveType==Ka.CUBIC?this.cubic(0,this.c1,this.c2,1,a):0},linear:function(a,b,d){return(b-a)*d+a},linearKey:function(){null},angleLinear:function(a,b,d,c){if(0==d)return a;0<d?0>b-a&&(b+=360):0>d&&0<b-a&&(b-=360);return this.linear(a,b,c)},quadratic:function(a,b,d,c){return this.linear(this.linear(a,
b,c),this.linear(b,d,c),c)},cubic:function(a,b,d,c,f){return this.linear(this.quadratic(a,b,d,f),this.quadratic(b,d,c,f),f)},__class__:Jd};var Ha=function(a){Jd.call(this,a);if(null!=a){var b;b=a.has.resolve("spin")?r.parseInt(a.att.resolve("spin")):1;var a=a.hasNode.resolve("object")?a.node.resolve("object"):a.node.resolve("bone"),d;d=a.has.resolve("x")?r.parseFloat(a.att.resolve("x")):0;var c;c=a.has.resolve("y")?r.parseFloat(a.att.resolve("y")):0;var f;f=a.has.resolve("angle")?r.parseFloat(a.att.resolve("angle")):
0;var i;i=a.has.resolve("scale_x")?r.parseFloat(a.att.resolve("scale_x")):1;var o;o=a.has.resolve("scale_y")?r.parseFloat(a.att.resolve("scale_y")):1;a=a.has.resolve("a")?r.parseFloat(a.att.resolve("a")):1;this.info=new xd(d,c,f,i,o,a,b)}};j["spriter.definitions.SpatialTimelineKey"]=Ha;Ha.__name__=!0;Ha.__super__=Jd;Ha.prototype=z(Jd.prototype,{copy:function(){return this.clone(new Ha)},clone:function(a){Jd.prototype.clone.call(this,a);a.info=this.info.copy();return a},linearSpatialInfo:function(a,
b,d,c){this.info.x=this.linear(a.x,b.x,c);this.info.y=this.linear(a.y,b.y,c);this.info.angle=this.angleLinear(a.angle,b.angle,d,c);this.info.scaleX=this.linear(a.scaleX,b.scaleX,c);this.info.scaleY=this.linear(a.scaleY,b.scaleY,c);this.info.a=this.linear(a.a,b.a,c)},paint:function(a,b){return new yd(a,b)},__class__:Ha});var Zd=function(a){this.paintDebugBones=!0;null!=a&&(this.length=a.has.resolve("length")?r.parseInt(a.att.resolve("length")):200,this.width=a.has.resolve("width")?r.parseInt(a.att.resolve("width")):
10);Ha.call(this,a)};j["spriter.definitions.BoneTimelineKey"]=Zd;Zd.__name__=!0;Zd.__super__=Ha;Zd.prototype=z(Ha.prototype,{copy:function(){return this.clone(new Zd)},clone:function(a){Ha.prototype.clone.call(this,a);a.length=this.length;a.width=this.width;a.paintDebugBones=this.paintDebugBones;return a},paint:function(a,b){return new yd(a,b)},linearKey:function(a,b){if(!A.__instanceof(a,Zd))throw new p("keyB must be BoneTimelineKeys");var d;d=A.__cast(a,Zd);this.linearSpatialInfo(this.info,d.info,
this.info.spin,b);this.paintDebugBones&&(this.length=r["int"](this.linear(this.length,d.length,b)),this.width=r["int"](this.linear(this.width,d.width,b)))},__class__:Zd});var bj=function(a){this.maps=[];this.id=r.parseInt(a.att.resolve("id"));this.name=a.att.resolve("name");for(a=a.nodes.resolve("map").iterator();null!=a.head;)a.val=a.head[0],a.head=a.head[1],this.maps.push(new aj(a.val))};j["spriter.definitions.CharacterMap"]=bj;bj.__name__=!0;bj.prototype={__class__:bj};var cj=function(a){this.boneRefs=
[];this.objectRefs=[];this.id=r.parseInt(a.att.resolve("id"));this.time=a.has.resolve("time")?r.parseInt(a.att.resolve("time")):0;for(var b=a.nodes.resolve("bone_ref").iterator();null!=b.head;)b.val=b.head[0],b.head=b.head[1],this.boneRefs.push(new eh(b.val));for(a=a.nodes.resolve("object_ref").iterator();null!=a.head;)a.val=a.head[0],a.head=a.head[1],this.objectRefs.push(new eh(a.val))};j["spriter.definitions.MainlineKey"]=cj;cj.__name__=!0;cj.prototype={__class__:cj};var aj=function(a){this.folder=
r.parseInt(a.att.resolve("folder"));this.file=r.parseInt(a.att.resolve("file"));this.tarFolder=a.has.resolve("target_folder")?r.parseInt(a.att.resolve("target_folder")):-1;this.tarFile=a.has.resolve("target_file")?r.parseInt(a.att.resolve("target_file")):-1};j["spriter.definitions.MapInstruction"]=aj;aj.__name__=!0;aj.prototype={__class__:aj};var Sb=function(a,b){Ha.call(this,a);null!=a&&(this.type=b,a=a.node.resolve("object"),this.useDefaultPivot=!a.has.resolve("pivot_x")&&!a.has.resolve("pivot_y"),
this.pivot_x=a.has.resolve("pivot_x")?r.parseFloat(a.att.resolve("pivot_x")):0,this.pivot_y=a.has.resolve("pivot_y")?r.parseFloat(a.att.resolve("pivot_y")):1)};j["spriter.definitions.ObjectTimelineKey"]=Sb;Sb.__name__=!0;Sb.__super__=Ha;Sb.prototype=z(Ha.prototype,{copy:function(){return this.clone(new Sb)},clone:function(a){Ha.prototype.clone.call(this,a);a.useDefaultPivot=this.useDefaultPivot;a.pivot_x=this.pivot_x;a.pivot_y=this.pivot_y;a.type=this.type;return a},paint:function(a,b){var d,c;this.useDefaultPivot?
(d=a,c=b):(d=this.pivot_x,c=this.pivot_y);return new yd(d,c)},linearKey:function(a,b){if(!A.__instanceof(a,Sb))throw new p("keyB must be ObjectTimelineKey");var d;d=A.__cast(a,Sb);this.linearSpatialInfo(this.info,d.info,this.info.spin,b);this.useDefaultPivot||(this.pivot_x=this.linear(this.pivot_x,d.pivot_x,b),this.pivot_y=this.linear(this.pivot_y,d.pivot_y,b))},__class__:Sb});var yd=function(a,b){null==b&&(b=1);null==a&&(a=0);this.pivotX=a;this.pivotY=b};j["spriter.definitions.PivotInfo"]=yd;yd.__name__=
!0;yd.prototype={__class__:yd};var dj=function(a,b,d,c){this.p1=a;this.p2=b;this.p3=d;this.p4=c};j["spriter.definitions.Quadrilateral"]=dj;dj.__name__=!0;dj.prototype={__class__:dj};var $d=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};j["spriter.definitions.QuadPoint"]=$d;$d.__name__=!0;$d.prototype={__class__:$d};var eh=function(a){this.id=r.parseInt(a.att.resolve("id"));this.parent=a.has.resolve("parent")?r.parseInt(a.att.resolve("parent")):-1;this.timeline=r.parseInt(a.att.resolve("timeline"));
this.key=r.parseInt(a.att.resolve("key"))};j["spriter.definitions.Ref"]=eh;eh.__name__=!0;eh.prototype={__class__:eh};var Qa=j["spriter.definitions.MetaDispatch"]={__ename__:!0,__constructs__:["ONCE","ONCE_PER_LOOP","ALWAYS"]};Qa.ONCE=["ONCE",0];Qa.ONCE.toString=g;Qa.ONCE.__enum__=Qa;Qa.ONCE_PER_LOOP=["ONCE_PER_LOOP",1];Qa.ONCE_PER_LOOP.toString=g;Qa.ONCE_PER_LOOP.__enum__=Qa;Qa.ALWAYS=["ALWAYS",2];Qa.ALWAYS.toString=g;Qa.ALWAYS.__enum__=Qa;var ej=function(){};j["spriter.interfaces.IScml"]=ej;ej.__name__=
!0;ej.prototype={__class__:ej};var fh=function(a){this.metaDispatch=Qa.ONCE_PER_LOOP;this.endAnimRemoval=!0;this.currentEntity=this.currentAnimation="";if(null!=a){this.folders=[];this.entities=new E;a=new Ud(a.firstElement());"1.0"!=a.att.resolve("scml_version")&&null;for(a=a.get_elements();a.hasNext();){var b=a.next();if("folder"==b.get_name())this.folders.push(new Rf(b));else if("entity"==b.get_name()){var d=b.att.resolve("name"),c=new fj(b);this.entities.set(d,c);"0"==b.att.resolve("id")&&(this.currentEntity=
b.att.resolve("name"),this.currentAnimation=b.node.resolve("animation").att.resolve("name"))}else if("tag_list"==b.get_name()){null==this.tags&&(this.tags=[]);for(b=b.get_elements();b.hasNext();)this.tags.push(b.next().att.resolve("name"))}}this.activeCharacterMap=this.copyFolders()}};j["spriter.definitions.ScmlObject"]=fh;fh.__name__=!0;fh.__interfaces__=[ej];fh.prototype={getPivots:function(a,b){var d=this.activeCharacterMap[a].files[b];return null!=d?new yd(d.pivotX,d.pivotY):new yd},getFileName:function(a,
b){var d=this.activeCharacterMap[a].files[b];return null!=d?d.name:null},onEndAnim:function(){if(null!=this.endAnimCallback){var a=this.endAnimCallback;this.endAnimRemoval&&(this.endAnimCallback=null);a()}},onTag:function(a){null!=this.tagCallback&&this.tagCallback(this.tags[a])},onVar:function(a,b){var d=this.entities.get(this.currentEntity).variables[a];d.set(b)&&null!=this.varChangeCallback&&this.varChangeCallback(d)},setCurrentTime:function(a,b,d){var c=this.entities.get(this.currentEntity),f=
c.animations.get(this.currentAnimation);this.spriterSpatialInfo=d;f.setCurrentTime(a,b,this,c)},copyFolders:function(){for(var a=[],b=0,d=this.folders.length;b<d;){var c=b++;a[c]=this.folders[c].copy()}return a},__class__:fh};var xd=function(a,b,d,c,f,i,o){null==o&&(o=1);null==i&&(i=1);null==f&&(f=1);null==c&&(c=1);null==d&&(d=0);null==b&&(b=0);null==a&&(a=0);this.scaleX=this.scaleY=this.a=this.spin=1;this.x=this.y=this.angle=0;this.x=a;this.y=b;this.angle=d;this.scaleX=c;this.scaleY=f;this.a=i;this.spin=
o};j["spriter.definitions.SpatialInfo"]=xd;xd.__name__=!0;xd.prototype={unmapFromParent:function(a){var b,d;d=0>a.scaleX*a.scaleY?360-this.angle+a.angle:this.angle+a.angle;var c=this.scaleX*a.scaleX,f=this.scaleY*a.scaleY,i=this.a*a.a;if(0!=this.x||0!=this.y){var o=this.x*a.scaleX,h=this.y*a.scaleY;b=Kd.toRadians(Kd.under360(a.angle));var e=Math.sin(b),g=Math.cos(b);b=o*g-h*e+a.x;a=o*e+h*g+a.y}else b=a.x,a=a.y;return new xd(b,a,d,c,f,i,this.spin)},copy:function(){return new xd(this.x,this.y,this.angle,
this.scaleX,this.scaleY,this.a,this.spin)},__class__:xd};var ae=function(a){Sb.call(this,a);null!=a&&(a=a.node.resolve("object"),this.folder=a.has.resolve("folder")?r.parseInt(a.att.resolve("folder")):0,this.file=a.has.resolve("file")?r.parseInt(a.att.resolve("file")):0)};j["spriter.definitions.SpriteTimelineKey"]=ae;ae.__name__=!0;ae.__super__=Sb;ae.prototype=z(Sb.prototype,{copy:function(){return this.clone(new ae)},clone:function(a){Sb.prototype.clone.call(this,a);a.folder=this.folder;a.file=this.file;
a.useDefaultPivot=this.useDefaultPivot;a.pivot_x=this.pivot_x;a.pivot_y=this.pivot_y;return a},__class__:ae});var Uc=j["spriter.definitions.LoopType"]={__ename__:!0,__constructs__:["LOOPING","NO_LOOPING"]};Uc.LOOPING=["LOOPING",0];Uc.LOOPING.toString=g;Uc.LOOPING.__enum__=Uc;Uc.NO_LOOPING=["NO_LOOPING",1];Uc.NO_LOOPING.toString=g;Uc.NO_LOOPING.__enum__=Uc;var jj=function(a){this.loop=0;this.mainlineKeys=[];this.timelines=[];this.id=r.parseInt(a.att.resolve("id"));this.name=a.att.resolve("name");this.length=
r.parseInt(a.att.resolve("length"));this.loopType=a.has.resolve("looping")?"true"==a.att.resolve("looping")?Uc.LOOPING:Uc.NO_LOOPING:Uc.LOOPING;for(var b=a.node.resolve("mainline").nodes.resolve("key").iterator();null!=b.head;)b.val=b.head[0],b.head=b.head[1],this.mainlineKeys.push(new cj(b.val));for(b=a.nodes.resolve("timeline").iterator();null!=b.head;)b.val=b.head[0],b.head=b.head[1],this.timelines.push(new gj(b.val));if(a.hasNode.resolve("meta")){a=a.node.resolve("meta");if(a.hasNode.resolve("tagline")){this.taglines=
[];for(b=a.node.resolve("tagline").nodes.resolve("key").iterator();null!=b.head;)b.val=b.head[0],b.head=b.head[1],this.taglines.push(new hj(b.val))}if(a.hasNode.resolve("varline")){this.varlines=[];for(a=a.nodes.resolve("varline").iterator();null!=a.head;)a.val=a.head[0],a.head=a.head[1],this.varlines.push(new ij(a.val))}}};j["spriter.definitions.SpriterAnimation"]=jj;jj.__name__=!0;jj.prototype={setCurrentTime:function(a,b,d,c){var f;switch(this.loopType[1]){case 0:f=this.loop;this.loop=a/this.length|
0;a%=this.length;this.updateCharacter(this.mainlineKeyFromTime(a),a,b,d,c);d.metaDispatch==Qa.ONCE_PER_LOOP&&f!=this.loop&&this.resetMetaDispatch();if(1==this.loop&&1>f)d.onEndAnim();break;case 1:if(a=r["int"](Math.min(a,this.length)),this.updateCharacter(this.mainlineKeyFromTime(a),a,b,d,c),a==this.length)d.onEndAnim()}},updateCharacter:function(a,b,d,c,f){for(var i=[],o,h,e,g=a.boneRefs.length,j=0;j<g;)e=j++,h=a.boneRefs[e],o=this.keyFromRef(h,b),e=0<=h.parent?i[h.parent]:c.spriterSpatialInfo,e=
o.info.unmapFromParent(e),i.push(e);this.points=[];this.boxes=[];g=a.objectRefs.length;for(j=0;j<g;){e=j++;h=a.objectRefs[e];o=this.keyFromRef(h,b);e=0<=h.parent?i[h.parent]:c.spriterSpatialInfo;e=o.info.unmapFromParent(e);var k;if(A.__instanceof(o,ae)){var l;l=A.__cast(o,ae);k=c.getPivots(l.folder,l.file);k=o.paint(k.pivotX,k.pivotY);o=c.getFileName(l.folder,l.file);null!=o&&d.addGraphic(c.spriterName,h.timeline,h.key,o,e,k)}else k=new yd,k=o.paint(k.pivotX,k.pivotY),A.__cast(o,Sb).type==ya.POINT?
this.points.push(d.compute(e,k,0,0)):(h=this.getTimelineName(h.timeline),h=f.boxes_info.get(h),this.boxes.push(d.computeRectCoordinates(e,k,h.width,h.height)))}if(null!=this.taglines){b=0;for(d=this.taglines;b<d.length;)if(f=d[b],++b,f.time==a.time)if(c.metaDispatch==Qa.ALWAYS)c.onTag(f.id);else c.metaDispatch==Qa.ONCE_PER_LOOP&&a.time!=f.get_lastDispatched()?(f.set_lastDispatched(a.time),c.onTag(f.id)):c.metaDispatch==Qa.ONCE&&!f.get_dispatched()&&(f.set_lastDispatched(a.time),c.onTag(f.id))}if(null!=
this.varlines){b=0;for(d=this.varlines;b<d.length;){f=d[b];++b;i=0;for(g=f.keys;i<g.length;)if(e=g[i],++i,e.time==a.time)if(c.metaDispatch==Qa.ALWAYS)c.onVar(f.id,e.value);else c.metaDispatch==Qa.ONCE_PER_LOOP&&a.time!=e.get_lastDispatched()?(e.set_lastDispatched(a.time),c.onVar(f.id,e.value)):c.metaDispatch==Qa.ONCE&&!e.get_dispatched()&&(e.set_lastDispatched(a.time),c.onVar(f.id,e.value))}}},mainlineKeyFromTime:function(a){for(var b=0,d=this.mainlineKeys.length,c=0;c<d;){var f=c++;this.mainlineKeys[f].time<=
a&&(b=f);if(this.mainlineKeys[f].time>=a)break}return this.mainlineKeys[b]},keyFromRef:function(a,b){var d=this.timelines[a.timeline],c=d.keys[a.key].copy();if(1==d.keys.length||c.curveType==Ka.INSTANT)return c;var f=a.key+1;if(f>=d.keys.length)if(this.loopType==Uc.LOOPING)f=0;else return c;d=d.keys[f].copy();f=d.time;f<c.time&&(f+=this.length);c.interpolate(d,f,b);return c},getTimelineName:function(a){return this.timelines[a].name},resetMetaDispatch:function(){if(null!=this.taglines)for(var a=0,
b=this.taglines;a<b.length;){var d=b[a];++a;d.set_dispatched(!1)}},__class__:jj};var kj=function(a){null!=a&&(this.name=a.att.resolve("name"),this.pivotX=a.has.resolve("pivot_x")?r.parseFloat(a.att.resolve("pivot_x")):0,this.pivotY=a.has.resolve("pivot_y")?r.parseFloat(a.att.resolve("pivot_y")):0,this.width=a.has.resolve("w")?r.parseFloat(a.att.resolve("w")):0,this.height=a.has.resolve("h")?r.parseFloat(a.att.resolve("h")):0)};j["spriter.definitions.SpriterBox"]=kj;kj.__name__=!0;kj.prototype={__class__:kj};
var fj=function(a){this.characterMaps=new E;this.animations=new E;this.variables=[];this.boxes_info=new E;this.id=r.parseInt(a.att.resolve("id"));this.name=a.att.resolve("name");for(var b=a.nodes.resolve("character_map").iterator();null!=b.head;){var d;b.val=b.head[0];b.head=b.head[1];d=b.val;var c=d.att.resolve("name");d=new bj(d);this.characterMaps.set(c,d)}if(a.hasNode.resolve("var_defs"))for(b=a.node.resolve("var_defs").get_elements();b.hasNext();)switch(c=b.next(),c.att.resolve("type")){case "int":this.variables.push(new Sf(c.att.resolve("name"),
r.parseInt(c.att.resolve("default"))));break;case "string":this.variables.push(new gh(c.att.resolve("name"),r.string(c.att.resolve("default"))));break;case "float":this.variables.push(new Tf(c.att.resolve("name"),r.parseFloat(c.att.resolve("default"))))}for(b=a.nodes.resolve("obj_info").iterator();null!=b.head;)b.val=b.head[0],b.head=b.head[1],d=b.val,c=d.att.resolve("name"),d=new kj(d),this.boxes_info.set(c,d);for(a=a.nodes.resolve("animation").iterator();null!=a.head;)a.val=a.head[0],a.head=a.head[1],
c=a.val,b=c.att.resolve("name"),c=new jj(c),this.animations.set(b,c)};j["spriter.definitions.SpriterEntity"]=fj;fj.__name__=!0;fj.prototype={__class__:fj};var hh=function(a){null!=a&&(this.id=r.parseInt(a.att.resolve("id")),this.name=a.att.resolve("name"),this.pivotX=a.has.resolve("pivot_x")?r.parseFloat(a.att.resolve("pivot_x")):0,this.pivotY=a.has.resolve("pivot_y")?r.parseFloat(a.att.resolve("pivot_y")):1,this.width=a.has.resolve("width")?r.parseFloat(a.att.resolve("width")):0,this.height=a.has.resolve("height")?
r.parseFloat(a.att.resolve("height")):0)};j["spriter.definitions.SpriterFile"]=hh;hh.__name__=!0;hh.prototype={copy:function(){var a=new hh;a.name=this.name;a.id=this.id;a.pivotX=this.pivotX;a.pivotY=this.pivotY;a.width=this.width;a.height=this.height;return a},__class__:hh};var Rf=function(a){this.name="";this.files=[];if(null!=a){this.id=r.parseInt(a.att.resolve("id"));a.hasNode.resolve("name")&&(this.name=a.att.resolve("name"));for(a=a.nodes.resolve("file").iterator();null!=a.head;)a.val=a.head[0],
a.head=a.head[1],this.files.push(new hh(a.val))}};j["spriter.definitions.SpriterFolder"]=Rf;Rf.__name__=!0;Rf.prototype={copy:function(){var a=new Rf;a.name=this.name;a.id=this.id;for(var b=0,d=this.files.length;b<d;){var c=b++;a.files[c]=this.files[c].copy()}return a},__class__:Rf};var ya=j["spriter.definitions.ObjectType"]={__ename__:!0,__constructs__:"SPRITE,BONE,BOX,POINT,SOUND,ENTITY,VARIABLE".split(",")};ya.SPRITE=["SPRITE",0];ya.SPRITE.toString=g;ya.SPRITE.__enum__=ya;ya.BONE=["BONE",1];ya.BONE.toString=
g;ya.BONE.__enum__=ya;ya.BOX=["BOX",2];ya.BOX.toString=g;ya.BOX.__enum__=ya;ya.POINT=["POINT",3];ya.POINT.toString=g;ya.POINT.__enum__=ya;ya.SOUND=["SOUND",4];ya.SOUND.toString=g;ya.SOUND.__enum__=ya;ya.ENTITY=["ENTITY",5];ya.ENTITY.toString=g;ya.ENTITY.__enum__=ya;ya.VARIABLE=["VARIABLE",6];ya.VARIABLE.toString=g;ya.VARIABLE.__enum__=ya;var gj=function(a){this.keys=[];this.id=r.parseInt(a.att.resolve("id"));this.name=a.has.resolve("name")?a.att.resolve("name"):"";this.objectType=a.has.resolve("object_type")?
Ua.createEnum(ya,a.att.resolve("object_type").toUpperCase()):ya.SPRITE;switch(this.objectType[1]){case 0:for(a=a.nodes.resolve("key").iterator();null!=a.head;)a.val=a.head[0],a.head=a.head[1],this.keys.push(new ae(a.val));break;case 1:for(a=a.nodes.resolve("key").iterator();null!=a.head;)a.val=a.head[0],a.head=a.head[1],this.keys.push(new Zd(a.val));break;case 3:for(a=a.nodes.resolve("key").iterator();null!=a.head;)a.val=a.head[0],a.head=a.head[1],this.keys.push(new Sb(a.val,this.objectType));break;
case 2:for(a=a.nodes.resolve("key").iterator();null!=a.head;)a.val=a.head[0],a.head=a.head[1],this.keys.push(new Sb(a.val,this.objectType))}};j["spriter.definitions.SpriterTimeline"]=gj;gj.__name__=!0;gj.prototype={__class__:gj};var hj=function(a){this._lastDispatched=-1;this._dispatched=!1;this.time=0;null!=a&&(this.id=a.has.resolve("id")?r.parseInt(a.att.resolve("id")):0,this.time=a.has.resolve("time")?r.parseInt(a.att.resolve("time")):0,a=a.node.resolve("tag"),this.t=r.parseInt(a.att.resolve("t")))};
j["spriter.definitions.TaglineKey"]=hj;hj.__name__=!0;hj.prototype={set_lastDispatched:function(a){this._lastDispatched=a;this._dispatched=-1!=a;return a},get_lastDispatched:function(){return this._lastDispatched},set_dispatched:function(a){this._dispatched=a;a||(this._lastDispatched=-1);return a},get_dispatched:function(){return this._dispatched},__class__:hj,__properties__:{set_lastDispatched:"set_lastDispatched",get_lastDispatched:"get_lastDispatched",set_dispatched:"set_dispatched",get_dispatched:"get_dispatched"}};
var Ka=j["spriter.definitions.CurveType"]={__ename__:!0,__constructs__:["INSTANT","LINEAR","QUADRATIC","CUBIC"]};Ka.INSTANT=["INSTANT",0];Ka.INSTANT.toString=g;Ka.INSTANT.__enum__=Ka;Ka.LINEAR=["LINEAR",1];Ka.LINEAR.toString=g;Ka.LINEAR.__enum__=Ka;Ka.QUADRATIC=["QUADRATIC",2];Ka.QUADRATIC.toString=g;Ka.QUADRATIC.__enum__=Ka;Ka.CUBIC=["CUBIC",3];Ka.CUBIC.toString=g;Ka.CUBIC.__enum__=Ka;var ij=function(a){if(null!=a){this.id=r.parseInt(a.att.resolve("def"));this.keys=[];for(a=a.nodes.resolve("key").iterator();null!=
a.head;)a.val=a.head[0],a.head=a.head[1],this.keys.push(new lj(a.val))}};j["spriter.definitions.Varline"]=ij;ij.__name__=!0;ij.prototype={__class__:ij};var lj=function(a){this._lastDispatched=-1;this._dispatched=!1;this.time=0;null!=a&&(this.id=a.has.resolve("id")?r.parseInt(a.att.resolve("id")):0,this.time=a.has.resolve("time")?r.parseInt(a.att.resolve("time")):0,this.value=a.att.resolve("val"))};j["spriter.definitions.VarlineKey"]=lj;lj.__name__=!0;lj.prototype={set_lastDispatched:function(a){this._lastDispatched=
a;this._dispatched=-1!=a;return a},get_lastDispatched:function(){return this._lastDispatched},get_dispatched:function(){return this._dispatched},__class__:lj,__properties__:{set_lastDispatched:"set_lastDispatched",get_lastDispatched:"get_lastDispatched",get_dispatched:"get_dispatched"}};var mj=function(a,b,d,c){this.playbackSpeed=1;this.paused=!1;this.timeMS=0;this.scml=b;this.library=d;this.spriterName=a;this.scml.spriterName=this.spriterName;this.info=c};j["spriter.engine.Spriter"]=mj;mj.__name__=
!0;mj.prototype={advanceTime:function(a){this.paused||(this.timeMS+=a*this.playbackSpeed|0);this.scml.setCurrentTime(this.timeMS,this.library,this.info)},playAnim:function(a,b,d){null==d&&(d=!0);if(null==a)return this.paused&&(this.paused=!1),this.timeMS=0,null!=b&&(this.scml.endAnimCallback=function(a,b,d,c){return function(){a(b,d,c)}}(b,this,this.scml.currentEntity,this.scml.currentAnimation),this.scml.endAnimRemoval=d),!0;return this.scml.entities.get(this.scml.currentEntity).animations.exists(a)?
(this.paused&&(this.paused=!1),this.timeMS=0,this.scml.currentAnimation=a,null!=b&&(this.scml.endAnimCallback=function(a,b,d,c){return function(){a(b,d,c)}}(b,this,this.scml.currentEntity,a),this.scml.endAnimRemoval=d),!0):!1},__class__:mj};var Uf=function(a,b,d){ia.call(this);this._pack=a;a=b.split(".");a.pop();this._basePath=a.join(".");b=this._pack.getFile(b).toString();this._scml=new fh(q.parse(b));this._container=(new Kb).add(new P);this._library=new be(this._container,this._pack,this._basePath);
this._spriter=new mj(d,this._scml,this._library,new xd)};j["spriter.flambe.SpriterMovie"]=Uf;Uf.__name__=!0;Uf.__super__=ia;Uf.prototype=z(ia.prototype,{get_name:function(){return"SpriterMovie_1"},onStart:function(){this.owner.addChild(this._container)},onUpdate:function(a){this._library.clear();this._spriter.advanceTime(1E3*a|0)},playAnim:function(a){this._spriter.playAnim(a);return this},__class__:Uf});var ih=function(a){this._basePath=a};j["spriter.library.AbstractLibrary"]=ih;ih.__name__=!0;ih.prototype=
{addGraphic:function(){throw new p("must be overrided");},compute:function(a,b,d,c){var f=Kd.under360(a.angle),i=f*Math.PI/180,o=Math.sin(i),i=Math.cos(i),h=a.x,e=a.y,d=a.x-b.pivotX*d*a.scaleX,b=a.y+(1-b.pivotY)*c*a.scaleY;return new xd((d-h)*i-(b-e)*o+h,-((d-h)*o+(b-e)*i+e),f,a.scaleX,a.scaleY,a.a,a.spin)},computeRectCoordinates:function(a,b,d,c){var f=-Kd.under360(a.angle)*Math.PI/180,i=Math.sin(f),f=Math.cos(f),o=a.x,h=-a.y,e=o-d*a.scaleX*b.pivotX,b=h-c*a.scaleY*(1-b.pivotY),g=e+d*a.scaleX,j=b,
g=(g-o)*f-(j-h)*i+o,j=(g-o)*i+(j-h)*f+h,d=e+d*a.scaleX,k=b+c*a.scaleY,d=(d-o)*f-(k-h)*i+o,k=(d-o)*i+(k-h)*f+h,c=b+c*a.scaleY,a=(e-o)*f-(c-h)*i+o,c=(a-o)*i+(c-h)*f+h,e=(e-o)*f-(b-h)*i+o;return new dj(new $d(e,(e-o)*i+(b-h)*f+h),new $d(g,j),new $d(d,k),new $d(a,c))},__class__:ih};var be=function(a,b,d){this._basePath=d;this._pack=b;this._point=new Mc;this._matrix=new Lb;this._rootEntity=a;be._textures=new E;this._entityPool=(new xi(function(){return new Kb})).setSize(25)};j["spriter.library.FlambeLibrary"]=
be;be.__name__=!0;be.__super__=ih;be.prototype=z(ih.prototype,{getTexture:function(a){if(!be._textures.exists(this._basePath+"."+a)){var b=this._pack.getTexture(this._basePath+"."+a.substring(0,a.lastIndexOf(".")));be._textures.set(this._basePath+"."+a,b)}return be._textures.get(this._basePath+"."+a)},clear:function(){for(;null!=this._rootEntity.firstChild;){var a=this._rootEntity.firstChild;this._rootEntity.removeChild(a);this._entityPool.put(a)}this._rootEntity.add(new P)},addGraphic:function(a,
b,d,c,f,i){a=this.getTexture(c);f=this.compute(f,i,a.get_width(),a.get_height());i=new je(a);i.getLocalMatrix().compose(f.x,f.y,f.scaleX,f.scaleY,Va.toRadians(Kd.fixRotation(f.angle)));i.alpha.set__(f.a);this._rootEntity.addChild(this._entityPool.take().add(i))},__class__:be});var Kd=function(){};j["spriter.util.SpriterUtil"]=Kd;Kd.__name__=!0;Kd.toRadians=function(a){return a*Math.PI/180};Kd.fixRotation=function(a){0==a&&(a=360);return 360-a};Kd.under360=function(a){for(;360<a;)a-=360;for(;0>a;)a+=
360;return a};var Ab=function(a,b){this.name=a;this.def=this.value=b};j["spriter.vars.Variable"]=Ab;Ab.__name__=!0;Ab.prototype={set:function(){return!1},__class__:Ab};var Tf=function(a,b){Ab.call(this,a,b)};j["spriter.vars.VariableFloat"]=Tf;Tf.__name__=!0;Tf.__super__=Ab;Tf.prototype=z(Ab.prototype,{set:function(a){var b=this.value;this.value=parseFloat(a);return b!=this.value?!0:!1},__class__:Tf});var Sf=function(a,b){Ab.call(this,a,b)};j["spriter.vars.VariableInt"]=Sf;Sf.__name__=!0;Sf.__super__=
Ab;Sf.prototype=z(Ab.prototype,{set:function(a){var b=this.value;this.value=r.parseInt(a);return b!=this.value?!0:!1},__class__:Sf});var gh=function(a,b){Ab.call(this,a,b)};j["spriter.vars.VariableString"]=gh;gh.__name__=!0;gh.__super__=Ab;gh.prototype=z(Ab.prototype,{set:function(a){var b=this.value;this.value=a;return b!=this.value?!0:!1},__class__:gh});var Ld=function(){};j["tools.spark.Main"]=Ld;Ld.__name__=!0;Ld.main=function(){Vf.init();Ld._loadClientConfig()};Ld._loadClientConfig=function(){O.successSignal.connect(Ld._onClientConfigLoaded).once();
O.initiateBatch();O.addFile(Ld._getSkcUrl(),"config");O.loadBatch()};Ld._onClientConfigLoaded=function(){if(!1==(new nj(O.getFile("config"))).parseClient())w.logger.error("Failed to parse configuration file. Aborting...",null);else{B.init();Vf.createDisplayRenderers();for(var a=0,b=M.executeModules;a<b.length;){var d=b[a];++a;H.execute(d)}S.root.add(new jh)}};Ld._getSkcUrl=function(){try{var a=S._platform.getExternal().call("getMainSparkClientUrl");return 0==a.length?"main.skc":a}catch(b){return b instanceof
p&&(b=b.val),"main.skc"}};var O=function(){};j["tools.spark.framework.Assets"]=O;O.__name__=!0;O.init=function(){O._loader=new oj;O._loader.successSignal.connect(O._onLoaderSuccess);O._loader.errorSignal.connect(O._onLoaderError);O._loader.progressSignal.connect(O._onLoaderProgress);O.successSignal=new Nc;O.errorSignal=new ma;O.progressSignal=new rd};O._onLoaderSuccess=function(){O.successSignal.emit()};O._onLoaderError=function(a){O.errorSignal.emit(a)};O._onLoaderProgress=function(a,b){O.progressSignal.emit(a,
b)};O.initiateBatch=function(){O._loader.startNewBatchLoad()};O.addFile=function(a,b,d){null==d&&(d=!1);null==b&&(b=a);O._loader.addFile(b,a,d)};O.loadBatch=function(){O._loader.initiateLoad()};O.getAssetPackOf=function(a){return O._loader.getAssetPackOf(a)};O.getFile=function(a){return O._loader.getFile(a)};O.getTexture=function(a){return O._loader.getTexture(a)};O.getSound=function(a){return O._loader.getSound(a)};var ja=function(){};j["tools.spark.framework.Console"]=ja;ja.__name__=!0;ja.log=function(a){w.logger.info(a,
null)};ja.info=function(a){w.logger.info(a,null)};ja.debug=function(a){w.logger.info(a,null)};ja.warn=function(a){w.logger.warn(a,null)};ja.error=function(a){w.logger.error(a,null)};var Vf=function(){};j["tools.spark.framework.Framework"]=Vf;Vf.__name__=!0;Vf.init=function(){Object.defineProperty&&Object.defineProperty(Array.prototype,"__class__",{enumerable:!1});S.init();Wf.init();O.init();M.init();H.init()};Vf.createDisplayRenderers=function(){Wf.createDisplayRenderers()};var H=function(){};j["tools.spark.framework.ModuleManager"]=
H;H.__name__=!0;H.init=function(){H._moduleStates=new E;H._modulesLoadQueue=[];H._modulesLoadQueueBytes=[];H._loadingBatch=!1;O.successSignal.connect(H._onLoaderSuccess);O.errorSignal.connect(H._onLoaderError);O.progressSignal.connect(H._onLoaderProgress)};H._onLoaderSuccess=function(){if(!1!=H._loadingBatch){H._loadingBatch=!1;var a=H._modulesLoadQueue[0];w.logger.info("Module Loader: SUCCESS LOADING: "+a,null);var b=aa.LOADED;H._moduleStates.set(a,b);b;H._modulesLoadQueue.shift();H._modulesLoadQueueBytes.shift();
H._executeModule(a);H._startLoadBatch()}};H._onLoaderError=function(a){w.logger.error("Module Loader: ERROR: "+a,null)};H._onLoaderProgress=function(){};H.execute=function(a){H.isModuleLoaded(a)?H._executeModule(a):H._loadModule(a)};H.getModuleState=function(a){if(null==H._moduleStates.get(a)){var b=aa.NOT_LOADED;H._moduleStates.set(a,b);b}return H._moduleStates.get(a)};H.isModuleLoaded=function(a){switch(H.getModuleState(a)[1]){case 0:case 1:return!1;case 2:case 3:case 4:return!0}};H.isModuleExecuted=
function(a){switch(H.getModuleState(a)[1]){case 0:case 1:case 2:return!1;case 3:case 4:return!0}};H._executeModule=function(a){if(H.isModuleExecuted(a))w.logger.warn("Error while trying to execute Module ["+a+"]. Module already executed. Ignoring..",null);else if(H.isModuleExecutable(a)){B.logic.createAndRun(M.modules.get(a).executeEntity);var b=aa.RUNNING;H._moduleStates.set(a,b);b}else w.logger.warn("Warning while trying to execute Module ["+a+"]. Module is not executable. Ignoring..",null)};H.isModuleExecutable=
function(a){return"none"==M.modules.get(a).executeEntity?!1:!0};H._loadModule=function(a){w.logger.info("LOADING MODULE: "+a,null);if(H.getModuleState(a)==aa.NOT_LOADED){for(var b=0,d=M.modules.get(a).requiresModules;b<d.length;){var c=d[b];++b;w.logger.info("LOADING MODULE REQUIREMENT: "+c,null);H.getModuleState(c)==aa.NOT_LOADED&&H._loadModule(c)}H._loadAssetsOfModule(a)}};H._loadAssetsOfModule=function(a){var b=0,d;for(d=M.modules.get(a).assets.iterator();d.hasNext();)var c=d.next(),b=b+r.parseInt(c.bytes);
d=aa.LOADING;H._moduleStates.set(a,d);d;H._modulesLoadQueue.push(a);H._modulesLoadQueueBytes.push(b);!1==H._loadingBatch&&H._startLoadBatch()};H._startLoadBatch=function(){if(0<H._modulesLoadQueue.length){var a=H._modulesLoadQueue[0];O.initiateBatch();for(a=M.modules.get(a).assets.iterator();a.hasNext();){var b=a.next();O.addFile(M.getPath(b.location,b.type)+b.url,b.id,"true"==b.forceLoadAsData)}O.loadBatch();H._loadingBatch=!0}};var M=function(){};j["tools.spark.framework.Project"]=M;M.__name__=
!0;M.init=function(){M.executeModules=[];M.sliced=new pa;M.paths=new E;M.modules=new E};M.setPath=function(a,b,d){if(null==M.paths.get(a)){var c=new E;M.paths.set(a,c);c}M.paths.get(a).set(b,d);d};M.getPath=function(a,b){return null==M.paths.get(a)?null:M.paths.get(a).get(b)};var jh=function(){ia.call(this)};j["tools.spark.framework.RootComponent"]=jh;jh.__name__=!0;jh.__super__=ia;jh.prototype=z(ia.prototype,{get_name:function(){return"RootComponent_0"},onUpdate:function(a){B.dt=a;B.input.update();
B.event.update();B.logic.update();B.display.update();B.comms.update()},__class__:jh});var w=function(){};j["tools.spark.framework.SparkLog"]=w;w.__name__=!0;w.__super__=Kg;w.prototype=z(Kg.prototype,{__class__:w});var pj=function(a){this.id=a};j["tools.spark.framework.assets.Asset"]=pj;pj.__name__=!0;pj.prototype={__class__:pj};var aa=j["tools.spark.framework.assets.EModuleState"]={__ename__:!0,__constructs__:["NOT_LOADED","LOADING","LOADED","RUNNING","PAUSED"]};aa.NOT_LOADED=["NOT_LOADED",0];aa.NOT_LOADED.toString=
g;aa.NOT_LOADED.__enum__=aa;aa.LOADING=["LOADING",1];aa.LOADING.toString=g;aa.LOADING.__enum__=aa;aa.LOADED=["LOADED",2];aa.LOADED.toString=g;aa.LOADED.__enum__=aa;aa.RUNNING=["RUNNING",3];aa.RUNNING.toString=g;aa.RUNNING.__enum__=aa;aa.PAUSED=["PAUSED",4];aa.PAUSED.toString=g;aa.PAUSED.__enum__=aa;var oj=function(){this._init()};j["tools.spark.framework.assets.FlambeLoader"]=oj;oj.__name__=!0;oj.prototype={_init:function(){this.successSignal=new Nc;this.errorSignal=new ma;this.progressSignal=new rd;
this._assetInUse=new E;this._assetToBatchLoad=new E;this._batchLoadToAssetPack=new Ca},startNewBatchLoad:function(){this._manifest=new nd},addFile:function(a,b,d){d?this._manifest.add(a,b,1,x.Data):this._manifest.add(a,b,1);b=this._manifest;this._assetToBatchLoad.set(a,b);b},getAssetPackOf:function(a){return this._batchLoadToAssetPack.h[this._assetToBatchLoad.get(a).__id__]},getFile:function(a){return this._batchLoadToAssetPack.h[this._assetToBatchLoad.get(a).__id__].getFile(a)},getTexture:function(a){return this._batchLoadToAssetPack.h[this._assetToBatchLoad.get(a).__id__].getTexture(a)},
getSound:function(a){return this._batchLoadToAssetPack.h[this._assetToBatchLoad.get(a).__id__].getSound(a)},initiateLoad:function(){this._promise=S._platform.loadAssetPack(this._manifest);this._promiseSignalSuccess=this._promise.success.connect(v(this,this._onPromiseSuccess));this._promiseSignalError=this._promise.error.connect(v(this,this._onPromiseError));this._promiseSignalProgress=this._promise.progressChanged.connect(v(this,this._onPromiseProgress))},_onPromiseSuccess:function(a){this._disposePromiseSignals();
this._batchLoadToAssetPack.set(this._manifest,a);a;this.successSignal.emit()},_onPromiseError:function(a){this._disposePromiseSignals();this.errorSignal.emit(a)},_onPromiseProgress:function(){this.progressSignal.emit(this._promise._progress,this._promise._total)},_disposePromiseSignals:function(){this._promiseSignalSuccess.dispose();this._promiseSignalError.dispose();this._promiseSignalProgress.dispose()},__class__:oj};var qj=function(a){this.id=a;this.requiresModules=[];this.assets=new E};j["tools.spark.framework.assets.Module"]=
qj;qj.__name__=!0;qj.prototype={__class__:qj};var nj=function(a){this._configFile=a;this._initNodeNamesMap();this._initNodeTypesMap();this._configValidator=new rj(this._xmlNodeTypeToNodeName);this._configInstantiator=new sj(this._xmlNodeTypeToNodeName)};j["tools.spark.framework.config.Config"]=nj;nj.__name__=!0;nj.prototype={parseClient:function(){return this._parse(n.CLIENT)},_parse:function(a){var b;w.logger.info("Config: Parsing...",null);try{b=q.parse(this._configFile.toString())}catch(d){return d instanceof
p&&(d=d.val),w.logger.error(r.string(d),null),!1}b=b.firstElement();var c;if(b.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+b.nodeType));c=this._xmlNodeNameToNodeType.get(b.nodeName);if(c!=a)return w.logger.error("Config file is not correct. Expected Root Child: "+r.string(a)+", got: "+r.string(c)+".",null),!1;w.logger.info("Config: Validating...",null);this._configValidator.init(a);if(!1==this._validateConfigNode(b))return w.logger.error("Config file could not be validated",
null),!1;w.logger.info("Config: Instantiating...",null);this._configInstantiator.init(b,a);this._configInstantiator.instantiateProject();this._configInstantiator.instantiateSliced();this._configInstantiator.instantiatePaths();this._configInstantiator.instantiateAssets();w.logger.info("Config: Completed!",null);return!0},_validateConfigNode:function(a){var b;if(a.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+a.nodeType));b=this._xmlNodeNameToNodeType.get(a.nodeName);
if(this._configValidator.validateConfigNode(a,b))return!0;for(a=a.elements();a.hasNext()&&!(!1==this._validateConfigNode(a.next())););return!1},_initNodeNamesMap:function(){this._xmlNodeTypeToNodeName=new pa;this._xmlNodeTypeToNodeName.set(n.CLIENT,"Client");"Client";this._xmlNodeTypeToNodeName.set(n.SERVER,"Server");"Server";this._xmlNodeTypeToNodeName.set(n.PROJECT,"Project");"Project";this._xmlNodeTypeToNodeName.set(n.SLICED,"Sliced");"Sliced";this._xmlNodeTypeToNodeName.set(n.PATHS,"Paths");"Paths";
this._xmlNodeTypeToNodeName.set(n.ASSETS,"Assets");"Assets";this._xmlNodeTypeToNodeName.set(n.PROJECT_NAME,"Name");"Name";this._xmlNodeTypeToNodeName.set(n.PROJECT_VERSION,"Version");"Version";this._xmlNodeTypeToNodeName.set(n.EXECUTE_AT_LAUNCH,"ExecuteAtLaunch");"ExecuteAtLaunch";this._xmlNodeTypeToNodeName.set(n.EXECUTE_MODULE,"ExecuteModule");"ExecuteModule";this._xmlNodeTypeToNodeName.set(n.SOUND_SERVICE,"Sound");"Sound";this._xmlNodeTypeToNodeName.set(n.LOGIC_SERVICE,"Logic");"Logic";this._xmlNodeTypeToNodeName.set(n.INPUT_SERVICE,
"Input");"Input";this._xmlNodeTypeToNodeName.set(n.COMMUNICATIONS_SERVICE,"Comms");"Comms";this._xmlNodeTypeToNodeName.set(n.EVENT_SERVICE,"Event");"Event";this._xmlNodeTypeToNodeName.set(n.DISPLAY_SERVICE,"Display");"Display";this._xmlNodeTypeToNodeName.set(n.PATH,"Path");"Path";this._xmlNodeTypeToNodeName.set(n.MODULE,"Module");"Module";this._xmlNodeTypeToNodeName.set(n.ASSET,"Asset");"Asset";this._xmlNodeTypeToNodeName.set(n.REQUIRES,"Requires");"Requires";this._xmlNodeTypeToNodeName.set(n.REQUIRES_MODULE,
"RequiresModule");"RequiresModule"},_initNodeTypesMap:function(){this._xmlNodeNameToNodeType=new E;var a=this._xmlNodeTypeToNodeName.get(n.CLIENT),b=n.CLIENT;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.SERVER);b=n.SERVER;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.PROJECT);b=n.PROJECT;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.SLICED);b=n.SLICED;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.PATHS);
b=n.PATHS;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.ASSETS);b=n.ASSETS;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.PROJECT_NAME);b=n.PROJECT_NAME;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.PROJECT_VERSION);b=n.PROJECT_VERSION;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.EXECUTE_AT_LAUNCH);b=n.EXECUTE_AT_LAUNCH;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.EXECUTE_MODULE);
b=n.EXECUTE_MODULE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.SOUND_SERVICE);b=n.SOUND_SERVICE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.LOGIC_SERVICE);b=n.LOGIC_SERVICE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.INPUT_SERVICE);b=n.INPUT_SERVICE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.COMMUNICATIONS_SERVICE);b=n.COMMUNICATIONS_SERVICE;this._xmlNodeNameToNodeType.set(a,
b);b;a=this._xmlNodeTypeToNodeName.get(n.EVENT_SERVICE);b=n.EVENT_SERVICE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.DISPLAY_SERVICE);b=n.DISPLAY_SERVICE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.PATH);b=n.PATH;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.MODULE);b=n.MODULE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.ASSET);b=n.ASSET;this._xmlNodeNameToNodeType.set(a,b);b;
a=this._xmlNodeTypeToNodeName.get(n.REQUIRES);b=n.REQUIRES;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(n.REQUIRES_MODULE);b=n.REQUIRES_MODULE;this._xmlNodeNameToNodeType.set(a,b);b},__class__:nj};var sj=function(a){this._xmlNodeTypeToNodeName=a};j["tools.spark.framework.config.ConfigInstantiator"]=sj;sj.__name__=!0;sj.prototype={init:function(a,b){this._configNode=a;this._rootNodeType=b},instantiateProject:function(){var a=this._configNode.elementsNamed(this._xmlNodeTypeToNodeName.get(n.PROJECT)).next();
M.$name=a.elementsNamed(this._xmlNodeTypeToNodeName.get(n.PROJECT_NAME)).next().firstChild().get_nodeValue();M.version=a.elementsNamed(this._xmlNodeTypeToNodeName.get(n.PROJECT_VERSION)).next().firstChild().get_nodeValue();M.type=this._rootNodeType;for(a=a.elementsNamed(this._xmlNodeTypeToNodeName.get(n.EXECUTE_AT_LAUNCH)).next().elements();a.hasNext();){var b=a.next();M.executeModules.push(function(){if(b.nodeType!=q.Document&&b.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+
b.nodeType);return b.children[0]}(this).get_nodeValue())}},instantiateSliced:function(){var a=this._configNode.elementsNamed(this._xmlNodeTypeToNodeName.get(n.SLICED)).next(),b=a.elementsNamed(this._xmlNodeTypeToNodeName.get(n.LOGIC_SERVICE)).next().firstChild().get_nodeValue();M.sliced.set(n.LOGIC_SERVICE,b);b;b=a.elementsNamed(this._xmlNodeTypeToNodeName.get(n.COMMUNICATIONS_SERVICE)).next().firstChild().get_nodeValue();M.sliced.set(n.COMMUNICATIONS_SERVICE,b);b;b=a.elementsNamed(this._xmlNodeTypeToNodeName.get(n.EVENT_SERVICE)).next().firstChild().get_nodeValue();
M.sliced.set(n.EVENT_SERVICE,b);b;M.type==n.CLIENT&&(b=a.elementsNamed(this._xmlNodeTypeToNodeName.get(n.SOUND_SERVICE)).next().firstChild().get_nodeValue(),M.sliced.set(n.SOUND_SERVICE,b),b,b=a.elementsNamed(this._xmlNodeTypeToNodeName.get(n.INPUT_SERVICE)).next().firstChild().get_nodeValue(),M.sliced.set(n.INPUT_SERVICE,b),b,a=a.elementsNamed(this._xmlNodeTypeToNodeName.get(n.DISPLAY_SERVICE)).next().firstChild().get_nodeValue(),M.sliced.set(n.DISPLAY_SERVICE,a),a)},instantiatePaths:function(){for(var a=
this._configNode.elementsNamed(this._xmlNodeTypeToNodeName.get(n.PATHS)).next().elements();a.hasNext();){var b=a.next();M.setPath(b.get("location"),b.get("type"),function(){if(b.nodeType!=q.Document&&b.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+b.nodeType);return b.children[0]}(this).get_nodeValue())}},instantiateAssets:function(){for(var a=this._configNode.elementsNamed(this._xmlNodeTypeToNodeName.get(n.ASSETS)).next().elements();a.hasNext();){var b=
a.next(),d=b.get("id"),b=this._instantiateModule(b);M.modules.set(d,b);b}},_instantiateModule:function(a){var b=new qj(a.get("id"));b.executeEntity=a.get("executeEntity");if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(n.REQUIRES)).hasNext())for(var d=a.elementsNamed(this._xmlNodeTypeToNodeName.get(n.REQUIRES)).next().elements();d.hasNext();){var c=d.next();b.requiresModules.push(function(){if(c.nodeType!=q.Document&&c.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+
c.nodeType);return c.children[0]}(this).get_nodeValue())}for(a=a.elementsNamed(this._xmlNodeTypeToNodeName.get(n.ASSET));a.hasNext();)d=this._instantiateAsset(a.next()),b.assets.set(d.id,d),d;return b},_instantiateAsset:function(a){var b;if("useUrl"==a.get("id")){if(a.nodeType!=q.Document&&a.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+a.nodeType);b=a.children[0].get_nodeValue()}else b=a.get("id");b=new pj(b);if(a.nodeType!=q.Document&&a.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+
a.nodeType);b.url=a.children[0].get_nodeValue();b.type=a.get("type");b.subtype=a.get("subtype");b.location=a.get("location");b.bytes=a.get("bytes");b.condition=a.get("condition");b.forceLoadAsData=a.get("forceLoadAsData");return b},__class__:sj};var rj=function(a){this._xmlNodeTypeToNodeName=a};j["tools.spark.framework.config.ConfigValidator"]=rj;rj.__name__=!0;rj.prototype={init:function(a){this._initNodeRulesMap(a)},_initNodeRulesMap:function(a){this._xmlNodeTypeToNodeRule=new pa;var b=this._createRequiresModuleNodeRule();
this._xmlNodeTypeToNodeRule.set(n.REQUIRES_MODULE,b);b;b=this._createRequiresNodeRule();this._xmlNodeTypeToNodeRule.set(n.REQUIRES,b);b;b=this._createAssetNodeRule();this._xmlNodeTypeToNodeRule.set(n.ASSET,b);b;b=this._createModuleNodeRule();this._xmlNodeTypeToNodeRule.set(n.MODULE,b);b;b=this._createAssetsNodeRule();this._xmlNodeTypeToNodeRule.set(n.ASSETS,b);b;b=this._createPathNodeRule();this._xmlNodeTypeToNodeRule.set(n.PATH,b);b;b=this._createPathsNodeRule();this._xmlNodeTypeToNodeRule.set(n.PATHS,
b);b;b=this._createSoundServiceNodeRule();this._xmlNodeTypeToNodeRule.set(n.SOUND_SERVICE,b);b;b=this._createLogicServiceNodeRule();this._xmlNodeTypeToNodeRule.set(n.LOGIC_SERVICE,b);b;b=this._createInputServiceNodeRule();this._xmlNodeTypeToNodeRule.set(n.INPUT_SERVICE,b);b;b=this._createCommsServiceNodeRule();this._xmlNodeTypeToNodeRule.set(n.COMMUNICATIONS_SERVICE,b);b;b=this._createEventServiceNodeRule();this._xmlNodeTypeToNodeRule.set(n.EVENT_SERVICE,b);b;b=this._createDisplayServiceNodeRule();
this._xmlNodeTypeToNodeRule.set(n.DISPLAY_SERVICE,b);b;b=this._createExecuteModuleNodeRule();this._xmlNodeTypeToNodeRule.set(n.EXECUTE_MODULE,b);b;b=this._createExecuteAtLaunchNodeRule();this._xmlNodeTypeToNodeRule.set(n.EXECUTE_AT_LAUNCH,b);b;b=this._createProjectNameNodeRule();this._xmlNodeTypeToNodeRule.set(n.PROJECT_NAME,b);b;b=this._createProjectVersionNodeRule();this._xmlNodeTypeToNodeRule.set(n.PROJECT_VERSION,b);b;b=this._createProjectNodeRule();this._xmlNodeTypeToNodeRule.set(n.PROJECT,b);
b;a==n.CLIENT?(a=this._createSlicedClientNodeRule(),this._xmlNodeTypeToNodeRule.set(n.SLICED,a),a,a=this._createClientNodeRule(),this._xmlNodeTypeToNodeRule.set(n.CLIENT,a),a):a==n.SERVER&&(a=this._createSlicedServerNodeRule(),this._xmlNodeTypeToNodeRule.set(n.SLICED,a),a,a=this._createServerNodeRule(),this._xmlNodeTypeToNodeRule.set(n.SERVER,a),a)},validateConfigNode:function(a,b){if(null==this._xmlNodeTypeToNodeRule.get(b))return w.logger.error("This Config Node Rule has not been created Yet!",
null),!1;try{return N.checkNode(a,this._xmlNodeTypeToNodeRule.get(b)),!0}catch(d){d instanceof p&&(d=d.val);if(A.__instanceof(d,String))return w.logger.error(d,null),!1;throw d;}},_createClientNodeRule:function(){var a=F.RList([this._xmlNodeTypeToNodeRule.get(n.PROJECT),this._xmlNodeTypeToNodeRule.get(n.SLICED),this._xmlNodeTypeToNodeRule.get(n.PATHS),this._xmlNodeTypeToNodeRule.get(n.ASSETS)],!1);return F.RNode(this._xmlNodeTypeToNodeName.get(n.CLIENT),[],a)},_createServerNodeRule:function(){var a=
F.RList([this._xmlNodeTypeToNodeRule.get(n.PROJECT),this._xmlNodeTypeToNodeRule.get(n.SLICED),this._xmlNodeTypeToNodeRule.get(n.PATHS),this._xmlNodeTypeToNodeRule.get(n.ASSETS)],!1);return F.RNode(this._xmlNodeTypeToNodeName.get(n.SERVER),[],a)},_createProjectNodeRule:function(){var a=F.RList([this._xmlNodeTypeToNodeRule.get(n.PROJECT_NAME),this._xmlNodeTypeToNodeRule.get(n.PROJECT_VERSION),this._xmlNodeTypeToNodeRule.get(n.EXECUTE_AT_LAUNCH)],!1);return F.RNode(this._xmlNodeTypeToNodeName.get(n.PROJECT),
[],a)},_createProjectNameNodeRule:function(){var a=F.RData();return F.RNode(this._xmlNodeTypeToNodeName.get(n.PROJECT_NAME),[],a)},_createProjectVersionNodeRule:function(){var a=F.RData();return F.RNode(this._xmlNodeTypeToNodeName.get(n.PROJECT_VERSION),[],a)},_createExecuteAtLaunchNodeRule:function(){var a=F.RMulti(this._xmlNodeTypeToNodeRule.get(n.EXECUTE_MODULE),!0);return F.RNode(this._xmlNodeTypeToNodeName.get(n.EXECUTE_AT_LAUNCH),[],a)},_createExecuteModuleNodeRule:function(){var a=F.RData();
return F.RNode(this._xmlNodeTypeToNodeName.get(n.EXECUTE_MODULE),[],a)},_createSlicedClientNodeRule:function(){var a=F.RList([this._xmlNodeTypeToNodeRule.get(n.SOUND_SERVICE),this._xmlNodeTypeToNodeRule.get(n.LOGIC_SERVICE),this._xmlNodeTypeToNodeRule.get(n.INPUT_SERVICE),this._xmlNodeTypeToNodeRule.get(n.COMMUNICATIONS_SERVICE),this._xmlNodeTypeToNodeRule.get(n.EVENT_SERVICE),this._xmlNodeTypeToNodeRule.get(n.DISPLAY_SERVICE)],!1);return F.RNode(this._xmlNodeTypeToNodeName.get(n.SLICED),[],a)},_createSlicedServerNodeRule:function(){var a=
F.RList([this._xmlNodeTypeToNodeRule.get(n.LOGIC_SERVICE),this._xmlNodeTypeToNodeRule.get(n.COMMUNICATIONS_SERVICE),this._xmlNodeTypeToNodeRule.get(n.EVENT_SERVICE)],!1);return F.RNode(this._xmlNodeTypeToNodeName.get(n.SLICED),[],a)},_createSoundServiceNodeRule:function(){var a=F.RData();return F.RNode(this._xmlNodeTypeToNodeName.get(n.SOUND_SERVICE),[],a)},_createLogicServiceNodeRule:function(){var a=F.RData();return F.RNode(this._xmlNodeTypeToNodeName.get(n.LOGIC_SERVICE),[],a)},_createInputServiceNodeRule:function(){var a=
F.RData();return F.RNode(this._xmlNodeTypeToNodeName.get(n.INPUT_SERVICE),[],a)},_createCommsServiceNodeRule:function(){var a=F.RData();return F.RNode(this._xmlNodeTypeToNodeName.get(n.COMMUNICATIONS_SERVICE),[],a)},_createEventServiceNodeRule:function(){var a=F.RData();return F.RNode(this._xmlNodeTypeToNodeName.get(n.EVENT_SERVICE),[],a)},_createDisplayServiceNodeRule:function(){var a=F.RData();return F.RNode(this._xmlNodeTypeToNodeName.get(n.DISPLAY_SERVICE),[],a)},_createPathsNodeRule:function(){var a=
F.RMulti(this._xmlNodeTypeToNodeRule.get(n.PATH),!0);return F.RNode(this._xmlNodeTypeToNodeName.get(n.PATHS),[],a)},_createPathNodeRule:function(){var a=F.RData(),b=[Qb.Att("location"),Qb.Att("type")];return F.RNode(this._xmlNodeTypeToNodeName.get(n.PATH),b,a)},_createAssetsNodeRule:function(){var a=F.RMulti(this._xmlNodeTypeToNodeRule.get(n.MODULE),!0);return F.RNode(this._xmlNodeTypeToNodeName.get(n.ASSETS),[],a)},_createModuleNodeRule:function(){var a=F.RList([F.ROptional(this._xmlNodeTypeToNodeRule.get(n.REQUIRES)),
F.RMulti(this._xmlNodeTypeToNodeRule.get(n.ASSET),!0)],!1),b=[Qb.Att("id"),Qb.Att("executeEntity",null,"none")];return F.RNode(this._xmlNodeTypeToNodeName.get(n.MODULE),b,a)},_createAssetNodeRule:function(){var a=F.RData(),b=[Qb.Att("location"),Qb.Att("type"),Qb.Att("bytes"),Qb.Att("subtype",null,"none"),Qb.Att("id",null,"useUrl"),Qb.Att("condition",null,"always"),Qb.Att("forceLoadAsData",null,"false")];return F.RNode(this._xmlNodeTypeToNodeName.get(n.ASSET),b,a)},_createRequiresNodeRule:function(){var a=
F.RMulti(this._xmlNodeTypeToNodeRule.get(n.REQUIRES_MODULE),!0);return F.RNode(this._xmlNodeTypeToNodeName.get(n.REQUIRES),[],a)},_createRequiresModuleNodeRule:function(){var a=F.RData();return F.RNode(this._xmlNodeTypeToNodeName.get(n.REQUIRES_MODULE),[],a)},__class__:rj};var n=j["tools.spark.framework.config.ENodeType"]={__ename__:!0,__constructs__:"CLIENT,SERVER,PROJECT,SLICED,PATHS,ASSETS,PROJECT_NAME,PROJECT_VERSION,EXECUTE_AT_LAUNCH,EXECUTE_MODULE,SOUND_SERVICE,LOGIC_SERVICE,INPUT_SERVICE,COMMUNICATIONS_SERVICE,EVENT_SERVICE,DISPLAY_SERVICE,PATH,MODULE,ASSET,REQUIRES,REQUIRES_MODULE".split(",")};
n.CLIENT=["CLIENT",0];n.CLIENT.toString=g;n.CLIENT.__enum__=n;n.SERVER=["SERVER",1];n.SERVER.toString=g;n.SERVER.__enum__=n;n.PROJECT=["PROJECT",2];n.PROJECT.toString=g;n.PROJECT.__enum__=n;n.SLICED=["SLICED",3];n.SLICED.toString=g;n.SLICED.__enum__=n;n.PATHS=["PATHS",4];n.PATHS.toString=g;n.PATHS.__enum__=n;n.ASSETS=["ASSETS",5];n.ASSETS.toString=g;n.ASSETS.__enum__=n;n.PROJECT_NAME=["PROJECT_NAME",6];n.PROJECT_NAME.toString=g;n.PROJECT_NAME.__enum__=n;n.PROJECT_VERSION=["PROJECT_VERSION",7];n.PROJECT_VERSION.toString=
g;n.PROJECT_VERSION.__enum__=n;n.EXECUTE_AT_LAUNCH=["EXECUTE_AT_LAUNCH",8];n.EXECUTE_AT_LAUNCH.toString=g;n.EXECUTE_AT_LAUNCH.__enum__=n;n.EXECUTE_MODULE=["EXECUTE_MODULE",9];n.EXECUTE_MODULE.toString=g;n.EXECUTE_MODULE.__enum__=n;n.SOUND_SERVICE=["SOUND_SERVICE",10];n.SOUND_SERVICE.toString=g;n.SOUND_SERVICE.__enum__=n;n.LOGIC_SERVICE=["LOGIC_SERVICE",11];n.LOGIC_SERVICE.toString=g;n.LOGIC_SERVICE.__enum__=n;n.INPUT_SERVICE=["INPUT_SERVICE",12];n.INPUT_SERVICE.toString=g;n.INPUT_SERVICE.__enum__=
n;n.COMMUNICATIONS_SERVICE=["COMMUNICATIONS_SERVICE",13];n.COMMUNICATIONS_SERVICE.toString=g;n.COMMUNICATIONS_SERVICE.__enum__=n;n.EVENT_SERVICE=["EVENT_SERVICE",14];n.EVENT_SERVICE.toString=g;n.EVENT_SERVICE.__enum__=n;n.DISPLAY_SERVICE=["DISPLAY_SERVICE",15];n.DISPLAY_SERVICE.toString=g;n.DISPLAY_SERVICE.__enum__=n;n.PATH=["PATH",16];n.PATH.toString=g;n.PATH.__enum__=n;n.MODULE=["MODULE",17];n.MODULE.toString=g;n.MODULE.__enum__=n;n.ASSET=["ASSET",18];n.ASSET.toString=g;n.ASSET.__enum__=n;n.REQUIRES=
["REQUIRES",19];n.REQUIRES.toString=g;n.REQUIRES.__enum__=n;n.REQUIRES_MODULE=["REQUIRES_MODULE",20];n.REQUIRES_MODULE.toString=g;n.REQUIRES_MODULE.__enum__=n;var Xf=function(){};j["tools.spark.framework.space2_5D.interfaces.IBase2_5D"]=Xf;Xf.__name__=!0;Xf.prototype={__class__:Xf};var ne=function(a){this.gameEntity=a};j["tools.spark.framework.space2_5D.core.ABase2_5D"]=ne;ne.__name__=!0;ne.__interfaces__=[Xf];ne.prototype={setPosSize:function(){},__class__:ne};var kh=function(){};j["tools.spark.framework.space2_5D.interfaces.IObject2_5D"]=
kh;kh.__name__=!0;kh.__interfaces__=[Xf];var zc=function(a){this.gameEntity=a};j["tools.spark.framework.space2_5D.core.AObject2_5D"]=zc;zc.__name__=!0;zc.__interfaces__=[kh];zc.__super__=ne;zc.prototype=z(ne.prototype,{__class__:zc});var Yf=function(){};j["tools.spark.framework.space2_5D.interfaces.ICamera2_5D"]=Yf;Yf.__name__=!0;Yf.__interfaces__=[kh];Yf.prototype={__class__:Yf};var gc=function(a){this.gameEntity=a;this._initACamera2_5D()};j["tools.spark.framework.space2_5D.core.ACamera2_5D"]=gc;
gc.__name__=!0;gc.__interfaces__=[Yf];gc.__super__=zc;gc.prototype=z(zc.prototype,{_initACamera2_5D:function(){this._attachedToViews=new Ca},attachToView:function(a){this._attachedToViews.set(a,a);a;return null},__class__:gc});var Re=function(a){gc.call(this,a)};j["tools.spark.framework.dom2_5D.DomCamera2_5D"]=Re;Re.__name__=!0;Re.__super__=gc;Re.prototype=z(gc.prototype,{__class__:Re});var tj=function(){};j["tools.spark.framework.space2_5D.interfaces.IObjectContainer2_5D"]=tj;tj.__name__=!0;tj.__interfaces__=
[kh];var hc=function(a){this.gameEntity=a;this.children=[]};j["tools.spark.framework.space2_5D.core.AObjectContainer2_5D"]=hc;hc.__name__=!0;hc.__interfaces__=[tj];hc.__super__=zc;hc.prototype=z(zc.prototype,{addChild:function(a){this.children.push(a)},removeChild:function(a){C.remove(this.children,a)},__class__:hc});var Se=function(){};j["tools.spark.framework.space2_5D.interfaces.IInstantiable2_5D"]=Se;Se.__name__=!0;Se.__interfaces__=[tj];Se.prototype={__class__:Se};var Tb=function(a){hc.call(this,
a);this._instances=new Ca;this._updateStateFunctions=new E;this.groupInstances=new Ca};j["tools.spark.framework.space2_5D.core.AInstantiable2_5D"]=Tb;Tb.__name__=!0;Tb.__interfaces__=[Se];Tb.__super__=hc;Tb.prototype=z(hc.prototype,{getInstance:function(a){return this._instances.h[a.__id__]},_updateState:function(a,b){if(null==b)for(var d=this._instances.keys();d.hasNext();){var c=d.next();null!=this._updateStateFunctions.get(a)?this._updateStateFunctions.get(a)(this.gameEntity.getState(a),c):w.logger.warn("State "+
a+" does not have a function handler! Ignoring :(",null)}else null!=this._updateStateFunctions.get(a)?this._updateStateFunctions.get(a)(this.gameEntity.getState(a),b):w.logger.warn("State "+a+" does not have a function handler! Ignoring :(",null)},_updateLayoutGroup:function(a){if(null==a)for(a=this.groupInstances.keys();a.hasNext();)this.groupInstances.h[a.next().__id__].update();else this.groupInstances.h[a.__id__].update()},_createChildrenOfInstance:function(a){for(var b=0,d=this.children;b<d.length;){var c=
d[b];++b;this._createChildOfInstance(c,a)}},createInstance:function(a){this._createChildrenOfInstance(a);return this._instances.h[a.__id__]},_createChildOfInstance:function(){},_removeChildOfInstance:function(){},update:function(){},addChild:function(a){hc.prototype.addChild.call(this,a);for(var b=this._instances.keys();b.hasNext();){var d=b.next();this._createChildOfInstance(a,d);a.update(d)}},removeChild:function(a){hc.prototype.removeChild.call(this,a);for(var b=this._instances.keys();b.hasNext();){var d=
b.next();this._removeChildOfInstance(a,d)}},__class__:Tb});var lh=function(){};j["tools.spark.framework.space2_5D.interfaces.IEntity2_5D"]=lh;lh.__name__=!0;lh.__interfaces__=[Se];lh.prototype={__class__:lh};var lb=function(a){Tb.call(this,a)};j["tools.spark.framework.space2_5D.core.AEntity2_5D"]=lb;lb.__name__=!0;lb.__interfaces__=[lh];lb.__super__=Tb;lb.prototype=z(Tb.prototype,{createInstance:function(a){if(!0==this.gameEntity.getState("layoutable")){var b=new ce(this.gameEntity,"Entity",this);
this.groupInstances.set(a,b);b}return Tb.prototype.createInstance.call(this,a)},_createChildOfInstance:function(a,b){!0==a.gameEntity.getState("layoutable")&&this.groupInstances.h[b.__id__].children.push(a.groupInstances.h[b.__id__])},_removeChildOfInstance:function(a,b){!0==a.gameEntity.getState("layoutable")&&C.remove(this.groupInstances.h[b.__id__].children,a.groupInstances.h[b.__id__])},__class__:lb});var Md=function(a){Tb.call(this,a);this._initDomEntity2_5D()};j["tools.spark.framework.dom2_5D.DomEntity2_5D"]=
Md;Md.__name__=!0;Md.__super__=lb;Md.prototype=z(lb.prototype,{_initDomEntity2_5D:function(){var a=v(this,this._updateNCmeshType);this._updateStateFunctions.set("NCmeshType",a);a;a=v(this,this._updateTouchable);this._updateStateFunctions.set("touchable",a);a;a=v(this,this._updateAcceptsKeyboardInput);this._updateStateFunctions.set("acceptsKeyboardInput",a);a;a=v(this,this._updateDraggable);this._updateStateFunctions.set("draggable",a);a;a=v(this,this._updateDropTarget);this._updateStateFunctions.set("dropTarget",
a);a;a=v(this,this._updateNCstyleable);this._updateStateFunctions.set("NCstyleable",a);a;a=v(this,this._updateVisibility);this._updateStateFunctions.set("visibility",a);a;a=v(this,this._updateOpacity);this._updateStateFunctions.set("opacity",a);a;a=v(this,this._updateDisplay);this._updateStateFunctions.set("display",a);a;a=v(this,this._updateText);this._updateStateFunctions.set("text",a);a;a=v(this,this._updateFontColor);this._updateStateFunctions.set("fontColor",a);a;a=v(this,this._updateImageSrc);
this._updateStateFunctions.set("src",a);a;a=v(this,this._updateFontSize);this._updateStateFunctions.set("fontSize",a);a;a=v(this,this._updateFontWeight);this._updateStateFunctions.set("fontWeight",a);a;a=v(this,this._updateOverflow);this._updateStateFunctions.set("overflow",a);a;a=v(this,this._updateWidth);this._updateStateFunctions.set("width",a);a;a=v(this,this._updateHeight);this._updateStateFunctions.set("height",a);a;a=v(this,this._updateBackgroundColor);this._updateStateFunctions.set("backgroundColor",
a);a;a=v(this,this._updateBorder);this._updateStateFunctions.set("border",a);a},createInstance:function(a){switch(this.gameEntity.getState("NCmeshType")){case "Div":var b;b=window.document.createElement("div");this._instances.set(a,b);b;break;case "Input":b=window.document.createElement("input");this._instances.set(a,b);b;this._instances.h[a.__id__].onchange=v(this,this._onChange);this._instances.h[a.__id__].style.outline="0";break;case "Button":b=window.document.createElement("div");this._instances.set(a,
b);b;this._instances.h[a.__id__].style.outline="0";break;case "Image":b=window.document.createElement("img");this._instances.set(a,b);b;break;case "Ace":b=window.document.createElement("div");this._instances.set(a,b);b;break;case "Tree":b=window.document.createElement("div");this._instances.set(a,b);b;break;default:w.logger.error("Unrecognised NCMeshType input. Creating a Div By Default.",null),b=window.document.createElement("div"),this._instances.set(a,b),b}this._instances.h[a.__id__].style.position=
"absolute";return lb.prototype.createInstance.call(this,a)},_createChildOfInstance:function(a,b){this._instances.h[b.__id__].appendChild(A.__cast(a.createInstance(b),HTMLElement));lb.prototype._createChildOfInstance.call(this,a,b)},_removeChildOfInstance:function(a,b){this._instances.h[b.__id__].removeChild(A.__cast(a.getInstance(b),HTMLElement));lb.prototype._removeChildOfInstance.call(this,a,b)},update:function(a){this._updateState("NCmeshType",a);!0==this.gameEntity.getState("NCstyleable")&&(this._updateState("NCstyleable",
a),this._updateState("visibility",a),this._updateState("opacity",a),this._updateState("display",a),this._updateState("fontSize",a),this._updateState("fontWeight",a),this._updateState("fontColor",a),this._updateState("overflow",a),this._updateState("backgroundColor",a),this._updateState("border",a));this._updateState("touchable",a);this._updateState("acceptsKeyboardInput",a);this._updateState("draggable",a);this._updateState("dropTarget",a);null!=this.gameEntity.getState("text")&&this._updateState("text",
a);!0==this.gameEntity.getState("layoutable")&&this._updateLayoutGroup(a);for(var b=0,d=this.children;b<d.length;){var c=d[b];++b;c.update(a)}},setPosSize:function(a,b,d,c,f){f=this._instances.h[f.__id__];null!=f&&(null!=a&&(f.style.left=(null==a?"null":""+a)+"px"),null!=b&&(f.style.top=(null==b?"null":""+b)+"px"),null!=d&&(f.style.width=(null==d?"null":""+d)+"px"),null!=c&&(f.style.height=(null==c?"null":""+c)+"px"))},_updateNCstyleable:function(a,b){null!=this.gameEntity.getState("borderRadius")&&
"Undefined"!=this.gameEntity.getState("borderRadius")&&(this._instances.h[b.__id__].style.borderRadius=this.gameEntity.getState("borderRadius"));null!=this.gameEntity.getState("boxShadow")&&"Undefined"!=this.gameEntity.getState("boxShadow")&&(this._instances.h[b.__id__].style.boxShadow=this.gameEntity.getState("boxShadow"));null!=this.gameEntity.getState("fontFamily")&&"Undefined"!=this.gameEntity.getState("fontFamily")&&(this._instances.h[b.__id__].style.fontFamily=this.gameEntity.getState("fontFamily"));
null!=this.gameEntity.getState("textAlign")&&"Undefined"!=this.gameEntity.getState("textAlign")&&(this._instances.h[b.__id__].style.textAlign=this.gameEntity.getState("textAlign"));null!=this.gameEntity.getState("textVerticalAlign")&&"Undefined"!=this.gameEntity.getState("textVerticalAlign")&&"middle"==this.gameEntity.getState("textVerticalAlign")&&(this._instances.h[b.__id__].style.lineHeight=r.string(this.gameEntity.getState("height"))+"px");null!=this.gameEntity.getState("textIndent")&&"Undefined"!=
this.gameEntity.getState("textIndent")&&(this._instances.h[b.__id__].style.textIndent=this.gameEntity.getState("textIndent"));null!=this.gameEntity.getState("cursor")&&"Undefined"!=this.gameEntity.getState("cursor")&&(this._instances.h[b.__id__].style.cursor=this.gameEntity.getState("cursor"));null!=this.gameEntity.getState("white-space")&&"Undefined"!=this.gameEntity.getState("white-space")&&(this._instances.h[b.__id__].style.whiteSpace=this.gameEntity.getState("white-space"));null!=this.gameEntity.getState("selectable")&&
!1==this.gameEntity.getState("selectable")&&(this._instances.h[b.__id__].style.setProperty("-webkit-user-select","none"),this._instances.h[b.__id__].style.setProperty("-moz-user-select","none"),this._instances.h[b.__id__].style.setProperty("-ms-user-select","none"),this._instances.h[b.__id__].style.setProperty("user-select","none"))},_updateImageSrc:function(a,b){var d=this._instances.h[b.__id__];if("Undefined"!=a)if(-1==a.indexOf("assets/")){var c;c=M.modules.get("DoNotLoad").assets.get(a);d.src=
M.getPath(c.location,c.type)+c.url}else d.src="../"+a},_updateWidth:function(a,b){!0==this.gameEntity.getState("layoutable")&&(this.groupInstances.h[b.__id__].updateState("width"),B.display.projectActiveSpaceReference.activeStageReference.layoutManager.validated=!1)},_updateHeight:function(a,b){!0==this.gameEntity.getState("layoutable")&&(this.groupInstances.h[b.__id__].updateState("height"),B.display.projectActiveSpaceReference.activeStageReference.layoutManager.validated=!1)},_updateOverflow:function(a,
b){"Undefined"!=a&&(this._instances.h[b.__id__].style.overflow=a)},_updateFontSize:function(a,b){"Undefined"!=a&&(this._instances.h[b.__id__].style.fontSize=a)},_updateFontWeight:function(a,b){"Undefined"!=a&&(this._instances.h[b.__id__].style.fontWeight=a)},_updateFontColor:function(a,b){"Undefined"!=a&&(this._instances.h[b.__id__].style.color=a)},_updateVisibility:function(a,b){this._instances.h[b.__id__].style.visibility=a},_updateOpacity:function(a,b){this._instances.h[b.__id__].style.opacity=
a},_updateBackgroundColor:function(a,b){"Undefined"!=a&&(this._instances.h[b.__id__].style.backgroundColor=a)},_updateBorder:function(a,b){"Undefined"!=a&&(this._instances.h[b.__id__].style.border=a)},_updateDisplay:function(a,b){this._instances.h[b.__id__].style.display=a},_updateText:function(a,b){if("Undefined"!=a)switch(this.gameEntity.getState("NCmeshType")){case "Div":this._instances.h[b.__id__].innerHTML=a;break;case "Input":this._instances.h[b.__id__].value=a;break;case "Button":this._instances.h[b.__id__].innerHTML=
a}},_updateNCmeshType:function(a,b){switch(a){case "Div":break;case "Button":this._updateButtonProperties(b);break;case "Input":this._updateInputProperties(b);break;case "Image":this._updateImageSrc(this.gameEntity.getState("src"),b);break;case "Ace":this._updateAceProperties(b);break;case "Tree":this._updateTreeProperties(b);break;case "Undefined":w.logger.warn("Undefined NCmeshType value",null);break;default:w.logger.warn("Unhandled NCmeshType value: "+a,null)}},_updateInputProperties:function(a){a=
this._instances.h[a.__id__];null!=this.gameEntity.getState("text")&&"Undefined"!=this.gameEntity.getState("text")&&(a.value=this.gameEntity.getState("text"));null!=this.gameEntity.getState("placeholder")&&"Undefined"!=this.gameEntity.getState("placeholder")&&(a.placeholder=this.gameEntity.getState("placeholder"));null!=this.gameEntity.getState("type")&&"Undefined"!=this.gameEntity.getState("type")&&(a.type=this.gameEntity.getState("type"));"file"==this.gameEntity.getState("type")&&null!=this.gameEntity.getState("accept")&&
"Undefined"!=this.gameEntity.getState("accept")&&(a.accept=this.gameEntity.getState("accept"))},_updateButtonProperties:function(a){a=this._instances.h[a.__id__];null!=this.gameEntity.getState("text")&&"Undefined"!=this.gameEntity.getState("text")&&(a.innerHTML=this.gameEntity.getState("text"))},_updateAceProperties:function(a){this._instances.h[a.__id__].id="editor";a=ace.edit("editor");a.setTheme("ace/theme/merbivore_soft");a.getSession().setMode("ace/mode/xml");this.gameEntity.setState("aceObject",
a)},_updateTreeProperties:function(a){a=this._instances.h[a.__id__];a.id="tree";var b=$("#tree");a.style.overflowX="hidden";a.style.overflowY="scroll";this.gameEntity.setState("treeObject",b)},_updateTouchable:function(a,b){var d=this._instances.h[b.__id__];null!=d&&a&&(d.onclick=v(this,this._onPointerClick),d.onmousedown=v(this,this._onMouseDown),d.onmouseup=v(this,this._onMouseUp))},_updateAcceptsKeyboardInput:function(a,b){var d=this._instances.h[b.__id__];null!=d&&a&&(d.onkeypress=v(this,this._onKeyPress),
d.onkeyup=v(this,this._onKeyRelease),d.onkeydown=v(this,this._onKeyDown))},_updateDraggable:function(a,b){var d=this._instances.h[b.__id__];null!=d&&a&&(d.ondragstart=v(this,this._onDragStart),d.ondrag=v(this,this._onDrag),d.ondragend=v(this,this._onDragEnd))},_onDragStart:function(a){this.gameEntity.setState("eventObject",a);B.event.raiseEvent(k.ON_DRAG_START,this.gameEntity)},_onDrag:function(a){this.gameEntity.setState("eventObject",a);B.event.raiseEvent(k.ON_DRAG,this.gameEntity)},_onDragEnd:function(a){this.gameEntity.setState("eventObject",
a);B.event.raiseEvent(k.ON_DRAG_END,this.gameEntity)},_updateDropTarget:function(a,b){var d=this._instances.h[b.__id__];null!=d&&a&&(d.ondragenter=v(this,this._onDragEnter),d.ondragover=v(this,this._onDragOver),d.ondragleave=v(this,this._onDragLeave),d.ondrop=v(this,this._onDrop))},_onDragEnter:function(a){this.gameEntity.setState("eventObject",a);B.event.raiseEvent(k.ON_DRAG_ENTER,this.gameEntity)},_onDragOver:function(a){this.gameEntity.setState("eventObject",a);a.preventDefault();B.event.raiseEvent(k.ON_DRAG_OVER,
this.gameEntity)},_onDragLeave:function(a){this.gameEntity.setState("eventObject",a);B.event.raiseEvent(k.ON_DRAG_LEAVE,this.gameEntity)},_onDrop:function(a){this.gameEntity.setState("eventObject",a);a.preventDefault();B.event.raiseEvent(k.ON_DROP,this.gameEntity)},_onKeyPress:function(a){this.gameEntity.setState("eventObjectKeyPress",a);B.event.raiseEvent(k.KEY_PRESSED_LOCAL,this.gameEntity)},_onKeyRelease:function(a){this.gameEntity.setState("eventObjectKeyRelease",a);B.event.raiseEvent(k.KEY_RELEASED_LOCAL,
this.gameEntity)},_onKeyDown:function(a){this.gameEntity.setState("eventObjectKeyDown",a);B.event.raiseEvent(k.KEY_DOWN_LOCAL,this.gameEntity)},_onPointerClick:function(a){this.gameEntity.setState("eventObject",a);B.input.pointer.submitPointerEvent(k.MOUSE_LEFT_CLICK,this.gameEntity)},_onMouseDown:function(a){this.gameEntity.setState("eventObject",a);B.input.pointer.submitPointerEvent(k.MOUSE_DOWN,this.gameEntity)},_onMouseUp:function(a){this.gameEntity.setState("eventObject",a);B.input.pointer.submitPointerEvent(k.MOUSE_UP,
this.gameEntity)},_onChange:function(a){"file"==this.gameEntity.getState("type")?(this.gameEntity.setState("files",a.target.files),B.input.pointer.submitPointerEvent(k.MOUSE_LEFT_CLICK,this.gameEntity)):(this.gameEntity.setState("text",a.target.value),B.event.raiseEvent(k.CHANGED,this.gameEntity))},__class__:Md});var Zf=function(){};j["tools.spark.framework.space2_5D.interfaces.IScene2_5D"]=Zf;Zf.__name__=!0;Zf.__interfaces__=[Se];Zf.prototype={__class__:Zf};var Ra=function(a){this._tempY=this._tempX=
0;this._scaleY=this._scaleX=1;Tb.call(this,a)};j["tools.spark.framework.space2_5D.core.AScene2_5D"]=Ra;Ra.__name__=!0;Ra.__interfaces__=[Zf];Ra.__super__=Tb;Ra.prototype=z(Tb.prototype,{createInstance:function(a){return Tb.prototype.createInstance.call(this,a)},_createChildOfInstance:function(a,b){!0==a.gameEntity.getState("layoutable")&&b.group.children.push(a.groupInstances.h[b.__id__]);a.parentScene=this},_removeChildOfInstance:function(a,b){!0==a.gameEntity.getState("layoutable")&&C.remove(b.group.children,
a.groupInstances.h[b.__id__])},updateCamera:function(a,b){var d=b.gameEntity.getState("captureAreaX"),c=b.gameEntity.getState("captureAreaY"),f=b.gameEntity.getState("captureAreaWidth");b.gameEntity.getState("captureAreaHeight");this._scaleX=this._scaleY=f=a.gameEntity.getState("feedbackWidth")/f;this._tempX=-d*f;this._tempY=-c*f},__class__:Ra});var Ac=function(a){Ra.call(this,a);this._initDomScene2_5D()};j["tools.spark.framework.dom2_5D.DomScene2_5D"]=Ac;Ac.__name__=!0;Ac.__super__=Ra;Ac.prototype=
z(Ra.prototype,{_initDomScene2_5D:function(){},createInstance:function(a){var b;b=window.document.createElement("div");this._instances.set(a,b);b;this._instances.h[a.__id__].style.position="absolute";return Ra.prototype.createInstance.call(this,a)},update:function(a){for(var b=0,d=this.children;b<d.length;){var c=d[b];++b;c.update(a)}},_createChildOfInstance:function(a,b){this._instances.h[b.__id__].appendChild(A.__cast(a.createInstance(b),HTMLElement));Ra.prototype._createChildOfInstance.call(this,
a,b)},__class__:Ac});var mh=function(){};j["tools.spark.framework.space2_5D.interfaces.IView2_5D"]=mh;mh.__name__=!0;mh.__interfaces__=[Xf];mh.prototype={__class__:mh};var Vc=function(a){this.gameEntity=a;this.group=B.display.projectActiveSpaceReference.activeStageReference.layoutManager.getViewGroupByGameEntity(this.gameEntity);this.group.layoutableInstance=this};j["tools.spark.framework.space2_5D.core.AView2_5D"]=Vc;Vc.__name__=!0;Vc.__interfaces__=[mh];Vc.__super__=ne;Vc.prototype=z(ne.prototype,
{render:function(){},updateCamera:function(){this.scene.updateCamera(this,this.camera)},__class__:Vc});var Te=function(a){Vc.call(this,a);this._initDomView2_5D()};j["tools.spark.framework.dom2_5D.DomView2_5D"]=Te;Te.__name__=!0;Te.__super__=Vc;Te.prototype=z(Vc.prototype,{updateState:function(a){switch(a){case "visible":this._instanceView.style.display=!0==this.gameEntity.getState(a)?"inline":"none";break;case "width":this._updateWidth(this.gameEntity.getState(a));break;case "height":this._updateHeight(this.gameEntity.getState(a))}},
_updateWidth:function(){!0==this.gameEntity.getState("layoutable")&&(this.group.updateState("width"),B.display.projectActiveSpaceReference.activeStageReference.layoutManager.validated=!1)},_updateHeight:function(){!0==this.gameEntity.getState("layoutable")&&(this.group.updateState("height"),B.display.projectActiveSpaceReference.activeStageReference.layoutManager.validated=!1)},_initDomView2_5D:function(){var a=window.document.getElementById("content");this._instanceView=window.document.createElement("div");
this._instanceView.style.position="absolute";a.insertBefore(this._instanceView,a.firstElementChild)},set_camera:function(a){if(this.camera==a)return this.camera;if(null==a)return this.camera=null,this._updateCurrentView(),null;this.camera=a;this.camera.attachToView(this);this._updateCurrentView();return this.camera},set_scene:function(a){if(this.scene==a)return this.scene;if(null==a)return this.scene=null,this._disposeCurrentScene(),this._updateCurrentView(),null;this.scene=a;this._instanceScene=
A.__cast(this.scene.createInstance(this),HTMLDivElement);this._updateCurrentView();return this.scene},_updateCurrentView:function(){null==this.scene||null==this.camera?null!=this._instanceView.firstElementChild&&this._instanceView.removeChild(this._instanceView.firstElementChild):(null==this._instanceView.firstElementChild&&this._instanceView.appendChild(this._instanceScene),this.scene.update(this))},_disposeCurrentScene:function(){this._instanceScene=null},setPosSize:function(a,b,d,c){null!=a&&(this._instanceView.style.left=
(null==a?"null":""+a)+"px");null!=b&&(this._instanceView.style.top=(null==b?"null":""+b)+"px");null!=d&&(this._instanceView.style.width=(null==d?"null":""+d)+"px");null!=c&&(this._instanceView.style.height=(null==c?"null":""+c)+"px")},__class__:Te});var oe=function(a){gc.call(this,a)};j["tools.spark.framework.flambe2_5D.FlambeCamera2_5D"]=oe;oe.__name__=!0;oe.__super__=gc;oe.prototype=z(gc.prototype,{__class__:oe});var Nd=function(a){Tb.call(this,a);this._initFlambeEntity2_5D()};j["tools.spark.framework.flambe2_5D.FlambeEntity2_5D"]=
Nd;Nd.__name__=!0;Nd.__super__=lb;Nd.prototype=z(lb.prototype,{_initFlambeEntity2_5D:function(){this._instancesMesh=new Ca;var a=v(this,this._update2DMeshType);this._updateStateFunctions.set("2DmeshType",a);a;a=v(this,this._updatePositionX);this._updateStateFunctions.set("spaceX",a);a;a=v(this,this._updatePositionY);this._updateStateFunctions.set("spaceY",a);a;a=v(this,this._updateSizeX);this._updateStateFunctions.set("scaleX",a);a;a=v(this,this._updateSizeY);this._updateStateFunctions.set("scaleY",
a);a;a=v(this,this._updateTouchable);this._updateStateFunctions.set("touchable",a);a;a=v(this,this._updateVisible);this._updateStateFunctions.set("visible",a);a;a=v(this,this._updateOpacity);this._updateStateFunctions.set("opacity",a);a;a=v(this,this._updateVelocityX);this._updateStateFunctions.set("velocityX",a);a;a=v(this,this._updateVelocityY);this._updateStateFunctions.set("velocityY",a);a;a=v(this,this._updateApplyImpulseX);this._updateStateFunctions.set("applyImpulseX",a);a;a=v(this,this._updateApplyImpulseY);
this._updateStateFunctions.set("applyImpulseY",a);a;a=v(this,this._centerAnchor);this._updateStateFunctions.set("centerAnchor",a);a;a=v(this,this._updatePhysics);this._updateStateFunctions.set("physicsEntity",a);a;a=v(this,this._updateSpaceWidth);this._updateStateFunctions.set("spaceWidth",a);a;a=v(this,this._updateSpaceHeight);this._updateStateFunctions.set("spaceHeight",a);a;a=v(this,this._update2DMeshImageForm);this._updateStateFunctions.set("2DMeshImageForm",a);a;a=v(this,this._update2DMeshSpriterForm);
this._updateStateFunctions.set("2DMeshSpriterForm",a);a;a=v(this,this._update2DMeshSpritesheetForm);this._updateStateFunctions.set("2DMeshSpritesheetForm",a);a;a=v(this,this._update2DMeshFillRectForm);this._updateStateFunctions.set("2DMeshFillRectForm",a);a;a=v(this,this._update2DMeshSpriteForm);this._updateStateFunctions.set("2DMeshSpriteForm",a);a;a=v(this,this._update2DMeshSpriterAnimForm);this._updateStateFunctions.set("2DMeshSpriterAnimForm",a);a},createInstance:function(a){var b=new Kb;this._instances.set(a,
b);b;return lb.prototype.createInstance.call(this,a)},_createChildOfInstance:function(a,b){this._instances.h[b.__id__].addChild(A.__cast(a.createInstance(b),Kb));lb.prototype._createChildOfInstance.call(this,a,b)},update:function(a){this._updateState("2DmeshType",a);if(null==this.gameEntity.getState("layoutable")||!1==this.gameEntity.getState("layoutable"))this._updateState("spaceX",a),this._updateState("spaceY",a);this._updateState("scaleX",a);this._updateState("scaleY",a);this._updateState("touchable",
a);this._updateState("visible",a);this._updateState("opacity",a);this._updateState("centerAnchor",a);this._updateState("physicsEntity",a);!0==this.gameEntity.getState("layoutable")&&this._updateLayoutGroup(a);for(var b=0,d=this.children;b<d.length;){var c=d[b];++b;c.update(a)}},_update2DMeshType:function(a,b){switch(a){case "Image":null!=this._updateStateFunctions.get("2DMeshImageForm")?this._updateStateFunctions.get("2DMeshImageForm")(this.gameEntity.getState("2DMeshImageForm"),b):w.logger.warn("State 2DMeshImageForm does not have a function handler! Ignoring :(",
null);break;case "Spriter":null!=this._updateStateFunctions.get("2DMeshSpriterForm")?this._updateStateFunctions.get("2DMeshSpriterForm")(this.gameEntity.getState("2DMeshSpriterForm"),b):w.logger.warn("State 2DMeshSpriterForm does not have a function handler! Ignoring :(",null);break;case "Spritesheet":null!=this._updateStateFunctions.get("2DMeshSpritesheetForm")?this._updateStateFunctions.get("2DMeshSpritesheetForm")(this.gameEntity.getState("2DMeshSpritesheetForm"),b):w.logger.warn("State 2DMeshSpritesheetForm does not have a function handler! Ignoring :(",
null);break;case "FillRect":null!=this._updateStateFunctions.get("2DMeshFillRectForm")?this._updateStateFunctions.get("2DMeshFillRectForm")(this.gameEntity.getState("2DMeshFillRectForm"),b):w.logger.warn("State 2DMeshFillRectForm does not have a function handler! Ignoring :(",null);break;case "Sprite":null!=this._updateStateFunctions.get("2DMeshSpriteForm")?this._updateStateFunctions.get("2DMeshSpriteForm")(this.gameEntity.getState("2DMeshSpriteForm"),b):w.logger.warn("State 2DMeshSpriteForm does not have a function handler! Ignoring :(",
null);break;case "Undefined":w.logger.warn("Undefined 2DmeshType value",null);break;default:w.logger.warn("Unhandled 2DmeshType value: "+a,null)}this._updateBounds(b)},_update2DMeshImageForm:function(a,b){if(!("Image"!=this.gameEntity.getState("2DmeshType")||"Undefined"==a)){var d=this._instances.h[b.__id__],c;c=null!=this._instancesMesh.h[b.__id__]?A.__cast(this._instancesMesh.h[b.__id__],je):null;null==c?(c=new je(O.getTexture(this.gameEntity.gameForm.getState(a))),c.blendMode=na.Copy,d.add(c),
this._instancesMesh.set(b,c),c):c.texture=O.getTexture(this.gameEntity.gameForm.getState(a))}},_update2DMeshSpriterForm:function(a,b){if(!("Spriter"!=this.gameEntity.getState("2DmeshType")||"Undefined"==a)){var d=this._instances.h[b.__id__],c=this._instancesMesh.h[b.__id__];if(null==c){var c=new P,f=this.gameEntity.gameForm.getState(a),f=new Uf(O.getAssetPackOf(f),f,null);c.blendMode=na.Copy;d.add(c);d.add(f);this._instancesMesh.set(b,c);c}null!=this._updateStateFunctions.get("2DMeshSpriterAnimForm")?
this._updateStateFunctions.get("2DMeshSpriterAnimForm")(this.gameEntity.getState("2DMeshSpriterAnimForm"),b):w.logger.warn("State 2DMeshSpriterAnimForm does not have a function handler! Ignoring :(",null)}},_update2DMeshSpritesheetForm:function(a,b){if(!("Spritesheet"!=this.gameEntity.getState("2DmeshType")||"Undefined"==a)){var d=this._instances.h[b.__id__],c=this._instancesMesh.h[b.__id__];if(null==c){var c=new P,f=this.gameEntity.gameForm.getState(a),f=new $f(O.getAssetPackOf(f),f);c.blendMode=
na.Copy;d.add(c);d.add(f);this._instancesMesh.set(b,c);c}d=d._compMap.SpriteSheetPlayer_2;!0==this.gameEntity.getState("AnimationLoop")?d.loop():d.play();d.setSpeed(this.gameEntity.getState("AnimationSpeed"))}},_update2DMeshFillRectForm:function(a,b){if(!("FillRect"!=this.gameEntity.getState("2DmeshType")||"Undefined"==a)){var d=this._instances.h[b.__id__],c;c=null!=this._instancesMesh.h[b.__id__]?A.__cast(this._instancesMesh.h[b.__id__],od):null;null==c?(c=new od(this.gameEntity.gameForm.getState(a),
this.gameEntity.getState("spaceWidth"),this.gameEntity.getState("spaceHeight")),c.scissor=new cd(0,0,this.gameEntity.getState("spaceWidth"),this.gameEntity.getState("spaceHeight")),c.blendMode=na.Copy,d.add(c),this._instancesMesh.set(b,c),c):c.color=this.gameEntity.gameForm.getState(a)}},_update2DMeshSpriteForm:function(a,b){if("Sprite"==this.gameEntity.getState("2DmeshType")){var d=this._instances.h[b.__id__],c;c=null!=this._instancesMesh.h[b.__id__]?A.__cast(this._instancesMesh.h[b.__id__],P):null;
null==c&&(c=new P,c.blendMode=na.Copy,d.add(c),this._instancesMesh.set(b,c),c)}},_update2DMeshSpriterAnimForm:function(a,b){if(!("Spriter"!=this.gameEntity.getState("2DmeshType")||"Undefined"==this.gameEntity.getState("2DMeshSpriterForm"))&&"Undefined"!=a){var d=this._instances.h[b.__id__]._compMap.SpriterMovie_1;null!=d&&d.playAnim(this.gameEntity.gameForm.getState(a))}},_updatePositionX:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&d.x.set__(a)},_updatePositionY:function(a,b){var d=
this._instancesMesh.h[b.__id__];null!=d&&d.y.set__(a)},_updateSizeX:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&d.scaleX.set__(a)},_updateSizeY:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&d.scaleY.set__(a)},_updateVisible:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&d.set_visible(a)},_updateOpacity:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&d.setAlpha(a)},_centerAnchor:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&
d.centerAnchor()},_updatePhysics:function(a,b){var d=this._instances.h[b.__id__],c=this._instancesMesh.h[b.__id__];if(null!=c&&a&&(ja.error("UPDATING PHYSICS ENTITY: "+r.string(this.gameEntity.getState("name"))+": "+r.string(this.gameEntity.getState("physicsType"))),null!=this.parentScene&&this.parentScene.gameEntity.getState("physicsScene"))){var f=this.parentScene.getInstance(b),i;"Static"==this.gameEntity.getState("physicsType")?(null==h.BodyType_STATIC&&(h.internal=!0,h.BodyType_STATIC=new Ya,
h.internal=!1),i=h.BodyType_STATIC):"Kinematic"==this.gameEntity.getState("physicsType")?(null==h.BodyType_KINEMATIC&&(h.internal=!0,h.BodyType_KINEMATIC=new Ya,h.internal=!1),i=h.BodyType_KINEMATIC):"Dynamic"==this.gameEntity.getState("physicsType")?(null==h.BodyType_DYNAMIC&&(h.internal=!0,h.BodyType_DYNAMIC=new Ya,h.internal=!1),i=h.BodyType_DYNAMIC):(null==h.BodyType_STATIC&&(h.internal=!0,h.BodyType_STATIC=new Ya,h.internal=!1),i=h.BodyType_STATIC);i=new Mf(i);var o;switch(this.gameEntity.getState("physicsMaterial")){case "Glass":o=
Aa.glass();break;case "Ice":o=Aa.ice();break;case "Rubber":o=Aa.rubber();break;case "Sand":o=Aa.sand();break;case "Steel":o=Aa.steel();break;case "Wood":o=Aa.wood();break;case "Ellastic":o=new Aa(1,0,0,1,0);break;case "Biped":o=new Aa(-5,1,2,1,0.001);break;default:o=Aa.wood()}var e=P.getBounds(d).width,g=P.getBounds(d).height;if("Spriter"!=this.gameEntity.getState("2DmeshType")){switch(this.gameEntity.getState("physicsShape")){case "Circle":o=new Oe((e+g)/4,null,o);break;case "Polygon":o=new Ba(Ba.box(e,
g),o);break;default:o=new Ba(Ba.box(e,g),o)}o.set_sensorEnabled(this.gameEntity.getState("physicsSensorFlag"));i.zpp_inner.wrap_shapes.add(o)}else"Biped"==this.gameEntity.getState("physicsShape")?(this._appendPhysicsBipedShapes(i,76,180,c.scaleX._value,0,-0.09,o),i.zpp_inner.immutable_midstep("Body::false"),!1!=!i.zpp_inner.norotate&&(i.zpp_inner.norotate=!0,i.zpp_inner.invalidate_inertia()),!i.zpp_inner.norotate):i.zpp_inner.wrap_shapes.add(new Ba(Ba.box(100,100),o));i.set_position(new Q(c.x._value,
c.y._value));"Dynamic"==this.gameEntity.getState("physicsType")?i.set_velocity(new Q(this.gameEntity.getState("velocityX"),this.gameEntity.getState("velocityY"))):"Kinematic"==this.gameEntity.getState("physicsType")&&i.set_velocity(new Q(this.gameEntity.getState("velocityX"),this.gameEntity.getState("velocityY")));i.set_space(f._compMap.SpaceComponent_4.space);null==i.zpp_inner_i.userData&&(i.zpp_inner_i.userData={});i.zpp_inner_i.userData.gameEntity=this.gameEntity;d.add(new nh(i))}},_appendPhysicsBipedShapes:function(a,
b,d,c,f,i,o){null==i&&(i=0);null==f&&(f=0);null==c&&(c=1);var b=b*c,d=d*c,f=f*b,h=i*d,e=b/2,g=d-2*e,i=new Oe(e,new Q(f,-g/2+h),o),c=new Ba(Ba.rect(-b/2+f,-g/2+h,b,g),o),j=new Oe(e,new Q(f,g/2+h),o),o=new Ba(Ba.rect(-b/2/2+f,g/2+h+e-0.05*d/2,b/2,0.05*d),o);o.zpp_inner.immutable_midstep("Shape::sensorEnabled");o.zpp_inner.sensorEnabled=!0;o.zpp_inner.wake();o.zpp_inner.sensorEnabled;null==o.zpp_inner_i.wrap_cbTypes&&o.zpp_inner_i.setupcbTypes();o.zpp_inner_i.wrap_cbTypes.add(Ub.BIPED_FEET);a.zpp_inner.wrap_shapes.add(i);
a.zpp_inner.wrap_shapes.add(c);a.zpp_inner.wrap_shapes.add(j);a.zpp_inner.wrap_shapes.add(o);this.gameEntity.setState("physicsBody",a)},_updateVelocityX:function(a,b){var d=this._instances.h[b.__id__];null!=d._compMap.BodyComponent_5&&(d=d._compMap.BodyComponent_5.body,null==d.zpp_inner.wrap_vel&&d.zpp_inner.setupVelocity(),d.zpp_inner.wrap_vel.set_x(a))},_updateVelocityY:function(a,b){var d=this._instances.h[b.__id__];null!=d._compMap.BodyComponent_5&&(d=d._compMap.BodyComponent_5.body,null==d.zpp_inner.wrap_vel&&
d.zpp_inner.setupVelocity(),d.zpp_inner.wrap_vel.set_y(a))},_updateApplyImpulseX:function(a,b){var d=this._instances.h[b.__id__];null!=d._compMap.BodyComponent_5&&d._compMap.BodyComponent_5.body.applyImpulse(Q.get(a,0,!0))},_updateApplyImpulseY:function(a,b){var d=this._instances.h[b.__id__];null!=d._compMap.BodyComponent_5&&d._compMap.BodyComponent_5.body.applyImpulse(Q.get(0,a,!0))},_updateTouchable:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&a&&(d.set_pointerEnabled(!0),d.get_pointerIn().hasListeners()||
d.get_pointerIn().connect(v(this,this._onPointerIn)),d.get_pointerMove().hasListeners()||d.get_pointerMove().connect(v(this,this._onPointerMove)),d.get_pointerOut().hasListeners()||d.get_pointerOut().connect(v(this,this._onPointerOut)),d.get_pointerDown().hasListeners()||d.get_pointerDown().connect(v(this,this._onPointerDown)))},_onPointerIn:function(){B.input.pointer.submitPointerEvent(k.MOUSE_ENTERED,this.gameEntity)},_onPointerMove:function(){B.input.pointer.submitPointerEvent(k.MOUSE_MOVED,this.gameEntity)},
_onPointerOut:function(){B.input.pointer.submitPointerEvent(k.MOUSE_LEFT,this.gameEntity)},_onPointerDown:function(){B.input.pointer.submitPointerEvent(k.MOUSE_LEFT_CLICK,this.gameEntity)},setPosSize:function(a,b,d,c,f){var i=this._instancesMesh.h[f.__id__];null!=i&&(null!=a&&i.x.set__(a),null!=b&&i.y.set__(b));a=r.instance(this._instances.h[f.__id__]._compMap.Sprite_3,od);null!=a&&a.setSize(d,c)},_updateSpaceWidth:function(a,b){var d=r.instance(this._instances.h[b.__id__]._compMap.Sprite_3,od);null!=
d&&(d.width.set__(a),d.centerAnchor(),d.scissor.width=a)},_updateSpaceHeight:function(a,b){var d=r.instance(this._instances.h[b.__id__]._compMap.Sprite_3,od);null!=d&&(d.height.set__(a),d.centerAnchor(),d.scissor.height=a)},_updateBounds:function(a){a=this._instances.h[a.__id__];null!=a&&("Spriter"==this.gameEntity.getState("2DmeshType")?this.gameEntity.setState("boundsRect",new cd(-55,-112,140,190)):this.gameEntity.setState("boundsRect",P.getBounds(a)))},__class__:Nd});var sa=function(){this.cbsets=
this.listeners=this.bodylisteners=this.conlisteners=null;this.id=0;this.outer=null;this.id=cb.CbType();this.listeners=new Ue;this.bodylisteners=new ag;this.conlisteners=new oh;this.constraints=new de;this.interactors=new Od;this.cbsets=new zd};j["zpp_nape.callbacks.ZPP_CbType"]=sa;sa.__name__=!0;sa.prototype={addint:function(a){for(var b=null,d=this.listeners.head;null!=d;){var c=d.elt;if(a.precedence>c.precedence||a.precedence==c.precedence&&a.id>c.id)break;b=d;d=d.next}this.listeners.inlined_insert(b,
a);this.invalidateint()},invalidateint:function(){for(var a=this.cbsets.head;null!=a;){var b=a.elt;b.zip_listeners=!0;b.invalidate_pairs();a=a.next}},addbody:function(a){for(var b=null,d=this.bodylisteners.head;null!=d;){var c=d.elt;if(a.precedence>c.precedence||a.precedence==c.precedence&&a.id>c.id)break;b=d;d=d.next}this.bodylisteners.inlined_insert(b,a);this.invalidatebody()},invalidatebody:function(){for(var a=this.cbsets.head;null!=a;)a.elt.zip_bodylisteners=!0,a=a.next},addconstraint:function(a){for(var b=
null,d=this.conlisteners.head;null!=d;){var c=d.elt;if(a.precedence>c.precedence||a.precedence==c.precedence&&a.id>c.id)break;b=d;d=d.next}this.conlisteners.inlined_insert(b,a);this.invalidateconstraint()},invalidateconstraint:function(){for(var a=this.cbsets.head;null!=a;)a.elt.zip_conlisteners=!0,a=a.next},__class__:sa};var cb=function(){};j["zpp_nape.ZPP_ID"]=cb;cb.__name__=!0;cb.Interactor=function(){return cb._Interactor++};cb.CbType=function(){return cb._CbType++};cb.CbSet=function(){return cb._CbSet++};
cb.Listener=function(){return cb._Listener++};var Ue=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_InteractionListener"]=Ue;Ue.__name__=!0;Ue.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Sa.zpp_pool?b=new Sa:(b=Sa.zpp_pool,Sa.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_insert:function(a,b){var d;null==Sa.zpp_pool?d=new Sa:(d=
Sa.zpp_pool,Sa.zpp_pool=d.next,d.next=null);null;d.elt=b;null==a?(d.next=this.head,this.head=d):(d.next=a.next,a.next=d);this.pushmod=this.modified=!0;this.length++;return d},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Sa.zpp_pool;Sa.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,d=this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;
break}b=d;d=d.next}return c},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=Sa.zpp_pool;Sa.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:Ue};var ag=function(){this.length=
0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_BodyListener"]=ag;ag.__name__=!0;ag.prototype={inlined_insert:function(a,b){var d;null==Bc.zpp_pool?d=new Bc:(d=Bc.zpp_pool,Bc.zpp_pool=d.next,d.next=null);null;d.elt=b;null==a?(d.next=this.head,this.head=d):(d.next=a.next,a.next=d);this.pushmod=this.modified=!0;this.length++;return d},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Bc.zpp_pool;Bc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=
!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,d=this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;break}b=d;d=d.next}return c},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=Bc.zpp_pool;Bc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},clear:function(){for(;null!=
this.head;)this.inlined_pop();this.pushmod=!0},__class__:ag};var oh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_ConstraintListener"]=oh;oh.__name__=!0;oh.prototype={inlined_insert:function(a,b){var d;null==jd.zpp_pool?d=new jd:(d=jd.zpp_pool,jd.zpp_pool=d.next,d.next=null);null;d.elt=b;null==a?(d.next=this.head,this.head=d):(d.next=a.next,a.next=d);this.pushmod=this.modified=!0;this.length++;return d},inlined_pop:function(){var a=this.head;this.head=
a.next;a.elt=null;a.next=jd.zpp_pool;jd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,d=this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;break}b=d;d=d.next}return c},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=jd.zpp_pool;
jd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:oh};var de=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_Constraint"]=de;de.__name__=!0;de.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==ic.zpp_pool?b=new ic:(b=ic.zpp_pool,ic.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;
this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=ic.zpp_pool;ic.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,d=this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;break}b=d;d=d.next}return c},
erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=ic.zpp_pool;ic.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:de};var Od=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_Interactor"]=
Od;Od.__name__=!0;Od.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==kd.zpp_pool?b=new kd:(b=kd.zpp_pool,kd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=kd.zpp_pool;kd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,d=this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;break}b=d;d=d.next}return c},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=kd.zpp_pool;kd.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return d},inlined_clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Od};var zd=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_CbSet"]=zd;zd.__name__=!0;zd.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==jc.zpp_pool?b=new jc:(b=jc.zpp_pool,jc.zpp_pool=b.next,b.next=null);null;
b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=jc.zpp_pool;jc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,d=
this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;break}b=d;d=d.next}return c},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=jc.zpp_pool;jc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},__class__:zd};var Ub=function(a){Ra.call(this,a);this._initFlambeScene2_5D()};j["tools.spark.framework.flambe2_5D.FlambeScene2_5D"]=Ub;Ub.__name__=
!0;Ub.__super__=Ra;Ub.prototype=z(Ra.prototype,{_initFlambeScene2_5D:function(){var a=v(this,this._updatePhysics);this._updateStateFunctions.set("physicsScene",a);a},createInstance:function(a){var b=new Kb;this._instances.set(a,b);b;b=new P;b.blendMode=na.Copy;b.centerAnchor();this._instances.h[a.__id__].add(b);return Ra.prototype.createInstance.call(this,a)},update:function(a){this._updateState("physicsScene",a);for(var b=0,d=this.children;b<d.length;){var c=d[b];++b;c.update(a)}},_createChildOfInstance:function(a,
b){this._instances.h[b.__id__].addChild(A.__cast(a.createInstance(b),Kb));Ra.prototype._createChildOfInstance.call(this,a,b)},_removeChildOfInstance:function(a,b){this._instances.h[b.__id__].removeChild(A.__cast(a.getInstance(b),Kb));Ra.prototype._removeChildOfInstance.call(this,a,b)},updateCamera:function(a,b){Ra.prototype.updateCamera.call(this,a,b);var d=this._instances.h[a.__id__]._compMap.Sprite_3;d.setXY(this._tempX,this._tempY);d.setScaleXY(this._scaleX,this._scaleY);if(null!=a.scene.gameEntity.getState("backgroundEntity")&&
"Editor Scene Edit Camera"!=b.gameEntity.getState("name")){var d=A.__cast(a.scene.gameEntity.getState("backgroundEntity"),bg),c=d.getState("boundsRect").width,f=a.scene.gameEntity.getState("boundsWidth"),i=a.gameEntity.getState("feedbackWidth"),o=a.scene.gameEntity.getState("boundsX")+f,f=c/2-this._tempX/this._scaleX,c=c-i/this._scaleX,i=a.scene.gameEntity.getState("boundsX"),o=o-b.gameEntity.getState("captureAreaWidth");d.setState("spaceX",f-c*((-1*(this._tempX/this._scaleX)-i)/(o-i)))}},_updatePhysics:function(a,
b){var d=this._instances.h[b.__id__];if(a){var c=new cg(this.gameEntity.getState("gravityX"),this.gameEntity.getState("gravityY"));d.add(c);this._scenePhysicsInit(c.space)}},_scenePhysicsInit:function(a){a.zpp_inner.wrap_listeners.add(new Oc(function(){null==h.CbEvent_BEGIN&&(h.internal=!0,h.CbEvent_BEGIN=new gb,h.internal=!1);return h.CbEvent_BEGIN}(this),function(){null==h.InteractionType_COLLISION&&(h.internal=!0,h.InteractionType_COLLISION=new Xa,h.internal=!1);return h.InteractionType_COLLISION}(this),
sa.ANY_BODY,sa.ANY_BODY,v(this,this._beginHandlerCollision)));a.zpp_inner.wrap_listeners.add(new Oc(function(){null==h.CbEvent_END&&(h.internal=!0,h.CbEvent_END=new gb,h.internal=!1);return h.CbEvent_END}(this),function(){null==h.InteractionType_COLLISION&&(h.internal=!0,h.InteractionType_COLLISION=new Xa,h.internal=!1);return h.InteractionType_COLLISION}(this),sa.ANY_BODY,sa.ANY_BODY,v(this,this._endHandlerCollision)));a.zpp_inner.wrap_listeners.add(new Oc(function(){null==h.CbEvent_BEGIN&&(h.internal=
!0,h.CbEvent_BEGIN=new gb,h.internal=!1);return h.CbEvent_BEGIN}(this),function(){null==h.InteractionType_ANY&&(h.internal=!0,h.InteractionType_ANY=new Xa,h.internal=!1);return h.InteractionType_ANY}(this),sa.ANY_BODY,sa.ANY_BODY,v(this,this._beginHandlerSensor)));a.zpp_inner.wrap_listeners.add(new Oc(function(){null==h.CbEvent_END&&(h.internal=!0,h.CbEvent_END=new gb,h.internal=!1);return h.CbEvent_END}(this),function(){null==h.InteractionType_ANY&&(h.internal=!0,h.InteractionType_ANY=new Xa,h.internal=
!1);return h.InteractionType_ANY}(this),sa.ANY_BODY,sa.ANY_BODY,v(this,this._endHandlerSensor)));a.zpp_inner.wrap_listeners.add(new Oc(function(){null==h.CbEvent_BEGIN&&(h.internal=!0,h.CbEvent_BEGIN=new gb,h.internal=!1);return h.CbEvent_BEGIN}(this),function(){null==h.InteractionType_SENSOR&&(h.internal=!0,h.InteractionType_SENSOR=new Xa,h.internal=!1);return h.InteractionType_SENSOR}(this),Ub.BIPED_FEET,sa.ANY_BODY,v(this,this._beginHandlerSensorFeet)));a.zpp_inner.wrap_listeners.add(new Oc(function(){null==
h.CbEvent_END&&(h.internal=!0,h.CbEvent_END=new gb,h.internal=!1);return h.CbEvent_END}(this),function(){null==h.InteractionType_SENSOR&&(h.internal=!0,h.InteractionType_SENSOR=new Xa,h.internal=!1);return h.InteractionType_SENSOR}(this),Ub.BIPED_FEET,sa.ANY_BODY,v(this,this._endHandlerSensorFeet)))},_beginHandlerCollision:function(a){null!=a.zpp_inner.int1.outer_i.get_userData().gameEntity&&B.event.raiseEvent(k.PHYSICS_COLLISION_START,a.zpp_inner.int1.outer_i.get_userData().gameEntity);null!=a.zpp_inner.int2.outer_i.get_userData().gameEntity&&
B.event.raiseEvent(k.PHYSICS_COLLISION_START,a.zpp_inner.int2.outer_i.get_userData().gameEntity)},_endHandlerCollision:function(a){null!=a.zpp_inner.int1.outer_i.get_userData().gameEntity&&B.event.raiseEvent(k.PHYSICS_COLLISION_END,a.zpp_inner.int1.outer_i.get_userData().gameEntity);null!=a.zpp_inner.int2.outer_i.get_userData().gameEntity&&B.event.raiseEvent(k.PHYSICS_COLLISION_END,a.zpp_inner.int2.outer_i.get_userData().gameEntity)},_beginHandlerSensor:function(a){null!=a.zpp_inner.int1.outer_i.get_userData().gameEntity&&
B.event.raiseEvent(k.PHYSICS_SENSOR_START,a.zpp_inner.int1.outer_i.get_userData().gameEntity);null!=a.zpp_inner.int2.outer_i.get_userData().gameEntity&&B.event.raiseEvent(k.PHYSICS_SENSOR_START,a.zpp_inner.int2.outer_i.get_userData().gameEntity)},_endHandlerSensor:function(a){null!=a.zpp_inner.int1.outer_i.get_userData().gameEntity&&B.event.raiseEvent(k.PHYSICS_SENSOR_END,a.zpp_inner.int1.outer_i.get_userData().gameEntity);null!=a.zpp_inner.int2.outer_i.get_userData().gameEntity&&B.event.raiseEvent(k.PHYSICS_SENSOR_END,
a.zpp_inner.int2.outer_i.get_userData().gameEntity)},_beginHandlerSensorFeet:function(a){var b=a.zpp_inner.int1.outer_i.get_castShape().get_body();null==b.zpp_inner_i.userData&&(b.zpp_inner_i.userData={});null!=b.zpp_inner_i.userData.gameEntity&&B.event.raiseEvent(k.PHYSICS_SENSOR_START_BIPED_FEET,function(){null==b.zpp_inner_i.userData&&(b.zpp_inner_i.userData={});return b.zpp_inner_i.userData}(this).gameEntity);null!=a.zpp_inner.int2.outer_i.get_userData().gameEntity&&B.event.raiseEvent(k.PHYSICS_SENSOR_START_BIPED_FEET,
a.zpp_inner.int2.outer_i.get_userData().gameEntity)},_endHandlerSensorFeet:function(a){var b=a.zpp_inner.int1.outer_i.get_castShape().get_body();null==b.zpp_inner_i.userData&&(b.zpp_inner_i.userData={});null!=b.zpp_inner_i.userData.gameEntity&&B.event.raiseEvent(k.PHYSICS_SENSOR_END_BIPED_FEET,function(){null==b.zpp_inner_i.userData&&(b.zpp_inner_i.userData={});return b.zpp_inner_i.userData}(this).gameEntity);null!=a.zpp_inner.int2.outer_i.get_userData().gameEntity&&B.event.raiseEvent(k.PHYSICS_SENSOR_END_BIPED_FEET,
a.zpp_inner.int2.outer_i.get_userData().gameEntity)},__class__:Ub});var Ve=function(a,b){Vc.call(this,a);this._flambeGraphics=b;this._initFlambeView2_5D()};j["tools.spark.framework.flambe2_5D.FlambeView2_5D"]=Ve;Ve.__name__=!0;Ve.__super__=Vc;Ve.prototype=z(Vc.prototype,{_initFlambeView2_5D:function(){this._instanceView=new Kb;var a=new P;a.blendMode=na.Copy;this._instanceView.add(a);this.gameEntity.getState("visible")&&S.root.addChild(this._instanceView)},render:function(){this.gameEntity.getState("visible")&&
P.render(this._instanceView,this._flambeGraphics)},setVisible:function(a){a?S.root.addChild(this._instanceView):S.root.removeChild(this._instanceView)},set_camera:function(a){if(this.camera==a)return this.camera;if(null==a)return this.camera=null,this._updateCurrentView(),null;this.camera=a;this.camera.attachToView(this);this._updateCurrentView();return this.camera},set_scene:function(a){if(this.scene==a)return this.scene;if(null==a)return this.scene=null,this._disposeCurrentScene(),this._updateCurrentView(),
null;null!=this.scene&&(this.scene=null,this._disposeCurrentScene());this.scene=a;this._instanceScene=A.__cast(this.scene.createInstance(this),Kb);this._updateCurrentView();return this.scene},_updateCurrentView:function(){null==this.scene||null==this.camera?null!=this._instanceView.firstChild&&this._instanceView.removeChild(this._instanceView.firstChild):(null==this._instanceView.firstChild&&this._instanceView.addChild(this._instanceScene),this.scene.update(this))},_disposeCurrentScene:function(){this._instanceScene=
null;this._instanceView.disposeChildren()},setPosSize:function(a,b,d,c){var f=this._instanceView._compMap.Sprite_3;null!=a&&f.x.set__(a);null!=b&&f.y.set__(b);this.gameEntity.setState("feedbackX",a);this.gameEntity.setState("feedbackY",b);this.gameEntity.setState("feedbackWidth",d);this.gameEntity.setState("feedbackHeight",c)},__class__:Ve});var nh=function(a){ia.call(this);this.body=a};j["tools.spark.framework.flambe2_5D.components.BodyComponent"]=nh;nh.__name__=!0;nh.__super__=ia;nh.prototype=z(ia.prototype,
{get_name:function(){return"BodyComponent_5"},onUpdate:function(){var a=this.body.get_position(),b=this.owner._compMap.Sprite_3;b.x.set__(function(){a.zpp_inner.validate();return a.zpp_inner.x}(this));b.y.set__(function(){a.zpp_inner.validate();return a.zpp_inner.y}(this));b.rotation.set__(180*this.body.zpp_inner.rot/3.141592653589793)},onRemoved:function(){this.body.set_space(null)},__class__:nh});var cg=function(a,b){ia.call(this);this.space=new $i(new Q(a,b))};j["tools.spark.framework.flambe2_5D.components.SpaceComponent"]=
cg;cg.__name__=!0;cg.__super__=ia;cg.prototype=z(ia.prototype,{get_name:function(){return"SpaceComponent_4"},onUpdate:function(a){this.space.step(a)},__class__:cg});var ph=function(a){null!=a&&(this.name=a.name,this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.sourceColorX=a.sourceColorX,this.sourceColorY=a.sourceColorY,this.rotated=a.rotated)};j["tools.spark.framework.flambe2_5D.spritesheet.PlistEntry"]=ph;ph.__name__=!0;ph.prototype={__class__:ph};var We=function(){};j["tools.spark.framework.flambe2_5D.spritesheet.PlistParser"]=
We;We.__name__=!0;We.parse=function(a){for(var b=[],d=null,c=0,a=a.firstElement().firstElement().elements();a.hasNext();){var f=a.next();if(f.nodeType!=q.Document&&f.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element or Document but found "+f.nodeType));if("frames"==f.children[0].get_nodeValue())c=1;else{if(f.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+f.nodeType));if("dict"==f.nodeName&&1==c)d=f;else{if(f.nodeType!=q.Document&&f.nodeType!=
q.Element)throw new p(new p("Bad node type, expected Element or Document but found "+f.nodeType));if("metadata"==f.children[0].get_nodeValue())c=2;else if(f.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+f.nodeType));}}}c=1;a=new ph;f="";for(d=d.elements();d.hasNext();){var i=d.next();if(i.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+i.nodeType));if("key"==i.nodeName&&1==c){c=a;if(i.nodeType!=q.Document&&i.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element or Document but found "+
i.nodeType));c.name=i.children[0].get_nodeValue();c=2}else{if(i.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+i.nodeType));if("dict"==i.nodeName&&2==c){c=1;for(i=i.elements();i.hasNext();){var o=i.next();if(o.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+o.nodeType));if("key"==o.nodeName){if(o.nodeType!=q.Document&&o.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element or Document but found "+o.nodeType));
f=o.children[0].get_nodeValue()}else switch(f){case "frame":var h=We.parseString(function(){if(o.nodeType!=q.Document&&o.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element or Document but found "+o.nodeType));return o.children[0]}(this).get_nodeValue());a.x=h[0];a.y=h[1];a.width=h[2];a.height=h[3];break;case "sourceColorRect":h=We.parseString(function(){if(o.nodeType!=q.Document&&o.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element or Document but found "+o.nodeType));
return o.children[0]}(this).get_nodeValue());a.sourceColorX=h[0];a.sourceColorY=h[1];break;case "rotated":h=a;if(o.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+o.nodeType));h.rotated="true"==o.nodeName?!0:!1}}b.push(new ph(a))}}}return b};We.parseString=function(a){for(var b=[],d=new yb,c=0,f=a.length;c<f;){var i=c++;"{"!=a.charAt(i)&&"}"!=a.charAt(i)&&d.addSub(a.charAt(i),0,null)}a=0;for(d=d.b.split(",");a<d.length;)c=d[a],++a,b.push(parseFloat(c));return b};
var dg=function(a,b){null==b&&(b=0);null==a&&(a=0);this.width=a;this.height=b};j["tools.spark.framework.flambe2_5D.spritesheet.Size"]=dg;dg.__name__=!0;dg.prototype={__class__:dg};var Xe=function(){this._offset=new Mc(0,0);this._offsetInPixels=new Mc(0,0);this._originalSize=new dg(0,0);this._rectInPixels=new cd(0,0,0,0);this._rect=new cd(0,0,0,0);this._originalSizeInPixels=new dg(0,0);this._textureFilname=""};j["tools.spark.framework.flambe2_5D.spritesheet.SpriteFrame"]=Xe;Xe.__name__=!0;Xe.createWithTexture=
function(a,b,d,c,f){var i=new Xe;i.initWithTexture(a,b,d,c,f);return i};Xe.prototype={isRotated:function(){return this._rotated},getRect:function(){return this._rect},getTexture:function(){return null!=this._texture?this._texture:null},getOffset:function(){return new Mc(this._offset.x,this._offset.y)},initWithTexture:function(a,b,d,c,f){this._texture=a;this._rect=this._rectInPixels=b;this._offset=this._offsetInPixels=c;this._originalSize=this._originalSizeInPixels=f;this._rotated=d;return!0},__class__:Xe};
var eg=function(a){P.call(this);this.frame=a};j["tools.spark.framework.flambe2_5D.spritesheet.SpriteSheet"]=eg;eg.__name__=!0;eg.__super__=P;eg.prototype=z(P.prototype,{draw:function(a){this.g=a;this.frame.isRotated()?(a.translate(this.frame.getOffset().x,this.frame.getOffset().y+this.frame.getRect().height),a.rotate(-90),a.drawSubTexture(this.frame.getTexture(),0,0,this.frame.getRect().x,this.frame.getRect().y,this.frame.getRect().height,this.frame.getRect().width)):(a.translate(this.frame.getOffset().x,
this.frame.getOffset().y),a.drawSubTexture(this.frame.getTexture(),0,0,this.frame.getRect().x,this.frame.getRect().y,this.frame.getRect().width,this.frame.getRect().height))},getNaturalHeight:function(){return null==this.frame?0:this.frame.getRect().height},getNaturalWidth:function(){return null==this.frame?0:this.frame.getRect().width},__class__:eg});var $f=function(a,b){this.paused=this.isLooping=!1;this.currentIndex=0;ia.call(this);var d=q.parse(a.getFile(b).toString());this.plist=We.parse(d);
this._spriteFramesInfo=[];this.sprites=[];null==this.texture&&(this.texture=a.getTexture(b+"_sheet"));this._addSpriteFramesWithDictionary();this._initSprites();this._root=new Kb;this.speed=-1};j["tools.spark.framework.flambe2_5D.spritesheet.SpriteSheetPlayer"]=$f;$f.__name__=!0;$f.__super__=ia;$f.prototype=z(ia.prototype,{get_name:function(){return"SpriteSheetPlayer_2"},_addSpriteFramesWithDictionary:function(){for(var a=0,b=this.plist;a<b.length;){var d=b[a];++a;var c=new cd(d.x,d.y,d.width,d.height),
f=d.rotated,d=new Mc(d.sourceColorX,d.sourceColorY),i=new dg(0,0);this._spriteFramesInfo.push(Xe.createWithTexture(this.texture,c,f,d,i))}},_initSprites:function(){this.currentFrame=new eg(this._spriteFramesInfo[0]);this.currentIndex++},play:function(){null==r.instance(this._root._compMap.Sprite_3,eg)&&(this._root.add(this.currentFrame),this.currentFrame.centerAnchor());this.currentIndex=0;this.paused=!1},loop:function(){this.play();this.isLooping=!0},onAdded:function(){this.owner.addChild(this._root);
this.oldTime=(new Date).getTime();this.curTime=(new Date).getTime()},onRemoved:function(){this._root.parent.removeChild(this._root);this.currentFrame.frame=this._spriteFramesInfo[0];this.currentIndex=0;this.isLooping=this.paused=!1},onUpdate:function(){if(-1!=this.speed){this.curTime=(new Date).getTime();if(this.curTime-this.oldTime<this.speed)return;this.oldTime=this.curTime}!this.paused&&null!=this.currentFrame&&(this.currentIndex==this._spriteFramesInfo.length&&(this.isLooping?this.currentIndex=
0:this.paused=!0),this.paused||(this.currentFrame.frame=this._spriteFramesInfo[this.currentIndex++]))},setSpeed:function(a){this.speed=a},__class__:$f});var La=j["tools.spark.framework.haxe.Filter"]={__ename__:!0,__constructs__:["FInt","FBool","FEnum","FReg"]};La.FInt=["FInt",0];La.FInt.toString=g;La.FInt.__enum__=La;La.FBool=["FBool",1];La.FBool.toString=g;La.FBool.__enum__=La;La.FEnum=function(a){a=["FEnum",2,a];a.__enum__=La;a.toString=g;return a};La.FReg=function(a){a=["FReg",3,a];a.__enum__=
La;a.toString=g;return a};var al=j["tools.spark.framework.haxe.Attrib"]={__ename__:!0,__constructs__:["Att"]};al.Att=function(a,b,d){a=["Att",0,a,b,d];a.__enum__=al;a.toString=g;return a};var D=j["tools.spark.framework.haxe.Rule"]={__ename__:!0,__constructs__:"RNode,RData,RMulti,RList,RChoice,ROptional".split(",")};D.RNode=function(a,b,d){a=["RNode",0,a,b,d];a.__enum__=D;a.toString=g;return a};D.RData=function(a){a=["RData",1,a];a.__enum__=D;a.toString=g;return a};D.RMulti=function(a,b){var d=["RMulti",
2,a,b];d.__enum__=D;d.toString=g;return d};D.RList=function(a,b){var d=["RList",3,a,b];d.__enum__=D;d.toString=g;return d};D.RChoice=function(a){a=["RChoice",4,a];a.__enum__=D;a.toString=g;return a};D.ROptional=function(a){a=["ROptional",5,a];a.__enum__=D;a.toString=g;return a};var U=j["tools.spark.framework.haxe._LooseCheck.CheckResult"]={__ename__:!0,__constructs__:"CMatch,CMissing,CExtra,CElementExpected,CDataExpected,CExtraAttrib,CMissingAttrib,CInvalidAttrib,CInvalidData,CInElement".split(",")};
U.CMatch=["CMatch",0];U.CMatch.toString=g;U.CMatch.__enum__=U;U.CMissing=function(a){a=["CMissing",1,a];a.__enum__=U;a.toString=g;return a};U.CExtra=function(a){a=["CExtra",2,a];a.__enum__=U;a.toString=g;return a};U.CElementExpected=function(a,b){var d=["CElementExpected",3,a,b];d.__enum__=U;d.toString=g;return d};U.CDataExpected=function(a){a=["CDataExpected",4,a];a.__enum__=U;a.toString=g;return a};U.CExtraAttrib=function(a,b){var d=["CExtraAttrib",5,a,b];d.__enum__=U;d.toString=g;return d};U.CMissingAttrib=
function(a,b){var d=["CMissingAttrib",6,a,b];d.__enum__=U;d.toString=g;return d};U.CInvalidAttrib=function(a,b,d){a=["CInvalidAttrib",7,a,b,d];a.__enum__=U;a.toString=g;return a};U.CInvalidData=function(a,b){var d=["CInvalidData",8,a,b];d.__enum__=U;d.toString=g;return d};U.CInElement=function(a,b){var d=["CInElement",9,a,b];d.__enum__=U;d.toString=g;return d};var G=function(){};j["tools.spark.framework.haxe.LooseCheck"]=G;G.__name__=!0;G.isBlank=function(a){return a.nodeType==q.PCData&&G.blanks.match(function(){if(a.nodeType==
q.Document||a.nodeType==q.Element)throw new p("Bad node type, unexpected "+a.nodeType);return a.nodeValue}(this))||a.nodeType==q.Comment};G.filterMatch=function(a,b){switch(b[1]){case 0:return G.filterMatch(a,La.FReg(new mb("[0-9]+","")));case 1:return G.filterMatch(a,La.FEnum(["true","false","0","1"]));case 2:for(var d=b[2],c=0;c<d.length;){var f=d[c];++c;if(a==f)return!0}return!1;case 3:return b[2].match(a)}};G.isNullable=function(a){switch(a[1]){case 2:var b=a[2];return!0!=a[3]||G.isNullable(b);
case 3:a=a[2];for(b=0;b<a.length;){var d=a[b];++b;if(!G.isNullable(d))return!1}return!0;case 4:a=a[2];for(b=0;b<a.length;)if(d=a[b],++b,G.isNullable(d))return!0;return!1;case 1:return!1;case 0:return!1;case 5:return!0}};G.check=function(a,b){switch(b[1]){case 0:var d=b[4],c=b[3],f=b[2],i;if(!(i=a.nodeType!=q.Element)){if(a.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+a.nodeType);i=a.nodeName!=f}if(i)return U.CElementExpected(f,a);if(null!=c){f=c.slice();for(i=a.attributes();i.hasNext();){for(var o=
i.next(),h=!1,e=0;e<f.length;){var g=f[e];++e;var j=g[3],k=g[2];if(o==k){if(null!=j&&!G.filterMatch(a.get(o),j))return U.CInvalidAttrib(k,a,j);C.remove(f,g);h=!0}}if(!h)return U.CExtraAttrib(o,a)}for(i=0;i<f.length;)if(o=f[i],++i,h=o[2],null==o[4])return U.CMissingAttrib(h,a)}if(null!=d&&(d=G.checkList(function(){if(a.nodeType!=q.Document&&a.nodeType!=q.Element)throw new p("Bad node type, expected Element or Document but found "+a.nodeType);return C.iter(a.children)}(this),d),d!=U.CMatch))return U.CInElement(a,
d);if(null!=c)for(d=0;d<c.length;)f=c[d],++d,a.set(f[2],f[4]);return U.CMatch;case 1:return c=b[2],a.nodeType!=q.PCData&&a.nodeType!=q.CData?U.CDataExpected(a):null!=c&&!G.filterMatch(function(){if(a.nodeType==q.Document||a.nodeType==q.Element)throw new p("Bad node type, unexpected "+a.nodeType);return a.nodeValue}(this),c)?U.CInvalidData(a,c):U.CMatch;case 4:c=b[2];if(0==c.length)throw new p("No choice possible");for(d=0;d<c.length;)if(f=c[d],++d,G.check(a,f)==U.CMatch)return U.CMatch;return G.check(a,
c[0]);case 5:return G.check(a,b[2]);default:throw new p("Unexpected "+r.string(b));}};G.checkList=function(a,b){switch(b[1]){case 3:for(var d=b[3],c=b[2].slice();a.hasNext();){var f=a.next();if(!G.isBlank(f)){for(var i=!1,o=0;o<c.length;){var h=c[o];++o;var e=G.checkList(C.iter([f]),h);if(e==U.CMatch){i=!0;switch(h[1]){case 2:o=h[2];if(h[3])for(var e=0,g=c.length;e<g;){var j=e++;c[j]==h&&(c[j]=D.RMulti(o))}break;default:C.remove(c,h)}break}else if(d&&!G.isNullable(h))return e}if(!i)return U.CExtra(f)}}for(d=
0;d<c.length;)if(f=c[d],++d,!G.isNullable(f))return U.CMissing(f);return U.CMatch;case 2:c=b[3];d=b[2];for(f=!1;a.hasNext();)if(i=a.next(),!G.isBlank(i)){f=G.checkList(C.iter([i]),d);if(f!=U.CMatch)return f;f=!0}return c&&!f?U.CMissing(d):U.CMatch;default:for(c=!1;a.hasNext();)if(d=a.next(),!G.isBlank(d)){c=G.check(d,b);if(c!=U.CMatch)return c;c=!0;break}if(!c)switch(b[1]){case 5:break;default:return U.CMissing(b)}for(;a.hasNext();)if(c=a.next(),!G.isBlank(c))return U.CExtra(c);return U.CMatch}};
G.makeWhere=function(a){if(0==a.length)return"";for(var b="In ",d=!0,c=0;c<a.length;){var f=a[c];++c;d?d=!1:b+=".";if(f.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+f.nodeType);b+=f.nodeName}return b+": "};G.makeString=function(a){if(a.nodeType==q.Element){if(a.nodeType!=q.Element)throw new p("Bad node type, expected Element but found "+a.nodeType);return"element "+a.nodeName}if(a.nodeType==q.Document||a.nodeType==q.Element)throw new p("Bad node type, unexpected "+
a.nodeType);a=a.nodeValue.split("\r").join("\\r").split("\n").join("\\n").split("\t").join("\\t");return 20<a.length?C.substr(a,0,17)+"...":a};G.makeRule=function(a){switch(a[1]){case 0:return"element "+a[2];case 1:return"data";case 2:return G.makeRule(a[2]);case 3:return G.makeRule(a[2][0]);case 4:return G.makeRule(a[2][0]);case 5:return G.makeRule(a[2])}};G.makeError=function(a,b){null==b&&(b=[]);switch(a[1]){case 0:throw new p("assert");case 1:var d=a[2];return G.makeWhere(b)+"Missing "+G.makeRule(d);
case 2:return d=a[2],G.makeWhere(b)+"Unexpected "+G.makeString(d);case 3:var d=a[3],c=a[2];return G.makeWhere(b)+G.makeString(d)+" while expected element "+c;case 4:return d=a[2],G.makeWhere(b)+G.makeString(d)+" while data expected";case 5:return d=a[2],b.push(a[3]),G.makeWhere(b)+"unexpected attribute "+d;case 6:return d=a[2],b.push(a[3]),G.makeWhere(b)+"missing required attribute "+d;case 7:return d=a[2],b.push(a[3]),G.makeWhere(b)+"invalid attribute value for "+d;case 8:return d=a[2],G.makeWhere(b)+
"invalid data format for "+G.makeString(d);case 9:return d=a[3],b.push(a[2]),G.makeError(d,b)}};G.checkNode=function(a,b){var d=G.checkList(C.iter([a]),b);if(d!=U.CMatch)throw new p(G.makeError(d));};var ce=function(a,b,d){this.layoutableEntity=a;this.layoutableInstanceType=b;this.layoutableInstance=d;this.children=[];this.visibleStartX=this.visibleStartY=this.x=this.y=this.width=this.height=0;this.visibleStartIndex=this.visibleEndIndex=this.numElementsCached=-1;this.tileWidthCached=this.tileHeightCached=
null;this.rowCount=this.columnCount=-1};j["tools.spark.framework.layout.containers.Group"]=ce;ce.__name__=!0;ce.prototype={update:function(){this.updateState("layout");this.updateState("includeInLayout");this.updateState("x");this.updateState("y");this.updateState("width");this.updateState("height");this.updateState("left");this.updateState("top");this.updateState("right");this.updateState("bottom");this.updateState("horizontalCenter");this.updateState("verticalCenter");if(null!=this.layout&&"Basic"!=
this.layout.layoutType){this.updateState("paddingLeft");this.updateState("paddingRight");this.updateState("paddingTop");this.updateState("paddingBottom");this.updateState("horizontalAlign");this.updateState("verticalAlign");("Horizontal"==this.layout.layoutType||"Vertical"==this.layout.layoutType)&&this.updateState("gap");if("Horizontal"==this.layout.layoutType||"Tile"==this.layout.layoutType)this.updateState("columnWidth"),this.updateState("requestedColumnCount");"Horizontal"==this.layout.layoutType&&
(this.updateState("requestedMaxColumnCount"),this.updateState("requestedMinColumnCount"),this.updateState("variableColumnWidth"));if("Vertical"==this.layout.layoutType||"Tile"==this.layout.layoutType)this.updateState("rowHeight"),this.updateState("requestedRowCount");"Vertical"==this.layout.layoutType&&(this.updateState("requestedMaxRowCount"),this.updateState("requestedMinRowCount"),this.updateState("variableRowHeight"));"Tile"==this.layout.layoutType&&(this.updateState("horizontalGap"),this.updateState("verticalGap"),
this.updateState("rowAlign"),this.updateState("columnAlign"),this.updateState("orientation"))}},updateState:function(a){switch(a){case "layout":this._updateLayout(this.layoutableEntity.getState(a));break;case "includeInLayout":this.includeInLayout=this.layoutableEntity.getState(a);break;case "x":(function(b){b=b.layoutableEntity.getState(a);return isNaN(b)})(this)||(this.x=this.layoutableEntity.getState(a));break;case "y":(function(b){b=b.layoutableEntity.getState(a);return isNaN(b)})(this)||(this.y=
this.layoutableEntity.getState(a));break;case "width":this._updateExplicitSize(this.layoutableEntity.getState(a),"width");break;case "height":this._updateExplicitSize(this.layoutableEntity.getState(a),"height");break;case "left":(function(b){b=b.layoutableEntity.getState(a);return isNaN(b)})(this)||(this.left=this.layoutableEntity.getState(a));break;case "top":(function(b){b=b.layoutableEntity.getState(a);return isNaN(b)})(this)||(this.top=this.layoutableEntity.getState(a));break;case "right":(function(b){b=
b.layoutableEntity.getState(a);return isNaN(b)})(this)||(this.right=this.layoutableEntity.getState(a));break;case "bottom":(function(b){b=b.layoutableEntity.getState(a);return isNaN(b)})(this)||(this.bottom=this.layoutableEntity.getState(a));break;case "horizontalCenter":(function(b){b=b.layoutableEntity.getState(a);return isNaN(b)})(this)||(this.horizontalCenter=this.layoutableEntity.getState(a));break;case "verticalCenter":(function(b){b=b.layoutableEntity.getState(a);return isNaN(b)})(this)||(this.verticalCenter=
this.layoutableEntity.getState(a));break;case "paddingLeft":this.paddingLeft=this.layoutableEntity.getState(a);break;case "paddingRight":this.paddingRight=this.layoutableEntity.getState(a);break;case "paddingTop":this.paddingTop=this.layoutableEntity.getState(a);break;case "paddingBottom":this.paddingBottom=this.layoutableEntity.getState(a);break;case "gap":this.gap=this.layoutableEntity.getState(a);break;case "horizontalAlign":var b=this.layoutableEntity.getState(a);"left"==b?this.horizontalAlign=
V.LEFT:"center"==b?this.horizontalAlign=V.CENTER:"right"==b?this.horizontalAlign=V.RIGHT:"justify"==b?this.horizontalAlign=V.JUSTIFY:"contentJustify"==b&&(this.horizontalAlign=V.CONTENT_JUSTIFY);break;case "verticalAlign":b=this.layoutableEntity.getState(a);"top"==b?this.verticalAlign=qa.TOP:"middle"==b?this.verticalAlign=qa.MIDDLE:"bottom"==b?this.verticalAlign=qa.BOTTOM:"justify"==b?this.verticalAlign=qa.JUSTIFY:"contentJustify"==b&&(this.verticalAlign=qa.CONTENT_JUSTIFY);break;case "columnWidth":b=
this.layoutableEntity.getState(a);this.columnWidth="calculated"==b?this.explicitColumnWidth=null:this.explicitColumnWidth=parseFloat(b);break;case "requestedColumnCount":this.requestedColumnCount=this.layoutableEntity.getState(a);break;case "requestedMaxColumnCount":this.requestedMaxColumnCount=this.layoutableEntity.getState(a);break;case "requestedMinColumnCount":this.requestedMinColumnCount=this.layoutableEntity.getState(a);break;case "variableColumnWidth":this.variableColumnWidth=this.layoutableEntity.getState(a);
break;case "rowHeight":b=this.layoutableEntity.getState(a);this.rowHeight="calculated"==b?this.explicitRowHeight=null:this.explicitRowHeight=parseFloat(b);break;case "requestedRowCount":this.requestedRowCount=this.layoutableEntity.getState(a);break;case "requestedMaxRowCount":this.requestedMaxRowCount=this.layoutableEntity.getState(a);break;case "requestedMinRowCount":this.requestedMinRowCount=this.layoutableEntity.getState(a);break;case "variableRowHeight":this.variableRowHeight=this.layoutableEntity.getState(a);
break;case "horizontalGap":this.horizontalGap=this.explicitHorizontalGap=this.layoutableEntity.getState(a);break;case "verticalGap":this.verticalGap=this.explicitVerticalGap=this.layoutableEntity.getState(a);break;case "rowAlign":b=this.layoutableEntity.getState(a);"top"==b?this.rowAlign=Bb.TOP:"justifyUsingHeight"==b?this.rowAlign=Bb.JUSTIFY_USING_HEIGHT:"justifyUsingGap"==b&&(this.rowAlign=Bb.JUSTIFY_USING_GAP);break;case "columnAlign":b=this.layoutableEntity.getState(a);"left"==b?this.columnAlign=
kc.LEFT:"justifyUsingWidth"==b?this.columnAlign=kc.JUSTIFY_USING_WIDTH:"justifyUsingGap"==b&&(this.columnAlign=kc.JUSTIFY_USING_GAP);break;case "orientation":b=this.layoutableEntity.getState(a),"rows"==b?this.orientation=Cc.ROWS:"columns"==b&&(this.orientation=Cc.COLUMNS)}},_updateLayout:function(a){"Basic"==a?null==this.layout?this.set_layout(new lc):this.layout.layoutType!=a&&this.set_layout(new lc):"Horizontal"==a?null==this.layout?this.set_layout(new Vb):this.layout.layoutType!=a&&this.set_layout(new Vb):
"Vertical"==a?null==this.layout?this.set_layout(new Za):this.layout.layoutType!=a&&this.set_layout(new Za):"Tile"==a&&(null==this.layout?this.set_layout(new Ye):this.layout.layoutType!=a&&this.set_layout(new Ye));this.layout.set_target(this)},_updateExplicitSize:function(a,b){var d=null,c=null;"Implicit"!=a&&(-1!=a.indexOf("%")?c=parseFloat(a):d=parseFloat(a));"width"==b?(this.explicitWidth=d,this.percentWidth=c):(this.explicitHeight=d,this.percentHeight=c)},set_layout:function(a){return this.layout==
a?this.layout:this.layout=a},measure:function(){this.layout.measure()},updateDisplayList:function(a,b){this.layout.updateDisplayList(a,b)},setActualSize:function(a,b){null!=this.explicitWidth?this.width=this.explicitWidth:null!=a&&0!=a?this.measuredWidth=this.width=a:0!=this.get_preferredWidth()&&(this.width=this.get_preferredWidth());null!=this.explicitHeight?this.height=this.explicitHeight:null!=b&&0!=b?this.measuredHeight=this.height=b:0!=this.get_preferredHeight()&&(this.height=this.get_preferredHeight())},
get_preferredWidth:function(){return null==this.explicitWidth?this.measuredWidth:this.explicitWidth},get_preferredHeight:function(){return null==this.explicitHeight?this.measuredHeight:this.explicitHeight},get_preferredMinWidth:function(){return null==this.explicitMinWidth?this.measuredMinWidth:this.explicitMinWidth},get_preferredMinHeight:function(){return null==this.explicitMinHeight?this.measuredMinHeight:this.explicitMinHeight},get_preferredMaxWidth:function(){return null==this.explicitMaxWidth?
this.measuredMaxWidth:this.explicitMaxWidth},get_preferredMaxHeight:function(){return null==this.explicitMaxHeight?this.measuredMaxHeight:this.explicitMaxHeight},__class__:ce,__properties__:{get_preferredMaxHeight:"get_preferredMaxHeight",get_preferredMaxWidth:"get_preferredMaxWidth",get_preferredMinHeight:"get_preferredMinHeight",get_preferredMinWidth:"get_preferredMinWidth",get_preferredHeight:"get_preferredHeight",get_preferredWidth:"get_preferredWidth",set_layout:"set_layout"}};var fg=function(){this.size=
0};j["tools.spark.framework.layout.helpers.ChildInfo"]=fg;fg.__name__=!0;fg.prototype={__class__:fg};var uj=function(){};j["tools.spark.framework.layout.helpers.LayoutHelper"]=uj;uj.__name__=!0;uj.flexChildrenProportionally=function(a,b,d,c){var f=c.length,i,o,h;do{i=0;o=!0;h=b-a*d/100;0<h?b-=h:h=0;for(var e=b/d,g=0;g<f;){var j=c[g],k=j.percent*e;if(k<j.min){o=j.min;j.size=o;c[g]=c[--f];c[f]=j;d-=j.percent;h>=o?h-=o:(b-=o-h,h=0);o=!1;break}else if(k>j.max){o=j.max;j.size=o;c[g]=c[--f];c[f]=j;d-=j.percent;
h>=o?h-=o:(b-=o-h,h=0);o=!1;break}else j.size=k,i+=k;g++}}while(!o);return Math.max(0,Math.floor(b+h-i))};var qh=function(){};j["tools.spark.framework.layout.helpers.SizesAndLimit"]=qh;qh.__name__=!0;qh.prototype={__class__:qh};var kc=j["tools.spark.framework.layout.interfaces.EColumnAlign"]={__ename__:!0,__constructs__:["JUSTIFY_USING_GAP","JUSTIFY_USING_WIDTH","LEFT"]};kc.JUSTIFY_USING_GAP=["JUSTIFY_USING_GAP",0];kc.JUSTIFY_USING_GAP.toString=g;kc.JUSTIFY_USING_GAP.__enum__=kc;kc.JUSTIFY_USING_WIDTH=
["JUSTIFY_USING_WIDTH",1];kc.JUSTIFY_USING_WIDTH.toString=g;kc.JUSTIFY_USING_WIDTH.__enum__=kc;kc.LEFT=["LEFT",2];kc.LEFT.toString=g;kc.LEFT.__enum__=kc;var V=j["tools.spark.framework.layout.interfaces.EHorizontalAlign"]={__ename__:!0,__constructs__:["LEFT","CENTER","RIGHT","JUSTIFY","CONTENT_JUSTIFY"]};V.LEFT=["LEFT",0];V.LEFT.toString=g;V.LEFT.__enum__=V;V.CENTER=["CENTER",1];V.CENTER.toString=g;V.CENTER.__enum__=V;V.RIGHT=["RIGHT",2];V.RIGHT.toString=g;V.RIGHT.__enum__=V;V.JUSTIFY=["JUSTIFY",3];
V.JUSTIFY.toString=g;V.JUSTIFY.__enum__=V;V.CONTENT_JUSTIFY=["CONTENT_JUSTIFY",4];V.CONTENT_JUSTIFY.toString=g;V.CONTENT_JUSTIFY.__enum__=V;var Bb=j["tools.spark.framework.layout.interfaces.ERowAlign"]={__ename__:!0,__constructs__:["JUSTIFY_USING_GAP","JUSTIFY_USING_HEIGHT","TOP"]};Bb.JUSTIFY_USING_GAP=["JUSTIFY_USING_GAP",0];Bb.JUSTIFY_USING_GAP.toString=g;Bb.JUSTIFY_USING_GAP.__enum__=Bb;Bb.JUSTIFY_USING_HEIGHT=["JUSTIFY_USING_HEIGHT",1];Bb.JUSTIFY_USING_HEIGHT.toString=g;Bb.JUSTIFY_USING_HEIGHT.__enum__=
Bb;Bb.TOP=["TOP",2];Bb.TOP.toString=g;Bb.TOP.__enum__=Bb;var Cc=j["tools.spark.framework.layout.interfaces.ETileOrientation"]={__ename__:!0,__constructs__:["COLUMNS","ROWS"]};Cc.COLUMNS=["COLUMNS",0];Cc.COLUMNS.toString=g;Cc.COLUMNS.__enum__=Cc;Cc.ROWS=["ROWS",1];Cc.ROWS.toString=g;Cc.ROWS.__enum__=Cc;var qa=j["tools.spark.framework.layout.interfaces.EVerticalAlign"]={__ename__:!0,__constructs__:["TOP","MIDDLE","BOTTOM","JUSTIFY","CONTENT_JUSTIFY"]};qa.TOP=["TOP",0];qa.TOP.toString=g;qa.TOP.__enum__=
qa;qa.MIDDLE=["MIDDLE",1];qa.MIDDLE.toString=g;qa.MIDDLE.__enum__=qa;qa.BOTTOM=["BOTTOM",2];qa.BOTTOM.toString=g;qa.BOTTOM.__enum__=qa;qa.JUSTIFY=["JUSTIFY",3];qa.JUSTIFY.toString=g;qa.JUSTIFY.__enum__=qa;qa.CONTENT_JUSTIFY=["CONTENT_JUSTIFY",4];qa.CONTENT_JUSTIFY.toString=g;qa.CONTENT_JUSTIFY.__enum__=qa;var Dc=function(){};j["tools.spark.framework.layout.layouts.ALayoutBase"]=Dc;Dc.__name__=!0;Dc.prototype={get_typicalLayoutElement:function(){null==this._typicalLayoutElement&&null!=this.target&&
0<this.target.children.length&&(this._typicalLayoutElement=this.target.children[0]);return this._typicalLayoutElement},set_target:function(a){return this.target==a?this.target:this.target=a},measure:function(){},updateDisplayList:function(){},__class__:Dc,__properties__:{get_typicalLayoutElement:"get_typicalLayoutElement",set_target:"set_target"}};var lc=function(){this.layoutType="Basic"};j["tools.spark.framework.layout.layouts.BasicLayout"]=lc;lc.__name__=!0;lc._constraintsDetermineWidth=function(a){return null!=
a.percentWidth||null!=a.left&&null!=a.right};lc._constraintsDetermineHeight=function(a){return null!=a.percentHeight||null!=a.top&&null!=a.bottom};lc._maxSizeToFitIn=function(a,b,d,c,f){return null!=b?a-2*Math.abs(b):null!=d?a-d:null!=c?a-c:a-f};lc.__super__=Dc;lc.prototype=z(Dc.prototype,{measure:function(){for(var a=0,b=0,d=0,c=0,f=0,i=this.target.children;f<i.length;){var o=i[f];++f;if(!(null==o||!1==o.includeInLayout)){var h,e;null!=o.left&&null!=o.right?h=o.left+o.right:null!=o.horizontalCenter?
h=2*Math.abs(o.horizontalCenter):null!=o.left||null!=o.right?(h=null==o.left?0:o.left,h=null==o.right?h+0:h+o.right):h=o.x;null!=o.top&&null!=o.bottom?e=o.top+o.bottom:null!=o.verticalCenter?e=2*Math.abs(o.verticalCenter):null!=o.top||null!=o.bottom?(e=null==o.top?0:o.top,e=null==o.bottom?e+0:e+o.bottom):e=o.y;var a=Math.max(a,h+o.get_preferredWidth()),b=Math.max(b,e+o.get_preferredHeight()),g;g=lc._constraintsDetermineWidth(o)?o.get_preferredMinWidth():o.get_preferredWidth();o=lc._constraintsDetermineHeight(o)?
o.get_preferredMinHeight():o.get_preferredHeight();d=Math.max(d,h+g);c=Math.max(c,e+o)}}this.target.measuredWidth=Math.ceil(Math.max(a,d));this.target.measuredHeight=Math.ceil(Math.max(b,c));this.target.measuredMinWidth=Math.ceil(d);this.target.measuredMinHeight=Math.ceil(c);this.target.measuredMaxWidth=999999;this.target.measuredMaxHeight=999999},updateDisplayList:function(a,b){for(var d=0,c=0,f=0,i=this.target.children;f<i.length;){var o=i[f];++f;if(!(null==o||!1==o.includeInLayout)){var h=null,
e=null,g=null,j=null;null!=o.percentWidth?(h=a,null!=o.left&&(h-=o.left),null!=o.right&&(h-=o.right),g=Math.round(h*Math.min(0.01*o.percentWidth,1)),h=Math.min(o.get_preferredMaxWidth(),lc._maxSizeToFitIn(a,o.horizontalCenter,o.left,o.right,o.x))):null!=o.left&&null!=o.right&&(g=a-o.right-o.left);null!=o.percentHeight?(e=b,null!=o.top&&(e-=o.top),null!=o.bottom&&(e-=o.bottom),j=Math.round(e*Math.min(0.01*o.percentHeight,1)),e=Math.min(o.get_preferredMaxHeight(),lc._maxSizeToFitIn(b,o.verticalCenter,
o.top,o.bottom,o.y))):null!=o.top&&null!=o.bottom&&(j=b-o.bottom-o.top);null!=g&&(null==h&&(h=o.get_preferredMaxWidth()),g=Math.max(o.get_preferredMinWidth(),Math.min(h,g)));null!=j&&(null==e&&(e=o.get_preferredMaxHeight()),j=Math.max(o.get_preferredMinHeight(),Math.min(e,j)));o.setActualSize(g,j);h=o.width;e=o.height;j=g=null;g=null!=o.horizontalCenter?Math.round((a-h)/2+o.horizontalCenter):null!=o.left?o.left:null!=o.right?a-h-o.right:o.x;j=null!=o.verticalCenter?Math.round((b-e)/2+o.verticalCenter):
null!=o.top?o.top:null!=o.bottom?b-e-o.bottom:o.y;o.x=g;o.y=j;d=Math.max(d,g+h);c=Math.max(c,j+e)}}this.target.width=Math.ceil(a);this.target.height=Math.ceil(b)},__class__:lc});var Vb=function(){this.layoutType="Horizontal"};j["tools.spark.framework.layout.layouts.HorizontalLayout"]=Vb;Vb.__name__=!0;Vb._pinBetween=function(a,b,d){return Math.min(d,Math.max(b,a))};Vb._calculatePercentHeight=function(a,b){return Vb._pinBetween(Math.min(Math.round(0.01*a.percentHeight*b),b),a.get_preferredMinHeight(),
a.get_preferredMaxHeight())};Vb._sizeLayoutElement=function(a,b,d,c,f,i,o){var h=null;d==qa.JUSTIFY||d==qa.CONTENT_JUSTIFY?h=c:null!=a.percentHeight&&(h=Vb._calculatePercentHeight(a,b));i?a.setActualSize(f,h):a.setActualSize(o,h)};Vb.__super__=Dc;Vb.prototype=z(Dc.prototype,{_getColumsToMeasure:function(a){-1!=this.target.requestedColumnCount?a=this.target.requestedColumnCount:(-1!=this.target.requestedMaxColumnCount&&(a=r["int"](Math.min(this.target.requestedMaxColumnCount,a))),-1!=this.target.requestedMinColumnCount&&
(a=r["int"](Math.max(this.target.requestedMinColumnCount,a))));return a},_getElementWidth:function(a,b,d){b=null==b?Math.ceil(a.get_preferredWidth()):b;a=null!=a.percentWidth?Math.ceil(a.get_preferredMinWidth()):b;d.preferredSize=b;d.minSize=a},_getElementHeight:function(a,b,d){var c=Math.ceil(a.get_preferredHeight()),a=null!=a.percentHeight||b?Math.ceil(a.get_preferredMinHeight()):c;d.preferredSize=c;d.minSize=a},_distributeWidth:function(a,b,d){var c=a,f=0,i=[],o,h;h=this.target.variableColumnWidth?
0:Math.ceil(this.target.columnWidth);for(var e=this.target.children.length,g=0,j=this.target.children;g<j.length;){var k=j[g];++g;null==k||!1==k.includeInLayout?e--:null!=k.percentWidth&&this.target.variableColumnWidth?(f+=k.percentWidth,o=new fg,o.layoutElement=k,o.percent=k.percentWidth,o.min=k.get_preferredMinWidth(),o.max=k.get_preferredMaxWidth(),i.push(o)):(Vb._sizeLayoutElement(k,b,this.target.verticalAlign,d,null,this.target.variableColumnWidth,h),c-=Math.ceil(k.width))}1<e&&(c-=(e-1)*this.target.gap);
if(0!=f){uj.flexChildrenProportionally(a,c,f,i);for(f=a=0;f<i.length;)o=i[f],++f,e=Math.round(o.size+a),a+=o.size-e,Vb._sizeLayoutElement(o.layoutElement,b,this.target.verticalAlign,d,e,this.target.variableColumnWidth,h),c-=e}return c},measure:function(){var a=new qh,b=this.target.verticalAlign==qa.JUSTIFY,d=this.target.children.length,c=0,f=0,i=0,o=0,h=0,e=null;this.target.variableColumnWidth||(e=null==this.target.columnWidth?this.get_typicalLayoutElement().get_preferredWidth():this.target.columnWidth);
for(var g=this._getColumsToMeasure(d),j=0,k=this.target.children;j<k.length;){var l=k[j];++j;null==l||!1==l.includeInLayout?d--:(this._getElementHeight(l,b,a),f=Math.max(f,a.preferredSize),o=Math.max(o,a.minSize),c<g&&(this._getElementWidth(l,e,a),i+=a.preferredSize,h+=a.minSize,c++))}g=this._getColumsToMeasure(d);c<g&&(d=this.get_typicalLayoutElement(),null!=d&&(this._getElementHeight(d,b,a),f=Math.max(f,a.preferredSize),o=Math.max(o,a.minSize),this._getElementWidth(d,e,a),i+=a.preferredSize*(g-
c),h+=a.minSize*(g-c),c=g));1<c&&(a=this.target.gap*(c-1),i+=a,h+=a);a=this.target.paddingLeft+this.target.paddingRight;b=this.target.paddingTop+this.target.paddingBottom;this.target.measuredHeight=Math.ceil(f+b);this.target.measuredWidth=Math.ceil(i+a);this.target.measuredMinHeight=Math.ceil(o+b);this.target.measuredMinWidth=Math.ceil(h+a);this.target.measuredMaxWidth=999999;this.target.measuredMaxHeight=999999},updateDisplayList:function(a,b){if(0==this.target.children.length||0==a||0==b)0==this.target.children.length&&
(this.target.width=Math.ceil(this.target.paddingLeft+this.target.paddingRight),this.target.height=Math.ceil(this.target.paddingTop+this.target.paddingBottom));else{var d=Math.max(0,this.target.width-this.target.paddingLeft-this.target.paddingRight),c=Math.max(0,this.target.height-this.target.paddingTop-this.target.paddingBottom),f=c;if(this.target.verticalAlign==qa.CONTENT_JUSTIFY)for(var i=0,o=this.target.children;i<o.length;){var h=o[i];++i;null==h||!1==h.includeInLayout||(h=null!=h.percentHeight?
Vb._calculatePercentHeight(h,c):h.get_preferredHeight(),f=Math.max(f,Math.ceil(h)))}var e=this._distributeWidth(d,c,f),d=0;this.target.verticalAlign==qa.MIDDLE?d=0.5:this.target.verticalAlign==qa.BOTTOM&&(d=1);var c=this.target.paddingLeft,i=this.target.paddingTop,o=this.target.paddingLeft,h=this.target.paddingTop,g=this.target.horizontalAlign;g==V.CENTER?c=this.target.paddingLeft+Math.round(e/2):g==V.RIGHT&&(c=this.target.paddingLeft+e);e=0;for(g=this.target.children;e<g.length;){var j=g[e];++e;
if(!(null==j||!1==j.includeInLayout)){var k=Math.ceil(j.width),l=Math.ceil(j.height),n;n=i+(f-l)*d;0.5==d&&(n=Math.round(n));j.x=c;j.y=n;o=Math.max(o,c+k);h=Math.max(h,n+l);c+=k+this.target.gap}}this.target.width=Math.ceil(a);this.target.height=Math.ceil(b)}},__class__:Vb});var Ye=function(){this.layoutType="Tile"};j["tools.spark.framework.layout.layouts.TileLayout"]=Ye;Ye.__name__=!0;Ye.__super__=Dc;Ye.prototype=z(Dc.prototype,{_closerToSquare:function(a,b,d,c){a=Math.abs(a*(this.target.columnWidth+
this.target.horizontalGap)-this.target.horizontalGap-b*(this.target.rowHeight+this.target.verticalGap)+this.target.verticalGap);d=Math.abs(d*(this.target.columnWidth+this.target.horizontalGap)-this.target.horizontalGap-c*(this.target.rowHeight+this.target.verticalGap)+this.target.verticalGap);return a<d||a==d&&b<=c},_calculateColumnAndRowCount:function(a,b,d){this.target.columnCount=this.target.rowCount=-1;0>=a&&(a=null);0>=b&&(b=null);if(-1!=this.target.requestedColumnCount||-1!=this.target.requestedRowCount)-1!=
this.target.requestedRowCount&&(this.target.rowCount=r["int"](Math.max(1,this.target.requestedRowCount))),-1!=this.target.requestedColumnCount&&(this.target.columnCount=r["int"](Math.max(1,this.target.requestedColumnCount)));else if(null!=a&&(this.target.orientation==Cc.ROWS||null==b))this.target.columnCount=0<this.target.columnWidth+this.target.explicitHorizontalGap?r["int"](Math.max(1,Math.floor((a+this.target.explicitHorizontalGap)/(this.target.columnWidth+this.target.explicitHorizontalGap)))):
1;else if(null!=b&&(this.target.orientation==Cc.COLUMNS||null==a))this.target.rowCount=0<this.target.rowHeight+this.target.explicitVerticalGap?r["int"](Math.max(1,Math.floor((b+this.target.explicitVerticalGap)/(this.target.rowHeight+this.target.explicitVerticalGap)))):1;else{var b=this.target.explicitHorizontalGap,c=this.target.explicitVerticalGap,a=Math.max(0,this.target.rowHeight+c),c=b-c,b=c*c-4*a*-d*(this.target.columnWidth+b),b=Math.sqrt(b),f;f=0!=a?(c+b)/(2*a):d;var a=r["int"](Math.max(1,Math.floor(f))),
b=r["int"](Math.max(1,Math.ceil(d/a))),a=r["int"](Math.max(1,Math.ceil(d/b))),c=r["int"](Math.max(1,Math.ceil(f))),i=r["int"](Math.max(1,Math.ceil(d/c))),c=r["int"](Math.max(1,Math.ceil(d/i))),o=r["int"](Math.max(1,Math.floor(d/f))),h=r["int"](Math.max(1,Math.ceil(d/o))),o=r["int"](Math.max(1,Math.ceil(d/h)));f=r["int"](Math.max(1,Math.ceil(d/f)));var e=r["int"](Math.max(1,Math.ceil(d/f)));f=r["int"](Math.max(1,Math.ceil(d/e)));this._closerToSquare(o,h,b,a)&&(b=o,a=h);this._closerToSquare(f,e,i,c)&&
(i=f,c=e);this._closerToSquare(b,a,i,c)?(this.target.columnCount=b,this.target.rowCount=a):(this.target.columnCount=i,this.target.rowCount=c)}-1==this.target.rowCount&&(this.target.rowCount=r["int"](Math.max(1,Math.ceil(d/this.target.columnCount))));-1==this.target.columnCount&&(this.target.columnCount=r["int"](Math.max(1,Math.ceil(d/this.target.rowCount))))},_justifyByGapSize:function(a,b,d,c){if(0>=b+d)return d;var f=r["int"](Math.min(c,Math.floor((a+d)/(b+d))));return 1>f?d:1==f?1<c?Math.max(d,
a-b):d:(a-f*b)/(f-1)},_justifyByElementSize:function(a,b,d,c){var f=b+d,i=0,i=0==f?c:r["int"](Math.min(c,Math.floor((a+d)/f)));return 1>i?b:(a-(i-1)*d)/i},_calculateElementCount:function(){if(-1!=this.target.numElementsCached)return this.target.numElementsCached;this.target.numElementsCached=this.target.children.length;for(var a=0,b=this.target.children;a<b.length;){var d=b[a];++a;(null==d||!1==d.includeInLayout)&&this.target.numElementsCached--}return this.target.numElementsCached},_calculateTileSize:function(){this.target.columnWidth=
this.target.tileWidthCached;this.target.rowHeight=this.target.tileHeightCached;if(!(null!=this.target.columnWidth&&null!=this.target.rowHeight)&&(this.target.columnWidth=this.target.tileWidthCached=this.target.explicitColumnWidth,this.target.rowHeight=this.target.tileHeightCached=this.target.explicitRowHeight,!(null!=this.target.columnWidth&&null!=this.target.rowHeight))){var a=0,b=0;this.target.numElementsCached=this.target.children.length;for(var d=0,c=this.target.children;d<c.length;){var f=c[d];
++d;null==f||!1==f.includeInLayout?this.target.numElementsCached--:(null==this.target.columnWidth&&(a=Math.max(a,f.get_preferredWidth())),null==this.target.rowHeight&&(b=Math.max(b,f.get_preferredHeight())))}null==this.target.columnWidth&&(this.target.columnWidth=this.target.tileWidthCached=a);null==this.target.rowHeight&&(this.target.rowHeight=this.target.tileHeightCached=b)}},_updateActualValues:function(a,b){var d=a-this.target.paddingLeft-this.target.paddingRight,c=b-this.target.paddingTop-this.target.paddingBottom;
this._calculateTileSize();var f=this._calculateElementCount();this._calculateColumnAndRowCount(d,c,f);this.target.horizontalGap=this.target.explicitHorizontalGap;this.target.verticalGap=this.target.explicitVerticalGap;if(null!=this.target.width)switch(this.target.columnAlign[1]){case 0:this.target.horizontalGap=this._justifyByGapSize(d,this.target.columnWidth,this.target.horizontalGap,this.target.columnCount);break;case 1:this.target.columnWidth=this._justifyByElementSize(d,this.target.columnWidth,
this.target.horizontalGap,this.target.columnCount)}if(null!=this.target.height)switch(this.target.rowAlign[1]){case 0:this.target.verticalGap=this._justifyByGapSize(c,this.target.rowHeight,this.target.verticalGap,this.target.rowCount);break;case 1:this.target.rowHeight=this._justifyByElementSize(c,this.target.rowHeight,this.target.verticalGap,this.target.rowCount)}-1!=this.target.requestedColumnCount&&-1!=this.target.requestedRowCount&&(this.target.orientation==Cc.ROWS?this.target.rowCount=r["int"](Math.max(1,
Math.ceil(f/Math.max(1,this.target.requestedColumnCount)))):this.target.columnCount=r["int"](Math.max(1,Math.ceil(f/Math.max(1,this.target.requestedRowCount)))))},_calculateDisplayParameters:function(a,b){this._updateActualValues(a,b);var d=this.target.children.length;this.target.visibleStartX=this.target.paddingLeft;this.target.visibleStartY=this.target.paddingTop;this.target.visibleStartIndex=0;this.target.visibleEndIndex=d-1},_sizeAndPositionElement:function(a,b,d,c,f){var i=null,o=null,i=this.target.horizontalAlign==
V.JUSTIFY?c:null!=a.percentWidth?Math.round(0.01*c*a.percentWidth):a.get_preferredWidth(),o=this.target.verticalAlign==qa.JUSTIFY?f:null!=a.percentHeight?Math.round(0.01*f*a.percentHeight):a.get_preferredHeight(),h=Math.min(a.get_preferredMaxWidth(),c),e=Math.min(a.get_preferredMaxHeight(),f),i=Math.max(a.get_preferredMinWidth(),Math.min(h,i)),o=Math.max(a.get_preferredMinHeight(),Math.min(e,o));a.setActualSize(i,o);i=b;switch(this.target.horizontalAlign[1]){case 2:i+=c-a.width;break;case 1:i=b+Math.floor((c-
a.width)/2)}b=d;switch(this.target.verticalAlign[1]){case 2:b+=f-a.height;break;case 1:b+=Math.floor((f-a.height)/2)}a.x=i;a.y=b},measure:function(){var a=this.target.columnCount,b=this.target.rowCount,d=this.target.horizontalGap,c=this.target.verticalGap,f=this.target.columnWidth,i=this.target.rowHeight;this._updateActualValues(this.target.explicitWidth,this.target.explicitHeight);var o;o=-1!=this.target.requestedColumnCount?r["int"](Math.max(1,this.target.requestedColumnCount)):this.target.columnCount;
var h;h=-1!=this.target.requestedRowCount?r["int"](Math.max(1,this.target.requestedRowCount)):this.target.rowCount;var e=0,g=0,j=0,k=0;0<o&&(e=Math.ceil(o*(this.target.columnWidth+this.target.horizontalGap)-this.target.horizontalGap),g=Math.ceil(this.target.columnCount*(this.target.columnWidth+this.target.horizontalGap)-this.target.horizontalGap));0<h&&(j=Math.ceil(h*(this.target.rowHeight+this.target.verticalGap)-this.target.verticalGap),k=Math.ceil(this.target.rowCount*(this.target.rowHeight+this.target.verticalGap)-
this.target.verticalGap));this.target.numElementsCached=-1;o=this.target.paddingLeft+this.target.paddingRight;h=this.target.paddingTop+this.target.paddingBottom;this.target.measuredWidth=e+o;this.target.measuredMinWidth=g+o;this.target.measuredHeight=j+h;this.target.measuredMinHeight=k+h;this.target.measuredMaxWidth=999999;this.target.measuredMaxHeight=999999;this.target.columnCount=a;this.target.rowCount=b;this.target.horizontalGap=d;this.target.verticalGap=c;this.target.columnWidth=f;this.target.rowHeight=
i},updateDisplayList:function(a,b){this._calculateDisplayParameters(a|0,b|0);var d=this.target.visibleStartX,c=this.target.visibleStartY,f,i,o,h,e=0,g;this.target.orientation==Cc.ROWS?(g=this.target.columnCount,f=this.target.columnWidth+this.target.horizontalGap,i=o=0,h=this.target.rowHeight+this.target.verticalGap):(g=this.target.rowCount,f=0,o=this.target.columnWidth+this.target.horizontalGap,i=this.target.rowHeight+this.target.verticalGap,h=0);for(var j=0,k=this.target.children;j<k.length;){var l=
k[j];++j;if(!(null==l||!1==l.includeInLayout)){var n=Math.round(d),p=Math.round(c),q=Math.round(d+this.target.columnWidth)-n,t=Math.round(c+this.target.rowHeight)-p;this._sizeAndPositionElement(l,n,p,q,t);d+=f;c+=i;++e>=g&&(e=0,this.target.orientation==Cc.ROWS?(d=this.target.paddingLeft,c+=h):(d+=o,c=this.target.paddingTop))}}this.target.width=Math.ceil(a);this.target.height=Math.ceil(b);this.target.tileWidthCached=this.target.tileHeightCached=null;this.target.numElementsCached=-1},__class__:Ye});
var Za=function(){this.layoutType="Vertical"};j["tools.spark.framework.layout.layouts.VerticalLayout"]=Za;Za.__name__=!0;Za._pinBetween=function(a,b,d){return Math.min(d,Math.max(b,a))};Za._calculatePercentWidth=function(a,b){return Za._pinBetween(Math.min(Math.round(0.01*a.percentWidth*b),b),a.get_preferredMinWidth(),a.get_preferredMaxWidth())};Za._sizeLayoutElement=function(a,b,d,c,f,i,o){var h=null;d==V.JUSTIFY||d==V.CONTENT_JUSTIFY?h=c:null!=a.percentWidth&&(h=Za._calculatePercentWidth(a,b));
i?a.setActualSize(h,f):a.setActualSize(h,o)};Za.__super__=Dc;Za.prototype=z(Dc.prototype,{_getRowsToMeasure:function(a){-1!=this.target.requestedRowCount?a=this.target.requestedRowCount:(-1!=this.target.requestedMaxRowCount&&(a=r["int"](Math.min(this.target.requestedMaxRowCount,a))),-1!=this.target.requestedMinRowCount&&(a=r["int"](Math.max(this.target.requestedMinRowCount,a))));return a},_getElementWidth:function(a,b,d){var c=Math.ceil(a.get_preferredWidth()),a=null!=a.percentWidth||b?Math.ceil(a.get_preferredMinWidth()):
c;d.preferredSize=c;d.minSize=a},_getElementHeight:function(a,b,d){b=null==b?Math.ceil(a.get_preferredHeight()):b;a=null!=a.percentHeight?Math.ceil(a.get_preferredMinHeight()):b;d.preferredSize=b;d.minSize=a},_distributeHeight:function(a,b,d){var c=b,f=0,i=[],o,h;h=this.target.variableRowHeight?0:Math.ceil(this.target.rowHeight);for(var e=this.target.children.length,g=0,j=this.target.children;g<j.length;){var k=j[g];++g;null==k||!1==k.includeInLayout?e--:null!=k.percentHeight&&this.target.variableRowHeight?
(f+=k.percentHeight,o=new fg,o.layoutElement=k,o.percent=k.percentHeight,o.min=k.get_preferredMinHeight(),o.max=k.get_preferredMaxHeight(),i.push(o)):(Za._sizeLayoutElement(k,a,this.target.horizontalAlign,d,null,this.target.variableRowHeight,h),c-=Math.ceil(k.height))}1<e&&(c-=(e-1)*this.target.gap);if(0!=f){uj.flexChildrenProportionally(b,c,f,i);for(f=b=0;f<i.length;)o=i[f],++f,e=Math.round(o.size+b),b+=o.size-e,Za._sizeLayoutElement(o.layoutElement,a,this.target.horizontalAlign,d,e,this.target.variableRowHeight,
h),c-=e}return c},measure:function(){var a=new qh,b=this.target.horizontalAlign==V.JUSTIFY,d=this.target.children.length,c=0,f=0,i=0,o=0,h=0,e=null;this.target.variableRowHeight||(e=null==this.target.rowHeight?this.get_typicalLayoutElement().get_preferredHeight():this.target.rowHeight);for(var g=this._getRowsToMeasure(d),j=0,k=this.target.children;j<k.length;){var l=k[j];++j;null==l||!1==l.includeInLayout?d--:(c<g&&(this._getElementHeight(l,e,a),f+=a.preferredSize,o+=a.minSize,c++),this._getElementWidth(l,
b,a),i=Math.max(i,a.preferredSize),h=Math.max(h,a.minSize))}g=this._getRowsToMeasure(d);c<g&&(d=this.get_typicalLayoutElement(),null!=d&&(this._getElementHeight(d,e,a),f+=a.preferredSize*(g-c),o+=a.minSize*(g-c),this._getElementWidth(d,b,a),i=Math.max(i,a.preferredSize),h=Math.max(h,a.minSize),c=g));1<c&&(a=this.target.gap*(c-1),f+=a,o+=a);a=this.target.paddingLeft+this.target.paddingRight;b=this.target.paddingTop+this.target.paddingBottom;this.target.measuredHeight=Math.ceil(f+b);this.target.measuredWidth=
Math.ceil(i+a);this.target.measuredMinHeight=Math.ceil(o+b);this.target.measuredMinWidth=Math.ceil(h+a);this.target.measuredMaxWidth=999999;this.target.measuredMaxHeight=999999},updateDisplayList:function(a,b){if(0==this.target.children.length||0==a||0==b)0==this.target.children.length&&(this.target.width=Math.ceil(this.target.paddingLeft+this.target.paddingRight),this.target.height=Math.ceil(this.target.paddingTop+this.target.paddingBottom));else{var d=Math.max(0,this.target.width-this.target.paddingLeft-
this.target.paddingRight),c=Math.max(0,this.target.height-this.target.paddingTop-this.target.paddingBottom),f=d;if(this.target.horizontalAlign==V.CONTENT_JUSTIFY)for(var i=0,h=this.target.children;i<h.length;){var e=h[i];++i;null==e||!1==e.includeInLayout||(e=null!=e.percentWidth?Za._calculatePercentWidth(e,d):e.get_preferredWidth(),f=Math.max(f,Math.ceil(e)))}var g=this._distributeHeight(d,c,f),d=0;this.target.horizontalAlign==V.CENTER?d=0.5:this.target.horizontalAlign==V.RIGHT&&(d=1);var c=this.target.paddingLeft,
i=this.target.paddingTop,h=this.target.paddingLeft,e=this.target.paddingTop,j=this.target.verticalAlign;j==qa.MIDDLE?i=this.target.paddingTop+Math.round(g/2):j==qa.BOTTOM&&(i=this.target.paddingTop+g);g=0;for(j=this.target.children;g<j.length;){var k=j[g];++g;if(!(null==k||!1==k.includeInLayout)){var l=Math.ceil(k.width),n=Math.ceil(k.height),p=c+(f-l)*d;0.5==d&&(p=Math.round(p));k.x=p;k.y=i;h=Math.max(h,p+l);e=Math.max(e,i+n);i+=n+this.target.gap}}this.target.width=Math.ceil(a);this.target.height=
Math.ceil(b)}},__class__:Za});var vj=function(a){this.rootLayoutElement=a;this.validated=!1};j["tools.spark.framework.layout.managers.LayoutManager"]=vj;vj.__name__=!0;vj.prototype={validate:function(){this.validated||(w.logger.error("VALIDATING LAYOUT...",null),this.measure(this.rootLayoutElement),this.updateDisplayList(this.rootLayoutElement),this.updateRealObjects(this.rootLayoutElement),this.validated=!0)},getViewGroupByGameEntity:function(a,b){null==b&&(b=this.rootLayoutElement);if(b.layoutableEntity==
a)return b;for(var d=0,c=b.children;d<c.length;){var f=c[d];++d;if("Entity"!=f.layoutableInstanceType&&(f=this.getViewGroupByGameEntity(a,f),null!=f))return f}return null},updateRealObjects:function(a,b,d,c){null==d&&(d=0);null==b&&(b=0);if("View"==a.layoutableInstanceType)if("3D"==a.layoutableEntity.getState("renderer")){var f=a.layoutableInstance;f.x=a.x+b;f.y=a.y+d;f.width=a.width;f.height=a.height}else c=a.layoutableInstance,c.setPosSize(a.x+b,a.y+d,a.width,a.height);else"Entity"==a.layoutableInstanceType&&
a.layoutableInstance.setPosSize(a.x,a.y,a.width,a.height,c);for(var f=0,i=a.children;f<i.length;){var h=i[f];++f;this.updateRealObjects(h,a.x+b,a.y+d,c)}},measure:function(a){for(var b=0,d=a.children;b<d.length;){var c=d[b];++b;this.measure(c)}a.measure()},updateDisplayList:function(a){a.updateDisplayList(a.get_preferredWidth(),a.get_preferredHeight());for(var b=0,a=a.children;b<a.length;){var d=a[b];++b;this.updateDisplayList(d)}},__class__:vj};var Wf=function(){};j["tools.spark.framework.platform.html.Graphics"]=
Wf;Wf.__name__=!0;Wf.init=function(){Lc.init()};Wf.createDisplayRenderers=function(){Lc.createDisplayRenderers();var a=new gg;B.display.platformRendererSet.set("NativeControls",a);a};var Lc=function(){};j["tools.spark.framework.platform.html.flambe2_5.Subgraphics"]=Lc;Lc.__name__=!0;Lc.createDisplayRenderers=function(){var a=new Ze;B.display.platformRendererSet.set("2D",a);a};Lc.init=function(){Lc._flambeDisplaySystem=Xb.instance.getRenderer()};Lc.onRender=function(){Lc._flambeDisplaySystem.willRender();
if(null!=B.display&&null!=B.display.projectActiveSpaceReference&&null!=B.display.projectActiveSpaceReference.activeStageReference)for(var a=0,b=B.display.projectActiveSpaceReference.activeStageReference.activeViewReferences;a<b.length;){var d=b[a];++a;d.renderer.renderView(d.viewEntity)}Lc._flambeDisplaySystem.didRender()};var pe=function(){};j["tools.spark.sliced.interfaces.IService"]=pe;pe.__name__=!0;var Ma=function(){};j["tools.spark.sliced.core.AService"]=Ma;Ma.__name__=!0;Ma.__interfaces__=
[pe];Ma.prototype={__class__:Ma};var Yk=function(){};j["tools.spark.sliced.interfaces.IServiceFactory"]=Yk;Yk.__name__=!0;var hg=function(){this._init()};j["tools.spark.sliced.core.ServiceFactory"]=hg;hg.__name__=!0;hg.__interfaces__=[Yk];hg.prototype={_init:function(){this._createServices()},_createServices:function(){var a=this._reflectService(n.SOUND_SERVICE),b=this._reflectService(n.LOGIC_SERVICE),d=this._reflectService(n.INPUT_SERVICE),c=this._reflectService(n.COMMUNICATIONS_SERVICE),f=this._reflectService(n.EVENT_SERVICE),
i=this._reflectService(n.DISPLAY_SERVICE);B.assignServices(a,b,d,c,f,i);B.logic.createInterpreters()},_reflectService:function(a){a=M.sliced.get(a);return Ua.createInstance(Ua.resolveClass(a),[])},__class__:hg};var B=function(){};j["tools.spark.sliced.core.Sliced"]=B;B.__name__=!0;B.init=function(){new hg};B.assignServices=function(a,b,d,c,f,i){w.logger.info("Init Core (S.L.I.C.E.D.)...",null);B.sound=a;B.logic=b;B.input=d;B.comms=c;B.event=f;B.display=i};var rh=function(){};j["tools.spark.sliced.interfaces.IComms"]=
rh;rh.__name__=!0;rh.__interfaces__=[pe];rh.prototype={__class__:rh};var ig=function(){};j["tools.spark.sliced.interfaces.IDisplay"]=ig;ig.__name__=!0;ig.__interfaces__=[pe];ig.prototype={__class__:ig};var sh=function(){};j["tools.spark.sliced.interfaces.IEvent"]=sh;sh.__name__=!0;sh.__interfaces__=[pe];sh.prototype={__class__:sh};var jg=function(){};j["tools.spark.sliced.interfaces.IInput"]=jg;jg.__name__=!0;jg.__interfaces__=[pe];jg.prototype={__class__:jg};var th=function(){};j["tools.spark.sliced.interfaces.ILogic"]=
th;th.__name__=!0;th.__interfaces__=[pe];th.prototype={__class__:th};var Ck=function(){};j["tools.spark.sliced.interfaces.ISound"]=Ck;Ck.__name__=!0;Ck.__interfaces__=[pe];var kg=function(){this._init()};j["tools.spark.sliced.services.std.comms.core.Comms"]=kg;kg.__name__=!0;kg.__interfaces__=[rh];kg.__super__=Ma;kg.prototype=z(Ma.prototype,{_init:function(){w.logger.info("Init Comms std Service...",null);this._socket=new uh;this._requestsData=new E;this._serverEventsData=new E;this.isConnected=!1;
this._file_requestsData=new E;this.file_isConnected=!1},update:function(){this._requestsData=new E;this._serverEventsData=new E;this._file_requestsData=new E},getRequestData:function(a){return this._requestsData.get(a)},getServerEventData:function(a){return this._serverEventsData.get(a)},connectTo:function(a,b,d){var c=this;null==d&&(d=a+":"+b);this._socket.init(a,b,null,function(){c.isConnected=!0;c.connectedServerName=d;B.event.raiseEvent(k.NETWORK_CONNECTED)})},request:function(a,b,d){var c=this;
null==d&&(d=a);this._socket.request(a,b,function(a){c._requestsData.set(d,a);a;B.event.raiseEvent(k.NETWORK_REQUEST)})},disconnect:function(){this._socket.disconnect();this.isConnected=!1;this.connectedServerName=null},addServerEvent:function(a,b){var d=this;null==b&&(b=a);this._socket.on(a,function(a){d._serverEventsData.set(b,a);a;B.event.raiseEvent(k.NETWORK_SERVER_EVENT)})},file_connectTo:function(a,b,d){var c=this;this.file_isConnected?w.logger.warn("Attempting to connect to file server: File Transfer already connected. Disconnect first.",
null):(null==d&&(d=a+":"+b),this._fileTransfer=new lg("ws://"+a+":"+b),this._fileTransfer.onConnected(function(){c.file_isConnected=!0;c.file_connectedServerName=d;B.event.raiseEvent(k.FILETRANSFER_CONNECTED)}))},file_getSendFileRequestData:function(a){return this._file_requestsData.get(a)},file_disconnect:function(){this._fileTransfer.disconnect();this.file_isConnected=!1;this.file_connectedServerName=this._fileTransfer=null},file_sendFileRequest:function(a,b,d){var c=this;if(this.file_isConnected){null==
d&&(d=b.name);var f=0;this._fileTransfer.sendFile(a,b,function(a){f+=a.length;a.progress=f/b.size;a.progressPercent=Math.round(100*(f/b.size));c._file_requestsData.set(d,a);a;B.event.raiseEvent(k.FILETRANSFER_SENDREQUEST)})}else w.logger.warn("Attempting to send a file: File Transfer is not connected.",null)},__class__:kg});var wj=function(){};j["tools.spark.sliced.services.std.comms.filetransfer.interfaces.IFileTransfer"]=wj;wj.__name__=!0;wj.prototype={__class__:wj};var lg=function(a){this._binaryJs=
new BinaryClient(a)};j["tools.spark.sliced.services.std.comms.filetransfer.core.platform.html5.websocket.binaryjs.FileTransfer"]=lg;lg.__name__=!0;lg.__interfaces__=[wj];lg.prototype={onConnected:function(a){this._binaryJs.on("open",a)},disconnect:function(){this._binaryJs.close();this._binaryJs=null},sendFile:function(a,b,d){this._binaryJs.send(a,b).on("data",d)},__class__:lg};var xj=function(){};j["tools.spark.sliced.services.std.comms.sockets.interfaces.ISocket"]=xj;xj.__name__=!0;xj.prototype=
{__class__:xj};var uh=function(){};j["tools.spark.sliced.services.std.comms.sockets.core.pomelo.platform.html5.websocket.Socket"]=uh;uh.__name__=!0;uh.__interfaces__=[xj];uh.prototype={init:function(a,b,d,c){null==d&&(d=!1);window.pomelo.init({host:a,port:b,log:d},c)},request:function(a,b,d){window.pomelo.request(a,b,d)},on:function(a,b){window.pomelo.on(a,b)},disconnect:function(){window.pomelo.disconnect()},__class__:uh};var yj=function(){};j["tools.spark.sliced.services.std.display.active_displayentity_references.interfaces.IActiveSpaceReference"]=
yj;yj.__name__=!0;yj.prototype={__class__:yj};var qe=function(a){this.spaceEntity=a};j["tools.spark.sliced.services.std.display.active_displayentity_references.core.ActiveSpaceReference"]=qe;qe.__name__=!0;qe.__interfaces__=[yj];qe.prototype={__class__:qe};var mg=function(){};j["tools.spark.sliced.services.std.display.active_displayentity_references.interfaces.IActiveStageAreaReference"]=mg;mg.__name__=!0;mg.prototype={__class__:mg};var $e=function(a){this.stageAreaEntity=a;this.layoutElement=new ce(this.stageAreaEntity,
"StageArea",this)};j["tools.spark.sliced.services.std.display.active_displayentity_references.core.ActiveStageAreaReference"]=$e;$e.__name__=!0;$e.__interfaces__=[mg];$e.prototype={__class__:$e};var ng=function(){};j["tools.spark.sliced.services.std.display.active_displayentity_references.interfaces.IActiveStageReference"]=ng;ng.__name__=!0;ng.prototype={__class__:ng};var af=function(a){this.stageEntity=a;this.activeViewReferences=[];this.activeStageAreaReferences=[];this.layoutRoot=new ce(this.stageEntity,
"Stage",this);this.layoutManager=new vj(this.layoutRoot);S._platform.getStage().resize.connect(v(this,this._onResize))};j["tools.spark.sliced.services.std.display.active_displayentity_references.core.ActiveStageReference"]=af;af.__name__=!0;af.__interfaces__=[ng];af.prototype={_onResize:function(){this.layoutRoot.explicitWidth=window.innerWidth;this.layoutRoot.explicitHeight=window.innerHeight;this.layoutManager.validated=!1},addView:function(a){this.activeViewReferences.push(a);this.activeViewReferences.sort(v(this,
this._orderViews));this._addLayoutElement(a.layoutElement)},addStageArea:function(a){this.activeStageAreaReferences.push(a);this._addLayoutElement(a.layoutElement)},_addLayoutElement:function(a){if("Implicit"==a.layoutableEntity.getState("parent"))this.layoutRoot.children.push(a);else for(var b=0,d=this.activeStageAreaReferences;b<d.length;){var c=d[b];++b;if(c.stageAreaEntity.getState("name")==a.layoutableEntity.getState("parent")){c.layoutElement.children.push(a);break}}},_orderViews:function(a,
b){return a.viewEntity.getState("zIndex")>b.viewEntity.getState("zIndex")?1:a.viewEntity.getState("zIndex")<b.viewEntity.getState("zIndex")?-1:0},__class__:af};var vh=function(){};j["tools.spark.sliced.services.std.display.active_displayentity_references.interfaces.IActiveViewReference"]=vh;vh.__name__=!0;vh.prototype={__class__:vh};var Pd=function(a){this.viewEntity=a;this.layoutElement=new ce(this.viewEntity,"View",this)};j["tools.spark.sliced.services.std.display.active_displayentity_references.core.ActiveViewReference"]=
Pd;Pd.__name__=!0;Pd.__interfaces__=[vh];Pd.prototype={__class__:Pd};var og=function(){this._init()};j["tools.spark.sliced.services.std.display.core.Display"]=og;og.__name__=!0;og.__interfaces__=[ig];og.__super__=Ma;og.prototype=z(Ma.prototype,{_initRenderStateNames:function(){this._renderStateNames.set("2DmeshType",!0);!0;this._renderStateNames.set("3DmeshType",!0);!0;this._renderStateNames.set("touchable",!0);!0;this._renderStateNames.set("2DMeshImageForm",!0);!0;this._renderStateNames.set("2DMeshSpriterForm",
!0);!0;this._renderStateNames.set("2DMeshFillRectForm",!0);!0;this._renderStateNames.set("2DMeshSpriteForm",!0);!0;this._renderStateNames.set("2DMeshSpriterAnimForm",!0);!0;this._renderStateNames.set("visibility",!0);!0;this._renderStateNames.set("visible",!0);!0;this._renderStateNames.set("width",!0);!0;this._renderStateNames.set("height",!0);!0;this._renderStateNames.set("opacity",!0);!0;this._renderStateNames.set("display",!0);!0;this._renderStateNames.set("text",!0);!0;this._renderStateNames.set("fontSize",
!0);!0;this._renderStateNames.set("fontWeight",!0);!0;this._renderStateNames.set("fontColor",!0);!0;this._renderStateNames.set("src",!0);!0;this._renderStateNames.set("overflow",!0);!0;this._renderStateNames.set("backgroundColor",!0);!0;this._renderStateNames.set("border",!0);!0;this._renderStateNames.set("spaceX",!0);!0;this._renderStateNames.set("spaceY",!0);!0;this._renderStateNames.set("spaceZ",!0);!0;this._renderStateNames.set("scaleX",!0);!0;this._renderStateNames.set("scaleY",!0);!0;this._renderStateNames.set("scaleZ",
!0);!0;this._renderStateNames.set("velocityX",!0);!0;this._renderStateNames.set("velocityY",!0);!0;this._renderStateNames.set("applyImpulseX",!0);!0;this._renderStateNames.set("applyImpulseY",!0);!0;this._renderStateNames.set("captureAreaX",!0);!0;this._renderStateNames.set("captureAreaY",!0);!0;this._renderStateNames.set("captureAreaWidth",!0);!0;this._renderStateNames.set("captureAreaHeight",!0);!0;this._renderStateNames.set("spaceWidth",!0);!0;this._renderStateNames.set("spaceHeight",!0);!0;this._renderStateNames.set("stage",
!0);!0;this._renderStateNames.set("view",!0);!0;this._renderStateNames.set("camera",!0);!0;this._renderStateNames.set("scene",!0);!0;this._renderStateNames.set("space",!0);!0;this._renderStateNames.set("active",!0);!0},_init:function(){w.logger.info("Init Display std Service...",null);this._renderStateNames=new E;this._initRenderStateNames();this._renderFormStateNames=new E;this._activeReferenceMediator=new wh(this);this.platformRendererSet=new E;this._dataBuffer=new pg},setActiveSpace:function(a){return"Space"==
a.getState("displayType")?(this._dataBuffer.addEntry(ta.SET_SPACE,a),!0):!1},_setActiveSpace:function(a){null!=this._activeReferenceMediator.getActiveSpaceReference(a)?w.logger.warn("This space object is already bound to the Project. Ignoring...",null):(null!=this.projectActiveSpaceReference&&w.logger.warn("Another space object was already set to this Project! Resetting...",null),this.projectActiveSpaceReference=this._activeReferenceMediator.createSpaceReference(a),this._activeReferenceMediator.spaceReferenceManager.update(this.projectActiveSpaceReference,
a))},update:function(){for(var a=0,b=this._dataBuffer.dataBuffer;a<b.length;){var d=b[a];++a;switch(d.type[1]){case 0:this._setActiveSpace(d.source);break;case 1:switch(d.source.getState("displayType")){case "Space":w.logger.warn("adding something to a space",null);break;case "Stage":w.logger.warn("adding something to a stage",null);break;case "StageArea":w.logger.warn("adding something to a stageArea",null);break;case "View":w.logger.warn("adding something to a view",null);for(d=this.platformRendererSet.iterator();d.hasNext();)d.next(),
w.logger.warn("adding something to a view, renderer logic",null);break;default:for(var c=this.platformRendererSet.iterator();c.hasNext();)c.next().addChild(d.source,d.target)}break;case 2:switch(d.source.getState("displayType")){case "Space":w.logger.warn("removing something from a space",null);break;case "Stage":w.logger.warn("removing something from a stage",null);break;case "StageArea":w.logger.warn("removing something from a stageArea",null);break;case "View":w.logger.warn("removing something from a view",
null);for(d=this.platformRendererSet.iterator();d.hasNext();)d.next(),w.logger.warn("removing something from a view, renderer logic",null);break;default:for(c=this.platformRendererSet.iterator();c.hasNext();)c.next().removeChild(d.source,d.target)}break;case 3:switch(d.source.getState("displayType")){case "Space":this._activeReferenceMediator.spaceReferenceManager.updateState(this._activeReferenceMediator.getActiveSpaceReference(d.source),d.source,d.field);break;case "Stage":this._activeReferenceMediator.stageReferenceManager.updateState(this._activeReferenceMediator.getActiveStageReference(d.source),
d.source,d.field);break;case "StageArea":this._activeReferenceMediator.stageAreaReferenceManager.updateState(this._activeReferenceMediator.getActiveStageAreaReference(d.source),d.source,d.field);break;case "View":this._activeReferenceMediator.viewReferenceManager.updateState(this._activeReferenceMediator.getActiveViewReference(d.source),d.source,d.field);for(c=this.platformRendererSet.iterator();c.hasNext();)c.next().updateState(d.source,d.field);break;default:for(c=this.platformRendererSet.iterator();c.hasNext();)c.next().updateState(d.source,
d.field)}break;default:w.logger.warn("DISPLAY: Unhandled request: "+r.string(d.type),null)}}this._dataBuffer.clearBuffer();null!=this.projectActiveSpaceReference&&this.projectActiveSpaceReference.activeStageReference.layoutManager.validate()},addDisplayObjectChild:function(a,b){null!=a.getState("displayType")&&null!=b.getState("displayType")&&this._dataBuffer.addEntry(ta.ADDED,a,b)},removeDisplayObjectChild:function(a,b){null!=a.getState("displayType")&&null!=b.getState("displayType")&&this._dataBuffer.addEntry(ta.REMOVED,
a,b)},updateDisplayObjectState:function(a,b){null!=a.getState("displayType")&&!0==this._renderStateNames.get(b)&&this._dataBuffer.addEntry(ta.UPDATED_STATE,a,null,b)},updateDisplayObjectFormState:function(a,b){null!=a.getState("displayType")&&!0==this._renderFormStateNames.get(b)&&this._dataBuffer.addEntry(ta.UPDATED_FORM_STATE,a,null,b)},_addChild:function(a,b){this._dataBuffer.addEntry(ta.ADDED,a,b)},_removeChild:function(a,b){this._dataBuffer.addEntry(ta.REMOVED,a,b)},_updateState:function(a,b){this._dataBuffer.addEntry(ta.UPDATED_STATE,
a,null,b)},_updateFormState:function(a,b){this._dataBuffer.addEntry(ta.UPDATED_FORM_STATE,a,null,b)},log:function(a){w.logger.info(a,null)},info:function(a){w.logger.info(a,null)},debug:function(a){w.logger.info(a,null)},warn:function(a){w.logger.warn(a,null)},error:function(a){w.logger.error(a,null)},__class__:og});var zj=function(){};j["tools.spark.sliced.services.std.display.databuffer.interfaces.IBufferEntry"]=zj;zj.__name__=!0;zj.prototype={__class__:zj};var xh=function(a,b,d,c){this.type=a;
this.source=b;this.target=d;this.field=c};j["tools.spark.sliced.services.std.display.databuffer.core.BufferEntry"]=xh;xh.__name__=!0;xh.__interfaces__=[zj];xh.prototype={__class__:xh};var Aj=function(){};j["tools.spark.sliced.services.std.display.databuffer.interfaces.IDataBuffer"]=Aj;Aj.__name__=!0;Aj.prototype={__class__:Aj};var pg=function(){this.dataBuffer=[]};j["tools.spark.sliced.services.std.display.databuffer.core.DataBuffer"]=pg;pg.__name__=!0;pg.__interfaces__=[Aj];pg.prototype={addEntry:function(a,
b,d,c){this.dataBuffer.push(new xh(a,b,d,c))},clearBuffer:function(){this.dataBuffer=[]},__class__:pg};var ta=j["tools.spark.sliced.services.std.display.databuffer.interfaces.EBufferEntryType"]={__ename__:!0,__constructs__:["SET_SPACE","ADDED","REMOVED","UPDATED_STATE","UPDATED_FORM_STATE"]};ta.SET_SPACE=["SET_SPACE",0];ta.SET_SPACE.toString=g;ta.SET_SPACE.__enum__=ta;ta.ADDED=["ADDED",1];ta.ADDED.toString=g;ta.ADDED.__enum__=ta;ta.REMOVED=["REMOVED",2];ta.REMOVED.toString=g;ta.REMOVED.__enum__=ta;
ta.UPDATED_STATE=["UPDATED_STATE",3];ta.UPDATED_STATE.toString=g;ta.UPDATED_STATE.__enum__=ta;ta.UPDATED_FORM_STATE=["UPDATED_FORM_STATE",4];ta.UPDATED_FORM_STATE.toString=g;ta.UPDATED_FORM_STATE.__enum__=ta;var Bj=function(){};j["tools.spark.sliced.services.std.display.managers.interfaces.IActiveReferenceMediator"]=Bj;Bj.__name__=!0;Bj.prototype={__class__:Bj};var wh=function(a){this.display=a;this.spaceReferenceManager=new qg(this);this.stageReferenceManager=new yh(this);this.viewReferenceManager=
new rg(this);this.stageAreaReferenceManager=new zh(this)};j["tools.spark.sliced.services.std.display.managers.core.ActiveReferenceMediator"]=wh;wh.__name__=!0;wh.__interfaces__=[Bj];wh.prototype={createSpaceReference:function(a){return A.__cast(this.spaceReferenceManager.create(a),qe)},createStageReference:function(a){return A.__cast(this.stageReferenceManager.create(a),af)},createViewReference:function(a){return A.__cast(this.viewReferenceManager.create(a),Pd)},createStageAreaReference:function(a){return A.__cast(this.stageAreaReferenceManager.create(a),
$e)},getActiveSpaceReference:function(a){return null==this.display.projectActiveSpaceReference?null:a==this.display.projectActiveSpaceReference.spaceEntity?this.display.projectActiveSpaceReference:null},getActiveStageReference:function(a){return null==this.display.projectActiveSpaceReference||null==this.display.projectActiveSpaceReference.activeStageReference?null:a==this.display.projectActiveSpaceReference.activeStageReference.stageEntity?this.display.projectActiveSpaceReference.activeStageReference:
null},getActiveViewReference:function(a){if(null==this.display.projectActiveSpaceReference||null==this.display.projectActiveSpaceReference.activeStageReference)return null;for(var b=0,d=this.display.projectActiveSpaceReference.activeStageReference.activeViewReferences;b<d.length;){var c=d[b];++b;if(c.viewEntity==a)return c}return null},getActiveStageAreaReference:function(a){if(null==this.display.projectActiveSpaceReference||null==this.display.projectActiveSpaceReference.activeStageReference)return null;
for(var b=0,d=this.display.projectActiveSpaceReference.activeStageReference.activeStageAreaReferences;b<d.length;){var c=d[b];++b;if(c.stageAreaEntity==a)return c}return null},__class__:wh};var tb=function(){};j["tools.spark.sliced.services.std.display.managers.interfaces.IDisplayObjectManager"]=tb;tb.__name__=!0;tb.prototype={__class__:tb};var sg=function(a){this._renderer=a};j["tools.spark.sliced.services.std.display.managers.core.DomCameraManager"]=sg;sg.__name__=!0;sg.__interfaces__=[tb];sg.prototype=
{create:function(a){return new Re(a)},update:function(){},updateState:function(){},__class__:sg};var Ah=function(a){this._renderer=a};j["tools.spark.sliced.services.std.display.managers.core.DomObjectManager"]=Ah;Ah.__name__=!0;Ah.__interfaces__=[tb];Ah.prototype={create:function(a){var b=new Md(a);this.update(b,a);return b},update:function(a,b){var d;d=A.__cast(a,Md);for(var c=0,f=b.get_children();c<f.length;){var i=f[c];++c;this.addTo(this._renderer.createObject(i),d)}},updateState:function(a,b,
d){a=A.__cast(a,Md);for(b=a._instances.keys();b.hasNext();){var c=b.next();null!=a._updateStateFunctions.get(d)?a._updateStateFunctions.get(d)(a.gameEntity.getState(d),c):w.logger.warn("State "+d+" does not have a function handler! Ignoring :(",null)}},addTo:function(a,b){var d;d=A.__cast(b,Md);null!=a&&d.addChild(a)},removeFrom:function(a,b){var d;d=A.__cast(b,Md);null!=a&&d.removeChild(a)},__class__:Ah};var tg=function(a){this._renderer=a};j["tools.spark.sliced.services.std.display.managers.core.DomSceneManager"]=
tg;tg.__name__=!0;tg.__interfaces__=[tb];tg.prototype={create:function(a){var b=new Ac(a);this.update(b,a);return b},update:function(a,b){var d;d=A.__cast(a,Ac);for(var c=0,f=b.get_children();c<f.length;){var i=f[c];++c;this.addTo(this._renderer.createObject(i),d)}},updateState:function(){},addTo:function(a,b){var d;d=A.__cast(b,Ac);null!=a&&d.addChild(a)},__class__:tg};var Bh=function(a){this._renderer=a};j["tools.spark.sliced.services.std.display.managers.core.DomViewManager"]=Bh;Bh.__name__=!0;
Bh.__interfaces__=[tb];Bh.prototype={create:function(a){var b=new Te(a);this.update(b,a);return b},update:function(a,b){this.updateState(a,b,"scene");this.updateState(a,b,"camera");this.updateState(a,b,"visible")},updateState:function(a,b,d){a=A.__cast(a,Te);switch(d){case "scene":b=b.getState(d);a.set_scene(this._renderer.createScene(b));break;case "camera":b=b.getState(d);a.set_camera(this._renderer.createCamera(b));break;default:a.updateState(d)}},__class__:Bh};var ug=function(a){this._renderer=
a};j["tools.spark.sliced.services.std.display.managers.core.Flambe2_5DCameraManager"]=ug;ug.__name__=!0;ug.__interfaces__=[tb];ug.prototype={create:function(a){return new oe(a)},update:function(){},updateState:function(a,b,d){for(a=A.__cast(a,oe)._attachedToViews.keys();a.hasNext();)switch(b=a.next(),d){case "captureAreaX":b.updateCamera();break;case "captureAreaY":b.updateCamera();break;case "captureAreaWidth":b.updateCamera();break;case "captureAreaHeight":b.updateCamera();break;default:w.logger.warn("Unhandled Camera State value: "+
d,null)}},__class__:ug};var Ch=function(a){this._renderer=a};j["tools.spark.sliced.services.std.display.managers.core.Flambe2_5DObjectManager"]=Ch;Ch.__name__=!0;Ch.__interfaces__=[tb];Ch.prototype={create:function(a){var b=new Nd(a);this.update(b,a);return b},update:function(a,b){var d;d=A.__cast(a,Nd);for(var c=0,f=b.get_children();c<f.length;){var i=f[c];++c;this.addTo(this._renderer.createObject(i),d)}},updateState:function(a,b,d){a=A.__cast(a,Nd);for(b=a._instances.keys();b.hasNext();){var c=
b.next();null!=a._updateStateFunctions.get(d)?a._updateStateFunctions.get(d)(a.gameEntity.getState(d),c):w.logger.warn("State "+d+" does not have a function handler! Ignoring :(",null)}},addTo:function(a,b){var d;d=A.__cast(b,Nd);null!=a&&d.addChild(a)},__class__:Ch};var vg=function(a){this._renderer=a};j["tools.spark.sliced.services.std.display.managers.core.Flambe2_5DSceneManager"]=vg;vg.__name__=!0;vg.__interfaces__=[tb];vg.prototype={create:function(a){var b=new Ub(a);this.update(b,a);return b},
update:function(a,b){var d;d=A.__cast(a,Ub);for(var c=0,f=b.get_children();c<f.length;){var i=f[c];++c;this.addTo(this._renderer.createObject(i),d)}},updateState:function(){},addTo:function(a,b){var d;d=A.__cast(b,Ub);null!=a&&d.addChild(a)},removeFrom:function(a,b){var d;d=A.__cast(b,Ub);null!=a&&d.removeChild(a)},__class__:vg};var Dh=function(a,b){this._renderer=a;this._flambeGraphics=b};j["tools.spark.sliced.services.std.display.managers.core.Flambe2_5DViewManager"]=Dh;Dh.__name__=!0;Dh.__interfaces__=
[tb];Dh.prototype={create:function(a){var b=new Ve(a,this._flambeGraphics);this.update(b,a);return b},update:function(a,b){this.updateState(a,b,"scene");this.updateState(a,b,"camera")},updateState:function(a,b,d){a=A.__cast(a,Ve);switch(d){case "scene":b=b.getState(d);a.set_scene(this._renderer.createScene(b));break;case "camera":b=b.getState(d);a.set_camera(this._renderer.createCamera(b));break;case "visible":a.setVisible(b.getState(d))}},__class__:Dh};var qg=function(a){this._activeReferenceMediator=
a};j["tools.spark.sliced.services.std.display.managers.core.SpaceReferenceManager"]=qg;qg.__name__=!0;qg.__interfaces__=[tb];qg.prototype={create:function(a){return new qe(a)},update:function(a,b){null!=a&&this.updateState(a,b,"stage")},updateState:function(a,b,d){if(null!=a)switch(a=A.__cast(a,qe),d){case "stage":null!=b.getState(d)&&this._setStage(a,this._activeReferenceMediator.createStageReference(b.getState(d)),b.getState(d))}},_setStage:function(a,b,d){null!=this._activeReferenceMediator.getActiveStageReference(d)?
ja.warn("This stage object ["+r.string(d.getState("name"))+"] is already bound to the Active Space. Ignoring..."):(null!=this._activeReferenceMediator.display.projectActiveSpaceReference.activeStageReference&&w.logger.warn("Another stage object was already set to this Project! Resetting...",null),a.activeStageReference=b,this._activeReferenceMediator.stageReferenceManager.update(b,d))},__class__:qg};var zh=function(a){this._activeReferenceMediator=a};j["tools.spark.sliced.services.std.display.managers.core.StageAreaReferenceManager"]=
zh;zh.__name__=!0;zh.__interfaces__=[tb];zh.prototype={create:function(a){return new $e(a)},update:function(a){null!=a&&A.__cast(a,mg).layoutElement.update()},updateState:function(a,b,d){null!=a&&A.__cast(a,mg).layoutElement.updateState(d)},__class__:zh};var yh=function(a){this._activeReferenceMediator=a};j["tools.spark.sliced.services.std.display.managers.core.StageReferenceManager"]=yh;yh.__name__=!0;yh.__interfaces__=[tb];yh.prototype={create:function(a){return new af(a)},update:function(a,b){if(null!=
a){var d;d=A.__cast(a,ng);this.updateState(d,b,"test");this.updateState(d,b,"width");this.updateState(d,b,"height");d.layoutRoot.update();d.layoutRoot.explicitWidth=S._platform.getStage().get_width();d.layoutRoot.explicitHeight=S._platform.getStage().get_height();for(var c=0,f=b.getChildren();c<f.length;){var i=f[c];++c;this.addTo(i,d)}}},updateState:function(a){null!=a&&A.__cast(a,ng)},addTo:function(a,b){if(null!=b){var d;d=A.__cast(b,af);var c;c=A.__cast(a,Ad);"View"==c.getState("displayType")?
this._addView(d,this._activeReferenceMediator.createViewReference(c),c):"StageArea"==c.getState("displayType")?this._addStageArea(d,this._activeReferenceMediator.createStageAreaReference(c),c):w.logger.warn("A child of a Stage gameEntity is NOT a View or a StageArea! Ignoring...",null)}},_addView:function(a,b,d){null!=this._activeReferenceMediator.getActiveViewReference(d)?ja.warn("This view object ["+r.string(d.getState("name"))+"] is already bound to the Active Stage. Ignoring..."):null==d.getState("scene")||
null==d.getState("camera")?ja.warn("This view object ["+r.string(d.getState("name"))+"] is not ready yet (missing camera or scene). Ignoring..."):(a.addView(b),this._activeReferenceMediator.viewReferenceManager.update(b,d))},_addStageArea:function(a,b,d){null!=this._activeReferenceMediator.getActiveStageAreaReference(d)?ja.warn("This stageArea object ["+r.string(d.getState("name"))+"] is already bound to the Active Stage. Ignoring..."):(a.addStageArea(b),this._activeReferenceMediator.stageAreaReferenceManager.update(b,
d))},__class__:yh};var rg=function(a){this._activeReferenceMediator=a};j["tools.spark.sliced.services.std.display.managers.core.ViewReferenceManager"]=rg;rg.__name__=!0;rg.__interfaces__=[tb];rg.prototype={create:function(a){return new Pd(a)},update:function(a,b){if(null!=a){var d;d=A.__cast(a,vh);this.updateState(d,b,"scene");this.updateState(d,b,"camera");d.layoutElement.update();this._updateRenderer(d)}},updateState:function(a,b,d){if(null!=a)switch(d){case "scene":this._updateRenderer(A.__cast(a,
Pd));break;case "camera":this._updateRenderer(A.__cast(a,Pd))}},_updateRenderer:function(a){if(null==a.renderer){if("Implicit"!=a.viewEntity.getState("renderer")){var b=a.viewEntity.getState("renderer");a.renderer=this._activeReferenceMediator.display.platformRendererSet.get(b)}else ja.error("Implicit Renderer selection has not been implemented yet. View "+r.string(a.viewEntity.getState("name"))+" cannot be rendered!");null!=a.renderer?a.renderer.createView(a.viewEntity):ja.error("Could not create renderer: "+
r.string(a.viewEntity.getState("renderer"))+".")}},__class__:rg};var Dk=function(){};j["tools.spark.sliced.services.std.display.renderers.interfaces.IRenderer"]=Dk;Dk.__name__=!0;var bf=function(){null};j["tools.spark.sliced.services.std.display.renderers.core.ARenderer"]=bf;bf.__name__=!0;bf.__interfaces__=[Dk];bf.prototype={__class__:bf};var Cj=function(){};j["tools.spark.sliced.services.std.display.renderers.interfaces.IDimensionSpecificRenderer"]=Cj;Cj.__name__=!0;Cj.__interfaces__=[Dk];var Ec=
function(){bf.call(this);null};j["tools.spark.sliced.services.std.display.renderers.core.dimension.A2_5DRenderer"]=Ec;Ec.__name__=!0;Ec.__interfaces__=[Cj];Ec.__super__=bf;Ec.prototype=z(bf.prototype,{__class__:Ec});var re=function(){};j["tools.spark.sliced.services.std.display.renderers.interfaces.ILibrarySpecificRenderer"]=re;re.__name__=!0;re.__interfaces__=[Cj];re.prototype={__class__:re};var mc=function(){Ec.call(this);this._internalGraphics=this._platform.getRenderer().graphics;null==this._internalGraphics&&
w.logger.error("Flambe renderer does NOT have internal graphics!",null);this._views=new Ca;this._scenes=new Ca;this._cameras=new Ca;this._objects=new Ca;this._viewManager=new Dh(this,this._internalGraphics);this._sceneManager=new vg(this);this._cameraManager=new ug(this);this._objectManager=new Ch(this)};j["tools.spark.sliced.services.std.display.renderers.core.library.AFlambe2_5DRenderer"]=mc;mc.__name__=!0;mc.__interfaces__=[re];mc.__super__=Ec;mc.prototype=z(Ec.prototype,{renderView:function(a){this._views.h[a.__id__].render()},
createView:function(a){if(null!=this._views.h[a.__id__])ja.warn("View "+r.string(a.getState("name"))+" has already been added to this Flambe2_5DRenderer. Ignoring...");else{var b;b=A.__cast(this._viewManager.create(a),Ve);this._views.set(a,b);b}return this._views.h[a.__id__]},createScene:function(a){if(null!=this._scenes.h[a.__id__])ja.warn("Scene "+r.string(a.getState("name"))+" has already been added to this Flambe2_5DRenderer. Ignoring...");else{var b;b=A.__cast(this._sceneManager.create(a),Ub);
this._scenes.set(a,b);b}return this._scenes.h[a.__id__]},createCamera:function(a){if(null!=this._cameras.h[a.__id__])ja.warn("Camera "+r.string(a.getState("name"))+" has already been added to this Flambe2_5DRenderer. Ignoring...");else{var b;b=A.__cast(this._cameraManager.create(a),oe);this._cameras.set(a,b);b}return this._cameras.h[a.__id__]},createObject:function(a){if("Entity"==a.getState("displayType")){if(null!=this._objects.h[a.__id__])ja.warn("Object "+r.string(a.getState("name"))+" has already been added to this Flambe2_5DRenderer. Ignoring...");
else{var b;b=A.__cast(this._objectManager.create(a),hc);this._objects.set(a,b);b}return this._objects.h[a.__id__]}return null},addChild:function(a,b){switch(a.getState("displayType")){case "Scene":null!=this._scenes.h[a.__id__]&&this._sceneManager.addTo(this.createObject(b),this._scenes.h[a.__id__]);break;case "Entity":null!=this._objects.h[a.__id__]&&this._objectManager.addTo(this.createObject(b),this._objects.h[a.__id__]);break;default:ja.warn("AFlambe2_5DRenderer: Unhandled add child request: "+
r.string(a.getState("displayType")))}},removeChild:function(a,b){switch(a.getState("displayType")){case "Scene":null!=this._scenes.h[a.__id__]&&this._sceneManager.removeFrom(this._objects.h[b.__id__],this._scenes.h[a.__id__]);break;case "Entity":null!=this._objects.h[a.__id__]&&w.logger.warn("FLAMBE RENDERER: REMOVING A CHILD FROM AN OBJECT NOT YET IMPLEMENTED",null);break;default:ja.warn("AFlambe2_5DRenderer: Unhandled remove child request: "+r.string(a.getState("displayType")))}},updateState:function(a,
b){null!=this._objects.h[a.__id__]?this._objectManager.updateState(this._objects.h[a.__id__],a,b):null!=this._views.h[a.__id__]?this._viewManager.updateState(this._views.h[a.__id__],a,b):null!=this._cameras.h[a.__id__]&&this._cameraManager.updateState(this._cameras.h[a.__id__],a,b)},__class__:mc});var cf=function(){Ec.call(this)};j["tools.spark.sliced.services.std.display.renderers.core.library.ANativeControls2_5DRenderer"]=cf;cf.__name__=!0;cf.__interfaces__=[re];cf.__super__=Ec;cf.prototype=z(Ec.prototype,
{renderView:function(){},createView:function(){return null},createScene:function(){return null},createCamera:function(){return null},createObject:function(){return null},addChild:function(){},removeChild:function(){},updateState:function(){},__class__:cf});var Dj=function(){};j["tools.spark.sliced.services.std.display.renderers.interfaces.IPlatformSpecificRenderer"]=Dj;Dj.__name__=!0;Dj.__interfaces__=[re];var Ze=function(){this._platform=Xb.instance;mc.call(this);w.logger.info("Creating Flambe 2_5D Html Renderer...",
null)};j["tools.spark.sliced.services.std.display.renderers.core.platform.html.Flambe2_5DHtmlRenderer"]=Ze;Ze.__name__=!0;Ze.__interfaces__=[Dj];Ze.__super__=mc;Ze.prototype=z(mc.prototype,{__class__:Ze});var gg=function(){Ec.call(this);w.logger.info("Creating Native Controls Html (DOM) Renderer...",null);this._views=new Ca;this._scenes=new Ca;this._cameras=new Ca;this._objects=new Ca;this._viewManager=new Bh(this);this._sceneManager=new tg(this);this._cameraManager=new sg(this);this._objectManager=
new Ah(this)};j["tools.spark.sliced.services.std.display.renderers.core.platform.html.NativeControlsHtmlRenderer"]=gg;gg.__name__=!0;gg.__interfaces__=[Dj];gg.__super__=cf;gg.prototype=z(cf.prototype,{renderView:function(a){this._views.h[a.__id__].render()},createView:function(a){if(null!=this._views.h[a.__id__])ja.warn("View "+r.string(a.getState("name"))+" has already been added to this NativeControlsHtmlRenderer. Ignoring...");else{var b;b=A.__cast(this._viewManager.create(a),Te);this._views.set(a,
b);b}return this._views.h[a.__id__]},createScene:function(a){if(null!=this._scenes.h[a.__id__])ja.warn("Scene "+r.string(a.getState("name"))+" has already been added to this NativeControlsHtmlRenderer. Ignoring...");else{var b;b=A.__cast(this._sceneManager.create(a),Ac);this._scenes.set(a,b);b}return this._scenes.h[a.__id__]},createCamera:function(a){if(null!=this._cameras.h[a.__id__])ja.warn("Camera "+r.string(a.getState("name"))+" has already been added to this NativeControlsHtmlRenderer. Ignoring...");
else{var b;b=A.__cast(this._cameraManager.create(a),Re);this._cameras.set(a,b);b}return this._cameras.h[a.__id__]},createObject:function(a){if("Entity"==a.getState("displayType")){if(null!=this._objects.h[a.__id__])ja.warn("Object "+r.string(a.getState("name"))+" has already been added to this NativeControlsHtmlRenderer. Ignoring...");else{var b;b=A.__cast(this._objectManager.create(a),hc);this._objects.set(a,b);b}return this._objects.h[a.__id__]}return null},addChild:function(a,b){switch(a.getState("displayType")){case "Scene":null!=
this._scenes.h[a.__id__]&&this._sceneManager.addTo(this.createObject(b),this._scenes.h[a.__id__]);break;case "Entity":null!=this._objects.h[a.__id__]&&this._objectManager.addTo(this.createObject(b),this._objects.h[a.__id__]);break;default:ja.warn("NativeControlsHtmlRenderer: Unhandled add child request: "+r.string(a.getState("displayType")))}},removeChild:function(a,b){switch(a.getState("displayType")){case "Scene":null!=this._scenes.h[a.__id__]&&w.logger.warn("NC RENDERER: REMOVING A CHILD FROM A SCENE NOT YET IMPLEMENTED",
null);break;case "Entity":null!=this._objects.h[a.__id__]&&this._objectManager.removeFrom(this.createObject(b),this._objects.h[a.__id__]);break;default:ja.warn("NativeControlsHtmlRenderer: Unhandled remove child request: "+r.string(a.getState("displayType")))}},updateState:function(a,b){null!=this._objects.h[a.__id__]?this._objectManager.updateState(this._objects.h[a.__id__],a,b):null!=this._views.h[a.__id__]&&this._viewManager.updateState(this._views.h[a.__id__],a,b)},__class__:gg});var wg=function(){this._init()};
j["tools.spark.sliced.services.std.event.core.Event"]=wg;wg.__name__=!0;wg.__interfaces__=[sh];wg.__super__=Ma;wg.prototype=z(Ma.prototype,{_init:function(){w.logger.info("Init Event std Service...",null);this._NO_FILTER=[];this._FILTER_VARIABLE_USER_ENTITY=[];this._eventTypeFilterFlags=new pa;this._eventTypeFilterTriggers=new pa;this._initPrefabConvertToTypeMap();this._initPrefabConvertToFilterMap()},addTrigger:function(a){var b=this._prefabConvertToType.get(a.eventPrefab),d=this._prefabConvertToFilter.get(a.eventPrefab);
d==this._FILTER_VARIABLE_USER_ENTITY&&(d=a.parentEntity);if(!1==this._eventTypeFilterTriggers.exists(b)){var c=new Ca;this._eventTypeFilterTriggers.set(b,c)}!1==this._eventTypeFilterTriggers.get(b).exists(d)&&this._eventTypeFilterTriggers.get(b).set(d,[]);this._eventTypeFilterTriggers.get(b).get(d).push(a);(b==k.MOUSE_LEFT_CLICK||b==k.MOUSE_RIGHT_CLICK||b==k.MOUSE_ENTERED||b==k.MOUSE_MOVED||b==k.MOUSE_LEFT||b==k.MOUSE_DOWN||b==k.MOUSE_UP)&&B.input.pointer.registerTrigger(b,d)},raiseEvent:function(a,
b){null==b&&(b=this._NO_FILTER);if(!1==this._eventTypeFilterFlags.exists(a)){var d=new Ca;this._eventTypeFilterFlags.set(a,d);d}this._eventTypeFilterFlags.get(a).set(b,!0);b!=this._NO_FILTER&&this._eventTypeFilterFlags.get(a).set(this._NO_FILTER,!0)},_doTriggers:function(a,b){if(this._eventTypeFilterTriggers.exists(a)&&this._eventTypeFilterTriggers.get(a).exists(b))for(var d=0,c=this._eventTypeFilterTriggers.get(a).get(b);d<c.length;){var f=c[d];++d;f.doPass()}},update:function(){for(var a=this._eventTypeFilterFlags.keys();a.hasNext();){var b=
a.next();if(!0==this._eventTypeFilterFlags.get(b).get(this._NO_FILTER))for(var d=this._eventTypeFilterFlags.get(b).keys();d.hasNext();){var c=d.next();!0==this._eventTypeFilterFlags.get(b).get(c)&&(this._eventTypeFilterFlags.get(b).set(c,!1),this._doTriggers(b,c))}}},_initPrefabConvertToTypeMap:function(){this._prefabConvertToType=new pa;var a=k.CREATED;this._prefabConvertToType.set(c.CREATED,a);a;var b=k.UPDATE;this._prefabConvertToType.set(c.UPDATE,b);b;var d=k.CHANGED;this._prefabConvertToType.set(c.CHANGED,
d);d;var m=k.NETWORK_CONNECTED;this._prefabConvertToType.set(c.NETWORK_CONNECTED,m);m;var f=k.NETWORK_REQUEST;this._prefabConvertToType.set(c.NETWORK_REQUEST,f);f;var i=k.NETWORK_SERVER_EVENT;this._prefabConvertToType.set(c.NETWORK_SERVER_EVENT,i);i;var h=k.FILETRANSFER_CONNECTED;this._prefabConvertToType.set(c.FILETRANSFER_CONNECTED,h);h;var e=k.FILETRANSFER_SENDREQUEST;this._prefabConvertToType.set(c.FILETRANSFER_SENDREQUEST,e);e;var g=k.MOUSE_LEFT_CLICK;this._prefabConvertToType.set(c.MOUSE_LEFT_CLICK,
g);g;var j=k.MOUSE_RIGHT_CLICK;this._prefabConvertToType.set(c.MOUSE_RIGHT_CLICK,j);j;var l=k.MOUSE_LEFT_DOWN;this._prefabConvertToType.set(c.MOUSE_LEFT_DOWN,l);l;var n=k.MOUSE_RIGHT_DOWN;this._prefabConvertToType.set(c.MOUSE_RIGHT_DOWN,n);n;var p=k.MOUSE_SCROLL;this._prefabConvertToType.set(c.MOUSE_SCROLL,p);p;var q=k.MOUSE_LEFT_CLICK;this._prefabConvertToType.set(c.MOUSE_LEFT_CLICKED,q);q;var t=k.MOUSE_RIGHT_CLICK;this._prefabConvertToType.set(c.MOUSE_RIGHT_CLICKED,t);t;var r=k.MOUSE_ENTERED;this._prefabConvertToType.set(c.MOUSE_ENTERED,
r);r;var w=k.MOUSE_MOVED;this._prefabConvertToType.set(c.MOUSE_MOVED,w);w;var u=k.MOUSE_LEFT;this._prefabConvertToType.set(c.MOUSE_LEFT,u);u;var mf=k.MOUSE_DOWN;this._prefabConvertToType.set(c.MOUSE_DOWN,mf);mf;var z=k.MOUSE_UP;this._prefabConvertToType.set(c.MOUSE_UP,z);z;var v=k.ON_DRAG_START;this._prefabConvertToType.set(c.ON_DRAG_START,v);v;var s=k.ON_DRAG;this._prefabConvertToType.set(c.ON_DRAG,s);s;var A=k.ON_DRAG_END;this._prefabConvertToType.set(c.ON_DRAG_END,A);A;var B=k.ON_DRAG_ENTER;this._prefabConvertToType.set(c.ON_DRAG_ENTER,
B);B;var x=k.ON_DRAG_OVER;this._prefabConvertToType.set(c.ON_DRAG_OVER,x);x;var J=k.ON_DRAG_LEAVE;this._prefabConvertToType.set(c.ON_DRAG_LEAVE,J);J;var D=k.ON_DROP;this._prefabConvertToType.set(c.ON_DROP,D);D;var C=k.PHYSICS_COLLISION_START;this._prefabConvertToType.set(c.PHYSICS_COLLISION_START,C);C;var E=k.PHYSICS_COLLISION_END;this._prefabConvertToType.set(c.PHYSICS_COLLISION_END,E);E;var F=k.PHYSICS_SENSOR_START;this._prefabConvertToType.set(c.PHYSICS_SENSOR_START,F);F;var N=k.PHYSICS_SENSOR_START_BIPED_FEET;
this._prefabConvertToType.set(c.PHYSICS_SENSOR_START_BIPED_FEET,N);N;var H=k.PHYSICS_SENSOR_END;this._prefabConvertToType.set(c.PHYSICS_SENSOR_END,H);H;var G=k.PHYSICS_SENSOR_END_BIPED_FEET;this._prefabConvertToType.set(c.PHYSICS_SENSOR_END_BIPED_FEET,G);G;var P=k.KEY_PRESSED_LOCAL;this._prefabConvertToType.set(c.KEY_PRESSED_LOCAL,P);P;var O=k.KEY_RELEASED_LOCAL;this._prefabConvertToType.set(c.KEY_RELEASED_LOCAL,O);O;var S=k.KEY_DOWN_LOCAL;this._prefabConvertToType.set(c.KEY_DOWN_LOCAL,S);S;var L=
k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED,L);L;var U=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED,U);U;var W=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_ALT,W);W;var Y=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_BACKSPACE,Y);Y;var K=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_CAPS_LOCK,K);K;var da=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_CONTROL,da);da;var X=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_DELETE,
X);X;var ca=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_DOWN,ca);ca;var M=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_END,M);M;var ba=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_ENTER,ba);ba;var ja=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_ESCAPE,ja);ja;var V=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F1,V);V;var qa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F10,qa);qa;var Z=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F11,
Z);Z;var la=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F12,la);la;var oa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F13,oa);oa;var na=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F14,na);na;var y=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F15,y);y;var ia=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F2,ia);ia;var ya=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F3,ya);ya;var R=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F4,
R);R;var xa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F5,xa);xa;var Eh=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F6,Eh);Eh;var ma=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F7,ma);ma;var ta=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F8,ta);ta;var ha=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F9,ha);ha;var ea=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_HOME,ea);ea;var Fh=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_INSERT,
Fh);Fh;var sa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_LEFT,sa);sa;var Ej=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_0,Ej);Ej;var Aa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_1,Aa);Aa;var df=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_2,df);df;var aa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_3,aa);aa;var ga=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_4,ga);ga;var Q=k.KEY_PRESSED;
this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_5,Q);Q;var T=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_6,T);T;var Ca=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_7,Ca);Ca;var bl=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_8,bl);bl;var Ta=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_9,Ta);Ta;var za=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_ADD,za);za;var fa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_DECIMAL,
fa);fa;var Ka=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_DIVIDE,Ka);Ka;var ka=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_ENTER,ka);ka;var Ga=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_MULTIPLY,Ga);Ga;var Xa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_SUBTRACT,Xa);Xa;var Pa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_PAGE_DOWN,Pa);Pa;var Gh=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_PAGE_UP,
Gh);Gh;var Fa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_RIGHT,Fa);Fa;var gb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_SHIFT,gb);gb;var cl=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_SPACE,cl);cl;var Qa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_TAB,Qa);Qa;var I=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_UP,I);I;var Ib=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_A,Ib);Ib;var $a=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_B,
$a);$a;var Ua=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_C,Ua);Ua;var bb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_D,bb);bb;var Oa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_E,Oa);Oa;var Wa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F,Wa);Wa;var ld=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_G,ld);ld;var ua=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_H,ua);ua;var Ja=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_I,
Ja);Ja;var hb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_J,hb);hb;var nb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_K,nb);nb;var dl=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_L,dl);dl;var Ya=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_M,Ya);Ya;var Ba=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_N,Ba);Ba;var el=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_O,el);el;var Fj=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_P,
Fj);Fj;var Ra=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_Q,Ra);Ra;var fl=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_R,fl);fl;var Qd=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_S,Qd);Qd;var Gj=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_T,Gj);Gj;var Ek=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_U,Ek);Ek;var Wc=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_V,Wc);Wc;var cb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_W,
cb);cb;var db=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_X,db);db;var Fk=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_Y,Fk);Fk;var ob=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_Z,ob);ob;var ve=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_0,ve);ve;var Hh=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_1,Hh);Hh;var vb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_2,vb);vb;var sb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_3,
sb);sb;var kb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_4,kb);kb;var fb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_5,fb);fb;var wa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_6,wa);wa;var La=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_7,La);La;var Ma=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_8,Ma);Ma;var ib=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_9,ib);ib;var Fb=k.KEY_PRESSED;
this._prefabConvertToType.set(c.KEY_PRESSED_EQUALS,Fb);Fb;var ub=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_SLASH,ub);ub;var Gb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_BACKSLASH,Gb);Gb;var rb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_LEFTBRACKET,rb);rb;var Kb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_RIGHTBRACKET,Kb);Kb;var va=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_BACKQUOTE,va);va;var Tb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_COMMA,
Tb);Tb;var Sa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_COMMAND,Sa);Sa;var tb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_MINUS,tb);tb;var Da=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_PERIOD,Da);Da;var jb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_QUOTE,jb);jb;var Hb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_SEMICOLON,Hb);Hb;var Xc=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_ANDROIDMENU,Xc);Xc;var gl=k.KEY_PRESSED;
this._prefabConvertToType.set(c.KEY_PRESSED_ANDROIDSEARCH,gl);gl;var wb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_UNKNOWN,wb);wb;var xb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_ALT,xb);xb;var mb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_BACKSPACE,mb);mb;var eb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_CAPS_LOCK,eb);eb;var qb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_CONTROL,qb);qb;var Cb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_DELETE,
Cb);Cb;var hl=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_DOWN,hl);hl;var ac=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_END,ac);ac;var Sb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_ENTER,Sb);Sb;var lb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_ESCAPE,lb);lb;var Bb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F1,Bb);Bb;var kc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F10,kc);kc;var Cc=k.KEY_RELEASED;
this._prefabConvertToType.set(c.KEY_RELEASED_F11,Cc);Cc;var Vb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F12,Vb);Vb;var Za=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F13,Za);Za;var Ia=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F14,Ia);Ia;var Ea=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F15,Ea);Ea;var Yb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F2,Yb);Yb;var Lb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F3,
Lb);Lb;var zb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F4,zb);zb;var Mb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F5,Mb);Mb;var ra=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F6,ra);ra;var Ob=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F7,Ob);Ob;var Db=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F8,Db);Db;var il=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F9,il);il;var Pb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_HOME,
Pb);Pb;var Ha=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_INSERT,Ha);Ha;var Ub=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_LEFT,Ub);Ub;var lc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_0,lc);lc;var pc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_1,pc);pc;var qc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_2,qc);qc;var Ic=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_3,Ic);Ic;var ab=
k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_4,ab);ab;var pb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_5,pb);pb;var Nb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_6,Nb);Nb;var $b=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_7,$b);$b;var Qb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_8,Qb);Qb;var dc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_9,dc);dc;var Ab=k.KEY_RELEASED;
this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_ADD,Ab);Ab;var hc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_DECIMAL,hc);hc;var Ec=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_DIVIDE,Ec);Ec;var oc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_ENTER,oc);oc;var Hc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_MULTIPLY,Hc);Hc;var yb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_SUBTRACT,yb);
yb;var Xb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_PAGE_DOWN,Xb);Xb;var cd=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_PAGE_UP,cd);cd;var Va=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_RIGHT,Va);Va;var jl=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_SHIFT,jl);jl;var dd=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_SPACE,dd);dd;var Zb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_TAB,Zb);Zb;var ed=k.KEY_RELEASED;
this._prefabConvertToType.set(c.KEY_RELEASED_UP,ed);ed;var bc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_A,bc);bc;var fd=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_B,fd);fd;var cc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_C,cc);cc;var gd=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_D,gd);gd;var Hj=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_E,Hj);Hj;var Rb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F,
Rb);Rb;var Na=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_G,Na);Na;var ec=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_H,ec);ec;var sc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_I,sc);sc;var Pc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_J,Pc);Pc;var tc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_K,tc);tc;var Qc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_L,Qc);Qc;var uc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_M,
uc);uc;var vc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_N,vc);vc;var wc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_O,wc);wc;var fc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_P,fc);fc;var xc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_Q,xc);xc;var hd=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_R,hd);hd;var Sc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_S,Sc);Sc;var id=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_T,
id);id;var Tc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_U,Tc);Tc;var Uc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_V,Uc);Uc;var gc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_W,gc);gc;var Vc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_X,Vc);Vc;var Bc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_Y,Bc);Bc;var jd=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_Z,jd);jd;var ic=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_0,
ic);ic;var kd=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_1,kd);kd;var jc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_2,jc);jc;var Dc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_3,Dc);Dc;var nc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_4,nc);nc;var Gc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_5,Gc);Gc;var Jb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_6,Jb);
Jb;var $c=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_7,$c);$c;var Wb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_8,Wb);Wb;var Jc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_9,Jc);Jc;var Kc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_EQUALS,Kc);Kc;var Lc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_SLASH,Lc);Lc;var Ij=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_BACKSLASH,Ij);Ij;var Gk=
k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_LEFTBRACKET,Gk);Gk;var Jj=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_RIGHTBRACKET,Jj);Jj;var Bd=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_BACKQUOTE,Bd);Bd;var Rd=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_COMMA,Rd);Rd;var ee=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_COMMAND,ee);ee;var Yc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_MINUS,Yc);Yc;var Mc=k.KEY_RELEASED;
this._prefabConvertToType.set(c.KEY_RELEASED_PERIOD,Mc);Mc;var Eb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_QUOTE,Eb);Eb;var Oc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_SEMICOLON,Oc);Oc;var rc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_ANDROIDMENU,rc);rc;var Rc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_ANDROIDSEARCH,Rc);Rc;var yc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_UNKNOWN,yc);yc},_initPrefabConvertToFilterMap:function(){this._prefabConvertToFilter=
new pa;this._prefabConvertToFilter.set(c.CREATED,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.UPDATE,this._NO_FILTER);this._prefabConvertToFilter.set(c.CHANGED,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.NETWORK_CONNECTED,this._NO_FILTER);this._prefabConvertToFilter.set(c.NETWORK_REQUEST,this._NO_FILTER);this._prefabConvertToFilter.set(c.NETWORK_SERVER_EVENT,this._NO_FILTER);this._prefabConvertToFilter.set(c.FILETRANSFER_CONNECTED,this._NO_FILTER);
this._prefabConvertToFilter.set(c.FILETRANSFER_SENDREQUEST,this._NO_FILTER);this._prefabConvertToFilter.set(c.MOUSE_LEFT_CLICK,this._NO_FILTER);this._prefabConvertToFilter.set(c.MOUSE_RIGHT_CLICK,this._NO_FILTER);this._prefabConvertToFilter.set(c.MOUSE_LEFT_DOWN,this._NO_FILTER);this._prefabConvertToFilter.set(c.MOUSE_RIGHT_DOWN,this._NO_FILTER);this._prefabConvertToFilter.set(c.MOUSE_SCROLL,this._NO_FILTER);this._prefabConvertToFilter.set(c.MOUSE_LEFT_CLICKED,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.MOUSE_RIGHT_CLICKED,
this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.MOUSE_ENTERED,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.MOUSE_MOVED,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.MOUSE_LEFT,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.MOUSE_DOWN,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.MOUSE_UP,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.ON_DRAG_START,this._FILTER_VARIABLE_USER_ENTITY);
this._prefabConvertToFilter.set(c.ON_DRAG,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.ON_DRAG_END,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.ON_DRAG_ENTER,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.ON_DRAG_OVER,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.ON_DRAG_LEAVE,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.ON_DROP,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.PHYSICS_COLLISION_START,
this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.PHYSICS_COLLISION_END,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.PHYSICS_SENSOR_START,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.PHYSICS_SENSOR_START_BIPED_FEET,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.PHYSICS_SENSOR_END,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.PHYSICS_SENSOR_END_BIPED_FEET,this._FILTER_VARIABLE_USER_ENTITY);
this._prefabConvertToFilter.set(c.KEY_PRESSED_LOCAL,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.KEY_RELEASED_LOCAL,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.KEY_DOWN_LOCAL,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.KEY_PRESSED,this._NO_FILTER);this._prefabConvertToFilter.set(c.KEY_RELEASED,this._NO_FILTER);this._prefabConvertToFilter.set(c.KEY_PRESSED_ALT,e.Alt);this._prefabConvertToFilter.set(c.KEY_PRESSED_BACKSPACE,e.Backspace);
this._prefabConvertToFilter.set(c.KEY_PRESSED_CAPS_LOCK,e.CapsLock);this._prefabConvertToFilter.set(c.KEY_PRESSED_CONTROL,e.Control);this._prefabConvertToFilter.set(c.KEY_PRESSED_DELETE,e.Delete);this._prefabConvertToFilter.set(c.KEY_PRESSED_DOWN,e.Down);this._prefabConvertToFilter.set(c.KEY_PRESSED_END,e.End);this._prefabConvertToFilter.set(c.KEY_PRESSED_ENTER,e.Enter);this._prefabConvertToFilter.set(c.KEY_PRESSED_ESCAPE,e.Escape);this._prefabConvertToFilter.set(c.KEY_PRESSED_F1,e.F1);this._prefabConvertToFilter.set(c.KEY_PRESSED_F10,
e.F10);this._prefabConvertToFilter.set(c.KEY_PRESSED_F11,e.F11);this._prefabConvertToFilter.set(c.KEY_PRESSED_F12,e.F12);this._prefabConvertToFilter.set(c.KEY_PRESSED_F13,e.F13);this._prefabConvertToFilter.set(c.KEY_PRESSED_F14,e.F14);this._prefabConvertToFilter.set(c.KEY_PRESSED_F15,e.F15);this._prefabConvertToFilter.set(c.KEY_PRESSED_F2,e.F2);this._prefabConvertToFilter.set(c.KEY_PRESSED_F3,e.F3);this._prefabConvertToFilter.set(c.KEY_PRESSED_F4,e.F4);this._prefabConvertToFilter.set(c.KEY_PRESSED_F5,
e.F5);this._prefabConvertToFilter.set(c.KEY_PRESSED_F6,e.F6);this._prefabConvertToFilter.set(c.KEY_PRESSED_F7,e.F7);this._prefabConvertToFilter.set(c.KEY_PRESSED_F8,e.F8);this._prefabConvertToFilter.set(c.KEY_PRESSED_F9,e.F9);this._prefabConvertToFilter.set(c.KEY_PRESSED_HOME,e.Home);this._prefabConvertToFilter.set(c.KEY_PRESSED_INSERT,e.Insert);this._prefabConvertToFilter.set(c.KEY_PRESSED_LEFT,e.Left);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_0,e.Numpad0);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_1,
e.Numpad1);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_2,e.Numpad2);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_3,e.Numpad3);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_4,e.Numpad4);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_5,e.Numpad5);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_6,e.Numpad6);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_7,e.Numpad7);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_8,e.Numpad8);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_9,
e.Numpad9);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_ADD,e.NumpadAdd);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_DECIMAL,e.NumpadDecimal);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_DIVIDE,e.NumpadDivide);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_ENTER,e.NumpadEnter);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_MULTIPLY,e.NumpadMultiply);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_SUBTRACT,e.NumpadSubtract);this._prefabConvertToFilter.set(c.KEY_PRESSED_PAGE_DOWN,
e.PageDown);this._prefabConvertToFilter.set(c.KEY_PRESSED_PAGE_UP,e.PageUp);this._prefabConvertToFilter.set(c.KEY_PRESSED_RIGHT,e.Right);this._prefabConvertToFilter.set(c.KEY_PRESSED_SHIFT,e.Shift);this._prefabConvertToFilter.set(c.KEY_PRESSED_SPACE,e.Space);this._prefabConvertToFilter.set(c.KEY_PRESSED_TAB,e.Tab);this._prefabConvertToFilter.set(c.KEY_PRESSED_UP,e.Up);this._prefabConvertToFilter.set(c.KEY_PRESSED_A,e.A);this._prefabConvertToFilter.set(c.KEY_PRESSED_B,e.B);this._prefabConvertToFilter.set(c.KEY_PRESSED_C,
e.C);this._prefabConvertToFilter.set(c.KEY_PRESSED_D,e.D);this._prefabConvertToFilter.set(c.KEY_PRESSED_E,e.E);this._prefabConvertToFilter.set(c.KEY_PRESSED_F,e.F);this._prefabConvertToFilter.set(c.KEY_PRESSED_G,e.G);this._prefabConvertToFilter.set(c.KEY_PRESSED_H,e.H);this._prefabConvertToFilter.set(c.KEY_PRESSED_I,e.I);this._prefabConvertToFilter.set(c.KEY_PRESSED_J,e.J);this._prefabConvertToFilter.set(c.KEY_PRESSED_K,e.K);this._prefabConvertToFilter.set(c.KEY_PRESSED_L,e.L);this._prefabConvertToFilter.set(c.KEY_PRESSED_M,
e.M);this._prefabConvertToFilter.set(c.KEY_PRESSED_N,e.N);this._prefabConvertToFilter.set(c.KEY_PRESSED_O,e.O);this._prefabConvertToFilter.set(c.KEY_PRESSED_P,e.P);this._prefabConvertToFilter.set(c.KEY_PRESSED_Q,e.Q);this._prefabConvertToFilter.set(c.KEY_PRESSED_R,e.R);this._prefabConvertToFilter.set(c.KEY_PRESSED_S,e.S);this._prefabConvertToFilter.set(c.KEY_PRESSED_T,e.T);this._prefabConvertToFilter.set(c.KEY_PRESSED_U,e.U);this._prefabConvertToFilter.set(c.KEY_PRESSED_V,e.V);this._prefabConvertToFilter.set(c.KEY_PRESSED_W,
e.W);this._prefabConvertToFilter.set(c.KEY_PRESSED_X,e.X);this._prefabConvertToFilter.set(c.KEY_PRESSED_Y,e.Y);this._prefabConvertToFilter.set(c.KEY_PRESSED_Z,e.Z);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_0,e.Number0);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_1,e.Number1);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_2,e.Number2);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_3,e.Number3);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_4,e.Number4);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_5,
e.Number5);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_6,e.Number6);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_7,e.Number7);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_8,e.Number8);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_9,e.Number9);this._prefabConvertToFilter.set(c.KEY_PRESSED_EQUALS,e.Equals);this._prefabConvertToFilter.set(c.KEY_PRESSED_SLASH,e.Slash);this._prefabConvertToFilter.set(c.KEY_PRESSED_BACKSLASH,e.Backslash);this._prefabConvertToFilter.set(c.KEY_PRESSED_LEFTBRACKET,
e.LeftBracket);this._prefabConvertToFilter.set(c.KEY_PRESSED_RIGHTBRACKET,e.RightBracket);this._prefabConvertToFilter.set(c.KEY_PRESSED_BACKQUOTE,e.Backquote);this._prefabConvertToFilter.set(c.KEY_PRESSED_COMMA,e.Comma);this._prefabConvertToFilter.set(c.KEY_PRESSED_COMMAND,e.Command);this._prefabConvertToFilter.set(c.KEY_PRESSED_MINUS,e.Minus);this._prefabConvertToFilter.set(c.KEY_PRESSED_PERIOD,e.Period);this._prefabConvertToFilter.set(c.KEY_PRESSED_QUOTE,e.Quote);this._prefabConvertToFilter.set(c.KEY_PRESSED_SEMICOLON,
e.Semicolon);this._prefabConvertToFilter.set(c.KEY_PRESSED_ANDROIDMENU,e.Menu);this._prefabConvertToFilter.set(c.KEY_PRESSED_ANDROIDSEARCH,e.Search);this._prefabConvertToFilter.set(c.KEY_PRESSED_UNKNOWN,e.Unknown);this._prefabConvertToFilter.set(c.KEY_RELEASED_ALT,e.Alt);this._prefabConvertToFilter.set(c.KEY_RELEASED_BACKSPACE,e.Backspace);this._prefabConvertToFilter.set(c.KEY_RELEASED_CAPS_LOCK,e.CapsLock);this._prefabConvertToFilter.set(c.KEY_RELEASED_CONTROL,e.Control);this._prefabConvertToFilter.set(c.KEY_RELEASED_DELETE,
e.Delete);this._prefabConvertToFilter.set(c.KEY_RELEASED_DOWN,e.Down);this._prefabConvertToFilter.set(c.KEY_RELEASED_END,e.End);this._prefabConvertToFilter.set(c.KEY_RELEASED_ENTER,e.Enter);this._prefabConvertToFilter.set(c.KEY_RELEASED_ESCAPE,e.Escape);this._prefabConvertToFilter.set(c.KEY_RELEASED_F1,e.F1);this._prefabConvertToFilter.set(c.KEY_RELEASED_F10,e.F10);this._prefabConvertToFilter.set(c.KEY_RELEASED_F11,e.F11);this._prefabConvertToFilter.set(c.KEY_RELEASED_F12,e.F12);this._prefabConvertToFilter.set(c.KEY_RELEASED_F13,
e.F13);this._prefabConvertToFilter.set(c.KEY_RELEASED_F14,e.F14);this._prefabConvertToFilter.set(c.KEY_RELEASED_F15,e.F15);this._prefabConvertToFilter.set(c.KEY_RELEASED_F2,e.F2);this._prefabConvertToFilter.set(c.KEY_RELEASED_F3,e.F3);this._prefabConvertToFilter.set(c.KEY_RELEASED_F4,e.F4);this._prefabConvertToFilter.set(c.KEY_RELEASED_F5,e.F5);this._prefabConvertToFilter.set(c.KEY_RELEASED_F6,e.F6);this._prefabConvertToFilter.set(c.KEY_RELEASED_F7,e.F7);this._prefabConvertToFilter.set(c.KEY_RELEASED_F8,
e.F8);this._prefabConvertToFilter.set(c.KEY_RELEASED_F9,e.F9);this._prefabConvertToFilter.set(c.KEY_RELEASED_HOME,e.Home);this._prefabConvertToFilter.set(c.KEY_RELEASED_INSERT,e.Insert);this._prefabConvertToFilter.set(c.KEY_RELEASED_LEFT,e.Left);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_0,e.Numpad0);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_1,e.Numpad1);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_2,e.Numpad2);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_3,
e.Numpad3);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_4,e.Numpad4);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_5,e.Numpad5);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_6,e.Numpad6);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_7,e.Numpad7);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_8,e.Numpad8);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_9,e.Numpad9);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_ADD,e.NumpadAdd);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_DECIMAL,
e.NumpadDecimal);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_DIVIDE,e.NumpadDivide);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_ENTER,e.NumpadEnter);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_MULTIPLY,e.NumpadMultiply);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_SUBTRACT,e.NumpadSubtract);this._prefabConvertToFilter.set(c.KEY_RELEASED_PAGE_DOWN,e.PageDown);this._prefabConvertToFilter.set(c.KEY_RELEASED_PAGE_UP,e.PageUp);this._prefabConvertToFilter.set(c.KEY_RELEASED_RIGHT,
e.Right);this._prefabConvertToFilter.set(c.KEY_RELEASED_SHIFT,e.Shift);this._prefabConvertToFilter.set(c.KEY_RELEASED_SPACE,e.Space);this._prefabConvertToFilter.set(c.KEY_RELEASED_TAB,e.Tab);this._prefabConvertToFilter.set(c.KEY_RELEASED_UP,e.Up);this._prefabConvertToFilter.set(c.KEY_RELEASED_A,e.A);this._prefabConvertToFilter.set(c.KEY_RELEASED_B,e.B);this._prefabConvertToFilter.set(c.KEY_RELEASED_C,e.C);this._prefabConvertToFilter.set(c.KEY_RELEASED_D,e.D);this._prefabConvertToFilter.set(c.KEY_RELEASED_E,
e.E);this._prefabConvertToFilter.set(c.KEY_RELEASED_F,e.F);this._prefabConvertToFilter.set(c.KEY_RELEASED_G,e.G);this._prefabConvertToFilter.set(c.KEY_RELEASED_H,e.H);this._prefabConvertToFilter.set(c.KEY_RELEASED_I,e.I);this._prefabConvertToFilter.set(c.KEY_RELEASED_J,e.J);this._prefabConvertToFilter.set(c.KEY_RELEASED_K,e.K);this._prefabConvertToFilter.set(c.KEY_RELEASED_L,e.L);this._prefabConvertToFilter.set(c.KEY_RELEASED_M,e.M);this._prefabConvertToFilter.set(c.KEY_RELEASED_N,e.N);this._prefabConvertToFilter.set(c.KEY_RELEASED_O,
e.O);this._prefabConvertToFilter.set(c.KEY_RELEASED_P,e.P);this._prefabConvertToFilter.set(c.KEY_RELEASED_Q,e.Q);this._prefabConvertToFilter.set(c.KEY_RELEASED_R,e.R);this._prefabConvertToFilter.set(c.KEY_RELEASED_S,e.S);this._prefabConvertToFilter.set(c.KEY_RELEASED_T,e.T);this._prefabConvertToFilter.set(c.KEY_RELEASED_U,e.U);this._prefabConvertToFilter.set(c.KEY_RELEASED_V,e.V);this._prefabConvertToFilter.set(c.KEY_RELEASED_W,e.W);this._prefabConvertToFilter.set(c.KEY_RELEASED_X,e.X);this._prefabConvertToFilter.set(c.KEY_RELEASED_Y,
e.Y);this._prefabConvertToFilter.set(c.KEY_RELEASED_Z,e.Z);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_0,e.Number0);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_1,e.Number1);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_2,e.Number2);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_3,e.Number3);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_4,e.Number4);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_5,e.Number5);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_6,
e.Number6);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_7,e.Number7);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_8,e.Number8);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_9,e.Number9);this._prefabConvertToFilter.set(c.KEY_RELEASED_EQUALS,e.Equals);this._prefabConvertToFilter.set(c.KEY_RELEASED_SLASH,e.Slash);this._prefabConvertToFilter.set(c.KEY_RELEASED_BACKSLASH,e.Backslash);this._prefabConvertToFilter.set(c.KEY_RELEASED_LEFTBRACKET,e.LeftBracket);this._prefabConvertToFilter.set(c.KEY_RELEASED_RIGHTBRACKET,
e.RightBracket);this._prefabConvertToFilter.set(c.KEY_RELEASED_BACKQUOTE,e.Backquote);this._prefabConvertToFilter.set(c.KEY_RELEASED_COMMA,e.Comma);this._prefabConvertToFilter.set(c.KEY_RELEASED_COMMAND,e.Command);this._prefabConvertToFilter.set(c.KEY_RELEASED_MINUS,e.Minus);this._prefabConvertToFilter.set(c.KEY_RELEASED_PERIOD,e.Period);this._prefabConvertToFilter.set(c.KEY_RELEASED_QUOTE,e.Quote);this._prefabConvertToFilter.set(c.KEY_RELEASED_SEMICOLON,e.Semicolon);this._prefabConvertToFilter.set(c.KEY_RELEASED_ANDROIDMENU,
e.Menu);this._prefabConvertToFilter.set(c.KEY_RELEASED_ANDROIDSEARCH,e.Search);this._prefabConvertToFilter.set(c.KEY_RELEASED_UNKNOWN,e.Unknown)},__class__:wg});var Ih=function(){this._init()};j["tools.spark.sliced.services.std.input.core.Input"]=Ih;Ih.__name__=!0;Ih.__interfaces__=[jg];Ih.__super__=Ma;Ih.prototype=z(Ma.prototype,{_init:function(){w.logger.info("Init Input std Service...",null);this.keyboard=new xg;this.pointer=new Jh;this.mouse=new yg},update:function(){this.keyboard.update();this.pointer.update();
this.mouse.update()},__class__:Ih});var Kj=function(){};j["tools.spark.sliced.services.std.input.devices.interfaces.IInputDevice"]=Kj;Kj.__name__=!0;var xg=function(){this._init()};j["tools.spark.sliced.services.std.input.devices.core.KeyboardDevice"]=xg;xg.__name__=!0;xg.__interfaces__=[Kj];xg.prototype={_init:function(){this._keysDown=[];this._keysUp=[];this._keysJustPressed=new pa;this._keysJustReleased=new pa;S._platform.getKeyboard().down.connect(v(this,this._onKeyDown));S._platform.getKeyboard().up.connect(v(this,
this._onKeyUp))},_onKeyDown:function(a){this._keysDown.push(a.key)},_onKeyUp:function(a){this._keysUp.push(a.key)},update:function(){this._keysJustPressed=new pa;for(this._keysJustReleased=new pa;0<this._keysDown.length;){var a=this._keysDown.pop();this._keysJustPressed.set(a,!0);!0;B.event.raiseEvent(k.KEY_PRESSED,a)}for(;0<this._keysUp.length;)a=this._keysUp.pop(),this._keysJustReleased.set(a,!0),!0,B.event.raiseEvent(k.KEY_RELEASED,a)},registerTrigger:function(){},isKeyDown:function(a){return S._platform.getKeyboard().isDown(a)},
isKeyPressed:function(a){return this._keysJustPressed.exists(a)},isKeyReleased:function(a){return this._keysJustReleased.exists(a)},__class__:xg};var yg=function(){this._init()};j["tools.spark.sliced.services.std.input.devices.core.MouseDevice"]=yg;yg.__name__=!0;yg.__interfaces__=[Kj];yg.prototype={getScroll:function(){return this.get_scroll()},_init:function(){S._platform.getMouse().scroll.connect(v(this,this._onScroll));S._platform.getMouse().down.connect(v(this,this._onMouseButtonDown));this._oldScroll=
0;this._mouseRightDown=this._mouseLeftDown=this._scrollTriggered=!1},update:function(){this._scrollTriggered?(B.event.raiseEvent(k.MOUSE_SCROLL),this._scrollTriggered=!1):this._oldScroll=0;this._mouseLeftDown&&(B.event.raiseEvent(k.MOUSE_LEFT_DOWN),this._mouseLeftDown=!1);this._mouseRightDown&&(B.event.raiseEvent(k.MOUSE_RIGHT_DOWN),this._mouseRightDown=!1)},get_scroll:function(){return this._oldScroll},_onScroll:function(a){this._scrollTriggered=!0;this._oldScroll=a},_onMouseButtonDown:function(a){a.button==
Ga.Left?this._mouseLeftDown=!0:a.button==Ga.Right&&(this._mouseRightDown=!0)},registerTrigger:function(){},isDown:function(a){return S._platform.getMouse().isDown(a)},__class__:yg,__properties__:{get_scroll:"get_scroll"}};var Jh=function(){this._init()};j["tools.spark.sliced.services.std.input.devices.core.PointerDevice"]=Jh;Jh.__name__=!0;Jh.__interfaces__=[Kj];Jh.prototype={_init:function(){this._registeredTriggers=new pa},update:function(){this._oldX=this.currentX;this._oldY=this.currentY;this.currentX=
S._platform.getPointer().get_x();this.currentY=S._platform.getPointer().get_y()},distX:function(){return this.currentX-this._oldX},distY:function(){return this.currentY-this._oldY},isDown:function(){return S._platform.getPointer().isDown()},_setTrigger:function(a,b){if(null==this._registeredTriggers.get(a)){var d=new Ca;this._registeredTriggers.set(a,d);d}this._registeredTriggers.get(a).set(b,b);b},_getTrigger:function(a,b){return null==this._registeredTriggers.get(a)?null:this._registeredTriggers.get(a).get(b)},
registerTrigger:function(a,b){this._setTrigger(a,b)},submitPointerEvent:function(a,b){null!=this._getTrigger(a,b)&&B.event.raiseEvent(a,b)},_onMove:function(a){w.logger.error("PointerMove: "+a.viewX+", "+a.viewY,null)},__class__:Jh};var Kh=function(){this._init()};j["tools.spark.sliced.services.std.logic.core.Logic"]=Kh;Kh.__name__=!0;Kh.__interfaces__=[th];Kh.__super__=Ma;Kh.prototype=z(Ma.prototype,{_init:function(){w.logger.info("Init Logic std Service...",null);this.gameFactory=new zg;this.rootGameEntitiesRunning=
new E;this.rootGameEntitiesPaused=new E;this._gameEntitiesByName=new E},createInterpreters:function(){this.scriptInterpreter=new Lh;this.gmlInterpreter=new Ag},update:function(){for(var a=this.rootGameEntitiesRunning.iterator();a.hasNext();)a.next().doActions()},startAction:function(a,b){return a.startAction(b)},createAndRun:function(a){var b=this.gameFactory.createGameEntity(a);this.rootGameEntitiesRunning.set(a,b);b;w.logger.warn("Logic Service: Create and Running entity: "+a,null)},createAndPause:function(a){var b=
this.gameFactory.createGameEntity(a);this.rootGameEntitiesPaused.set(a,b);b},getEntityByName:function(a){return this._gameEntitiesByName.get(a)},registerEntityByName:function(a){null!=a.getState("name")&&this._gameEntitiesByName.set(a.getState("name"),a)},replace:function(a,b,d,c){return(new mb(b,d)).replace(a,c)},getDt:function(){return B.dt},reflectField:function(a,b){return ha.getProperty(a,b)},reflectFieldOfField:function(a,b,d){return ha.getProperty(ha.getProperty(a,b),d)},xmlToString:function(a){return Ge.print(a)},
__class__:Kh});var Zc=function(){};j["tools.spark.sliced.services.std.logic.gde.interfaces.IGameBase"]=Zc;Zc.__name__=!0;Zc.prototype={__class__:Zc};var ib=function(){};j["tools.spark.sliced.services.std.logic.gde.core.AGameBase"]=ib;ib.__name__=!0;ib.__interfaces__=[Zc];ib.prototype={__class__:ib};var Mh=function(){};j["tools.spark.sliced.services.std.logic.gde.interfaces.IGameAction"]=Mh;Mh.__name__=!0;Mh.__interfaces__=[Zc];Mh.prototype={__class__:Mh};var ef=function(){this._init()};j["tools.spark.sliced.services.std.logic.gde.core.GameAction"]=
ef;ef.__name__=!0;ef.__interfaces__=[Mh];ef.__super__=ib;ef.prototype=z(ib.prototype,{_init:function(){this.scriptSet=[];this.gameStateSet=new E},addState:function(a){null!=this.gameStateSet.get(a.id)&&w.logger.warn("A State with id "+a.id+" already exists in this Action.",null);this.gameStateSet.set(a.id,a);a},doPass:function(){for(var a=0,b=this.scriptSet;a<b.length;){var d=b[a];++a;-1==d?B.logic.gmlInterpreter.run(d,function(a){var b=new E;b.set("me",a.parentEntity);b.set("parent",a.parentEntity.parentEntity);
return b}(this)):!1==B.logic.scriptInterpreter.run(d,function(a){var b=new E;b.set("me",a.parentEntity);b.set("parent",a.parentEntity.parentEntity);return b}(this))&&(w.logger.error("Error: Failed to run Action ["+this.id+"].",null),this.parentEntity.stopAction(this.id))}},getState:function(a){return null==this.gameStateSet.get(a)?null:this.gameStateSet.get(a).value},setState:function(a,b){this.gameStateSet.get(a).value=b;return this.gameStateSet.get(a).value},__class__:ef});var Lj=function(){};j["tools.spark.sliced.services.std.logic.gde.interfaces.IGameClassInstantiator"]=
Lj;Lj.__name__=!0;Lj.prototype={__class__:Lj};var Bg=function(a,b,d,c){w.logger.info("Creating Game Class Instantiator",null);this._xmlNodeTypeToNodeName=a;this._xmlConcurrencyNameToType=b;this._xmlStateNameToType=d;this._xmlEventNameToPrefab=c;this._init()};j["tools.spark.sliced.services.std.logic.gde.core.GameClassInstantiator"]=Bg;Bg.__name__=!0;Bg.__interfaces__=[Lj];Bg.prototype={_init:function(){},instantiateEntity:function(a,b){var d=new Ad;d.parentEntity=b;d.gameForm=this.instantiateForm(a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.FORM)).next(),
d);if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.STATES)).hasNext())for(var c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.STATES)).next().elements();c.hasNext();){var f=c.next();d.addState(this.instantiateState(f,d))}if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.ACTIONS)).hasNext())for(c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.ACTIONS)).next().elements();c.hasNext();)f=this.instantiateAction(c.next(),d),d.addAction(f);if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.TRIGGERS)).hasNext())for(c=
a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.TRIGGERS)).next().elements();c.hasNext();)f=this.instantiateTrigger(c.next(),d),B.event.addTrigger(f);B.logic.registerEntityByName(d);B.event.raiseEvent(k.CREATED,d);return d},instantiateForm:function(a,b){var d=new Cg;d.parentEntity=b;if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.STATES)).hasNext())for(var c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.STATES)).next().elements();c.hasNext();){var f=c.next();d.addState(this.instantiateState(f,
b))}d.gameSpace=this.instantiateSpace(a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.SPACE)).next(),b);return d},instantiateSpace:function(a,b){var d=new ff;d.parentEntity=b;if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.ENTITIES)).hasNext())for(var c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.ENTITIES)).next().elements();c.hasNext();){var f=c.next();d.gameEntitySet.push(this.instantiateEntity(f,b))}return d},instantiateState:function(a,b){var d=new Dg;d.parentEntity=b;d.id=a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.ID)).next().firstChild().get_nodeValue();
var c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.TYPE)).next().firstChild().get_nodeValue();d.type=this._xmlStateNameToType.get(c);c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.VALUE)).next().firstChild().get_nodeValue();switch(d.type[1]){case 3:d.value="true"==c||"True"==c||"t"==c||"T"==c;break;case 2:d.value=parseFloat(c);break;case 1:d.value=r.parseInt(c);break;case 4:d.value=c;break;case 0:d.value=null}return d},instantiateAction:function(a,b){var d=new ef;d.parentEntity=b;d.id=a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.ID)).next().firstChild().get_nodeValue();
var c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.CONCURRENCY)).next().firstChild().get_nodeValue();d.concurrency=this._xmlConcurrencyNameToType.get(c);for(c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.SCRIPTS)).next().elements();c.hasNext();){var f=c.next();if(f.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+f.nodeType));f.nodeName==this._xmlNodeTypeToNodeName.get(l.SCRIPT)?d.scriptSet.push(B.logic.scriptInterpreter.hash(function(){if(f.nodeType!=q.Document&&
f.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element or Document but found "+f.nodeType));return f.children[0]}(this).get_nodeValue())):d.scriptSet.push(B.logic.gmlInterpreter.hash(function(){if(f.nodeType!=q.Document&&f.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element or Document but found "+f.nodeType));return f.children[0]}(this).get_nodeValue()))}if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.STATES)).hasNext())for(c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.STATES)).next().elements();c.hasNext();){var i=
c.next();d.addState(this.instantiateState(i,b))}return d},instantiateTrigger:function(a,b){var d=new gf;d.parentEntity=b;var c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.EVENT)).next().firstChild().get_nodeValue();d.eventPrefab=this._xmlEventNameToPrefab.get(c);for(c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(l.SCRIPTS)).next().elements();c.hasNext();){var f=c.next();if(f.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+f.nodeType));f.nodeName==this._xmlNodeTypeToNodeName.get(l.SCRIPT)?
d.scriptSet.push(B.logic.scriptInterpreter.hash(function(){if(f.nodeType!=q.Document&&f.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element or Document but found "+f.nodeType));return f.children[0]}(this).get_nodeValue())):d.scriptSet.push(B.logic.gmlInterpreter.hash(function(){if(f.nodeType!=q.Document&&f.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element or Document but found "+f.nodeType));return f.children[0]}(this).get_nodeValue()))}return d},__class__:Bg};
var Mj=function(){};j["tools.spark.sliced.services.std.logic.gde.interfaces.IGameClassParser"]=Mj;Mj.__name__=!0;Mj.prototype={__class__:Mj};var Nh=function(){w.logger.info("Creating Game Class Parser",null);this._init()};j["tools.spark.sliced.services.std.logic.gde.core.GameClassParser"]=Nh;Nh.__name__=!0;Nh.__interfaces__=[Mj];Nh.prototype={_init:function(){this._initNodeNamesMap();this._initNodeTypesMap();this._initGameTypesMap();this._initNodeToGameMap();this._initFileExtensionsMap();this._initExtendableNodesMap();
this._initMergableNodesMap();this._initTargetMergableNodesMap();this._initArrayNodesMap();this._initConcurrencyTypeToNameMap();this._initConcurrencyNameToTypeMap();this._initStateTypeToNameMap();this._initStateNameToTypeMap();this._initEventPrefabToNameMap();this._initEventNameToPrefabMap();this._gameClassValidator=new Eg(this._xmlNodeTypeToNodeName,this._xmlConcurrencyTypeToName,this._xmlStateTypeToName,this._xmlEventPrefabToName);this._gameClassInstantiator=new Bg(this._xmlNodeTypeToNodeName,this._xmlConcurrencyNameToType,
this._xmlStateNameToType,this._xmlEventNameToPrefab)},_initNodeNamesMap:function(){this._xmlNodeTypeToNodeName=new pa;this._xmlNodeTypeToNodeName.set(l.ACTION,"Action");"Action";this._xmlNodeTypeToNodeName.set(l.ACTIONS,"Actions");"Actions";this._xmlNodeTypeToNodeName.set(l.ENTITIES,"Entities");"Entities";this._xmlNodeTypeToNodeName.set(l.ENTITY,"Entity");"Entity";this._xmlNodeTypeToNodeName.set(l.FORM,"Form");"Form";this._xmlNodeTypeToNodeName.set(l.SCRIPTS,"Scripts");"Scripts";this._xmlNodeTypeToNodeName.set(l.SCRIPT,
"Script");"Script";this._xmlNodeTypeToNodeName.set(l.GML,"Gml");"Gml";this._xmlNodeTypeToNodeName.set(l.TRIGGERS,"Triggers");"Triggers";this._xmlNodeTypeToNodeName.set(l.TRIGGER,"Trigger");"Trigger";this._xmlNodeTypeToNodeName.set(l.EVENT,"Event");"Event";this._xmlNodeTypeToNodeName.set(l.CONCURRENCY,"Concurrency");"Concurrency";this._xmlNodeTypeToNodeName.set(l.ID,"Id");"Id";this._xmlNodeTypeToNodeName.set(l.SPACE,"Space");"Space";this._xmlNodeTypeToNodeName.set(l.STATE,"State");"State";this._xmlNodeTypeToNodeName.set(l.STATES,
"States");"States";this._xmlNodeTypeToNodeName.set(l.TYPE,"Type");"Type";this._xmlNodeTypeToNodeName.set(l.VALUE,"Value");"Value";this._xmlNodeTypeToNodeName.set(l.EXTENDS,"Extends");"Extends"},_initNodeTypesMap:function(){this._xmlNodeNameToNodeType=new E;var a=this._xmlNodeTypeToNodeName.get(l.ACTION),b=l.ACTION;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.ACTIONS);b=l.ACTIONS;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.ENTITIES);b=l.ENTITIES;
this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.ENTITY);b=l.ENTITY;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.FORM);b=l.FORM;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.SCRIPTS);b=l.SCRIPTS;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.SCRIPT);b=l.SCRIPT;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.GML);b=l.GML;this._xmlNodeNameToNodeType.set(a,b);b;
a=this._xmlNodeTypeToNodeName.get(l.TRIGGERS);b=l.TRIGGERS;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.TRIGGER);b=l.TRIGGER;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.EVENT);b=l.EVENT;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.CONCURRENCY);b=l.CONCURRENCY;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.ID);b=l.ID;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.SPACE);
b=l.SPACE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.STATE);b=l.STATE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.STATES);b=l.STATES;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.TYPE);b=l.TYPE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.VALUE);b=l.VALUE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(l.EXTENDS);b=l.EXTENDS;this._xmlNodeNameToNodeType.set(a,
b);b},_initGameTypesMap:function(){this._xmlGameTypeToNodeName=new pa;var a=this._xmlNodeTypeToNodeName.get(l.ENTITY);this._xmlGameTypeToNodeName.set(Y.ENTITY,a);a;a=this._xmlNodeTypeToNodeName.get(l.STATE);this._xmlGameTypeToNodeName.set(Y.STATE,a);a;a=this._xmlNodeTypeToNodeName.get(l.SPACE);this._xmlGameTypeToNodeName.set(Y.SPACE,a);a;a=this._xmlNodeTypeToNodeName.get(l.FORM);this._xmlGameTypeToNodeName.set(Y.FORM,a);a;a=this._xmlNodeTypeToNodeName.get(l.ACTION);this._xmlGameTypeToNodeName.set(Y.ACTION,
a);a;a=this._xmlNodeTypeToNodeName.get(l.TRIGGER);this._xmlGameTypeToNodeName.set(Y.TRIGGER,a);a},_initNodeToGameMap:function(){this._xmlNodeTypeToGameType=new pa;var a=Y.ENTITY;this._xmlNodeTypeToGameType.set(l.ENTITY,a);a;a=Y.STATE;this._xmlNodeTypeToGameType.set(l.STATE,a);a;a=Y.SPACE;this._xmlNodeTypeToGameType.set(l.SPACE,a);a;a=Y.FORM;this._xmlNodeTypeToGameType.set(l.FORM,a);a;a=Y.ACTION;this._xmlNodeTypeToGameType.set(l.ACTION,a);a;a=Y.TRIGGER;this._xmlNodeTypeToGameType.set(l.TRIGGER,a);
a},_initFileExtensionsMap:function(){this._xmlGameTypeToFileExtension=new pa;this._xmlGameTypeToFileExtension.set(Y.ENTITY,"egc");"egc";this._xmlGameTypeToFileExtension.set(Y.STATE,"sgc");"sgc";this._xmlGameTypeToFileExtension.set(Y.SPACE,"pgc");"pgc";this._xmlGameTypeToFileExtension.set(Y.FORM,"fgc");"fgc";this._xmlGameTypeToFileExtension.set(Y.ACTION,"agc");"agc";this._xmlGameTypeToFileExtension.set(Y.TRIGGER,"tgc");"tgc"},_initExtendableNodesMap:function(){this._isNodeExtendable=new pa;this._isNodeExtendable.set(l.ACTION,
!0);!0;this._isNodeExtendable.set(l.ACTIONS,!1);!1;this._isNodeExtendable.set(l.ENTITIES,!1);!1;this._isNodeExtendable.set(l.ENTITY,!0);!0;this._isNodeExtendable.set(l.FORM,!0);!0;this._isNodeExtendable.set(l.SCRIPTS,!1);!1;this._isNodeExtendable.set(l.SCRIPT,!1);!1;this._isNodeExtendable.set(l.GML,!1);!1;this._isNodeExtendable.set(l.TRIGGERS,!1);!1;this._isNodeExtendable.set(l.TRIGGER,!0);!0;this._isNodeExtendable.set(l.EVENT,!1);!1;this._isNodeExtendable.set(l.CONCURRENCY,!1);!1;this._isNodeExtendable.set(l.ID,
!1);!1;this._isNodeExtendable.set(l.SPACE,!0);!0;this._isNodeExtendable.set(l.STATE,!0);!0;this._isNodeExtendable.set(l.STATES,!1);!1;this._isNodeExtendable.set(l.TYPE,!1);!1;this._isNodeExtendable.set(l.VALUE,!1);!1;this._isNodeExtendable.set(l.EXTENDS,!1);!1},_initMergableNodesMap:function(){this._isNodeMergable=new pa;this._isNodeMergable.set(l.ACTION,!1);!1;this._isNodeMergable.set(l.ACTIONS,!0);!0;this._isNodeMergable.set(l.ENTITIES,!0);!0;this._isNodeMergable.set(l.ENTITY,!1);!1;this._isNodeMergable.set(l.FORM,
!0);!0;this._isNodeMergable.set(l.SCRIPTS,!0);!0;this._isNodeMergable.set(l.SCRIPT,!1);!1;this._isNodeMergable.set(l.GML,!1);!1;this._isNodeMergable.set(l.TRIGGERS,!0);!0;this._isNodeMergable.set(l.TRIGGER,!1);!1;this._isNodeMergable.set(l.EVENT,!1);!1;this._isNodeMergable.set(l.CONCURRENCY,!1);!1;this._isNodeMergable.set(l.ID,!1);!1;this._isNodeMergable.set(l.SPACE,!0);!0;this._isNodeMergable.set(l.STATE,!1);!1;this._isNodeMergable.set(l.STATES,!0);!0;this._isNodeMergable.set(l.TYPE,!1);!1;this._isNodeMergable.set(l.VALUE,
!1);!1;this._isNodeMergable.set(l.EXTENDS,!1);!1},_initTargetMergableNodesMap:function(){this._isNodeTargetMergable=new pa;this._isNodeTargetMergable.set(l.ACTION,!0);!0;this._isNodeTargetMergable.set(l.ACTIONS,!1);!1;this._isNodeTargetMergable.set(l.ENTITIES,!1);!1;this._isNodeTargetMergable.set(l.ENTITY,!1);!1;this._isNodeTargetMergable.set(l.FORM,!1);!1;this._isNodeTargetMergable.set(l.SCRIPTS,!1);!1;this._isNodeTargetMergable.set(l.SCRIPT,!1);!1;this._isNodeTargetMergable.set(l.GML,!1);!1;this._isNodeTargetMergable.set(l.TRIGGERS,
!1);!1;this._isNodeTargetMergable.set(l.TRIGGER,!1);!1;this._isNodeTargetMergable.set(l.EVENT,!1);!1;this._isNodeTargetMergable.set(l.CONCURRENCY,!1);!1;this._isNodeTargetMergable.set(l.ID,!1);!1;this._isNodeTargetMergable.set(l.SPACE,!1);!1;this._isNodeTargetMergable.set(l.STATE,!0);!0;this._isNodeTargetMergable.set(l.STATES,!1);!1;this._isNodeTargetMergable.set(l.TYPE,!1);!1;this._isNodeTargetMergable.set(l.VALUE,!1);!1;this._isNodeTargetMergable.set(l.EXTENDS,!1);!1},_initArrayNodesMap:function(){this._isNodeArray=
new pa;this._isNodeArray.set(l.ACTION,!1);!1;this._isNodeArray.set(l.ACTIONS,!0);!0;this._isNodeArray.set(l.ENTITIES,!0);!0;this._isNodeArray.set(l.ENTITY,!1);!1;this._isNodeArray.set(l.FORM,!1);!1;this._isNodeArray.set(l.SCRIPTS,!0);!0;this._isNodeArray.set(l.SCRIPT,!1);!1;this._isNodeArray.set(l.GML,!1);!1;this._isNodeArray.set(l.TRIGGERS,!0);!0;this._isNodeArray.set(l.TRIGGER,!1);!1;this._isNodeArray.set(l.EVENT,!1);!1;this._isNodeArray.set(l.CONCURRENCY,!1);!1;this._isNodeArray.set(l.ID,!1);!1;
this._isNodeArray.set(l.SPACE,!1);!1;this._isNodeArray.set(l.STATE,!1);!1;this._isNodeArray.set(l.STATES,!0);!0;this._isNodeArray.set(l.TYPE,!1);!1;this._isNodeArray.set(l.VALUE,!1);!1;this._isNodeArray.set(l.EXTENDS,!0);!0},_initConcurrencyTypeToNameMap:function(){this._xmlConcurrencyTypeToName=new pa;this._xmlConcurrencyTypeToName.set(Ta.PARALLEL,"Parallel");"Parallel";this._xmlConcurrencyTypeToName.set(Ta.PERSISTENT,"Persistent");"Persistent";this._xmlConcurrencyTypeToName.set(Ta.TRANSIENT,"Transient");
"Transient"},_initConcurrencyNameToTypeMap:function(){this._xmlConcurrencyNameToType=new E;var a=this._xmlConcurrencyTypeToName.get(Ta.PARALLEL),b=Ta.PARALLEL;this._xmlConcurrencyNameToType.set(a,b);b;a=this._xmlConcurrencyTypeToName.get(Ta.PERSISTENT);b=Ta.PERSISTENT;this._xmlConcurrencyNameToType.set(a,b);b;a=this._xmlConcurrencyTypeToName.get(Ta.TRANSIENT);b=Ta.TRANSIENT;this._xmlConcurrencyNameToType.set(a,b);b},_initStateTypeToNameMap:function(){this._xmlStateTypeToName=new pa;this._xmlStateTypeToName.set(K.DYNAMIC,
"Dynamic");"Dynamic";this._xmlStateTypeToName.set(K.BOOLEAN,"Boolean");"Boolean";this._xmlStateTypeToName.set(K.DECIMAL,"Decimal");"Decimal";this._xmlStateTypeToName.set(K.INTEGER,"Integer");"Integer";this._xmlStateTypeToName.set(K.TEXT,"Text");"Text"},_initStateNameToTypeMap:function(){this._xmlStateNameToType=new E;var a=this._xmlStateTypeToName.get(K.DYNAMIC),b=K.DYNAMIC;this._xmlStateNameToType.set(a,b);b;a=this._xmlStateTypeToName.get(K.BOOLEAN);b=K.BOOLEAN;this._xmlStateNameToType.set(a,b);
b;a=this._xmlStateTypeToName.get(K.DECIMAL);b=K.DECIMAL;this._xmlStateNameToType.set(a,b);b;a=this._xmlStateTypeToName.get(K.INTEGER);b=K.INTEGER;this._xmlStateNameToType.set(a,b);b;a=this._xmlStateTypeToName.get(K.TEXT);b=K.TEXT;this._xmlStateNameToType.set(a,b);b},_initEventPrefabToNameMap:function(){this._xmlEventPrefabToName=new pa;this._xmlEventPrefabToName.set(c.CREATED,"Created");"Created";this._xmlEventPrefabToName.set(c.UPDATE,"Update");"Update";this._xmlEventPrefabToName.set(c.CHANGED,"Changed");
"Changed";this._xmlEventPrefabToName.set(c.NETWORK_CONNECTED,"NetworkConnected");"NetworkConnected";this._xmlEventPrefabToName.set(c.NETWORK_REQUEST,"NetworkRequest");"NetworkRequest";this._xmlEventPrefabToName.set(c.NETWORK_SERVER_EVENT,"NetworkServerEvent");"NetworkServerEvent";this._xmlEventPrefabToName.set(c.FILETRANSFER_CONNECTED,"FileTransferConnected");"FileTransferConnected";this._xmlEventPrefabToName.set(c.FILETRANSFER_SENDREQUEST,"FileTransferRequest");"FileTransferRequest";this._xmlEventPrefabToName.set(c.MOUSE_LEFT_CLICK,
"MouseLeftClick");"MouseLeftClick";this._xmlEventPrefabToName.set(c.MOUSE_RIGHT_CLICK,"MouseRightClick");"MouseRightClick";this._xmlEventPrefabToName.set(c.MOUSE_LEFT_DOWN,"MouseLeftDown");"MouseLeftDown";this._xmlEventPrefabToName.set(c.MOUSE_RIGHT_DOWN,"MouseRightDown");"MouseRightDown";this._xmlEventPrefabToName.set(c.MOUSE_SCROLL,"MouseScroll");"MouseScroll";this._xmlEventPrefabToName.set(c.MOUSE_LEFT_CLICKED,"MouseLeftClicked");"MouseLeftClicked";this._xmlEventPrefabToName.set(c.MOUSE_RIGHT_CLICKED,
"MouseRightClicked");"MouseRightClicked";this._xmlEventPrefabToName.set(c.MOUSE_ENTERED,"MouseEntered");"MouseEntered";this._xmlEventPrefabToName.set(c.MOUSE_MOVED,"MouseMoved");"MouseMoved";this._xmlEventPrefabToName.set(c.MOUSE_LEFT,"MouseLeft");"MouseLeft";this._xmlEventPrefabToName.set(c.MOUSE_DOWN,"MouseDown");"MouseDown";this._xmlEventPrefabToName.set(c.MOUSE_UP,"MouseUp");"MouseUp";this._xmlEventPrefabToName.set(c.ON_DRAG_START,"OnDragStart");"OnDragStart";this._xmlEventPrefabToName.set(c.ON_DRAG,
"OnDrag");"OnDrag";this._xmlEventPrefabToName.set(c.ON_DRAG_END,"OnDragEnd");"OnDragEnd";this._xmlEventPrefabToName.set(c.ON_DRAG_ENTER,"OnDragEnter");"OnDragEnter";this._xmlEventPrefabToName.set(c.ON_DRAG_OVER,"OnDragOver");"OnDragOver";this._xmlEventPrefabToName.set(c.ON_DRAG_LEAVE,"OnDragLeave");"OnDragLeave";this._xmlEventPrefabToName.set(c.ON_DROP,"OnDrop");"OnDrop";this._xmlEventPrefabToName.set(c.PHYSICS_COLLISION_START,"PhysicsCollisionStart");"PhysicsCollisionStart";this._xmlEventPrefabToName.set(c.PHYSICS_COLLISION_END,
"PhysicsCollisionEnd");"PhysicsCollisionEnd";this._xmlEventPrefabToName.set(c.PHYSICS_SENSOR_START,"PhysicsSensorStart");"PhysicsSensorStart";this._xmlEventPrefabToName.set(c.PHYSICS_SENSOR_START_BIPED_FEET,"PhysicsSensorStartBipedFeet");"PhysicsSensorStartBipedFeet";this._xmlEventPrefabToName.set(c.PHYSICS_SENSOR_END,"PhysicsSensorEnd");"PhysicsSensorEnd";this._xmlEventPrefabToName.set(c.PHYSICS_SENSOR_END_BIPED_FEET,"PhysicsSensorEndBipedFeet");"PhysicsSensorEndBipedFeet";this._xmlEventPrefabToName.set(c.KEY_PRESSED_LOCAL,
"KeyPressedLocal");"KeyPressedLocal";this._xmlEventPrefabToName.set(c.KEY_RELEASED_LOCAL,"KeyReleasedLocal");"KeyReleasedLocal";this._xmlEventPrefabToName.set(c.KEY_DOWN_LOCAL,"KeyDownLocal");"KeyDownLocal";this._xmlEventPrefabToName.set(c.KEY_PRESSED,"KeyPressed");"KeyPressed";this._xmlEventPrefabToName.set(c.KEY_RELEASED,"KeyReleased");"KeyReleased";this._xmlEventPrefabToName.set(c.KEY_PRESSED_ALT,"KeyPressed_Alt");"KeyPressed_Alt";this._xmlEventPrefabToName.set(c.KEY_PRESSED_BACKSPACE,"KeyPressed_Backspace");
"KeyPressed_Backspace";this._xmlEventPrefabToName.set(c.KEY_PRESSED_CAPS_LOCK,"KeyPressed_Capslock");"KeyPressed_Capslock";this._xmlEventPrefabToName.set(c.KEY_PRESSED_CONTROL,"KeyPressed_Control");"KeyPressed_Control";this._xmlEventPrefabToName.set(c.KEY_PRESSED_DELETE,"KeyPressed_Delete");"KeyPressed_Delete";this._xmlEventPrefabToName.set(c.KEY_PRESSED_DOWN,"KeyPressed_Down");"KeyPressed_Down";this._xmlEventPrefabToName.set(c.KEY_PRESSED_END,"KeyPressed_End");"KeyPressed_End";this._xmlEventPrefabToName.set(c.KEY_PRESSED_ENTER,
"KeyPressed_Enter");"KeyPressed_Enter";this._xmlEventPrefabToName.set(c.KEY_PRESSED_ESCAPE,"KeyPressed_Escape");"KeyPressed_Escape";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F1,"KeyPressed_F1");"KeyPressed_F1";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F10,"KeyPressed_F10");"KeyPressed_F10";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F11,"KeyPressed_F11");"KeyPressed_F11";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F12,"KeyPressed_F12");"KeyPressed_F12";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F13,
"KeyPressed_F13");"KeyPressed_F13";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F14,"KeyPressed_F14");"KeyPressed_F14";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F15,"KeyPressed_F15");"KeyPressed_F15";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F2,"KeyPressed_F2");"KeyPressed_F2";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F3,"KeyPressed_F3");"KeyPressed_F3";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F4,"KeyPressed_F4");"KeyPressed_F4";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F5,"KeyPressed_F5");
"KeyPressed_F5";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F6,"KeyPressed_F6");"KeyPressed_F6";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F7,"KeyPressed_F7");"KeyPressed_F7";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F8,"KeyPressed_F8");"KeyPressed_F8";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F9,"KeyPressed_F9");"KeyPressed_F9";this._xmlEventPrefabToName.set(c.KEY_PRESSED_HOME,"KeyPressed_Home");"KeyPressed_Home";this._xmlEventPrefabToName.set(c.KEY_PRESSED_INSERT,"KeyPressed_Insert");"KeyPressed_Insert";
this._xmlEventPrefabToName.set(c.KEY_PRESSED_LEFT,"KeyPressed_Left");"KeyPressed_Left";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_0,"KeyPressed_Num0");"KeyPressed_Num0";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_1,"KeyPressed_Num1");"KeyPressed_Num1";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_2,"KeyPressed_Num2");"KeyPressed_Num2";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_3,"KeyPressed_Num3");"KeyPressed_Num3";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_4,
"KeyPressed_Num4");"KeyPressed_Num4";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_5,"KeyPressed_Num5");"KeyPressed_Num5";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_6,"KeyPressed_Num6");"KeyPressed_Num6";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_7,"KeyPressed_Num7");"KeyPressed_Num7";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_8,"KeyPressed_Num8");"KeyPressed_Num8";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_9,"KeyPressed_Num9");"KeyPressed_Num9";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_ADD,
"KeyPressed_Add");"KeyPressed_Add";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_DECIMAL,"KeyPressed_Decimal");"KeyPressed_Decimal";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_DIVIDE,"KeyPressed_Divide");"KeyPressed_Divide";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_ENTER,"KeyPressed_Enter");"KeyPressed_Enter";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_MULTIPLY,"KeyPressed_Multiply");"KeyPressed_Multiply";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_SUBTRACT,
"KeyPressed_Subtract");"KeyPressed_Subtract";this._xmlEventPrefabToName.set(c.KEY_PRESSED_PAGE_DOWN,"KeyPressed_Pagedown");"KeyPressed_Pagedown";this._xmlEventPrefabToName.set(c.KEY_PRESSED_PAGE_UP,"KeyPressed_Pageup");"KeyPressed_Pageup";this._xmlEventPrefabToName.set(c.KEY_PRESSED_RIGHT,"KeyPressed_Right");"KeyPressed_Right";this._xmlEventPrefabToName.set(c.KEY_PRESSED_SHIFT,"KeyPressed_Shift");"KeyPressed_Shift";this._xmlEventPrefabToName.set(c.KEY_PRESSED_SPACE,"KeyPressed_Space");"KeyPressed_Space";
this._xmlEventPrefabToName.set(c.KEY_PRESSED_TAB,"KeyPressed_Tab");"KeyPressed_Tab";this._xmlEventPrefabToName.set(c.KEY_PRESSED_UP,"KeyPressed_Up");"KeyPressed_Up";this._xmlEventPrefabToName.set(c.KEY_PRESSED_A,"KeyPressed_A");"KeyPressed_A";this._xmlEventPrefabToName.set(c.KEY_PRESSED_B,"KeyPressed_B");"KeyPressed_B";this._xmlEventPrefabToName.set(c.KEY_PRESSED_C,"KeyPressed_C");"KeyPressed_C";this._xmlEventPrefabToName.set(c.KEY_PRESSED_D,"KeyPressed_D");"KeyPressed_D";this._xmlEventPrefabToName.set(c.KEY_PRESSED_E,
"KeyPressed_E");"KeyPressed_E";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F,"KeyPressed_F");"KeyPressed_F";this._xmlEventPrefabToName.set(c.KEY_PRESSED_G,"KeyPressed_G");"KeyPressed_G";this._xmlEventPrefabToName.set(c.KEY_PRESSED_H,"KeyPressed_H");"KeyPressed_H";this._xmlEventPrefabToName.set(c.KEY_PRESSED_I,"KeyPressed_I");"KeyPressed_I";this._xmlEventPrefabToName.set(c.KEY_PRESSED_J,"KeyPressed_J");"KeyPressed_J";this._xmlEventPrefabToName.set(c.KEY_PRESSED_K,"KeyPressed_K");"KeyPressed_K";this._xmlEventPrefabToName.set(c.KEY_PRESSED_L,
"KeyPressed_L");"KeyPressed_L";this._xmlEventPrefabToName.set(c.KEY_PRESSED_M,"KeyPressed_M");"KeyPressed_M";this._xmlEventPrefabToName.set(c.KEY_PRESSED_N,"KeyPressed_N");"KeyPressed_N";this._xmlEventPrefabToName.set(c.KEY_PRESSED_O,"KeyPressed_O");"KeyPressed_O";this._xmlEventPrefabToName.set(c.KEY_PRESSED_P,"KeyPressed_P");"KeyPressed_P";this._xmlEventPrefabToName.set(c.KEY_PRESSED_Q,"KeyPressed_Q");"KeyPressed_Q";this._xmlEventPrefabToName.set(c.KEY_PRESSED_R,"KeyPressed_R");"KeyPressed_R";this._xmlEventPrefabToName.set(c.KEY_PRESSED_S,
"KeyPressed_S");"KeyPressed_S";this._xmlEventPrefabToName.set(c.KEY_PRESSED_T,"KeyPressed_T");"KeyPressed_T";this._xmlEventPrefabToName.set(c.KEY_PRESSED_U,"KeyPressed_U");"KeyPressed_U";this._xmlEventPrefabToName.set(c.KEY_PRESSED_V,"KeyPressed_V");"KeyPressed_V";this._xmlEventPrefabToName.set(c.KEY_PRESSED_W,"KeyPressed_W");"KeyPressed_W";this._xmlEventPrefabToName.set(c.KEY_PRESSED_X,"KeyPressed_X");"KeyPressed_X";this._xmlEventPrefabToName.set(c.KEY_PRESSED_Y,"KeyPressed_Y");"KeyPressed_Y";this._xmlEventPrefabToName.set(c.KEY_PRESSED_Z,
"KeyPressed_Z");"KeyPressed_Z";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_0,"KeyPressed_0");"KeyPressed_0";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_1,"KeyPressed_1");"KeyPressed_1";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_2,"KeyPressed_2");"KeyPressed_2";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_3,"KeyPressed_3");"KeyPressed_3";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_4,"KeyPressed_4");"KeyPressed_4";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_5,
"KeyPressed_5");"KeyPressed_5";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_6,"KeyPressed_6");"KeyPressed_6";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_7,"KeyPressed_7");"KeyPressed_7";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_8,"KeyPressed_8");"KeyPressed_8";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_9,"KeyPressed_9");"KeyPressed_9";this._xmlEventPrefabToName.set(c.KEY_PRESSED_EQUALS,"KeyPressed_Equals");"KeyPressed_Equals";this._xmlEventPrefabToName.set(c.KEY_PRESSED_SLASH,
"KeyPressed_Slash");"KeyPressed_Slash";this._xmlEventPrefabToName.set(c.KEY_PRESSED_BACKSLASH,"KeyPressed_Backslash");"KeyPressed_Backslash";this._xmlEventPrefabToName.set(c.KEY_PRESSED_LEFTBRACKET,"KeyPressed_LeftBracket");"KeyPressed_LeftBracket";this._xmlEventPrefabToName.set(c.KEY_PRESSED_RIGHTBRACKET,"KeyPressed_RightBracket");"KeyPressed_RightBracket";this._xmlEventPrefabToName.set(c.KEY_PRESSED_BACKQUOTE,"KeyPressed_Backquote");"KeyPressed_Backquote";this._xmlEventPrefabToName.set(c.KEY_PRESSED_COMMA,
"KeyPressed_Comma");"KeyPressed_Comma";this._xmlEventPrefabToName.set(c.KEY_PRESSED_COMMAND,"KeyPressed_Command");"KeyPressed_Command";this._xmlEventPrefabToName.set(c.KEY_PRESSED_MINUS,"KeyPressed_Minus");"KeyPressed_Minus";this._xmlEventPrefabToName.set(c.KEY_PRESSED_PERIOD,"KeyPressed_Period");"KeyPressed_Period";this._xmlEventPrefabToName.set(c.KEY_PRESSED_QUOTE,"KeyPressed_Quote");"KeyPressed_Quote";this._xmlEventPrefabToName.set(c.KEY_PRESSED_SEMICOLON,"KeyPressed_Semicolon");"KeyPressed_Semicolon";
this._xmlEventPrefabToName.set(c.KEY_PRESSED_ANDROIDMENU,"KeyPressed_AndroidMenu");"KeyPressed_AndroidMenu";this._xmlEventPrefabToName.set(c.KEY_PRESSED_ANDROIDSEARCH,"KeyPressed_AndroidSearch");"KeyPressed_AndroidSearch";this._xmlEventPrefabToName.set(c.KEY_PRESSED_UNKNOWN,"KeyPressed_Unknown");"KeyPressed_Unknown";this._xmlEventPrefabToName.set(c.KEY_RELEASED_ALT,"KeyReleased_Alt");"KeyReleased_Alt";this._xmlEventPrefabToName.set(c.KEY_RELEASED_BACKSPACE,"KeyReleased_Backspace");"KeyReleased_Backspace";
this._xmlEventPrefabToName.set(c.KEY_RELEASED_CAPS_LOCK,"KeyReleased_Capslock");"KeyReleased_Capslock";this._xmlEventPrefabToName.set(c.KEY_RELEASED_CONTROL,"KeyReleased_Control");"KeyReleased_Control";this._xmlEventPrefabToName.set(c.KEY_RELEASED_DELETE,"KeyReleased_Delete");"KeyReleased_Delete";this._xmlEventPrefabToName.set(c.KEY_RELEASED_DOWN,"KeyReleased_Down");"KeyReleased_Down";this._xmlEventPrefabToName.set(c.KEY_RELEASED_END,"KeyReleased_End");"KeyReleased_End";this._xmlEventPrefabToName.set(c.KEY_RELEASED_ENTER,
"KeyReleased_Enter");"KeyReleased_Enter";this._xmlEventPrefabToName.set(c.KEY_RELEASED_ESCAPE,"KeyReleased_Escape");"KeyReleased_Escape";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F1,"KeyReleased_F1");"KeyReleased_F1";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F10,"KeyReleased_F10");"KeyReleased_F10";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F11,"KeyReleased_F11");"KeyReleased_F11";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F12,"KeyReleased_F12");"KeyReleased_F12";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F13,
"KeyReleased_F13");"KeyReleased_F13";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F14,"KeyReleased_F14");"KeyReleased_F14";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F15,"KeyReleased_F15");"KeyReleased_F15";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F2,"KeyReleased_F2");"KeyReleased_F2";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F3,"KeyReleased_F3");"KeyReleased_F3";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F4,"KeyReleased_F4");"KeyReleased_F4";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F5,
"KeyReleased_F5");"KeyReleased_F5";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F6,"KeyReleased_F6");"KeyReleased_F6";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F7,"KeyReleased_F7");"KeyReleased_F7";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F8,"KeyReleased_F8");"KeyReleased_F8";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F9,"KeyReleased_F9");"KeyReleased_F9";this._xmlEventPrefabToName.set(c.KEY_RELEASED_HOME,"KeyReleased_Home");"KeyReleased_Home";this._xmlEventPrefabToName.set(c.KEY_RELEASED_INSERT,
"KeyReleased_Insert");"KeyReleased_Insert";this._xmlEventPrefabToName.set(c.KEY_RELEASED_LEFT,"KeyReleased_Left");"KeyReleased_Left";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_0,"KeyReleased_Num0");"KeyReleased_Num0";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_1,"KeyReleased_Num1");"KeyReleased_Num1";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_2,"KeyReleased_Num2");"KeyReleased_Num2";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_3,"KeyReleased_Num3");"KeyReleased_Num3";
this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_4,"KeyReleased_Num4");"KeyReleased_Num4";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_5,"KeyReleased_Num5");"KeyReleased_Num5";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_6,"KeyReleased_Num6");"KeyReleased_Num6";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_7,"KeyReleased_Num7");"KeyReleased_Num7";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_8,"KeyReleased_Num8");"KeyReleased_Num8";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_9,
"KeyReleased_Num9");"KeyReleased_Num9";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_ADD,"KeyReleased_Add");"KeyReleased_Add";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_DECIMAL,"KeyReleased_Decimal");"KeyReleased_Decimal";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_DIVIDE,"KeyReleased_Divide");"KeyReleased_Divide";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_ENTER,"KeyReleased_Enter");"KeyReleased_Enter";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_MULTIPLY,
"KeyReleased_Multiply");"KeyReleased_Multiply";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_SUBTRACT,"KeyReleased_Subtract");"KeyReleased_Subtract";this._xmlEventPrefabToName.set(c.KEY_RELEASED_PAGE_DOWN,"KeyReleased_Pagedown");"KeyReleased_Pagedown";this._xmlEventPrefabToName.set(c.KEY_RELEASED_PAGE_UP,"KeyReleased_Pageup");"KeyReleased_Pageup";this._xmlEventPrefabToName.set(c.KEY_RELEASED_RIGHT,"KeyReleased_Right");"KeyReleased_Right";this._xmlEventPrefabToName.set(c.KEY_RELEASED_SHIFT,
"KeyReleased_Shift");"KeyReleased_Shift";this._xmlEventPrefabToName.set(c.KEY_RELEASED_SPACE,"KeyReleased_Space");"KeyReleased_Space";this._xmlEventPrefabToName.set(c.KEY_RELEASED_TAB,"KeyReleased_Tab");"KeyReleased_Tab";this._xmlEventPrefabToName.set(c.KEY_RELEASED_UP,"KeyReleased_Up");"KeyReleased_Up";this._xmlEventPrefabToName.set(c.KEY_RELEASED_A,"KeyReleased_A");"KeyReleased_A";this._xmlEventPrefabToName.set(c.KEY_RELEASED_B,"KeyReleased_B");"KeyReleased_B";this._xmlEventPrefabToName.set(c.KEY_RELEASED_C,
"KeyReleased_C");"KeyReleased_C";this._xmlEventPrefabToName.set(c.KEY_RELEASED_D,"KeyReleased_D");"KeyReleased_D";this._xmlEventPrefabToName.set(c.KEY_RELEASED_E,"KeyReleased_E");"KeyReleased_E";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F,"KeyReleased_F");"KeyReleased_F";this._xmlEventPrefabToName.set(c.KEY_RELEASED_G,"KeyReleased_G");"KeyReleased_G";this._xmlEventPrefabToName.set(c.KEY_RELEASED_H,"KeyReleased_H");"KeyReleased_H";this._xmlEventPrefabToName.set(c.KEY_RELEASED_I,"KeyReleased_I");
"KeyReleased_I";this._xmlEventPrefabToName.set(c.KEY_RELEASED_J,"KeyReleased_J");"KeyReleased_J";this._xmlEventPrefabToName.set(c.KEY_RELEASED_K,"KeyReleased_K");"KeyReleased_K";this._xmlEventPrefabToName.set(c.KEY_RELEASED_L,"KeyReleased_L");"KeyReleased_L";this._xmlEventPrefabToName.set(c.KEY_RELEASED_M,"KeyReleased_M");"KeyReleased_M";this._xmlEventPrefabToName.set(c.KEY_RELEASED_N,"KeyReleased_N");"KeyReleased_N";this._xmlEventPrefabToName.set(c.KEY_RELEASED_O,"KeyReleased_O");"KeyReleased_O";
this._xmlEventPrefabToName.set(c.KEY_RELEASED_P,"KeyReleased_P");"KeyReleased_P";this._xmlEventPrefabToName.set(c.KEY_RELEASED_Q,"KeyReleased_Q");"KeyReleased_Q";this._xmlEventPrefabToName.set(c.KEY_RELEASED_R,"KeyReleased_R");"KeyReleased_R";this._xmlEventPrefabToName.set(c.KEY_RELEASED_S,"KeyReleased_S");"KeyReleased_S";this._xmlEventPrefabToName.set(c.KEY_RELEASED_T,"KeyReleased_T");"KeyReleased_T";this._xmlEventPrefabToName.set(c.KEY_RELEASED_U,"KeyReleased_U");"KeyReleased_U";this._xmlEventPrefabToName.set(c.KEY_RELEASED_V,
"KeyReleased_V");"KeyReleased_V";this._xmlEventPrefabToName.set(c.KEY_RELEASED_W,"KeyReleased_W");"KeyReleased_W";this._xmlEventPrefabToName.set(c.KEY_RELEASED_X,"KeyReleased_X");"KeyReleased_X";this._xmlEventPrefabToName.set(c.KEY_RELEASED_Y,"KeyReleased_Y");"KeyReleased_Y";this._xmlEventPrefabToName.set(c.KEY_RELEASED_Z,"KeyReleased_Z");"KeyReleased_Z";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_0,"KeyReleased_0");"KeyReleased_0";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_1,"KeyReleased_1");
"KeyReleased_1";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_2,"KeyReleased_2");"KeyReleased_2";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_3,"KeyReleased_3");"KeyReleased_3";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_4,"KeyReleased_4");"KeyReleased_4";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_5,"KeyReleased_5");"KeyReleased_5";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_6,"KeyReleased_6");"KeyReleased_6";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_7,
"KeyReleased_7");"KeyReleased_7";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_8,"KeyReleased_8");"KeyReleased_8";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_9,"KeyReleased_9");"KeyReleased_9";this._xmlEventPrefabToName.set(c.KEY_RELEASED_EQUALS,"KeyReleased_Equals");"KeyReleased_Equals";this._xmlEventPrefabToName.set(c.KEY_RELEASED_SLASH,"KeyReleased_Slash");"KeyReleased_Slash";this._xmlEventPrefabToName.set(c.KEY_RELEASED_BACKSLASH,"KeyReleased_Backslash");"KeyReleased_Backslash";
this._xmlEventPrefabToName.set(c.KEY_RELEASED_LEFTBRACKET,"KeyReleased_LeftBracket");"KeyReleased_LeftBracket";this._xmlEventPrefabToName.set(c.KEY_RELEASED_RIGHTBRACKET,"KeyReleased_RightBracket");"KeyReleased_RightBracket";this._xmlEventPrefabToName.set(c.KEY_RELEASED_BACKQUOTE,"KeyReleased_Backquote");"KeyReleased_Backquote";this._xmlEventPrefabToName.set(c.KEY_RELEASED_COMMA,"KeyReleased_Comma");"KeyReleased_Comma";this._xmlEventPrefabToName.set(c.KEY_RELEASED_COMMAND,"KeyReleased_Command");"KeyReleased_Command";
this._xmlEventPrefabToName.set(c.KEY_RELEASED_MINUS,"KeyReleased_Minus");"KeyReleased_Minus";this._xmlEventPrefabToName.set(c.KEY_RELEASED_PERIOD,"KeyReleased_Period");"KeyReleased_Period";this._xmlEventPrefabToName.set(c.KEY_RELEASED_QUOTE,"KeyReleased_Quote");"KeyReleased_Quote";this._xmlEventPrefabToName.set(c.KEY_RELEASED_SEMICOLON,"KeyReleased_Semicolon");"KeyReleased_Semicolon";this._xmlEventPrefabToName.set(c.KEY_RELEASED_ANDROIDMENU,"KeyReleased_AndroidMenu");"KeyReleased_AndroidMenu";this._xmlEventPrefabToName.set(c.KEY_RELEASED_ANDROIDSEARCH,
"KeyReleased_AndroidSearch");"KeyReleased_AndroidSearch";this._xmlEventPrefabToName.set(c.KEY_RELEASED_UNKNOWN,"KeyReleased_Unknown");"KeyReleased_Unknown"},_initEventNameToPrefabMap:function(){this._xmlEventNameToPrefab=new E;var a=this._xmlEventPrefabToName.get(c.CREATED),b=c.CREATED;this._xmlEventNameToPrefab.set(a,b);b;var d=this._xmlEventPrefabToName.get(c.UPDATE),m=c.UPDATE;this._xmlEventNameToPrefab.set(d,m);m;var f=this._xmlEventPrefabToName.get(c.CHANGED),i=c.CHANGED;this._xmlEventNameToPrefab.set(f,
i);i;var h=this._xmlEventPrefabToName.get(c.NETWORK_CONNECTED),e=c.NETWORK_CONNECTED;this._xmlEventNameToPrefab.set(h,e);e;var g=this._xmlEventPrefabToName.get(c.NETWORK_REQUEST),j=c.NETWORK_REQUEST;this._xmlEventNameToPrefab.set(g,j);j;var k=this._xmlEventPrefabToName.get(c.NETWORK_SERVER_EVENT),l=c.NETWORK_SERVER_EVENT;this._xmlEventNameToPrefab.set(k,l);l;var n=this._xmlEventPrefabToName.get(c.FILETRANSFER_CONNECTED),p=c.FILETRANSFER_CONNECTED;this._xmlEventNameToPrefab.set(n,p);p;var q=this._xmlEventPrefabToName.get(c.FILETRANSFER_SENDREQUEST),
t=c.FILETRANSFER_SENDREQUEST;this._xmlEventNameToPrefab.set(q,t);t;var r=this._xmlEventPrefabToName.get(c.MOUSE_LEFT_CLICK),w=c.MOUSE_LEFT_CLICK;this._xmlEventNameToPrefab.set(r,w);w;var mf=this._xmlEventPrefabToName.get(c.MOUSE_RIGHT_CLICK),u=c.MOUSE_RIGHT_CLICK;this._xmlEventNameToPrefab.set(mf,u);u;var z=this._xmlEventPrefabToName.get(c.MOUSE_LEFT_DOWN),v=c.MOUSE_LEFT_DOWN;this._xmlEventNameToPrefab.set(z,v);v;var s=this._xmlEventPrefabToName.get(c.MOUSE_RIGHT_DOWN),A=c.MOUSE_RIGHT_DOWN;this._xmlEventNameToPrefab.set(s,
A);A;var B=this._xmlEventPrefabToName.get(c.MOUSE_SCROLL),x=c.MOUSE_SCROLL;this._xmlEventNameToPrefab.set(B,x);x;var J=this._xmlEventPrefabToName.get(c.MOUSE_LEFT_CLICKED),D=c.MOUSE_LEFT_CLICKED;this._xmlEventNameToPrefab.set(J,D);D;var C=this._xmlEventPrefabToName.get(c.MOUSE_RIGHT_CLICKED),F=c.MOUSE_RIGHT_CLICKED;this._xmlEventNameToPrefab.set(C,F);F;var N=this._xmlEventPrefabToName.get(c.MOUSE_ENTERED),H=c.MOUSE_ENTERED;this._xmlEventNameToPrefab.set(N,H);H;var G=this._xmlEventPrefabToName.get(c.MOUSE_MOVED),
P=c.MOUSE_MOVED;this._xmlEventNameToPrefab.set(G,P);P;var O=this._xmlEventPrefabToName.get(c.MOUSE_LEFT),S=c.MOUSE_LEFT;this._xmlEventNameToPrefab.set(O,S);S;var L=this._xmlEventPrefabToName.get(c.MOUSE_DOWN),U=c.MOUSE_DOWN;this._xmlEventNameToPrefab.set(L,U);U;var W=this._xmlEventPrefabToName.get(c.MOUSE_UP),Y=c.MOUSE_UP;this._xmlEventNameToPrefab.set(W,Y);Y;var K=this._xmlEventPrefabToName.get(c.ON_DRAG_START),da=c.ON_DRAG_START;this._xmlEventNameToPrefab.set(K,da);da;var X=this._xmlEventPrefabToName.get(c.ON_DRAG),
ca=c.ON_DRAG;this._xmlEventNameToPrefab.set(X,ca);ca;var M=this._xmlEventPrefabToName.get(c.ON_DRAG_END),ba=c.ON_DRAG_END;this._xmlEventNameToPrefab.set(M,ba);ba;var ja=this._xmlEventPrefabToName.get(c.ON_DRAG_ENTER),V=c.ON_DRAG_ENTER;this._xmlEventNameToPrefab.set(ja,V);V;var qa=this._xmlEventPrefabToName.get(c.ON_DRAG_OVER),Z=c.ON_DRAG_OVER;this._xmlEventNameToPrefab.set(qa,Z);Z;var la=this._xmlEventPrefabToName.get(c.ON_DRAG_LEAVE),oa=c.ON_DRAG_LEAVE;this._xmlEventNameToPrefab.set(la,oa);oa;var na=
this._xmlEventPrefabToName.get(c.ON_DROP),y=c.ON_DROP;this._xmlEventNameToPrefab.set(na,y);y;var ia=this._xmlEventPrefabToName.get(c.PHYSICS_COLLISION_START),ya=c.PHYSICS_COLLISION_START;this._xmlEventNameToPrefab.set(ia,ya);ya;var R=this._xmlEventPrefabToName.get(c.PHYSICS_COLLISION_END),xa=c.PHYSICS_COLLISION_END;this._xmlEventNameToPrefab.set(R,xa);xa;var Eh=this._xmlEventPrefabToName.get(c.PHYSICS_SENSOR_START),ma=c.PHYSICS_SENSOR_START;this._xmlEventNameToPrefab.set(Eh,ma);ma;var ta=this._xmlEventPrefabToName.get(c.PHYSICS_SENSOR_START_BIPED_FEET),
ha=c.PHYSICS_SENSOR_START_BIPED_FEET;this._xmlEventNameToPrefab.set(ta,ha);ha;var pa=this._xmlEventPrefabToName.get(c.PHYSICS_SENSOR_END),Fh=c.PHYSICS_SENSOR_END;this._xmlEventNameToPrefab.set(pa,Fh);Fh;var ea=this._xmlEventPrefabToName.get(c.PHYSICS_SENSOR_END_BIPED_FEET),Ej=c.PHYSICS_SENSOR_END_BIPED_FEET;this._xmlEventNameToPrefab.set(ea,Ej);Ej;var sa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_LOCAL),df=c.KEY_PRESSED_LOCAL;this._xmlEventNameToPrefab.set(sa,df);df;var Aa=this._xmlEventPrefabToName.get(c.KEY_RELEASED_LOCAL),
aa=c.KEY_RELEASED_LOCAL;this._xmlEventNameToPrefab.set(Aa,aa);aa;var ga=this._xmlEventPrefabToName.get(c.KEY_DOWN_LOCAL),Q=c.KEY_DOWN_LOCAL;this._xmlEventNameToPrefab.set(ga,Q);Q;var T=this._xmlEventPrefabToName.get(c.KEY_PRESSED),Ca=c.KEY_PRESSED;this._xmlEventNameToPrefab.set(T,Ca);Ca;var Ta=this._xmlEventPrefabToName.get(c.KEY_RELEASED),za=c.KEY_RELEASED;this._xmlEventNameToPrefab.set(Ta,za);za;var fa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_ALT),Ka=c.KEY_PRESSED_ALT;this._xmlEventNameToPrefab.set(fa,
Ka);Ka;var ka=this._xmlEventPrefabToName.get(c.KEY_PRESSED_BACKSPACE),Ga=c.KEY_PRESSED_BACKSPACE;this._xmlEventNameToPrefab.set(ka,Ga);Ga;var Xa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_CAPS_LOCK),Pa=c.KEY_PRESSED_CAPS_LOCK;this._xmlEventNameToPrefab.set(Xa,Pa);Pa;var Gh=this._xmlEventPrefabToName.get(c.KEY_PRESSED_CONTROL),Fa=c.KEY_PRESSED_CONTROL;this._xmlEventNameToPrefab.set(Gh,Fa);Fa;var gb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_DELETE),Qa=c.KEY_PRESSED_DELETE;this._xmlEventNameToPrefab.set(gb,
Qa);Qa;var Ib=this._xmlEventPrefabToName.get(c.KEY_PRESSED_DOWN),I=c.KEY_PRESSED_DOWN;this._xmlEventNameToPrefab.set(Ib,I);I;var $a=this._xmlEventPrefabToName.get(c.KEY_PRESSED_END),Ua=c.KEY_PRESSED_END;this._xmlEventNameToPrefab.set($a,Ua);Ua;var bb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_ENTER),Oa=c.KEY_PRESSED_ENTER;this._xmlEventNameToPrefab.set(bb,Oa);Oa;var Wa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_ESCAPE),ua=c.KEY_PRESSED_ESCAPE;this._xmlEventNameToPrefab.set(Wa,ua);ua;var ld=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F1),
Ja=c.KEY_PRESSED_F1;this._xmlEventNameToPrefab.set(ld,Ja);Ja;var nb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F10),hb=c.KEY_PRESSED_F10;this._xmlEventNameToPrefab.set(nb,hb);hb;var Ya=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F11),Ba=c.KEY_PRESSED_F11;this._xmlEventNameToPrefab.set(Ya,Ba);Ba;var Ra=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F12),cb=c.KEY_PRESSED_F12;this._xmlEventNameToPrefab.set(Ra,cb);cb;var ob=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F13),Fj=c.KEY_PRESSED_F13;this._xmlEventNameToPrefab.set(ob,
Fj);Fj;var vb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F14),sb=c.KEY_PRESSED_F14;this._xmlEventNameToPrefab.set(vb,sb);sb;var Qd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F15),Gj=c.KEY_PRESSED_F15;this._xmlEventNameToPrefab.set(Qd,Gj);Gj;var Ek=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F2),Wc=c.KEY_PRESSED_F2;this._xmlEventNameToPrefab.set(Ek,Wc);Wc;var kb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F3),db=c.KEY_PRESSED_F3;this._xmlEventNameToPrefab.set(kb,db);db;var Fk=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F4),
fb=c.KEY_PRESSED_F4;this._xmlEventNameToPrefab.set(Fk,fb);fb;var ve=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F5),Hh=c.KEY_PRESSED_F5;this._xmlEventNameToPrefab.set(ve,Hh);Hh;var wa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F6),La=c.KEY_PRESSED_F6;this._xmlEventNameToPrefab.set(wa,La);La;var Ma=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F7),ib=c.KEY_PRESSED_F7;this._xmlEventNameToPrefab.set(Ma,ib);ib;var Fb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F8),ub=c.KEY_PRESSED_F8;this._xmlEventNameToPrefab.set(Fb,
ub);ub;var Gb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F9),rb=c.KEY_PRESSED_F9;this._xmlEventNameToPrefab.set(Gb,rb);rb;var Kb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_HOME),va=c.KEY_PRESSED_HOME;this._xmlEventNameToPrefab.set(Kb,va);va;var Tb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_INSERT),Sa=c.KEY_PRESSED_INSERT;this._xmlEventNameToPrefab.set(Tb,Sa);Sa;var tb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_LEFT),Da=c.KEY_PRESSED_LEFT;this._xmlEventNameToPrefab.set(tb,Da);Da;var jb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_0),
Hb=c.KEY_PRESSED_NUMPAD_0;this._xmlEventNameToPrefab.set(jb,Hb);Hb;var wb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_1),xb=c.KEY_PRESSED_NUMPAD_1;this._xmlEventNameToPrefab.set(wb,xb);xb;var mb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_2),eb=c.KEY_PRESSED_NUMPAD_2;this._xmlEventNameToPrefab.set(mb,eb);eb;var Xc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_3),qb=c.KEY_PRESSED_NUMPAD_3;this._xmlEventNameToPrefab.set(Xc,qb);qb;var ac=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_4),
Sb=c.KEY_PRESSED_NUMPAD_4;this._xmlEventNameToPrefab.set(ac,Sb);Sb;var lb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_5),Bb=c.KEY_PRESSED_NUMPAD_5;this._xmlEventNameToPrefab.set(lb,Bb);Bb;var kc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_6),Cb=c.KEY_PRESSED_NUMPAD_6;this._xmlEventNameToPrefab.set(kc,Cb);Cb;var Cc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_7),Vb=c.KEY_PRESSED_NUMPAD_7;this._xmlEventNameToPrefab.set(Cc,Vb);Vb;var Za=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_8),
Ia=c.KEY_PRESSED_NUMPAD_8;this._xmlEventNameToPrefab.set(Za,Ia);Ia;var Ea=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_9),Yb=c.KEY_PRESSED_NUMPAD_9;this._xmlEventNameToPrefab.set(Ea,Yb);Yb;var Lb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_ADD),zb=c.KEY_PRESSED_NUMPAD_ADD;this._xmlEventNameToPrefab.set(Lb,zb);zb;var Mb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_DECIMAL),Ob=c.KEY_PRESSED_NUMPAD_DECIMAL;this._xmlEventNameToPrefab.set(Mb,Ob);Ob;var Pb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_DIVIDE),
Ha=c.KEY_PRESSED_NUMPAD_DIVIDE;this._xmlEventNameToPrefab.set(Pb,Ha);Ha;var Ub=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_ENTER),lc=c.KEY_PRESSED_NUMPAD_ENTER;this._xmlEventNameToPrefab.set(Ub,lc);lc;var pc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_MULTIPLY),ra=c.KEY_PRESSED_NUMPAD_MULTIPLY;this._xmlEventNameToPrefab.set(pc,ra);ra;var qc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_SUBTRACT),Db=c.KEY_PRESSED_NUMPAD_SUBTRACT;this._xmlEventNameToPrefab.set(qc,Db);Db;var Ic=
this._xmlEventPrefabToName.get(c.KEY_PRESSED_PAGE_DOWN),ab=c.KEY_PRESSED_PAGE_DOWN;this._xmlEventNameToPrefab.set(Ic,ab);ab;var pb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_PAGE_UP),Nb=c.KEY_PRESSED_PAGE_UP;this._xmlEventNameToPrefab.set(pb,Nb);Nb;var $b=this._xmlEventPrefabToName.get(c.KEY_PRESSED_RIGHT),Qb=c.KEY_PRESSED_RIGHT;this._xmlEventNameToPrefab.set($b,Qb);Qb;var dc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_SHIFT),Ab=c.KEY_PRESSED_SHIFT;this._xmlEventNameToPrefab.set(dc,Ab);Ab;var hc=
this._xmlEventPrefabToName.get(c.KEY_PRESSED_SPACE),Ec=c.KEY_PRESSED_SPACE;this._xmlEventNameToPrefab.set(hc,Ec);Ec;var oc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_TAB),Hc=c.KEY_PRESSED_TAB;this._xmlEventNameToPrefab.set(oc,Hc);Hc;var yb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_UP),Xb=c.KEY_PRESSED_UP;this._xmlEventNameToPrefab.set(yb,Xb);Xb;var cd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_A),Va=c.KEY_PRESSED_A;this._xmlEventNameToPrefab.set(cd,Va);Va;var dd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_B),
Zb=c.KEY_PRESSED_B;this._xmlEventNameToPrefab.set(dd,Zb);Zb;var ed=this._xmlEventPrefabToName.get(c.KEY_PRESSED_C),bc=c.KEY_PRESSED_C;this._xmlEventNameToPrefab.set(ed,bc);bc;var fd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_D),cc=c.KEY_PRESSED_D;this._xmlEventNameToPrefab.set(fd,cc);cc;var gd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_E),Rb=c.KEY_PRESSED_E;this._xmlEventNameToPrefab.set(gd,Rb);Rb;var Na=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F),ec=c.KEY_PRESSED_F;this._xmlEventNameToPrefab.set(Na,
ec);ec;var sc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_G),Pc=c.KEY_PRESSED_G;this._xmlEventNameToPrefab.set(sc,Pc);Pc;var tc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_H),Qc=c.KEY_PRESSED_H;this._xmlEventNameToPrefab.set(tc,Qc);Qc;var uc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_I),Hj=c.KEY_PRESSED_I;this._xmlEventNameToPrefab.set(uc,Hj);Hj;var vc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_J),wc=c.KEY_PRESSED_J;this._xmlEventNameToPrefab.set(vc,wc);wc;var fc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_K),
xc=c.KEY_PRESSED_K;this._xmlEventNameToPrefab.set(fc,xc);xc;var hd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_L),Sc=c.KEY_PRESSED_L;this._xmlEventNameToPrefab.set(hd,Sc);Sc;var id=this._xmlEventPrefabToName.get(c.KEY_PRESSED_M),Tc=c.KEY_PRESSED_M;this._xmlEventNameToPrefab.set(id,Tc);Tc;var Uc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_N),gc=c.KEY_PRESSED_N;this._xmlEventNameToPrefab.set(Uc,gc);gc;var Vc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_O),Bc=c.KEY_PRESSED_O;this._xmlEventNameToPrefab.set(Vc,
Bc);Bc;var jd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_P),ic=c.KEY_PRESSED_P;this._xmlEventNameToPrefab.set(jd,ic);ic;var kd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_Q),jc=c.KEY_PRESSED_Q;this._xmlEventNameToPrefab.set(kd,jc);jc;var Dc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_R),nc=c.KEY_PRESSED_R;this._xmlEventNameToPrefab.set(Dc,nc);nc;var Gc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_S),Jb=c.KEY_PRESSED_S;this._xmlEventNameToPrefab.set(Gc,Jb);Jb;var $c=this._xmlEventPrefabToName.get(c.KEY_PRESSED_T),
Wb=c.KEY_PRESSED_T;this._xmlEventNameToPrefab.set($c,Wb);Wb;var Jc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_U),Kc=c.KEY_PRESSED_U;this._xmlEventNameToPrefab.set(Jc,Kc);Kc;var Lc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_V),Mc=c.KEY_PRESSED_V;this._xmlEventNameToPrefab.set(Lc,Mc);Mc;var Oc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_W),rc=c.KEY_PRESSED_W;this._xmlEventNameToPrefab.set(Oc,rc);rc;var Rc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_X),yc=c.KEY_PRESSED_X;this._xmlEventNameToPrefab.set(Rc,
yc);yc;var Hd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_Y),Zc=c.KEY_PRESSED_Y;this._xmlEventNameToPrefab.set(Hd,Zc);Zc;var td=this._xmlEventPrefabToName.get(c.KEY_PRESSED_Z),Ij=c.KEY_PRESSED_Z;this._xmlEventNameToPrefab.set(td,Ij);Ij;var Gk=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_0),Jj=c.KEY_PRESSED_NUMBER_0;this._xmlEventNameToPrefab.set(Gk,Jj);Jj;var Bd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_1),Rd=c.KEY_PRESSED_NUMBER_1;this._xmlEventNameToPrefab.set(Bd,Rd);Rd;var ee=
this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_2),Yc=c.KEY_PRESSED_NUMBER_2;this._xmlEventNameToPrefab.set(ee,Yc);Yc;var md=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_3),Eb=c.KEY_PRESSED_NUMBER_3;this._xmlEventNameToPrefab.set(md,Eb);Eb;var nd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_4),od=c.KEY_PRESSED_NUMBER_4;this._xmlEventNameToPrefab.set(nd,od);od;var Td=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_5),Nc=c.KEY_PRESSED_NUMBER_5;this._xmlEventNameToPrefab.set(Td,
Nc);Nc;var sd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_6),vd=c.KEY_PRESSED_NUMBER_6;this._xmlEventNameToPrefab.set(sd,vd);vd;var Vd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_7),wd=c.KEY_PRESSED_NUMBER_7;this._xmlEventNameToPrefab.set(Vd,wd);wd;var Yd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_8),Id=c.KEY_PRESSED_NUMBER_8;this._xmlEventNameToPrefab.set(Yd,Id);Id;var yd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_9),Kd=c.KEY_PRESSED_NUMBER_9;this._xmlEventNameToPrefab.set(yd,
Kd);Kd;var wl=this._xmlEventPrefabToName.get(c.KEY_PRESSED_EQUALS),kl=c.KEY_PRESSED_EQUALS;this._xmlEventNameToPrefab.set(wl,kl);kl;var be=this._xmlEventPrefabToName.get(c.KEY_PRESSED_SLASH),Ld=c.KEY_PRESSED_SLASH;this._xmlEventNameToPrefab.set(be,Ld);Ld;var xl=this._xmlEventPrefabToName.get(c.KEY_PRESSED_BACKSLASH),ue=c.KEY_PRESSED_BACKSLASH;this._xmlEventNameToPrefab.set(xl,ue);ue;var zc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_LEFTBRACKET),Md=c.KEY_PRESSED_LEFTBRACKET;this._xmlEventNameToPrefab.set(zc,
Md);Md;var de=this._xmlEventPrefabToName.get(c.KEY_PRESSED_RIGHTBRACKET),Od=c.KEY_PRESSED_RIGHTBRACKET;this._xmlEventNameToPrefab.set(de,Od);Od;var Sd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_BACKQUOTE),Cd=c.KEY_PRESSED_BACKQUOTE;this._xmlEventNameToPrefab.set(Sd,Cd);Cd;var fe=this._xmlEventPrefabToName.get(c.KEY_PRESSED_COMMA),ad=c.KEY_PRESSED_COMMA;this._xmlEventNameToPrefab.set(fe,ad);ad;var ge=this._xmlEventPrefabToName.get(c.KEY_PRESSED_COMMAND),Fc=c.KEY_PRESSED_COMMAND;this._xmlEventNameToPrefab.set(ge,
Fc);Fc;var qd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_MINUS),bd=c.KEY_PRESSED_MINUS;this._xmlEventNameToPrefab.set(qd,bd);bd;var Dd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_PERIOD),rd=c.KEY_PRESSED_PERIOD;this._xmlEventNameToPrefab.set(Dd,rd);rd;var ie=this._xmlEventPrefabToName.get(c.KEY_PRESSED_QUOTE),pd=c.KEY_PRESSED_QUOTE;this._xmlEventNameToPrefab.set(ie,pd);pd;var Ed=this._xmlEventPrefabToName.get(c.KEY_PRESSED_SEMICOLON),Ud=c.KEY_PRESSED_SEMICOLON;this._xmlEventNameToPrefab.set(Ed,
Ud);Ud;var Wd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_ANDROIDMENU),Xd=c.KEY_PRESSED_ANDROIDMENU;this._xmlEventNameToPrefab.set(Wd,Xd);Xd;var Jd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_ANDROIDSEARCH),xd=c.KEY_PRESSED_ANDROIDSEARCH;this._xmlEventNameToPrefab.set(Jd,xd);xd;var Zd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_UNKNOWN),ae=c.KEY_PRESSED_UNKNOWN;this._xmlEventNameToPrefab.set(Zd,ae);ae;var ne=this._xmlEventPrefabToName.get(c.KEY_RELEASED_ALT),Ac=c.KEY_RELEASED_ALT;this._xmlEventNameToPrefab.set(ne,
Ac);Ac;var Nd=this._xmlEventPrefabToName.get(c.KEY_RELEASED_BACKSPACE),pe=c.KEY_RELEASED_BACKSPACE;this._xmlEventNameToPrefab.set(Nd,pe);pe;var Pd=this._xmlEventPrefabToName.get(c.KEY_RELEASED_CAPS_LOCK),mc=c.KEY_RELEASED_CAPS_LOCK;this._xmlEventNameToPrefab.set(Pd,mc);mc;var te=this._xmlEventPrefabToName.get(c.KEY_RELEASED_CONTROL),ll=c.KEY_RELEASED_CONTROL;this._xmlEventNameToPrefab.set(te,ll);ll;var yl=this._xmlEventPrefabToName.get(c.KEY_RELEASED_DELETE),ml=c.KEY_RELEASED_DELETE;this._xmlEventNameToPrefab.set(yl,
ml);ml;var zl=this._xmlEventPrefabToName.get(c.KEY_RELEASED_DOWN),nl=c.KEY_RELEASED_DOWN;this._xmlEventNameToPrefab.set(zl,nl);nl;var Al=this._xmlEventPrefabToName.get(c.KEY_RELEASED_END),ol=c.KEY_RELEASED_END;this._xmlEventNameToPrefab.set(Al,ol);ol;var we=this._xmlEventPrefabToName.get(c.KEY_RELEASED_ENTER),ud=c.KEY_RELEASED_ENTER;this._xmlEventNameToPrefab.set(we,ud);ud;var xe=this._xmlEventPrefabToName.get(c.KEY_RELEASED_ESCAPE),he=c.KEY_RELEASED_ESCAPE;this._xmlEventNameToPrefab.set(xe,he);he;
var ye=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F1),je=c.KEY_RELEASED_F1;this._xmlEventNameToPrefab.set(ye,je);je;var Be=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F10),ke=c.KEY_RELEASED_F10;this._xmlEventNameToPrefab.set(Be,ke);ke;var Fe=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F11),Fd=c.KEY_RELEASED_F11;this._xmlEventNameToPrefab.set(Fe,Fd);Fd;var Ge=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F12),le=c.KEY_RELEASED_F12;this._xmlEventNameToPrefab.set(Ge,le);le;var He=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F13),
Gd=c.KEY_RELEASED_F13;this._xmlEventNameToPrefab.set(He,Gd);Gd;var Oe=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F14),me=c.KEY_RELEASED_F14;this._xmlEventNameToPrefab.set(Oe,me);me;var Qe=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F15),$d=c.KEY_RELEASED_F15;this._xmlEventNameToPrefab.set(Qe,$d);$d;var Se=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F2),ce=c.KEY_RELEASED_F2;this._xmlEventNameToPrefab.set(Se,ce);ce;var Te=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F3),oe=c.KEY_RELEASED_F3;
this._xmlEventNameToPrefab.set(Te,oe);oe;var Ue=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F4),zd=c.KEY_RELEASED_F4;this._xmlEventNameToPrefab.set(Ue,zd);zd;var Ve=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F5),qe=c.KEY_RELEASED_F5;this._xmlEventNameToPrefab.set(Ve,qe);qe;var af=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F6),Ad=c.KEY_RELEASED_F6;this._xmlEventNameToPrefab.set(af,Ad);Ad;var bf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F7),re=c.KEY_RELEASED_F7;this._xmlEventNameToPrefab.set(bf,
re);re;var cf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F8),se=c.KEY_RELEASED_F8;this._xmlEventNameToPrefab.set(cf,se);se;var jf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F9),ze=c.KEY_RELEASED_F9;this._xmlEventNameToPrefab.set(jf,ze);ze;var tf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_HOME),Ae=c.KEY_RELEASED_HOME;this._xmlEventNameToPrefab.set(tf,Ae);Ae;var uf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_INSERT),Ce=c.KEY_RELEASED_INSERT;this._xmlEventNameToPrefab.set(uf,Ce);Ce;var vf=
this._xmlEventPrefabToName.get(c.KEY_RELEASED_LEFT),De=c.KEY_RELEASED_LEFT;this._xmlEventNameToPrefab.set(vf,De);De;var yf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_0),Ee=c.KEY_RELEASED_NUMPAD_0;this._xmlEventNameToPrefab.set(yf,Ee);Ee;var zf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_1),Ie=c.KEY_RELEASED_NUMPAD_1;this._xmlEventNameToPrefab.set(zf,Ie);Ie;var Hf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_2),Je=c.KEY_RELEASED_NUMPAD_2;this._xmlEventNameToPrefab.set(Hf,
Je);Je;var Jf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_3),Ke=c.KEY_RELEASED_NUMPAD_3;this._xmlEventNameToPrefab.set(Jf,Ke);Ke;var Kf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_4),Le=c.KEY_RELEASED_NUMPAD_4;this._xmlEventNameToPrefab.set(Kf,Le);Le;var Lf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_5),Me=c.KEY_RELEASED_NUMPAD_5;this._xmlEventNameToPrefab.set(Lf,Me);Me;var Mf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_6),Ne=c.KEY_RELEASED_NUMPAD_6;this._xmlEventNameToPrefab.set(Mf,
Ne);Ne;var Of=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_7),Pe=c.KEY_RELEASED_NUMPAD_7;this._xmlEventNameToPrefab.set(Of,Pe);Pe;var Xf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_8),Re=c.KEY_RELEASED_NUMPAD_8;this._xmlEventNameToPrefab.set(Xf,Re);Re;var bg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_9),We=c.KEY_RELEASED_NUMPAD_9;this._xmlEventNameToPrefab.set(bg,We);We;var dg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_ADD),Xe=c.KEY_RELEASED_NUMPAD_ADD;this._xmlEventNameToPrefab.set(dg,
Xe);Xe;var eg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_DECIMAL),Ye=c.KEY_RELEASED_NUMPAD_DECIMAL;this._xmlEventNameToPrefab.set(eg,Ye);Ye;var gg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_DIVIDE),Ze=c.KEY_RELEASED_NUMPAD_DIVIDE;this._xmlEventNameToPrefab.set(gg,Ze);Ze;var mg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_ENTER),$e=c.KEY_RELEASED_NUMPAD_ENTER;this._xmlEventNameToPrefab.set(mg,$e);$e;var ng=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_MULTIPLY),ef=
c.KEY_RELEASED_NUMPAD_MULTIPLY;this._xmlEventNameToPrefab.set(ng,ef);ef;var Cg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_SUBTRACT),ff=c.KEY_RELEASED_NUMPAD_SUBTRACT;this._xmlEventNameToPrefab.set(Cg,ff);ff;var Dg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_PAGE_DOWN),gf=c.KEY_RELEASED_PAGE_DOWN;this._xmlEventNameToPrefab.set(Dg,gf);gf;var Ig=this._xmlEventPrefabToName.get(c.KEY_RELEASED_PAGE_UP),hf=c.KEY_RELEASED_PAGE_UP;this._xmlEventNameToPrefab.set(Ig,hf);hf;var Jg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_RIGHT),
kf=c.KEY_RELEASED_RIGHT;this._xmlEventNameToPrefab.set(Jg,kf);kf;var Kg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_SHIFT),lf=c.KEY_RELEASED_SHIFT;this._xmlEventNameToPrefab.set(Kg,lf);lf;var Lg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_SPACE),nf=c.KEY_RELEASED_SPACE;this._xmlEventNameToPrefab.set(Lg,nf);nf;var Ng=this._xmlEventPrefabToName.get(c.KEY_RELEASED_TAB),of=c.KEY_RELEASED_TAB;this._xmlEventNameToPrefab.set(Ng,of);of;var Og=this._xmlEventPrefabToName.get(c.KEY_RELEASED_UP),pf=c.KEY_RELEASED_UP;
this._xmlEventNameToPrefab.set(Og,pf);pf;var Pg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_A),qf=c.KEY_RELEASED_A;this._xmlEventNameToPrefab.set(Pg,qf);qf;var Qg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_B),rf=c.KEY_RELEASED_B;this._xmlEventNameToPrefab.set(Qg,rf);rf;var Rg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_C),sf=c.KEY_RELEASED_C;this._xmlEventNameToPrefab.set(Rg,sf);sf;var Sg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_D),wf=c.KEY_RELEASED_D;this._xmlEventNameToPrefab.set(Sg,
wf);wf;var Tg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_E),xf=c.KEY_RELEASED_E;this._xmlEventNameToPrefab.set(Tg,xf);xf;var Ug=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F),Af=c.KEY_RELEASED_F;this._xmlEventNameToPrefab.set(Ug,Af);Af;var Vg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_G),Bf=c.KEY_RELEASED_G;this._xmlEventNameToPrefab.set(Vg,Bf);Bf;var Wg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_H),Cf=c.KEY_RELEASED_H;this._xmlEventNameToPrefab.set(Wg,Cf);Cf;var Xg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_I),
Df=c.KEY_RELEASED_I;this._xmlEventNameToPrefab.set(Xg,Df);Df;var Yg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_J),Ef=c.KEY_RELEASED_J;this._xmlEventNameToPrefab.set(Yg,Ef);Ef;var Zg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_K),Ff=c.KEY_RELEASED_K;this._xmlEventNameToPrefab.set(Zg,Ff);Ff;var $g=this._xmlEventPrefabToName.get(c.KEY_RELEASED_L),Gf=c.KEY_RELEASED_L;this._xmlEventNameToPrefab.set($g,Gf);Gf;var ah=this._xmlEventPrefabToName.get(c.KEY_RELEASED_M),If=c.KEY_RELEASED_M;this._xmlEventNameToPrefab.set(ah,
If);If;var bh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_N),Nf=c.KEY_RELEASED_N;this._xmlEventNameToPrefab.set(bh,Nf);Nf;var ch=this._xmlEventPrefabToName.get(c.KEY_RELEASED_O),Pf=c.KEY_RELEASED_O;this._xmlEventNameToPrefab.set(ch,Pf);Pf;var dh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_P),Qf=c.KEY_RELEASED_P;this._xmlEventNameToPrefab.set(dh,Qf);Qf;var eh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_Q),Rf=c.KEY_RELEASED_Q;this._xmlEventNameToPrefab.set(eh,Rf);Rf;var fh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_R),
Sf=c.KEY_RELEASED_R;this._xmlEventNameToPrefab.set(fh,Sf);Sf;var gh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_S),Tf=c.KEY_RELEASED_S;this._xmlEventNameToPrefab.set(gh,Tf);Tf;var hh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_T),Uf=c.KEY_RELEASED_T;this._xmlEventNameToPrefab.set(hh,Uf);Uf;var ih=this._xmlEventPrefabToName.get(c.KEY_RELEASED_U),Vf=c.KEY_RELEASED_U;this._xmlEventNameToPrefab.set(ih,Vf);Vf;var jh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_V),Wf=c.KEY_RELEASED_V;this._xmlEventNameToPrefab.set(jh,
Wf);Wf;var kh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_W),Yf=c.KEY_RELEASED_W;this._xmlEventNameToPrefab.set(kh,Yf);Yf;var lh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_X),Zf=c.KEY_RELEASED_X;this._xmlEventNameToPrefab.set(lh,Zf);Zf;var mh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_Y),$f=c.KEY_RELEASED_Y;this._xmlEventNameToPrefab.set(mh,$f);$f;var nh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_Z),ag=c.KEY_RELEASED_Z;this._xmlEventNameToPrefab.set(nh,ag);ag;var oh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_0),
cg=c.KEY_RELEASED_NUMBER_0;this._xmlEventNameToPrefab.set(oh,cg);cg;var ph=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_1),fg=c.KEY_RELEASED_NUMBER_1;this._xmlEventNameToPrefab.set(ph,fg);fg;var qh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_2),hg=c.KEY_RELEASED_NUMBER_2;this._xmlEventNameToPrefab.set(qh,hg);hg;var rh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_3),ig=c.KEY_RELEASED_NUMBER_3;this._xmlEventNameToPrefab.set(rh,ig);ig;var sh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_4),
jg=c.KEY_RELEASED_NUMBER_4;this._xmlEventNameToPrefab.set(sh,jg);jg;var th=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_5),kg=c.KEY_RELEASED_NUMBER_5;this._xmlEventNameToPrefab.set(th,kg);kg;var uh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_6),lg=c.KEY_RELEASED_NUMBER_6;this._xmlEventNameToPrefab.set(uh,lg);lg;var vh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_7),og=c.KEY_RELEASED_NUMBER_7;this._xmlEventNameToPrefab.set(vh,og);og;var wh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_8),
pg=c.KEY_RELEASED_NUMBER_8;this._xmlEventNameToPrefab.set(wh,pg);pg;var xh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_9),qg=c.KEY_RELEASED_NUMBER_9;this._xmlEventNameToPrefab.set(xh,qg);qg;var yh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_EQUALS),rg=c.KEY_RELEASED_EQUALS;this._xmlEventNameToPrefab.set(yh,rg);rg;var zh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_SLASH),sg=c.KEY_RELEASED_SLASH;this._xmlEventNameToPrefab.set(zh,sg);sg;var Ah=this._xmlEventPrefabToName.get(c.KEY_RELEASED_BACKSLASH),
tg=c.KEY_RELEASED_BACKSLASH;this._xmlEventNameToPrefab.set(Ah,tg);tg;var Bh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_LEFTBRACKET),ug=c.KEY_RELEASED_LEFTBRACKET;this._xmlEventNameToPrefab.set(Bh,ug);ug;var Ch=this._xmlEventPrefabToName.get(c.KEY_RELEASED_RIGHTBRACKET),vg=c.KEY_RELEASED_RIGHTBRACKET;this._xmlEventNameToPrefab.set(Ch,vg);vg;var Dh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_BACKQUOTE),wg=c.KEY_RELEASED_BACKQUOTE;this._xmlEventNameToPrefab.set(Dh,wg);wg;var Ih=this._xmlEventPrefabToName.get(c.KEY_RELEASED_COMMA),
xg=c.KEY_RELEASED_COMMA;this._xmlEventNameToPrefab.set(Ih,xg);xg;var Jh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_COMMAND),yg=c.KEY_RELEASED_COMMAND;this._xmlEventNameToPrefab.set(Jh,yg);yg;var Kh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_MINUS),zg=c.KEY_RELEASED_MINUS;this._xmlEventNameToPrefab.set(Kh,zg);zg;var Lh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_PERIOD),Ag=c.KEY_RELEASED_PERIOD;this._xmlEventNameToPrefab.set(Lh,Ag);Ag;var Mh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_QUOTE),
Bg=c.KEY_RELEASED_QUOTE;this._xmlEventNameToPrefab.set(Mh,Bg);Bg;var Nh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_SEMICOLON),Eg=c.KEY_RELEASED_SEMICOLON;this._xmlEventNameToPrefab.set(Nh,Eg);Eg;var Oh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_ANDROIDMENU),Fg=c.KEY_RELEASED_ANDROIDMENU;this._xmlEventNameToPrefab.set(Oh,Fg);Fg;var Ph=this._xmlEventPrefabToName.get(c.KEY_RELEASED_ANDROIDSEARCH),Gg=c.KEY_RELEASED_ANDROIDSEARCH;this._xmlEventNameToPrefab.set(Ph,Gg);Gg;var Qh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_UNKNOWN),
Hg=c.KEY_RELEASED_UNKNOWN;this._xmlEventNameToPrefab.set(Qh,Hg);Hg},parseGameNode:function(a){if(this._extendGameNode(a)){this._mergeGameNode(a);if(this._validateGameNode(a))return!0;w.logger.error("Game Entity could not be validated",null);return!1}w.logger.error("Game Entity Class is not valid!",null);return!1},instantiateEntity:function(a){return this._gameClassInstantiator.instantiateEntity(a)},_extendGameNode:function(a){var b;if(a.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+
a.nodeType));if("_"==C.substr(a.nodeName,0,1)){if(a.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+a.nodeType));b=this._xmlNodeNameToNodeType.get(C.substr(a.nodeName,1,null))}else{if(a.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+a.nodeType));b=this._xmlNodeNameToNodeType.get(a.nodeName)}if(null==b)return ja.error("Unexpected Element: <"+function(){if(a.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+
a.nodeType));return a.nodeName}(this)+">"),!1;for(var d=a.elements();d.hasNext();){var c=d.next();if(!1==this._extendGameNode(c))return ja.error("Failed to parse node "+function(){if(c.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+c.nodeType));return c.nodeName}(this)),!1}if(this._handleExtendsElement(a,b)){if(this._handleExtendsAttribute(a,b))return!0;w.logger.error("Failed to extend "+r.string(b)+' node from the "extends" parameter.',null);return!1}w.logger.error("Failed to extend "+
r.string(b)+' node from the "Extends" tag.',null);return!1},_handleExtendsElement:function(a,b){var d=a.elementsNamed("Extends").hasNext();if(this._isNodeExtendable.get(b)&&d){for(var d=a.elementsNamed("Extends").next(),c=[],f=d.elements();f.hasNext();){var i=f.next();c.splice(0,0,i)}for(f=0;f<c.length;){var h=c[f];++f;i=this._xmlNodeTypeToNodeName.get(b);if(h.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+h.nodeType));if(i==h.nodeName)this._moveChildren(a,h);else return ja.error("Expected Node <"+
this._xmlNodeTypeToNodeName.get(b)+">. Got <"+function(){if(h.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+h.nodeType));return h.nodeName}(this)+">."),!1}a.removeChild(d);return!0}return d?(w.logger.warn("Element "+r.string(b)+" cannot be extended!",null),!1):!0},_handleExtendsAttribute:function(a,b){if(this._isNodeExtendable.get(b)&&a.exists("extends")){var d=this.getGameNode(this._xmlNodeTypeToGameType.get(b),a.get("extends"),null);a.remove("extends");if(null!=
d){if(this._extendGameNode(d))return this._moveChildren(a,d),!0;w.logger.error(""+r.string(b)+" Class is not valid!",null);return!1}w.logger.error(""+r.string(b)+" Class is not well-formed or not found!",null);return!1}return a.exists("extends")?(w.logger.error("Element "+r.string(b)+" cannot be extended!",null),!1):!0},_moveChildren:function(a,b){for(var d=[],c=b.elements();c.hasNext();){var f=c.next();d.push(f)}for(c=0;c<d.length;){var i=d[c];++c;if(!1==a.elementsNamed(function(){if(i.nodeType!=
q.Element)throw new p(new p("Bad node type, expected Element but found "+i.nodeType));return i.nodeName}(this)).hasNext())a.addChild(i);else{if(i.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+i.nodeType));"_"==C.substr(i.nodeName,0,1)&&a.insertChild(i,0)}}},_validateGameNode:function(a){var b;if(a.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+a.nodeType));b=this._xmlNodeNameToNodeType.get(a.nodeName);if(this._gameClassValidator.validateGameNode(a,
b)){for(a=a.elements();a.hasNext();){var d=a.next();if(!1==this._validateGameNode(d))return ja.error("Failed to validate node "+function(){if(d.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+d.nodeType));return d.nodeName}(this)),!1}return!0}w.logger.error("Failed to validate "+r.string(b)+" node",null);return!1},_mergeGameNode:function(a){this._mergeSingleGameNode(a);for(a=a.elements();a.hasNext();)this._mergeGameNode(a.next())},_mergeSingleGameNode:function(a){for(var b=
[],d=a.elements();d.hasNext();){var c=d.next();b.push(c)}for(d=0;d<b.length;){var f=b[d];++d;if(f.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+f.nodeType));if("_"==C.substr(f.nodeName,0,1)){var i;if(f.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+f.nodeType));i=C.substr(f.nodeName,1,null);if(function(a){var b=a._xmlNodeNameToNodeType.get(i);return a._isNodeMergable.get(b)}(this))a.elementsNamed(i).hasNext()?(c=a.elementsNamed(i).next(),
this._mergeChildren(f,c),a.removeChild(f)):f.set_nodeName(function(){if(f.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+f.nodeType));return C.substr(f.nodeName,1,null)}(this));else if(function(a){var b=a._xmlNodeNameToNodeType.get(i);return a._isNodeTargetMergable.get(b)}(this))if(f.exists("id")){for(var c=null,h=!1,e=a.elementsNamed(i);e.hasNext();){var g=e.next();if(g.elementsNamed("Id").hasNext()){var j=g.elementsNamed("Id").next();if(j.nodeType!=q.Document&&
j.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element or Document but found "+j.nodeType));if(j.children[0].get_nodeValue()==f.get("id")){c=g;h=!0;break}}}h?(this._mergeChildren(f,c),a.removeChild(f)):(f.set_nodeName(function(){if(f.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+f.nodeType));return C.substr(f.nodeName,1,null)}(this)),f.remove("id"))}else w.logger.warn("Target-Mergable Element "+i+" does not have a targetMerge attribute",null);
else w.logger.warn("Non-mergable element "+i+" has a merge identifier",null)}}},_mergeChildren:function(a,b){for(var d=[],c=a.elements();c.hasNext();){var f=c.next();d.push(f)}if(function(a){var d;if(b.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+b.nodeType));d=a._xmlNodeNameToNodeType.get(b.nodeName);return a._isNodeArray.get(d)}(this))for(c=0;c<d.length;)f=d[c],++c,b.addChild(f);else for(c=0;c<d.length;){var i=d[c];++c;if(i.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+
i.nodeType));"_"!=C.substr(i.nodeName,0,1)&&b.elementsNamed(function(){if(i.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+i.nodeType));return i.nodeName}(this)).hasNext()&&b.removeChild(b.elementsNamed(function(){if(i.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+i.nodeType));return i.nodeName}(this)).next());b.addChild(i)}},_parseEmbeddedStringAsset:function(a){try{return q.parse(O.getFile(a).toString())}catch(b){return b instanceof
p&&(b=b.val),w.logger.error(r.string(b),null),null}},_getClassUrl:function(a,b){return fa.replace(a,".","/")+"."+b},getGameNode:function(a,b,d){var c;null!=b&&null!=d?(w.logger.warn("Both a game class name and a game class node have been specified to create a game class. Using game class node...",null),c=d):null!=b?(c=this._parseEmbeddedStringAsset(this._getClassUrl(b,this._xmlGameTypeToFileExtension.get(a))),null!=c&&(c=c.firstElement())):c=null!=d?d:q.createElement(this._xmlGameTypeToNodeName.get(a));
if(null!=c){if(c.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+c.nodeType));return c.nodeName!=this._xmlGameTypeToNodeName.get(a)?(ja.error("Expected "+this._xmlGameTypeToNodeName.get(a)+", got "+function(){if(c.nodeType!=q.Element)throw new p(new p("Bad node type, expected Element but found "+c.nodeType));return c.nodeName}(this)),null):c}w.logger.error("Class "+r.string(a)+" is not well-formed or not found!",null);return null},__class__:Nh};var Nj=function(){};
j["tools.spark.sliced.services.std.logic.gde.interfaces.IGameClassValidator"]=Nj;Nj.__name__=!0;Nj.prototype={__class__:Nj};var Eg=function(a,b,d,c){w.logger.info("Creating Game Class Validator",null);this._xmlNodeTypeToNodeName=a;this._xmlConcurrencyTypeToName=b;this._xmlStateTypeToName=d;this._xmlEventPrefabToName=c;this._init()};j["tools.spark.sliced.services.std.logic.gde.core.GameClassValidator"]=Eg;Eg.__name__=!0;Eg.__interfaces__=[Nj];Eg.prototype={_init:function(){this._initNodeRulesMap()},
_initNodeRulesMap:function(){this._xmlNodeTypeToNodeRule=new pa;var a=this._createActionNodeRule();this._xmlNodeTypeToNodeRule.set(l.ACTION,a);a;a=this._createActionsNodeRule();this._xmlNodeTypeToNodeRule.set(l.ACTIONS,a);a;a=this._createEntitiesNodeRule();this._xmlNodeTypeToNodeRule.set(l.ENTITIES,a);a;a=this._createEntityNodeRule();this._xmlNodeTypeToNodeRule.set(l.ENTITY,a);a;a=this._createFormNodeRule();this._xmlNodeTypeToNodeRule.set(l.FORM,a);a;a=this._createScriptsNodeRule();this._xmlNodeTypeToNodeRule.set(l.SCRIPTS,
a);a;a=this._createScriptNodeRule();this._xmlNodeTypeToNodeRule.set(l.SCRIPT,a);a;a=this._createGmlNodeRule();this._xmlNodeTypeToNodeRule.set(l.GML,a);a;a=this._createTriggersNodeRule();this._xmlNodeTypeToNodeRule.set(l.TRIGGERS,a);a;a=this._createTriggerNodeRule();this._xmlNodeTypeToNodeRule.set(l.TRIGGER,a);a;a=this._createEventNodeRule();this._xmlNodeTypeToNodeRule.set(l.EVENT,a);a;a=this._createConcurrencyNodeRule();this._xmlNodeTypeToNodeRule.set(l.CONCURRENCY,a);a;a=this._createIdNodeRule();
this._xmlNodeTypeToNodeRule.set(l.ID,a);a;a=this._createSpaceNodeRule();this._xmlNodeTypeToNodeRule.set(l.SPACE,a);a;a=this._createStateNodeRule();this._xmlNodeTypeToNodeRule.set(l.STATE,a);a;a=this._createStatesNodeRule();this._xmlNodeTypeToNodeRule.set(l.STATES,a);a;a=this._createTypeNodeRule();this._xmlNodeTypeToNodeRule.set(l.TYPE,a);a;a=this._createValueNodeRule();this._xmlNodeTypeToNodeRule.set(l.VALUE,a);a},validateGameNode:function(a,b){if(null==this._xmlNodeTypeToNodeRule.get(b))return w.logger.error("This rule has not been created Yet!",
null),!1;try{return G.checkNode(a,this._xmlNodeTypeToNodeRule.get(b)),!0}catch(d){d instanceof p&&(d=d.val);if(A.__instanceof(d,String))return w.logger.error(d,null),!1;throw d;}},_createEntityNodeRule:function(){var a=D.RList([D.ROptional(D.RNode(this._xmlNodeTypeToNodeName.get(l.ACTIONS))),D.ROptional(D.RNode(this._xmlNodeTypeToNodeName.get(l.STATES))),D.ROptional(D.RNode(this._xmlNodeTypeToNodeName.get(l.TRIGGERS))),D.RNode(this._xmlNodeTypeToNodeName.get(l.FORM))],!1);return D.RNode(this._xmlNodeTypeToNodeName.get(l.ENTITY),
[],a)},_createFormNodeRule:function(){var a=D.RList([D.ROptional(D.RNode(this._xmlNodeTypeToNodeName.get(l.STATES))),D.RNode(this._xmlNodeTypeToNodeName.get(l.SPACE))],!1);return D.RNode(this._xmlNodeTypeToNodeName.get(l.FORM),[],a)},_createStateNodeRule:function(){var a=D.RList([D.RNode(this._xmlNodeTypeToNodeName.get(l.ID)),D.RNode(this._xmlNodeTypeToNodeName.get(l.TYPE)),D.RNode(this._xmlNodeTypeToNodeName.get(l.VALUE))],!1);return D.RNode(this._xmlNodeTypeToNodeName.get(l.STATE),[],a)},_createActionNodeRule:function(){var a=
D.RList([D.RNode(this._xmlNodeTypeToNodeName.get(l.ID)),D.RNode(this._xmlNodeTypeToNodeName.get(l.CONCURRENCY)),D.RNode(this._xmlNodeTypeToNodeName.get(l.SCRIPTS)),D.ROptional(D.RNode(this._xmlNodeTypeToNodeName.get(l.STATES)))],!1);return D.RNode(this._xmlNodeTypeToNodeName.get(l.ACTION),[],a)},_createSpaceNodeRule:function(){var a=D.ROptional(D.RNode(this._xmlNodeTypeToNodeName.get(l.ENTITIES)));return D.RNode(this._xmlNodeTypeToNodeName.get(l.SPACE),[],a)},_createEntitiesNodeRule:function(){var a=
D.RMulti(D.RNode(this._xmlNodeTypeToNodeName.get(l.ENTITY)),!1);return D.RNode(this._xmlNodeTypeToNodeName.get(l.ENTITIES),[],a)},_createStatesNodeRule:function(){var a=D.RMulti(D.RNode(this._xmlNodeTypeToNodeName.get(l.STATE)),!1);return D.RNode(this._xmlNodeTypeToNodeName.get(l.STATES),[],a)},_createActionsNodeRule:function(){var a=D.RMulti(D.RNode(this._xmlNodeTypeToNodeName.get(l.ACTION)),!1);return D.RNode(this._xmlNodeTypeToNodeName.get(l.ACTIONS),[],a)},_createIdNodeRule:function(){var a=D.RData();
return D.RNode(this._xmlNodeTypeToNodeName.get(l.ID),[],a)},_createScriptsNodeRule:function(){var a=D.RMulti(D.RChoice([D.RNode(this._xmlNodeTypeToNodeName.get(l.SCRIPT)),D.RNode(this._xmlNodeTypeToNodeName.get(l.GML))]),!0);return D.RNode(this._xmlNodeTypeToNodeName.get(l.SCRIPTS),[],a)},_createScriptNodeRule:function(){var a=D.RData();return D.RNode(this._xmlNodeTypeToNodeName.get(l.SCRIPT),[],a)},_createGmlNodeRule:function(){var a=D.RData();return D.RNode(this._xmlNodeTypeToNodeName.get(l.GML),
[],a)},_createTriggersNodeRule:function(){var a=D.RMulti(D.RNode(this._xmlNodeTypeToNodeName.get(l.TRIGGER)),!1);return D.RNode(this._xmlNodeTypeToNodeName.get(l.TRIGGERS),[],a)},_createTriggerNodeRule:function(){var a=D.RList([D.RNode(this._xmlNodeTypeToNodeName.get(l.EVENT)),D.RNode(this._xmlNodeTypeToNodeName.get(l.SCRIPTS))],!1);return D.RNode(this._xmlNodeTypeToNodeName.get(l.TRIGGER),[],a)},_createConcurrencyNodeRule:function(){var a=D.RData(La.FEnum([this._xmlConcurrencyTypeToName.get(Ta.PARALLEL),
this._xmlConcurrencyTypeToName.get(Ta.PERSISTENT),this._xmlConcurrencyTypeToName.get(Ta.TRANSIENT)]));return D.RNode(this._xmlNodeTypeToNodeName.get(l.CONCURRENCY),[],a)},_createTypeNodeRule:function(){var a=D.RData(La.FEnum([this._xmlStateTypeToName.get(K.DYNAMIC),this._xmlStateTypeToName.get(K.INTEGER),this._xmlStateTypeToName.get(K.DECIMAL),this._xmlStateTypeToName.get(K.BOOLEAN),this._xmlStateTypeToName.get(K.TEXT)]));return D.RNode(this._xmlNodeTypeToNodeName.get(l.TYPE),[],a)},_createValueNodeRule:function(){var a=
D.RData();return D.RNode(this._xmlNodeTypeToNodeName.get(l.VALUE),[],a)},_createEventNodeRule:function(){var a=D.RData(La.FEnum([this._xmlEventPrefabToName.get(c.CREATED),this._xmlEventPrefabToName.get(c.UPDATE),this._xmlEventPrefabToName.get(c.CHANGED),this._xmlEventPrefabToName.get(c.NETWORK_CONNECTED),this._xmlEventPrefabToName.get(c.NETWORK_REQUEST),this._xmlEventPrefabToName.get(c.NETWORK_SERVER_EVENT),this._xmlEventPrefabToName.get(c.FILETRANSFER_CONNECTED),this._xmlEventPrefabToName.get(c.FILETRANSFER_SENDREQUEST),
this._xmlEventPrefabToName.get(c.MOUSE_LEFT_CLICK),this._xmlEventPrefabToName.get(c.MOUSE_RIGHT_CLICK),this._xmlEventPrefabToName.get(c.MOUSE_LEFT_DOWN),this._xmlEventPrefabToName.get(c.MOUSE_RIGHT_DOWN),this._xmlEventPrefabToName.get(c.MOUSE_SCROLL),this._xmlEventPrefabToName.get(c.MOUSE_LEFT_CLICKED),this._xmlEventPrefabToName.get(c.MOUSE_RIGHT_CLICKED),this._xmlEventPrefabToName.get(c.MOUSE_ENTERED),this._xmlEventPrefabToName.get(c.MOUSE_MOVED),this._xmlEventPrefabToName.get(c.MOUSE_LEFT),this._xmlEventPrefabToName.get(c.MOUSE_DOWN),
this._xmlEventPrefabToName.get(c.MOUSE_UP),this._xmlEventPrefabToName.get(c.ON_DRAG_START),this._xmlEventPrefabToName.get(c.ON_DRAG),this._xmlEventPrefabToName.get(c.ON_DRAG_END),this._xmlEventPrefabToName.get(c.ON_DRAG_ENTER),this._xmlEventPrefabToName.get(c.ON_DRAG_OVER),this._xmlEventPrefabToName.get(c.ON_DRAG_LEAVE),this._xmlEventPrefabToName.get(c.ON_DROP),this._xmlEventPrefabToName.get(c.PHYSICS_COLLISION_START),this._xmlEventPrefabToName.get(c.PHYSICS_COLLISION_END),this._xmlEventPrefabToName.get(c.PHYSICS_SENSOR_START),
this._xmlEventPrefabToName.get(c.PHYSICS_SENSOR_START_BIPED_FEET),this._xmlEventPrefabToName.get(c.PHYSICS_SENSOR_END),this._xmlEventPrefabToName.get(c.PHYSICS_SENSOR_END_BIPED_FEET),this._xmlEventPrefabToName.get(c.KEY_PRESSED_LOCAL),this._xmlEventPrefabToName.get(c.KEY_RELEASED_LOCAL),this._xmlEventPrefabToName.get(c.KEY_DOWN_LOCAL),this._xmlEventPrefabToName.get(c.KEY_PRESSED),this._xmlEventPrefabToName.get(c.KEY_RELEASED),this._xmlEventPrefabToName.get(c.KEY_PRESSED_ALT),this._xmlEventPrefabToName.get(c.KEY_PRESSED_BACKSPACE),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_CAPS_LOCK),this._xmlEventPrefabToName.get(c.KEY_PRESSED_CONTROL),this._xmlEventPrefabToName.get(c.KEY_PRESSED_DELETE),this._xmlEventPrefabToName.get(c.KEY_PRESSED_DOWN),this._xmlEventPrefabToName.get(c.KEY_PRESSED_END),this._xmlEventPrefabToName.get(c.KEY_PRESSED_ENTER),this._xmlEventPrefabToName.get(c.KEY_PRESSED_ESCAPE),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F1),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F10),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F11),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_F12),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F13),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F14),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F15),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F2),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F3),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F4),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F5),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F6),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F7),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F8),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_F9),this._xmlEventPrefabToName.get(c.KEY_PRESSED_HOME),this._xmlEventPrefabToName.get(c.KEY_PRESSED_INSERT),this._xmlEventPrefabToName.get(c.KEY_PRESSED_LEFT),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_0),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_1),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_2),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_3),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_4),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_5),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_6),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_7),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_8),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_9),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_ADD),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_DECIMAL),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_DIVIDE),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_ENTER),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_MULTIPLY),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_SUBTRACT),this._xmlEventPrefabToName.get(c.KEY_PRESSED_PAGE_DOWN),this._xmlEventPrefabToName.get(c.KEY_PRESSED_PAGE_UP),this._xmlEventPrefabToName.get(c.KEY_PRESSED_RIGHT),this._xmlEventPrefabToName.get(c.KEY_PRESSED_SHIFT),this._xmlEventPrefabToName.get(c.KEY_PRESSED_SPACE),this._xmlEventPrefabToName.get(c.KEY_PRESSED_TAB),this._xmlEventPrefabToName.get(c.KEY_PRESSED_UP),this._xmlEventPrefabToName.get(c.KEY_PRESSED_A),this._xmlEventPrefabToName.get(c.KEY_PRESSED_B),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_C),this._xmlEventPrefabToName.get(c.KEY_PRESSED_D),this._xmlEventPrefabToName.get(c.KEY_PRESSED_E),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F),this._xmlEventPrefabToName.get(c.KEY_PRESSED_G),this._xmlEventPrefabToName.get(c.KEY_PRESSED_H),this._xmlEventPrefabToName.get(c.KEY_PRESSED_I),this._xmlEventPrefabToName.get(c.KEY_PRESSED_J),this._xmlEventPrefabToName.get(c.KEY_PRESSED_K),this._xmlEventPrefabToName.get(c.KEY_PRESSED_L),this._xmlEventPrefabToName.get(c.KEY_PRESSED_M),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_N),this._xmlEventPrefabToName.get(c.KEY_PRESSED_O),this._xmlEventPrefabToName.get(c.KEY_PRESSED_P),this._xmlEventPrefabToName.get(c.KEY_PRESSED_Q),this._xmlEventPrefabToName.get(c.KEY_PRESSED_R),this._xmlEventPrefabToName.get(c.KEY_PRESSED_S),this._xmlEventPrefabToName.get(c.KEY_PRESSED_T),this._xmlEventPrefabToName.get(c.KEY_PRESSED_U),this._xmlEventPrefabToName.get(c.KEY_PRESSED_V),this._xmlEventPrefabToName.get(c.KEY_PRESSED_W),this._xmlEventPrefabToName.get(c.KEY_PRESSED_X),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_Y),this._xmlEventPrefabToName.get(c.KEY_PRESSED_Z),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_0),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_1),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_2),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_3),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_4),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_5),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_6),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_7),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_8),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_9),this._xmlEventPrefabToName.get(c.KEY_PRESSED_EQUALS),this._xmlEventPrefabToName.get(c.KEY_PRESSED_SLASH),this._xmlEventPrefabToName.get(c.KEY_PRESSED_BACKSLASH),this._xmlEventPrefabToName.get(c.KEY_PRESSED_LEFTBRACKET),this._xmlEventPrefabToName.get(c.KEY_PRESSED_RIGHTBRACKET),this._xmlEventPrefabToName.get(c.KEY_PRESSED_BACKQUOTE),this._xmlEventPrefabToName.get(c.KEY_PRESSED_COMMA),this._xmlEventPrefabToName.get(c.KEY_PRESSED_COMMAND),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_MINUS),this._xmlEventPrefabToName.get(c.KEY_PRESSED_PERIOD),this._xmlEventPrefabToName.get(c.KEY_PRESSED_QUOTE),this._xmlEventPrefabToName.get(c.KEY_PRESSED_SEMICOLON),this._xmlEventPrefabToName.get(c.KEY_PRESSED_ANDROIDMENU),this._xmlEventPrefabToName.get(c.KEY_PRESSED_ANDROIDSEARCH),this._xmlEventPrefabToName.get(c.KEY_PRESSED_UNKNOWN),this._xmlEventPrefabToName.get(c.KEY_RELEASED_ALT),this._xmlEventPrefabToName.get(c.KEY_RELEASED_BACKSPACE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_CAPS_LOCK),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_CONTROL),this._xmlEventPrefabToName.get(c.KEY_RELEASED_DELETE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_DOWN),this._xmlEventPrefabToName.get(c.KEY_RELEASED_END),this._xmlEventPrefabToName.get(c.KEY_RELEASED_ENTER),this._xmlEventPrefabToName.get(c.KEY_RELEASED_ESCAPE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F1),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F10),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F11),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F12),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_F13),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F14),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F15),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F2),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F3),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F4),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F5),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F6),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F7),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F8),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_F9),this._xmlEventPrefabToName.get(c.KEY_RELEASED_HOME),this._xmlEventPrefabToName.get(c.KEY_RELEASED_INSERT),this._xmlEventPrefabToName.get(c.KEY_RELEASED_LEFT),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_0),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_1),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_2),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_3),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_4),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_5),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_6),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_7),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_8),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_9),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_ADD),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_DECIMAL),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_DIVIDE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_ENTER),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_MULTIPLY),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_SUBTRACT),this._xmlEventPrefabToName.get(c.KEY_RELEASED_PAGE_DOWN),this._xmlEventPrefabToName.get(c.KEY_RELEASED_PAGE_UP),this._xmlEventPrefabToName.get(c.KEY_RELEASED_RIGHT),this._xmlEventPrefabToName.get(c.KEY_RELEASED_SHIFT),this._xmlEventPrefabToName.get(c.KEY_RELEASED_SPACE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_TAB),this._xmlEventPrefabToName.get(c.KEY_RELEASED_UP),this._xmlEventPrefabToName.get(c.KEY_RELEASED_A),this._xmlEventPrefabToName.get(c.KEY_RELEASED_B),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_C),this._xmlEventPrefabToName.get(c.KEY_RELEASED_D),this._xmlEventPrefabToName.get(c.KEY_RELEASED_E),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F),this._xmlEventPrefabToName.get(c.KEY_RELEASED_G),this._xmlEventPrefabToName.get(c.KEY_RELEASED_H),this._xmlEventPrefabToName.get(c.KEY_RELEASED_I),this._xmlEventPrefabToName.get(c.KEY_RELEASED_J),this._xmlEventPrefabToName.get(c.KEY_RELEASED_K),this._xmlEventPrefabToName.get(c.KEY_RELEASED_L),this._xmlEventPrefabToName.get(c.KEY_RELEASED_M),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_N),this._xmlEventPrefabToName.get(c.KEY_RELEASED_O),this._xmlEventPrefabToName.get(c.KEY_RELEASED_P),this._xmlEventPrefabToName.get(c.KEY_RELEASED_Q),this._xmlEventPrefabToName.get(c.KEY_RELEASED_R),this._xmlEventPrefabToName.get(c.KEY_RELEASED_S),this._xmlEventPrefabToName.get(c.KEY_RELEASED_T),this._xmlEventPrefabToName.get(c.KEY_RELEASED_U),this._xmlEventPrefabToName.get(c.KEY_RELEASED_V),this._xmlEventPrefabToName.get(c.KEY_RELEASED_W),this._xmlEventPrefabToName.get(c.KEY_RELEASED_X),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_Y),this._xmlEventPrefabToName.get(c.KEY_RELEASED_Z),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_0),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_1),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_2),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_3),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_4),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_5),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_6),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_7),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_8),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_9),this._xmlEventPrefabToName.get(c.KEY_RELEASED_EQUALS),this._xmlEventPrefabToName.get(c.KEY_RELEASED_SLASH),this._xmlEventPrefabToName.get(c.KEY_RELEASED_BACKSLASH),this._xmlEventPrefabToName.get(c.KEY_RELEASED_LEFTBRACKET),this._xmlEventPrefabToName.get(c.KEY_RELEASED_RIGHTBRACKET),this._xmlEventPrefabToName.get(c.KEY_RELEASED_BACKQUOTE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_COMMA),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_COMMAND),this._xmlEventPrefabToName.get(c.KEY_RELEASED_MINUS),this._xmlEventPrefabToName.get(c.KEY_RELEASED_PERIOD),this._xmlEventPrefabToName.get(c.KEY_RELEASED_QUOTE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_SEMICOLON),this._xmlEventPrefabToName.get(c.KEY_RELEASED_ANDROIDMENU),this._xmlEventPrefabToName.get(c.KEY_RELEASED_ANDROIDSEARCH),this._xmlEventPrefabToName.get(c.KEY_RELEASED_UNKNOWN)]));return D.RNode(this._xmlNodeTypeToNodeName.get(l.EVENT),
[],a)},__class__:Eg};var bg=function(){};j["tools.spark.sliced.services.std.logic.gde.interfaces.IGameEntity"]=bg;bg.__name__=!0;bg.__interfaces__=[Zc];bg.prototype={__class__:bg,__properties__:{get_children:"get_children"}};var Ad=function(){this._init()};j["tools.spark.sliced.services.std.logic.gde.core.GameEntity"]=Ad;Ad.__name__=!0;Ad.__interfaces__=[bg];Ad.__super__=ib;Ad.prototype=z(ib.prototype,{_init:function(){this.gameStateSet=new E;this.possibleActionSet=new E;this.currentActionSet=new E},
doActions:function(){for(var a=this.currentActionSet.iterator();a.hasNext();)for(var b=a.next(),d=0;d<b.length;){var c=b[d];++d;c.doPass()}a=0;for(b=this.gameForm.gameSpace.gameEntitySet;a<b.length;)d=b[a],++a,d.doActions()},addState:function(a){null!=this.gameStateSet.get(a.id)&&w.logger.warn("A State with id "+a.id+" already exists in this Entity.",null);this.gameStateSet.set(a.id,a);a},addAction:function(a){if(null!=this.possibleActionSet.get(a.id))w.logger.warn("An Action with id "+a.id+" already exists in this Entity.",
null);else{var b=[];this.currentActionSet.set(a.id,b);b}this.possibleActionSet.set(a.id,a);a},getAction:function(a){return this.possibleActionSet.get(a)},forceAction:function(a){this.possibleActionSet.get(a).doPass()},startAction:function(a){var b=this.possibleActionSet.get(a);if(null!=b){switch(b.concurrency[1]){case 0:this.currentActionSet.get(b.id).push(b);break;case 1:0==this.currentActionSet.get(b.id).length&&this.currentActionSet.get(b.id).push(b);break;case 2:for(;0<this.currentActionSet.get(b.id).length;)this.currentActionSet.get(b.id).pop();
this.currentActionSet.get(b.id).push(b)}return!0}w.logger.warn("Action with id '"+a+"' could not be started.",null);return!1},stopAction:function(a){if(this.currentActionSet.exists(a)){for(;0<this.currentActionSet.get(a).length;)this.currentActionSet.get(a).pop();return!0}w.logger.warn("Action with id '"+a+"' could not be stopped.",null);return!1},getState:function(a){return null==this.gameStateSet.get(a)?null:this.gameStateSet.get(a).value},setState:function(a,b){this.gameStateSet.get(a).value=b;
B.display.updateDisplayObjectState(this,a);return this.gameStateSet.get(a).value},addChild:function(a){this.get_children().push(a);a.parentEntity=this;B.display.addDisplayObjectChild(this,a)},removeChild:function(a){var b=this.get_children();C.remove(b,a);B.display.removeDisplayObjectChild(this,a)},getChildren:function(){return this.get_children()},get_children:function(){return this.gameForm.gameSpace.gameEntitySet},__class__:Ad,__properties__:{get_children:"get_children"}});var Oj=function(){};
j["tools.spark.sliced.services.std.logic.gde.interfaces.IGameFactory"]=Oj;Oj.__name__=!0;Oj.prototype={__class__:Oj};var zg=function(){w.logger.info("Creating Game Factory",null);this._init()};j["tools.spark.sliced.services.std.logic.gde.core.GameFactory"]=zg;zg.__name__=!0;zg.__interfaces__=[Oj];zg.prototype={_init:function(){this._gameClassParser=new Nh},createGameEntityExtended:function(a,b){var d=this._gameClassParser.getGameNode(Y.ENTITY,b);d.set("extends",a);return this.createGameEntity(null,
d)},createGameEntityByXml:function(a){return this.createGameEntity(null,a)},createGameEntity:function(a,b){var d=this._gameClassParser.getGameNode(Y.ENTITY,a,b);if(null!=d){if(this._gameClassParser.parseGameNode(d)){d=this._gameClassParser.instantiateEntity(d);if(null!=d)return d;w.logger.error("Game Entity could not be instantiated",null);return null}w.logger.error("Game Entity could not be parsed",null);ja.debug(Ge.print(d));return null}w.logger.error("Game Entity Class is not well-formed or not found!",
null);return null},__class__:zg};var Oh=function(){};j["tools.spark.sliced.services.std.logic.gde.interfaces.IGameForm"]=Oh;Oh.__name__=!0;Oh.__interfaces__=[Zc];Oh.prototype={__class__:Oh};var Cg=function(){this._init()};j["tools.spark.sliced.services.std.logic.gde.core.GameForm"]=Cg;Cg.__name__=!0;Cg.__interfaces__=[Oh];Cg.__super__=ib;Cg.prototype=z(ib.prototype,{_init:function(){this.gameStateSet=new E},addState:function(a){null!=this.gameStateSet.get(a.id)&&w.logger.warn("A State with id "+a.id+
" already exists in this Form.",null);this.gameStateSet.set(a.id,a);a},getState:function(a){return null==this.gameStateSet.get(a)?null:this.gameStateSet.get(a).value},setState:function(a,b){this.gameStateSet.get(a).value=b;return this.gameStateSet.get(a).value},__class__:Cg});var Fg=function(){};j["tools.spark.sliced.services.std.logic.gde.interfaces.IGameSpace"]=Fg;Fg.__name__=!0;Fg.__interfaces__=[Zc];Fg.prototype={__class__:Fg};var ff=function(){this._init()};j["tools.spark.sliced.services.std.logic.gde.core.GameSpace"]=
ff;ff.__name__=!0;ff.__interfaces__=[Fg];ff.__super__=ib;ff.prototype=z(ib.prototype,{_init:function(){this.gameEntitySet=[]},__class__:ff});var Ph=function(){};j["tools.spark.sliced.services.std.logic.gde.interfaces.IGameState"]=Ph;Ph.__name__=!0;Ph.__interfaces__=[Zc];Ph.prototype={__class__:Ph};var Dg=function(){this._init()};j["tools.spark.sliced.services.std.logic.gde.core.GameState"]=Dg;Dg.__name__=!0;Dg.__interfaces__=[Ph];Dg.__super__=ib;Dg.prototype=z(ib.prototype,{_init:function(){},__class__:Dg});
var Gg=function(){};j["tools.spark.sliced.services.std.logic.gde.interfaces.IGameTrigger"]=Gg;Gg.__name__=!0;Gg.__interfaces__=[Zc];Gg.prototype={__class__:Gg};var gf=function(){this._init()};j["tools.spark.sliced.services.std.logic.gde.core.GameTrigger"]=gf;gf.__name__=!0;gf.__interfaces__=[Gg];gf.__super__=ib;gf.prototype=z(ib.prototype,{_init:function(){this.scriptSet=[]},doPass:function(){for(var a=0,b=this.scriptSet;a<b.length;){var d=b[a];++a;-1==d?B.logic.gmlInterpreter.run(d,function(a){var b=
new E;b.set("me",a.parentEntity);b.set("parent",a.parentEntity.parentEntity);return b}(this)):!1==B.logic.scriptInterpreter.run(d,function(a){var b=new E;b.set("me",a.parentEntity);b.set("parent",a.parentEntity.parentEntity);return b}(this))&&w.logger.error("Error: Failed to run Trigger ["+r.string(this.eventPrefab)+"].",null)}},__class__:gf});var Ta=j["tools.spark.sliced.services.std.logic.gde.interfaces.EConcurrencyType"]={__ename__:!0,__constructs__:["PARALLEL","PERSISTENT","TRANSIENT"]};Ta.PARALLEL=
["PARALLEL",0];Ta.PARALLEL.toString=g;Ta.PARALLEL.__enum__=Ta;Ta.PERSISTENT=["PERSISTENT",1];Ta.PERSISTENT.toString=g;Ta.PERSISTENT.__enum__=Ta;Ta.TRANSIENT=["TRANSIENT",2];Ta.TRANSIENT.toString=g;Ta.TRANSIENT.__enum__=Ta;var c=j["tools.spark.sliced.services.std.logic.gde.interfaces.EEventPrefab"]={__ename__:!0,__constructs__:"CREATED,UPDATE,CHANGED,NETWORK_CONNECTED,NETWORK_REQUEST,NETWORK_SERVER_EVENT,FILETRANSFER_CONNECTED,FILETRANSFER_SENDREQUEST,MOUSE_LEFT_CLICK,MOUSE_RIGHT_CLICK,MOUSE_LEFT_DOWN,MOUSE_RIGHT_DOWN,MOUSE_SCROLL,MOUSE_LEFT_CLICKED,MOUSE_RIGHT_CLICKED,MOUSE_ENTERED,MOUSE_MOVED,MOUSE_LEFT,MOUSE_DOWN,MOUSE_UP,ON_DRAG_START,ON_DRAG,ON_DRAG_END,ON_DRAG_ENTER,ON_DRAG_OVER,ON_DRAG_LEAVE,ON_DROP,PHYSICS_COLLISION_START,PHYSICS_COLLISION_END,PHYSICS_SENSOR_START,PHYSICS_SENSOR_START_BIPED_FEET,PHYSICS_SENSOR_END,PHYSICS_SENSOR_END_BIPED_FEET,KEY_PRESSED_LOCAL,KEY_RELEASED_LOCAL,KEY_DOWN_LOCAL,KEY_PRESSED,KEY_RELEASED,KEY_PRESSED_ALT,KEY_PRESSED_BACKSPACE,KEY_PRESSED_CAPS_LOCK,KEY_PRESSED_CONTROL,KEY_PRESSED_DELETE,KEY_PRESSED_DOWN,KEY_PRESSED_END,KEY_PRESSED_ENTER,KEY_PRESSED_ESCAPE,KEY_PRESSED_F1,KEY_PRESSED_F10,KEY_PRESSED_F11,KEY_PRESSED_F12,KEY_PRESSED_F13,KEY_PRESSED_F14,KEY_PRESSED_F15,KEY_PRESSED_F2,KEY_PRESSED_F3,KEY_PRESSED_F4,KEY_PRESSED_F5,KEY_PRESSED_F6,KEY_PRESSED_F7,KEY_PRESSED_F8,KEY_PRESSED_F9,KEY_PRESSED_HOME,KEY_PRESSED_INSERT,KEY_PRESSED_LEFT,KEY_PRESSED_NUMPAD_0,KEY_PRESSED_NUMPAD_1,KEY_PRESSED_NUMPAD_2,KEY_PRESSED_NUMPAD_3,KEY_PRESSED_NUMPAD_4,KEY_PRESSED_NUMPAD_5,KEY_PRESSED_NUMPAD_6,KEY_PRESSED_NUMPAD_7,KEY_PRESSED_NUMPAD_8,KEY_PRESSED_NUMPAD_9,KEY_PRESSED_NUMPAD_ADD,KEY_PRESSED_NUMPAD_DECIMAL,KEY_PRESSED_NUMPAD_DIVIDE,KEY_PRESSED_NUMPAD_ENTER,KEY_PRESSED_NUMPAD_MULTIPLY,KEY_PRESSED_NUMPAD_SUBTRACT,KEY_PRESSED_PAGE_DOWN,KEY_PRESSED_PAGE_UP,KEY_PRESSED_RIGHT,KEY_PRESSED_SHIFT,KEY_PRESSED_SPACE,KEY_PRESSED_TAB,KEY_PRESSED_UP,KEY_PRESSED_A,KEY_PRESSED_B,KEY_PRESSED_C,KEY_PRESSED_D,KEY_PRESSED_E,KEY_PRESSED_F,KEY_PRESSED_G,KEY_PRESSED_H,KEY_PRESSED_I,KEY_PRESSED_J,KEY_PRESSED_K,KEY_PRESSED_L,KEY_PRESSED_M,KEY_PRESSED_N,KEY_PRESSED_O,KEY_PRESSED_P,KEY_PRESSED_Q,KEY_PRESSED_R,KEY_PRESSED_S,KEY_PRESSED_T,KEY_PRESSED_U,KEY_PRESSED_V,KEY_PRESSED_W,KEY_PRESSED_X,KEY_PRESSED_Y,KEY_PRESSED_Z,KEY_PRESSED_NUMBER_0,KEY_PRESSED_NUMBER_1,KEY_PRESSED_NUMBER_2,KEY_PRESSED_NUMBER_3,KEY_PRESSED_NUMBER_4,KEY_PRESSED_NUMBER_5,KEY_PRESSED_NUMBER_6,KEY_PRESSED_NUMBER_7,KEY_PRESSED_NUMBER_8,KEY_PRESSED_NUMBER_9,KEY_PRESSED_EQUALS,KEY_PRESSED_SLASH,KEY_PRESSED_BACKSLASH,KEY_PRESSED_LEFTBRACKET,KEY_PRESSED_RIGHTBRACKET,KEY_PRESSED_BACKQUOTE,KEY_PRESSED_COMMA,KEY_PRESSED_COMMAND,KEY_PRESSED_MINUS,KEY_PRESSED_PERIOD,KEY_PRESSED_QUOTE,KEY_PRESSED_SEMICOLON,KEY_PRESSED_ANDROIDMENU,KEY_PRESSED_ANDROIDSEARCH,KEY_PRESSED_UNKNOWN,KEY_RELEASED_ALT,KEY_RELEASED_BACKSPACE,KEY_RELEASED_CAPS_LOCK,KEY_RELEASED_CONTROL,KEY_RELEASED_DELETE,KEY_RELEASED_DOWN,KEY_RELEASED_END,KEY_RELEASED_ENTER,KEY_RELEASED_ESCAPE,KEY_RELEASED_F1,KEY_RELEASED_F10,KEY_RELEASED_F11,KEY_RELEASED_F12,KEY_RELEASED_F13,KEY_RELEASED_F14,KEY_RELEASED_F15,KEY_RELEASED_F2,KEY_RELEASED_F3,KEY_RELEASED_F4,KEY_RELEASED_F5,KEY_RELEASED_F6,KEY_RELEASED_F7,KEY_RELEASED_F8,KEY_RELEASED_F9,KEY_RELEASED_HOME,KEY_RELEASED_INSERT,KEY_RELEASED_LEFT,KEY_RELEASED_NUMPAD_0,KEY_RELEASED_NUMPAD_1,KEY_RELEASED_NUMPAD_2,KEY_RELEASED_NUMPAD_3,KEY_RELEASED_NUMPAD_4,KEY_RELEASED_NUMPAD_5,KEY_RELEASED_NUMPAD_6,KEY_RELEASED_NUMPAD_7,KEY_RELEASED_NUMPAD_8,KEY_RELEASED_NUMPAD_9,KEY_RELEASED_NUMPAD_ADD,KEY_RELEASED_NUMPAD_DECIMAL,KEY_RELEASED_NUMPAD_DIVIDE,KEY_RELEASED_NUMPAD_ENTER,KEY_RELEASED_NUMPAD_MULTIPLY,KEY_RELEASED_NUMPAD_SUBTRACT,KEY_RELEASED_PAGE_DOWN,KEY_RELEASED_PAGE_UP,KEY_RELEASED_RIGHT,KEY_RELEASED_SHIFT,KEY_RELEASED_SPACE,KEY_RELEASED_TAB,KEY_RELEASED_UP,KEY_RELEASED_A,KEY_RELEASED_B,KEY_RELEASED_C,KEY_RELEASED_D,KEY_RELEASED_E,KEY_RELEASED_F,KEY_RELEASED_G,KEY_RELEASED_H,KEY_RELEASED_I,KEY_RELEASED_J,KEY_RELEASED_K,KEY_RELEASED_L,KEY_RELEASED_M,KEY_RELEASED_N,KEY_RELEASED_O,KEY_RELEASED_P,KEY_RELEASED_Q,KEY_RELEASED_R,KEY_RELEASED_S,KEY_RELEASED_T,KEY_RELEASED_U,KEY_RELEASED_V,KEY_RELEASED_W,KEY_RELEASED_X,KEY_RELEASED_Y,KEY_RELEASED_Z,KEY_RELEASED_NUMBER_0,KEY_RELEASED_NUMBER_1,KEY_RELEASED_NUMBER_2,KEY_RELEASED_NUMBER_3,KEY_RELEASED_NUMBER_4,KEY_RELEASED_NUMBER_5,KEY_RELEASED_NUMBER_6,KEY_RELEASED_NUMBER_7,KEY_RELEASED_NUMBER_8,KEY_RELEASED_NUMBER_9,KEY_RELEASED_EQUALS,KEY_RELEASED_SLASH,KEY_RELEASED_BACKSLASH,KEY_RELEASED_LEFTBRACKET,KEY_RELEASED_RIGHTBRACKET,KEY_RELEASED_BACKQUOTE,KEY_RELEASED_COMMA,KEY_RELEASED_COMMAND,KEY_RELEASED_MINUS,KEY_RELEASED_PERIOD,KEY_RELEASED_QUOTE,KEY_RELEASED_SEMICOLON,KEY_RELEASED_ANDROIDMENU,KEY_RELEASED_ANDROIDSEARCH,KEY_RELEASED_UNKNOWN".split(",")};
c.CREATED=["CREATED",0];c.CREATED.toString=g;c.CREATED.__enum__=c;c.UPDATE=["UPDATE",1];c.UPDATE.toString=g;c.UPDATE.__enum__=c;c.CHANGED=["CHANGED",2];c.CHANGED.toString=g;c.CHANGED.__enum__=c;c.NETWORK_CONNECTED=["NETWORK_CONNECTED",3];c.NETWORK_CONNECTED.toString=g;c.NETWORK_CONNECTED.__enum__=c;c.NETWORK_REQUEST=["NETWORK_REQUEST",4];c.NETWORK_REQUEST.toString=g;c.NETWORK_REQUEST.__enum__=c;c.NETWORK_SERVER_EVENT=["NETWORK_SERVER_EVENT",5];c.NETWORK_SERVER_EVENT.toString=g;c.NETWORK_SERVER_EVENT.__enum__=
c;c.FILETRANSFER_CONNECTED=["FILETRANSFER_CONNECTED",6];c.FILETRANSFER_CONNECTED.toString=g;c.FILETRANSFER_CONNECTED.__enum__=c;c.FILETRANSFER_SENDREQUEST=["FILETRANSFER_SENDREQUEST",7];c.FILETRANSFER_SENDREQUEST.toString=g;c.FILETRANSFER_SENDREQUEST.__enum__=c;c.MOUSE_LEFT_CLICK=["MOUSE_LEFT_CLICK",8];c.MOUSE_LEFT_CLICK.toString=g;c.MOUSE_LEFT_CLICK.__enum__=c;c.MOUSE_RIGHT_CLICK=["MOUSE_RIGHT_CLICK",9];c.MOUSE_RIGHT_CLICK.toString=g;c.MOUSE_RIGHT_CLICK.__enum__=c;c.MOUSE_LEFT_DOWN=["MOUSE_LEFT_DOWN",
10];c.MOUSE_LEFT_DOWN.toString=g;c.MOUSE_LEFT_DOWN.__enum__=c;c.MOUSE_RIGHT_DOWN=["MOUSE_RIGHT_DOWN",11];c.MOUSE_RIGHT_DOWN.toString=g;c.MOUSE_RIGHT_DOWN.__enum__=c;c.MOUSE_SCROLL=["MOUSE_SCROLL",12];c.MOUSE_SCROLL.toString=g;c.MOUSE_SCROLL.__enum__=c;c.MOUSE_LEFT_CLICKED=["MOUSE_LEFT_CLICKED",13];c.MOUSE_LEFT_CLICKED.toString=g;c.MOUSE_LEFT_CLICKED.__enum__=c;c.MOUSE_RIGHT_CLICKED=["MOUSE_RIGHT_CLICKED",14];c.MOUSE_RIGHT_CLICKED.toString=g;c.MOUSE_RIGHT_CLICKED.__enum__=c;c.MOUSE_ENTERED=["MOUSE_ENTERED",
15];c.MOUSE_ENTERED.toString=g;c.MOUSE_ENTERED.__enum__=c;c.MOUSE_MOVED=["MOUSE_MOVED",16];c.MOUSE_MOVED.toString=g;c.MOUSE_MOVED.__enum__=c;c.MOUSE_LEFT=["MOUSE_LEFT",17];c.MOUSE_LEFT.toString=g;c.MOUSE_LEFT.__enum__=c;c.MOUSE_DOWN=["MOUSE_DOWN",18];c.MOUSE_DOWN.toString=g;c.MOUSE_DOWN.__enum__=c;c.MOUSE_UP=["MOUSE_UP",19];c.MOUSE_UP.toString=g;c.MOUSE_UP.__enum__=c;c.ON_DRAG_START=["ON_DRAG_START",20];c.ON_DRAG_START.toString=g;c.ON_DRAG_START.__enum__=c;c.ON_DRAG=["ON_DRAG",21];c.ON_DRAG.toString=
g;c.ON_DRAG.__enum__=c;c.ON_DRAG_END=["ON_DRAG_END",22];c.ON_DRAG_END.toString=g;c.ON_DRAG_END.__enum__=c;c.ON_DRAG_ENTER=["ON_DRAG_ENTER",23];c.ON_DRAG_ENTER.toString=g;c.ON_DRAG_ENTER.__enum__=c;c.ON_DRAG_OVER=["ON_DRAG_OVER",24];c.ON_DRAG_OVER.toString=g;c.ON_DRAG_OVER.__enum__=c;c.ON_DRAG_LEAVE=["ON_DRAG_LEAVE",25];c.ON_DRAG_LEAVE.toString=g;c.ON_DRAG_LEAVE.__enum__=c;c.ON_DROP=["ON_DROP",26];c.ON_DROP.toString=g;c.ON_DROP.__enum__=c;c.PHYSICS_COLLISION_START=["PHYSICS_COLLISION_START",27];c.PHYSICS_COLLISION_START.toString=
g;c.PHYSICS_COLLISION_START.__enum__=c;c.PHYSICS_COLLISION_END=["PHYSICS_COLLISION_END",28];c.PHYSICS_COLLISION_END.toString=g;c.PHYSICS_COLLISION_END.__enum__=c;c.PHYSICS_SENSOR_START=["PHYSICS_SENSOR_START",29];c.PHYSICS_SENSOR_START.toString=g;c.PHYSICS_SENSOR_START.__enum__=c;c.PHYSICS_SENSOR_START_BIPED_FEET=["PHYSICS_SENSOR_START_BIPED_FEET",30];c.PHYSICS_SENSOR_START_BIPED_FEET.toString=g;c.PHYSICS_SENSOR_START_BIPED_FEET.__enum__=c;c.PHYSICS_SENSOR_END=["PHYSICS_SENSOR_END",31];c.PHYSICS_SENSOR_END.toString=
g;c.PHYSICS_SENSOR_END.__enum__=c;c.PHYSICS_SENSOR_END_BIPED_FEET=["PHYSICS_SENSOR_END_BIPED_FEET",32];c.PHYSICS_SENSOR_END_BIPED_FEET.toString=g;c.PHYSICS_SENSOR_END_BIPED_FEET.__enum__=c;c.KEY_PRESSED_LOCAL=["KEY_PRESSED_LOCAL",33];c.KEY_PRESSED_LOCAL.toString=g;c.KEY_PRESSED_LOCAL.__enum__=c;c.KEY_RELEASED_LOCAL=["KEY_RELEASED_LOCAL",34];c.KEY_RELEASED_LOCAL.toString=g;c.KEY_RELEASED_LOCAL.__enum__=c;c.KEY_DOWN_LOCAL=["KEY_DOWN_LOCAL",35];c.KEY_DOWN_LOCAL.toString=g;c.KEY_DOWN_LOCAL.__enum__=c;
c.KEY_PRESSED=["KEY_PRESSED",36];c.KEY_PRESSED.toString=g;c.KEY_PRESSED.__enum__=c;c.KEY_RELEASED=["KEY_RELEASED",37];c.KEY_RELEASED.toString=g;c.KEY_RELEASED.__enum__=c;c.KEY_PRESSED_ALT=["KEY_PRESSED_ALT",38];c.KEY_PRESSED_ALT.toString=g;c.KEY_PRESSED_ALT.__enum__=c;c.KEY_PRESSED_BACKSPACE=["KEY_PRESSED_BACKSPACE",39];c.KEY_PRESSED_BACKSPACE.toString=g;c.KEY_PRESSED_BACKSPACE.__enum__=c;c.KEY_PRESSED_CAPS_LOCK=["KEY_PRESSED_CAPS_LOCK",40];c.KEY_PRESSED_CAPS_LOCK.toString=g;c.KEY_PRESSED_CAPS_LOCK.__enum__=
c;c.KEY_PRESSED_CONTROL=["KEY_PRESSED_CONTROL",41];c.KEY_PRESSED_CONTROL.toString=g;c.KEY_PRESSED_CONTROL.__enum__=c;c.KEY_PRESSED_DELETE=["KEY_PRESSED_DELETE",42];c.KEY_PRESSED_DELETE.toString=g;c.KEY_PRESSED_DELETE.__enum__=c;c.KEY_PRESSED_DOWN=["KEY_PRESSED_DOWN",43];c.KEY_PRESSED_DOWN.toString=g;c.KEY_PRESSED_DOWN.__enum__=c;c.KEY_PRESSED_END=["KEY_PRESSED_END",44];c.KEY_PRESSED_END.toString=g;c.KEY_PRESSED_END.__enum__=c;c.KEY_PRESSED_ENTER=["KEY_PRESSED_ENTER",45];c.KEY_PRESSED_ENTER.toString=
g;c.KEY_PRESSED_ENTER.__enum__=c;c.KEY_PRESSED_ESCAPE=["KEY_PRESSED_ESCAPE",46];c.KEY_PRESSED_ESCAPE.toString=g;c.KEY_PRESSED_ESCAPE.__enum__=c;c.KEY_PRESSED_F1=["KEY_PRESSED_F1",47];c.KEY_PRESSED_F1.toString=g;c.KEY_PRESSED_F1.__enum__=c;c.KEY_PRESSED_F10=["KEY_PRESSED_F10",48];c.KEY_PRESSED_F10.toString=g;c.KEY_PRESSED_F10.__enum__=c;c.KEY_PRESSED_F11=["KEY_PRESSED_F11",49];c.KEY_PRESSED_F11.toString=g;c.KEY_PRESSED_F11.__enum__=c;c.KEY_PRESSED_F12=["KEY_PRESSED_F12",50];c.KEY_PRESSED_F12.toString=
g;c.KEY_PRESSED_F12.__enum__=c;c.KEY_PRESSED_F13=["KEY_PRESSED_F13",51];c.KEY_PRESSED_F13.toString=g;c.KEY_PRESSED_F13.__enum__=c;c.KEY_PRESSED_F14=["KEY_PRESSED_F14",52];c.KEY_PRESSED_F14.toString=g;c.KEY_PRESSED_F14.__enum__=c;c.KEY_PRESSED_F15=["KEY_PRESSED_F15",53];c.KEY_PRESSED_F15.toString=g;c.KEY_PRESSED_F15.__enum__=c;c.KEY_PRESSED_F2=["KEY_PRESSED_F2",54];c.KEY_PRESSED_F2.toString=g;c.KEY_PRESSED_F2.__enum__=c;c.KEY_PRESSED_F3=["KEY_PRESSED_F3",55];c.KEY_PRESSED_F3.toString=g;c.KEY_PRESSED_F3.__enum__=
c;c.KEY_PRESSED_F4=["KEY_PRESSED_F4",56];c.KEY_PRESSED_F4.toString=g;c.KEY_PRESSED_F4.__enum__=c;c.KEY_PRESSED_F5=["KEY_PRESSED_F5",57];c.KEY_PRESSED_F5.toString=g;c.KEY_PRESSED_F5.__enum__=c;c.KEY_PRESSED_F6=["KEY_PRESSED_F6",58];c.KEY_PRESSED_F6.toString=g;c.KEY_PRESSED_F6.__enum__=c;c.KEY_PRESSED_F7=["KEY_PRESSED_F7",59];c.KEY_PRESSED_F7.toString=g;c.KEY_PRESSED_F7.__enum__=c;c.KEY_PRESSED_F8=["KEY_PRESSED_F8",60];c.KEY_PRESSED_F8.toString=g;c.KEY_PRESSED_F8.__enum__=c;c.KEY_PRESSED_F9=["KEY_PRESSED_F9",
61];c.KEY_PRESSED_F9.toString=g;c.KEY_PRESSED_F9.__enum__=c;c.KEY_PRESSED_HOME=["KEY_PRESSED_HOME",62];c.KEY_PRESSED_HOME.toString=g;c.KEY_PRESSED_HOME.__enum__=c;c.KEY_PRESSED_INSERT=["KEY_PRESSED_INSERT",63];c.KEY_PRESSED_INSERT.toString=g;c.KEY_PRESSED_INSERT.__enum__=c;c.KEY_PRESSED_LEFT=["KEY_PRESSED_LEFT",64];c.KEY_PRESSED_LEFT.toString=g;c.KEY_PRESSED_LEFT.__enum__=c;c.KEY_PRESSED_NUMPAD_0=["KEY_PRESSED_NUMPAD_0",65];c.KEY_PRESSED_NUMPAD_0.toString=g;c.KEY_PRESSED_NUMPAD_0.__enum__=c;c.KEY_PRESSED_NUMPAD_1=
["KEY_PRESSED_NUMPAD_1",66];c.KEY_PRESSED_NUMPAD_1.toString=g;c.KEY_PRESSED_NUMPAD_1.__enum__=c;c.KEY_PRESSED_NUMPAD_2=["KEY_PRESSED_NUMPAD_2",67];c.KEY_PRESSED_NUMPAD_2.toString=g;c.KEY_PRESSED_NUMPAD_2.__enum__=c;c.KEY_PRESSED_NUMPAD_3=["KEY_PRESSED_NUMPAD_3",68];c.KEY_PRESSED_NUMPAD_3.toString=g;c.KEY_PRESSED_NUMPAD_3.__enum__=c;c.KEY_PRESSED_NUMPAD_4=["KEY_PRESSED_NUMPAD_4",69];c.KEY_PRESSED_NUMPAD_4.toString=g;c.KEY_PRESSED_NUMPAD_4.__enum__=c;c.KEY_PRESSED_NUMPAD_5=["KEY_PRESSED_NUMPAD_5",70];
c.KEY_PRESSED_NUMPAD_5.toString=g;c.KEY_PRESSED_NUMPAD_5.__enum__=c;c.KEY_PRESSED_NUMPAD_6=["KEY_PRESSED_NUMPAD_6",71];c.KEY_PRESSED_NUMPAD_6.toString=g;c.KEY_PRESSED_NUMPAD_6.__enum__=c;c.KEY_PRESSED_NUMPAD_7=["KEY_PRESSED_NUMPAD_7",72];c.KEY_PRESSED_NUMPAD_7.toString=g;c.KEY_PRESSED_NUMPAD_7.__enum__=c;c.KEY_PRESSED_NUMPAD_8=["KEY_PRESSED_NUMPAD_8",73];c.KEY_PRESSED_NUMPAD_8.toString=g;c.KEY_PRESSED_NUMPAD_8.__enum__=c;c.KEY_PRESSED_NUMPAD_9=["KEY_PRESSED_NUMPAD_9",74];c.KEY_PRESSED_NUMPAD_9.toString=
g;c.KEY_PRESSED_NUMPAD_9.__enum__=c;c.KEY_PRESSED_NUMPAD_ADD=["KEY_PRESSED_NUMPAD_ADD",75];c.KEY_PRESSED_NUMPAD_ADD.toString=g;c.KEY_PRESSED_NUMPAD_ADD.__enum__=c;c.KEY_PRESSED_NUMPAD_DECIMAL=["KEY_PRESSED_NUMPAD_DECIMAL",76];c.KEY_PRESSED_NUMPAD_DECIMAL.toString=g;c.KEY_PRESSED_NUMPAD_DECIMAL.__enum__=c;c.KEY_PRESSED_NUMPAD_DIVIDE=["KEY_PRESSED_NUMPAD_DIVIDE",77];c.KEY_PRESSED_NUMPAD_DIVIDE.toString=g;c.KEY_PRESSED_NUMPAD_DIVIDE.__enum__=c;c.KEY_PRESSED_NUMPAD_ENTER=["KEY_PRESSED_NUMPAD_ENTER",78];
c.KEY_PRESSED_NUMPAD_ENTER.toString=g;c.KEY_PRESSED_NUMPAD_ENTER.__enum__=c;c.KEY_PRESSED_NUMPAD_MULTIPLY=["KEY_PRESSED_NUMPAD_MULTIPLY",79];c.KEY_PRESSED_NUMPAD_MULTIPLY.toString=g;c.KEY_PRESSED_NUMPAD_MULTIPLY.__enum__=c;c.KEY_PRESSED_NUMPAD_SUBTRACT=["KEY_PRESSED_NUMPAD_SUBTRACT",80];c.KEY_PRESSED_NUMPAD_SUBTRACT.toString=g;c.KEY_PRESSED_NUMPAD_SUBTRACT.__enum__=c;c.KEY_PRESSED_PAGE_DOWN=["KEY_PRESSED_PAGE_DOWN",81];c.KEY_PRESSED_PAGE_DOWN.toString=g;c.KEY_PRESSED_PAGE_DOWN.__enum__=c;c.KEY_PRESSED_PAGE_UP=
["KEY_PRESSED_PAGE_UP",82];c.KEY_PRESSED_PAGE_UP.toString=g;c.KEY_PRESSED_PAGE_UP.__enum__=c;c.KEY_PRESSED_RIGHT=["KEY_PRESSED_RIGHT",83];c.KEY_PRESSED_RIGHT.toString=g;c.KEY_PRESSED_RIGHT.__enum__=c;c.KEY_PRESSED_SHIFT=["KEY_PRESSED_SHIFT",84];c.KEY_PRESSED_SHIFT.toString=g;c.KEY_PRESSED_SHIFT.__enum__=c;c.KEY_PRESSED_SPACE=["KEY_PRESSED_SPACE",85];c.KEY_PRESSED_SPACE.toString=g;c.KEY_PRESSED_SPACE.__enum__=c;c.KEY_PRESSED_TAB=["KEY_PRESSED_TAB",86];c.KEY_PRESSED_TAB.toString=g;c.KEY_PRESSED_TAB.__enum__=
c;c.KEY_PRESSED_UP=["KEY_PRESSED_UP",87];c.KEY_PRESSED_UP.toString=g;c.KEY_PRESSED_UP.__enum__=c;c.KEY_PRESSED_A=["KEY_PRESSED_A",88];c.KEY_PRESSED_A.toString=g;c.KEY_PRESSED_A.__enum__=c;c.KEY_PRESSED_B=["KEY_PRESSED_B",89];c.KEY_PRESSED_B.toString=g;c.KEY_PRESSED_B.__enum__=c;c.KEY_PRESSED_C=["KEY_PRESSED_C",90];c.KEY_PRESSED_C.toString=g;c.KEY_PRESSED_C.__enum__=c;c.KEY_PRESSED_D=["KEY_PRESSED_D",91];c.KEY_PRESSED_D.toString=g;c.KEY_PRESSED_D.__enum__=c;c.KEY_PRESSED_E=["KEY_PRESSED_E",92];c.KEY_PRESSED_E.toString=
g;c.KEY_PRESSED_E.__enum__=c;c.KEY_PRESSED_F=["KEY_PRESSED_F",93];c.KEY_PRESSED_F.toString=g;c.KEY_PRESSED_F.__enum__=c;c.KEY_PRESSED_G=["KEY_PRESSED_G",94];c.KEY_PRESSED_G.toString=g;c.KEY_PRESSED_G.__enum__=c;c.KEY_PRESSED_H=["KEY_PRESSED_H",95];c.KEY_PRESSED_H.toString=g;c.KEY_PRESSED_H.__enum__=c;c.KEY_PRESSED_I=["KEY_PRESSED_I",96];c.KEY_PRESSED_I.toString=g;c.KEY_PRESSED_I.__enum__=c;c.KEY_PRESSED_J=["KEY_PRESSED_J",97];c.KEY_PRESSED_J.toString=g;c.KEY_PRESSED_J.__enum__=c;c.KEY_PRESSED_K=["KEY_PRESSED_K",
98];c.KEY_PRESSED_K.toString=g;c.KEY_PRESSED_K.__enum__=c;c.KEY_PRESSED_L=["KEY_PRESSED_L",99];c.KEY_PRESSED_L.toString=g;c.KEY_PRESSED_L.__enum__=c;c.KEY_PRESSED_M=["KEY_PRESSED_M",100];c.KEY_PRESSED_M.toString=g;c.KEY_PRESSED_M.__enum__=c;c.KEY_PRESSED_N=["KEY_PRESSED_N",101];c.KEY_PRESSED_N.toString=g;c.KEY_PRESSED_N.__enum__=c;c.KEY_PRESSED_O=["KEY_PRESSED_O",102];c.KEY_PRESSED_O.toString=g;c.KEY_PRESSED_O.__enum__=c;c.KEY_PRESSED_P=["KEY_PRESSED_P",103];c.KEY_PRESSED_P.toString=g;c.KEY_PRESSED_P.__enum__=
c;c.KEY_PRESSED_Q=["KEY_PRESSED_Q",104];c.KEY_PRESSED_Q.toString=g;c.KEY_PRESSED_Q.__enum__=c;c.KEY_PRESSED_R=["KEY_PRESSED_R",105];c.KEY_PRESSED_R.toString=g;c.KEY_PRESSED_R.__enum__=c;c.KEY_PRESSED_S=["KEY_PRESSED_S",106];c.KEY_PRESSED_S.toString=g;c.KEY_PRESSED_S.__enum__=c;c.KEY_PRESSED_T=["KEY_PRESSED_T",107];c.KEY_PRESSED_T.toString=g;c.KEY_PRESSED_T.__enum__=c;c.KEY_PRESSED_U=["KEY_PRESSED_U",108];c.KEY_PRESSED_U.toString=g;c.KEY_PRESSED_U.__enum__=c;c.KEY_PRESSED_V=["KEY_PRESSED_V",109];c.KEY_PRESSED_V.toString=
g;c.KEY_PRESSED_V.__enum__=c;c.KEY_PRESSED_W=["KEY_PRESSED_W",110];c.KEY_PRESSED_W.toString=g;c.KEY_PRESSED_W.__enum__=c;c.KEY_PRESSED_X=["KEY_PRESSED_X",111];c.KEY_PRESSED_X.toString=g;c.KEY_PRESSED_X.__enum__=c;c.KEY_PRESSED_Y=["KEY_PRESSED_Y",112];c.KEY_PRESSED_Y.toString=g;c.KEY_PRESSED_Y.__enum__=c;c.KEY_PRESSED_Z=["KEY_PRESSED_Z",113];c.KEY_PRESSED_Z.toString=g;c.KEY_PRESSED_Z.__enum__=c;c.KEY_PRESSED_NUMBER_0=["KEY_PRESSED_NUMBER_0",114];c.KEY_PRESSED_NUMBER_0.toString=g;c.KEY_PRESSED_NUMBER_0.__enum__=
c;c.KEY_PRESSED_NUMBER_1=["KEY_PRESSED_NUMBER_1",115];c.KEY_PRESSED_NUMBER_1.toString=g;c.KEY_PRESSED_NUMBER_1.__enum__=c;c.KEY_PRESSED_NUMBER_2=["KEY_PRESSED_NUMBER_2",116];c.KEY_PRESSED_NUMBER_2.toString=g;c.KEY_PRESSED_NUMBER_2.__enum__=c;c.KEY_PRESSED_NUMBER_3=["KEY_PRESSED_NUMBER_3",117];c.KEY_PRESSED_NUMBER_3.toString=g;c.KEY_PRESSED_NUMBER_3.__enum__=c;c.KEY_PRESSED_NUMBER_4=["KEY_PRESSED_NUMBER_4",118];c.KEY_PRESSED_NUMBER_4.toString=g;c.KEY_PRESSED_NUMBER_4.__enum__=c;c.KEY_PRESSED_NUMBER_5=
["KEY_PRESSED_NUMBER_5",119];c.KEY_PRESSED_NUMBER_5.toString=g;c.KEY_PRESSED_NUMBER_5.__enum__=c;c.KEY_PRESSED_NUMBER_6=["KEY_PRESSED_NUMBER_6",120];c.KEY_PRESSED_NUMBER_6.toString=g;c.KEY_PRESSED_NUMBER_6.__enum__=c;c.KEY_PRESSED_NUMBER_7=["KEY_PRESSED_NUMBER_7",121];c.KEY_PRESSED_NUMBER_7.toString=g;c.KEY_PRESSED_NUMBER_7.__enum__=c;c.KEY_PRESSED_NUMBER_8=["KEY_PRESSED_NUMBER_8",122];c.KEY_PRESSED_NUMBER_8.toString=g;c.KEY_PRESSED_NUMBER_8.__enum__=c;c.KEY_PRESSED_NUMBER_9=["KEY_PRESSED_NUMBER_9",
123];c.KEY_PRESSED_NUMBER_9.toString=g;c.KEY_PRESSED_NUMBER_9.__enum__=c;c.KEY_PRESSED_EQUALS=["KEY_PRESSED_EQUALS",124];c.KEY_PRESSED_EQUALS.toString=g;c.KEY_PRESSED_EQUALS.__enum__=c;c.KEY_PRESSED_SLASH=["KEY_PRESSED_SLASH",125];c.KEY_PRESSED_SLASH.toString=g;c.KEY_PRESSED_SLASH.__enum__=c;c.KEY_PRESSED_BACKSLASH=["KEY_PRESSED_BACKSLASH",126];c.KEY_PRESSED_BACKSLASH.toString=g;c.KEY_PRESSED_BACKSLASH.__enum__=c;c.KEY_PRESSED_LEFTBRACKET=["KEY_PRESSED_LEFTBRACKET",127];c.KEY_PRESSED_LEFTBRACKET.toString=
g;c.KEY_PRESSED_LEFTBRACKET.__enum__=c;c.KEY_PRESSED_RIGHTBRACKET=["KEY_PRESSED_RIGHTBRACKET",128];c.KEY_PRESSED_RIGHTBRACKET.toString=g;c.KEY_PRESSED_RIGHTBRACKET.__enum__=c;c.KEY_PRESSED_BACKQUOTE=["KEY_PRESSED_BACKQUOTE",129];c.KEY_PRESSED_BACKQUOTE.toString=g;c.KEY_PRESSED_BACKQUOTE.__enum__=c;c.KEY_PRESSED_COMMA=["KEY_PRESSED_COMMA",130];c.KEY_PRESSED_COMMA.toString=g;c.KEY_PRESSED_COMMA.__enum__=c;c.KEY_PRESSED_COMMAND=["KEY_PRESSED_COMMAND",131];c.KEY_PRESSED_COMMAND.toString=g;c.KEY_PRESSED_COMMAND.__enum__=
c;c.KEY_PRESSED_MINUS=["KEY_PRESSED_MINUS",132];c.KEY_PRESSED_MINUS.toString=g;c.KEY_PRESSED_MINUS.__enum__=c;c.KEY_PRESSED_PERIOD=["KEY_PRESSED_PERIOD",133];c.KEY_PRESSED_PERIOD.toString=g;c.KEY_PRESSED_PERIOD.__enum__=c;c.KEY_PRESSED_QUOTE=["KEY_PRESSED_QUOTE",134];c.KEY_PRESSED_QUOTE.toString=g;c.KEY_PRESSED_QUOTE.__enum__=c;c.KEY_PRESSED_SEMICOLON=["KEY_PRESSED_SEMICOLON",135];c.KEY_PRESSED_SEMICOLON.toString=g;c.KEY_PRESSED_SEMICOLON.__enum__=c;c.KEY_PRESSED_ANDROIDMENU=["KEY_PRESSED_ANDROIDMENU",
136];c.KEY_PRESSED_ANDROIDMENU.toString=g;c.KEY_PRESSED_ANDROIDMENU.__enum__=c;c.KEY_PRESSED_ANDROIDSEARCH=["KEY_PRESSED_ANDROIDSEARCH",137];c.KEY_PRESSED_ANDROIDSEARCH.toString=g;c.KEY_PRESSED_ANDROIDSEARCH.__enum__=c;c.KEY_PRESSED_UNKNOWN=["KEY_PRESSED_UNKNOWN",138];c.KEY_PRESSED_UNKNOWN.toString=g;c.KEY_PRESSED_UNKNOWN.__enum__=c;c.KEY_RELEASED_ALT=["KEY_RELEASED_ALT",139];c.KEY_RELEASED_ALT.toString=g;c.KEY_RELEASED_ALT.__enum__=c;c.KEY_RELEASED_BACKSPACE=["KEY_RELEASED_BACKSPACE",140];c.KEY_RELEASED_BACKSPACE.toString=
g;c.KEY_RELEASED_BACKSPACE.__enum__=c;c.KEY_RELEASED_CAPS_LOCK=["KEY_RELEASED_CAPS_LOCK",141];c.KEY_RELEASED_CAPS_LOCK.toString=g;c.KEY_RELEASED_CAPS_LOCK.__enum__=c;c.KEY_RELEASED_CONTROL=["KEY_RELEASED_CONTROL",142];c.KEY_RELEASED_CONTROL.toString=g;c.KEY_RELEASED_CONTROL.__enum__=c;c.KEY_RELEASED_DELETE=["KEY_RELEASED_DELETE",143];c.KEY_RELEASED_DELETE.toString=g;c.KEY_RELEASED_DELETE.__enum__=c;c.KEY_RELEASED_DOWN=["KEY_RELEASED_DOWN",144];c.KEY_RELEASED_DOWN.toString=g;c.KEY_RELEASED_DOWN.__enum__=
c;c.KEY_RELEASED_END=["KEY_RELEASED_END",145];c.KEY_RELEASED_END.toString=g;c.KEY_RELEASED_END.__enum__=c;c.KEY_RELEASED_ENTER=["KEY_RELEASED_ENTER",146];c.KEY_RELEASED_ENTER.toString=g;c.KEY_RELEASED_ENTER.__enum__=c;c.KEY_RELEASED_ESCAPE=["KEY_RELEASED_ESCAPE",147];c.KEY_RELEASED_ESCAPE.toString=g;c.KEY_RELEASED_ESCAPE.__enum__=c;c.KEY_RELEASED_F1=["KEY_RELEASED_F1",148];c.KEY_RELEASED_F1.toString=g;c.KEY_RELEASED_F1.__enum__=c;c.KEY_RELEASED_F10=["KEY_RELEASED_F10",149];c.KEY_RELEASED_F10.toString=
g;c.KEY_RELEASED_F10.__enum__=c;c.KEY_RELEASED_F11=["KEY_RELEASED_F11",150];c.KEY_RELEASED_F11.toString=g;c.KEY_RELEASED_F11.__enum__=c;c.KEY_RELEASED_F12=["KEY_RELEASED_F12",151];c.KEY_RELEASED_F12.toString=g;c.KEY_RELEASED_F12.__enum__=c;c.KEY_RELEASED_F13=["KEY_RELEASED_F13",152];c.KEY_RELEASED_F13.toString=g;c.KEY_RELEASED_F13.__enum__=c;c.KEY_RELEASED_F14=["KEY_RELEASED_F14",153];c.KEY_RELEASED_F14.toString=g;c.KEY_RELEASED_F14.__enum__=c;c.KEY_RELEASED_F15=["KEY_RELEASED_F15",154];c.KEY_RELEASED_F15.toString=
g;c.KEY_RELEASED_F15.__enum__=c;c.KEY_RELEASED_F2=["KEY_RELEASED_F2",155];c.KEY_RELEASED_F2.toString=g;c.KEY_RELEASED_F2.__enum__=c;c.KEY_RELEASED_F3=["KEY_RELEASED_F3",156];c.KEY_RELEASED_F3.toString=g;c.KEY_RELEASED_F3.__enum__=c;c.KEY_RELEASED_F4=["KEY_RELEASED_F4",157];c.KEY_RELEASED_F4.toString=g;c.KEY_RELEASED_F4.__enum__=c;c.KEY_RELEASED_F5=["KEY_RELEASED_F5",158];c.KEY_RELEASED_F5.toString=g;c.KEY_RELEASED_F5.__enum__=c;c.KEY_RELEASED_F6=["KEY_RELEASED_F6",159];c.KEY_RELEASED_F6.toString=
g;c.KEY_RELEASED_F6.__enum__=c;c.KEY_RELEASED_F7=["KEY_RELEASED_F7",160];c.KEY_RELEASED_F7.toString=g;c.KEY_RELEASED_F7.__enum__=c;c.KEY_RELEASED_F8=["KEY_RELEASED_F8",161];c.KEY_RELEASED_F8.toString=g;c.KEY_RELEASED_F8.__enum__=c;c.KEY_RELEASED_F9=["KEY_RELEASED_F9",162];c.KEY_RELEASED_F9.toString=g;c.KEY_RELEASED_F9.__enum__=c;c.KEY_RELEASED_HOME=["KEY_RELEASED_HOME",163];c.KEY_RELEASED_HOME.toString=g;c.KEY_RELEASED_HOME.__enum__=c;c.KEY_RELEASED_INSERT=["KEY_RELEASED_INSERT",164];c.KEY_RELEASED_INSERT.toString=
g;c.KEY_RELEASED_INSERT.__enum__=c;c.KEY_RELEASED_LEFT=["KEY_RELEASED_LEFT",165];c.KEY_RELEASED_LEFT.toString=g;c.KEY_RELEASED_LEFT.__enum__=c;c.KEY_RELEASED_NUMPAD_0=["KEY_RELEASED_NUMPAD_0",166];c.KEY_RELEASED_NUMPAD_0.toString=g;c.KEY_RELEASED_NUMPAD_0.__enum__=c;c.KEY_RELEASED_NUMPAD_1=["KEY_RELEASED_NUMPAD_1",167];c.KEY_RELEASED_NUMPAD_1.toString=g;c.KEY_RELEASED_NUMPAD_1.__enum__=c;c.KEY_RELEASED_NUMPAD_2=["KEY_RELEASED_NUMPAD_2",168];c.KEY_RELEASED_NUMPAD_2.toString=g;c.KEY_RELEASED_NUMPAD_2.__enum__=
c;c.KEY_RELEASED_NUMPAD_3=["KEY_RELEASED_NUMPAD_3",169];c.KEY_RELEASED_NUMPAD_3.toString=g;c.KEY_RELEASED_NUMPAD_3.__enum__=c;c.KEY_RELEASED_NUMPAD_4=["KEY_RELEASED_NUMPAD_4",170];c.KEY_RELEASED_NUMPAD_4.toString=g;c.KEY_RELEASED_NUMPAD_4.__enum__=c;c.KEY_RELEASED_NUMPAD_5=["KEY_RELEASED_NUMPAD_5",171];c.KEY_RELEASED_NUMPAD_5.toString=g;c.KEY_RELEASED_NUMPAD_5.__enum__=c;c.KEY_RELEASED_NUMPAD_6=["KEY_RELEASED_NUMPAD_6",172];c.KEY_RELEASED_NUMPAD_6.toString=g;c.KEY_RELEASED_NUMPAD_6.__enum__=c;c.KEY_RELEASED_NUMPAD_7=
["KEY_RELEASED_NUMPAD_7",173];c.KEY_RELEASED_NUMPAD_7.toString=g;c.KEY_RELEASED_NUMPAD_7.__enum__=c;c.KEY_RELEASED_NUMPAD_8=["KEY_RELEASED_NUMPAD_8",174];c.KEY_RELEASED_NUMPAD_8.toString=g;c.KEY_RELEASED_NUMPAD_8.__enum__=c;c.KEY_RELEASED_NUMPAD_9=["KEY_RELEASED_NUMPAD_9",175];c.KEY_RELEASED_NUMPAD_9.toString=g;c.KEY_RELEASED_NUMPAD_9.__enum__=c;c.KEY_RELEASED_NUMPAD_ADD=["KEY_RELEASED_NUMPAD_ADD",176];c.KEY_RELEASED_NUMPAD_ADD.toString=g;c.KEY_RELEASED_NUMPAD_ADD.__enum__=c;c.KEY_RELEASED_NUMPAD_DECIMAL=
["KEY_RELEASED_NUMPAD_DECIMAL",177];c.KEY_RELEASED_NUMPAD_DECIMAL.toString=g;c.KEY_RELEASED_NUMPAD_DECIMAL.__enum__=c;c.KEY_RELEASED_NUMPAD_DIVIDE=["KEY_RELEASED_NUMPAD_DIVIDE",178];c.KEY_RELEASED_NUMPAD_DIVIDE.toString=g;c.KEY_RELEASED_NUMPAD_DIVIDE.__enum__=c;c.KEY_RELEASED_NUMPAD_ENTER=["KEY_RELEASED_NUMPAD_ENTER",179];c.KEY_RELEASED_NUMPAD_ENTER.toString=g;c.KEY_RELEASED_NUMPAD_ENTER.__enum__=c;c.KEY_RELEASED_NUMPAD_MULTIPLY=["KEY_RELEASED_NUMPAD_MULTIPLY",180];c.KEY_RELEASED_NUMPAD_MULTIPLY.toString=
g;c.KEY_RELEASED_NUMPAD_MULTIPLY.__enum__=c;c.KEY_RELEASED_NUMPAD_SUBTRACT=["KEY_RELEASED_NUMPAD_SUBTRACT",181];c.KEY_RELEASED_NUMPAD_SUBTRACT.toString=g;c.KEY_RELEASED_NUMPAD_SUBTRACT.__enum__=c;c.KEY_RELEASED_PAGE_DOWN=["KEY_RELEASED_PAGE_DOWN",182];c.KEY_RELEASED_PAGE_DOWN.toString=g;c.KEY_RELEASED_PAGE_DOWN.__enum__=c;c.KEY_RELEASED_PAGE_UP=["KEY_RELEASED_PAGE_UP",183];c.KEY_RELEASED_PAGE_UP.toString=g;c.KEY_RELEASED_PAGE_UP.__enum__=c;c.KEY_RELEASED_RIGHT=["KEY_RELEASED_RIGHT",184];c.KEY_RELEASED_RIGHT.toString=
g;c.KEY_RELEASED_RIGHT.__enum__=c;c.KEY_RELEASED_SHIFT=["KEY_RELEASED_SHIFT",185];c.KEY_RELEASED_SHIFT.toString=g;c.KEY_RELEASED_SHIFT.__enum__=c;c.KEY_RELEASED_SPACE=["KEY_RELEASED_SPACE",186];c.KEY_RELEASED_SPACE.toString=g;c.KEY_RELEASED_SPACE.__enum__=c;c.KEY_RELEASED_TAB=["KEY_RELEASED_TAB",187];c.KEY_RELEASED_TAB.toString=g;c.KEY_RELEASED_TAB.__enum__=c;c.KEY_RELEASED_UP=["KEY_RELEASED_UP",188];c.KEY_RELEASED_UP.toString=g;c.KEY_RELEASED_UP.__enum__=c;c.KEY_RELEASED_A=["KEY_RELEASED_A",189];
c.KEY_RELEASED_A.toString=g;c.KEY_RELEASED_A.__enum__=c;c.KEY_RELEASED_B=["KEY_RELEASED_B",190];c.KEY_RELEASED_B.toString=g;c.KEY_RELEASED_B.__enum__=c;c.KEY_RELEASED_C=["KEY_RELEASED_C",191];c.KEY_RELEASED_C.toString=g;c.KEY_RELEASED_C.__enum__=c;c.KEY_RELEASED_D=["KEY_RELEASED_D",192];c.KEY_RELEASED_D.toString=g;c.KEY_RELEASED_D.__enum__=c;c.KEY_RELEASED_E=["KEY_RELEASED_E",193];c.KEY_RELEASED_E.toString=g;c.KEY_RELEASED_E.__enum__=c;c.KEY_RELEASED_F=["KEY_RELEASED_F",194];c.KEY_RELEASED_F.toString=
g;c.KEY_RELEASED_F.__enum__=c;c.KEY_RELEASED_G=["KEY_RELEASED_G",195];c.KEY_RELEASED_G.toString=g;c.KEY_RELEASED_G.__enum__=c;c.KEY_RELEASED_H=["KEY_RELEASED_H",196];c.KEY_RELEASED_H.toString=g;c.KEY_RELEASED_H.__enum__=c;c.KEY_RELEASED_I=["KEY_RELEASED_I",197];c.KEY_RELEASED_I.toString=g;c.KEY_RELEASED_I.__enum__=c;c.KEY_RELEASED_J=["KEY_RELEASED_J",198];c.KEY_RELEASED_J.toString=g;c.KEY_RELEASED_J.__enum__=c;c.KEY_RELEASED_K=["KEY_RELEASED_K",199];c.KEY_RELEASED_K.toString=g;c.KEY_RELEASED_K.__enum__=
c;c.KEY_RELEASED_L=["KEY_RELEASED_L",200];c.KEY_RELEASED_L.toString=g;c.KEY_RELEASED_L.__enum__=c;c.KEY_RELEASED_M=["KEY_RELEASED_M",201];c.KEY_RELEASED_M.toString=g;c.KEY_RELEASED_M.__enum__=c;c.KEY_RELEASED_N=["KEY_RELEASED_N",202];c.KEY_RELEASED_N.toString=g;c.KEY_RELEASED_N.__enum__=c;c.KEY_RELEASED_O=["KEY_RELEASED_O",203];c.KEY_RELEASED_O.toString=g;c.KEY_RELEASED_O.__enum__=c;c.KEY_RELEASED_P=["KEY_RELEASED_P",204];c.KEY_RELEASED_P.toString=g;c.KEY_RELEASED_P.__enum__=c;c.KEY_RELEASED_Q=["KEY_RELEASED_Q",
205];c.KEY_RELEASED_Q.toString=g;c.KEY_RELEASED_Q.__enum__=c;c.KEY_RELEASED_R=["KEY_RELEASED_R",206];c.KEY_RELEASED_R.toString=g;c.KEY_RELEASED_R.__enum__=c;c.KEY_RELEASED_S=["KEY_RELEASED_S",207];c.KEY_RELEASED_S.toString=g;c.KEY_RELEASED_S.__enum__=c;c.KEY_RELEASED_T=["KEY_RELEASED_T",208];c.KEY_RELEASED_T.toString=g;c.KEY_RELEASED_T.__enum__=c;c.KEY_RELEASED_U=["KEY_RELEASED_U",209];c.KEY_RELEASED_U.toString=g;c.KEY_RELEASED_U.__enum__=c;c.KEY_RELEASED_V=["KEY_RELEASED_V",210];c.KEY_RELEASED_V.toString=
g;c.KEY_RELEASED_V.__enum__=c;c.KEY_RELEASED_W=["KEY_RELEASED_W",211];c.KEY_RELEASED_W.toString=g;c.KEY_RELEASED_W.__enum__=c;c.KEY_RELEASED_X=["KEY_RELEASED_X",212];c.KEY_RELEASED_X.toString=g;c.KEY_RELEASED_X.__enum__=c;c.KEY_RELEASED_Y=["KEY_RELEASED_Y",213];c.KEY_RELEASED_Y.toString=g;c.KEY_RELEASED_Y.__enum__=c;c.KEY_RELEASED_Z=["KEY_RELEASED_Z",214];c.KEY_RELEASED_Z.toString=g;c.KEY_RELEASED_Z.__enum__=c;c.KEY_RELEASED_NUMBER_0=["KEY_RELEASED_NUMBER_0",215];c.KEY_RELEASED_NUMBER_0.toString=
g;c.KEY_RELEASED_NUMBER_0.__enum__=c;c.KEY_RELEASED_NUMBER_1=["KEY_RELEASED_NUMBER_1",216];c.KEY_RELEASED_NUMBER_1.toString=g;c.KEY_RELEASED_NUMBER_1.__enum__=c;c.KEY_RELEASED_NUMBER_2=["KEY_RELEASED_NUMBER_2",217];c.KEY_RELEASED_NUMBER_2.toString=g;c.KEY_RELEASED_NUMBER_2.__enum__=c;c.KEY_RELEASED_NUMBER_3=["KEY_RELEASED_NUMBER_3",218];c.KEY_RELEASED_NUMBER_3.toString=g;c.KEY_RELEASED_NUMBER_3.__enum__=c;c.KEY_RELEASED_NUMBER_4=["KEY_RELEASED_NUMBER_4",219];c.KEY_RELEASED_NUMBER_4.toString=g;c.KEY_RELEASED_NUMBER_4.__enum__=
c;c.KEY_RELEASED_NUMBER_5=["KEY_RELEASED_NUMBER_5",220];c.KEY_RELEASED_NUMBER_5.toString=g;c.KEY_RELEASED_NUMBER_5.__enum__=c;c.KEY_RELEASED_NUMBER_6=["KEY_RELEASED_NUMBER_6",221];c.KEY_RELEASED_NUMBER_6.toString=g;c.KEY_RELEASED_NUMBER_6.__enum__=c;c.KEY_RELEASED_NUMBER_7=["KEY_RELEASED_NUMBER_7",222];c.KEY_RELEASED_NUMBER_7.toString=g;c.KEY_RELEASED_NUMBER_7.__enum__=c;c.KEY_RELEASED_NUMBER_8=["KEY_RELEASED_NUMBER_8",223];c.KEY_RELEASED_NUMBER_8.toString=g;c.KEY_RELEASED_NUMBER_8.__enum__=c;c.KEY_RELEASED_NUMBER_9=
["KEY_RELEASED_NUMBER_9",224];c.KEY_RELEASED_NUMBER_9.toString=g;c.KEY_RELEASED_NUMBER_9.__enum__=c;c.KEY_RELEASED_EQUALS=["KEY_RELEASED_EQUALS",225];c.KEY_RELEASED_EQUALS.toString=g;c.KEY_RELEASED_EQUALS.__enum__=c;c.KEY_RELEASED_SLASH=["KEY_RELEASED_SLASH",226];c.KEY_RELEASED_SLASH.toString=g;c.KEY_RELEASED_SLASH.__enum__=c;c.KEY_RELEASED_BACKSLASH=["KEY_RELEASED_BACKSLASH",227];c.KEY_RELEASED_BACKSLASH.toString=g;c.KEY_RELEASED_BACKSLASH.__enum__=c;c.KEY_RELEASED_LEFTBRACKET=["KEY_RELEASED_LEFTBRACKET",
228];c.KEY_RELEASED_LEFTBRACKET.toString=g;c.KEY_RELEASED_LEFTBRACKET.__enum__=c;c.KEY_RELEASED_RIGHTBRACKET=["KEY_RELEASED_RIGHTBRACKET",229];c.KEY_RELEASED_RIGHTBRACKET.toString=g;c.KEY_RELEASED_RIGHTBRACKET.__enum__=c;c.KEY_RELEASED_BACKQUOTE=["KEY_RELEASED_BACKQUOTE",230];c.KEY_RELEASED_BACKQUOTE.toString=g;c.KEY_RELEASED_BACKQUOTE.__enum__=c;c.KEY_RELEASED_COMMA=["KEY_RELEASED_COMMA",231];c.KEY_RELEASED_COMMA.toString=g;c.KEY_RELEASED_COMMA.__enum__=c;c.KEY_RELEASED_COMMAND=["KEY_RELEASED_COMMAND",
232];c.KEY_RELEASED_COMMAND.toString=g;c.KEY_RELEASED_COMMAND.__enum__=c;c.KEY_RELEASED_MINUS=["KEY_RELEASED_MINUS",233];c.KEY_RELEASED_MINUS.toString=g;c.KEY_RELEASED_MINUS.__enum__=c;c.KEY_RELEASED_PERIOD=["KEY_RELEASED_PERIOD",234];c.KEY_RELEASED_PERIOD.toString=g;c.KEY_RELEASED_PERIOD.__enum__=c;c.KEY_RELEASED_QUOTE=["KEY_RELEASED_QUOTE",235];c.KEY_RELEASED_QUOTE.toString=g;c.KEY_RELEASED_QUOTE.__enum__=c;c.KEY_RELEASED_SEMICOLON=["KEY_RELEASED_SEMICOLON",236];c.KEY_RELEASED_SEMICOLON.toString=
g;c.KEY_RELEASED_SEMICOLON.__enum__=c;c.KEY_RELEASED_ANDROIDMENU=["KEY_RELEASED_ANDROIDMENU",237];c.KEY_RELEASED_ANDROIDMENU.toString=g;c.KEY_RELEASED_ANDROIDMENU.__enum__=c;c.KEY_RELEASED_ANDROIDSEARCH=["KEY_RELEASED_ANDROIDSEARCH",238];c.KEY_RELEASED_ANDROIDSEARCH.toString=g;c.KEY_RELEASED_ANDROIDSEARCH.__enum__=c;c.KEY_RELEASED_UNKNOWN=["KEY_RELEASED_UNKNOWN",239];c.KEY_RELEASED_UNKNOWN.toString=g;c.KEY_RELEASED_UNKNOWN.__enum__=c;var k=j["tools.spark.sliced.services.std.logic.gde.interfaces.EEventType"]=
{__ename__:!0,__constructs__:"CREATED,UPDATE,CHANGED,NETWORK_CONNECTED,NETWORK_REQUEST,NETWORK_SERVER_EVENT,FILETRANSFER_CONNECTED,FILETRANSFER_SENDREQUEST,MOUSE_LEFT_CLICK,MOUSE_RIGHT_CLICK,MOUSE_LEFT_DOWN,MOUSE_RIGHT_DOWN,MOUSE_SCROLL,MOUSE_ENTERED,MOUSE_MOVED,MOUSE_LEFT,MOUSE_DOWN,MOUSE_UP,PHYSICS_COLLISION_START,PHYSICS_COLLISION_END,PHYSICS_SENSOR_START,PHYSICS_SENSOR_START_BIPED_FEET,PHYSICS_SENSOR_END,PHYSICS_SENSOR_END_BIPED_FEET,ON_DRAG_START,ON_DRAG,ON_DRAG_END,ON_DRAG_ENTER,ON_DRAG_OVER,ON_DRAG_LEAVE,ON_DROP,KEY_PRESSED_LOCAL,KEY_RELEASED_LOCAL,KEY_DOWN_LOCAL,KEY_PRESSED,KEY_RELEASED".split(",")};
k.CREATED=["CREATED",0];k.CREATED.toString=g;k.CREATED.__enum__=k;k.UPDATE=["UPDATE",1];k.UPDATE.toString=g;k.UPDATE.__enum__=k;k.CHANGED=["CHANGED",2];k.CHANGED.toString=g;k.CHANGED.__enum__=k;k.NETWORK_CONNECTED=["NETWORK_CONNECTED",3];k.NETWORK_CONNECTED.toString=g;k.NETWORK_CONNECTED.__enum__=k;k.NETWORK_REQUEST=["NETWORK_REQUEST",4];k.NETWORK_REQUEST.toString=g;k.NETWORK_REQUEST.__enum__=k;k.NETWORK_SERVER_EVENT=["NETWORK_SERVER_EVENT",5];k.NETWORK_SERVER_EVENT.toString=g;k.NETWORK_SERVER_EVENT.__enum__=
k;k.FILETRANSFER_CONNECTED=["FILETRANSFER_CONNECTED",6];k.FILETRANSFER_CONNECTED.toString=g;k.FILETRANSFER_CONNECTED.__enum__=k;k.FILETRANSFER_SENDREQUEST=["FILETRANSFER_SENDREQUEST",7];k.FILETRANSFER_SENDREQUEST.toString=g;k.FILETRANSFER_SENDREQUEST.__enum__=k;k.MOUSE_LEFT_CLICK=["MOUSE_LEFT_CLICK",8];k.MOUSE_LEFT_CLICK.toString=g;k.MOUSE_LEFT_CLICK.__enum__=k;k.MOUSE_RIGHT_CLICK=["MOUSE_RIGHT_CLICK",9];k.MOUSE_RIGHT_CLICK.toString=g;k.MOUSE_RIGHT_CLICK.__enum__=k;k.MOUSE_LEFT_DOWN=["MOUSE_LEFT_DOWN",
10];k.MOUSE_LEFT_DOWN.toString=g;k.MOUSE_LEFT_DOWN.__enum__=k;k.MOUSE_RIGHT_DOWN=["MOUSE_RIGHT_DOWN",11];k.MOUSE_RIGHT_DOWN.toString=g;k.MOUSE_RIGHT_DOWN.__enum__=k;k.MOUSE_SCROLL=["MOUSE_SCROLL",12];k.MOUSE_SCROLL.toString=g;k.MOUSE_SCROLL.__enum__=k;k.MOUSE_ENTERED=["MOUSE_ENTERED",13];k.MOUSE_ENTERED.toString=g;k.MOUSE_ENTERED.__enum__=k;k.MOUSE_MOVED=["MOUSE_MOVED",14];k.MOUSE_MOVED.toString=g;k.MOUSE_MOVED.__enum__=k;k.MOUSE_LEFT=["MOUSE_LEFT",15];k.MOUSE_LEFT.toString=g;k.MOUSE_LEFT.__enum__=
k;k.MOUSE_DOWN=["MOUSE_DOWN",16];k.MOUSE_DOWN.toString=g;k.MOUSE_DOWN.__enum__=k;k.MOUSE_UP=["MOUSE_UP",17];k.MOUSE_UP.toString=g;k.MOUSE_UP.__enum__=k;k.PHYSICS_COLLISION_START=["PHYSICS_COLLISION_START",18];k.PHYSICS_COLLISION_START.toString=g;k.PHYSICS_COLLISION_START.__enum__=k;k.PHYSICS_COLLISION_END=["PHYSICS_COLLISION_END",19];k.PHYSICS_COLLISION_END.toString=g;k.PHYSICS_COLLISION_END.__enum__=k;k.PHYSICS_SENSOR_START=["PHYSICS_SENSOR_START",20];k.PHYSICS_SENSOR_START.toString=g;k.PHYSICS_SENSOR_START.__enum__=
k;k.PHYSICS_SENSOR_START_BIPED_FEET=["PHYSICS_SENSOR_START_BIPED_FEET",21];k.PHYSICS_SENSOR_START_BIPED_FEET.toString=g;k.PHYSICS_SENSOR_START_BIPED_FEET.__enum__=k;k.PHYSICS_SENSOR_END=["PHYSICS_SENSOR_END",22];k.PHYSICS_SENSOR_END.toString=g;k.PHYSICS_SENSOR_END.__enum__=k;k.PHYSICS_SENSOR_END_BIPED_FEET=["PHYSICS_SENSOR_END_BIPED_FEET",23];k.PHYSICS_SENSOR_END_BIPED_FEET.toString=g;k.PHYSICS_SENSOR_END_BIPED_FEET.__enum__=k;k.ON_DRAG_START=["ON_DRAG_START",24];k.ON_DRAG_START.toString=g;k.ON_DRAG_START.__enum__=
k;k.ON_DRAG=["ON_DRAG",25];k.ON_DRAG.toString=g;k.ON_DRAG.__enum__=k;k.ON_DRAG_END=["ON_DRAG_END",26];k.ON_DRAG_END.toString=g;k.ON_DRAG_END.__enum__=k;k.ON_DRAG_ENTER=["ON_DRAG_ENTER",27];k.ON_DRAG_ENTER.toString=g;k.ON_DRAG_ENTER.__enum__=k;k.ON_DRAG_OVER=["ON_DRAG_OVER",28];k.ON_DRAG_OVER.toString=g;k.ON_DRAG_OVER.__enum__=k;k.ON_DRAG_LEAVE=["ON_DRAG_LEAVE",29];k.ON_DRAG_LEAVE.toString=g;k.ON_DRAG_LEAVE.__enum__=k;k.ON_DROP=["ON_DROP",30];k.ON_DROP.toString=g;k.ON_DROP.__enum__=k;k.KEY_PRESSED_LOCAL=
["KEY_PRESSED_LOCAL",31];k.KEY_PRESSED_LOCAL.toString=g;k.KEY_PRESSED_LOCAL.__enum__=k;k.KEY_RELEASED_LOCAL=["KEY_RELEASED_LOCAL",32];k.KEY_RELEASED_LOCAL.toString=g;k.KEY_RELEASED_LOCAL.__enum__=k;k.KEY_DOWN_LOCAL=["KEY_DOWN_LOCAL",33];k.KEY_DOWN_LOCAL.toString=g;k.KEY_DOWN_LOCAL.__enum__=k;k.KEY_PRESSED=["KEY_PRESSED",34];k.KEY_PRESSED.toString=g;k.KEY_PRESSED.__enum__=k;k.KEY_RELEASED=["KEY_RELEASED",35];k.KEY_RELEASED.toString=g;k.KEY_RELEASED.__enum__=k;var Y=j["tools.spark.sliced.services.std.logic.gde.interfaces.EGameType"]=
{__ename__:!0,__constructs__:"ENTITY,FORM,STATE,SPACE,ACTION,TRIGGER".split(",")};Y.ENTITY=["ENTITY",0];Y.ENTITY.toString=g;Y.ENTITY.__enum__=Y;Y.FORM=["FORM",1];Y.FORM.toString=g;Y.FORM.__enum__=Y;Y.STATE=["STATE",2];Y.STATE.toString=g;Y.STATE.__enum__=Y;Y.SPACE=["SPACE",3];Y.SPACE.toString=g;Y.SPACE.__enum__=Y;Y.ACTION=["ACTION",4];Y.ACTION.toString=g;Y.ACTION.__enum__=Y;Y.TRIGGER=["TRIGGER",5];Y.TRIGGER.toString=g;Y.TRIGGER.__enum__=Y;var l=j["tools.spark.sliced.services.std.logic.gde.interfaces.ENodeType"]=
{__ename__:!0,__constructs__:"ENTITIES,ENTITY,FORM,STATES,STATE,SPACE,ACTIONS,ACTION,SCRIPTS,SCRIPT,GML,TRIGGERS,TRIGGER,EVENT,CONCURRENCY,ID,TYPE,VALUE,EXTENDS".split(",")};l.ENTITIES=["ENTITIES",0];l.ENTITIES.toString=g;l.ENTITIES.__enum__=l;l.ENTITY=["ENTITY",1];l.ENTITY.toString=g;l.ENTITY.__enum__=l;l.FORM=["FORM",2];l.FORM.toString=g;l.FORM.__enum__=l;l.STATES=["STATES",3];l.STATES.toString=g;l.STATES.__enum__=l;l.STATE=["STATE",4];l.STATE.toString=g;l.STATE.__enum__=l;l.SPACE=["SPACE",5];l.SPACE.toString=
g;l.SPACE.__enum__=l;l.ACTIONS=["ACTIONS",6];l.ACTIONS.toString=g;l.ACTIONS.__enum__=l;l.ACTION=["ACTION",7];l.ACTION.toString=g;l.ACTION.__enum__=l;l.SCRIPTS=["SCRIPTS",8];l.SCRIPTS.toString=g;l.SCRIPTS.__enum__=l;l.SCRIPT=["SCRIPT",9];l.SCRIPT.toString=g;l.SCRIPT.__enum__=l;l.GML=["GML",10];l.GML.toString=g;l.GML.__enum__=l;l.TRIGGERS=["TRIGGERS",11];l.TRIGGERS.toString=g;l.TRIGGERS.__enum__=l;l.TRIGGER=["TRIGGER",12];l.TRIGGER.toString=g;l.TRIGGER.__enum__=l;l.EVENT=["EVENT",13];l.EVENT.toString=
g;l.EVENT.__enum__=l;l.CONCURRENCY=["CONCURRENCY",14];l.CONCURRENCY.toString=g;l.CONCURRENCY.__enum__=l;l.ID=["ID",15];l.ID.toString=g;l.ID.__enum__=l;l.TYPE=["TYPE",16];l.TYPE.toString=g;l.TYPE.__enum__=l;l.VALUE=["VALUE",17];l.VALUE.toString=g;l.VALUE.__enum__=l;l.EXTENDS=["EXTENDS",18];l.EXTENDS.toString=g;l.EXTENDS.__enum__=l;var K=j["tools.spark.sliced.services.std.logic.gde.interfaces.EStateType"]={__ename__:!0,__constructs__:["DYNAMIC","INTEGER","DECIMAL","BOOLEAN","TEXT"]};K.DYNAMIC=["DYNAMIC",
0];K.DYNAMIC.toString=g;K.DYNAMIC.__enum__=K;K.INTEGER=["INTEGER",1];K.INTEGER.toString=g;K.INTEGER.__enum__=K;K.DECIMAL=["DECIMAL",2];K.DECIMAL.toString=g;K.DECIMAL.__enum__=K;K.BOOLEAN=["BOOLEAN",3];K.BOOLEAN.toString=g;K.BOOLEAN.__enum__=K;K.TEXT=["TEXT",4];K.TEXT.toString=g;K.TEXT.__enum__=K;var Qh=function(){};j["tools.spark.sliced.services.std.logic.interpreter.interfaces.IInterpreter"]=Qh;Qh.__name__=!0;Qh.prototype={__class__:Qh};var Ag=function(){w.logger.info("Init Gml Interpreter...",null);
this._init()};j["tools.spark.sliced.services.std.logic.interpreter.core.GmlInterpreter"]=Ag;Ag.__name__=!0;Ag.__interfaces__=[Qh];Ag.prototype={_init:function(){this._hashTable=new dd},run:function(a,b){this._deleteMeCircleAround(null!=Ob.me?b.getReserved("me"):b.h.me);return!0},_deleteMeCircleAround:function(a){null!=a.getState("std_object")&&(a.setState("std_x",a.getState("initX")+50*Math.cos(a.getState("rotationDegree"))),a.getState("std_object").x=a.getState("std_x"),a.setState("std_y",a.getState("initY")+
50*Math.sin(a.getState("rotationDegree"))),a.getState("std_object").y=a.getState("std_y"),a.setState("rotationDegree",a.getState("rotationDegree")+0.1))},hash:function(){return-1},__class__:Ag};var Lh=function(){w.logger.info("Init Haxe Interpreter...",null);this._init()};j["tools.spark.sliced.services.std.logic.interpreter.core.HaxeInterpreter"]=Lh;Lh.__name__=!0;Lh.__interfaces__=[Qh];Lh.prototype={_init:function(){r.random(1);this._hashTable=new dd;this._parser=new Ki;this._interpreter=new Ji;
this._interpreter.variables.set("Game",B);this._interpreter.variables.set("Sound",B.sound);this._interpreter.variables.set("Logic",B.logic);this._interpreter.variables.set("Input",B.input);this._interpreter.variables.set("Comms",B.comms);this._interpreter.variables.set("Event",B.event);this._interpreter.variables.set("Display",B.display);this._interpreter.variables.set("Key",e);this._interpreter.variables.set("Console",ja);this._interpreter.variables.set("Math",Math);this._interpreter.variables.set("Std",
r);this._interpreter.variables.set("String",String);this._interpreter.variables.set("Assets",O);this._interpreter.variables.set("Xml",q);this._interpreter.variables.set("Fast",Ud);this._interpreter.variables.set("StringTools",fa);this._interpreter.variables.set("EReg",mb);this._interpreter.variables.set("MouseButton",Ga);this._interpreter.variables.set("StringMap",E);this._interpreter.variables.set("IntMap",dd);this._interpreter.variables.set("ObjectMap",Ca);this._interpreter.variables.set("XMLHttpRequest",
XMLHttpRequest)},run:function(a,b){for(var d=this._get(a),c=b.keys();c.hasNext();){var f=c.next(),i;i=null!=Ob[f]?b.getReserved(f):b.h[f];this._interpreter.variables.set(f,i)}try{return this._interpreter.execute(d),!0}catch(h){return h instanceof p&&(h=h.val),w.logger.error("<<<<<SPARK SCRIPT RUN-TIME ERROR>>>>>: "+r.string(h),null),!1}},hash:function(a){try{return this._store(this._parser.parseString(a),zi.make($b.ofString(a)))}catch(b){return b instanceof p&&(b=b.val),w.logger.error("<<<<<SPARK SCRIPT PARSING ERROR [Line: "+
this._parser.line+"]>>>>>: "+r.string(b),null),w.logger.error("Stack: "+a,null),this._store(this._parser.parseString("Display.error('This script failed to parse. Look at stack above.'); CouldNotParseScript;"),zi.make($b.ofString("Display.error('This script failed to parse. Look at stack above.'); CouldNotParseScript;")))}},_get:function(a){var b=this._hashTable.h[a];null==b&&w.logger.error("Script not found on address ["+a+"]",null);return b},_store:function(a,b){if(null!=this._hashTable.h[b]){if(r.string(a)==
r.string(this._hashTable.h[b]))return b;ja.warn("Collision detected with hashId: ["+b+"] and script ["+r.string(a)+"]. Previous Stored Entry Script: "+r.string(this._hashTable.h[b]));return this._store(a,++b)}this._hashTable.h[b]=a;a;return b},__class__:Lh};var Hg=function(){this._init()};j["tools.spark.sliced.services.std.sound.core.Sound"]=Hg;Hg.__name__=!0;Hg.__interfaces__=[Ck];Hg.__super__=Ma;Hg.prototype=z(Ma.prototype,{_init:function(){w.logger.info("Init Sound std Service...",null)},playSound:function(a,
b){return O.getSound(a).play(b)},loopSound:function(a,b){return O.getSound(a).loop(b)},__class__:Hg});var nc=function(){this.body=this.constraint=null;this.pre_swapped=!1;this.int1=this.int2=this.set=this.wrap_arbiters=this.pre_arbiter=null;this.length=0;this.listener=this.next=this.prev=null;this.event=0;this.outer_body=this.outer_con=this.outer_int=null;this.length=0};j["zpp_nape.callbacks.ZPP_Callback"]=nc;nc.__name__=!0;nc.prototype={wrapper_body:function(){null==this.outer_body&&(this.outer_body=
new Zg,this.outer_body.zpp_inner=this);return this.outer_body},wrapper_con:function(){null==this.outer_con&&(this.outer_con=new $g,this.outer_con.zpp_inner=this);return this.outer_con},wrapper_int:function(){null==this.outer_int&&(this.outer_int=new Gf,this.outer_int.zpp_inner=this);null==this.wrap_arbiters?this.wrap_arbiters=wd.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters;this.wrap_arbiters.zpp_inner.zip_length=!0;this.wrap_arbiters.zpp_inner.at_ite=null;return this.outer_int},
push:function(a){null!=this.prev?this.prev.next=a:this.next=a;a.prev=this.prev;a.next=null;this.prev=a;this.length++},pop:function(){var a=this.next;this.next=a.next;null==this.next?this.prev=null:this.next.prev=null;this.length--;return a},empty:function(){return null==this.next},__class__:nc};var R=function(){this.interactors=this.constraints=null;this.zip_conlisteners=!1;this.conlisteners=null;this.zip_bodylisteners=!1;this.bodylisteners=null;this.zip_listeners=!1;this.manager=this.cbpairs=this.listeners=
null;this.id=0;this.next=null;this.count=0;this.cbTypes=null;this.cbTypes=new Gc;this.listeners=new Ue;this.zip_listeners=!0;this.bodylisteners=new ag;this.zip_bodylisteners=!0;this.conlisteners=new oh;this.zip_conlisteners=!0;this.constraints=new de;this.interactors=new Od;this.id=cb.CbSet();this.cbpairs=new Pj};j["zpp_nape.callbacks.ZPP_CbSet"]=R;R.__name__=!0;R.setlt=function(a,b){for(var d=a.cbTypes.head,c=b.cbTypes.head;null!=d&&null!=c;){var f=d.elt,i=c.elt;if(f.id<i.id)return!0;if(i.id<f.id)return!1;
d=d.next;c=c.next}return null!=c&&null==d};R.get=function(a){var b;null==R.zpp_pool?b=new R:(b=R.zpp_pool,R.zpp_pool=b.next,b.next=null);null;for(var d=null,a=a.head;null!=a;){var c=a.elt,d=b.cbTypes.insert(d,c);c.cbsets.add(b);a=a.next}return b};R.single_intersection=function(a,b,d){return a.manager.pair(a,b).single_intersection(d)};R.find_all=function(a,b,d,c){a.manager.pair(a,b).forall(d,c)};R.prototype={invalidate_pairs:function(){for(var a=this.cbpairs.head;null!=a;)a.elt.zip_listeners=!0,a=
a.next},realvalidate_listeners:function(){this.listeners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,d=this.listeners.head,c=a.elt.listeners.head;null!=c;){var f=c.elt;null!=d&&d.elt==f?(c=c.next,b=d,d=d.next):null==d||Ia.setlt(f,d.elt)?(f.space==this.manager.space&&(b=this.listeners.inlined_insert(b,f)),c=c.next):(b=d,d=d.next)}a=a.next}},realvalidate_bodylisteners:function(){this.bodylisteners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,d=this.bodylisteners.head,
c=a.elt.bodylisteners.head;null!=c;){var f=c.elt;null!=d&&d.elt==f?(c=c.next,b=d,d=d.next):null==d||Ia.setlt(f,d.elt)?(!f.options.excluded(this.cbTypes)&&f.space==this.manager.space&&(b=this.bodylisteners.inlined_insert(b,f)),c=c.next):(b=d,d=d.next)}a=a.next}},realvalidate_conlisteners:function(){this.conlisteners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,d=this.conlisteners.head,c=a.elt.conlisteners.head;null!=c;){var f=c.elt;null!=d&&d.elt==f?(c=c.next,b=d,d=d.next):null==d||
Ia.setlt(f,d.elt)?(!f.options.excluded(this.cbTypes)&&f.space==this.manager.space&&(b=this.conlisteners.inlined_insert(b,f)),c=c.next):(b=d,d=d.next)}a=a.next}},validate:function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners());this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners());this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},free:function(){this.listeners.clear();this.zip_listeners=!0;this.bodylisteners.clear();
this.zip_bodylisteners=!0;this.conlisteners.clear();for(this.zip_conlisteners=!0;null!=this.cbTypes.head;)this.cbTypes.pop_unsafe().cbsets.remove(this)},__class__:R};var Fb=function(){this.listeners=null;this.zip_listeners=!1;this.a=this.b=this.next=null;this.listeners=new Ue};j["zpp_nape.callbacks.ZPP_CbSetPair"]=Fb;Fb.__name__=!0;Fb.get=function(a,b){var d;null==Fb.zpp_pool?d=new Fb:(d=Fb.zpp_pool,Fb.zpp_pool=d.next,d.next=null);d.zip_listeners=!0;R.setlt(a,b)?(d.a=a,d.b=b):(d.a=b,d.b=a);return d};
Fb.setlt=function(a,b){return R.setlt(a.a,b.a)||a.a==b.a&&R.setlt(a.b,b.b)};Fb.prototype={__validate:function(){this.listeners.clear();for(var a=this.a.listeners.head,b=this.b.listeners.head;null!=a&&null!=b;){var d=a.elt,c=b.elt;d==c?((d.options1.compatible(this.a.cbTypes)&&d.options2.compatible(this.b.cbTypes)||d.options2.compatible(this.a.cbTypes)&&d.options1.compatible(this.b.cbTypes))&&this.listeners.add(d),a=a.next,b=b.next):d.precedence>c.precedence||d.precedence==c.precedence&&d.id>c.id?a=
a.next:b=b.next}},empty_intersection:function(){return null==this.listeners.head},single_intersection:function(a){var b=this.listeners.head;return null!=b&&b.elt==a&&null==b.next},forall:function(a,b){for(var d=this.listeners.head;null!=d;){var c=d.elt;c.event==a&&b(c);d=d.next}},__class__:Fb};var h=function(){};j["zpp_nape.util.ZPP_Flags"]=h;h.__name__=!0;var Ia=function(){this.body=this.constraint=this.interaction=this.space=null;this.id=this.type=this.event=this.precedence=0;this.outer=null;this.id=
cb.Listener()};j["zpp_nape.callbacks.ZPP_Listener"]=Ia;Ia.__name__=!0;Ia.setlt=function(a,b){return a.precedence>b.precedence||a.precedence==b.precedence&&a.id>b.id};Ia.prototype={addedToSpace:function(){},removedFromSpace:function(){},__class__:Ia};var Qj=function(){this.outer_zn=this.options=this.handler=null};j["zpp_nape.callbacks.ZPP_BodyListener"]=Qj;Qj.__name__=!0;Qj.__super__=Ia;Qj.prototype=z(Ia.prototype,{addedToSpace:function(){this.options.handler=v(this,this.cbtype_change);for(var a=this.options.includes.head;null!=
a;)a.elt.addbody(this),a=a.next},removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;b.bodylisteners.remove(this);b.invalidatebody();a=a.next}this.options.handler=null},cbtype_change:function(a,b,d){this.removedFromSpace();this.options.effect_change(a,b,d);this.addedToSpace()},__class__:Qj});var Rj=function(){this.outer_zn=this.options=this.handler=null};j["zpp_nape.callbacks.ZPP_ConstraintListener"]=Rj;Rj.__name__=!0;Rj.__super__=Ia;Rj.prototype=z(Ia.prototype,
{addedToSpace:function(){this.options.handler=v(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;)a.elt.addconstraint(this),a=a.next},removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;b.conlisteners.remove(this);b.invalidateconstraint();a=a.next}this.options.handler=null},cbtype_change:function(a,b,d){this.removedFromSpace();this.options.effect_change(a,b,d);this.addedToSpace()},__class__:Rj});var Gc=function(){this.length=0;this.modified=
this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_CbType"]=Gc;Gc.__name__=!0;Gc.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Da.zpp_pool?b=new Da:(b=Da.zpp_pool,Da.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var d;null==Da.zpp_pool?d=new Da:(d=Da.zpp_pool,Da.zpp_pool=d.next,d.next=null);null;
d.elt=b;null==a?(d.next=this.head,this.head=d):(d.next=a.next,a.next=d);this.pushmod=this.modified=!0;this.length++;return d},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Da.zpp_pool;Da.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},
inlined_try_remove:function(a){for(var b=null,d=this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;break}b=d;d=d.next}return c},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=Da.zpp_pool;Da.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},has:function(a){return this.inlined_has(a)},
inlined_has:function(a){var b;b=!1;for(var d=this.head;null!=d;){if(d.elt==a){b=!0;break}d=d.next}return b},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Gc};var Ja=function(a,b,d,c){this.handlerp=null;this.allowSleepingCallbacks=this.pure=!1;this.options1=this.options2=this.handleri=null;this.itype=0;this.outer_zni=this.outer_znp=null;Ia.call(this);this.type=c;this.interaction=this;this.event=d;this.options1=a.zpp_inner;this.options2=b.zpp_inner;this.allowSleepingCallbacks=
!1};j["zpp_nape.callbacks.ZPP_InteractionListener"]=Ja;Ja.__name__=!0;Ja.__super__=Ia;Ja.prototype=z(Ia.prototype,{CbSetset:function(a,b,d){for(var c=Ja.UCbSet,f=Ja.VCbSet,i=Ja.WCbSet,a=a.head,h=b.head;null!=a&&null!=h;){var e=a.elt,g=h.elt;e==g?(i.inlined_add(e),a=a.next,h=h.next):R.setlt(e,g)?(c.inlined_add(e),a=a.next):(f.inlined_add(g),h=h.next)}for(;null!=a;)c.inlined_add(a.elt),a=a.next;for(;null!=h;)f.inlined_add(h.elt),h=h.next;for(;null!=c.head;){a=c.pop_unsafe();for(h=b.head;null!=h;)d(a,
h.elt),h=h.next}for(;null!=f.head;){b=f.pop_unsafe();for(c=i.head;null!=c;)d(b,c.elt),c=c.next}for(;null!=i.head;){f=i.pop_unsafe();d(f,f);for(b=i.head;null!=b;)d(f,b.elt),b=b.next}},CbTypeset:function(a,b,d){for(var c=Ja.UCbType,f=Ja.VCbType,i=Ja.WCbType,a=a.head,h=b.head;null!=a&&null!=h;){var e=a.elt,g=h.elt;e==g?(i.inlined_add(e),a=a.next,h=h.next):e.id<g.id?(c.inlined_add(e),a=a.next):(f.inlined_add(g),h=h.next)}for(;null!=a;)c.inlined_add(a.elt),a=a.next;for(;null!=h;)f.inlined_add(h.elt),h=
h.next;for(;null!=c.head;){a=c.pop_unsafe();for(h=b.head;null!=h;)d(a,h.elt),h=h.next}for(;null!=f.head;){b=f.pop_unsafe();for(c=i.head;null!=c;)d(b,c.elt),c=c.next}for(;null!=i.head;){f=i.pop_unsafe();d(f,f);for(b=i.head;null!=b;)d(f,b.elt),b=b.next}},with_uniquesets:function(a){var b=this,d;null==za.zpp_pool?d=new za:(d=za.zpp_pool,za.zpp_pool=d.next,d.next=null);null;d.lt=Fb.setlt;this.CbTypeset(this.options1.includes,this.options2.includes,function(a,c){b.CbSetset(a.cbsets,c.cbsets,function(a,
c){a.validate();c.validate();R.single_intersection(a,c,b)&&d.try_insert(Fb.get(a,c))})});d.clear_with(function(d){a?b.space.freshListenerType(d.a,d.b):b.space.nullListenerType(d.a,d.b);d.a=d.b=null;d.listeners.clear();d.next=Fb.zpp_pool;Fb.zpp_pool=d});var c=d;c.data=null;c.lt=null;c.swapped=null;c.next=za.zpp_pool;za.zpp_pool=c},with_union:function(a){for(var b=this.options1.includes.head,d=this.options2.includes.head;null!=b&&null!=d;){var c=b.elt,f=d.elt;c==f?(a(c),b=b.next,d=d.next):c.id<f.id?
(a(c),b=b.next):(a(f),d=d.next)}for(;null!=b;)a(b.elt),b=b.next;for(;null!=d;)a(d.elt),d=d.next},addedToSpace:function(){var a=this,b=this.type==h.id_ListenerType_PRE;this.with_union(function(d){d.addint(a);if(b)for(d=d.interactors.head;null!=d;)d.elt.wake(),d=d.next});this.options1.handler=v(this,this.cbtype_change1);this.options2.handler=v(this,this.cbtype_change2);this.with_uniquesets(!0)},removedFromSpace:function(){var a=this;this.with_uniquesets(!1);var b=this.type==h.id_ListenerType_PRE;this.with_union(function(d){d.listeners.remove(a);
d.invalidateint();if(b)for(d=d.interactors.head;null!=d;)d.elt.wake(),d=d.next});this.options1.handler=null;this.options2.handler=null},cbtype_change1:function(a,b,d){this.cbtype_change(this.options1,a,b,d)},cbtype_change2:function(a,b,d){this.cbtype_change(this.options2,a,b,d)},cbtype_change:function(a,b,d,c){this.removedFromSpace();a.effect_change(b,d,c);this.addedToSpace();null},__class__:Ja});var le=function(){this.outer=this.handler=this.includes=this.excludes=this.wrap_includes=this.wrap_excludes=
null;this.includes=new Gc;this.excludes=new Gc};j["zpp_nape.callbacks.ZPP_OptionType"]=le;le.__name__=!0;le.argument=function(a){return null==a?new Ie:A.__instanceof(a,Ie)?a:(new Ie).including(a)};le.prototype={setup_includes:function(){this.wrap_includes=Rb.get(this.includes,!0)},setup_excludes:function(){this.wrap_excludes=Rb.get(this.excludes,!0)},excluded:function(a){return this.nonemptyintersection(a,this.excludes)},compatible:function(a){return this.nonemptyintersection(a,this.includes)&&!this.nonemptyintersection(a,
this.excludes)},nonemptyintersection:function(a,b){for(var d=!1,c=a.head,f=b.head;null!=f&&null!=c;){var i=f.elt,h=c.elt;if(i==h){d=!0;break}else i.id<h.id?f=f.next:c=c.next}return d},effect_change:function(a,b,d){if(b)if(d){b=null;for(d=this.includes.head;null!=d&&!(a.id<d.elt.id);){b=d;d=d.next}this.includes.inlined_insert(b,a)}else this.includes.remove(a);else if(d){b=null;for(d=this.excludes.head;null!=d&&!(a.id<d.elt.id);){b=d;d=d.next}this.excludes.inlined_insert(b,a)}else this.excludes.remove(a)},
append_type:function(a,b){a==this.includes?this.includes.has(b)||(this.excludes.has(b)?null!=this.handler?this.handler(b,!1,!1):this.effect_change(b,!1,!1):null!=this.handler?this.handler(b,!0,!0):this.effect_change(b,!0,!0)):this.excludes.has(b)||(this.includes.has(b)?null!=this.handler?this.handler(b,!0,!1):this.effect_change(b,!0,!1):null!=this.handler?this.handler(b,!1,!0):this.effect_change(b,!1,!0))},append:function(a,b){if(A.__instanceof(b,vd))this.append_type(a,b.zpp_inner);else if(A.__instanceof(b,
Ff)){var d;b.zpp_inner.valmod();for(d=dc.get(b);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);this.append_type(a,c.zpp_inner)}}else if(b instanceof Array&&null==b.__enum__)for(d=0;d<b.length;)c=b[d],++d,this.append_type(a,c.zpp_inner)},__class__:le};var Hk=function(){this.cbTypes=this.cbSet=null;this.ignore=this.__velocity=!1;this.component=null;this.active=this.stiff=this.removeOnBreak=!1;this.outer=this.compound=this.space=null};j["zpp_nape.constraint.ZPP_Constraint"]=Hk;Hk.__name__=
!0;Hk.prototype={alloc_cbSet:function(){if(null!=(this.cbSet=this.space.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.constraints.add(this)},dealloc_cbSet:function(){if(null!=this.cbSet){this.cbSet.constraints.remove(this);if(0==--this.cbSet.count){this.space.cbsets.remove(this.cbSet);var a=this.cbSet;a.free();a.next=R.zpp_pool;R.zpp_pool=a}this.cbSet=null}},addedToSpace:function(){this.active&&this.activeInSpace();this.activeBodies();for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.add(this),
a=a.next},removedFromSpace:function(){this.active&&this.inactiveOrOutSpace();this.inactiveBodies();for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.remove(this),a=a.next},activeInSpace:function(){this.alloc_cbSet();null==jb.zpp_pool?this.component=new jb:(this.component=jb.zpp_pool,jb.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=!1;this.component.constraint=this},inactiveOrOutSpace:function(){this.dealloc_cbSet();var a=this.component;a.body=null;a.constraint=
null;null;a.next=jb.zpp_pool;jb.zpp_pool=a;this.component=null},activeBodies:function(){},inactiveBodies:function(){},clearcache:function(){},wake_connected:function(){},forest:function(){},pair_exists:function(){return!1},broken:function(){},warmStart:function(){},preStep:function(){return!1},applyImpulseVel:function(){return!1},applyImpulsePos:function(){return!1},__class__:Hk};var da=function(){this.colarb=this.fluidarb=this.sensorarb=null;this.type=0;this.b1=this.b2=this.ws1=this.ws2=this.pair=
null;this.invalidated=!1;this.immState=0;this.intchange=this.presentable=this.continuous=this.fresh=!1;this.present=0;this.active=this.cleared=this.sleeping=!1;this.id=this.di=this.stamp=this.up_stamp=this.sleep_stamp=this.endGenerated=0;this.outer=null};j["zpp_nape.dynamics.ZPP_Arbiter"]=da;da.__name__=!0;da.prototype={wrapper:function(){null==this.outer&&(da.internal=!0,this.type==da.COL?(this.colarb.outer_zn=new If,this.outer=this.colarb.outer_zn):this.type==da.FLUID?(this.fluidarb.outer_zn=new bh,
this.outer=this.fluidarb.outer_zn):this.outer=new Wd,this.outer.zpp_inner=this,da.internal=!1);return this.outer},__class__:da};var ub=function(){this.next=null;da.call(this);this.type=da.SENSOR;this.sensorarb=this};j["zpp_nape.dynamics.ZPP_SensorArbiter"]=ub;ub.__name__=!0;ub.__super__=da;ub.prototype=z(da.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=
null;this.intchange=this.active=!1;this.next=ub.zpp_pool;ub.zpp_pool=this},__class__:ub});var Gb=function(){this.wMass=this.adamp=this.agamma=this.vMassa=this.vMassb=this.vMassc=this.dampx=this.dampy=this.lgamma=this.nx=this.ny=this.buoyx=this.buoyy=this.pre_dt=0;this.nodrag=!1;this.centroidx=this.centroidy=this.overlap=this.r1x=this.r1y=this.r2x=this.r2y=0;this.outer_zn=this.next=null;da.call(this);this.type=da.FLUID;this.fluidarb=this;this.buoyy=this.buoyx=0;this.pre_dt=-1};j["zpp_nape.dynamics.ZPP_FluidArbiter"]=
Gb;Gb.__name__=!0;Gb.__super__=da;Gb.prototype=z(da.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;this.intchange=this.active=!1;this.next=Gb.zpp_pool;Gb.zpp_pool=this;this.pre_dt=-1},preStep:function(a,b){-1==this.pre_dt&&(this.pre_dt=b);var d=b/this.pre_dt;this.pre_dt=b;this.r1x=this.centroidx-this.b1.posx;this.r1y=this.centroidy-this.b1.posy;this.r2x=
this.centroidx-this.b2.posx;this.r2y=this.centroidy-this.b2.posy;var c=0,f=0;this.ws1.fluidEnabled&&null!=this.ws1.fluidProperties.wrap_gravity?(c=this.ws1.fluidProperties.gravityx,f=this.ws1.fluidProperties.gravityy):(c=a.gravityx,f=a.gravityy);var i=0,e=0;this.ws2.fluidEnabled&&null!=this.ws2.fluidProperties.wrap_gravity?(i=this.ws2.fluidProperties.gravityx,e=this.ws2.fluidProperties.gravityy):(i=a.gravityx,e=a.gravityy);var g=0,j=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var k=this.overlap*
this.ws1.fluidProperties.density,l=this.overlap*this.ws2.fluidProperties.density;if(k>l)i=k+l,g-=c*i,j-=f*i;else if(k<l)c=k+l,g+=i*c,j+=e*c;else{var n=0,p=0,n=0.5*(c+i),p=0.5*(f+e);this.ws1.worldCOMx*n+this.ws1.worldCOMy*p>this.ws2.worldCOMx*n+this.ws2.worldCOMy*p?(c=k+l,g-=n*c,j-=p*c):(c=k+l,g+=n*c,j+=p*c)}}else this.ws1.fluidEnabled?(i=this.overlap*this.ws1.fluidProperties.density,g-=c*i,j-=f*i):this.ws2.fluidEnabled&&(c=this.overlap*this.ws2.fluidProperties.density,g+=i*c,j+=e*c);g*=b;j*=b;this.buoyx=
g;this.buoyy=j;this.b1.type==h.id_BodyType_DYNAMIC&&(c=this.b1.imass,this.b1.velx-=g*c,this.b1.vely-=j*c,this.b1.angvel-=(j*this.r1x-g*this.r1y)*this.b1.iinertia);this.b2.type==h.id_BodyType_DYNAMIC&&(c=this.b2.imass,this.b2.velx+=g*c,this.b2.vely+=j*c,this.b2.angvel+=(j*this.r2x-g*this.r2y)*this.b2.iinertia);if((!this.ws1.fluidEnabled||0==this.ws1.fluidProperties.viscosity)&&(!this.ws2.fluidEnabled||0==this.ws2.fluidProperties.viscosity))this.nodrag=!0,this.adamp=this.dampy=this.dampx=0;else{this.nodrag=
!1;g=0;this.ws1.fluidEnabled&&(this.ws2.validate_angDrag(),g+=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area);this.ws2.fluidEnabled&&(this.ws1.validate_angDrag(),g+=this.ws2.fluidProperties.viscosity*this.ws1.angDrag*this.overlap/this.ws1.area);0!=g?(j=this.b1.sinertia+this.b2.sinertia,this.wMass=0!=j?1/j:0,g=2*Math.PI*4.0E-4*g,this.agamma=1/(b*g*(2+g*b)),g=1/(1+this.agamma),this.agamma*=g,this.wMass*=g):this.agamma=this.wMass=0;g=this.b2.velx+this.b2.kinvelx-this.r2y*
(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel));j=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.r1x*(this.b1.angvel+this.b1.kinangvel));g*g+j*j<t.epsilon*t.epsilon||(c=1/Math.sqrt(g*g+j*j),this.nx=g*c,this.ny=j*c);g=0;if(this.ws1.fluidEnabled)if(j=-this.ws1.fluidProperties.viscosity*this.overlap/this.ws2.area,this.ws2.type==h.id_ShapeType_CIRCLE)g-=j*this.ws2.circle.radius*t.fluidLinearDrag/
(2*this.ws2.circle.radius*Math.PI);else{f=c=0;for(i=this.ws2.polygon.edges.head;null!=i;)e=i.elt,c+=e.length,e=j*e.length*(e.gnormx*this.nx+e.gnormy*this.ny),0<e&&(e=e*=-t.fluidVacuumDrag),f-=0.5*e*t.fluidLinearDrag,i=i.next;g+=f/c}if(this.ws2.fluidEnabled)if(j=-this.ws2.fluidProperties.viscosity*this.overlap/this.ws1.area,this.ws1.type==h.id_ShapeType_CIRCLE)g-=j*this.ws1.circle.radius*t.fluidLinearDrag/(2*this.ws1.circle.radius*Math.PI);else{f=c=0;for(i=this.ws1.polygon.edges.head;null!=i;)e=i.elt,
c+=e.length,e=j*e.length*(e.gnormx*this.nx+e.gnormy*this.ny),0<e&&(e=e*=-t.fluidVacuumDrag),f-=0.5*e*t.fluidLinearDrag,i=i.next;g+=f/c}0!=g?(i=this.b1.smass+this.b2.smass,f=c=j=0,j=i,c=0,f=i,0!=this.b1.sinertia&&(i=this.r1x*this.b1.sinertia,e=this.r1y*this.b1.sinertia,j+=e*this.r1y,c+=-e*this.r1x,f+=i*this.r1x),0!=this.b2.sinertia&&(i=this.r2x*this.b2.sinertia,e=this.r2y*this.b2.sinertia,j+=e*this.r2y,c+=-e*this.r2x,f+=i*this.r2x),i=j*f-c*c,i!=i?(j=c=f=0,3):0==i?(i=0,0!=j?j=1/j:(j=0,i|=1),0!=f?f=
1/f:(f=0,i|=2),c=0,i):(i=1/i,e=f*i,f=j*i,j=e,c*=-i,0),this.vMassa=j,this.vMassb=c,this.vMassc=f,g*=2*Math.PI,this.lgamma=1/(b*g*(2+g*b)),g=1/(1+this.lgamma),this.lgamma*=g,this.vMassa*=g,this.vMassb*=g,this.vMassc*=g):this.lgamma=this.vMassc=this.vMassb=this.vMassa=0}this.dampx*=d;this.dampy*=d;this.adamp*=d},warmStart:function(){var a=this.b1.imass;this.b1.velx-=this.dampx*a;this.b1.vely-=this.dampy*a;a=this.b2.imass;this.b2.velx+=this.dampx*a;this.b2.vely+=this.dampy*a;this.b1.angvel-=this.b1.iinertia*
(this.dampy*this.r1x-this.dampx*this.r1y);this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y);this.b1.angvel-=this.adamp*this.b1.iinertia;this.b2.angvel+=this.adamp*this.b2.iinertia},applyImpulseVel:function(){if(!this.nodrag){var a=this.b1.angvel+this.b1.kinangvel,b=this.b2.angvel+this.b2.kinangvel,d=this.b1.velx+this.b1.kinvelx-this.r1y*a-(this.b2.velx+this.b2.kinvelx-this.r2y*b),c=this.b1.vely+this.b1.kinvely+this.r1x*a-(this.b2.vely+this.b2.kinvely+this.r2x*b),f=this.vMassa*
d+this.vMassb*c,c=this.vMassb*d+this.vMassc*c,i=this.lgamma,d=f-this.dampx*i,c=c-this.dampy*i;this.dampx+=1*d;this.dampy+=1*c;f=this.b1.imass;this.b1.velx-=d*f;this.b1.vely-=c*f;f=this.b2.imass;this.b2.velx+=d*f;this.b2.vely+=c*f;this.b1.angvel-=this.b1.iinertia*(c*this.r1x-d*this.r1y);this.b2.angvel+=this.b2.iinertia*(c*this.r2x-d*this.r2y);a=(a-b)*this.wMass-this.adamp*this.agamma;this.adamp+=a;this.b1.angvel-=a*this.b1.iinertia;this.b2.angvel+=a*this.b2.iinertia}},__class__:Gb});var rb=function(){this.pre_dt=
0;this.stat=!1;this.next=null;this.hc2=this.hpc2=!1;this.c1=this.oc1=this.c2=this.oc2=null;this.__ref_vertex=0;this.__ref_edge1=this.__ref_edge2=null;this.biasCoef=0;this.rev=!1;this.nx=this.ny=this.kMassa=this.kMassb=this.kMassc=this.Ka=this.Kb=this.Kc=this.rMass=this.jrAcc=this.rn1a=this.rt1a=this.rn1b=this.rt1b=this.rn2a=this.rt2a=this.rn2b=this.rt2b=this.k1x=this.k1y=this.k2x=this.k2y=this.surfacex=this.surfacey=this.lnormx=this.lnormy=this.lproj=this.radius=0;this.s1=this.s2=this.contacts=this.innards=
null;this.userdef_dyn_fric=this.userdef_stat_fric=this.userdef_restitution=this.userdef_rfric=!1;this.dyn_fric=this.stat_fric=this.restitution=this.rfric=0;this.outer_zn=null;da.call(this);this.pre_dt=-1;this.contacts=new ob;this.innards=new Rh;this.type=da.COL;this.colarb=this};j["zpp_nape.dynamics.ZPP_ColArbiter"]=rb;rb.__name__=!0;rb.__super__=da;rb.prototype=z(da.prototype,{injectContact:function(a,b,d,c,f,i,h){null==h&&(h=!1);for(var e=null,g=this.contacts.next;null!=g;){var j=g;if(i==j.hash){e=
j;break}g=g.next}null==e?(null==ob.zpp_pool?e=new ob:(e=ob.zpp_pool,ob.zpp_pool=e.next,e.next=null),null,g=e.inner,g.jnAcc=g.jtAcc=0,e.hash=i,e.fresh=!0,e.arbiter=this,this.jrAcc=0,this.contacts.inlined_add(e),this.innards.add(g)):e.fresh=!1;e.px=a;e.py=b;this.nx=d;this.ny=c;e.dist=f;e.stamp=this.stamp;e.posOnly=h;return e},retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=
null;for(this.intchange=this.active=!1;null!=this.contacts.next;){var a=this.contacts.inlined_pop_unsafe();a.arbiter=null;a.next=ob.zpp_pool;ob.zpp_pool=a;this.innards.inlined_pop()}this.userdef_rfric=this.userdef_restitution=this.userdef_stat_fric=this.userdef_dyn_fric=!1;this.__ref_edge1=this.__ref_edge2=null;this.next=rb.zpp_pool;rb.zpp_pool=this;this.pre_dt=-1},cleanupContacts:function(){var a=!0,b=null,d=null,c=this.innards.next;this.hc2=!1;for(var f=this.contacts.next;null!=f;){var i=f;i.stamp+
t.arbiterExpirationDelay<this.stamp?(f=this.contacts.inlined_erase(b),c=this.innards.inlined_erase(d),i.arbiter=null,i.next=ob.zpp_pool,ob.zpp_pool=i):(b=i.inner,d=i.active,i.active=i.stamp==this.stamp,i.active&&(a?(a=!1,this.c1=b,this.oc1=i):(this.hc2=!0,this.c2=b,this.oc2=i)),d!=i.active&&(this.contacts.modified=!0),b=f,d=c,c=c.next,f=f.next)}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(c=this.c1,this.c1=this.c2,this.c2=c,c=this.oc1,this.oc1=this.oc2,this.oc2=c,this.hc2=!1):this.oc2.posOnly&&(this.hc2=
!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;return a},preStep:function(a){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.restitution=-Infinity>=this.s1.material.elasticity||-Infinity>=this.s2.material.elasticity?0:Infinity<=this.s1.material.elasticity||Infinity<=this.s2.material.elasticity?1:(this.s1.material.elasticity+this.s2.material.elasticity)/2,0>this.restitution&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*
this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction)));-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;var d=this.b1.smass+this.b2.smass;this.hc2=!1;a=!0;this.biasCoef=this.b1.type!=h.id_BodyType_DYNAMIC||this.b2.type!=h.id_BodyType_DYNAMIC?this.continuous?t.contactContinuousStaticBiasCoef:
t.contactStaticBiasCoef:this.continuous?t.contactContinuousBiasCoef:t.contactBiasCoef;this.continuous=!1;for(var c=null,f=null,i=this.innards.next,e=this.contacts.next;null!=e;){var g=e;if(g.stamp+t.arbiterExpirationDelay<this.stamp)e=this.contacts.inlined_erase(c),i=this.innards.inlined_erase(f),g.arbiter=null,g.next=ob.zpp_pool,ob.zpp_pool=g;else{c=g.inner;f=g.active;g.active=g.stamp==this.stamp;if(g.active){a?(a=!1,this.c1=c,this.oc1=g):(this.hc2=!0,this.c2=c,this.oc2=g);c.r2x=g.px-this.b2.posx;
c.r2y=g.py-this.b2.posy;c.r1x=g.px-this.b1.posx;c.r1y=g.py-this.b1.posy;var j=d+this.b2.sinertia*Ig.sqr(c.r2x*this.nx+c.r2y*this.ny),j=j+this.b1.sinertia*Ig.sqr(c.r1x*this.nx+c.r1y*this.ny);c.tMass=j<t.epsilon*t.epsilon?0:1/j;j=d+this.b2.sinertia*Ig.sqr(this.ny*c.r2x-this.nx*c.r2y);j+=this.b1.sinertia*Ig.sqr(this.ny*c.r1x-this.nx*c.r1y);c.nMass=j<t.epsilon*t.epsilon?0:1/j;var k=j=0,l=this.b2.angvel+this.b2.kinangvel,j=this.b2.velx+this.b2.kinvelx-c.r2y*l,k=this.b2.vely+this.b2.kinvely+c.r2x*l,l=this.b1.angvel+
this.b1.kinangvel,j=j-(this.b1.velx+this.b1.kinvelx-c.r1y*l),k=k-(this.b1.vely+this.b1.kinvely+c.r1x*l),l=this.nx*j+this.ny*k;g.elasticity=this.restitution;c.bounce=l*g.elasticity;c.bounce>-t.elasticThreshold&&(c.bounce=0);l=k*this.nx-j*this.ny;j=t.staticFrictionThreshold;c.friction=l*l>j*j?this.dyn_fric:this.stat_fric;c.jnAcc*=b;c.jtAcc*=b}f!=g.active&&(this.contacts.modified=!0);c=e;f=i;i=i.next;e=e.next}}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(i=this.c1,this.c1=this.c2,this.c2=i,i=this.oc1,this.oc1=
this.oc2,this.oc2=i,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;this.jrAcc*=b;a||(this.rn1a=this.ny*this.c1.r1x-this.nx*this.c1.r1y,this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*this.ny,this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y,this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny,this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel),this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*
this.b1.kinangvel));this.hc2&&(this.rn2a=this.ny*this.c2.r1x-this.nx*this.c2.r1y,this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny,this.rn2b=this.ny*this.c2.r2x-this.nx*this.c2.r2y,this.rt2b=this.c2.r2x*this.nx+this.c2.r2y*this.ny,this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel),this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel),this.kMassa=d+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*
this.rn1b*this.rn1b,this.kMassb=d+this.b1.sinertia*this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b,this.kMassc=d+this.b1.sinertia*this.rn2a*this.rn2a+this.b2.sinertia*this.rn2b*this.rn2b,this.kMassa*this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc<t.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)?(this.Ka=this.kMassa,this.Kb=this.kMassb,this.Kc=this.kMassc,b=this.kMassa*this.kMassc-this.kMassb*this.kMassb,b!=b?(this.kMassa=this.kMassb=this.kMassc=0,
3):0==b?(b=0,0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,b|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,b|=2),this.kMassb=0,b):(b=1/b,d=this.kMassc*b,this.kMassc=this.kMassa*b,this.kMassa=d,this.kMassb*=-b,0)):(this.hc2=!1,this.oc2.dist<this.oc1.dist&&(b=this.c1,this.c1=this.c2,this.c2=b),this.oc2.active=!1,this.contacts.modified=!0));this.surfacex=this.b2.svelx;this.surfacey=this.b2.svely;this.surfacex+=1*this.b1.svelx;this.surfacey+=1*this.b1.svely;this.surfacex=-this.surfacex;
this.surfacey=-this.surfacey;this.rMass=this.b1.sinertia+this.b2.sinertia;0!=this.rMass&&(this.rMass=1/this.rMass);return a},warmStart:function(){var a=this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc,b=this.ny*this.c1.jnAcc+this.nx*this.c1.jtAcc,d=this.b1.imass;this.b1.velx-=a*d;this.b1.vely-=b*d;this.b1.angvel-=this.b1.iinertia*(b*this.c1.r1x-a*this.c1.r1y);d=this.b2.imass;this.b2.velx+=a*d;this.b2.vely+=b*d;this.b2.angvel+=this.b2.iinertia*(b*this.c1.r2x-a*this.c1.r2y);this.hc2&&(a=this.nx*this.c2.jnAcc-
this.ny*this.c2.jtAcc,b=this.ny*this.c2.jnAcc+this.nx*this.c2.jtAcc,d=this.b1.imass,this.b1.velx-=a*d,this.b1.vely-=b*d,this.b1.angvel-=this.b1.iinertia*(b*this.c2.r1x-a*this.c2.r1y),d=this.b2.imass,this.b2.velx+=a*d,this.b2.vely+=b*d,this.b2.angvel+=this.b2.iinertia*(b*this.c2.r2x-a*this.c2.r2y));this.b2.angvel+=this.jrAcc*this.b2.iinertia;this.b1.angvel-=this.jrAcc*this.b1.iinertia},applyImpulseVel:function(){var a,b,d,c,f;c=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*
this.b1.angvel);var i=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel);d=(i*this.nx-c*this.ny+this.surfacex)*this.c1.tMass;c=this.c1.friction*this.c1.jnAcc;a=this.c1.jtAcc;f=a-d;f>c?f=c:f<-c&&(f=-c);d=f-a;this.c1.jtAcc=f;a=-this.ny*d;b=this.nx*d;this.b2.velx+=a*this.b2.imass;this.b2.vely+=b*this.b2.imass;this.b1.velx-=a*this.b1.imass;this.b1.vely-=b*this.b1.imass;this.b2.angvel+=this.rt1b*d*this.b2.iinertia;this.b1.angvel-=this.rt1a*d*this.b1.iinertia;this.hc2?
(f=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),d=(b*this.nx-f*this.ny+this.surfacex)*this.c2.tMass,c=this.c2.friction*this.c2.jnAcc,a=this.c2.jtAcc,f=a-d,f>c?f=c:f<-c&&(f=-c),d=f-a,this.c2.jtAcc=f,a=-this.ny*d,b=this.nx*d,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rt2b*
d*this.b2.iinertia,this.b1.angvel-=this.rt2a*d*this.b1.iinertia,c=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),i=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),f=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),d=this.c1.jnAcc,a=this.c2.jnAcc,c=c*this.nx+i*this.ny+this.surfacey+
this.c1.bounce-(this.Ka*d+this.Kb*a),f=f*this.nx+b*this.ny+this.surfacey+this.c2.bounce-(this.Kb*d+this.Kc*a),b=-(this.kMassa*c+this.kMassb*f),i=-(this.kMassb*c+this.kMassc*f),0<=b&&0<=i?(c=b-d,f=i-a,this.c1.jnAcc=b,this.c2.jnAcc=i):(b=-this.c1.nMass*c,0<=b&&0<=this.Kb*b+f?(c=b-d,f=-a,this.c1.jnAcc=b,this.c2.jnAcc=0):(i=-this.c2.nMass*f,0<=i&&0<=this.Kb*i+c?(c=-d,f=i-a,this.c1.jnAcc=0,this.c2.jnAcc=i):0<=c&&0<=f?(c=-d,f=-a,this.c1.jnAcc=this.c2.jnAcc=0):f=c=0)),d=c+f,a=this.nx*d,b=this.ny*d,this.b2.velx+=
a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=(this.rn1b*c+this.rn2b*f)*this.b2.iinertia,this.b1.angvel-=(this.rn1a*c+this.rn2a*f)*this.b1.iinertia):(0!=this.radius&&(d=(this.b2.angvel-this.b1.angvel)*this.rMass,c=this.rfric*this.c1.jnAcc,a=this.jrAcc,this.jrAcc-=d,this.jrAcc>c?this.jrAcc=c:this.jrAcc<-c&&(this.jrAcc=-c),d=this.jrAcc-a,this.b2.angvel+=d*this.b2.iinertia,this.b1.angvel-=d*this.b1.iinertia),c=this.k1x+this.b2.velx-
this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),i=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),d=(this.c1.bounce+(this.nx*c+this.ny*i)+this.surfacey)*this.c1.nMass,a=this.c1.jnAcc,f=a-d,0>f&&(f=0),d=f-a,this.c1.jnAcc=f,a=this.nx*d,b=this.ny*d,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rn1b*d*this.b2.iinertia,this.b1.angvel-=this.rn1a*
d*this.b1.iinertia)},applyImpulsePos:function(){if(2==this.ptype){var a=this.c1,b=0,d=0,b=this.b2.axisy*a.lr2x-this.b2.axisx*a.lr2y,d=a.lr2x*this.b2.axisx+a.lr2y*this.b2.axisy,b=b+1*this.b2.posx,d=d+1*this.b2.posy,c=0,f=0,c=this.b1.axisy*a.lr1x-this.b1.axisx*a.lr1y,f=a.lr1x*this.b1.axisx+a.lr1y*this.b1.axisy,c=c+1*this.b1.posx,f=f+1*this.b1.posy,i=a=0,a=b-c,i=d-f,h=Math.sqrt(a*a+i*i),e=this.radius-t.collisionSlop,g=h-e;0>a*this.nx+i*this.ny&&(a=-a,i=-i,g-=this.radius);0>g&&(h<t.epsilon?0!=this.b1.smass?
this.b1.posx+=10*t.epsilon:this.b2.posx+=10*t.epsilon:(g=1/h,a*=g,i*=g,b=0.5*(c+b),d=0.5*(f+d),c=b-this.b1.posx,f=d-this.b1.posy,b-=this.b2.posx,d-=this.b2.posy,c=i*c-a*f,b=i*b-a*d,d=this.b2.smass+b*b*this.b2.sinertia+this.b1.smass+c*c*this.b1.sinertia,0!=d&&(h=-this.biasCoef*(h-e)/d,d=e=0,e=a*h,d=i*h,a=this.b1.imass,this.b1.posx-=e*a,this.b1.posy-=d*a,this.b1.delta_rot(-c*this.b1.iinertia*h),a=this.b2.imass,this.b2.posx+=e*a,this.b2.posy+=d*a,this.b2.delta_rot(b*this.b2.iinertia*h))))}else{var j=
g=i=a=0,f=b=0;0==this.ptype?(a=this.b1.axisy*this.lnormx-this.b1.axisx*this.lnormy,i=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy,e=this.lproj+(a*this.b1.posx+i*this.b1.posy),g=this.b2.axisy*this.c1.lr1x-this.b2.axisx*this.c1.lr1y,j=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy,g+=1*this.b2.posx,j+=1*this.b2.posy,this.hpc2&&(b=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y,f=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy,b+=1*this.b2.posx,f+=1*this.b2.posy)):(a=this.b2.axisy*
this.lnormx-this.b2.axisx*this.lnormy,i=this.lnormx*this.b2.axisx+this.lnormy*this.b2.axisy,e=this.lproj+(a*this.b2.posx+i*this.b2.posy),g=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y,j=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy,g+=1*this.b1.posx,j+=1*this.b1.posy,this.hpc2&&(b=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y,f=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy,b+=1*this.b1.posx,f+=1*this.b1.posy));h=g*a+j*i-e-this.radius;h+=t.collisionSlop;d=0;this.hpc2&&
(d=b*a+f*i-e-this.radius,d+=t.collisionSlop);if(0>h||0>d){this.rev&&(a=-a,i=-i);var k=0,l=0,k=g-this.b1.posx,l=j-this.b1.posy,c=e=0,e=g-this.b2.posx,c=j-this.b2.posy,n=0,p=0,j=g=0;if(this.hpc2){n=b-this.b1.posx;p=f-this.b1.posy;g=b-this.b2.posx;j=f-this.b2.posy;b=i*k-a*l;e=i*e-a*c;f=i*n-a*p;c=i*g-a*j;g=this.b1.smass+this.b2.smass;this.kMassa=g+this.b1.sinertia*b*b+this.b2.sinertia*e*e;this.kMassb=g+this.b1.sinertia*b*f+this.b2.sinertia*e*c;this.kMassc=g+this.b1.sinertia*f*f+this.b2.sinertia*c*c;k=
j=g=0;g=this.kMassa;j=this.kMassb;k=this.kMassc;l=h*this.biasCoef;n=d*this.biasCoef;d=h=0;h=-l;d=-n;p=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(p!=p)h=d=0;else if(0==p)h=0!=this.kMassa?h/this.kMassa:0,d=0!=this.kMassc?d/this.kMassc:0;else var p=1/p,q=p*(this.kMassc*h-this.kMassb*d),d=p*(this.kMassa*d-this.kMassb*h),h=q;0<=h&&0<=d?(g=(h+d)*this.b1.imass,this.b1.posx-=a*g,this.b1.posy-=i*g,this.b1.delta_rot(-this.b1.iinertia*(b*h+f*d)),b=(h+d)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=
i*b,this.b2.delta_rot(this.b2.iinertia*(e*h+c*d))):(h=-l/g,d=0,0<=h&&0<=j*h+n?(g=(h+d)*this.b1.imass,this.b1.posx-=a*g,this.b1.posy-=i*g,this.b1.delta_rot(-this.b1.iinertia*(b*h+f*d)),b=(h+d)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=i*b,this.b2.delta_rot(this.b2.iinertia*(e*h+c*d))):(h=0,d=-n/k,0<=d&&0<=j*d+l&&(g=(h+d)*this.b1.imass,this.b1.posx-=a*g,this.b1.posy-=i*g,this.b1.delta_rot(-this.b1.iinertia*(b*h+f*d)),b=(h+d)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=i*b,this.b2.delta_rot(this.b2.iinertia*
(e*h+c*d)))))}else b=i*k-a*l,e=i*e-a*c,d=this.b2.smass+e*e*this.b2.sinertia+this.b1.smass+b*b*this.b1.sinertia,0!=d&&(h=-this.biasCoef*h/d,c=d=0,d=a*h,c=i*h,a=this.b1.imass,this.b1.posx-=d*a,this.b1.posy-=c*a,this.b1.delta_rot(-b*this.b1.iinertia*h),a=this.b2.imass,this.b2.posx+=d*a,this.b2.posy+=c*a,this.b2.delta_rot(e*this.b2.iinertia*h))}}},__class__:rb});var ob=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.dist=this.elasticity=0;this.fresh=!1;this.stamp=
this.hash=0;this.active=this.posOnly=!1;this.arbiter=this.inner=null;this.px=this.py=0;this.outer=null;this.inner=new Rh};j["zpp_nape.dynamics.ZPP_Contact"]=ob;ob.__name__=!0;ob.prototype={wrapper:function(){null==this.outer&&(ob.internal=!0,this.outer=new Ri,ob.internal=!1,this.outer.zpp_inner=this);return this.outer},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.next;
this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},inlined_erase:function(a){var b,d;null==a?(b=this.next,this.next=d=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return d},__class__:ob};var Rh=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;
this.r1x=this.r1y=this.r2x=this.r2y=this.nMass=this.tMass=this.bounce=this.friction=this.jnAcc=this.jtAcc=this.lr1x=this.lr1y=this.lr2x=this.lr2y=0};j["zpp_nape.dynamics.ZPP_IContact"]=Rh;Rh.__name__=!0;Rh.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},
inlined_erase:function(a){var b,d;null==a?(b=this.next,this.next=d=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return d},__class__:Rh};var nb=function(){this.collisionGroup=this.collisionMask=this.sensorGroup=this.sensorMask=this.fluidGroup=this.fluidMask=0;this.next=this.outer=this.shapes=null;this.shapes=new se;this.collisionGroup=this.sensorGroup=this.fluidGroup=1;this.collisionMask=
this.sensorMask=this.fluidMask=-1};j["zpp_nape.dynamics.ZPP_InteractionFilter"]=nb;nb.__name__=!0;nb.prototype={wrapper:function(){if(null==this.outer){this.outer=new Si;var a=this.outer.zpp_inner;a.outer=null;a.next=nb.zpp_pool;nb.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},shouldCollide:function(a){return 0!=(this.collisionMask&a.collisionGroup)&&0!=(a.collisionMask&this.collisionGroup)},shouldSense:function(a){return 0!=(this.sensorMask&a.sensorGroup)&&0!=(a.sensorMask&this.sensorGroup)},
shouldFlow:function(a){return 0!=(this.fluidMask&a.fluidGroup)&&0!=(a.fluidMask&this.fluidGroup)},invalidate:function(){for(var a=this.shapes.head;null!=a;)a.elt.invalidate_filter(),a=a.next},__class__:nb};var Ik=function(){this.depth=0;this.group=this.interactors=null;this.ignore=!1;this.outer=null};j["zpp_nape.dynamics.ZPP_InteractionGroup"]=Ik;Ik.__name__=!0;Ik.prototype={__class__:Ik};var ka=function(){this.wrap_max=null;this.maxx=this.maxy=0;this.wrap_min=null;this.minx=this.miny=0;this.outer=
this.next=null;this._immutable=!1;this._invalidate=this._validate=null};j["zpp_nape.geom.ZPP_AABB"]=ka;ka.__name__=!0;ka.get=function(a,b,d,c){var f;null==ka.zpp_pool?f=new ka:(f=ka.zpp_pool,ka.zpp_pool=f.next,f.next=null);null;f.minx=a;f.miny=b;f.maxx=d;f.maxy=c;return f};ka.prototype={validate:function(){null!=this._validate&&this._validate()},perimeter:function(){return 2*(this.maxx-this.minx+(this.maxy-this.miny))},intersectY:function(a){return!(a.miny>this.maxy||this.miny>a.maxy)},intersect:function(a){return a.miny<=
this.maxy&&this.miny<=a.maxy&&a.minx<=this.maxx&&this.minx<=a.maxx},combine:function(a){a.minx<this.minx&&(this.minx=a.minx);a.maxx>this.maxx&&(this.maxx=a.maxx);a.miny<this.miny&&(this.miny=a.miny);a.maxy>this.maxy&&(this.maxy=a.maxy)},contains:function(a){return a.minx>=this.minx&&a.miny>=this.miny&&a.maxx<=this.maxx&&a.maxy<=this.maxy},setCombine:function(a,b){this.minx=a.minx<b.minx?a.minx:b.minx;this.miny=a.miny<b.miny?a.miny:b.miny;this.maxx=a.maxx>b.maxx?a.maxx:b.maxx;this.maxy=a.maxy>b.maxy?
a.maxy:b.maxy},setExpand:function(a,b){this.minx=a.minx-b;this.miny=a.miny-b;this.maxx=a.maxx+b;this.maxy=a.maxy+b},toString:function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+(this.maxx-this.minx)+" h: "+(this.maxy-this.miny)+" }"},__class__:ka};var hf=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_Vec2"]=hf;hf.__name__=!0;hf.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Hb.zpp_pool?b=new Hb:
(b=Hb.zpp_pool,Hb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var d;null==Hb.zpp_pool?d=new Hb:(d=Hb.zpp_pool,Hb.zpp_pool=d.next,d.next=null);null;d.elt=b;null==a?(d.next=this.head,this.head=d):(d.next=a.next,a.next=d);this.pushmod=this.modified=!0;this.length++;return d},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=
a.next;a.elt=null;a.next=Hb.zpp_pool;Hb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=Hb.zpp_pool;Hb.zpp_pool=
a;this.modified=!0;this.length--;this.pushmod=!0;return d},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:hf};var J=function(){};j["zpp_nape.geom.ZPP_Collide"]=J;J.__name__=!0;J.contactCollide=function(a,b,d,c){if(b.type==h.id_ShapeType_POLYGON)if(a.type==h.id_ShapeType_POLYGON){for(var f=!0,i=-1.0E100,e=-1,g=null,j=null,k=a.polygon.edges.head;null!=k;){for(var l=k.elt,n=1.0E100,p=
b.polygon.gverts.next;null!=p;){var q=p,q=l.gnormx*q.x+l.gnormy*q.y;q<n&&(n=q);if(n-l.gprojection<=i)break;p=p.next}n-=l.gprojection;if(0<=n){f=!1;break}n>i&&(i=n,g=l,e=1);k=k.next}if(f){for(k=b.polygon.edges.head;null!=k;){l=k.elt;n=1.0E100;for(p=a.polygon.gverts.next;null!=p;){q=p;q=l.gnormx*q.x+l.gnormy*q.y;q<n&&(n=q);if(n-l.gprojection<=i)break;p=p.next}n-=l.gprojection;if(0<=n){f=!1;break}n>i&&(i=n,j=l,e=2);k=k.next}if(f){1==e?(a=b.polygon,b=g,j=1):(a=a.polygon,b=j,j=-1);g=null;f=1.0E100;for(i=
a.edges.head;null!=i;)k=i.elt,l=b.gnormx*k.gnormx+b.gnormy*k.gnormy,l<f&&(f=l,g=k),i=i.next;var i=f=0,f=g.gp0.x,i=g.gp0.y,l=k=0,k=g.gp1.x,l=g.gp1.y,p=n=0,n=k-f,p=l-i,r=b.gnormy*f-b.gnormx*i,q=b.gnormy*k-b.gnormx*l,w=1/(q-r),r=(-b.tp1-r)*w;r>t.epsilon&&(f+=n*r,i+=p*r);q=(-b.tp0-q)*w;q<-t.epsilon&&(k+=n*q,l+=p*q);p=n=0;p=j;n=b.gnormx*p;p*=b.gnormy;d.lnormx=b.lnormx;d.lnormy=b.lnormy;d.lproj=b.lprojection;d.radius=0;d.rev=c!=(-1==j);d.ptype=d.rev?1:0;q=f*b.gnormx+i*b.gnormy-b.gprojection;j=k*b.gnormx+
l*b.gnormy-b.gprojection;if(0<q&&0<j)return!1;c&&(n=-n,p=-p);c=d.injectContact(f-0.5*b.gnormx*q,i-0.5*b.gnormy*q,n,p,q,d.rev?1:0,0<q);f-=1*a.body.posx;i-=1*a.body.posy;c.inner.lr1x=f*a.body.axisy+i*a.body.axisx;c.inner.lr1y=i*a.body.axisy-f*a.body.axisx;c=d.injectContact(k-0.5*b.gnormx*j,l-0.5*b.gnormy*j,n,p,j,d.rev?0:1,0<j);k-=1*a.body.posx;l-=1*a.body.posy;c.inner.lr1x=k*a.body.axisy+l*a.body.axisx;c.inner.lr1y=l*a.body.axisy-k*a.body.axisx;1==e?(d.__ref_edge1=b,d.__ref_edge2=g):(d.__ref_edge2=
b,d.__ref_edge1=g);return!0}}}else{j=-1.0E100;g=!0;f=e=null;i=b.polygon.gverts.next;for(k=b.polygon.edges.head;null!=k;){l=k.elt;n=l.gnormx*a.circle.worldCOMx+l.gnormy*a.circle.worldCOMy-l.gprojection-a.circle.radius;if(0<n){g=!1;break}n>j&&(j=n,e=l,f=i);i=i.next;k=k.next}if(g){g=f;f=null==f.next?b.polygon.gverts.next:f.next;i=a.circle.worldCOMy*e.gnormx-a.circle.worldCOMx*e.gnormy;if(i<=g.y*e.gnormx-g.x*e.gnormy)return j=a.circle.radius,i=f=0,f=g.x-a.circle.worldCOMx,i=g.y-a.circle.worldCOMy,k=f*
f+i*i,k>j*j?j=null:k<t.epsilon*t.epsilon?j=d.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-j,0,null):(k=1/Math.sqrt(k),l=k<t.epsilon?1.0E100:1/k,n=0.5+(a.circle.radius-0.5*j)*k,j=c?d.injectContact(a.circle.worldCOMx+f*n,a.circle.worldCOMy+i*n,-f*k,-i*k,l-j,0,null):d.injectContact(a.circle.worldCOMx+f*n,a.circle.worldCOMy+i*n,f*k,i*k,l-j,0,null)),null!=j&&(f=j.inner,d.ptype=2,k=i=0,i=g.x-b.polygon.body.posx,k=g.y-b.polygon.body.posy,d.__ref_edge1=e,d.__ref_vertex=-1,c?(f.lr1x=i*b.polygon.body.axisy+
k*b.polygon.body.axisx,f.lr1y=k*b.polygon.body.axisy-i*b.polygon.body.axisx,f.lr2x=a.circle.localCOMx,f.lr2y=a.circle.localCOMy):(f.lr2x=i*b.polygon.body.axisy+k*b.polygon.body.axisx,f.lr2y=k*b.polygon.body.axisy-i*b.polygon.body.axisx,f.lr1x=a.circle.localCOMx,f.lr1y=a.circle.localCOMy),d.radius=a.circle.radius),null!=j;if(i>=f.y*e.gnormx-f.x*e.gnormy)return g=a.circle.radius,i=j=0,j=f.x-a.circle.worldCOMx,i=f.y-a.circle.worldCOMy,k=j*j+i*i,k>g*g?g=null:k<t.epsilon*t.epsilon?g=d.injectContact(a.circle.worldCOMx,
a.circle.worldCOMy,1,0,-g,0,null):(k=1/Math.sqrt(k),l=k<t.epsilon?1.0E100:1/k,n=0.5+(a.circle.radius-0.5*g)*k,g=c?d.injectContact(a.circle.worldCOMx+j*n,a.circle.worldCOMy+i*n,-j*k,-i*k,l-g,0,null):d.injectContact(a.circle.worldCOMx+j*n,a.circle.worldCOMy+i*n,j*k,i*k,l-g,0,null)),null!=g&&(j=g.inner,d.ptype=2,k=i=0,i=f.x-b.polygon.body.posx,k=f.y-b.polygon.body.posy,d.__ref_edge1=e,d.__ref_vertex=1,c?(j.lr1x=i*b.polygon.body.axisy+k*b.polygon.body.axisx,j.lr1y=k*b.polygon.body.axisy-i*b.polygon.body.axisx,
j.lr2x=a.circle.localCOMx,j.lr2y=a.circle.localCOMy):(j.lr2x=i*b.polygon.body.axisy+k*b.polygon.body.axisx,j.lr2y=k*b.polygon.body.axisy-i*b.polygon.body.axisx,j.lr1x=a.circle.localCOMx,j.lr1y=a.circle.localCOMy),d.radius=a.circle.radius),null!=g;g=b=0;g=a.circle.radius+0.5*j;b=e.gnormx*g;g*=e.gnormy;i=f=0;f=a.circle.worldCOMx-b;i=a.circle.worldCOMy-g;b=c?d.injectContact(f,i,e.gnormx,e.gnormy,j,0,null):d.injectContact(f,i,-e.gnormx,-e.gnormy,j,0,null);d.ptype=c?0:1;d.lnormx=e.lnormx;d.lnormy=e.lnormy;
d.rev=!c;d.lproj=e.lprojection;d.radius=a.circle.radius;b.inner.lr1x=a.circle.localCOMx;b.inner.lr1y=a.circle.localCOMy;d.__ref_edge1=e;d.__ref_vertex=0;return!0}}else if(e=a.circle.radius+b.circle.radius,j=g=0,g=b.circle.worldCOMx-a.circle.worldCOMx,j=b.circle.worldCOMy-a.circle.worldCOMy,f=g*g+j*j,f>e*e?e=null:f<t.epsilon*t.epsilon?e=d.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-e,0,null):(f=1/Math.sqrt(f),i=f<t.epsilon?1.0E100:1/f,k=0.5+(a.circle.radius-0.5*e)*f,e=c?d.injectContact(a.circle.worldCOMx+
g*k,a.circle.worldCOMy+j*k,-g*f,-j*f,i-e,0,null):d.injectContact(a.circle.worldCOMx+g*k,a.circle.worldCOMy+j*k,g*f,j*f,i-e,0,null)),null!=e)return e=e.inner,c?(e.lr1x=b.circle.localCOMx,e.lr1y=b.circle.localCOMy,e.lr2x=a.circle.localCOMx,e.lr2y=a.circle.localCOMy):(e.lr1x=a.circle.localCOMx,e.lr1y=a.circle.localCOMy,e.lr2x=b.circle.localCOMx,e.lr2y=b.circle.localCOMy),d.radius=a.circle.radius+b.circle.radius,d.ptype=2,!0;return!1};J.testCollide_safe=function(a,b){if(b.type==h.id_ShapeType_CIRCLE)var d=
a,a=b,b=d;return J.testCollide(a,b)};J.testCollide=function(a,b){if(b.type==h.id_ShapeType_POLYGON){if(a.type==h.id_ShapeType_POLYGON){for(var d=!0,c=a.polygon.edges.head;null!=c;){for(var f=c.elt,i=1.0E100,e=b.polygon.gverts.next;null!=e;){var g=e,g=f.gnormx*g.x+f.gnormy*g.y;g<i&&(i=g);e=e.next}i-=f.gprojection;if(0<i){d=!1;break}c=c.next}if(d){for(c=b.polygon.edges.head;null!=c;){f=c.elt;i=1.0E100;for(e=a.polygon.gverts.next;null!=e;)g=e,g=f.gnormx*g.x+f.gnormy*g.y,g<i&&(i=g),e=e.next;i-=f.gprojection;
if(0<i){d=!1;break}c=c.next}return d}}else{c=d=null;f=!0;i=-1.0E100;e=b.polygon.gverts.next;for(g=b.polygon.edges.head;null!=g;){var j=g.elt,k=j.gnormx*a.circle.worldCOMx+j.gnormy*a.circle.worldCOMy-j.gprojection-a.circle.radius;if(0<k){f=!1;break}k>i&&(i=k,d=j,c=e);e=e.next;g=g.next}if(f){f=c;c=null==c.next?b.polygon.gverts.next:c.next;i=a.circle.worldCOMy*d.gnormx-a.circle.worldCOMx*d.gnormy;if(i<=f.y*d.gnormx-f.x*d.gnormy)return d=a.circle.radius,i=c=0,c=f.x-a.circle.worldCOMx,i=f.y-a.circle.worldCOMy,
c*c+i*i<=d*d;return i>=c.y*d.gnormx-c.x*d.gnormy?(d=a.circle.radius,i=f=0,f=c.x-a.circle.worldCOMx,i=c.y-a.circle.worldCOMy,f*f+i*i<=d*d):!0}}return!1}d=a.circle.radius+b.circle.radius;f=c=0;c=b.circle.worldCOMx-a.circle.worldCOMx;f=b.circle.worldCOMy-a.circle.worldCOMy;return c*c+f*f<=d*d};J.flowCollide=function(a,b,d){if(b.type==h.id_ShapeType_POLYGON){if(a.type==h.id_ShapeType_POLYGON){for(var c=[],f=[],i=!0,e=!0,g=a.polygon.edges.head;null!=g;){for(var j=g.elt,k=1.0E100,l=0,n=b.polygon.gverts.next;null!=
n;){var p=n,q=j.gnormx*p.x+j.gnormy*p.y;q<k&&(k=q);q>=j.gprojection+t.epsilon&&(f[l]=!0,e=!1);l++;n=n.next}k-=j.gprojection;if(0<k){i=!1;break}g=g.next}if(e)return b.polygon.validate_worldCOM(),d.overlap=b.polygon.area,d.centroidx=b.polygon.worldCOMx,d.centroidy=b.polygon.worldCOMy,null,!0;if(i){for(var e=!0,r=b.polygon.edges.head;null!=r;){for(var w=r.elt,u=1.0E100,z=0,mf=a.polygon.gverts.next;null!=mf;){var v=mf,s=w.gnormx*v.x+w.gnormy*v.y;s<u&&(u=s);s>=w.gprojection+t.epsilon&&(c[z]=!0,e=!1);z++;
mf=mf.next}u-=w.gprojection;if(0<u){i=!1;break}r=r.next}if(e)return a.polygon.validate_worldCOM(),d.overlap=a.polygon.area,d.centroidx=a.polygon.worldCOMx,d.centroidy=a.polygon.worldCOMy,null,!0;if(i){for(;null!=J.flowpoly.head;){var A=J.flowpoly.pop_unsafe();if(!A._inuse){var B=A;null!=B.outer&&(B.outer.zpp_inner=null,B.outer=null);B._isimmutable=null;B._validate=null;B._invalidate=null;B.next=X.zpp_pool;X.zpp_pool=B}}for(var x=null,D=!1,C=a.polygon.gverts.next,F=0,E=b.polygon.gverts.next,H=0,N=
0,G=b.polygon.edgeCnt;N<G;){var P=N++;if(f[P])E=E.next;else{H=P;break}}if(null==E){for(var E=b.polygon.gverts.next,D=!0,O=0,S=a.polygon.edgeCnt;O<S;){var U=O++;if(c[U])C=C.next;else{F=U;break}}null==C?C=a.polygon.gverts.next:(J.flowpoly.add(C),x=J.flowpoly.head.elt)}else J.flowpoly.add(E),x=J.flowpoly.head.elt;var L=1;if(null==J.flowpoly.head){for(var Y=!0,W=a.polygon.gverts.next,K=W,da=W.next;null!=da;){for(var ca=da,M=2,ba=b.polygon.gverts.next,V=ba,Z=ba.next;null!=Z;){var ja=Z,qa=0;(function(){var a=
0,b=0,a=K.x-V.x,b=K.y-V.y,d=0,c=0,d=ca.x-K.x,c=ca.y-K.y,f=0,m=0,f=ja.x-V.x,m=ja.y-V.y,i=c*f-d*m;i*i>t.epsilon*t.epsilon?(i=1/i,f=(m*a-f*b)*i,f>t.epsilon&&f<1-t.epsilon?(a=(c*a-d*b)*i,a>t.epsilon&&a<1-t.epsilon?(qa=f,a=!0):a=!1):a=!1):a=!1;return a})(this)&&qa<M&&(M=qa,E=ba);ba=Z;V=ja;Z=Z.next}var oa=Z=b.polygon.gverts.next,la=0;(function(){var a=0,b=0,a=K.x-V.x,b=K.y-V.y,d=0,c=0,d=ca.x-K.x,c=ca.y-K.y,f=0,m=0,f=oa.x-V.x,m=oa.y-V.y,i=c*f-d*m;i*i>t.epsilon*t.epsilon?(i=1/i,f=(m*a-f*b)*i,f>t.epsilon&&
f<1-t.epsilon?(a=(c*a-d*b)*i,a>t.epsilon&&a<1-t.epsilon?(la=f,a=!0):a=!1):a=!1):a=!1;return a})(this)&&la<M&&(M=la,E=ba);if(2!=M){var na=0,ya=0,ia=M,na=K.x+(ca.x-K.x)*ia,ya=K.y+(ca.y-K.y)*ia,x=X.get(na,ya,null);J.flowpoly.add(x);D=!0;C=W;Y=!1;break}W=da;K=ca;da=da.next}if(Y){for(var xa=da=a.polygon.gverts.next,y=2,ma=b.polygon.gverts.next,R=ma,ha=ma.next;null!=ha;){var ta=ha,Eh=0;(function(){var a=0,b=0,a=K.x-R.x,b=K.y-R.y,d=0,c=0,d=xa.x-K.x,c=xa.y-K.y,f=0,m=0,f=ta.x-R.x,m=ta.y-R.y,i=c*f-d*m;i*i>
t.epsilon*t.epsilon?(i=1/i,f=(m*a-f*b)*i,f>t.epsilon&&f<1-t.epsilon?(a=(c*a-d*b)*i,a>t.epsilon&&a<1-t.epsilon?(Eh=f,a=!0):a=!1):a=!1):a=!1;return a})(this)&&Eh<y&&(y=Eh,E=ma);ma=ha;R=ta;ha=ha.next}var pa=ha=b.polygon.gverts.next,aa=0;(function(){var a=0,b=0,a=K.x-R.x,b=K.y-R.y,d=0,c=0,d=xa.x-K.x,c=xa.y-K.y,f=0,m=0,f=pa.x-R.x,m=pa.y-R.y,i=c*f-d*m;i*i>t.epsilon*t.epsilon?(i=1/i,f=(m*a-f*b)*i,f>t.epsilon&&f<1-t.epsilon?(a=(c*a-d*b)*i,a>t.epsilon&&a<1-t.epsilon?(aa=f,a=!0):a=!1):a=!1):a=!1;return a})(this)&&
aa<y&&(y=aa,E=ma);if(2!=y){var ea=0,sa=0,Fh=y,ea=K.x+(xa.x-K.x)*Fh,sa=K.y+(xa.y-K.y)*Fh,x=X.get(ea,sa,null);J.flowpoly.add(x);D=!0;C=W}}L=2}for(;;)if(D)if(C=C.next,F++,null==C&&(C=a.polygon.gverts.next,F=0),c[F]){var Q=J.flowpoly.head.elt,Aa=C,ga=E,df=E.next;null==df&&(df=b.polygon.gverts.next);var Ca=-1,za=null,T=0,Ka=0,Ta=df,fa=df;do{var Ga=fa,Pa=0;if(function(){var a=0,b=0,a=ga.x-Q.x,b=ga.y-Q.y,d=0,c=0,d=Ga.x-ga.x,c=Ga.y-ga.y,f=0,m=0,f=Aa.x-Q.x,m=Aa.y-Q.y,i=c*f-d*m;i*i>t.epsilon*t.epsilon?(i=1/
i,f=(m*a-f*b)*i,f>t.epsilon&&f<1-t.epsilon?(a=(c*a-d*b)*i,a>t.epsilon&&a<1-t.epsilon?(Pa=f,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Pa>=Ca)if(za=E,T=H,++Ka==L){Ca=Pa;fa=Ta;break}else Ca=Pa;ga=Ga;E=fa;H++;H>=b.polygon.edgeCnt&&(H=0);fa=fa.next;null==fa&&(fa=b.polygon.gverts.next)}while(0);for(;fa!=Ta;){var ka=fa,Fa=0;if(function(){var a=0,b=0,a=ga.x-Q.x,b=ga.y-Q.y,d=0,c=0,d=ka.x-ga.x,c=ka.y-ga.y,f=0,m=0,f=Aa.x-Q.x,m=Aa.y-Q.y,i=c*f-d*m;i*i>t.epsilon*t.epsilon?(i=1/i,f=(m*a-f*b)*i,f>t.epsilon&&f<1-t.epsilon?
(a=(c*a-d*b)*i,a>t.epsilon&&a<1-t.epsilon?(Fa=f,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Fa>=Ca)if(za=E,T=H,++Ka==L){Ca=Fa;fa=Ta;break}else Ca=Fa;ga=ka;E=fa;H++;H>=b.polygon.edgeCnt&&(H=0);fa=fa.next;null==fa&&(fa=b.polygon.gverts.next)}if(null==za)break;var Xa=za,Qa=za.next;null==Qa&&(Qa=b.polygon.gverts.next);var Ua=Qa,Oa=0,Gh=0,gb=Ca,Oa=Xa.x+(Ua.x-Xa.x)*gb,Gh=Xa.y+(Ua.y-Xa.y)*gb;if(null!=x&&Ib.vec_dsq(Oa,Gh,x.x,x.y)<t.epsilon)break;J.flowpoly.add(X.get(Oa,Gh,null));null==x&&(x=J.flowpoly.head.elt);
E=za;H=T;D=!D;L=2}else{var $a=C;if(null!=x&&Ib.vec_dsq($a.x,$a.y,x.x,x.y)<t.epsilon)break;J.flowpoly.add($a);null==x&&(x=J.flowpoly.head.elt);L=1}else if(E=E.next,H++,null==E&&(E=b.polygon.gverts.next,H=0),f[H]){var ua=J.flowpoly.head.elt,bb=E,I=C,Wa=C.next;null==Wa&&(Wa=a.polygon.gverts.next);var Ja=-1,Ba=null,cb=0,sb=0,fb=Wa,ld=Wa;do{var nb=ld,Ya=0;if(function(){var a=0,b=0,a=I.x-ua.x,b=I.y-ua.y,d=0,c=0,d=nb.x-I.x,c=nb.y-I.y,f=0,m=0,f=bb.x-ua.x,m=bb.y-ua.y,i=c*f-d*m;i*i>t.epsilon*t.epsilon?(i=1/
i,f=(m*a-f*b)*i,f>t.epsilon&&f<1-t.epsilon?(a=(c*a-d*b)*i,a>t.epsilon&&a<1-t.epsilon?(Ya=f,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Ya>=Ja)if(Ba=C,cb=F,++sb==L){Ja=Ya;ld=fb;break}else Ja=Ya;I=nb;C=ld;F++;F>=a.polygon.edgeCnt&&(F=0);ld=ld.next;null==ld&&(ld=a.polygon.gverts.next)}while(0);for(;ld!=fb;){var hb=ld,Ra=0;if(function(){var a=0,b=0,a=I.x-ua.x,b=I.y-ua.y,d=0,c=0,d=hb.x-I.x,c=hb.y-I.y,f=0,m=0,f=bb.x-ua.x,m=bb.y-ua.y,i=c*f-d*m;i*i>t.epsilon*t.epsilon?(i=1/i,f=(m*a-f*b)*i,f>t.epsilon&&f<1-t.epsilon?
(a=(c*a-d*b)*i,a>t.epsilon&&a<1-t.epsilon?(Ra=f,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Ra>=Ja)if(Ba=C,cb=F,++sb==L){Ja=Ra;ld=fb;break}else Ja=Ra;I=hb;C=ld;F++;F>=a.polygon.edgeCnt&&(F=0);ld=ld.next;null==ld&&(ld=a.polygon.gverts.next)}if(null==Ba)break;var La=Ba,ib=Ba.next;null==ib&&(ib=a.polygon.gverts.next);var ub=ib,ob=0,rb=0,vb=Ja,ob=La.x+(ub.x-La.x)*vb,rb=La.y+(ub.y-La.y)*vb;if(null!=x&&Ib.vec_dsq(ob,rb,x.x,x.y)<t.epsilon)break;J.flowpoly.add(X.get(ob,rb,null));null==x&&(x=J.flowpoly.head.elt);
C=Ba;F=cb;D=!D;L=2}else{var kb=E;if(null!=x&&Ib.vec_dsq(kb.x,kb.y,x.x,x.y)<t.epsilon)break;J.flowpoly.add(kb);null==x&&(x=J.flowpoly.head.elt);L=1}if(null!=J.flowpoly.head&&null!=J.flowpoly.head.next&&null!=J.flowpoly.head.next.next){for(var Qd=0,va=0,wa=0,Qd=wa=va=0,Wc=J.flowpoly.head,Sa=Wc.elt,Wc=Wc.next,db=Wc.elt,Wc=Wc.next;null!=Wc;)var Ma=Wc.elt,Qd=Qd+db.x*(Ma.y-Sa.y),Fb=Ma.y*db.x-Ma.x*db.y,va=va+(db.x+Ma.x)*Fb,wa=wa+(db.y+Ma.y)*Fb,Sa=db,db=Ma,Wc=Wc.next;var Wc=J.flowpoly.head,ve=Wc.elt,Qd=Qd+
db.x*(ve.y-Sa.y),Hh=ve.y*db.x-ve.x*db.y,va=va+(db.x+ve.x)*Hh,wa=wa+(db.y+ve.y)*Hh,Sa=db,db=ve,Wc=Wc.next,Da=Wc.elt,Qd=Qd+db.x*(Da.y-Sa.y),Gb=Da.y*db.x-Da.x*db.y,va=va+(db.x+Da.x)*Gb,wa=wa+(db.y+Da.y)*Gb,Qd=0.5*Qd,Hb=1/(6*Qd),va=va*Hb,wa=wa*Hb;d.overlap=-Qd;d.centroidx=va;d.centroidy=wa;null;return!0}}}return!1}for(var xb=[],Kb=!0,eb=null,qb=null,Sb=-1.0E100,Tb=!0,Bb=b.polygon.gverts.next,Vb=0,tb=b.polygon.edges.head;null!=tb;){var Ia=tb.elt,jb=Ia.gnormx*a.circle.worldCOMx+Ia.gnormy*a.circle.worldCOMy;
if(jb>Ia.gprojection+a.circle.radius){Tb=!1;break}else jb+a.circle.radius>Ia.gprojection+t.epsilon&&(Kb=!1,xb[Vb]=!0);jb-=Ia.gprojection+a.circle.radius;jb>Sb&&(Sb=jb,eb=Ia,qb=Bb);Bb=Bb.next;Vb++;tb=tb.next}if(Tb){if(Kb)return d.overlap=a.circle.area,d.centroidx=a.circle.worldCOMx,d.centroidy=a.circle.worldCOMy,null,!0;var wb=qb,mb;mb=null==qb.next?b.polygon.gverts.next:qb.next;var Yb=a.circle.worldCOMy*eb.gnormx-a.circle.worldCOMx*eb.gnormy;if(Yb<=wb.y*eb.gnormx-wb.x*eb.gnormy?function(){var b=a.circle.radius,
d=0,c=0,d=wb.x-a.circle.worldCOMx,c=wb.y-a.circle.worldCOMy;return d*d+c*c<=b*b}(this):Yb>=mb.y*eb.gnormx-mb.x*eb.gnormy?function(){var b=a.circle.radius,d=0,c=0,d=mb.x-a.circle.worldCOMx,c=mb.y-a.circle.worldCOMy;return d*d+c*c<=b*b}(this):1){for(var zb=[],Ob=0,ac=!0,Xc=null,Ha=0,lb=b.polygon.gverts.next;null!=lb;){var kc=lb,Cc=Ib.vec_dsq(kc.x,kc.y,a.circle.worldCOMx,a.circle.worldCOMy);(zb[Ob]=Cc<=a.circle.radius*a.circle.radius)?(Ha=Ob,Xc=lb):ac=!1;Ob++;lb=lb.next}if(ac)return b.polygon.validate_worldCOM(),
d.overlap=b.polygon.area,d.centroidx=b.polygon.worldCOMx,d.centroidy=b.polygon.worldCOMy,null,!0;for(;null!=J.flowpoly.head;){var lc=J.flowpoly.pop_unsafe();if(!lc._inuse){var Za=lc;null!=Za.outer&&(Za.outer.zpp_inner=null,Za.outer=null);Za._isimmutable=null;Za._validate=null;Za._invalidate=null;Za.next=X.zpp_pool;X.zpp_pool=Za}}J.flowsegs.clear();var Cb=null,Ea=1;null==Xc?(Xc=b.polygon.gverts.next,Ea=2):J.flowpoly.add(Cb=Xc);for(;0!=Ea;)if(1==Ea)if(Xc=Xc.next,null==Xc&&(Xc=b.polygon.gverts.next),
Ha++,Ha>=b.polygon.edgeCnt&&(Ha=0),zb[Ha]){if(Ib.vec_dsq(Cb.x,Cb.y,Xc.x,Xc.y)<t.epsilon)break;J.flowpoly.add(Xc)}else{var ab=J.flowpoly.head.elt,Lb=Xc,Mb=0,Nb=0,Mb=Lb.x-ab.x,Nb=Lb.y-ab.y,Pb=0,Qb=0,Pb=ab.x-a.circle.worldCOMx,Qb=ab.y-a.circle.worldCOMy,Ab=Mb*Mb+Nb*Nb,Ub=2*(Pb*Mb+Qb*Nb),Ec=Math.sqrt(Ub*Ub-4*Ab*(Pb*Pb+Qb*Qb-a.circle.radius*a.circle.radius)),Ab=1/(2*Ab),Hc=(-Ub-Ec)*Ab,pc=0,qc=0,Ic=Hc<t.epsilon?(-Ub+Ec)*Ab:Hc,pc=ab.x+(Lb.x-ab.x)*Ic,qc=ab.y+(Lb.y-ab.y)*Ic;if(Ib.vec_dsq(Cb.x,Cb.y,pc,qc)<
t.epsilon)break;J.flowpoly.add(X.get(pc,qc,null));Ea=2}else if(2==Ea){var Xb=Xc.next;null==Xb&&(Xb=b.polygon.gverts.next);var ra=Xc,Ea=0,pb=Xb,Db=Xb;do{var Va=Db,Zb=Ha+1;Zb==b.polygon.edgeCnt&&(Zb=0);if(xb[Ha])if(zb[Zb]){var $b=0,bc=0,$b=Va.x-ra.x,bc=Va.y-ra.y,cc=0,dc=0,cc=ra.x-a.circle.worldCOMx,dc=ra.y-a.circle.worldCOMy,Rb=$b*$b+bc*bc,ec=2*(cc*$b+dc*bc),Pc=Math.sqrt(ec*ec-4*Rb*(cc*cc+dc*dc-a.circle.radius*a.circle.radius)),Rb=1/(2*Rb),Qc=(-ec-Pc)*Rb,wc=0,xc=0,Sc=Qc<t.epsilon?(-ec+Pc)*Rb:Qc,wc=
ra.x+(Va.x-ra.x)*Sc,xc=ra.y+(Va.y-ra.y)*Sc;if(Ib.vec_dsq(Cb.x,Cb.y,wc,xc)<t.epsilon){Ea=0;Db=pb;break}var Tc=X.get(wc,xc,null);J.flowsegs.add(J.flowpoly.head.elt);J.flowsegs.add(Tc);J.flowpoly.add(Tc);Ea=1;Db=pb;break}else{var gc=0,hc=0,Bc,ic=0,jc=0,ic=Va.x-ra.x,jc=Va.y-ra.y,nc=0,oc=0,nc=ra.x-a.circle.worldCOMx,oc=ra.y-a.circle.worldCOMy,Jb=ic*ic+jc*jc,Wb=2*(nc*ic+oc*jc),yb=Wb*Wb-4*Jb*(nc*nc+oc*oc-a.circle.radius*a.circle.radius);yb*yb<t.epsilon?(gc=0>yb?10:hc=-Wb/(2*Jb),Bc=!1):(yb=Math.sqrt(yb),
Jb=1/(2*Jb),gc=(-Wb-yb)*Jb,hc=(-Wb+yb)*Jb,Bc=!0);if(gc<1-t.epsilon&&hc>t.epsilon){var Kc=0,Mc=0,cd=gc,Kc=ra.x+(Va.x-ra.x)*cd,Mc=ra.y+(Va.y-ra.y)*cd;if(null!=Cb&&Ib.vec_dsq(Cb.x,Cb.y,Kc,Mc)<t.epsilon){Ea=0;Db=pb;break}var dd=X.get(Kc,Mc,null);null!=J.flowpoly.head&&(J.flowsegs.add(J.flowpoly.head.elt),J.flowsegs.add(dd));J.flowpoly.add(dd);null==Cb&&(Cb=J.flowpoly.head.elt);if(Bc){var ed=0,fd=0,gd=hc,ed=ra.x+(Va.x-ra.x)*gd,fd=ra.y+(Va.y-ra.y)*gd;J.flowpoly.add(X.get(ed,fd,null))}}}ra=Va;Xc=Db;Ha=Zb;
Db=Db.next;null==Db&&(Db=b.polygon.gverts.next)}while(0);for(;Db!=pb;){var Na=Db,rc=Ha+1;rc==b.polygon.edgeCnt&&(rc=0);if(xb[Ha])if(zb[rc]){var sc=0,tc=0,sc=Na.x-ra.x,tc=Na.y-ra.y,uc=0,vc=0,uc=ra.x-a.circle.worldCOMx,vc=ra.y-a.circle.worldCOMy,fc=sc*sc+tc*tc,yc=2*(uc*sc+vc*tc),hd=Math.sqrt(yc*yc-4*fc*(uc*uc+vc*vc-a.circle.radius*a.circle.radius)),fc=1/(2*fc),id=(-yc-hd)*fc,Uc=0,Vc=0,jd=id<t.epsilon?(-yc+hd)*fc:id,Uc=ra.x+(Na.x-ra.x)*jd,Vc=ra.y+(Na.y-ra.y)*jd;if(Ib.vec_dsq(Cb.x,Cb.y,Uc,Vc)<t.epsilon){Ea=
0;Db=pb;break}var kd=X.get(Uc,Vc,null);J.flowsegs.add(J.flowpoly.head.elt);J.flowsegs.add(kd);J.flowpoly.add(kd);Ea=1;Db=pb;break}else{var Dc=0,Gc=0,$c,Jc=0,Lc=0,Jc=Na.x-ra.x,Lc=Na.y-ra.y,Oc=0,Rc=0,Oc=ra.x-a.circle.worldCOMx,Rc=ra.y-a.circle.worldCOMy,Zc=Jc*Jc+Lc*Lc,od=2*(Oc*Jc+Rc*Lc),Nc=od*od-4*Zc*(Oc*Oc+Rc*Rc-a.circle.radius*a.circle.radius);Nc*Nc<t.epsilon?(Dc=0>Nc?10:Gc=-od/(2*Zc),$c=!1):(Nc=Math.sqrt(Nc),Zc=1/(2*Zc),Dc=(-od-Nc)*Zc,Gc=(-od+Nc)*Zc,$c=!0);if(Dc<1-t.epsilon&&Gc>t.epsilon){var vd=
0,wd=0,Hd=Dc,vd=ra.x+(Na.x-ra.x)*Hd,wd=ra.y+(Na.y-ra.y)*Hd;if(null!=Cb&&Ib.vec_dsq(Cb.x,Cb.y,vd,wd)<t.epsilon){Ea=0;Db=pb;break}var Id=X.get(vd,wd,null);null!=J.flowpoly.head&&(J.flowsegs.add(J.flowpoly.head.elt),J.flowsegs.add(Id));J.flowpoly.add(Id);null==Cb&&(Cb=J.flowpoly.head.elt);if($c){var Kd=0,Ld=0,Md=Gc,Kd=ra.x+(Na.x-ra.x)*Md,Ld=ra.y+(Na.y-ra.y)*Md;J.flowpoly.add(X.get(Kd,Ld,null))}}}ra=Na;Xc=Db;Ha=rc;Db=Db.next;null==Db&&(Db=b.polygon.gverts.next)}}if(null==J.flowpoly.head)return!1;if(null==
J.flowpoly.head.next){for(var Od=!0,td=b.polygon.edges.head;null!=td;){var Cd=td.elt;if(Cd.gnormx*a.circle.worldCOMx+Cd.gnormy*a.circle.worldCOMy>Cd.gprojection){Od=!1;break}td=td.next}return Od?(d.overlap=a.circle.area,d.centroidx=a.circle.worldCOMx,d.centroidy=a.circle.worldCOMy,null,!0):!1}var ad=0,bd=0,md=0;if(null!=J.flowpoly.head.next.next){for(var Bd=0,Rd=0,ee=0,Bd=ee=Rd=0,Yc=J.flowpoly.head,rd=Yc.elt,Yc=Yc.next,Eb=Yc.elt,Yc=Yc.next;null!=Yc;)var nd=Yc.elt,Bd=Bd+Eb.x*(nd.y-rd.y),Td=nd.y*Eb.x-
nd.x*Eb.y,Rd=Rd+(Eb.x+nd.x)*Td,ee=ee+(Eb.y+nd.y)*Td,rd=Eb,Eb=nd,Yc=Yc.next;var Yc=J.flowpoly.head,pd=Yc.elt,Bd=Bd+Eb.x*(pd.y-rd.y),Ud=pd.y*Eb.x-pd.x*Eb.y,Rd=Rd+(Eb.x+pd.x)*Ud,ee=ee+(Eb.y+pd.y)*Ud,rd=Eb,Eb=pd,Yc=Yc.next,sd=Yc.elt,Bd=Bd+Eb.x*(sd.y-rd.y),Vd=sd.y*Eb.x-sd.x*Eb.y,Rd=Rd+(Eb.x+sd.x)*Vd,ee=ee+(Eb.y+sd.y)*Vd,Bd=0.5*Bd,Xd=1/(6*Bd),Rd=Rd*Xd,ee=ee*Xd,Yd=-Bd,ad=ad+Rd*Yd,bd=bd+ee*Yd,md=md-Bd}else J.flowsegs.add(J.flowpoly.head.elt),J.flowsegs.add(J.flowpoly.head.next.elt);for(;null!=J.flowsegs.head;)var xd=
J.flowsegs.pop_unsafe(),yd=J.flowsegs.pop_unsafe(),ae=0,be=0,ae=yd.x-xd.x,be=yd.y-xd.y,zc=0,Ac=0,zc=ae,Ac=be,de=1/Math.sqrt(zc*zc+Ac*Ac),zc=zc*de,Ac=Ac*de,pe=zc,zc=-Ac,Ac=pe,mc=0,ue=0,mc=xd.x+yd.x,ue=xd.y+yd.y,mc=0.5*mc,ue=0.5*ue,mc=mc-1*a.circle.worldCOMx,ue=ue-1*a.circle.worldCOMy,Sd=0,fe=0,ge=zc*mc+Ac*ue,Dd=ge/a.circle.radius,ud=Math.sqrt(1-Dd*Dd),he=Math.acos(Dd),Sd=a.circle.radius*(a.circle.radius*he-ge*ud),fe=0.6666666666666666*a.circle.radius*ud*ud*ud/(he-Dd*ud),mc=a.circle.worldCOMx,ue=a.circle.worldCOMy,
ie=fe,mc=mc+zc*ie,ue=ue+Ac*ie,je=Sd,ad=ad+mc*je,bd=bd+ue*je,md=md+Sd;var ke=1/md,ad=ad*ke,bd=bd*ke;d.overlap=md;d.centroidx=ad;d.centroidy=bd;null;return!0}}return!1}var Fc=a.circle,qd=b.circle,Ed=0,Fd=0,Ed=qd.worldCOMx-Fc.worldCOMx,Fd=qd.worldCOMy-Fc.worldCOMy,le=Fc.radius+qd.radius,Wd=Ed*Ed+Fd*Fd;if(Wd>le*le)return!1;if(Wd<t.epsilon*t.epsilon)Fc.radius<qd.radius?(d.overlap=Fc.area,d.centroidx=Fc.worldCOMx,d.centroidy=Fc.worldCOMy):(d.overlap=qd.area,d.centroidx=qd.worldCOMx,d.centroidy=qd.worldCOMy);
else{var Gd=Math.sqrt(Wd),me=1/Gd,Jd=0.5*(Gd-(qd.radius*qd.radius-Fc.radius*Fc.radius)*me);if(Jd<=-Fc.radius)d.overlap=Fc.area,d.centroidx=Fc.worldCOMx,d.centroidy=Fc.worldCOMy;else{var Zd=Gd-Jd;if(Zd<=-qd.radius)d.overlap=qd.area,d.centroidx=qd.worldCOMx,d.centroidy=qd.worldCOMy;else{var $d=0,ne=0,ce=0,oe=0,Nd=Jd/Fc.radius,zd=Math.sqrt(1-Nd*Nd),qe=Math.acos(Nd),$d=Fc.radius*(Fc.radius*qe-Jd*zd),ne=0.6666666666666666*Fc.radius*zd*zd*zd/(qe-Nd*zd),Pd=Zd/qd.radius,Ad=Math.sqrt(1-Pd*Pd),re=Math.acos(Pd),
ce=qd.radius*(qd.radius*re-Zd*Ad),oe=0.6666666666666666*qd.radius*Ad*Ad*Ad/(re-Pd*Ad),se=$d+ce,te=(ne*$d+(Gd-oe)*ce)/se*me;d.overlap=se;d.centroidx=Fc.worldCOMx+Ed*te;d.centroidy=Fc.worldCOMy+Fd*te}}}null;return!0};var Jk=function(){this.toiDistance=0;this.inner=!1;this.shape=null};j["zpp_nape.geom.ZPP_ConvexRayResult"]=Jk;Jk.__name__=!0;Jk.prototype={__class__:Jk};var Kk=function(){this.next=null;this.x=this.y=0};j["zpp_nape.geom.ZPP_GeomVert"]=Kk;Kk.__name__=!0;Kk.prototype={__class__:Kk};var Lk=
function(){this.outer=this.vertices=null};j["zpp_nape.geom.ZPP_GeomPoly"]=Lk;Lk.__name__=!0;Lk.prototype={__class__:Lk};var Mk=function(){this.a=this.b=this.c=this.d=this.tx=this.ty=0};j["zpp_nape.geom.ZPP_Mat23"]=Mk;Mk.__name__=!0;Mk.prototype={__class__:Mk};var Nk=function(){this.x=null;this.m=this.n=0};j["zpp_nape.geom.ZPP_MatMN"]=Nk;Nk.__name__=!0;Nk.prototype={__class__:Nk};var $a=function(){this.slipped=this.failed=this.kinematic=!1;this.c1=this.c2=this.axis=null;this.frozen1=this.frozen2=!1;
this.s1=this.s2=this.arbiter=null;this.toi=0;this.next=null;this.c1=new X;this.c2=new X;this.axis=new X};j["zpp_nape.geom.ZPP_ToiEvent"]=$a;$a.__name__=!0;$a.prototype={__class__:$a};var oc=function(){};j["zpp_nape.geom.ZPP_SweepDistance"]=oc;oc.__name__=!0;oc.dynamicSweep=function(a,b,d,c,f){null==f&&(f=!1);var i=a.s1,h=a.s2,e=i.body,g=h.body,j=0,k=0,j=g.velx-e.velx,k=g.vely-e.vely,l=e.angvel;0>l&&(l=-l);var n=g.angvel;0>n&&(n=-n);var p=i.sweepCoef*l+h.sweepCoef*n;if(!f&&!a.kinematic&&j*j+k*k<t.dynamicSweepLinearThreshold*
t.dynamicSweepLinearThreshold&&p<t.dynamicSweepAngularThreshold)a.toi=-1,a.failed=!0;else{for(var q=a.c1,l=a.c2,n=a.axis,r=0;;){e.sweepIntegrate(d*b);e.sweepValidate(i);g.sweepIntegrate(d*b);g.sweepValidate(h);var w=oc.distance(i,h,q,l,n,null)+c,u=j*n.x+k*n.y;if(w<t.distanceThresholdCCD){if(f)break;var z=0,v=0,z=q.x-e.posx,v=q.y-e.posy,s=0,x=0,s=l.x-g.posx,x=l.y-g.posy,z=u-e.sweep_angvel*(n.y*z-n.x*v)+g.sweep_angvel*(n.y*s-n.x*x);0<z&&(a.slipped=!0);if(0>=z||w<0.5*t.distanceThresholdCCD)break}u=(p-
u)*b;if(0>=u){d=-1;break}u=w/u;1.0E-6>u&&(u=1.0E-6);d+=u;if(1<=d){d=1;e.sweepIntegrate(d*b);e.sweepValidate(i);g.sweepIntegrate(d*b);g.sweepValidate(h);b=oc.distance(i,h,q,l,n,null)+c;j=j*n.x+k*n.y;if(b<t.distanceThresholdCCD){if(f)break;k=f=0;f=q.x-e.posx;k=q.y-e.posy;c=q=0;q=l.x-g.posx;c=l.y-g.posy;e=j-e.sweep_angvel*(n.y*f-n.x*k)+g.sweep_angvel*(n.y*q-n.x*c);0<e&&(a.slipped=!0);if(0>=e||b<0.5*t.distanceThresholdCCD)break}d=-1;break}if(40<=++r){w>c&&(a.failed=!0);break}}a.toi=d}};oc.staticSweep=
function(a,b,d,c){var f=a.s1,i=a.s2,e=f.body,h=0,g=0,h=-e.velx,g=-e.vely,j=e.sweep_angvel;0>j&&(j=-j);for(var k=f.sweepCoef*j,j=a.c1,l=a.c2,n=a.axis,p=0;;){e.sweepIntegrate(d*b);e.sweepValidate(f);var q=oc.distance(f,i,j,l,n,null)+c,r=h*n.x+g*n.y;if(q<t.distanceThresholdCCD){var u=0,w=0,u=j.x-e.posx,w=j.y-e.posy,u=r-e.sweep_angvel*(n.y*u-n.x*w);0<u&&(a.slipped=!0);if(0>=u||q<0.5*t.distanceThresholdCCD)break}r=(k-r)*b;if(0>=r){d=-1;break}r=q/r;1.0E-6>r&&(r=1.0E-6);d+=r;if(1<=d){d=1;e.sweepIntegrate(d*
b);e.sweepValidate(f);b=oc.distance(f,i,j,l,n,null)+c;h=h*n.x+g*n.y;if(b<t.distanceThresholdCCD&&(c=g=0,g=j.x-e.posx,c=j.y-e.posy,e=h-e.sweep_angvel*(n.y*g-n.x*c),0<e&&(a.slipped=!0),0>=e||b<0.5*t.distanceThresholdCCD))break;d=-1;break}if(40<=++p){q>c&&(a.failed=!0);break}}a.toi=d};oc.distance=function(a,b,d,c,f,i){null==i&&(i=1.0E100);if(a.type==h.id_ShapeType_CIRCLE&&b.type==h.id_ShapeType_CIRCLE){var e=a.circle,g=b.circle,j,k=0,l=0,k=g.worldCOMx-e.worldCOMx,l=g.worldCOMy-e.worldCOMy,n=Math.sqrt(k*
k+l*l);j=n-(e.radius+g.radius);if(j<i){if(0==n)k=1,l=0;else var p=1/n,k=k*p,l=l*p;var q=e.radius;d.x=e.worldCOMx+k*q;d.y=e.worldCOMy+l*q;var r=-g.radius;c.x=g.worldCOMx+k*r;c.y=g.worldCOMy+l*r;f.x=k;f.y=l}return j}var u=!1;if(a.type==h.id_ShapeType_CIRCLE&&b.type==h.id_ShapeType_POLYGON)var w=a,a=b,b=w,z=d,d=c,c=z,u=!0;if(a.type==h.id_ShapeType_POLYGON&&b.type==h.id_ShapeType_CIRCLE){for(var v=b.circle,s=-1.0E100,x=null,A=a.polygon.edges.head;null!=A;){var B=A.elt,C=B.gnormx*v.worldCOMx+B.gnormy*
v.worldCOMy-B.gprojection-v.radius;if(C>i){s=C;break}0<C?C>s&&(s=C,x=B):0>s&&C>s&&(s=C,x=B);A=A.next}if(s<i){var D=x.gp0,E=x.gp1,J=v.worldCOMy*x.gnormx-v.worldCOMx*x.gnormy;if(J<=D.y*x.gnormx-D.x*x.gnormy){var F=0,H=0,F=v.worldCOMx-D.x,H=v.worldCOMy-D.y,K=Math.sqrt(F*F+H*H),s=K-v.radius;if(s<i){if(0==K)F=1,H=0;else var N=1/K,F=F*N,H=H*N;d.x=D.x+0*F;d.y=D.y+0*H;var P=-v.radius;c.x=v.worldCOMx+F*P;c.y=v.worldCOMy+H*P;f.x=F;f.y=H}}else if(J>=E.y*x.gnormx-E.x*x.gnormy){var G=0,L=0,G=v.worldCOMx-E.x,L=
v.worldCOMy-E.y,O=Math.sqrt(G*G+L*L),s=O-v.radius;if(s<i){if(0==O)G=1,L=0;else var S=1/O,G=G*S,L=L*S;d.x=E.x+0*G;d.y=E.y+0*L;var W=-v.radius;c.x=v.worldCOMx+G*W;c.y=v.worldCOMy+L*W;f.x=G;f.y=L}}else{var U=-v.radius;c.x=v.worldCOMx+x.gnormx*U;c.y=v.worldCOMy+x.gnormy*U;var Y=-s;d.x=c.x+x.gnormx*Y;d.y=c.y+x.gnormy*Y;f.x=x.gnormx;f.y=x.gnormy}}u&&(f.x=-f.x,f.y=-f.y);return s}for(var ca=a.polygon,da=b.polygon,M=-1.0E100,V=null,ba=null,Z=0,R=ca.edges.head;null!=R;){for(var fa=R.elt,X=1.0E100,ja=da.gverts.next;null!=
ja;){var qa=ja,xa=fa.gnormx*qa.x+fa.gnormy*qa.y;xa<X&&(X=xa);ja=ja.next}X-=fa.gprojection;if(X>i){M=X;break}0<X?X>M&&(M=X,V=fa,Z=1):0>M&&X>M&&(M=X,V=fa,Z=1);R=R.next}if(M<i){for(var ga=da.edges.head;null!=ga;){for(var ha=ga.elt,y=1.0E100,la=ca.gverts.next;null!=la;){var oa=la,ma=ha.gnormx*oa.x+ha.gnormy*oa.y;ma<y&&(y=ma);la=la.next}y-=ha.gprojection;if(y>i){M=y;break}0<y?y>M&&(M=y,ba=ha,Z=2):0>M&&y>M&&(M=y,ba=ha,Z=2);ga=ga.next}if(M<i){var na,Q;if(1==Z)na=da,Q=V;else{na=ca;Q=ba;var ya=d,d=c,c=ya,
u=!u}for(var ia=null,Ca=1.0E100,ta=na.edges.head;null!=ta;){var za=ta.elt,Aa=Q.gnormx*za.gnormx+Q.gnormy*za.gnormy;Aa<Ca&&(Ca=Aa,ia=za);ta=ta.next}u?(f.x=-Q.gnormx,f.y=-Q.gnormy):(f.x=Q.gnormx,f.y=Q.gnormy);if(0<=M){var aa=Q.gp0,pa=Q.gp1,ea=ia.gp0,sa=ia.gp1,T=0,ua=0,va=0,wa=0,T=pa.x-aa.x,ua=pa.y-aa.y,va=sa.x-ea.x,wa=sa.y-ea.y,Ta=1/(T*T+ua*ua),Ea=1/(va*va+wa*wa),Ja=-(T*(aa.x-ea.x)+ua*(aa.y-ea.y))*Ta,Pa=-(T*(aa.x-sa.x)+ua*(aa.y-sa.y))*Ta,Ka=-(va*(ea.x-aa.x)+wa*(ea.y-aa.y))*Ea,Ha=-(va*(ea.x-pa.x)+wa*
(ea.y-pa.y))*Ea;0>Ja?Ja=0:1<Ja&&(Ja=1);0>Pa?Pa=0:1<Pa&&(Pa=1);0>Ka?Ka=0:1<Ka&&(Ka=1);0>Ha?Ha=0:1<Ha&&(Ha=1);var Fa=0,Ga=0,Xa=Ja,Fa=aa.x+T*Xa,Ga=aa.y+ua*Xa,Ba=0,ka=0,Va=Pa,Ba=aa.x+T*Va,ka=aa.y+ua*Va,Qa=0,bb=0,I=Ka,Qa=ea.x+va*I,bb=ea.y+wa*I,eb=0,Oa=0,Wa=Ha,eb=ea.x+va*Wa,Oa=ea.y+wa*Wa,Na=Ib.vec_dsq(Fa,Ga,ea.x,ea.y),Za=Ib.vec_dsq(Ba,ka,sa.x,sa.y),Ma=Ib.vec_dsq(Qa,bb,aa.x,aa.y),$a=Ib.vec_dsq(eb,Oa,pa.x,pa.y),Ua=0,ab=0,hb=null;Na<Za?(Ua=Fa,ab=Ga,hb=ea):(Ua=Ba,ab=ka,hb=sa,Na=Za);var gb=0,Ya=0,Ra=null;Ma<
$a?(gb=Qa,Ya=bb,Ra=aa):(gb=eb,Ya=Oa,Ra=pa,Ma=$a);Na<Ma?(d.x=Ua,d.y=ab,c.x=hb.x,c.y=hb.y,M=Math.sqrt(Na)):(c.x=gb,c.y=Ya,d.x=Ra.x,d.y=Ra.y,M=Math.sqrt(Ma));if(0!=M){f.x=c.x-d.x;f.y=c.y-d.y;var cb=1/M;f.x*=cb;f.y*=cb;u&&(f.x=-f.x,f.y=-f.y)}return M}var Sa=0,La=0,Sa=ia.gp0.x,La=ia.gp0.y,Ia=0,Da=0,Ia=ia.gp1.x,Da=ia.gp1.y,jb=0,fb=0,jb=Ia-Sa,fb=Da-La,nb=Q.gnormy*Sa-Q.gnormx*La,ib=Q.gnormy*Ia-Q.gnormx*Da,ob=1/(ib-nb),db=(-Q.tp1-nb)*ob;db>t.epsilon&&(Sa+=jb*db,La+=fb*db);var rb=(-Q.tp0-ib)*ob;rb<-t.epsilon&&
(Ia+=jb*rb,Da+=fb*rb);var sb=Sa*Q.gnormx+La*Q.gnormy-Q.gprojection,mb=Ia*Q.gnormx+Da*Q.gnormy-Q.gprojection;if(sb<mb){c.x=Sa;c.y=La;var kb=-sb;d.x=c.x+Q.gnormx*kb;d.y=c.y+Q.gnormy*kb;return sb}c.x=Ia;c.y=Da;var pb=-mb;d.x=c.x+Q.gnormx*pb;d.y=c.y+Q.gnormy*pb;return mb}}return i};var X=function(){this.length=this.x=this.y=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.weak=!1;this._isimmutable=this.outer=null;this._immutable=!1;this._invalidate=this._validate=null};j["zpp_nape.geom.ZPP_Vec2"]=
X;X.__name__=!0;X.get=function(a,b,d){null==d&&(d=!1);var c;null==X.zpp_pool?c=new X:(c=X.zpp_pool,X.zpp_pool=c.next,c.next=null);c.weak=!1;c._immutable=d;c.x=a;c.y=b;return c};X.prototype={validate:function(){null!=this._validate&&this._validate()},invalidate:function(){null!=this._invalidate&&this._invalidate(this)},wrapper:function(){if(null==this.outer){this.outer=new Q;var a=this.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=
null;a.next=X.zpp_pool;X.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){b._inuse=!0;null==a?(b.next=this.next,this.next=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,
d;null==a?(b=this.next,this.next=d=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return d},reverse:function(){for(var a=this.next,b=null;null!=a;){var d=a.next;a.next=b;b=this.next=a;a=d}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=this.next;0<a--&&null!=b;)b=b.next;return b},toString:function(){return"{ x: "+this.x+" y: "+this.y+" }"},__class__:X};var Ok=function(){this._validate=
null;this.x=this.y=this.z=0};j["zpp_nape.geom.ZPP_Vec3"]=Ok;Ok.__name__=!0;Ok.prototype={validate:function(){null!=this._validate&&this._validate()},__class__:Ok};var Ib=function(){};j["zpp_nape.geom.ZPP_VecMath"]=Ib;Ib.__name__=!0;Ib.vec_dsq=function(a,b,d,c){var f=0,i=0,f=a-d,i=b-c;return f*f+i*i};var xa=function(){this.userData=this.ishape=this.ibody=this.icompound=this.cbsets=this.group=this.cbTypes=this.cbSet=this.wrap_cbTypes=null;this.id=0;this.outer_i=null;this.id=cb.Interactor();this.cbsets=
new Sj;this.cbTypes=new Gc};j["zpp_nape.phys.ZPP_Interactor"]=xa;xa.__name__=!0;xa.get=function(a,b){var d;d=a.id<b.id?a.id:b.id;var c;c=a.id<b.id?b.id:a.id;for(var f=null,i=(a.cbsets.length<b.cbsets.length?a.cbsets:b.cbsets).head;null!=i;){var e=i.elt;if(e.id==d&&e.di==c){f=e;break}i=i.next}return f};xa.int_callback=function(a,b,d){var c=a.int1,a=a.int2;b.options1.compatible(c.cbTypes)&&b.options2.compatible(a.cbTypes)?(d.int1=c,d.int2=a):(d.int1=a,d.int2=c)};xa.prototype={__iaddedToSpace:function(){null!=
this.group&&this.group.interactors.add(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.add(this),a=a.next;this.alloc_cbSet()},__iremovedFromSpace:function(){null!=this.group&&this.group.interactors.remove(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.remove(this),a=a.next;this.dealloc_cbSet()},wake:function(){if(null!=this.ishape){var a=this.ishape.body;null!=a&&null!=a.space&&a.space.non_inlined_wake(a);!0}else null!=this.ibody?null!=this.ibody.space?this.ibody.space.non_inlined_wake(this.ibody):
!1:(null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound),!0)},setupcbTypes:function(){this.wrap_cbTypes=Rb.get(this.cbTypes);this.wrap_cbTypes.zpp_inner.adder=v(this,this.wrap_cbTypes_adder);this.wrap_cbTypes.zpp_inner.subber=v(this,this.wrap_cbTypes_subber);this.wrap_cbTypes.zpp_inner.dontremove=!0},wrap_cbTypes_subber:function(a){a=a.zpp_inner;if(this.cbTypes.has(a)){var b;b=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:
this.icompound.space;null!=b&&(this.dealloc_cbSet(),a.interactors.remove(this));this.cbTypes.remove(a);null!=b&&(this.alloc_cbSet(),this.wake())}},wrap_cbTypes_adder:function(a){this.insert_cbtype(a.zpp_inner);return!1},insert_cbtype:function(a){if(!this.cbTypes.has(a)){var b;b=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=b&&(this.dealloc_cbSet(),a.interactors.add(this));for(var d=null,c=this.cbTypes.head;null!=c&&
!(a.id<c.elt.id);){d=c;c=c.next}this.cbTypes.inlined_insert(d,a);null!=b&&(this.alloc_cbSet(),this.wake())}},alloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;if(null!=(this.cbSet=a.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.interactors.add(this),this.cbSet.validate(),a.freshInteractorType(this)},dealloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:
null!=this.ibody?this.ibody.space:this.icompound.space;null!=this.cbSet&&(this.cbSet.interactors.remove(this),a.nullInteractorType(this),0==--this.cbSet.count&&(a.cbsets.remove(this.cbSet),a=this.cbSet,a.free(),a.next=R.zpp_pool,R.zpp_pool=a),this.cbSet=null)},immutable_midstep:function(a){null!=this.ibody?null:null!=this.ishape?this.ishape.__immutable_midstep(a):this.icompound.__imutable_midstep(a)},lookup_group:function(){for(var a=this;null!=a&&null==a.group;)a=null!=a.ishape?a.ishape.body:null!=
a.icompound?a.icompound.compound:a.ibody.compound;return null==a?null:a.group},__class__:xa};var Rc=function(){this.wrap_localCOM=this.wrap_worldCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_aabb=!1;this.aabb=null;this.norotate=!1;this.cinertia=this.iinertia=this.sinertia=0;this.zip_inertia=!1;this.inertiaMode=this.inertia=0;this.zip_gravMassScale=!1;this.gravMassMode=this.gravMassScale=0;this.zip_gravMass=!1;this.gravMass=
0;this.nomove=!1;this.massMode=this.imass=this.smass=this.cmass=0;this.zip_mass=!1;this.mass=0;this.zip_axis=!1;this.forcex=this.forcey=this.kinvelx=this.kinvely=this.svelx=this.svely=this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=this.axisx=this.axisy=0;this.wrap_vel=null;this.velx=this.vely=0;this.wrap_pos=null;this.pre_posx=this.pre_posy=this.posx=this.posy=0;this.bullet=this.bulletEnabled=this.disableCCD=!1;this.sweepRadius=0;this.sweepFrozen=!1;this.sweepTime=this.sweep_angvel=
0;this.compound=this.shapes=this.wrap_shapes=this.space=this.arbiters=this.constraints=this.component=null;this.type=0;this.world=!1;this.outer=null;xa.call(this);this.ibody=this;this.bulletEnabled=this.world=!1;this.sweep_angvel=this.sweepTime=0;this.disableCCD=this.norotate=this.nomove=!1;this.axisx=this.rot=this.posy=this.posx=0;this.axisy=1;this.torque=this.angvel=this.kinangvel=this.forcey=this.forcex=this.kinvely=this.kinvelx=this.vely=this.velx=this.svely=this.svelx=0;this.pre_rot=this.pre_posy=
this.pre_posx=Infinity;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.zip_aabb=!0;this.aabb=ka.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=v(this,this.aabb_validate);this.massMode=h.id_MassMode_DEFAULT;this.gravMassMode=h.id_GravMassMode_DEFAULT;this.gravMassScale=1;this.inertiaMode=h.id_InertiaMode_DEFAULT;this.arbiters=new Jg;this.constraints=new de;this.shapes=new se;this.wrap_shapes=Id.get(this.shapes);this.wrap_shapes.zpp_inner.adder=v(this,this.shapes_adder);
this.wrap_shapes.zpp_inner.subber=v(this,this.shapes_subber);this.wrap_shapes.zpp_inner._invalidate=v(this,this.shapes_invalidate);this.kinematicDelaySleep=!1};j["zpp_nape.phys.ZPP_Body"]=Rc;Rc.__name__=!0;Rc.__static=function(){null==h.BodyType_STATIC&&(h.internal=!0,h.BodyType_STATIC=new Ya,h.internal=!1);var a=new Mf(h.BodyType_STATIC),b=a.zpp_inner;b.world=!0;b.wrap_shapes.zpp_inner.immutable=!0;b.smass=b.imass=b.cmass=b.mass=b.gravMass=0;b.sinertia=b.iinertia=b.cinertia=b.inertia=0;b.cbTypes.clear();
return a};Rc.__super__=xa;Rc.prototype=z(xa.prototype,{invalidate_type:function(){this.invalidate_mass();this.invalidate_inertia()},invalidate_shapes:function(){this.zip_worldCOM=this.zip_localCOM=this.zip_aabb=!0;this.invalidate_mass();this.invalidate_inertia()},atRest:function(a){if(this.type!=h.id_BodyType_DYNAMIC)return this.component.sleeping;var b=t.linearSleepThreshold,b=b*b;if(this.velx*this.velx+this.vely*this.vely>b)a=!1;else if(Ib.vec_dsq(this.posx,this.posy,this.pre_posx,this.pre_posy)>
0.25*b*a*a)a=!1;else{var d=b=0,b=this.aabb.maxx-this.aabb.minx,d=this.aabb.maxy-this.aabb.miny,b=b*b+d*d,d=t.angularSleepThreshold,d=d*d;if(4*this.angvel*this.angvel*b>d)a=!1;else var c=this.rot-this.pre_rot,a=c*c*b>d*a*a?!1:!0}a||(this.component.waket=this.space.stamp);return this.component.waket+t.sleepDelay<this.space.stamp},refreshArbiters:function(){for(var a=this.arbiters.head;null!=a;)a.elt.invalidated=!0,a=a.next},sweepIntegrate:function(a){var b=a-this.sweepTime;0!=b&&(this.sweepTime=a,this.posx+=
this.velx*b,this.posy+=this.vely*b,0!=this.angvel&&this.delta_rot(this.sweep_angvel*b))},sweepValidate:function(a){if(a.type==h.id_ShapeType_CIRCLE)a.worldCOMx=this.posx+(this.axisy*a.localCOMx-this.axisx*a.localCOMy),a.worldCOMy=this.posy+(a.localCOMx*this.axisx+a.localCOMy*this.axisy);else{for(var a=a.polygon,b=a.lverts.next,d=a.gverts.next;null!=d;){var c=d,f=b,b=b.next;c.x=this.posx+(this.axisy*f.x-this.axisx*f.y);c.y=this.posy+(f.x*this.axisx+f.y*this.axisy);d=d.next}d=a.edges.head;b=c=a.gverts.next;
for(c=c.next;null!=c;){var f=c,i=d.elt,d=d.next;i.gnormx=this.axisy*i.lnormx-this.axisx*i.lnormy;i.gnormy=i.lnormx*this.axisx+i.lnormy*this.axisy;i.gprojection=this.posx*i.gnormx+this.posy*i.gnormy+i.lprojection;i.tp0=b.y*i.gnormx-b.x*i.gnormy;i.tp1=f.y*i.gnormx-f.x*i.gnormy;b=f;c=c.next}a=a.gverts.next;d=d.elt;d.gnormx=this.axisy*d.lnormx-this.axisx*d.lnormy;d.gnormy=d.lnormx*this.axisx+d.lnormy*this.axisy;d.gprojection=this.posx*d.gnormx+this.posy*d.gnormy+d.lprojection;d.tp0=b.y*d.gnormx-b.x*d.gnormy;
d.tp1=a.y*d.gnormx-a.x*d.gnormy}},invalidate_pos:function(){for(var a=this.shapes.head;null!=a;){var b=a.elt;b.type==h.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},pos_invalidate:function(a){this.immutable_midstep("Body::position");this.posx==a.x&&this.posy==a.y||(this.posx=a.x,this.posy=a.y,this.invalidate_pos(),this.wake())},pos_validate:function(){this.wrap_pos.zpp_inner.x=this.posx;this.wrap_pos.zpp_inner.y=
this.posy},vel_invalidate:function(a){this.velx=a.x;this.vely=a.y;this.wake()},vel_validate:function(){this.wrap_vel.zpp_inner.x=this.velx;this.wrap_vel.zpp_inner.y=this.vely},setupPosition:function(){this.wrap_pos=Q.get(this.posx,this.posy,null);this.wrap_pos.zpp_inner._inuse=!0;this.world?this.wrap_pos.zpp_inner._immutable=!0:(this.wrap_pos.zpp_inner._invalidate=v(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=v(this,this.pos_validate))},setupVelocity:function(){this.wrap_vel=Q.get(this.velx,
this.vely,null);this.wrap_vel.zpp_inner._inuse=!0;this.world?this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=v(this,this.vel_invalidate),this.wrap_vel.zpp_inner._validate=v(this,this.vel_validate))},invalidate_rot:function(){this.zip_axis=!0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.type==h.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},validate_axis:function(){this.zip_axis&&
(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null)},delta_rot:function(a){this.rot+=a;if(1.0E-4<a*a)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null;else{var b=a*a,d=1-0.5*b,b=1-b*b/8,c=(d*this.axisx+a*this.axisy)*b;this.axisy=(d*this.axisy-a*this.axisx)*b;this.axisx=c}},invalidate_mass:function(){this.zip_mass=!0;this.invalidate_gravMass()},validate_mass:function(){if(this.zip_mass){this.zip_mass=!1;if(this.massMode==h.id_MassMode_DEFAULT){this.cmass=
0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cmass+=b.area*b.material.density;a=a.next}}this.type==h.id_BodyType_DYNAMIC&&!this.nomove?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Infinity,this.imass=this.smass=0)}},invalidate_gravMass:function(){this.gravMassMode!=h.id_GravMassMode_FIXED&&(this.zip_gravMass=!0);this.gravMassMode!=h.id_GravMassMode_SCALED&&(this.zip_gravMassScale=!0);this.wake()},
validate_gravMass:function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),this.gravMassMode==h.id_GravMassMode_DEFAULT?(this.validate_mass(),this.gravMass=this.cmass):this.gravMassMode==h.id_GravMassMode_SCALED&&(this.validate_mass(),this.gravMass=this.cmass*this.gravMassScale))},invalidate_inertia:function(){this.zip_inertia=!0;this.wake()},validate_inertia:function(){if(this.zip_inertia){this.zip_inertia=!1;if(this.inertiaMode==h.id_InertiaMode_DEFAULT){this.cinertia=0;for(var a=
this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cinertia+=b.inertia*b.area*b.material.density;a=a.next}}this.type==h.id_BodyType_DYNAMIC&&!this.norotate?(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia):(this.inertia=Infinity,this.sinertia=this.iinertia=0)}},validate_aabb:function(){if(this.zip_aabb){this.zip_aabb=!1;this.aabb.minx=Infinity;this.aabb.miny=Infinity;this.aabb.maxx=-Infinity;this.aabb.maxy=-Infinity;
for(var a=this.shapes.head;null!=a;){var b=a.elt;b.zip_aabb&&null!=b.body&&(b.zip_aabb=!1,b.type==h.id_ShapeType_CIRCLE?b.circle.__validate_aabb():b.polygon.__validate_aabb());this.aabb.combine(b.aabb);a=a.next}}},invalidate_localCOM:function(){this.zip_worldCOM=this.zip_localCOM=!0},validate_localCOM:function(){if(this.zip_localCOM){this.zip_localCOM=!1;for(var a=0,b=0,d=0,c=this.shapes.head;null!=c;){var f=c.elt;f.zip_localCOM&&(f.zip_localCOM=!1,f.type==h.id_ShapeType_POLYGON&&f.polygon.__validate_localCOM(),
null!=f.wrap_localCOM&&(f.wrap_localCOM.zpp_inner.x=f.localCOMx,f.wrap_localCOM.zpp_inner.y=f.localCOMy));f.validate_area_inertia();var i=f.area*f.material.density,a=a+f.localCOMx*i,b=b+f.localCOMy*i,d=d+f.area*f.material.density,c=c.next}0!=d&&(c=1/d,this.localCOMx=a*c,this.localCOMy=b*c);null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy);this.zip_mass&&this.massMode==h.id_MassMode_DEFAULT&&(this.zip_mass=!1,this.cmass=d,this.type==
h.id_BodyType_DYNAMIC?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Infinity,this.imass=this.smass=0))}},validate_worldCOM:function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null),this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy),null!=this.wrap_worldCOM&&
(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},aabb_validate:function(){this.validate_aabb()},shapes_adder:function(a){return a.zpp_inner.body!=this?(null!=a.zpp_inner.body&&a.zpp_inner.body.wrap_shapes.remove(a),a.zpp_inner.body=this,a.zpp_inner.addedToBody(),null!=this.space&&this.space.added_shape(a.zpp_inner,null),a.zpp_inner.type==h.id_ShapeType_POLYGON&&(a.zpp_inner.polygon.invalidate_gaxi(),a.zpp_inner.polygon.invalidate_gverts()),!0):!1},shapes_subber:function(a){null!=
this.space&&this.space.removed_shape(a.zpp_inner);a.zpp_inner.body=null;a.zpp_inner.removedFromBody()},shapes_invalidate:function(){this.invalidate_shapes()},addedToSpace:function(){null==jb.zpp_pool?this.component=new jb:(this.component=jb.zpp_pool,jb.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=!0;this.component.body=this;this.__iaddedToSpace()},removedFromSpace:function(){for(;null!=this.arbiters.head;){var a=this.arbiters.pop_unsafe();a.cleared=!0;a.b2==this&&
a.b1.arbiters.inlined_try_remove(a);a.b1==this&&a.b2.arbiters.inlined_try_remove(a);null!=a.pair&&(a.pair.arb=null,a.pair=null);a.active=!1;this.space.f_arbiters.modified=!0}a=this.component;a.body=null;a.constraint=null;null;a.next=jb.zpp_pool;jb.zpp_pool=a;this.component=null;this.__iremovedFromSpace()},__class__:Rc});var Tj=function(){this.compound=this.space=null;this.depth=0;this.outer=this.bodies=this.constraints=this.compounds=this.wrap_constraints=null};j["zpp_nape.phys.ZPP_Compound"]=Tj;
Tj.__name__=!0;Tj.__super__=xa;Tj.prototype=z(xa.prototype,{__imutable_midstep:function(){},addedToSpace:function(){this.__iaddedToSpace()},removedFromSpace:function(){this.__iremovedFromSpace()},__class__:Tj});var Pk=function(){this.wrap_gravity=null;this.viscosity=this.density=this.gravityx=this.gravityy=0;this.shapes=null};j["zpp_nape.phys.ZPP_FluidProperties"]=Pk;Pk.__name__=!0;Pk.prototype={__class__:Pk};var ca=function(){this.dynamicFriction=this.staticFriction=this.density=this.elasticity=
this.rollingFriction=0;this.next=this.outer=this.shapes=null;this.shapes=new se;this.elasticity=0;this.dynamicFriction=1;this.staticFriction=2;this.density=0.001;this.rollingFriction=0.01};j["zpp_nape.phys.ZPP_Material"]=ca;ca.__name__=!0;ca.prototype={wrapper:function(){if(null==this.outer){this.outer=new Aa;var a=this.outer.zpp_inner;a.outer=null;a.next=ca.zpp_pool;ca.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},set:function(a){this.dynamicFriction=a.dynamicFriction;this.staticFriction=
a.staticFriction;this.density=a.density;this.elasticity=a.elasticity;this.rollingFriction=a.rollingFriction},invalidate:function(a){for(var b=this.shapes.head;null!=b;)b.elt.invalidate_material(a),b=b.next},__class__:ca};var td=function(a){this.zip_aabb=!1;this.sweep=this.node=this.pairs=this.aabb=null;this.fluidEnabled=this.sensorEnabled=!1;this.circle=this.polygon=this.refmaterial=this.material=this.filter=this.fluidProperties=null;this.sweepCoef=0;this.zip_sweepRadius=!1;this.sweepRadius=0;this.wrap_localCOM=
null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_angDrag=!1;this.inertia=this.angDrag=0;this.zip_area_inertia=!1;this.type=this.area=0;this.outer=this.body=null;xa.call(this);this.pairs=new Uj;this.ishape=this;this.type=a;this.aabb=ka.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=v(this,this.aabb_validate);this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=!0;this.worldCOMy=this.worldCOMx=
this.localCOMy=this.localCOMx=0;this.sensorEnabled=this.fluidEnabled=!1;this.body=this.fluidProperties=null;this.refmaterial=new ca;this.sweepRadius=this.sweepCoef=0};j["zpp_nape.shape.ZPP_Shape"]=td;td.__name__=!0;td.__super__=xa;td.prototype=z(xa.prototype,{validate_sweepRadius:function(){this.zip_sweepRadius&&(this.zip_sweepRadius=!1,this.type==h.id_ShapeType_CIRCLE?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},validate_area_inertia:function(){this.zip_area_inertia&&
(this.zip_area_inertia=!1,this.type==h.id_ShapeType_CIRCLE?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},validate_angDrag:function(){if(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction)this.zip_angDrag=!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,this.type==h.id_ShapeType_CIRCLE?this.circle.__validate_angDrag():this.polygon.__validate_angDrag()},validate_worldCOM:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=
!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==h.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)),this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy))},invalidate_area_inertia:function(){this.zip_area_inertia=
!0;null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia())},invalidate_angDrag:function(){this.zip_angDrag=!0},invalidate_localCOM:function(){this.zip_localCOM=!0;this.invalidate_area_inertia();this.type==h.id_ShapeType_CIRCLE&&(this.zip_sweepRadius=!0);this.invalidate_angDrag();this.invalidate_worldCOM();null!=this.body&&this.body.invalidate_localCOM()},invalidate_worldCOM:function(){this.zip_aabb=this.zip_worldCOM=!0;null!=this.body&&(this.body.zip_aabb=
!0)},invalidate_material:function(a){0!=(a&ca.WAKE)&&this.wake();0!=(a&ca.ARBITERS)&&null!=this.body&&this.body.refreshArbiters();0!=(a&ca.PROPS)&&null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia());0!=(a&ca.ANGDRAG)&&this.invalidate_angDrag();this.refmaterial.set(this.material)},invalidate_filter:function(){this.wake()},aabb_validate:function(){this.zip_aabb&&null!=this.body&&(this.zip_aabb=!1,this.type==h.id_ShapeType_CIRCLE?this.circle.__validate_aabb():
this.polygon.__validate_aabb())},setMaterial:function(a){this.material!=a&&(null!=this.body&&null!=this.body.space&&null!=this.material&&this.material.shapes.remove(this),this.material=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.wake(),null!=this.body&&this.body.refreshArbiters())},setFilter:function(a){this.filter!=a&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.shapes.remove(this),this.filter=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),
this.wake())},__immutable_midstep:function(){},addedToBody:function(){this.invalidate_worldCOM();this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0)},removedFromBody:function(){},addedToSpace:function(){this.__iaddedToSpace();this.material.shapes.add(this);this.filter.shapes.add(this);null!=this.fluidProperties&&this.fluidProperties.shapes.add(this)},removedFromSpace:function(){this.__iremovedFromSpace();this.material.shapes.remove(this);this.filter.shapes.remove(this);null!=this.fluidProperties&&
this.fluidProperties.shapes.remove(this)},__class__:td});var Pf=function(){this.radius=0;this.outer_zn=null;td.call(this,h.id_ShapeType_CIRCLE);this.circle=this;this.zip_localCOM=!1};j["zpp_nape.shape.ZPP_Circle"]=Pf;Pf.__name__=!0;Pf.__super__=td;Pf.prototype=z(td.prototype,{invalidate_radius:function(){this.invalidate_area_inertia();this.invalidate_angDrag();this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0);null!=this.body&&this.body.wake()},__validate_aabb:function(){this.zip_worldCOM&&
null!=this.body&&(this.zip_worldCOM=!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==h.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)),this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy));var a=this.radius,
b=this.radius;this.aabb.minx=this.worldCOMx-a;this.aabb.miny=this.worldCOMy-b;this.aabb.maxx=this.worldCOMx+a;this.aabb.maxy=this.worldCOMy+b},_force_validate_aabb:function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy);this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy);this.aabb.minx=this.worldCOMx-this.radius;this.aabb.miny=this.worldCOMy-this.radius;this.aabb.maxx=this.worldCOMx+this.radius;this.aabb.maxy=
this.worldCOMy+this.radius},__validate_sweepRadius:function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy);this.sweepRadius=this.sweepCoef+this.radius},__validate_area_inertia:function(){var a=this.radius*this.radius;this.area=a*Math.PI;this.inertia=0.5*a+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},__validate_angDrag:function(){var a=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,b=this.radius*this.radius;this.angDrag=(a+2*b)*
this.material.dynamicFriction*t.fluidAngularDragFriction+0.5*t.fluidAngularDrag*(1+t.fluidVacuumDrag)*a;this.angDrag/=2*(a+0.5*b)},__class__:Pf});var T=function(){this.tp0=this.tp1=0;this.lp0=this.gp0=this.lp1=this.gp1=null;this.length=this.lprojection=this.gprojection=0;this.wrap_gnorm=null;this.gnormx=this.gnormy=0;this.wrap_lnorm=null;this.lnormx=this.lnormy=0;this.next=this.polygon=this.outer=null;this.gprojection=this.lprojection=this.length=this.gnormy=this.gnormx=this.lnormy=this.lnormx=0};
j["zpp_nape.shape.ZPP_Edge"]=T;T.__name__=!0;T.prototype={wrapper:function(){null==this.outer&&(T.internal=!0,this.outer=new Xi,T.internal=!1,this.outer.zpp_inner=this);return this.outer},__class__:T};var dh=function(){this.reverse_flag=this.zip_lverts=this.zip_laxi=this.zip_gverts=this.zip_gaxi=this.zip_valid=this.zip_sanitation=!1;this.edgeCnt=0;this.outer_zn=this.lverts=this.wrap_lverts=this.gverts=this.wrap_gverts=this.edges=this.wrap_edges=null;td.call(this,h.id_ShapeType_POLYGON);this.polygon=
this;this.lverts=new X;this.gverts=new X;this.edges=new Vj;this.edgeCnt=0};j["zpp_nape.shape.ZPP_Polygon"]=dh;dh.__name__=!0;dh.__super__=td;dh.prototype=z(td.prototype,{lverts_pa_invalidate:function(){this.invalidate_lverts()},gverts_pa_validate:function(){this.validate_gverts()},lverts_post_adder:function(a){a.zpp_inner._invalidate=v(this,this.lverts_pa_invalidate);for(var b=null,d=null,c=this.lverts.next;null!=c&&!(c==a.zpp_inner);){b=null==b?this.gverts.next:b.next,d=null==d?this.edges.head:d.next;
c=c.next}a=X.get(0,0,!0);this.gverts.insert(b,a);null!=this.lverts.next.next&&(null==this.lverts.next.next.next?(null==T.zpp_pool?d=new T:(d=T.zpp_pool,T.zpp_pool=d.next,d.next=null),null,d.polygon=this,this.edges.add(d),null==T.zpp_pool?d=new T:(d=T.zpp_pool,T.zpp_pool=d.next,d.next=null),null,d.polygon=this,this.edges.add(d),this.edgeCnt+=2):(null==T.zpp_pool?b=new T:(b=T.zpp_pool,T.zpp_pool=b.next,b.next=null),null,b.polygon=this,this.edges.insert(d,b),this.edgeCnt++));a._validate=v(this,this.gverts_pa_validate)},
lverts_subber:function(a){this.cleanup_lvert(a.zpp_inner)},lverts_invalidate:function(){this.invalidate_lverts()},lverts_validate:function(){this.validate_lverts()},getlverts:function(){this.wrap_lverts=jf.get(this.lverts);this.wrap_lverts.zpp_inner.post_adder=v(this,this.lverts_post_adder);this.wrap_lverts.zpp_inner.subber=v(this,this.lverts_subber);this.wrap_lverts.zpp_inner._invalidate=v(this,this.lverts_invalidate);this.wrap_lverts.zpp_inner._validate=v(this,this.lverts_validate);this.wrap_lverts.zpp_inner.reverse_flag=
this.reverse_flag},invalidate_lverts:function(){this.invalidate_laxi();this.invalidate_area_inertia();this.invalidate_angDrag();this.invalidate_localCOM();this.invalidate_gverts();this.zip_sanitation=this.zip_valid=this.zip_lverts=!0;null!=this.body&&this.body.wake()},invalidate_laxi:function(){this.invalidate_gaxi();this.zip_laxi=this.zip_sweepRadius=!0},invalidate_gverts:function(){this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0);this.zip_gverts=!0},invalidate_gaxi:function(){this.zip_gaxi=
!0},validate_lverts:function(){this.zip_lverts&&(this.zip_lverts=!1,2<this.lverts.length&&(this.validate_area_inertia(),0>this.area&&(this.reverse_vertices(),this.area=-this.area)))},cleanup_lvert:function(a){for(var b=null,d=null,c=this.lverts.next;null!=c&&!(c==a);){b=null==b?this.gverts.next:b.next,d=null==d?this.edges.head:d.next;c=c.next}a=null==b?this.gverts.next:b.next;this.gverts.erase(b);null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=
null;a.next=X.zpp_pool;X.zpp_pool=a;2==this.edgeCnt?(d=this.edges.pop_unsafe(),d.polygon=null,d.next=T.zpp_pool,T.zpp_pool=d,d=this.edges.pop_unsafe(),d.polygon=null,d.next=T.zpp_pool,T.zpp_pool=d,this.edgeCnt=0):0!=this.edgeCnt&&(b=null==d?this.edges.head.elt:d.next.elt,this.edges.erase(d),b.polygon=null,b.next=T.zpp_pool,T.zpp_pool=b,this.edgeCnt--)},splice_collinear:function(){this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real())},splice_collinear_real:function(){if(!(null==
this.lverts.next||null==this.lverts.next.next)&&null!=this.lverts.next.next.next){for(var a=null,b=this.lverts.next;null!=b;){var d=b,c=null==b.next?this.lverts.next:b.next;Ib.vec_dsq(d.x,d.y,c.x,c.y)<t.epsilon*t.epsilon?(this.cleanup_lvert(b),b=this.lverts.erase(a)):(a=b,b=b.next)}if(null!=this.lverts.next){do{a=!1;for(b=this.lverts.next;null!=b;){var d=null==b.next?this.lverts.next:b.next,f=b,c=d,i=null==d.next?this.lverts.next:d.next,e=0,h=0,e=c.x-f.x,h=c.y-f.y,g=f=0,f=i.x-c.x,g=i.y-c.y,c=g*e-
f*h;c*c>=t.epsilon*t.epsilon||(this.cleanup_lvert(d),this.lverts.erase(null==b.next?null:b),a=!0);b=b.next}}while(a)}}},reverse_vertices:function(){this.lverts.reverse();this.gverts.reverse();this.edges.reverse();var a=this.edges.iterator_at(this.edgeCnt-1),b=this.edges.pop_unsafe();this.edges.insert(a,b);this.reverse_flag=!this.reverse_flag;null!=this.wrap_lverts&&(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag);
null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},validate_laxi:function(){if(this.zip_laxi){this.zip_laxi=!1;this.validate_lverts();for(var a=this.edges.head,b=this.lverts.next,d=b,b=b.next;null!=b;){var c=b,f=a.elt,a=a.next;f.lp0=d;f.lp1=c;var i=0,e=0,i=d.x-c.x,e=d.y-c.y,h=Math.sqrt(i*i+e*e);f.length=h;h=1/h;i*=h;e*=h;h=i;i=-e;e=h;f.lprojection=i*d.x+e*d.y;f.lnormx=i;f.lnormy=e;null!=f.wrap_lnorm&&(f.wrap_lnorm.zpp_inner.x=i,f.wrap_lnorm.zpp_inner.y=e);d=c;b=b.next}f=
this.lverts.next;a=a.elt;a.lp0=d;a.lp1=f;c=b=0;b=d.x-f.x;c=d.y-f.y;f=Math.sqrt(b*b+c*c);a.length=f;f=1/f;i=b*f;b=-(c*f);c=i;a.lprojection=b*d.x+c*d.y;a.lnormx=b;a.lnormy=c;null!=a.wrap_lnorm&&(a.wrap_lnorm.zpp_inner.x=b,a.wrap_lnorm.zpp_inner.y=c)}},validate_gverts:function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1;this.validate_lverts();this.body.validate_axis();for(var a=this.lverts.next,b=this.gverts.next;null!=b;){var d=b,c=a,a=a.next;d.x=this.body.posx+(this.body.axisy*c.x-this.body.axisx*
c.y);d.y=this.body.posy+(c.x*this.body.axisx+c.y*this.body.axisy);b=b.next}}},validate_gaxi:function(){if(this.zip_gaxi&&null!=this.body){this.zip_gaxi=!1;this.validate_laxi();this.body.validate_axis();this.validate_gverts();for(var a=this.edges.head,b=this.gverts.next,d=b,b=b.next;null!=b;){var c=b,f=a.elt,a=a.next;f.gp0=d;f.gp1=c;f.gnormx=this.body.axisy*f.lnormx-this.body.axisx*f.lnormy;f.gnormy=f.lnormx*this.body.axisx+f.lnormy*this.body.axisy;f.gprojection=this.body.posx*f.gnormx+this.body.posy*
f.gnormy+f.lprojection;null!=f.wrap_gnorm&&(f.wrap_gnorm.zpp_inner.x=f.gnormx,f.wrap_gnorm.zpp_inner.y=f.gnormy);f.tp0=f.gp0.y*f.gnormx-f.gp0.x*f.gnormy;f.tp1=f.gp1.y*f.gnormx-f.gp1.x*f.gnormy;d=c;b=b.next}b=this.gverts.next;a=a.elt;a.gp0=d;a.gp1=b;a.gnormx=this.body.axisy*a.lnormx-this.body.axisx*a.lnormy;a.gnormy=a.lnormx*this.body.axisx+a.lnormy*this.body.axisy;a.gprojection=this.body.posx*a.gnormx+this.body.posy*a.gnormy+a.lprojection;null!=a.wrap_gnorm&&(a.wrap_gnorm.zpp_inner.x=a.gnormx,a.wrap_gnorm.zpp_inner.y=
a.gnormy);a.tp0=a.gp0.y*a.gnormx-a.gp0.x*a.gnormy;a.tp1=a.gp1.y*a.gnormx-a.gp1.x*a.gnormy}},__validate_aabb:function(){this.validate_gverts();var a=this.gverts.next;this.aabb.minx=a.x;this.aabb.miny=a.y;this.aabb.maxx=a.x;this.aabb.maxy=a.y;for(a=this.gverts.next.next;null!=a;){var b=a;b.x<this.aabb.minx&&(this.aabb.minx=b.x);b.x>this.aabb.maxx&&(this.aabb.maxx=b.x);b.y<this.aabb.miny&&(this.aabb.miny=b.y);b.y>this.aabb.maxy&&(this.aabb.maxy=b.y);a=a.next}},_force_validate_aabb:function(){var a=this.lverts.next,
b=this.gverts.next,d=a,a=a.next;b.x=this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);b.y=this.body.posy+(d.x*this.body.axisx+d.y*this.body.axisy);this.aabb.minx=b.x;this.aabb.miny=b.y;this.aabb.maxx=b.x;this.aabb.maxy=b.y;for(b=this.gverts.next.next;null!=b;){var d=b,c=a,a=a.next;d.x=this.body.posx+(this.body.axisy*c.x-this.body.axisx*c.y);d.y=this.body.posy+(c.x*this.body.axisx+c.y*this.body.axisy);d.x<this.aabb.minx&&(this.aabb.minx=d.x);d.x>this.aabb.maxx&&(this.aabb.maxx=d.x);d.y<this.aabb.miny&&
(this.aabb.miny=d.y);d.y>this.aabb.maxy&&(this.aabb.maxy=d.y);b=b.next}},__validate_sweepRadius:function(){var a=0,b=0;this.validate_laxi();for(var d=this.lverts.next;null!=d;){var c=d,c=c.x*c.x+c.y*c.y;c>a&&(a=c);d=d.next}for(d=this.edges.head;null!=d;){c=d.elt;if(c.lprojection<b&&(b=c.lprojection,0>b))break;d=d.next}0>b&&(b=0);this.sweepRadius=Math.sqrt(a);this.sweepCoef=this.sweepRadius-b},__validate_area_inertia:function(){if(null==this.lverts.next||null==this.lverts.next.next||null==this.lverts.next.next.next)this.inertia=
this.area=0;else{for(var a=this.area=0,b=0,d=this.lverts.next,c=d,f=d=d.next,d=d.next;null!=d;){var i=d,e=f.y*c.x-f.x*c.y,a=a+e*(f.x*f.x+f.y*f.y+(f.x*c.x+f.y*c.y)+(c.x*c.x+c.y*c.y)),b=b+e;this.area+=f.x*(i.y-c.y);c=f;f=i;d=d.next}e=d=this.lverts.next;i=f.y*c.x-f.x*c.y;a+=i*(f.x*f.x+f.y*f.y+(f.x*c.x+f.y*c.y)+(c.x*c.x+c.y*c.y));this.area+=f.x*(e.y-c.y);c=f;f=e;d=d.next;e=f.y*c.x-f.x*c.y;a+=e*(f.x*f.x+f.y*f.y+(f.x*c.x+f.y*c.y)+(c.x*c.x+c.y*c.y));this.area+=f.x*(d.y-c.y);this.inertia=a/(6*(b+i+e));this.area*=
0.5;0>this.area&&(this.area=-this.area,this.reverse_vertices())}},__validate_angDrag:function(){this.validate_area_inertia();this.validate_laxi();for(var a=0,b=this.edges.head,c=0,m=this.lverts.next,f=m,m=m.next;null!=m;){var i=m,e=b.elt,b=b.next,c=c+e.length,h=0,g=0,h=i.x-f.x,g=i.y-f.y,a=a+e.length*t.fluidAngularDragFriction*this.material.dynamicFriction*e.lprojection*e.lprojection,j=-(f.y*e.lnormx-f.x*e.lnormy)/(g*e.lnormx-h*e.lnormy);if(0<j){var k;k=1<j?1:j;var l=0,n=0,l=f.x,n=f.y,p=k,l=l+h*p,
n=n+g*p,p=e.lnormy*f.x-e.lnormx*f.y,l=e.lnormy*l-e.lnormx*n,a=a+(l*l*l-p*p*p)/(3*(l-p))*k*e.length*t.fluidAngularDrag}1>j&&(j=0>j?0:j,l=k=0,k=f.x,l=f.y,f=j,k+=h*f,l+=g*f,f=e.lnormy*k-e.lnormx*l,h=e.lnormy*i.x-e.lnormx*i.y,a+=(h*h*h-f*f*f)/(3*(h-f))*t.fluidVacuumDrag*(1-j)*e.length*t.fluidAngularDrag);f=i;m=m.next}m=this.lverts.next;b=b.elt;c+=b.length;e=i=0;i=m.x-f.x;e=m.y-f.y;a+=b.length*t.fluidAngularDragFriction*this.material.dynamicFriction*b.lprojection*b.lprojection;h=-(f.y*b.lnormx-f.x*b.lnormy)/
(e*b.lnormx-i*b.lnormy);0<h&&(g=1<h?1:h,l=k=0,k=f.x,l=f.y,j=b.lnormy*f.x-b.lnormx*f.y,k=b.lnormy*(k+i*g)-b.lnormx*(l+e*g),a+=(k*k*k-j*j*j)/(3*(k-j))*g*b.length*t.fluidAngularDrag);1>h&&(h=0>h?0:h,j=g=0,g=f.x,j=f.y,f=b.lnormy*(g+i*h)-b.lnormx*(j+e*h),m=b.lnormy*m.x-b.lnormx*m.y,a+=(m*m*m-f*f*f)/(3*(m-f))*t.fluidVacuumDrag*(1-h)*b.length*t.fluidAngularDrag);this.angDrag=a/(this.inertia*c)},__validate_localCOM:function(){if(null==this.lverts.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=
this.lverts.next.y;else if(null==this.lverts.next.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y,this.localCOMx+=1*this.lverts.next.next.x,this.localCOMy+=1*this.lverts.next.next.y,this.localCOMx*=0.5,this.localCOMy*=0.5;else{for(var a=this.localCOMy=this.localCOMx=0,b=this.lverts.next,c=b,e=b=b.next,b=b.next;null!=b;){var f=b,a=a+e.x*(f.y-c.y),c=f.y*e.x-f.x*e.y;this.localCOMx+=(e.x+f.x)*c;this.localCOMy+=(e.y+f.y)*c;c=e;e=f;b=b.next}f=b=this.lverts.next;a+=e.x*(f.y-
c.y);c=f.y*e.x-f.x*e.y;this.localCOMx+=(e.x+f.x)*c;this.localCOMy+=(e.y+f.y)*c;c=e;e=f;b=b.next;a+=e.x*(b.y-c.y);c=b.y*e.x-b.x*e.y;this.localCOMx+=(e.x+b.x)*c;this.localCOMy+=(e.y+b.y)*c;a=1/(3*a);this.localCOMx*=a;this.localCOMy*=a}},__class__:dh});var Sd=function(){this.sweep=this.dynab=null;this.is_sweep=!1;this.space=null};j["zpp_nape.space.ZPP_Broadphase"]=Sd;Sd.__name__=!0;Sd.prototype={insert:function(a){this.is_sweep?this.sweep.__insert(a):this.dynab.__insert(a)},remove:function(a){this.is_sweep?
this.sweep.__remove(a):this.dynab.__remove(a)},sync:function(a){this.is_sweep?!this.sweep.space.continuous&&a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==h.id_ShapeType_CIRCLE?a.circle.__validate_aabb():a.polygon.__validate_aabb()):this.dynab.__sync(a)},broadphase:function(){},__class__:Sd};var vb=function(){this.synced=this.first_sync=!1;this.snext=null;this.moved=!1;this.next=this.mnext=null;this.height=0;this.parent=this.child1=this.child2=null;this.dyn=!1;this.aabb=this.shape=null;this.height=
-1};j["zpp_nape.space.ZPP_AABBNode"]=vb;vb.__name__=!0;vb.prototype={free:function(){this.height=-1;var a=this.aabb;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a.wrap_min=a.wrap_max=null;a._invalidate=null;a._validate=null;a.next=ka.zpp_pool;ka.zpp_pool=a;this.mnext=this.snext=this.next=this.child1=this.child2=this.parent=null},__class__:vb};var ga=function(){this.arb=this.next=null;this.id=this.di=0;this.first=this.sleeping=!1;this.n1=this.n2=null};j["zpp_nape.space.ZPP_AABBPair"]=ga;ga.__name__=
!0;ga.prototype={__class__:ga};var Ea=function(){this.root=null};j["zpp_nape.space.ZPP_AABBTree"]=Ea;Ea.__name__=!0;Ea.prototype={inlined_insertLeaf:function(a){if(null==this.root)this.root=a,this.root.parent=null;else{for(var b=a.aabb,c=this.root;null!=c.child1;){var e=c.child1,f=c.child2,i=c.aabb.perimeter();Ea.tmpaabb.setCombine(c.aabb,b);var h=Ea.tmpaabb.perimeter(),g=2*h,i=2*(h-i);Ea.tmpaabb.setCombine(b,e.aabb);null==e.child1?h=Ea.tmpaabb.perimeter()+i:(h=e.aabb.perimeter(),h=Ea.tmpaabb.perimeter()-
h+i);Ea.tmpaabb.setCombine(b,f.aabb);if(null==f.child1)i=Ea.tmpaabb.perimeter()+i;else var j=f.aabb.perimeter(),i=Ea.tmpaabb.perimeter()-j+i;if(g<h&&g<i)break;else c=h<i?e:f}e=c.parent;null==vb.zpp_pool?f=new vb:(f=vb.zpp_pool,vb.zpp_pool=f.next,f.next=null);null==ka.zpp_pool?f.aabb=new ka:(f.aabb=ka.zpp_pool,ka.zpp_pool=f.aabb.next,f.aabb.next=null);null;f.moved=!1;f.synced=!1;f.first_sync=!1;f.parent=e;f.aabb.setCombine(b,c.aabb);f.height=c.height+1;null!=e?(e.child1==c?e.child1=f:e.child2=f,f.child1=
c,f.child2=a,c.parent=f,a.parent=f):(f.child1=c,f.child2=a,c.parent=f,this.root=a.parent=f);for(c=a.parent;null!=c;)c=this.balance(c),a=c.child1,b=c.child2,e=a.height,f=b.height,c.height=1+(e>f?e:f),c.aabb.setCombine(a.aabb,b.aabb),c=c.parent}},removeLeaf:function(a){this.inlined_removeLeaf(a)},inlined_removeLeaf:function(a){if(a==this.root)this.root=null;else{var b=a.parent,c=b.parent,a=b.child1==a?b.child2:b.child1;if(null!=c){c.child1==b?c.child1=a:c.child2=a;a.parent=c;b.free();b.next=vb.zpp_pool;
vb.zpp_pool=b;for(b=c;null!=b;)b=this.balance(b),a=b.child1,c=b.child2,b.aabb.setCombine(a.aabb,c.aabb),a=a.height,c=c.height,b.height=1+(a>c?a:c),b=b.parent}else this.root=a,a.parent=null,b.free(),b.next=vb.zpp_pool,vb.zpp_pool=b}},balance:function(a){if(null==a.child1||2>a.height)return a;var b=a.child1,c=a.child2,e=c.height-b.height;if(1<e){var f=c.child1,i=c.child2;c.child1=a;c.parent=a.parent;a.parent=c;null!=c.parent?c.parent.child1==a?c.parent.child1=c:c.parent.child2=c:this.root=c;f.height>
i.height?(c.child2=f,a.child2=i,i.parent=a,a.aabb.setCombine(b.aabb,i.aabb),c.aabb.setCombine(a.aabb,f.aabb),a.height=1+function(){var a=b.height,c=i.height;return a>c?a:c}(this),c.height=1+function(){var b=a.height,c=f.height;return b>c?b:c}(this)):(c.child2=i,a.child2=f,f.parent=a,a.aabb.setCombine(b.aabb,f.aabb),c.aabb.setCombine(a.aabb,i.aabb),a.height=1+function(){var a=b.height,c=f.height;return a>c?a:c}(this),c.height=1+function(){var b=a.height,c=i.height;return b>c?b:c}(this));return c}if(-1>
e){var h=b.child1,g=b.child2;b.child1=a;b.parent=a.parent;a.parent=b;null!=b.parent?b.parent.child1==a?b.parent.child1=b:b.parent.child2=b:this.root=b;h.height>g.height?(b.child2=h,a.child1=g,g.parent=a,a.aabb.setCombine(c.aabb,g.aabb),b.aabb.setCombine(a.aabb,h.aabb),a.height=1+function(){var a=c.height,b=g.height;return a>b?a:b}(this),b.height=1+function(){var b=a.height,c=h.height;return b>c?b:c}(this)):(b.child2=g,a.child1=h,h.parent=a,a.aabb.setCombine(c.aabb,h.aabb),b.aabb.setCombine(a.aabb,
g.aabb),a.height=1+function(){var a=c.height,b=h.height;return a>b?a:b}(this),b.height=1+function(){var b=a.height,c=g.height;return b>c?b:c}(this));return b}return a},__class__:Ea};var Sh=function(a){this.stree=this.dtree=this.pairs=this.syncs=this.moves=null;Sd.call(this);this.space=a;this.is_sweep=!1;this.dynab=this;this.stree=new Ea;this.dtree=new Ea};j["zpp_nape.space.ZPP_DynAABBPhase"]=Sh;Sh.__name__=!0;Sh.__super__=Sd;Sh.prototype=z(Sd.prototype,{__insert:function(a){var b;null==vb.zpp_pool?
b=new vb:(b=vb.zpp_pool,vb.zpp_pool=b.next,b.next=null);null==ka.zpp_pool?b.aabb=new ka:(b.aabb=ka.zpp_pool,ka.zpp_pool=b.aabb.next,b.aabb.next=null);null;b.moved=!1;b.synced=!1;b.first_sync=!1;b.shape=a;a.node=b;b.synced=!0;b.first_sync=!0;b.snext=this.syncs;this.syncs=b},__remove:function(a){var b=a.node;b.first_sync||(b.dyn?this.dtree.removeLeaf(b):this.stree.removeLeaf(b));a.node=null;if(b.synced){for(var c=null,e=this.syncs;null!=e&&!(e==b);){c=e;e=e.snext}null==c?this.syncs=e.snext:c.snext=
e.snext;e.snext=null;b.synced=!1}if(b.moved){c=null;for(e=this.moves;null!=e&&!(e==b);){c=e;e=e.mnext}null==c?this.moves=e.mnext:c.mnext=e.mnext;e.mnext=null;b.moved=!1}for(var c=null,f=this.pairs;null!=f;)e=f.next,f.n1==b||f.n2==b?(null==c?this.pairs=e:c.next=e,null!=f.arb&&(f.arb.pair=null),f.arb=null,f.n1.shape.pairs.remove(f),f.n2.shape.pairs.remove(f),f.n1=f.n2=null,f.sleeping=!1,f.next=ga.zpp_pool,ga.zpp_pool=f):c=f,f=e;for(;null!=a.pairs.head;)c=a.pairs.pop_unsafe(),c.n1==b?c.n2.shape.pairs.remove(c):
c.n1.shape.pairs.remove(c),null!=c.arb&&(c.arb.pair=null),c.arb=null,c.n1=c.n2=null,c.sleeping=!1,c.next=ga.zpp_pool,ga.zpp_pool=c;b.free();b.next=vb.zpp_pool;vb.zpp_pool=b},__sync:function(a){var b=a.node;if(!b.synced&&(!this.space.continuous&&a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==h.id_ShapeType_CIRCLE?a.circle.__validate_aabb():a.polygon.__validate_aabb()),b.dyn!=(a.body.type==h.id_BodyType_STATIC?!1:!a.body.component.sleeping)||!b.aabb.contains(a.aabb)))b.synced=!0,b.snext=this.syncs,
this.syncs=b},broadphase:function(a,b){for(var c=this.syncs;null!=c;){var e=c.shape;c.first_sync?c.first_sync=!1:(c.dyn?this.dtree:this.stree).inlined_removeLeaf(c);var f=c.aabb;!a.continuous&&e.zip_aabb&&null!=e.body&&(e.zip_aabb=!1,e.type==h.id_ShapeType_CIRCLE?e.circle.__validate_aabb():e.polygon.__validate_aabb());f.setExpand(e.aabb,3);((e.body.type==h.id_BodyType_STATIC?c.dyn=!1:c.dyn=!e.body.component.sleeping)?this.dtree:this.stree).inlined_insertLeaf(c);c.synced=!1;c=c.snext}for(;null!=this.syncs;)if(c=
this.syncs,this.syncs=c.snext,c.snext=null,!c.moved&&(c.moved=!1,e=c.shape,!e.body.component.sleeping)){var f=c.aabb,i=null;null!=this.dtree.root&&(this.dtree.root.next=i,i=this.dtree.root);for(;null!=i;){var g;g=i;i=g.next;g.next=null;if(g!=c)if(null==g.child1){var j=g.shape;if(j.body!=e.body&&!(j.body.type==h.id_BodyType_STATIC&&e.body.type==h.id_BodyType_STATIC)&&f.intersect(g.aabb)){var k,l;e.id<j.id?(k=e.id,l=j.id):(k=j.id,l=e.id);for(var n=null,p=(e.pairs.length<j.pairs.length?e:j).pairs.head;null!=
p;){var q=p.elt;if(q.id==k&&q.di==l){n=q;break}p=p.next}null!=n?n.sleeping&&(n.sleeping=!1,n.next=this.pairs,this.pairs=n,n.first=!0):(null==ga.zpp_pool?n=new ga:(n=ga.zpp_pool,ga.zpp_pool=n.next,n.next=null),null,n.n1=c,n.n2=g,n.id=k,n.di=l,n.next=this.pairs,this.pairs=n,n.first=!0,e.pairs.inlined_add(n),j.pairs.inlined_add(n))}}else f.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=i,i=g.child1),null!=g.child2&&(g.child2.next=i,i=g.child2))}null!=this.stree.root&&(this.stree.root.next=i,i=this.stree.root);
for(;null!=i;)if(g=i,i=g.next,g.next=null,g!=c)if(null==g.child1){if(j=g.shape,j.body!=e.body&&!(j.body.type==h.id_BodyType_STATIC&&e.body.type==h.id_BodyType_STATIC)&&f.intersect(g.aabb)){e.id<j.id?(k=e.id,l=j.id):(k=j.id,l=e.id);n=null;for(p=(e.pairs.length<j.pairs.length?e:j).pairs.head;null!=p;){q=p.elt;if(q.id==k&&q.di==l){n=q;break}p=p.next}null!=n?n.sleeping&&(n.sleeping=!1,n.next=this.pairs,this.pairs=n,n.first=!0):(null==ga.zpp_pool?n=new ga:(n=ga.zpp_pool,ga.zpp_pool=n.next,n.next=null),
null,n.n1=c,n.n2=g,n.id=k,n.di=l,n.next=this.pairs,this.pairs=n,n.first=!0,e.pairs.inlined_add(n),j.pairs.inlined_add(n))}}else f.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=i,i=g.child1),null!=g.child2&&(g.child2.next=i,i=g.child2))}for(;null!=this.moves;)if(c=this.moves,this.moves=c.mnext,c.mnext=null,c.moved=!1,e=c.shape,!e.body.component.sleeping){f=c.aabb;i=null;null!=this.dtree.root&&(this.dtree.root.next=i,i=this.dtree.root);for(;null!=i;)if(g=i,i=g.next,g.next=null,g!=c)if(null==g.child1){if(j=
g.shape,j.body!=e.body&&!(j.body.type==h.id_BodyType_STATIC&&e.body.type==h.id_BodyType_STATIC)&&f.intersect(g.aabb)){e.id<j.id?(k=e.id,l=j.id):(k=j.id,l=e.id);n=null;for(p=(e.pairs.length<j.pairs.length?e:j).pairs.head;null!=p;){q=p.elt;if(q.id==k&&q.di==l){n=q;break}p=p.next}null!=n?n.sleeping&&(n.sleeping=!1,n.next=this.pairs,this.pairs=n,n.first=!0):(null==ga.zpp_pool?n=new ga:(n=ga.zpp_pool,ga.zpp_pool=n.next,n.next=null),null,n.n1=c,n.n2=g,n.id=k,n.di=l,n.next=this.pairs,this.pairs=n,n.first=
!0,e.pairs.inlined_add(n),j.pairs.inlined_add(n))}}else f.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=i,i=g.child1),null!=g.child2&&(g.child2.next=i,i=g.child2));null!=this.stree.root&&(this.stree.root.next=i,i=this.stree.root);for(;null!=i;)if(g=i,i=g.next,g.next=null,g!=c)if(null==g.child1){if(j=g.shape,j.body!=e.body&&!(j.body.type==h.id_BodyType_STATIC&&e.body.type==h.id_BodyType_STATIC)&&f.intersect(g.aabb)){e.id<j.id?(k=e.id,l=j.id):(k=j.id,l=e.id);n=null;for(p=(e.pairs.length<j.pairs.length?
e:j).pairs.head;null!=p;){q=p.elt;if(q.id==k&&q.di==l){n=q;break}p=p.next}null!=n?n.sleeping&&(n.sleeping=!1,n.next=this.pairs,this.pairs=n,n.first=!0):(null==ga.zpp_pool?n=new ga:(n=ga.zpp_pool,ga.zpp_pool=n.next,n.next=null),null,n.n1=c,n.n2=g,n.id=k,n.di=l,n.next=this.pairs,this.pairs=n,n.first=!0,e.pairs.inlined_add(n),j.pairs.inlined_add(n))}}else f.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=i,i=g.child1),null!=g.child2&&(g.child2.next=i,i=g.child2))}c=null;for(e=this.pairs;null!=e;)!e.first&&
!e.n1.aabb.intersect(e.n2.aabb)?(null==c?this.pairs=e.next:c.next=e.next,e.n1.shape.pairs.inlined_try_remove(e),e.n2.shape.pairs.inlined_try_remove(e),f=e.next,null!=e.arb&&(e.arb.pair=null),e.arb=null,e.n1=e.n2=null,e.sleeping=!1,e.next=ga.zpp_pool,ga.zpp_pool=e,e=f):(f=e.n1.shape,i=f.body,g=e.n2.shape,j=g.body,!e.first&&(i.component.sleeping||i.type==h.id_BodyType_STATIC)&&(j.component.sleeping||j.type==h.id_BodyType_STATIC)?(e.sleeping=!0,null==c?this.pairs=e.next:c.next=e.next):(e.first=!1,f.aabb.intersect(g.aabb)&&
(c=e.arb,e.arb=b?a.narrowPhase(f,g,i.type!=h.id_BodyType_DYNAMIC||j.type!=h.id_BodyType_DYNAMIC,e.arb,!1):a.continuousEvent(f,g,i.type!=h.id_BodyType_DYNAMIC||j.type!=h.id_BodyType_DYNAMIC,e.arb,!1),null==e.arb?null!=c&&(c.pair=null):e.arb.pair=e),c=e),e=e.next)},__class__:Sh});var Hc=function(){this.waket=0;this.sleep=!1;this.comps=null;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.comps=new Wj};j["zpp_nape.space.ZPP_Island"]=Hc;Hc.__name__=!0;Hc.prototype={inlined_add:function(a){a._inuse=
!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},__class__:Hc};var jb=function(){this.woken=!1;this.waket=0;this.sleeping=!1;this.body=this.constraint=this.island=null;this.isBody=!1;this.rank=0;this.next=this.parent=null;this.sleeping=!1;this.island=
null;this.parent=this;this.rank=0;this.woken=!1};j["zpp_nape.space.ZPP_Component"]=jb;jb.__name__=!0;jb.prototype={__class__:jb};var sb=function(){this.freed=this.lazydel=!1;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.int1=this.int2=this.next=null;this.id=this.di=0;this.arbiters=new Jg};j["zpp_nape.space.ZPP_CallbackSet"]=sb;sb.__name__=!0;sb.get=function(a,b){var c;null==sb.zpp_pool?c=new sb:(c=sb.zpp_pool,sb.zpp_pool=c.next,c.next=null);c.freed=!1;c.lazydel=!1;c.COLLISIONstate=
h.id_PreFlag_ACCEPT;c.COLLISIONstamp=0;c.SENSORstate=h.id_PreFlag_ACCEPT;c.SENSORstamp=0;c.FLUIDstate=h.id_PreFlag_ACCEPT;c.FLUIDstamp=0;a.id<b.id?(c.int1=a,c.int2=b):(c.int1=b,c.int2=a);c.id=c.int1.id;c.di=c.int2.id;return c};sb.prototype={inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=
!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},remove_arb:function(a){this.arbiters.inlined_try_remove(a)},empty_arb:function(a){var b;b=!0;for(var c=this.arbiters.head;null!=c;)if(0==(c.elt.type&a))c=c.next;else{b=!1;break}return b},sleeping:function(){var a;a=!0;for(var b=this.arbiters.head;null!=b;)if(b.elt.sleeping)b=b.next;else{a=!1;break}return a},__class__:sb};var Xj=function(a){this.cbsets=this.space=null;null==pc.zpp_pool?this.cbsets=new pc:(this.cbsets=pc.zpp_pool,
pc.zpp_pool=this.cbsets.next,this.cbsets.next=null);null;this.cbsets.lt=R.setlt;this.space=a};j["zpp_nape.space.ZPP_CbSetManager"]=Xj;Xj.__name__=!0;Xj.prototype={get:function(a){if(null==a.head)return null;var b;null==R.zpp_pool?b=new R:(b=R.zpp_pool,R.zpp_pool=b.next,b.next=null);null;var c=b.cbTypes;b.cbTypes=a;var e=this.cbsets.find_weak(b);null!=e?a=e.data:(a=R.get(a),this.cbsets.insert(a),a.manager=this);b.cbTypes=c;b.free();b.next=R.zpp_pool;R.zpp_pool=b;return a},remove:function(a){for(this.cbsets.remove(a);null!=
a.cbpairs.head;){var b=a.cbpairs.pop_unsafe();b.a!=b.b&&(a==b.a?b.b.cbpairs.remove(b):b.a.cbpairs.remove(b));b.a=b.b=null;b.listeners.clear();b.next=Fb.zpp_pool;Fb.zpp_pool=b}a.manager=null},validate:function(){if(!this.cbsets.empty()){for(var a=this.cbsets.parent;null!=a.prev;)a=a.prev;for(;null!=a;)if(a.data.validate(),null!=a.next)for(a=a.next;null!=a.prev;)a=a.prev;else{for(;null!=a.parent&&a==a.parent.next;)a=a.parent;a=a.parent}}},pair:function(a,b){for(var c=null,e=(a.cbpairs.length<b.cbpairs.length?
a.cbpairs:b.cbpairs).head;null!=e;){var f=e.elt;if(f.a==a&&f.b==b||f.a==b&&f.b==a){c=f;break}e=e.next}null==c&&(c=Fb.get(a,b),a.cbpairs.add(c),b!=a&&b.cbpairs.add(c));c.zip_listeners&&(c.zip_listeners=!1,c.__validate());return c},__class__:Xj};var Zi=function(a,b){this.precb=this.prelisteners=null;this.continuous=!1;this.toiEvents=null;this.pre_dt=0;this.c_arbiters_true=this.c_arbiters_false=this.f_arbiters=this.s_arbiters=this.live=this.wrap_live=this.live_constraints=this.wrap_livecon=this.staticsleep=
this.islands=this.listeners=this.wrap_listeners=this.callbacks=this.callbackset_list=this.cbsets=null;this.sortcontacts=!1;this.time=0;this.midstep=!1;this.global_lin_drag=this.global_ang_drag=this.stamp=0;this.bodies=this.wrap_bodies=this.compounds=this.wrap_compounds=this.constraints=this.wrap_constraints=this.kinematics=this.bphase=this.__static=null;this.gravityx=this.gravityy=0;this.outer=null;this.toiEvents=new Yj;this.global_ang_drag=this.global_lin_drag=0.015;this.precb=new ah;this.precb.zpp_inner=
new nc;this.sortcontacts=!0;this.pre_dt=0;var c;if(!(c=null==b))null==h.Broadphase_DYNAMIC_AABB_TREE&&(h.internal=!0,h.Broadphase_DYNAMIC_AABB_TREE=new Qe,h.internal=!1),c=b==h.Broadphase_DYNAMIC_AABB_TREE;c?this.bphase=new Sh(this):(null==h.Broadphase_SWEEP_AND_PRUNE&&(h.internal=!0,h.Broadphase_SWEEP_AND_PRUNE=new Qe,h.internal=!1),b==h.Broadphase_SWEEP_AND_PRUNE&&(this.bphase=new Th(this)));this.time=0;null!=a?(this.gravityx=a.x,this.gravityy=a.y):this.gravityy=this.gravityx=0;this.bodies=new te;
this.wrap_bodies=yc.get(this.bodies);this.wrap_bodies.zpp_inner.adder=v(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=v(this,this.bodies_subber);this.compounds=new Uh;this.wrap_compounds=Yd.get(this.compounds);this.wrap_compounds.zpp_inner.adder=v(this,this.compounds_adder);this.wrap_compounds.zpp_inner.subber=v(this,this.compounds_subber);this.kinematics=new te;this.c_arbiters_true=new Vh;this.c_arbiters_false=new Vh;this.f_arbiters=new Zj;this.s_arbiters=new $j;this.islands=new Hc;this.live=
new te;this.wrap_live=yc.get(this.live,!0);this.staticsleep=new te;this.constraints=new de;this.wrap_constraints=rc.get(this.constraints);this.wrap_constraints.zpp_inner.adder=v(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=v(this,this.constraints_subber);this.live_constraints=new de;this.wrap_livecon=rc.get(this.live_constraints,!0);this.__static=Rc.__static();this.__static.zpp_inner.space=this;this.callbacks=new nc;this.midstep=!1;this.listeners=new Wh;this.wrap_listeners=
Vd.get(this.listeners);this.wrap_listeners.zpp_inner.adder=v(this,this.listeners_adder);this.wrap_listeners.zpp_inner.subber=v(this,this.listeners_subber);this.callbackset_list=new sb;this.mrca1=new Od;this.mrca2=new Od;this.prelisteners=new Ue;this.cbsets=new Xj(this)};j["zpp_nape.space.ZPP_Space"]=Zi;Zi.__name__=!0;Zi.prototype={bodies_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(a),this.addBody(a.zpp_inner),!0):
!1},bodies_subber:function(a){this.remBody(a.zpp_inner)},compounds_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.wrap_compounds.remove(a),this.addCompound(a.zpp_inner),!0):!1},compounds_subber:function(a){this.remCompound(a.zpp_inner)},constraints_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(a),this.addConstraint(a.zpp_inner),!0):!1},constraints_subber:function(a){this.remConstraint(a.zpp_inner)},
listeners_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(a),this.addListener(a.zpp_inner),!0):!1},listeners_subber:function(a){this.remListener(a.zpp_inner)},addListener:function(a){a.space=this;a.addedToSpace();null!=a.interaction&&null},remListener:function(a){null!=a.interaction&&null;a.removedFromSpace();a.space=null},add_callbackset:function(a){a.int1.cbsets.inlined_add(a);a.int2.cbsets.inlined_add(a);this.callbackset_list.inlined_add(a)},
remove_callbackset:function(a){a.lazydel=!0;a.int1.cbsets.inlined_try_remove(a);a.int2.cbsets.inlined_try_remove(a)},transmitType:function(a,b){a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==h.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!1));a.type==h.id_BodyType_DYNAMIC?this.live.remove(a):a.type==h.id_BodyType_KINEMATIC?(this.kinematics.remove(a),this.staticsleep.remove(a)):a.type==h.id_BodyType_STATIC&&this.staticsleep.remove(a);
a.type=b;a.type==h.id_BodyType_KINEMATIC&&this.kinematics.add(a);a.type==h.id_BodyType_STATIC&&this.static_validation(a);a.component.sleeping=!0;a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==h.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0))},added_shape:function(a,b){null==b&&(b=!1);if(!b){var c=a.body;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==h.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&
this.really_wake(c,!1))}this.bphase.insert(a);a.addedToSpace()},removed_shape:function(a,b){null==b&&(b=!1);var c=this,e=a.body;b||e.wake();for(var f=null,i=e.arbiters.head;null!=i;){var g=[i.elt];if(g[0].ws1==a||g[0].ws2==a){if(0!=g[0].present){this.MRCA_chains(g[0].ws1,g[0].ws2);for(i=this.mrca1.head;null!=i;){for(var j=i.elt,k=this.mrca2.head;null!=k;){var l=k.elt,n=j.cbSet,p=l.cbSet;n.validate();p.validate();n.manager.pair(n,p).empty_intersection()||(l=[xa.get(j,l)],l[0].remove_arb(g[0]),g[0].present--,
n.manager.pair(n,p).forall(h.id_CbEvent_END,function(a,b){return function(f){if(0!=(f.itype&b[0].type)&&a[0].empty_arb(f.itype)){var e=c.push_callback(f);e.event=h.id_CbEvent_END;xa.int_callback(a[0],f,e);e.set=a[0]}}}(l,g)),null==l[0].arbiters.head&&this.remove_callbackset(l[0]));k=k.next}i=i.next}}g[0].b1!=e&&g[0].b1.type==h.id_BodyType_DYNAMIC&&(i=g[0].b1,i.world||(i.component.waket=this.stamp+(this.midstep?0:1),i.type==h.id_BodyType_KINEMATIC&&(i.kinematicDelaySleep=!0),i.component.sleeping&&
this.really_wake(i,!1)));g[0].b2!=e&&g[0].b2.type==h.id_BodyType_DYNAMIC&&(i=g[0].b2,i.world||(i.component.waket=this.stamp+(this.midstep?0:1),i.type==h.id_BodyType_KINEMATIC&&(i.kinematicDelaySleep=!0),i.component.sleeping&&this.really_wake(i,!1)));g[0].cleared=!0;(null==e||g[0].b2==e)&&g[0].b1.arbiters.inlined_try_remove(g[0]);(null==e||g[0].b1==e)&&g[0].b2.arbiters.inlined_try_remove(g[0]);null!=g[0].pair&&(g[0].pair.arb=null,g[0].pair=null);g[0].active=!1;this.f_arbiters.modified=!0;i=e.arbiters.erase(f)}else f=
i,i=i.next}this.bphase.remove(a);a.removedFromSpace()},addConstraint:function(a){a.space=this;a.addedToSpace();a.active&&(a.component.sleeping=!0,this.wake_constraint(a,!0))},remConstraint:function(a){a.active&&(this.wake_constraint(a,!0),this.live_constraints.remove(a));a.removedFromSpace();a.space=null},addCompound:function(a){a.space=this;a.addedToSpace();for(var b=a.bodies.head;null!=b;)this.addBody(b.elt),b=b.next;for(b=a.constraints.head;null!=b;)this.addConstraint(b.elt),b=b.next;for(a=a.compounds.head;null!=
a;)this.addCompound(a.elt),a=a.next},remCompound:function(a){for(var b=a.bodies.head;null!=b;)this.remBody(b.elt),b=b.next;for(b=a.constraints.head;null!=b;)this.remConstraint(b.elt),b=b.next;for(b=a.compounds.head;null!=b;)this.remCompound(b.elt),b=b.next;a.removedFromSpace();a.space=null},addBody:function(a,b){null==b&&(b=-1);a.space=this;a.addedToSpace();a.component.sleeping=!0;a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==h.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),
a.component.sleeping&&this.really_wake(a,!0));for(var c=a.shapes.head;null!=c;)this.added_shape(c.elt,!0),c=c.next;a.type==h.id_BodyType_STATIC?this.static_validation(a):a.type!=h.id_BodyType_DYNAMIC&&b!=h.id_BodyType_KINEMATIC&&this.kinematics.add(a)},remBody:function(a,b){null==b&&(b=-1);a.type==h.id_BodyType_STATIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==h.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a)):
a.type==h.id_BodyType_DYNAMIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==h.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.live.remove(a)):(b!=h.id_BodyType_KINEMATIC&&this.kinematics.remove(a),a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==h.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a));for(var c=a.shapes.head;null!=c;)this.removed_shape(c.elt,
!0),c=c.next;a.removedFromSpace();a.space=null},push_callback:function(a){var b;null==nc.zpp_pool?b=new nc:(b=nc.zpp_pool,nc.zpp_pool=b.next,b.next=null);null;this.callbacks.push(b);b.listener=a;return b},step:function(a,b,c){var e=this;this.time+=a;this.pre_dt=a;this.midstep=!0;this.stamp++;this.validation();this.bphase.broadphase(this,!0);this.prestep(a);if(this.sortcontacts){var f=this.c_arbiters_false;if(null!=f.head&&null!=f.head.next){var i=f.head,g=null,j=null,k=null,l=null,n=1,p,q,r;do{p=
0;j=i;for(g=i=null;null!=j;){p++;k=j;q=0;for(r=n;null!=k&&q<n;)q++,k=k.next;for(;0<q||0<r&&null!=k;)0==q?(l=k,k=k.next,r--):0==r||null==k?(l=j,j=j.next,q--):(j.elt.active&&k.elt.active?j.elt.oc1.dist<k.elt.oc1.dist:1)?(l=j,j=j.next,q--):(l=k,k=k.next,r--),null!=g?g.next=l:i=l,g=l;j=k}g.next=null;n<<=1}while(1<p);f.head=i;f.modified=!0;f.pushmod=!0}}this.updateVel(a);this.warmStart();this.iterateVel(b);for(b=this.kinematics.head;null!=b;)f=b.elt,f.pre_posx=f.posx,f.pre_posy=f.posy,f.pre_rot=f.rot,
b=b.next;for(b=this.live.head;null!=b;)f=b.elt,f.pre_posx=f.posx,f.pre_posy=f.posy,f.pre_rot=f.rot,b=b.next;this.updatePos(a);this.continuous=!0;this.continuousCollisions(a);this.continuous=!1;this.iteratePos(c);for(c=this.kinematics.head;null!=c;)b=c.elt,f=b.pre_rot!=b.rot,!(b.posx==b.pre_posx&&b.posy==b.pre_posy)&&b.invalidate_pos(),f&&b.invalidate_rot(),c=c.next;for(c=this.live.head;null!=c;)b=c.elt,f=b.pre_rot!=b.rot,!(b.posx==b.pre_posx&&b.posy==b.pre_posy)&&b.invalidate_pos(),f&&b.invalidate_rot(),
c=c.next;c=null;for(b=this.staticsleep.head;null!=b;)f=b.elt,f.type!=h.id_BodyType_KINEMATIC||0==f.velx&&0==f.vely&&0==f.angvel?f.kinematicDelaySleep?(f.kinematicDelaySleep=!1,b=b.next):(f.component.sleeping=!0,b=this.staticsleep.inlined_erase(c)):(c=b,b=b.next);this.doForests(a);this.sleepArbiters();this.midstep=!1;c=null;for(a=this.callbackset_list.next;null!=a;)b=[a],null==b[0].arbiters.head?(a=this.callbackset_list.inlined_erase(c),b=b[0],b.int1=b.int2=null,b.id=b.di=-1,b.freed=!0,null,b.next=
sb.zpp_pool,sb.zpp_pool=b):(c=[b[0].sleeping()],R.find_all(b[0].int1.cbSet,b[0].int2.cbSet,h.id_CbEvent_ONGOING,function(a,b){return function(c){if((!a[0]||c.allowSleepingCallbacks)&&!b[0].empty_arb(c.itype)){var d=e.push_callback(c);d.event=h.id_CbEvent_ONGOING;xa.int_callback(b[0],c,d);d.set=b[0]}}}(c,b)),c=a,a=a.next);for(;!this.callbacks.empty();)a=this.callbacks.pop(),a.listener.type==h.id_ListenerType_BODY?a.listener.body.handler(a.wrapper_body()):a.listener.type==h.id_ListenerType_CONSTRAINT?
a.listener.constraint.handler(a.wrapper_con()):a.listener.type==h.id_ListenerType_INTERACTION&&a.listener.interaction.handleri(a.wrapper_int()),a.int1=a.int2=null,a.body=null,a.constraint=null,a.listener=null,null!=a.wrap_arbiters&&(a.wrap_arbiters.zpp_inner.inner=null),a.set=null,a.next=nc.zpp_pool,nc.zpp_pool=a},continuousCollisions:function(a){var b=2*Math.PI/a;this.bphase.broadphase(this,!1);for(var c=0;1>c&&null!=this.toiEvents.head;){for(var e=null,c=2,f=!1,i=null,g=null,j=this.toiEvents.head;null!=
j;){var k=j.elt,l=k.s1.body,n=k.s2.body;if(l.sweepFrozen&&n.sweepFrozen)if(0!=k.toi&&J.testCollide_safe(k.s1,k.s2))k.toi=0;else{j=this.toiEvents.erase(g);k.next=$a.zpp_pool;$a.zpp_pool=k;continue}if(k.frozen1!=l.sweepFrozen||k.frozen2!=n.sweepFrozen)if(k.kinematic){j=this.toiEvents.erase(g);k.next=$a.zpp_pool;$a.zpp_pool=k;continue}else if(k.frozen1=l.sweepFrozen,k.frozen2=n.sweepFrozen,k.frozen1&&(l=k.s1,k.s1=k.s2,k.s2=l,k.frozen1=!1,k.frozen2=!0),oc.staticSweep(k,a,0,t.collisionSlopCCD),0>k.toi){j=
this.toiEvents.erase(g);k.next=$a.zpp_pool;$a.zpp_pool=k;continue}if(0<=k.toi&&(k.toi<c||!f&&k.kinematic))e=k,c=k.toi,f=k.kinematic,i=g;g=j;j=j.next}if(null==e)break;this.toiEvents.erase(i);c=e.toi;f=e.s1.body;i=e.s2.body;f.sweepFrozen||(f.sweepIntegrate(c*a),f.sweepValidate(e.s1));i.sweepFrozen||(i.sweepIntegrate(c*a),i.sweepValidate(e.s2));g=this.narrowPhase(e.s1,e.s2,!0,e.arbiter,!0);null==g?null!=e.arbiter&&null!=e.arbiter.pair&&(e.arbiter.pair.arb=null,e.arbiter.pair=null):!this.presteparb(g,
a,!0)&&g.type==da.COL&&g.active&&0!=(g.immState&h.id_ImmState_ACCEPT)&&(g.colarb.warmStart(),g.colarb.applyImpulseVel(),g.colarb.applyImpulseVel(),g.colarb.applyImpulseVel(),g.colarb.applyImpulseVel(),f.sweep_angvel=f.angvel%b,i.sweep_angvel=i.angvel%b);null!=g&&g.active&&0!=(g.immState&h.id_ImmState_ACCEPT)&&g.type==da.COL&&(!f.sweepFrozen&&f.type!=h.id_BodyType_KINEMATIC&&(f.sweepFrozen=!0,f.angvel=e.failed?f.sweep_angvel=0:e.slipped?f.sweep_angvel*=t.angularCCDSlipScale:f.sweep_angvel),!i.sweepFrozen&&
i.type!=h.id_BodyType_KINEMATIC&&(i.sweepFrozen=!0,i.angvel=e.failed?i.sweep_angvel=0:e.slipped?i.sweep_angvel*=t.angularCCDSlipScale:i.sweep_angvel));e.next=$a.zpp_pool;$a.zpp_pool=e}for(;null!=this.toiEvents.head;)b=this.toiEvents.pop_unsafe(),b.next=$a.zpp_pool,$a.zpp_pool=b;for(b=this.kinematics.head;null!=b;)e=b.elt,e.sweepIntegrate(a),e.sweepTime=0,b=b.next;for(b=this.live.head;null!=b;)e=b.elt,e.sweepFrozen||e.sweepIntegrate(a),e.sweepTime=0,b=b.next},continuousEvent:function(a,b,c,e){if(a.body.sweepFrozen&&
b.body.sweepFrozen||a.body.disableCCD||b.body.disableCCD||null!=e&&null==e.colarb||0>=this.interactionType(a,b,a.body,b.body))return e;var f=a.body,i=b.body;if(c||f.bullet||i.bullet){var g;null==$a.zpp_pool?g=new $a:(g=$a.zpp_pool,$a.zpp_pool=g.next,g.next=null);g.failed=!1;g.s1=g.s2=null;g.arbiter=null;f=f.type==h.id_BodyType_KINEMATIC||i.type==h.id_BodyType_KINEMATIC;c&&!f?(a.body.type!=h.id_BodyType_DYNAMIC?(g.s2=a,g.s1=b):(g.s1=a,g.s2=b),g.kinematic=!1,oc.staticSweep(g,this.pre_dt,0,t.collisionSlopCCD)):
(g.s1=a,g.s2=b,g.kinematic=f,g.s1.body.sweepFrozen||g.s2.body.sweepFrozen?(g.s1.body.sweepFrozen&&(a=g.s1,g.s1=g.s2,g.s2=a,g.frozen1=!1,g.frozen2=!0),oc.staticSweep(g,this.pre_dt,0,t.collisionSlopCCD)):oc.dynamicSweep(g,this.pre_dt,0,t.collisionSlopCCD));c&&0>g.toi||g.failed?(c=g,c.next=$a.zpp_pool,$a.zpp_pool=c):(this.toiEvents.add(g),g.frozen1=g.s1.body.sweepFrozen,g.frozen2=g.s2.body.sweepFrozen,g.arbiter=null!=e?e.colarb:null)}return e},bodyCbWake:function(a){if(a.type==h.id_BodyType_DYNAMIC&&
null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==h.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=h.id_CbEvent_WAKE,c.body=a);b=b.next}else a.component.woken=!0},bodyCbSleep:function(a){if(a.type==h.id_BodyType_DYNAMIC&&null!=a.cbSet)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==h.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=h.id_CbEvent_SLEEP,c.body=a);b=b.next}},constraintCbWake:function(a){if(null!=a.cbSet)if(this.midstep)for(var b=
a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==h.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=h.id_CbEvent_WAKE,c.constraint=a);b=b.next}else a.component.woken=!0},constraintCbSleep:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==h.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=h.id_CbEvent_SLEEP,c.constraint=a);b=b.next}},constraintCbBreak:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==
h.id_CbEvent_BREAK&&(c=this.push_callback(c),c.event=h.id_CbEvent_BREAK,c.constraint=a);b=b.next}},nullListenerType:function(a,b){for(var c=new Od,e=a.interactors.head;null!=e;)c.add(e.elt),e=e.next;if(a!=b)for(e=b.interactors.head;null!=e;)c.add(e.elt),e=e.next;for(;null!=c.head;)if(e=c.pop_unsafe(),null!=e.icompound){for(var e=e.icompound,f=e.bodies.head;null!=f;)c.add(f.elt),f=f.next;for(e=e.compounds.head;null!=e;)c.add(e.elt),e=e.next}else{f=null!=e.ibody?e.ibody:e.ishape.body;e=null!=e.ishape?
e.ishape:null;for(f=f.arbiters.head;null!=f;){var i=f.elt;if(0!=i.present&&(null==e||i.ws1==e||i.ws2==e)){this.MRCA_chains(i.ws1,i.ws2);for(i=this.mrca1.head;null!=i;){var h=i.elt;if(!(h.cbSet!=a&&h.cbSet!=b))for(var g=this.mrca2.head;null!=g;){var j=g.elt;if(!(h.cbSet==a&&j.cbSet!=b||h.cbSet==b&&j.cbSet!=a))if(j=xa.get(h,j),null!=j){for(;null!=j.arbiters.head;)j.arbiters.pop_unsafe().present--;this.remove_callbackset(j)}g=g.next}i=i.next}}f=f.next}}},nullInteractorType:function(a,b){null==b&&(b=
a);if(null!=a.icompound){for(var c=a.icompound,e=c.bodies.head;null!=e;)this.nullInteractorType(e.elt,b),e=e.next;for(c=c.compounds.head;null!=c;)this.nullInteractorType(c.elt,b),c=c.next}else{e=null!=a.ibody?a.ibody:a.ishape.body;c=null!=a.ishape?a.ishape:null;for(e=e.arbiters.head;null!=e;){var f=e.elt;if(0!=f.present&&(null==c||f.ws1==c||f.ws2==c)){this.MRCA_chains(f.ws1,f.ws2);for(var i=this.mrca1.head;null!=i;){for(var h=i.elt,g=this.mrca2.head;null!=g;){var j=g.elt;h!=b&&j!=b||(j=xa.get(h,j),
null!=j&&(f.present--,j.remove_arb(f),null==j.arbiters.head&&this.remove_callbackset(j)));g=g.next}i=i.next}}e=e.next}}},freshListenerType:function(a,b){for(var c=new Od,e=a.interactors.head;null!=e;)c.add(e.elt),e=e.next;if(a!=b)for(e=b.interactors.head;null!=e;)c.add(e.elt),e=e.next;for(;null!=c.head;)if(e=c.pop_unsafe(),null!=e.icompound){for(var e=e.icompound,f=e.bodies.head;null!=f;)c.add(f.elt),f=f.next;for(e=e.compounds.head;null!=e;)c.add(e.elt),e=e.next}else{f=null!=e.ibody?e.ibody:e.ishape.body;
e=null!=e.ishape?e.ishape:null;for(f=f.arbiters.head;null!=f;){var i=f.elt;if(i.presentable&&(null==e||i.ws1==e||i.ws2==e)){this.MRCA_chains(i.ws1,i.ws2);for(var h=this.mrca1.head;null!=h;){var g=h.elt;if(!(g.cbSet!=a&&g.cbSet!=b))for(var j=this.mrca2.head;null!=j;){var k=j.elt;if(!(g.cbSet==a&&k.cbSet!=b||g.cbSet==b&&k.cbSet!=a)){var l=xa.get(g,k);null==l&&(l=sb.get(g,k),this.add_callbackset(l));if(k=!l.arbiters.inlined_has(i))l.arbiters.inlined_add(i),k=!0;k&&i.present++}j=j.next}h=h.next}}f=f.next}}},
freshInteractorType:function(a,b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,e=c.bodies.head;null!=e;)this.freshInteractorType(e.elt,b),e=e.next;for(c=c.compounds.head;null!=c;)this.freshInteractorType(c.elt,b),c=c.next}else{e=null!=a.ibody?a.ibody:a.ishape.body;c=null!=a.ishape?a.ishape:null;for(e=e.arbiters.head;null!=e;){var f=e.elt;if(f.presentable&&(null==c||f.ws1==c||f.ws2==c)){this.MRCA_chains(f.ws1,f.ws2);for(var i=this.mrca1.head;null!=i;){for(var h=i.elt,g=this.mrca2.head;null!=
g;){var j=g.elt;if(!(h!=b&&j!=b)){var k=h.cbSet,l=j.cbSet;k.validate();l.validate();if(!k.manager.pair(k,l).empty_intersection()){k=xa.get(h,j);null==k&&(k=sb.get(h,j),this.add_callbackset(k));if(j=!k.arbiters.inlined_has(f))k.arbiters.inlined_add(f),j=!0;j&&f.present++}}g=g.next}i=i.next}}e=e.next}}},wakeCompound:function(a){for(var b=a.bodies.head;null!=b;){var c=b.elt;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==h.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&
this.really_wake(c,!1));b=b.next}for(b=a.constraints.head;null!=b;)this.wake_constraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.wakeCompound(a.elt),a=a.next},wakeIsland:function(a){for(;null!=a.comps.head;){var b=a.comps.pop_unsafe();b.waket=this.stamp+(this.midstep?0:1);if(b.isBody){var c=b.body;this.live.add(c);for(var e=c.arbiters.head;null!=e;){var f=e.elt;f.sleeping&&(f.sleeping=!1,f.up_stamp+=this.stamp-f.sleep_stamp,f.type==da.COL?(f=f.colarb,f.stat?this.c_arbiters_true.inlined_add(f):
this.c_arbiters_false.inlined_add(f)):f.type==da.FLUID?this.f_arbiters.inlined_add(f.fluidarb):this.s_arbiters.inlined_add(f.sensorarb));e=e.next}this.bodyCbWake(c);b.sleeping=!1;b.island=null;b.parent=b;b.rank=0;if(c.type!=h.id_BodyType_STATIC)for(b=c.shapes.head;null!=b;)c=b.elt,null!=c.node&&this.bphase.sync(c),b=b.next}else c=b.constraint,this.live_constraints.inlined_add(c),this.constraintCbWake(c),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0}a.next=Hc.zpp_pool;Hc.zpp_pool=a},non_inlined_wake:function(a,
b){null==b&&(b=!1);a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==h.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,b))},really_wake:function(a,b){null==b&&(b=!1);if(null==a.component.island){a.component.sleeping=!1;a.type==h.id_BodyType_KINEMATIC||a.type==h.id_BodyType_STATIC?this.staticsleep.inlined_add(a):this.live.inlined_add(a);for(var c=a.constraints.head;null!=c;){var e=c.elt;e.space==this&&this.wake_constraint(e);c=c.next}for(c=
a.arbiters.head;null!=c;){e=c.elt;if(e.sleeping)if(e.sleeping=!1,e.up_stamp+=this.stamp+(this.midstep?0:1)-e.sleep_stamp,e.type==da.COL){var f=e.colarb;f.stat?this.c_arbiters_true.inlined_add(f):this.c_arbiters_false.inlined_add(f)}else e.type==da.FLUID?this.f_arbiters.inlined_add(e.fluidarb):this.s_arbiters.inlined_add(e.sensorarb);e.type!=da.SENSOR&&!e.cleared&&e.up_stamp>=this.stamp&&0!=(e.immState&h.id_ImmState_ACCEPT)&&(e.b1.type==h.id_BodyType_DYNAMIC&&e.b1.component.sleeping&&(f=e.b1,f.world||
(f.component.waket=this.stamp+(this.midstep?0:1),f.type==h.id_BodyType_KINEMATIC&&(f.kinematicDelaySleep=!0),f.component.sleeping&&this.really_wake(f,!1))),e.b2.type==h.id_BodyType_DYNAMIC&&e.b2.component.sleeping&&(e=e.b2,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.type==h.id_BodyType_KINEMATIC&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))));c=c.next}!b&&a.type==h.id_BodyType_DYNAMIC&&this.bodyCbWake(a);if(!b&&!this.bphase.is_sweep&&a.type!=h.id_BodyType_STATIC)for(c=
a.shapes.head;null!=c;)e=c.elt,null!=e.node&&this.bphase.sync(e),c=c.next}else this.wakeIsland(a.component.island)},wake_constraint:function(a,b){null==b&&(b=!1);return a.active&&(a.component.waket=this.stamp+(this.midstep?0:1),a.component.sleeping)?(null==a.component.island?(a.component.sleeping=!1,this.live_constraints.inlined_add(a),a.wake_connected(),b||this.constraintCbWake(a)):this.wakeIsland(a.component.island),!0):!1},doForests:function(a){for(var b=this.c_arbiters_false.head;null!=b;){var c=
b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&h.id_ImmState_ACCEPT)&&c.b1.type==h.id_BodyType_DYNAMIC&&c.b2.type==h.id_BodyType_DYNAMIC){var e;if(c.b1.component==c.b1.component.parent)e=c.b1.component;else{e=c.b1.component;for(var f=null;e!=e.parent;){var i=e.parent;e.parent=f;f=e;e=i}for(;null!=f;)i=f.parent,f.parent=e,f=i}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=c.b2.component;for(f=null;c!=c.parent;)i=c.parent,c.parent=f,f=c,c=i;for(;null!=f;)i=f.parent,f.parent=
c,f=i}e!=c&&(e.rank<c.rank?e.parent=c:e.rank>c.rank?c.parent=e:(c.parent=e,e.rank++))}b=b.next}for(b=this.f_arbiters.head;null!=b;){c=b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&h.id_ImmState_ACCEPT)&&c.b1.type==h.id_BodyType_DYNAMIC&&c.b2.type==h.id_BodyType_DYNAMIC){if(c.b1.component==c.b1.component.parent)e=c.b1.component;else{e=c.b1.component;for(f=null;e!=e.parent;)i=e.parent,e.parent=f,f=e,e=i;for(;null!=f;)i=f.parent,f.parent=e,f=i}if(c.b2.component==c.b2.component.parent)c=
c.b2.component;else{c=c.b2.component;for(f=null;c!=c.parent;)i=c.parent,c.parent=f,f=c,c=i;for(;null!=f;)i=f.parent,f.parent=c,f=i}e!=c&&(e.rank<c.rank?e.parent=c:e.rank>c.rank?c.parent=e:(c.parent=e,e.rank++))}b=b.next}for(b=this.live_constraints.head;null!=b;)b.elt.forest(),b=b.next;for(;null!=this.live.head;){e=this.live.inlined_pop_unsafe();b=e.component;if(b==b.parent)c=b;else{c=b;for(f=null;c!=c.parent;)i=c.parent,c.parent=f,f=c,c=i;for(;null!=f;)i=f.parent,f.parent=c,f=i}null==c.island&&(null==
Hc.zpp_pool?c.island=new Hc:(c.island=Hc.zpp_pool,Hc.zpp_pool=c.island.next,c.island.next=null),c.island.waket=0,this.islands.inlined_add(c.island),c.island.sleep=!0);b.island=c.island;b.island.comps.inlined_add(b);e=e.atRest(a);b.island.sleep=b.island.sleep&&e;b.waket>b.island.waket&&(b.island.waket=b.waket)}for(;null!=this.live_constraints.head;){a=this.live_constraints.inlined_pop_unsafe().component;if(a==a.parent)b=a;else{b=a;for(e=null;b!=b.parent;)c=b.parent,b.parent=e,e=b,b=c;for(;null!=e;)c=
e.parent,e.parent=b,e=c}a.island=b.island;a.island.comps.inlined_add(a);a.waket>a.island.waket&&(a.island.waket=a.waket)}for(;null!=this.islands.next;)if(a=this.islands.inlined_pop_unsafe(),a.sleep)for(a=a.comps.head;null!=a;){e=a.elt;if(e.isBody){b=e.body;b.velx=0;b.vely=0;b.angvel=0;e.sleeping=!0;for(e=b.shapes.head;null!=e;)this.bphase.sync(e.elt),e=e.next;this.bodyCbSleep(b)}else this.constraintCbSleep(e.constraint),e.sleeping=!0;a=a.next}else{for(;null!=a.comps.head;)b=a.comps.inlined_pop_unsafe(),
b.waket=a.waket,b.isBody?this.live.inlined_add(b.body):this.live_constraints.inlined_add(b.constraint),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0;a.next=Hc.zpp_pool;Hc.zpp_pool=a}},sleepArbiters:function(){var a=null,b=this.c_arbiters_true,c=b.head,e=null!=this.c_arbiters_false;e&&null==c&&(e=!1,c=this.c_arbiters_false.head,b=this.c_arbiters_false,a=null);for(;null!=c;){var f=c.elt;f.b1.component.sleeping&&f.b2.component.sleeping?(f.sleep_stamp=this.stamp,f.sleeping=!0,c=b.inlined_erase(a)):
(a=c,c=c.next);e&&null==c&&(e=!1,c=this.c_arbiters_false.head,b=this.c_arbiters_false,a=null)}a=null;b=this.f_arbiters;c=b.head;e=!1;for(;null!=c;)f=c.elt,f.b1.component.sleeping&&f.b2.component.sleeping?(f.sleep_stamp=this.stamp,f.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),e&&null==c&&(e=!1,a=b=null);a=null;b=this.s_arbiters;c=b.head;e=!1;for(;null!=c;)f=c.elt,f.b1.component.sleeping&&f.b2.component.sleeping?(f.sleep_stamp=this.stamp,f.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),e&&null==
c&&(e=!1,a=b=null)},static_validation:function(a){null!=a.shapes.head&&a.validate_aabb();a.validate_mass();a.validate_inertia();for(var b=a.shapes.head;null!=b;){var c=b.elt;c.type==h.id_ShapeType_POLYGON&&(c.polygon.splice_collinear(),c.polygon.validate_gaxi());b=b.next}a.sweepFrozen=!0},validation:function(){this.cbsets.validate();for(var a=this.live.head;null!=a;){var b=a.elt;b.sweepRadius=0;for(var c=b.shapes.head;null!=c;){var e=c.elt;e.type==h.id_ShapeType_POLYGON&&(e.polygon.splice_collinear(),
e.polygon.validate_gaxi());e.validate_sweepRadius();e.sweepRadius>b.sweepRadius&&(b.sweepRadius=e.sweepRadius);c=c.next}b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);if(b.component.woken&&null!=b.cbSet)for(c=b.cbSet.bodylisteners.head;null!=c;)e=c.elt,e.event==h.id_CbEvent_WAKE&&(e=this.push_callback(e),e.event=h.id_CbEvent_WAKE,e.body=b),c=
c.next;b.component.woken=!1;for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.kinematics.head;null!=a;){b=a.elt;b.sweepRadius=0;for(c=b.shapes.head;null!=c;)e=c.elt,e.type==h.id_ShapeType_POLYGON&&(e.polygon.splice_collinear(),e.polygon.validate_gaxi()),e.validate_sweepRadius(),e.sweepRadius>b.sweepRadius&&(b.sweepRadius=e.sweepRadius),c=c.next;b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();
b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.live_constraints.head;null!=a;){b=a.elt;if(b.active){if(b.component.woken&&null!=b.cbSet)for(c=b.cbSet.conlisteners.head;null!=c;)e=c.elt,e.event==h.id_CbEvent_WAKE&&(e=this.push_callback(e),e.event=h.id_CbEvent_WAKE,e.constraint=b),c=c.next;b.component.woken=!1}a=a.next}},updateVel:function(a){for(var b=1-a*this.global_lin_drag,c=1-a*this.global_ang_drag,
e=this.live.head;null!=e;){var f=e.elt;if(0!=f.smass){var i=a*f.imass;f.velx=b*f.velx+(f.forcex+this.gravityx*f.gravMass)*i;f.vely=b*f.vely+(f.forcey+this.gravityy*f.gravMass)*i}if(0!=f.sinertia){var h=i=0,i=f.worldCOMx-f.posx,h=f.worldCOMy-f.posy;f.angvel=c*f.angvel+(f.torque+(this.gravityy*i-this.gravityx*h)*f.gravMass)*a*f.iinertia}e=e.next}},updatePos:function(a){for(var b=2*Math.PI/a,c=this.live.head;null!=c;){var e=c.elt;e.pre_posx=e.posx;e.pre_posy=e.posy;e.pre_rot=e.rot;e.sweepTime=0;e.sweep_angvel=
e.angvel%b;e.sweepIntegrate(a);if(e.disableCCD)e.sweepFrozen=!0,e.bullet=!1;else{var f=t.staticCCDLinearThreshold*e.sweepRadius,i=t.staticCCDAngularThreshold;if((e.velx*e.velx+e.vely*e.vely)*a*a>f*f||e.angvel*e.angvel*a*a>i*i||e.type==h.id_BodyType_KINEMATIC){f=e.sweep_angvel;0>f&&(f=-f);for(var i=1/f,g=e.shapes.head;null!=g;){var j=g.elt,k=j.aabb,l=k.minx,n=k.miny,p=k.maxx,q=k.maxy,r=0.008333333333333333*f*a*j.sweepCoef|0;8<r&&(r=8);var u=f*a/r;e.sweepIntegrate(a);j.type==h.id_ShapeType_CIRCLE?j.circle._force_validate_aabb():
j.polygon._force_validate_aabb();l<k.minx?k.minx=l:l=k.minx;n<k.miny?k.miny=n:n=k.miny;p>k.maxx?k.maxx=p:p=k.maxx;q>k.maxy?k.maxy=q:q=k.maxy;for(var v=1;v<r;){var w=v++;e.sweepIntegrate(u*w*i);j.type==h.id_ShapeType_CIRCLE?j.circle._force_validate_aabb():j.polygon._force_validate_aabb();l<k.minx?k.minx=l:l=k.minx;n<k.miny?k.miny=n:n=k.miny;p>k.maxx?k.maxx=p:p=k.maxx;q>k.maxy?k.maxy=q:q=k.maxy}this.bphase.sync(j);g=g.next}e.sweepFrozen=!1;if(e.type==h.id_BodyType_DYNAMIC&&e.bulletEnabled&&(f=t.bulletCCDLinearThreshold*
e.sweepRadius,i=t.bulletCCDAngularThreshold,(e.velx*e.velx+e.vely*e.vely)*a*a>f*f||e.angvel*e.angvel*a*a>i*i))e.bullet=!0}else e.sweepFrozen=!0,e.bullet=!1}c=c.next}for(c=this.kinematics.head;null!=c;){e=c.elt;e.pre_posx=e.posx;e.pre_posy=e.posy;e.pre_rot=e.rot;e.sweepTime=0;e.sweep_angvel=e.angvel%b;e.sweepIntegrate(a);if(e.disableCCD)e.sweepFrozen=!0,e.bullet=!1;else if(f=t.staticCCDLinearThreshold*e.sweepRadius,i=t.staticCCDAngularThreshold,(e.velx*e.velx+e.vely*e.vely)*a*a>f*f||e.angvel*e.angvel*
a*a>i*i||e.type==h.id_BodyType_KINEMATIC){f=e.sweep_angvel;0>f&&(f=-f);i=1/f;for(g=e.shapes.head;null!=g;){j=g.elt;k=j.aabb;l=k.minx;n=k.miny;p=k.maxx;q=k.maxy;r=0.008333333333333333*f*a*j.sweepCoef|0;8<r&&(r=8);u=f*a/r;e.sweepIntegrate(a);j.type==h.id_ShapeType_CIRCLE?j.circle._force_validate_aabb():j.polygon._force_validate_aabb();l<k.minx?k.minx=l:l=k.minx;n<k.miny?k.miny=n:n=k.miny;p>k.maxx?k.maxx=p:p=k.maxx;q>k.maxy?k.maxy=q:q=k.maxy;for(v=1;v<r;)w=v++,e.sweepIntegrate(u*w*i),j.type==h.id_ShapeType_CIRCLE?
j.circle._force_validate_aabb():j.polygon._force_validate_aabb(),l<k.minx?k.minx=l:l=k.minx,n<k.miny?k.miny=n:n=k.miny,p>k.maxx?k.maxx=p:p=k.maxx,q>k.maxy?k.maxy=q:q=k.maxy;this.bphase.sync(j);g=g.next}e.sweepFrozen=!1;if(e.type==h.id_BodyType_DYNAMIC&&e.bulletEnabled&&(f=t.bulletCCDLinearThreshold*e.sweepRadius,i=t.bulletCCDAngularThreshold,(e.velx*e.velx+e.vely*e.vely)*a*a>f*f||e.angvel*e.angvel*a*a>i*i))e.bullet=!0}else e.sweepFrozen=!0,e.bullet=!1;c=c.next}},presteparb:function(a,b,c){null==c&&
(c=!1);var e=this;if(!a.cleared&&a.b1.component.sleeping&&a.b2.component.sleeping)return a.sleep_stamp=this.stamp,a.sleeping=!0;if(!a.cleared||0!=a.present||a.intchange){var f=!c&&a.up_stamp==this.stamp-1&&!a.cleared&&!a.intchange,c=a.fresh&&!a.cleared&&!a.intchange;f&&(a.endGenerated=this.stamp);if(c||f||a.cleared||a.intchange){this.inlined_MRCA_chains(a.ws1,a.ws2);for(f=this.mrca1.head;null!=f;){for(var g=f.elt,j=this.mrca2.head;null!=j;){var k=j.elt,l=g.cbSet,n=k.cbSet;if(!l.manager.pair(l,n).empty_intersection()){var p=
[xa.get(g,k)];if(c||a.intchange){null==p[0]&&(p[0]=sb.get(g,k),this.add_callbackset(p[0]));l.manager.pair(l,n).forall(h.id_CbEvent_BEGIN,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var d=e.push_callback(c);d.event=h.id_CbEvent_BEGIN;xa.int_callback(b[0],c,d);d.set=b[0]}}}(p));if(k=!p[0].arbiters.inlined_has(a))p[0].arbiters.inlined_add(a),k=!0;k&&a.present++}else a.present--,p[0].remove_arb(a),l.manager.pair(l,n).forall(h.id_CbEvent_END,function(b){return function(c){if(0!=
(c.itype&a.type)&&b[0].empty_arb(c.itype)){var d=e.push_callback(c);d.event=h.id_CbEvent_END;xa.int_callback(b[0],c,d);d.set=b[0]}}}(p)),null==p[0].arbiters.head&&this.remove_callbackset(p[0])}j=j.next}f=f.next}}a.fresh=!1;a.intchange=!1}if(a.cleared||a.up_stamp+(a.type==da.COL?t.arbiterExpirationDelay:0)<this.stamp)return a.type==da.SENSOR?a.sensorarb.retire():a.type==da.FLUID?a.fluidarb.retire():a.colarb.retire(),!0;c=a.active;a.active=a.presentable=a.up_stamp==this.stamp;0!=(a.immState&h.id_ImmState_ACCEPT)?
a.active&&a.type!=da.SENSOR&&(null!=a.colarb?a.colarb.preStep(b)&&(a.active=!1):a.fluidarb.preStep(this,b)):null!=a.colarb&&a.colarb.cleanupContacts()&&(a.active=!1);c!=a.active&&(a.b1.arbiters.modified=!0,a.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=!0,this.s_arbiters.modified=this.f_arbiters.modified=!0);return!1},prestep:function(a){for(var b=null,c=this.live_constraints.head;null!=c;){var e=c.elt;e.preStep(a)?(c=this.live_constraints.erase(b),e.broken(),
this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(b=c,c=c.next)}var b=null,c=this.c_arbiters_true,e=c.head,f=null!=this.c_arbiters_false;f&&null==e&&(f=!1,e=this.c_arbiters_false.head,c=this.c_arbiters_false,b=null);for(;null!=e;)this.presteparb(e.elt,a)?e=c.inlined_erase(b):(b=e,e=e.next),f&&null==e&&(f=!1,e=this.c_arbiters_false.head,
c=this.c_arbiters_false,b=null);b=null;c=this.f_arbiters;e=c.head;f=!1;for(;null!=e;)this.presteparb(e.elt,a)?e=c.inlined_erase(b):(b=e,e=e.next),f&&null==e&&(f=!1,b=c=null);b=null;c=this.s_arbiters;e=c.head;f=!1;for(;null!=e;)this.presteparb(e.elt,a)?e=c.inlined_erase(b):(b=e,e=e.next),f&&null==e&&(f=!1,b=c=null)},warmStart:function(){for(var a=this.f_arbiters.head;null!=a;){var b=a.elt;b.active&&0!=(b.immState&h.id_ImmState_ACCEPT)&&b.warmStart();a=a.next}a=this.c_arbiters_false.head;b=!0;null==
a&&(a=this.c_arbiters_true.head,b=!1);for(;null!=a;){var c=a.elt;c.active&&0!=(c.immState&h.id_ImmState_ACCEPT)&&c.warmStart();a=a.next;b&&null==a&&(a=this.c_arbiters_true.head,b=!1)}for(a=this.live_constraints.head;null!=a;)a.elt.warmStart(),a=a.next},iterateVel:function(a){for(var b=0;b<a;){b++;for(var c=this.f_arbiters.head;null!=c;){var e=c.elt;e.active&&0!=(e.immState&h.id_ImmState_ACCEPT)&&e.applyImpulseVel();c=c.next}c=null;for(e=this.live_constraints.head;null!=e;){var f=e.elt;f.applyImpulseVel()?
(e=this.live_constraints.erase(c),f.broken(),this.constraintCbBreak(f),f.removeOnBreak?(f.component.sleeping=!0,this.midstep=!1,null!=f.compound?f.compound.wrap_constraints.remove(f.outer):this.wrap_constraints.remove(f.outer),this.midstep=!0):f.active=!1,f.clearcache()):(c=e,e=e.next)}c=this.c_arbiters_false.head;e=!0;null==c&&(c=this.c_arbiters_true.head,e=!1);for(;null!=c;)f=c.elt,f.active&&0!=(f.immState&h.id_ImmState_ACCEPT)&&f.applyImpulseVel(),c=c.next,e&&null==c&&(c=this.c_arbiters_true.head,
e=!1)}},iteratePos:function(a){for(var b=0;b<a;){b++;for(var c=null,e=this.live_constraints.head;null!=e;){var f=e.elt;!f.__velocity&&f.stiff&&f.applyImpulsePos()?(e=this.live_constraints.erase(c),f.broken(),this.constraintCbBreak(f),f.removeOnBreak?(f.component.sleeping=!0,this.midstep=!1,null!=f.compound?f.compound.wrap_constraints.remove(f.outer):this.wrap_constraints.remove(f.outer),this.midstep=!0):f.active=!1,f.clearcache()):(c=e,e=e.next)}c=this.c_arbiters_false.head;e=!0;null==c&&(c=this.c_arbiters_true.head,
e=!1);for(;null!=c;)f=c.elt,f.active&&0!=(f.immState&h.id_ImmState_ACCEPT)&&f.applyImpulsePos(),c=c.next,e&&null==c&&(c=this.c_arbiters_true.head,e=!1)}},group_ignore:function(a,b){var c=a.lookup_group();if(null==c)return!1;var e=b.lookup_group();if(null==e)return!1;for(var f=!1;null!=c&&null!=e;){if(c==e){f=c.ignore;break}c.depth<e.depth?e=e.group:c=c.group}return f},interactionType:function(a,b,c,e){var f;f=!1;for(var g=c.constraints.head;null!=g;){var h=g.elt;if(h.ignore&&h.pair_exists(c.id,e.id)){f=
!0;break}g=g.next}return!f&&!this.group_ignore(a,b)?(a.sensorEnabled||b.sensorEnabled)&&a.filter.shouldSense(b.filter)?2:(a.fluidEnabled||b.fluidEnabled)&&a.filter.shouldFlow(b.filter)&&!(0==c.imass&&0==e.imass&&0==c.iinertia&&0==e.iinertia)?0:a.filter.shouldCollide(b.filter)&&!(0==c.imass&&0==e.imass&&0==c.iinertia&&0==e.iinertia)?1:-1:-1},narrowPhase:function(a,b,c,e,f){var g=this,j=null,k=a.body,l=b.body,n=this.interactionType(a,b,k,l);if(-1!=n){var p,q;a.type>b.type?(p=b,q=a):a.type==b.type?a.id<
b.id?(p=a,q=b):(q=a,p=b):(p=a,q=b);var r=p==b;if(0==n){var t;if(null==e){for(var u=null,v=(k.arbiters.length<l.arbiters.length?k:l).arbiters.head;null!=v;){var w=v.elt;if(w.id==p.id&&w.di==q.id){u=w;break}v=v.next}t=u}else t=e;var x=null==t,s,z=!1;x?(null==Gb.zpp_pool?s=new Gb:(s=Gb.zpp_pool,Gb.zpp_pool=s.next,s.next=null),null):null==t.fluidarb?(t.cleared=!0,t.b1.arbiters.inlined_try_remove(t),t.b2.arbiters.inlined_try_remove(t),null!=t.pair&&(t.pair.arb=null,t.pair=null),t.active=!1,this.f_arbiters.modified=
!0,null==Gb.zpp_pool?s=new Gb:(s=Gb.zpp_pool,Gb.zpp_pool=s.next,s.next=null),null,z=x=s.intchange=!0):s=t.fluidarb;var A=h.id_InteractionType_FLUID;if(x||s.stamp!=this.stamp||f)if(s.stamp=this.stamp,J.flowCollide(p,q,s)){x?(s.b1=a.body,s.ws1=a,s.b2=b.body,s.ws2=b,s.id=p.id,s.di=q.id,s.b1.arbiters.inlined_add(s),s.b2.arbiters.inlined_add(s),s.active=!0,s.present=0,s.cleared=!1,s.sleeping=!1,s.fresh=!1,s.presentable=!1,s.nx=0,s.ny=1,s.dampx=0,s.dampy=0,s.adamp=0,this.f_arbiters.inlined_add(s),s.fresh=
!z):s.fresh=s.up_stamp<this.stamp-1||s.endGenerated==this.stamp&&f;s.up_stamp=s.stamp;if(s.fresh||0==(s.immState&h.id_ImmState_ALWAYS)){s.immState=h.id_ImmState_ACCEPT;var B=!1;this.inlined_MRCA_chains(s.ws1.id>s.ws2.id?s.ws2:s.ws1,s.ws1.id>s.ws2.id?s.ws1:s.ws2);for(var C=this.mrca1.head;null!=C;){for(var D=C.elt,E=this.mrca2.head;null!=E;){var F=E.elt,H=D.cbSet,K=F.cbSet;if(!H.manager.pair(H,K).empty_intersection()){var G=null,L=null;this.prelisteners.inlined_clear();H.manager.pair(H,K).forall(h.id_CbEvent_PRE,
function(a){return function(b){0!=(b.itype&A)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),B=B||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(G=xa.get(D,F),null==G&&(L=sb.get(D,F),this.add_callbackset(L)),null==G||(G.FLUIDstamp!=this.stamp||f)&&0==(G.FLUIDstate&h.id_ImmState_ALWAYS)){null!=L&&(G=L);if(null!=G)for(var M=this.prelisteners.head;null!=M;)M.elt.itype==h.id_InteractionType_ANY&&(G.COLLISIONstamp=this.stamp,G.SENSORstamp=this.stamp),G.FLUIDstamp=this.stamp,M=M.next;var Q=s.active;
s.active=!0;this.precb.zpp_inner.pre_arbiter=s;this.precb.zpp_inner.set=G;for(var N=this.prelisteners.head;null!=N;){var P=N.elt;this.precb.zpp_inner.listener=P;xa.int_callback(G,P,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=D!=this.precb.zpp_inner.int1;var O=P.handlerp(this.precb);if(null!=O){var S=s,W=O,U;null==h.PreFlag_ACCEPT&&(h.internal=!0,h.PreFlag_ACCEPT=new Pa,h.internal=!1);if(W==h.PreFlag_ACCEPT)U=h.id_ImmState_ACCEPT|h.id_ImmState_ALWAYS;else{var ca=O,Y;null==h.PreFlag_ACCEPT_ONCE&&
(h.internal=!0,h.PreFlag_ACCEPT_ONCE=new Pa,h.internal=!1);if(ca==h.PreFlag_ACCEPT_ONCE)Y=h.id_ImmState_ACCEPT;else{var da=O;null==h.PreFlag_IGNORE&&(h.internal=!0,h.PreFlag_IGNORE=new Pa,h.internal=!1);Y=da==h.PreFlag_IGNORE?h.id_ImmState_IGNORE|h.id_ImmState_ALWAYS:h.id_ImmState_IGNORE}U=Y}S.immState=U}N=N.next}s.active=Q;if(null!=G)for(var X=this.prelisteners.head;null!=X;)X.elt.itype==h.id_InteractionType_ANY&&(G.COLLISIONstate=s.immState,G.SENSORstate=s.immState),G.FLUIDstate=s.immState,X=X.next}else null==
G?0==(s.immState&h.id_ImmState_ALWAYS)&&(s.immState=h.id_ImmState_ACCEPT):s.immState=G.FLUIDstate}E=E.next}C=C.next}if(B&&0==(s.immState&h.id_ImmState_ALWAYS)){if(s.b1.type==h.id_BodyType_DYNAMIC){var V=s.b1;V.world||(V.component.waket=this.stamp+(this.midstep?0:1),V.type==h.id_BodyType_KINEMATIC&&(V.kinematicDelaySleep=!0),V.component.sleeping&&this.really_wake(V,!1))}if(s.b1.type==h.id_BodyType_DYNAMIC){var Z=s.b2;Z.world||(Z.component.waket=this.stamp+(this.midstep?0:1),Z.type==h.id_BodyType_KINEMATIC&&
(Z.kinematicDelaySleep=!0),Z.component.sleeping&&this.really_wake(Z,!1))}}}if(0!=(s.immState&h.id_ImmState_ACCEPT)){if(s.b1.type==h.id_BodyType_DYNAMIC&&s.b1.component.sleeping){var aa=s.b1;aa.world||(aa.component.waket=this.stamp+(this.midstep?0:1),aa.type==h.id_BodyType_KINEMATIC&&(aa.kinematicDelaySleep=!0),aa.component.sleeping&&this.really_wake(aa,!1))}if(s.b2.type==h.id_BodyType_DYNAMIC&&s.b2.component.sleeping){var ba=s.b2;ba.world||(ba.component.waket=this.stamp+(this.midstep?0:1),ba.type==
h.id_BodyType_KINEMATIC&&(ba.kinematicDelaySleep=!0),ba.component.sleeping&&this.really_wake(ba,!1))}}s.sleeping&&(s.sleeping=!1,this.f_arbiters.inlined_add(s));j=s}else if(x){var fa=s;fa.next=Gb.zpp_pool;Gb.zpp_pool=fa;j=null}else j=s;else j=s}else if(1==n){var ea;ea=c?this.c_arbiters_true:this.c_arbiters_false;var R;if(null==e){for(var ja=null,ha=(k.arbiters.length<l.arbiters.length?k:l).arbiters.head;null!=ha;){var ia=ha.elt;if(ia.id==p.id&&ia.di==q.id){ja=ia;break}ha=ha.next}R=ja}else R=e;var ga=
null==R,y,la=!1;ga?(null==rb.zpp_pool?y=new rb:(y=rb.zpp_pool,rb.zpp_pool=y.next,y.next=null),null,y.stat=c):null==R.colarb?(R.cleared=!0,R.b1.arbiters.inlined_try_remove(R),R.b2.arbiters.inlined_try_remove(R),null!=R.pair&&(R.pair.arb=null,R.pair=null),R.active=!1,this.f_arbiters.modified=!0,null==rb.zpp_pool?y=new rb:(y=rb.zpp_pool,rb.zpp_pool=y.next,y.next=null),null,y.intchange=!0,y.stat=c,la=ga=!0):(y=R.colarb,r=p!=y.s1,y.stat!=c&&(y.stat=c,y.sleeping||((c?this.c_arbiters_false:this.c_arbiters_true).remove(y),
ea.add(y))));var qa=h.id_InteractionType_COLLISION;if(ga||y.stamp!=this.stamp||f)if(y.stamp=this.stamp,J.contactCollide(p,q,y,r)){ga?(y.b1=a.body,y.ws1=a,y.b2=b.body,y.ws2=b,y.id=p.id,y.di=q.id,y.b1.arbiters.inlined_add(y),y.b2.arbiters.inlined_add(y),y.active=!0,y.present=0,y.cleared=!1,y.sleeping=!1,y.fresh=!1,y.presentable=!1,y.s1=a,y.s2=b,y.userdef_restitution||(y.restitution=-Infinity>=y.s1.material.elasticity||-Infinity>=y.s2.material.elasticity?0:Infinity<=y.s1.material.elasticity||Infinity<=
y.s2.material.elasticity?1:(y.s1.material.elasticity+y.s2.material.elasticity)/2,0>y.restitution&&(y.restitution=0),1<y.restitution&&(y.restitution=1)),y.userdef_dyn_fric||(y.dyn_fric=Math.sqrt(y.s1.material.dynamicFriction*y.s2.material.dynamicFriction)),y.userdef_stat_fric||(y.stat_fric=Math.sqrt(y.s1.material.staticFriction*y.s2.material.staticFriction)),y.userdef_rfric||(y.rfric=Math.sqrt(y.s1.material.rollingFriction*y.s2.material.rollingFriction)),ea.inlined_add(y),y.fresh=!la):y.fresh=y.up_stamp<
this.stamp-1||y.endGenerated==this.stamp&&f;y.up_stamp=y.stamp;if(y.fresh||0==(y.immState&h.id_ImmState_ALWAYS)){y.immState=h.id_ImmState_ACCEPT;var oa=!1;this.inlined_MRCA_chains(y.ws1.id>y.ws2.id?y.ws2:y.ws1,y.ws1.id>y.ws2.id?y.ws1:y.ws2);for(var ma=this.mrca1.head;null!=ma;){for(var na=ma.elt,pa=this.mrca2.head;null!=pa;){var ta=pa.elt,sa=na.cbSet,ya=ta.cbSet;if(!sa.manager.pair(sa,ya).empty_intersection()){var T=null,ua=null;this.prelisteners.inlined_clear();sa.manager.pair(sa,ya).forall(h.id_CbEvent_PRE,
function(a){return function(b){0!=(b.itype&qa)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),oa=oa||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(T=xa.get(na,ta),null==T&&(ua=sb.get(na,ta),this.add_callbackset(ua)),null==T||(T.COLLISIONstamp!=this.stamp||f)&&0==(T.COLLISIONstate&h.id_ImmState_ALWAYS)){null!=ua&&(T=ua);if(null!=T)for(var va=this.prelisteners.head;null!=va;)va.elt.itype==h.id_InteractionType_ANY?(T.COLLISIONstamp=this.stamp,T.SENSORstamp=this.stamp,T.FLUIDstamp=this.stamp):
T.COLLISIONstamp=this.stamp,va=va.next;var Ca=y.active;y.active=!0;y.cleanupContacts();this.precb.zpp_inner.pre_arbiter=y;this.precb.zpp_inner.set=T;for(var wa=this.prelisteners.head;null!=wa;){var za=wa.elt;this.precb.zpp_inner.listener=za;xa.int_callback(T,za,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=na!=this.precb.zpp_inner.int1;var Aa=za.handlerp(this.precb);if(null!=Aa){var Ja=y,Ka=Aa,Ha;null==h.PreFlag_ACCEPT&&(h.internal=!0,h.PreFlag_ACCEPT=new Pa,h.internal=!1);if(Ka==h.PreFlag_ACCEPT)Ha=
h.id_ImmState_ACCEPT|h.id_ImmState_ALWAYS;else{var Sa=Aa,La;null==h.PreFlag_ACCEPT_ONCE&&(h.internal=!0,h.PreFlag_ACCEPT_ONCE=new Pa,h.internal=!1);if(Sa==h.PreFlag_ACCEPT_ONCE)La=h.id_ImmState_ACCEPT;else{var Ta=Aa;null==h.PreFlag_IGNORE&&(h.internal=!0,h.PreFlag_IGNORE=new Pa,h.internal=!1);La=Ta==h.PreFlag_IGNORE?h.id_ImmState_IGNORE|h.id_ImmState_ALWAYS:h.id_ImmState_IGNORE}Ha=La}Ja.immState=Ha}wa=wa.next}y.active=Ca;if(null!=T)for(var Ia=this.prelisteners.head;null!=Ia;)Ia.elt.itype==h.id_InteractionType_ANY?
(T.COLLISIONstate=y.immState,T.SENSORstate=y.immState,T.FLUIDstate=y.immState):T.COLLISIONstate=y.immState,Ia=Ia.next}else null==T?0==(y.immState&h.id_ImmState_ALWAYS)&&(y.immState=h.id_ImmState_ACCEPT):y.immState=T.COLLISIONstate}pa=pa.next}ma=ma.next}if(oa&&0==(y.immState&h.id_ImmState_ALWAYS)){if(y.b1.type==h.id_BodyType_DYNAMIC){var Da=y.b1;Da.world||(Da.component.waket=this.stamp+(this.midstep?0:1),Da.type==h.id_BodyType_KINEMATIC&&(Da.kinematicDelaySleep=!0),Da.component.sleeping&&this.really_wake(Da,
!1))}if(y.b1.type==h.id_BodyType_DYNAMIC){var Ea=y.b2;Ea.world||(Ea.component.waket=this.stamp+(this.midstep?0:1),Ea.type==h.id_BodyType_KINEMATIC&&(Ea.kinematicDelaySleep=!0),Ea.component.sleeping&&this.really_wake(Ea,!1))}}}if(0!=(y.immState&h.id_ImmState_ACCEPT)){if(y.b1.type==h.id_BodyType_DYNAMIC&&y.b1.component.sleeping){var Fa=y.b1;Fa.world||(Fa.component.waket=this.stamp+(this.midstep?0:1),Fa.type==h.id_BodyType_KINEMATIC&&(Fa.kinematicDelaySleep=!0),Fa.component.sleeping&&this.really_wake(Fa,
!1))}if(y.b2.type==h.id_BodyType_DYNAMIC&&y.b2.component.sleeping){var Ga=y.b2;Ga.world||(Ga.component.waket=this.stamp+(this.midstep?0:1),Ga.type==h.id_BodyType_KINEMATIC&&(Ga.kinematicDelaySleep=!0),Ga.component.sleeping&&this.really_wake(Ga,!1))}}y.sleeping&&(y.sleeping=!1,ea.inlined_add(y));j=y}else if(ga){var Ba=y;Ba.userdef_dyn_fric=!1;Ba.userdef_stat_fric=!1;Ba.userdef_restitution=!1;Ba.userdef_rfric=!1;Ba.__ref_edge1=Ba.__ref_edge2=null;Ba.next=rb.zpp_pool;rb.zpp_pool=Ba;j=null}else j=y;else j=
y}else{var ka;if(null==e){for(var Xa=null,Na=(k.arbiters.length<l.arbiters.length?k:l).arbiters.head;null!=Na;){var Qa=Na.elt;if(Qa.id==p.id&&Qa.di==q.id){Xa=Qa;break}Na=Na.next}ka=Xa}else ka=e;var Ma=null==ka,I,bb=!1;Ma?(null==ub.zpp_pool?I=new ub:(I=ub.zpp_pool,ub.zpp_pool=I.next,I.next=null),null):null==ka.sensorarb?(ka.cleared=!0,ka.b1.arbiters.inlined_try_remove(ka),ka.b2.arbiters.inlined_try_remove(ka),null!=ka.pair&&(ka.pair.arb=null,ka.pair=null),ka.active=!1,this.f_arbiters.modified=!0,null==
ub.zpp_pool?I=new ub:(I=ub.zpp_pool,ub.zpp_pool=I.next,I.next=null),null,bb=Ma=I.intchange=!0):I=ka.sensorarb;var eb=h.id_InteractionType_SENSOR;if(Ma||I.stamp!=this.stamp||f)if(I.stamp=this.stamp,J.testCollide(p,q)){Ma?(I.b1=a.body,I.ws1=a,I.b2=b.body,I.ws2=b,I.id=p.id,I.di=q.id,I.b1.arbiters.inlined_add(I),I.b2.arbiters.inlined_add(I),I.active=!0,I.present=0,I.cleared=!1,I.sleeping=!1,I.fresh=!1,I.presentable=!1,this.s_arbiters.inlined_add(I),I.fresh=!bb):I.fresh=I.up_stamp<this.stamp-1||I.endGenerated==
this.stamp&&f;I.up_stamp=I.stamp;if(I.fresh||0==(I.immState&h.id_ImmState_ALWAYS)){I.immState=h.id_ImmState_ACCEPT;var Va=!1;this.inlined_MRCA_chains(I.ws1.id>I.ws2.id?I.ws2:I.ws1,I.ws1.id>I.ws2.id?I.ws1:I.ws2);for(var Oa=this.mrca1.head;null!=Oa;){for(var Ra=Oa.elt,Ua=this.mrca2.head;null!=Ua;){var ab=Ua.elt,Wa=Ra.cbSet,gb=ab.cbSet;if(!Wa.manager.pair(Wa,gb).empty_intersection()){var hb=null,Ya=null;this.prelisteners.inlined_clear();Wa.manager.pair(Wa,gb).forall(h.id_CbEvent_PRE,function(a){return function(b){0!=
(b.itype&eb)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),Va=Va||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(hb=xa.get(Ra,ab),null==hb&&(Ya=sb.get(Ra,ab),this.add_callbackset(Ya)),null==hb||(hb.SENSORstamp!=this.stamp||f)&&0==(hb.SENSORstate&h.id_ImmState_ALWAYS)){null!=Ya&&(hb=Ya);if(null!=hb)for(var Za=this.prelisteners.head;null!=Za;)Za.elt.itype==h.id_InteractionType_ANY?(hb.COLLISIONstamp=this.stamp,hb.SENSORstamp=this.stamp,hb.FLUIDstamp=this.stamp):hb.SENSORstamp=this.stamp,Za=Za.next;
var jb=I.active;I.active=!0;this.precb.zpp_inner.pre_arbiter=I;this.precb.zpp_inner.set=hb;for(var $a=this.prelisteners.head;null!=$a;){var fb=$a.elt;this.precb.zpp_inner.listener=fb;xa.int_callback(hb,fb,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=Ra!=this.precb.zpp_inner.int1;var cb=fb.handlerp(this.precb);if(null!=cb){var mb=I,nb=cb,ib;null==h.PreFlag_ACCEPT&&(h.internal=!0,h.PreFlag_ACCEPT=new Pa,h.internal=!1);if(nb==h.PreFlag_ACCEPT)ib=h.id_ImmState_ACCEPT|h.id_ImmState_ALWAYS;else{var ob=
cb,kb;null==h.PreFlag_ACCEPT_ONCE&&(h.internal=!0,h.PreFlag_ACCEPT_ONCE=new Pa,h.internal=!1);if(ob==h.PreFlag_ACCEPT_ONCE)kb=h.id_ImmState_ACCEPT;else{var pb=cb;null==h.PreFlag_IGNORE&&(h.internal=!0,h.PreFlag_IGNORE=new Pa,h.internal=!1);kb=pb==h.PreFlag_IGNORE?h.id_ImmState_IGNORE|h.id_ImmState_ALWAYS:h.id_ImmState_IGNORE}ib=kb}mb.immState=ib}$a=$a.next}I.active=jb;if(null!=hb)for(var qb=this.prelisteners.head;null!=qb;)qb.elt.itype==h.id_InteractionType_ANY?(hb.COLLISIONstate=I.immState,hb.SENSORstate=
I.immState,hb.FLUIDstate=I.immState):hb.SENSORstate=I.immState,qb=qb.next}else null==hb?0==(I.immState&h.id_ImmState_ALWAYS)&&(I.immState=h.id_ImmState_ACCEPT):I.immState=hb.SENSORstate}Ua=Ua.next}Oa=Oa.next}if(Va&&0==(I.immState&h.id_ImmState_ALWAYS)){if(I.b1.type!=h.id_BodyType_STATIC){var db=I.b1;db.world||(db.component.waket=this.stamp+(this.midstep?0:1),db.type==h.id_BodyType_KINEMATIC&&(db.kinematicDelaySleep=!0),db.component.sleeping&&this.really_wake(db,!1))}if(I.b2.type!=h.id_BodyType_STATIC){var lb=
I.b2;lb.world||(lb.component.waket=this.stamp+(this.midstep?0:1),lb.type==h.id_BodyType_KINEMATIC&&(lb.kinematicDelaySleep=!0),lb.component.sleeping&&this.really_wake(lb,!1))}}}I.sleeping&&(I.sleeping=!1,this.s_arbiters.inlined_add(I));j=I}else if(Ma){var tb=I;tb.next=ub.zpp_pool;ub.zpp_pool=tb;j=null}else j=I;else j=I}}return j},MRCA_chains:function(a,b){this.inlined_MRCA_chains(a,b)},inlined_MRCA_chains:function(a,b){this.mrca1.inlined_clear();this.mrca2.inlined_clear();null!=a.cbSet&&this.mrca1.inlined_add(a);
null!=a.body.cbSet&&this.mrca1.inlined_add(a.body);null!=b.cbSet&&this.mrca2.inlined_add(b);null!=b.body.cbSet&&this.mrca2.inlined_add(b.body);for(var c=a.body.compound,e=b.body.compound;c!=e;)(null==c?0:c.depth)<(null==e?0:e.depth)?(null!=e.cbSet&&this.mrca2.inlined_add(e),e=e.compound):(null!=c.cbSet&&this.mrca1.inlined_add(c),c=c.compound)},__class__:Zi};var Cd=function(){this.next=this.prev=this.shape=this.aabb=null};j["zpp_nape.space.ZPP_SweepData"]=Cd;Cd.__name__=!0;Cd.prototype={__class__:Cd};
var Th=function(a){this.list=null;Sd.call(this);this.space=a;this.is_sweep=!0;this.sweep=this};j["zpp_nape.space.ZPP_SweepPhase"]=Th;Th.__name__=!0;Th.__super__=Sd;Th.prototype=z(Sd.prototype,{__insert:function(a){var b;null==Cd.zpp_pool?b=new Cd:(b=Cd.zpp_pool,Cd.zpp_pool=b.next,b.next=null);null;a.sweep=b;b.shape=a;b.aabb=a.aabb;b.next=this.list;null!=this.list&&(this.list.prev=b);this.list=b},__remove:function(a){var b=a.sweep;null==b.prev?this.list=b.next:b.prev.next=b.next;null!=b.next&&(b.next.prev=
b.prev);a.sweep=null;b.prev=null;b.shape=null;b.aabb=null;b.next=Cd.zpp_pool;Cd.zpp_pool=b},sync_broadphase_fast:function(){for(var a=this.list.next;null!=a;){var b=a.next,c=a.prev;if(!(a.aabb.minx>c.aabb.minx)){for(;null!=c.prev&&c.prev.aabb.minx>a.aabb.minx;)c=c.prev;var e=a.prev;e.next=a.next;null!=a.next&&(a.next.prev=e);null==c.prev?(a.prev=null,this.list=a,a.next=c,c.prev=a):(a.prev=c.prev,c.prev=a,a.prev.next=a,a.next=c)}a=b}},broadphase:function(a,b){if(null!=this.list){this.sync_broadphase_fast();
for(var c=this.list;null!=c;){for(var e=c.next,f=c.shape,g=f.body,j=c.aabb.maxx;null!=e&&!(e.aabb.minx>j);){var k=e.shape,l=k.body;if(l!=g&&!(g.type==h.id_BodyType_STATIC&&l.type==h.id_BodyType_STATIC)&&(!g.component.sleeping||!l.component.sleeping))f.aabb.intersectY(k.aabb)&&(b?a.narrowPhase(f,k,g.type!=h.id_BodyType_DYNAMIC||l.type!=h.id_BodyType_DYNAMIC,null,!1):a.continuousEvent(f,k,g.type!=h.id_BodyType_DYNAMIC||l.type!=h.id_BodyType_DYNAMIC,null,!1));e=e.next}c=c.next}}},__class__:Th});var Sj=
function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_CallbackSet"]=Sj;Sj.__name__=!0;Sj.prototype={inlined_add:function(a){var b;null==fe.zpp_pool?b=new fe:(b=fe.zpp_pool,fe.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,
c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=fe.zpp_pool;fe.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Sj};var se=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_Shape"]=se;se.__name__=!0;se.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==qc.zpp_pool?b=new qc:
(b=qc.zpp_pool,qc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==qc.zpp_pool?c=new qc:(c=qc.zpp_pool,qc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=
null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=qc.zpp_pool;qc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:se};var te=function(){this.length=0;this.modified=
this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_Body"]=te;te.__name__=!0;te.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==wb.zpp_pool?b=new wb:(b=wb.zpp_pool,wb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==wb.zpp_pool?c=new wb:(c=wb.zpp_pool,wb.zpp_pool=c.next,c.next=null);null;c.elt=
b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=wb.zpp_pool;wb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=
c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=wb.zpp_pool;wb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:te};var Uh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=
null};j["zpp_nape.util.ZNPList_ZPP_Compound"]=Uh;Uh.__name__=!0;Uh.prototype={remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Xh.zpp_pool;Xh.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Uh};var Jg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_Arbiter"]=Jg;Jg.__name__=!0;Jg.prototype={inlined_add:function(a){var b;null==Jb.zpp_pool?b=new Jb:(b=Jb.zpp_pool,Jb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.head;this.head=a.next;a.elt=null;a.next=Jb.zpp_pool;Jb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,
this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Jb.zpp_pool;Jb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},inlined_has:function(a){var b;b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=!0;break}c=c.next}return b},__class__:Jg};var Pj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_CbSetPair"]=Pj;Pj.__name__=!0;Pj.prototype={add:function(a){return this.inlined_add(a)},
inlined_add:function(a){var b;null==$c.zpp_pool?b=new $c:(b=$c.zpp_pool,$c.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=$c.zpp_pool;$c.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();
return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=$c.zpp_pool;$c.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Pj};var Uj=function(){this.length=
0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_AABBPair"]=Uj;Uj.__name__=!0;Uj.prototype={inlined_add:function(a){var b;null==Wb.zpp_pool?b=new Wb:(b=Wb.zpp_pool,Wb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Wb.zpp_pool;Wb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},
pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=
Wb.zpp_pool;Wb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Uj};var Vj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_Edge"]=Vj;Vj.__name__=!0;Vj.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==xb.zpp_pool?b=new xb:(b=xb.zpp_pool,xb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,
b)},inlined_insert:function(a,b){var c;null==xb.zpp_pool?c=new xb:(c=xb.zpp_pool,xb.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=xb.zpp_pool;xb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=xb.zpp_pool;xb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.head,b=null;null!=a;){var c=a.next;a.next=b;b=this.head=a;a=c}this.pushmod=this.modified=
!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Vj};var Wj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_Component"]=Wj;Wj.__name__=!0;Wj.prototype={inlined_add:function(a){var b;null==ad.zpp_pool?b=new ad:(b=ad.zpp_pool,ad.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;
this.head=a.next;a.elt=null;a.next=ad.zpp_pool;ad.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},__class__:Wj};var Qk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_InteractionGroup"]=Qk;Qk.__name__=!0;Qk.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},
__class__:Qk};var Zj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_FluidArbiter"]=Zj;Zj.__name__=!0;Zj.prototype={inlined_add:function(a){var b;null==ge.zpp_pool?b=new ge:(b=ge.zpp_pool,ge.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&
(this.pushmod=!0));a=b;a.elt=null;a.next=ge.zpp_pool;ge.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Zj};var $j=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_SensorArbiter"]=$j;$j.__name__=!0;$j.prototype={inlined_add:function(a){var b;null==bd.zpp_pool?b=new bd:(b=bd.zpp_pool,bd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_erase:function(a){var b,
c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=bd.zpp_pool;bd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:$j};var Vh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_ColArbiter"]=Vh;Vh.__name__=!0;Vh.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Dd.zpp_pool?b=new Dd:
(b=Dd.zpp_pool,Dd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=
Dd.zpp_pool;Dd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Vh};var Wh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_Listener"]=Wh;Wh.__name__=!0;Wh.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Ic.zpp_pool?b=new Ic:(b=Ic.zpp_pool,Ic.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,
b)},inlined_insert:function(a,b){var c;null==Ic.zpp_pool?c=new Ic:(c=Ic.zpp_pool,Ic.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,
null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Ic.zpp_pool;Ic.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Wh};var Yj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_ToiEvent"]=Yj;Yj.__name__=!0;Yj.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;
null==Jc.zpp_pool?b=new Jc:(b=Jc.zpp_pool,Jc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Jc.zpp_pool;Jc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},
inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Jc.zpp_pool;Jc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Yj};var Rk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ConvexResult"]=Rk;Rk.__name__=!0;Rk.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;
return b},__class__:Rk};var Sk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_ZPP_GeomPoly"]=Sk;Sk.__name__=!0;Sk.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Sk};var Tk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};j["zpp_nape.util.ZNPList_RayResult"]=Tk;Tk.__name__=!0;Tk.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Tk};
var Da=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_CbType"]=Da;Da.__name__=!0;Da.prototype={__class__:Da};var fe=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_CallbackSet"]=fe;fe.__name__=!0;fe.prototype={__class__:fe};var qc=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_Shape"]=qc;qc.__name__=!0;qc.prototype={__class__:qc};var wb=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_Body"]=wb;wb.__name__=!0;wb.prototype={__class__:wb};
var ic=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_Constraint"]=ic;ic.__name__=!0;ic.prototype={__class__:ic};var Xh=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_Compound"]=Xh;Xh.__name__=!0;Xh.prototype={__class__:Xh};var Sa=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_InteractionListener"]=Sa;Sa.__name__=!0;Sa.prototype={__class__:Sa};var jc=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_CbSet"]=jc;jc.__name__=!0;jc.prototype=
{__class__:jc};var kd=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_Interactor"]=kd;kd.__name__=!0;kd.prototype={__class__:kd};var Bc=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_BodyListener"]=Bc;Bc.__name__=!0;Bc.prototype={__class__:Bc};var Jb=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_Arbiter"]=Jb;Jb.__name__=!0;Jb.prototype={__class__:Jb};var jd=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"]=jd;
jd.__name__=!0;jd.prototype={__class__:jd};var $c=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_CbSetPair"]=$c;$c.__name__=!0;$c.prototype={__class__:$c};var Wb=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_AABBPair"]=Wb;Wb.__name__=!0;Wb.prototype={__class__:Wb};var xb=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_Edge"]=xb;xb.__name__=!0;xb.prototype={__class__:xb};var Hb=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_Vec2"]=
Hb;Hb.__name__=!0;Hb.prototype={__class__:Hb};var ad=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_Component"]=ad;ad.__name__=!0;ad.prototype={__class__:ad};var Uk=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"]=Uk;Uk.__name__=!0;Uk.prototype={__class__:Uk};var ge=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"]=ge;ge.__name__=!0;ge.prototype={__class__:ge};var bd=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"]=
bd;bd.__name__=!0;bd.prototype={__class__:bd};var Dd=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_ColArbiter"]=Dd;Dd.__name__=!0;Dd.prototype={__class__:Dd};var Ic=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_Listener"]=Ic;Ic.__name__=!0;Ic.prototype={__class__:Ic};var Jc=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_ToiEvent"]=Jc;Jc.__name__=!0;Jc.prototype={__class__:Jc};var Vk=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ConvexResult"]=
Vk;Vk.__name__=!0;Vk.prototype={__class__:Vk};var Wk=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_ZPP_GeomPoly"]=Wk;Wk.__name__=!0;Wk.prototype={__class__:Wk};var Xk=function(){this.next=this.elt=null};j["zpp_nape.util.ZNPNode_RayResult"]=Xk;Xk.__name__=!0;Xk.prototype={__class__:Xk};var jf=function(){this.at_index=0;this.at_ite=null;this.zip_length=!1;this._length=0;this.inner=null;Xd.call(this);this.at_ite=null;this.at_index=0;this.zip_length=!0;this._length=0};j["zpp_nape.util.ZPP_MixVec2List"]=
jf;jf.__name__=!0;jf.get=function(a,b){null==b&&(b=!1);var c=new jf;c.inner=a;c.zpp_inner.immutable=b;return c};jf.__super__=Xd;jf.prototype=z(Xd.prototype,{zpp_gl:function(){this.zpp_vm();if(this.zip_length){this._length=0;for(var a=this.inner.next;null!=a;)this._length++,a=a.next;this.zip_length=!1}return this._length},zpp_vm:function(){this.zpp_inner.validate();this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=
this.zpp_gl()-1-a);if(a<this.at_index||null==this.at_ite){this.at_index=0;for(this.at_ite=this.inner.next;;)break}for(;this.at_index!=a;){this.at_index++;for(this.at_ite=this.at_ite.next;;)break}return this.at_ite.wrapper()},push:function(a){this.zpp_inner.modify_test();this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.inner.add(a.zpp_inner):this.inner.insert(this.inner.iterator_at(this.zpp_gl()-1),a.zpp_inner),this.zpp_inner.invalidate(),
null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},__class__:jf});var rc=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new de;this._invalidated=!0};j["zpp_nape.util.ZPP_ConstraintList"]=rc;rc.__name__=!0;rc.get=function(a,b){null==b&&(b=!1);var c=new Pi;c.zpp_inner.inner=
a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};rc.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:rc};var yc=
function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new te;this._invalidated=!0};j["zpp_nape.util.ZPP_BodyList"]=yc;yc.__name__=!0;yc.get=function(a,b){null==b&&(b=!1);var c=new Ui;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};yc.prototype=
{valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:yc};var Of=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=
0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};j["zpp_nape.util.ZPP_InteractorList"]=Of;Of.__name__=!0;Of.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Of};var Yd=function(){this.user_length=0;this.zip_length=!1;
this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Uh;this._invalidated=!0};j["zpp_nape.util.ZPP_CompoundList"]=Yd;Yd.__name__=!0;Yd.get=function(a,b){null==b&&(b=!1);var c=new Wi;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Yd.prototype={valmod:function(){this.validate();this.inner.modified&&
(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Yd};var Vd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=
this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Wh;this._invalidated=!0};j["zpp_nape.util.ZPP_ListenerList"]=Vd;Vd.__name__=!0;Vd.get=function(a,b){null==b&&(b=!1);var c=new Ni;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Vd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,
this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Vd};var Rb=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=
this._invalidated=!1;this.outer=this.inner=null;this.inner=new Gc;this._invalidated=!0};j["zpp_nape.util.ZPP_CbTypeList"]=Rb;Rb.__name__=!0;Rb.get=function(a,b){null==b&&(b=!1);var c=new Ff;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Rb.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&
(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Rb};var Gd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new hf;this._invalidated=!0};j["zpp_nape.util.ZPP_Vec2List"]=
Gd;Gd.__name__=!0;Gd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Gd};var Kf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=
this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};j["zpp_nape.util.ZPP_GeomPolyList"]=Kf;Kf.__name__=!0;Kf.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Kf};var Le=function(){this.user_length=
0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};j["zpp_nape.util.ZPP_RayResultList"]=Le;Le.__name__=!0;Le.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Le};
var Ke=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};j["zpp_nape.util.ZPP_ConvexResultList"]=Ke;Ke.__name__=!0;Ke.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=
this._validate&&this._validate())},__class__:Ke};var Pe=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};j["zpp_nape.util.ZPP_EdgeList"]=Pe;Pe.__name__=!0;Pe.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&
(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Pe};var Id=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new se;this._invalidated=!0};j["zpp_nape.util.ZPP_ShapeList"]=Id;Id.__name__=!0;Id.get=function(a,b){null==b&&(b=!1);var c=new Yi;c.zpp_inner.inner=
a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Id.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Id};var Jf=
function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};j["zpp_nape.util.ZPP_InteractionGroupList"]=Jf;Jf.__name__=!0;Jf.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&
this._validate())},__class__:Jf};var wd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Jg;this._invalidated=!0};j["zpp_nape.util.ZPP_ArbiterList"]=wd;wd.__name__=!0;wd.get=function(a,b){null==b&&(b=!1);var c=new Qi;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};wd.prototype={valmod:function(){this.validate();
this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:wd};var Je=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};j["zpp_nape.util.ZPP_ContactList"]=Je;Je.__name__=!0;Je.prototype=
{valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Je};var Ig=function(){};j["zpp_nape.util.ZPP_Math"]=Ig;Ig.__name__=!0;Ig.sqr=function(a){return a*a};var Lf=function(){};j["zpp_nape.util.ZPP_PubPool"]=Lf;Lf.__name__=!0;var za=function(){this.colour=0;this.lt=
this.swapped=this.data=this.prev=this.next=this.parent=null};j["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"]=za;za.__name__=!0;za.prototype={clear_with:function(a){if(null!=this.parent){for(var b=this.parent;null!=b;)b=null!=b.prev?b.prev:null!=b.next?b.next:this.clear_node(b,a);this.parent=null}},clear_node:function(a,b){b(a.data);var c=a.parent;null!=c&&(a==c.prev?c.prev=null:c.next=null,a.parent=null);a.data=null;a.lt=null;a.swapped=null;a.next=za.zpp_pool;za.zpp_pool=a;return c},__fix_dbl_red:function(a){for(;;){var b=
a.parent,c=b.parent;if(null==c){b.colour=1;break}var e,f,g,h,j,k,l;b==c.prev?(g=c,l=c.next,a==b.prev?(e=a,f=b,h=a.prev,j=a.next,k=b.next):(e=b,f=a,h=b.prev,j=a.prev,k=a.next)):(e=c,h=c.prev,a==b.prev?(f=a,g=b,j=a.prev,k=a.next,l=b.next):(f=b,g=a,j=b.prev,k=a.prev,l=a.next));a=c.parent;null==a?this.parent=f:a.prev==c?a.prev=f:a.next=f;null!=f&&(f.parent=a);e.prev=h;null!=h&&(h.parent=e);e.next=j;null!=j&&(j.parent=e);f.prev=e;null!=e&&(e.parent=f);f.next=g;null!=g&&(g.parent=f);g.prev=k;null!=k&&(k.parent=
g);g.next=l;null!=l&&(l.parent=g);f.colour=c.colour-1;e.colour=1;g.colour=1;if(f==this.parent)this.parent.colour=1;else if(0==f.colour&&0==f.parent.colour){a=f;continue}break}},try_insert:function(a){var b=null,c=null;if(null==this.parent)null==za.zpp_pool?b=new za:(b=za.zpp_pool,za.zpp_pool=b.next,b.next=null),null,b.data=a,this.parent=b;else for(c=this.parent;;)if(this.lt(a,c.data))if(null==c.prev){null==za.zpp_pool?b=new za:(b=za.zpp_pool,za.zpp_pool=b.next,b.next=null);null;b.data=a;c.prev=b;
b.parent=c;break}else c=c.prev;else if(this.lt(c.data,a))if(null==c.next){null==za.zpp_pool?b=new za:(b=za.zpp_pool,za.zpp_pool=b.next,b.next=null);null;b.data=a;c.next=b;b.parent=c;break}else c=c.next;else break;if(null==b)return c;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:za};var pc=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};j["zpp_nape.util.ZPP_Set_ZPP_CbSet"]=pc;pc.__name__=!0;pc.prototype=
{empty:function(){return null==this.parent},find:function(a){for(var b=this.parent;null!=b&&b.data!=a;)b=this.lt(a,b.data)?b.prev:b.next;return b},find_weak:function(a){for(var b=this.parent;null!=b;)if(this.lt(a,b.data))b=b.prev;else if(this.lt(b.data,a))b=b.next;else break;return b},remove:function(a){this.remove_node(this.find(a))},remove_node:function(a){if(null!=a.next&&null!=a.prev){for(var b=a.next;null!=b.prev;)b=b.prev;var c=a.data;a.data=b.data;b.data=c;null!=this.swapped&&this.swapped(a.data,
b.data);a=b}b=null==a.prev?a.next:a.prev;if(1==a.colour)if(null!=a.prev||null!=a.next)b.colour=1;else if(null!=a.parent)for(c=a.parent;;){c.colour++;c.prev.colour--;c.next.colour--;var e=c.prev;if(-1==e.colour){this.__fix_neg_red(e);break}else if(0==e.colour){if(null!=e.prev&&0==e.prev.colour){this.__fix_dbl_red(e.prev);break}if(null!=e.next&&0==e.next.colour){this.__fix_dbl_red(e.next);break}}e=c.next;if(-1==e.colour){this.__fix_neg_red(e);break}else if(0==e.colour){if(null!=e.prev&&0==e.prev.colour){this.__fix_dbl_red(e.prev);
break}if(null!=e.next&&0==e.next.colour){this.__fix_dbl_red(e.next);break}}if(2==c.colour)if(null==c.parent)c.colour=1;else{c=c.parent;continue}break}c=a.parent;null==c?this.parent=b:c.prev==a?c.prev=b:c.next=b;null!=b&&(b.parent=c);a.parent=a.prev=a.next=null;a.data=null;a.lt=null;a.swapped=null;a.next=pc.zpp_pool;pc.zpp_pool=a},__fix_neg_red:function(a){var b=a.parent;if(b.prev==a){var c=a.prev,e=a.next,f=e.prev,g=e.next;c.colour=0;a.colour=b.colour=1;a.next=f;null!=f&&(f.parent=a);a=b.data;b.data=
e.data;e.data=a;null!=this.swapped&&this.swapped(b.data,e.data);e.prev=g;null!=g&&(g.parent=e);e.next=b.next;null!=b.next&&(b.next.parent=e);b.next=e}else c=a.next,e=a.prev,f=e.next,g=e.prev,c.colour=0,a.colour=b.colour=1,a.prev=f,null!=f&&(f.parent=a),a=b.data,b.data=e.data,e.data=a,null!=this.swapped&&this.swapped(b.data,e.data),e.next=g,null!=g&&(g.parent=e),e.prev=b.prev,null!=b.prev&&(b.prev.parent=e),b.prev=e;null!=e&&(e.parent=b);b=c;null!=b.prev&&0==b.prev.colour?this.__fix_dbl_red(b.prev):
null!=b.next&&0==b.next.colour&&this.__fix_dbl_red(b.next)},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var e,f,g,h,j,k,l;b==c.prev?(g=c,l=c.next,a==b.prev?(e=a,f=b,h=a.prev,j=a.next,k=b.next):(e=b,f=a,h=b.prev,j=a.prev,k=a.next)):(e=c,h=c.prev,a==b.prev?(f=a,g=b,j=a.prev,k=a.next,l=b.next):(f=b,g=a,j=b.prev,k=a.prev,l=a.next));a=c.parent;null==a?this.parent=f:a.prev==c?a.prev=f:a.next=f;null!=f&&(f.parent=a);e.prev=h;null!=h&&(h.parent=e);e.next=j;null!=
j&&(j.parent=e);f.prev=e;null!=e&&(e.parent=f);f.next=g;null!=g&&(g.parent=f);g.prev=k;null!=k&&(k.parent=g);g.next=l;null!=l&&(l.parent=g);f.colour=c.colour-1;e.colour=1;g.colour=1;if(f==this.parent)this.parent.colour=1;else if(0==f.colour&&0==f.parent.colour){a=f;continue}break}},insert:function(a){var b;null==pc.zpp_pool?b=new pc:(b=pc.zpp_pool,pc.zpp_pool=b.next,b.next=null);null;b.data=a;if(null==this.parent)this.parent=b;else for(a=this.parent;;)if(this.lt(b.data,a.data))if(null==a.prev){a.prev=
b;b.parent=a;break}else a=a.prev;else if(null==a.next){a.next=b;b.parent=a;break}else a=a.next;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:pc};var rl=0;j.Math=Math;String.prototype.__class__=j.String=String;String.__name__=!0;j.Array=Array;Array.__name__=!0;Date.prototype.__class__=j.Date=Date;Date.__name__=["Date"];var sl=j.Int={__name__:["Int"]},tl=j.Dynamic={__name__:["Dynamic"]},Zk=j.Float=Number;Zk.__name__=["Float"];var $k=j.Bool=Boolean;
$k.__ename__=["Bool"];var ul=j.Class={__name__:["Class"]},vl={},Ob={},jk=Function("return typeof ArrayBuffer != 'undefined' ? ArrayBuffer : null")()||fd;null==jk.prototype.slice&&(jk.prototype.slice=fd.sliceImpl);Function("return typeof DataView != 'undefined' ? DataView : null")();var Ci=Function("return typeof Uint8Array != 'undefined' ? Uint8Array : null")()||sd._new;q.Element=0;q.PCData=1;q.CData=2;q.Comment=3;q.DocType=4;q.ProcessingInstruction=5;q.Document=6;Xb.instance=new Xb;Fa.DISPATCHING_SENTINEL=
new ye(null,null);S.root=new Kb;S.uncaughtError=new ma;S.hidden=new kb(!1);S.volume=new bb(1);S._platform=Xb.instance;S._calledInit=!1;ea.logger=new Og(S._platform.createLogHandler("flambe"));nd.__meta__={obj:{assets:[{"dummy.txt":[]}]}};nd._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||ea.logger.warn("This browser does not support cross-domain asset loading, any Manifest.remoteBase setting will be ignored.",
null);return a}();P._scratchPoint=new Mc;ab._sharedEvent=new hi;qb._sharedEvent=new ii;ua._sharedEvent=new ji;he.CANVAS_TEXTURES=(new mb("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);oa._mediaRefCount=0;oa._detectBlobSupport=!0;W.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];W.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new mb("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);Z._detectSupport=!0;Nb._scratchMatrix=new Lb;Ca.count=0;ed.i64tmp=new yi(0,0);N.blanks=new mb("^[ \r\n\t]*$",
"");md.escapes=function(){var a=new E;null!=Ob.lt?a.setReserved("lt","<"):a.h.lt="<";null!=Ob.gt?a.setReserved("gt",">"):a.h.gt=">";null!=Ob.amp?a.setReserved("amp","&"):a.h.amp="&";null!=Ob.quot?a.setReserved("quot",'"'):a.h.quot='"';null!=Ob.apos?a.setReserved("apos","'"):a.h.apos="'";return a}(this);A.__toStr={}.toString;sd.BYTES_PER_ELEMENT=1;t.epsilon=1.0E-8;t.fluidAngularDragFriction=2.5;t.fluidAngularDrag=100;t.fluidVacuumDrag=0.5;t.fluidLinearDrag=0.5;t.collisionSlop=0.2;t.collisionSlopCCD=
0.5;t.distanceThresholdCCD=0.05;t.staticCCDLinearThreshold=0.05;t.staticCCDAngularThreshold=0.005;t.bulletCCDLinearThreshold=0.125;t.bulletCCDAngularThreshold=0.0125;t.dynamicSweepLinearThreshold=17;t.dynamicSweepAngularThreshold=0.6;t.angularCCDSlipScale=0.75;t.arbiterExpirationDelay=6;t.staticFrictionThreshold=2;t.elasticThreshold=20;t.sleepDelay=60;t.linearSleepThreshold=0.2;t.angularSleepThreshold=0.4;t.contactBiasCoef=0.3;t.contactStaticBiasCoef=0.6;t.contactContinuousBiasCoef=0.4;t.contactContinuousStaticBiasCoef=
0.5;t.illConditionedThreshold=2E8;w.logger=new Og(S._platform.createLogHandler("tools.spark.framework"));sa.ANY_SHAPE=new vd;sa.ANY_BODY=new vd;sa.ANY_COMPOUND=new vd;sa.ANY_CONSTRAINT=new vd;cb._Interactor=0;cb._CbType=0;cb._CbSet=0;cb._Listener=0;Ub.BIPED_FEET=new vd;G.blanks=new mb("^[ \r\n\t]*$","");h.internal=!1;h.id_ImmState_ACCEPT=1;h.id_ImmState_IGNORE=2;h.id_ImmState_ALWAYS=4;h.id_GravMassMode_DEFAULT=0;h.id_GravMassMode_FIXED=1;h.id_GravMassMode_SCALED=2;h.id_InertiaMode_DEFAULT=0;h.id_MassMode_DEFAULT=
0;h.id_BodyType_STATIC=1;h.id_BodyType_DYNAMIC=2;h.id_BodyType_KINEMATIC=3;h.id_ListenerType_BODY=0;h.id_ListenerType_CONSTRAINT=1;h.id_PreFlag_ACCEPT=1;h.id_ListenerType_INTERACTION=2;h.id_ListenerType_PRE=3;h.id_CbEvent_BEGIN=0;h.id_CbEvent_ONGOING=6;h.id_InteractionType_COLLISION=1;h.id_CbEvent_END=1;h.id_InteractionType_SENSOR=2;h.id_CbEvent_WAKE=2;h.id_InteractionType_FLUID=4;h.id_CbEvent_SLEEP=3;h.id_InteractionType_ANY=7;h.id_CbEvent_BREAK=4;h.id_CbEvent_PRE=5;h.id_ShapeType_CIRCLE=0;h.id_ShapeType_POLYGON=
1;Ja.UCbSet=new zd;Ja.VCbSet=new zd;Ja.WCbSet=new zd;Ja.UCbType=new Gc;Ja.VCbType=new Gc;Ja.WCbType=new Gc;da.internal=!1;da.COL=1;da.FLUID=4;da.SENSOR=2;ob.internal=!1;J.flowpoly=new hf;J.flowsegs=new hf;var pl;null==h.BodyType_STATIC&&(h.internal=!0,h.BodyType_STATIC=new Ya,h.internal=!1);pl=h.BodyType_STATIC;var ql;null==h.BodyType_DYNAMIC&&(h.internal=!0,h.BodyType_DYNAMIC=new Ya,h.internal=!1);ql=h.BodyType_DYNAMIC;null==h.BodyType_KINEMATIC&&(h.internal=!0,h.BodyType_KINEMATIC=new Ya,h.internal=
!1);Rc.types=[null,pl,ql,h.BodyType_KINEMATIC];ca.WAKE=1;ca.PROPS=2;ca.ANGDRAG=4;ca.ARBITERS=8;T.internal=!1;Ea.tmpaabb=new ka;rc.internal=!1;yc.internal=!1;Of.internal=!1;Yd.internal=!1;Vd.internal=!1;Rb.internal=!1;Gd.internal=!1;Kf.internal=!1;Le.internal=!1;Ke.internal=!1;Pe.internal=!1;Id.internal=!1;Jf.internal=!1;wd.internal=!1;Je.internal=!1;Ld.main()})();
