/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function t(a,b){function d(){}d.prototype=a;var l=new d,c;for(c in b)l[c]=b[c];b.toString!==Object.prototype.toString&&(l.toString=b.toString);return l}function xj(a){return a instanceof Array?function(){return C.iter(a)}:"function"==typeof a.iterator?x(a,a.iterator):a.iterator}function x(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Wk++);var d;null==a.hx__closures__?a.hx__closures__={}:d=a.hx__closures__[b.__id__];null==d&&(d=function(){return d.method.apply(d.scope,
arguments)},d.scope=a,d.method=b,a.hx__closures__[b.__id__]=d);return d}var h={},g=function(){return v.__string_rec(this,"")},bc=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};h.EReg=bc;bc.__name__=!0;bc.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},__class__:bc};var C=function(){};h.HxOverrides=C;C.__name__=!0;C.cca=function(a,b){var d=a.charCodeAt(b);return d!=d?void 0:d};C.substr=function(a,b,d){if(null!=b&&
0!=b&&null!=d&&0>d)return"";null==d&&(d=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>d&&(d=a.length+d-b);return a.substr(b,d)};C.remove=function(a,b){var d=a.indexOf(b);if(-1==d)return!1;a.splice(d,1);return!0};C.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Ch=function(a,b){this.min=a;this.max=b};h.IntIterator=Ch;Ch.__name__=!0;Ch.prototype={__class__:Ch};var lg=function(){};h.Lambda=lg;lg.__name__=!0;lg.array=
function(a){for(var b=[],a=xj(a)();a.hasNext();){var d=a.next();b.push(d)}return b};lg.count=function(a,b){var d=0;if(null==b)for(var l=xj(a)();l.hasNext();)l.next(),d++;else for(l=xj(a)();l.hasNext();){var c=l.next();b(c)&&d++}return d};var Dh=function(){this.length=0};h.List=Dh;Dh.__name__=!0;Dh.prototype={add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;
var a=this.h[0];this.h=this.h[1];return a}}},__class__:Dh};var Xd=function(){};h.IMap=Xd;Xd.__name__=!0;Xd.prototype={__class__:Xd};Math.__name__=!0;var pa=function(){};h.Reflect=pa;pa.__name__=!0;pa.field=function(a,b){try{return a[b]}catch(d){return null}};pa.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};pa.compare=function(a,b){return a==b?0:a>b?1:-1};pa.isEnumValue=function(a){return null!=a&&null!=a.__enum__};pa.makeVarArgs=function(a){return function(){var b=
Array.prototype.slice.call(arguments);return a(b)}};var o=function(){};h.Std=o;o.__name__=!0;o.is=function(a,b){return v.__instanceof(a,b)};o.instance=function(a,b){return a instanceof b?a:null};o.string=function(a){return v.__string_rec(a,"")};o["int"]=function(a){return a|0};o.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==C.cca(a,1)||88==C.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};o.parseFloat=function(a){return parseFloat(a)};o.random=function(a){return 0>=a?0:Math.floor(Math.random()*
a)};var Xe=function(){this.b=""};h.StringBuf=Xe;Xe.__name__=!0;Xe.prototype={add:function(a){this.b+=o.string(a)},addSub:function(a,b,d){this.b=null==d?this.b+C.substr(a,b,null):this.b+C.substr(a,b,d)},__class__:Xe};var ya=function(){};h.StringTools=ya;ya.__name__=!0;ya.htmlEscape=function(a,b){a=a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");return b?a.split('"').join("&quot;").split("'").join("&#039;"):a};ya.replace=function(a,b,d){return a.split(b).join(d)};ya.fastCodeAt=
function(a,b){return a.charCodeAt(b)};var gb=function(){};h.Type=gb;gb.__name__=!0;gb.resolveClass=function(a){a=h[a];return null==a||!a.__name__?null:a};gb.resolveEnum=function(a){a=h[a];return null==a||!a.__ename__?null:a};gb.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],
b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments";}};gb.createEnum=function(a,b,d){var l=pa.field(a,b);if(null==l)throw"No such constructor "+b;if(pa.isFunction(l)){if(null==d)throw"Constructor "+b+" need parameters";return l.apply(a,d)}if(null!=d&&0!=d.length)throw"Constructor "+b+" does not need parameters";return l};gb.enumEq=function(a,b){if(a==b)return!0;try{if(a[0]!=b[0])return!1;
for(var d=2,l=a.length;d<l;){var c=d++;if(!gb.enumEq(a[c],b[c]))return!1}var n=a.__enum__;if(n!=b.__enum__||null==n)return!1}catch(p){return!1}return!0};h.XmlType={__ename__:!0,__constructs__:[]};var w=function(){};h.Xml=w;w.__name__=!0;w.parse=function(a){return ad.parse(a)};w.createElement=function(a){var b=new w;b.nodeType=w.Element;b._children=[];b._attributes=new D;b.set_nodeName(a);return b};w.createPCData=function(a){var b=new w;b.nodeType=w.PCData;b.set_nodeValue(a);return b};w.createCData=
function(a){var b=new w;b.nodeType=w.CData;b.set_nodeValue(a);return b};w.createComment=function(a){var b=new w;b.nodeType=w.Comment;b.set_nodeValue(a);return b};w.createDocType=function(a){var b=new w;b.nodeType=w.DocType;b.set_nodeValue(a);return b};w.createProcessingInstruction=function(a){var b=new w;b.nodeType=w.ProcessingInstruction;b.set_nodeValue(a);return b};w.createDocument=function(){var a=new w;a.nodeType=w.Document;a._children=[];return a};w.prototype={get_nodeName:function(){if(this.nodeType!=
w.Element)throw"bad nodeType";return this._nodeName},set_nodeName:function(a){if(this.nodeType!=w.Element)throw"bad nodeType";return this._nodeName=a},get_nodeValue:function(){if(this.nodeType==w.Element||this.nodeType==w.Document)throw"bad nodeType";return this._nodeValue},set_nodeValue:function(a){if(this.nodeType==w.Element||this.nodeType==w.Document)throw"bad nodeType";return this._nodeValue=a},get:function(a){if(this.nodeType!=w.Element)throw"bad nodeType";return this._attributes.get(a)},set:function(a,
b){if(this.nodeType!=w.Element)throw"bad nodeType";this._attributes.set(a,b)},remove:function(a){if(this.nodeType!=w.Element)throw"bad nodeType";this._attributes.remove(a)},exists:function(a){if(this.nodeType!=w.Element)throw"bad nodeType";return this._attributes.exists(a)},attributes:function(){if(this.nodeType!=w.Element)throw"bad nodeType";return this._attributes.keys()},iterator:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<
this.x.length},next:function(){return this.x[this.cur++]}}},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var a=this.cur,b=this.x.length;a<b&&!(this.x[a].nodeType==w.Element);)a+=1;this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var d=this.x[a],a=a+1;if(d.nodeType==w.Element)return this.cur=a,d}return null}}},elementsNamed:function(a){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,
hasNext:function(){for(var b=this.cur,d=this.x.length;b<d;){var l=this.x[b];if(l.nodeType==w.Element&&l._nodeName==a)break;b++}this.cur=b;return b<d},next:function(){for(var b=this.cur,d=this.x.length;b<d;){var l=this.x[b];b++;if(l.nodeType==w.Element&&l._nodeName==a)return this.cur=b,l}return null}}},firstChild:function(){if(null==this._children)throw"bad nodetype";return this._children[0]},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<
b;){var d=this._children[a];if(d.nodeType==w.Element)return d;a++}return null},addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&C.remove(a._parent._children,a);a._parent=this;this._children.push(a)},removeChild:function(a){if(null==this._children)throw"bad nodetype";var b=C.remove(this._children,a);b&&(a._parent=null);return b},insertChild:function(a,b){if(null==this._children)throw"bad nodetype";null!=a._parent&&C.remove(a._parent._children,a);a._parent=this;this._children.splice(b,
0,a)},toString:function(){if(this.nodeType==w.PCData)return ya.htmlEscape(this._nodeValue);if(this.nodeType==w.CData)return"<![CDATA["+this._nodeValue+"]]\>";if(this.nodeType==w.Comment)return"<\!--"+this._nodeValue+"--\>";if(this.nodeType==w.DocType)return"<!DOCTYPE "+this._nodeValue+">";if(this.nodeType==w.ProcessingInstruction)return"<?"+this._nodeValue+"?>";var a=new Xe;if(this.nodeType==w.Element){a.b+="<";a.b+=o.string(this._nodeName);for(var b=this._attributes.keys();b.hasNext();){var d=b.next();
a.b+=" ";a.b=null==d?a.b+"null":a.b+(""+d);a.b+='="';a.add(this._attributes.get(d));a.b+='"'}if(0==this._children.length)return a.b+="/>",a.b;a.b+=">"}for(b=this.iterator();b.hasNext();)d=b.next(),a.add(d.toString());this.nodeType==w.Element&&(a.b+="</",a.b+=o.string(this._nodeName),a.b+=">");return a.b},__class__:w};var Sc=function(){};h["flambe.util.Disposable"]=Sc;Sc.__name__=!0;Sc.prototype={__class__:Sc};var aa=function(){this._flags=0;this.owner=this.next=null};h["flambe.Component"]=aa;aa.__name__=
!0;aa.__interfaces__=[Sc];aa.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:aa};var mb=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};h["flambe.Entity"]=mb;mb.__name__=!0;mb.__interfaces__=[Sc];mb.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),d=this._compMap[b];
null!=d&&this.remove(d);this._compMap[b]=a;b=null;for(d=this.firstComponent;null!=d;)b=d,d=d.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,d=this.firstComponent;null!=d;){var l=d.next;if(d==a)return null==b?this.firstComponent=l:(b.owner=this,b.next=l),delete this._compMap[d.get_name()],0!=(d._flags&1)&&(d.onStop(),d._flags&=-2),d.onRemoved(),d.owner=null,d.next=null,!0;b=d;d=l}return!1},addChild:function(a,b){null==
b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var d=null,l=this.firstChild;null!=l;)d=l,l=l.next;null!=d?d.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=null,d=this.firstChild;null!=d;){var l=d.next;if(d==a){null==b?this.firstChild=l:b.next=l;d.parent=null;d.next=null;break}b=d;d=l}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&
this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},__class__:mb};var yj=function(){};h["flambe.util.PackageLog"]=yj;yj.__name__=!0;var Eh=function(){};h["flambe.platform.Platform"]=Eh;Eh.__name__=!0;Eh.prototype={__class__:Eh};var Fc=function(){};h["flambe.platform.html.HtmlPlatform"]=Fc;Fc.__name__=!0;Fc.__interfaces__=[Eh];Fc.prototype={init:function(){var a=this;M.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(d){}b.setAttribute("tabindex",
"0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";this._stage=new Id(b);this._pointer=new Ha;this._mouse=new Ye(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new Yd;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var l=0,c=function(d){if(!(1E3>d.timeStamp-l)){var c=b.getBoundingClientRect(),f=a.getX(d,c),
c=a.getY(d,c);switch(d.type){case "mousedown":d.target==b&&(d.preventDefault(),a._mouse.submitDown(f,c,d.button),b.focus());break;case "mousemove":a._mouse.submitMove(f,c);break;case "mouseup":a._mouse.submitUp(f,c,d.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(f,c,"mousewheel"==d.type?d.wheelDelta/40:-d.detail)&&d.preventDefault()}}};window.addEventListener("mousedown",c,!1);window.addEventListener("mousemove",c,!1);window.addEventListener("mouseup",c,!1);b.addEventListener("mousewheel",
c,!1);b.addEventListener("DOMMouseScroll",c,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var n="undefined"!=typeof window.ontouchstart,c="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(n||c){var p=new mg(this._pointer,n?4:window.navigator.msMaxTouchPoints);this._touch=p;c=function(b){var d;d=n?b.changedTouches:[b];var c=b.target.getBoundingClientRect();l=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();
M.SHOULD_HIDE_MOBILE_BROWSER&&M.hideMobileBrowser();for(b=0;b<d.length;){var f=d[b];++b;var T=a.getX(f,c),e=a.getY(f,c);p.submitDown((n?f.identifier:f.pointerId)|0,T,e)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<d.length;)f=d[b],++b,T=a.getX(f,c),e=a.getY(f,c),p.submitMove((n?f.identifier:f.pointerId)|0,T,e);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<d.length;)f=d[b],++b,T=a.getX(f,c),e=a.getY(f,c),p.submitUp((n?
f.identifier:f.pointerId)|0,T,e)}};n?(b.addEventListener("touchstart",c,!1),b.addEventListener("touchmove",c,!1),b.addEventListener("touchend",c,!1),b.addEventListener("touchcancel",c,!1)):(b.addEventListener("MSPointerDown",c,!1),b.addEventListener("MSPointerMove",c,!1),b.addEventListener("MSPointerUp",c,!1))}else this._touch=new Ze;var T=window.onerror;window.onerror=function(a,b,d){W.uncaughtError.emit(a);return null!=T?T(a,b,d):!1};var e=M.loadExtension("hidden",window.document);null!=e.value?
(c=function(){W.hidden.set__(pa.field(window.document,e.field))},c(null),window.document.addEventListener(e.prefix+"visibilitychange",c,!1)):(c=function(a){W.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",c,!1),window.addEventListener("pagehide",c,!1));W.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var i=M.loadExtension("requestAnimationFrame").value;if(null!=i){var h=window.performance,g=null!=h&&M.polyfill("now",
h);g?this._lastUpdate=h.now():null;var j=null,j=function(d){a.update(g?h.now():d);i(j,b)};i(j,b)}else window.setInterval(function(){a.update(Date.now())},16);Zd.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new ba(this,a)).promise},getStage:function(){return this._stage},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;W.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),Gc.onRender()))},getPointer:function(){return this._pointer},
getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new jb;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},getExternal:function(){null==this._external&&(this._external=new ng);return this._external},getRenderer:function(){return this._renderer},getX:function(a,
b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){try{var b=zj.getContextWebGL(a,{depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=b)if(M.detectSlowDriver(b))null;else return new $e(this._stage,b)}catch(d){}return new $d(a)},__class__:Fc};var qb=function(a,b){this._value=a;this._changed=null!=b?new rd(b):null};h["flambe.util.Value"]=qb;qb.__name__=!0;qb.prototype={watch:function(a){a(this._value,
this._value);return this.get_changed().connect(a)},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new rd);return this._changed},__class__:qb};var sd=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};h["flambe.util.SignalConnection"]=sd;sd.__name__=!0;sd.__interfaces__=[Sc];sd.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=
this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:sd};var Ca=function(a){this._head=null!=a?new sd(this,a):null;this._deferredTasks=null};h["flambe.util.SignalBase"]=Ca;Ca.__name__=!0;Ca.prototype={hasListeners:function(){return null!=this._head},connectImpl:function(a,b){var d=this,l=new sd(this,a);this._head==Ca.DISPATCHING_SENTINEL?this.defer(function(){d.listAdd(l,b)}):this.listAdd(l,b);return l},disconnect:function(a){var b=this;this._head==Ca.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):
this.listRemove(a)},defer:function(a){for(var b=null,d=this._deferredTasks;null!=d;)b=d,d=d.next;a=new Fh(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=Ca.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var d=null,l=this._head;null!=l;)d=l,l=l._next;null!=d?d._next=a:this._head=a}},listRemove:function(a){for(var b=
null,d=this._head;null!=d;){if(d==a){a=d._next;null==b?this._head=a:b._next=a;break}b=d;d=d._next}},__class__:Ca};var rd=function(a){Ca.call(this,a)};h["flambe.util.Signal2"]=rd;rd.__name__=!0;rd.__super__=Ca;rd.prototype=t(Ca.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var d=this;this._head==Ca.DISPATCHING_SENTINEL?this.defer(function(){d.emitImpl(a,b)}):this.emitImpl(a,b)},emitImpl:function(a,b){for(var d=this.willEmit(),l=d;null!=l;)l._listener(a,
b),l.stayInList||l.dispose(),l=l._next;this.didEmit(d)},__class__:rd});var qa=function(a){Ca.call(this,a)};h["flambe.util.Signal1"]=qa;qa.__name__=!0;qa.__super__=Ca;qa.prototype=t(Ca.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==Ca.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},emitImpl:function(a){for(var b=this.willEmit(),d=b;null!=d;)d._listener(a),d.stayInList||d.dispose(),d=d._next;this.didEmit(b)},
__class__:qa});var Ia=function(a,b){this._behavior=null;qb.call(this,a,b)};h["flambe.animation.AnimatedFloat"]=Ia;Ia.__name__=!0;Ia.__super__=qb;Ia.prototype=t(qb.prototype,{set__:function(a){this._behavior=null;return qb.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(qb.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},__class__:Ia});var W=function(){};h["flambe.System"]=W;W.__name__=!0;W.init=function(){W._calledInit||
(W._platform.init(),W._calledInit=!0)};var Zd=function(){};h["flambe.Log"]=Zd;Zd.__name__=!0;Zd.info=function(){null};Zd.__super__=yj;Zd.prototype=t(yj.prototype,{__class__:Zd});var Gh=function(){this._realDt=0};h["flambe.SpeedAdjuster"]=Gh;Gh.__name__=!0;Gh.__super__=aa;Gh.prototype=t(aa.prototype,{get_name:function(){return"SpeedAdjuster_7"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:Gh});var Aj=function(){};h["flambe.animation.Behavior"]=
Aj;Aj.__name__=!0;Aj.prototype={__class__:Aj};var Hc=function(){};h["flambe.asset.Asset"]=Hc;Hc.__name__=!0;Hc.__interfaces__=[Sc];Hc.prototype={__class__:Hc};var z=h["flambe.asset.AssetFormat"]={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",")};z.WEBP=["WEBP",0];z.WEBP.toString=g;z.WEBP.__enum__=z;z.JXR=["JXR",1];z.JXR.toString=g;z.JXR.__enum__=z;z.PNG=["PNG",2];z.PNG.toString=g;z.PNG.__enum__=z;z.JPG=["JPG",3];z.JPG.toString=g;z.JPG.__enum__=z;
z.GIF=["GIF",4];z.GIF.toString=g;z.GIF.__enum__=z;z.DDS=["DDS",5];z.DDS.toString=g;z.DDS.__enum__=z;z.PVR=["PVR",6];z.PVR.toString=g;z.PVR.__enum__=z;z.PKM=["PKM",7];z.PKM.toString=g;z.PKM.__enum__=z;z.MP3=["MP3",8];z.MP3.toString=g;z.MP3.__enum__=z;z.M4A=["M4A",9];z.M4A.toString=g;z.M4A.__enum__=z;z.OPUS=["OPUS",10];z.OPUS.toString=g;z.OPUS.__enum__=z;z.OGG=["OGG",11];z.OGG.toString=g;z.OGG.__enum__=z;z.WAV=["WAV",12];z.WAV.toString=g;z.WAV.__enum__=z;z.Data=["Data",13];z.Data.toString=g;z.Data.__enum__=
z;var Hh=function(a,b,d,l){this.name=a;this.url=b;this.format=d;this.bytes=l};h["flambe.asset.AssetEntry"]=Hh;Hh.__name__=!0;Hh.prototype={__class__:Hh};var og=function(){};h["flambe.asset.AssetPack"]=og;og.__name__=!0;og.__interfaces__=[Sc];og.prototype={__class__:og};var af=function(){};h["flambe.asset.File"]=af;af.__name__=!0;af.__interfaces__=[Hc];af.prototype={__class__:af};var td=function(){this._localBase=this._remoteBase=null;this._entries=[]};h["flambe.asset.Manifest"]=td;td.__name__=!0;
td.inferFormat=function(a){a=cc.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return z.GIF;case "jpg":case "jpeg":return z.JPG;case "jxr":case "wdp":return z.JXR;case "png":return z.PNG;case "webp":return z.WEBP;case "dds":return z.DDS;case "pvr":return z.PVR;case "pkm":return z.PKM;case "m4a":return z.M4A;case "mp3":return z.MP3;case "ogg":return z.OGG;case "opus":return z.OPUS;case "wav":return z.WAV}else null;return z.Data};td.prototype={add:function(a,b,d,l){null==d&&(d=0);
null==l&&(l=td.inferFormat(b));a=new Hh(a,b,l,d);this._entries.push(a);return a},iterator:function(){return C.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&td._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?cc.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},get_remoteBase:function(){return this._remoteBase},__class__:td};var ka=h["flambe.display.BlendMode"]={__ename__:!0,__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(",")};
ka.Normal=["Normal",0];ka.Normal.toString=g;ka.Normal.__enum__=ka;ka.Add=["Add",1];ka.Add.toString=g;ka.Add.__enum__=ka;ka.Multiply=["Multiply",2];ka.Multiply.toString=g;ka.Multiply.__enum__=ka;ka.Screen=["Screen",3];ka.Screen.toString=g;ka.Screen.__enum__=ka;ka.Mask=["Mask",4];ka.Mask.toString=g;ka.Mask.__enum__=ka;ka.Copy=["Copy",5];ka.Copy.toString=g;ka.Copy.__enum__=ka;var bf=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};h["flambe.math.Point"]=bf;bf.__name__=!0;bf.prototype={__class__:bf};
var O=function(){this.blendMode=this.scissor=null;var a=this;aa.call(this);this._flags|=54;this._localMatrix=new Bb;var b=function(){a._flags|=24};this.x=new Ia(0,b);this.y=new Ia(0,b);this.rotation=new Ia(0,b);this.scaleX=new Ia(1,b);this.scaleY=new Ia(1,b);this.anchorX=new Ia(0,b);this.anchorY=new Ia(0,b);this.alpha=new Ia(1)};h["flambe.display.Sprite"]=O;O.__name__=!0;O.hitTest=function(a,b,d){var l=a._compMap.Sprite_2;if(null!=l){if(6!=(l._flags&6))return null;l.getLocalMatrix().inverseTransform(b,
d,O._scratchPoint)&&(b=O._scratchPoint.x,d=O._scratchPoint.y);var c=l.scissor;if(null!=c&&!c.contains(b,d))return null}a=O.hitTestBackwards(a.firstChild,b,d);return null!=a?a:null!=l&&l.containsLocal(b,d)?l:null};O.getBounds=function(a,b){null==b&&(b=new ne);b.set(1.79769313486231E308,1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308);O.getBoundsImpl(a,null,b);b.width-=b.x;b.height-=b.y;return b};O.render=function(a,b){var d=a._compMap.Sprite_2;if(null!=d){var l=d.alpha._value;if(0==
(d._flags&2)||0>=l)return;b.save();1>l&&b.multiplyAlpha(l);null!=d.blendMode&&b.setBlendMode(d.blendMode);var l=d.getLocalMatrix(),c=l.m02,n=l.m12;0!=(d._flags&32)&&(c=Math.round(c),n=Math.round(n));b.transform(l.m00,l.m10,l.m01,l.m11,c,n);l=d.scissor;null!=l&&b.applyScissor(l.x,l.y,l.width,l.height);d.draw(b)}l=a._compMap.Director_5;if(null!=l){l=l.occludedScenes;for(c=0;c<l.length;)n=l[c],++c,O.render(n,b)}for(l=a.firstChild;null!=l;)c=l.next,O.render(l,b),l=c;null!=d&&b.restore()};O.hitTestBackwards=
function(a,b,d){if(null!=a){var l=O.hitTestBackwards(a.next,b,d);return null!=l?l:O.hitTest(a,b,d)}return null};O.getBoundsImpl=function(a,b,d){var l=a._compMap.Sprite_2;if(null!=l){var b=null!=b?Bb.multiply(b,l.getLocalMatrix()):l.getLocalMatrix(),c=l.getNaturalWidth(),l=l.getNaturalHeight();0<c&&0<l&&(O.extendRect(b,0,0,d),O.extendRect(b,c,0,d),O.extendRect(b,c,l,d),O.extendRect(b,0,l,d))}c=a._compMap.Director_5;if(null!=c)for(var c=c.occludedScenes,l=0,n=c.length;l<n;)O.getBoundsImpl(c[l],b,d),
++l;for(a=a.firstChild;null!=a;)c=a.next,O.getBoundsImpl(a,b,d),a=c};O.extendRect=function(a,b,d,l){a=a.transform(b,d,O._scratchPoint);b=a.x;d=a.y;b<l.x&&(l.x=b);d<l.y&&(l.y=d);b>l.width&&(l.width=b);d>l.height&&(l.height=d)};O.__super__=aa;O.prototype=t(aa.prototype,{get_name:function(){return"Sprite_2"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=
(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setAlpha:function(a){this.alpha.set__(a);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},
onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_2;if(null!=b)return b;a=a.parent}return null},get_pointerDown:function(){null==
this._pointerDown&&(this._pointerDown=new qa);return this._pointerDown},get_pointerMove:function(){null==this._pointerMove&&(this._pointerMove=new qa);return this._pointerMove},get_pointerIn:function(){null==this._pointerIn&&(this._pointerIn=new qa);return this._pointerIn},get_pointerOut:function(){null==this._pointerOut&&(this._pointerOut=new qa);return this._pointerOut},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=W._platform.getPointer().move.connect(function(b){for(var d=
b.hit;null!=d;){if(d==a)return;d=d.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},set_visible:function(a){this._flags=Ih.set(this._flags,2,a);return a},set_pointerEnabled:function(a){this._flags=Ih.set(this._flags,4,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},
onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:O});var Tc=function(a,b,d){O.call(this);
this.color=a;this.width=new Ia(b);this.height=new Ia(d)};h["flambe.display.FillSprite"]=Tc;Tc.__name__=!0;Tc.__super__=O;Tc.prototype=t(O.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},setSize:function(a,b){this.width.set__(a);this.height.set__(b);return this},onUpdate:function(a){O.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},
__class__:Tc});var Jh=function(){};h["flambe.display.Graphics"]=Jh;Jh.__name__=!0;Jh.prototype={__class__:Jh};var ae=function(a){O.call(this);this.texture=a};h["flambe.display.ImageSprite"]=ae;ae.__name__=!0;ae.__super__=O;ae.prototype=t(O.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:ae});var ud=
h["flambe.display.Orientation"]={__ename__:!0,__constructs__:["Portrait","Landscape"]};ud.Portrait=["Portrait",0];ud.Portrait.toString=g;ud.Portrait.__enum__=ud;ud.Landscape=["Landscape",1];ud.Landscape.toString=g;ud.Landscape.__enum__=ud;var pg=function(){};h["flambe.display.Texture"]=pg;pg.__name__=!0;pg.__interfaces__=[Hc];pg.prototype={__class__:pg};var Bj=function(){};h["flambe.display.SubTexture"]=Bj;Bj.__name__=!0;Bj.__interfaces__=[pg];var e=h["flambe.input.Key"]={__ename__:!0,__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
e.A=["A",0];e.A.toString=g;e.A.__enum__=e;e.B=["B",1];e.B.toString=g;e.B.__enum__=e;e.C=["C",2];e.C.toString=g;e.C.__enum__=e;e.D=["D",3];e.D.toString=g;e.D.__enum__=e;e.E=["E",4];e.E.toString=g;e.E.__enum__=e;e.F=["F",5];e.F.toString=g;e.F.__enum__=e;e.G=["G",6];e.G.toString=g;e.G.__enum__=e;e.H=["H",7];e.H.toString=g;e.H.__enum__=e;e.I=["I",8];e.I.toString=g;e.I.__enum__=e;e.J=["J",9];e.J.toString=g;e.J.__enum__=e;e.K=["K",10];e.K.toString=g;e.K.__enum__=e;e.L=["L",11];e.L.toString=g;e.L.__enum__=
e;e.M=["M",12];e.M.toString=g;e.M.__enum__=e;e.N=["N",13];e.N.toString=g;e.N.__enum__=e;e.O=["O",14];e.O.toString=g;e.O.__enum__=e;e.P=["P",15];e.P.toString=g;e.P.__enum__=e;e.Q=["Q",16];e.Q.toString=g;e.Q.__enum__=e;e.R=["R",17];e.R.toString=g;e.R.__enum__=e;e.S=["S",18];e.S.toString=g;e.S.__enum__=e;e.T=["T",19];e.T.toString=g;e.T.__enum__=e;e.U=["U",20];e.U.toString=g;e.U.__enum__=e;e.V=["V",21];e.V.toString=g;e.V.__enum__=e;e.W=["W",22];e.W.toString=g;e.W.__enum__=e;e.X=["X",23];e.X.toString=
g;e.X.__enum__=e;e.Y=["Y",24];e.Y.toString=g;e.Y.__enum__=e;e.Z=["Z",25];e.Z.toString=g;e.Z.__enum__=e;e.Number0=["Number0",26];e.Number0.toString=g;e.Number0.__enum__=e;e.Number1=["Number1",27];e.Number1.toString=g;e.Number1.__enum__=e;e.Number2=["Number2",28];e.Number2.toString=g;e.Number2.__enum__=e;e.Number3=["Number3",29];e.Number3.toString=g;e.Number3.__enum__=e;e.Number4=["Number4",30];e.Number4.toString=g;e.Number4.__enum__=e;e.Number5=["Number5",31];e.Number5.toString=g;e.Number5.__enum__=
e;e.Number6=["Number6",32];e.Number6.toString=g;e.Number6.__enum__=e;e.Number7=["Number7",33];e.Number7.toString=g;e.Number7.__enum__=e;e.Number8=["Number8",34];e.Number8.toString=g;e.Number8.__enum__=e;e.Number9=["Number9",35];e.Number9.toString=g;e.Number9.__enum__=e;e.Numpad0=["Numpad0",36];e.Numpad0.toString=g;e.Numpad0.__enum__=e;e.Numpad1=["Numpad1",37];e.Numpad1.toString=g;e.Numpad1.__enum__=e;e.Numpad2=["Numpad2",38];e.Numpad2.toString=g;e.Numpad2.__enum__=e;e.Numpad3=["Numpad3",39];e.Numpad3.toString=
g;e.Numpad3.__enum__=e;e.Numpad4=["Numpad4",40];e.Numpad4.toString=g;e.Numpad4.__enum__=e;e.Numpad5=["Numpad5",41];e.Numpad5.toString=g;e.Numpad5.__enum__=e;e.Numpad6=["Numpad6",42];e.Numpad6.toString=g;e.Numpad6.__enum__=e;e.Numpad7=["Numpad7",43];e.Numpad7.toString=g;e.Numpad7.__enum__=e;e.Numpad8=["Numpad8",44];e.Numpad8.toString=g;e.Numpad8.__enum__=e;e.Numpad9=["Numpad9",45];e.Numpad9.toString=g;e.Numpad9.__enum__=e;e.NumpadAdd=["NumpadAdd",46];e.NumpadAdd.toString=g;e.NumpadAdd.__enum__=e;e.NumpadDecimal=
["NumpadDecimal",47];e.NumpadDecimal.toString=g;e.NumpadDecimal.__enum__=e;e.NumpadDivide=["NumpadDivide",48];e.NumpadDivide.toString=g;e.NumpadDivide.__enum__=e;e.NumpadEnter=["NumpadEnter",49];e.NumpadEnter.toString=g;e.NumpadEnter.__enum__=e;e.NumpadMultiply=["NumpadMultiply",50];e.NumpadMultiply.toString=g;e.NumpadMultiply.__enum__=e;e.NumpadSubtract=["NumpadSubtract",51];e.NumpadSubtract.toString=g;e.NumpadSubtract.__enum__=e;e.F1=["F1",52];e.F1.toString=g;e.F1.__enum__=e;e.F2=["F2",53];e.F2.toString=
g;e.F2.__enum__=e;e.F3=["F3",54];e.F3.toString=g;e.F3.__enum__=e;e.F4=["F4",55];e.F4.toString=g;e.F4.__enum__=e;e.F5=["F5",56];e.F5.toString=g;e.F5.__enum__=e;e.F6=["F6",57];e.F6.toString=g;e.F6.__enum__=e;e.F7=["F7",58];e.F7.toString=g;e.F7.__enum__=e;e.F8=["F8",59];e.F8.toString=g;e.F8.__enum__=e;e.F9=["F9",60];e.F9.toString=g;e.F9.__enum__=e;e.F10=["F10",61];e.F10.toString=g;e.F10.__enum__=e;e.F11=["F11",62];e.F11.toString=g;e.F11.__enum__=e;e.F12=["F12",63];e.F12.toString=g;e.F12.__enum__=e;e.F13=
["F13",64];e.F13.toString=g;e.F13.__enum__=e;e.F14=["F14",65];e.F14.toString=g;e.F14.__enum__=e;e.F15=["F15",66];e.F15.toString=g;e.F15.__enum__=e;e.Left=["Left",67];e.Left.toString=g;e.Left.__enum__=e;e.Up=["Up",68];e.Up.toString=g;e.Up.__enum__=e;e.Right=["Right",69];e.Right.toString=g;e.Right.__enum__=e;e.Down=["Down",70];e.Down.toString=g;e.Down.__enum__=e;e.Alt=["Alt",71];e.Alt.toString=g;e.Alt.__enum__=e;e.Backquote=["Backquote",72];e.Backquote.toString=g;e.Backquote.__enum__=e;e.Backslash=
["Backslash",73];e.Backslash.toString=g;e.Backslash.__enum__=e;e.Backspace=["Backspace",74];e.Backspace.toString=g;e.Backspace.__enum__=e;e.CapsLock=["CapsLock",75];e.CapsLock.toString=g;e.CapsLock.__enum__=e;e.Comma=["Comma",76];e.Comma.toString=g;e.Comma.__enum__=e;e.Command=["Command",77];e.Command.toString=g;e.Command.__enum__=e;e.Control=["Control",78];e.Control.toString=g;e.Control.__enum__=e;e.Delete=["Delete",79];e.Delete.toString=g;e.Delete.__enum__=e;e.End=["End",80];e.End.toString=g;e.End.__enum__=
e;e.Enter=["Enter",81];e.Enter.toString=g;e.Enter.__enum__=e;e.Equals=["Equals",82];e.Equals.toString=g;e.Equals.__enum__=e;e.Escape=["Escape",83];e.Escape.toString=g;e.Escape.__enum__=e;e.Home=["Home",84];e.Home.toString=g;e.Home.__enum__=e;e.Insert=["Insert",85];e.Insert.toString=g;e.Insert.__enum__=e;e.LeftBracket=["LeftBracket",86];e.LeftBracket.toString=g;e.LeftBracket.__enum__=e;e.Minus=["Minus",87];e.Minus.toString=g;e.Minus.__enum__=e;e.PageDown=["PageDown",88];e.PageDown.toString=g;e.PageDown.__enum__=
e;e.PageUp=["PageUp",89];e.PageUp.toString=g;e.PageUp.__enum__=e;e.Period=["Period",90];e.Period.toString=g;e.Period.__enum__=e;e.Quote=["Quote",91];e.Quote.toString=g;e.Quote.__enum__=e;e.RightBracket=["RightBracket",92];e.RightBracket.toString=g;e.RightBracket.__enum__=e;e.Semicolon=["Semicolon",93];e.Semicolon.toString=g;e.Semicolon.__enum__=e;e.Shift=["Shift",94];e.Shift.toString=g;e.Shift.__enum__=e;e.Slash=["Slash",95];e.Slash.toString=g;e.Slash.__enum__=e;e.Space=["Space",96];e.Space.toString=
g;e.Space.__enum__=e;e.Tab=["Tab",97];e.Tab.toString=g;e.Tab.__enum__=e;e.Menu=["Menu",98];e.Menu.toString=g;e.Menu.__enum__=e;e.Search=["Search",99];e.Search.toString=g;e.Search.__enum__=e;e.Unknown=function(a){a=["Unknown",100,a];a.__enum__=e;a.toString=g;return a};var Kh=function(){this.init(0,null)};h["flambe.input.KeyboardEvent"]=Kh;Kh.__name__=!0;Kh.prototype={init:function(a,b){this.id=a;this.key=b},__class__:Kh};var Aa=h["flambe.input.MouseButton"]={__ename__:!0,__constructs__:["Left","Middle",
"Right","Unknown"]};Aa.Left=["Left",0];Aa.Left.toString=g;Aa.Left.__enum__=Aa;Aa.Middle=["Middle",1];Aa.Middle.toString=g;Aa.Middle.__enum__=Aa;Aa.Right=["Right",2];Aa.Right.toString=g;Aa.Right.__enum__=Aa;Aa.Unknown=function(a){a=["Unknown",3,a];a.__enum__=Aa;a.toString=g;return a};var Kb=h["flambe.input.MouseCursor"]={__ename__:!0,__constructs__:["Default","Button","None"]};Kb.Default=["Default",0];Kb.Default.toString=g;Kb.Default.__enum__=Kb;Kb.Button=["Button",1];Kb.Button.toString=g;Kb.Button.__enum__=
Kb;Kb.None=["None",2];Kb.None.toString=g;Kb.None.__enum__=Kb;var Lh=function(){this.init(0,0,0,null)};h["flambe.input.MouseEvent"]=Lh;Lh.__name__=!0;Lh.prototype={init:function(a,b,d,l){this.id=a;this.viewX=b;this.viewY=d;this.button=l},__class__:Lh};var cf=h["flambe.input.EventSource"]={__ename__:!0,__constructs__:["Mouse","Touch"]};cf.Mouse=function(a){a=["Mouse",0,a];a.__enum__=cf;a.toString=g;return a};cf.Touch=function(a){a=["Touch",1,a];a.__enum__=cf;a.toString=g;return a};var Mh=function(){this.init(0,
0,0,null,null)};h["flambe.input.PointerEvent"]=Mh;Mh.__name__=!0;Mh.prototype={init:function(a,b,d,l,c){this.id=a;this.viewX=b;this.viewY=d;this.hit=l;this.source=c;this._stopped=!1},__class__:Mh};var Nh=function(a){this.id=a;this._source=cf.Touch(this)};h["flambe.input.TouchPoint"]=Nh;Nh.__name__=!0;Nh.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:Nh};var qc=function(){};h["flambe.math.FMath"]=qc;qc.__name__=!0;qc.toRadians=function(a){return 3.141592653589793*a/180};qc.max=
function(a,b){return a>b?a:b};qc.min=function(a,b){return a<b?a:b};var Bb=function(){this.identity()};h["flambe.math.Matrix"]=Bb;Bb.__name__=!0;Bb.multiply=function(a,b,d){null==d&&(d=new Bb);var l=a.m00*b.m00+a.m01*b.m10,c=a.m00*b.m01+a.m01*b.m11,n=a.m00*b.m02+a.m01*b.m12+a.m02;d.m00=l;d.m01=c;d.m02=n;l=a.m10*b.m00+a.m11*b.m10;c=a.m10*b.m01+a.m11*b.m11;n=a.m10*b.m02+a.m11*b.m12+a.m12;d.m10=l;d.m11=c;d.m12=n;return d};Bb.prototype={set:function(a,b,d,l,c,n){this.m00=a;this.m01=d;this.m02=c;this.m10=
b;this.m11=l;this.m12=n},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,d,l,c){var n=Math.sin(c),c=Math.cos(c);this.set(c*d,n*d,-n*l,c*l,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transform:function(a,b,d){null==d&&(d=new bf);
d.x=a*this.m00+b*this.m01+this.m02;d.y=a*this.m10+b*this.m11+this.m12;return d},transformArray:function(a,b,d){for(var l=0;l<b;){var c=a[l],n=a[l+1];d[l++]=c*this.m00+n*this.m01+this.m02;d[l++]=c*this.m10+n*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,d){var l=this.determinant();if(0==l)return!1;a-=this.m02;b-=this.m12;d.x=(a*this.m11-b*this.m01)/l;d.y=(b*this.m00-a*this.m10)/l;return!0},clone:function(a){null==a&&(a=new Bb);
a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:Bb};var ne=function(a,b,d,l){null==l&&(l=0);null==d&&(d=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,d,l)};h["flambe.math.Rectangle"]=ne;ne.__name__=!0;ne.prototype={set:function(a,b,d,l){this.x=a;this.y=b;this.width=d;this.height=l},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<
b||b<this.height)return!1;return!0},clone:function(a){null==a&&(a=new ne);a.set(this.x,this.y,this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},__class__:ne};var Pa=function(){this._disposed=!1};h["flambe.platform.BasicAsset"]=Pa;Pa.__name__=!0;Pa.__interfaces__=[Hc];Pa.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:Pa};var be=function(a,b){var d=
this;this.manifest=b;this._platform=a;this.promise=new qg;this._bytesLoaded=new D;this._pack=new df(b,this);var l=lg.array(b);if(0==l.length)this.handleSuccess();else{for(var c=new D,n=0;n<l.length;){var p=l[n];++n;var T=c.get(p.name);null==T&&(T=[],c.set(p.name,T));T.push(p)}this._assetsRemaining=lg.count(c);for(l=c.iterator();l.hasNext();)c=[l.next()],this.pickBestEntry(c[0],function(a){return function(l){if(null!=l){var c=b.getFullURL(l);try{d.loadEntry(c,l)}catch(f){d.handleError(l,"Unexpected error: "+
o.string(f))}c=d.promise;c.set_total(c._total+l.bytes)}else l=a[0][0],be.isAudio(l.format)?d.handleLoad(l,Lb.getInstance()):d.handleError(l,"Could not find a supported format to load")}}(c))}};h["flambe.platform.BasicAssetPackLoader"]=be;be.__name__=!0;be.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};be.prototype={onDisposed:function(){},pickBestEntry:function(a,b){this.getAssetFormats(function(d){for(var l=0;l<d.length;){var c=d[l];++l;for(var n=
0;n<a.length;){var p=a[n];++n;if(p.format==c){b(p);return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var d;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:d=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:d=this._pack.sounds;break;case 13:d=this._pack.files}d.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},
handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var d=0,l=this._bytesLoaded.iterator();l.hasNext();)var c=l.next(),d=d+c;this.promise.set_progress(d)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(cc.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:be};var df=function(a,b){this.disposed=!1;this._manifest=a;this.loader=
b;this.textures=new D;this.sounds=new D;this.files=new D};h["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=df;df.__name__=!0;df.__interfaces__=[og];df.prototype={getTexture:function(a,b){null==b&&(b=!0);var d=this.textures.get(a);if(null==d&&b)throw cc.withFields("Missing texture",["name",a]);return d},getSound:function(a,b){null==b&&(b=!0);var d=this.sounds.get(a);if(null==d&&b)throw cc.withFields("Missing sound",["name",a]);return d},getFile:function(a,b){null==b&&(b=!0);var d=this.files.get(a);
if(null==d&&b)throw cc.withFields("Missing file",["name",a]);return d},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},__class__:df};var ef=function(a){this._disposed=!1;this._content=a};h["flambe.platform.BasicFile"]=ef;ef.__name__=
!0;ef.__interfaces__=[af];ef.__super__=Pa;ef.prototype=t(Pa.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:ef});var Oh=function(){};h["flambe.subsystem.KeyboardSystem"]=Oh;Oh.__name__=!0;Oh.prototype={__class__:Oh};var jb=function(){this.down=new qa;this.up=new qa;this.backButton=new bd;this._keyStates=new rc};h["flambe.platform.BasicKeyboard"]=jb;jb.__name__=!0;jb.__interfaces__=[Oh];jb.prototype={isDown:function(a){return this.isCodeDown(oe.toKeyCode(a))},
isCodeDown:function(a){return this._keyStates.exists(a)},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),jb._sharedEvent.init(jb._sharedEvent.id+1,oe.toKey(a)),this.down.emit(jb._sharedEvent));return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),jb._sharedEvent.init(jb._sharedEvent.id+1,oe.toKey(a)),this.up.emit(jb._sharedEvent))},__class__:jb};var xk=function(){};
h["flambe.subsystem.MouseSystem"]=xk;xk.__name__=!0;var hb=function(a){this._pointer=a;this._source=cf.Mouse(hb._sharedEvent);this.down=new qa;this.move=new qa;this.up=new qa;this.scroll=new qa;this._y=this._x=0;this._cursor=Kb.Default;this._buttonStates=new rc};h["flambe.platform.BasicMouse"]=hb;hb.__name__=!0;hb.__interfaces__=[xk];hb.prototype={submitDown:function(a,b,d){this._buttonStates.exists(d)||(this._buttonStates.set(d,!0),this.prepare(a,b,Ph.toButton(d)),this._pointer.submitDown(a,b,this._source),
this.down.emit(hb._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(hb._sharedEvent)},submitUp:function(a,b,d){this._buttonStates.exists(d)&&(this._buttonStates.remove(d),this.prepare(a,b,Ph.toButton(d)),this._pointer.submitUp(a,b,this._source),this.up.emit(hb._sharedEvent))},submitScroll:function(a,b,d){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(d);return!0},prepare:function(a,b,d){this._x=a;this._y=
b;hb._sharedEvent.init(hb._sharedEvent.id+1,a,b,d)},__class__:hb};var Qh=function(){};h["flambe.subsystem.PointerSystem"]=Qh;Qh.__name__=!0;Qh.prototype={__class__:Qh};var Ha=function(a,b,d){null==d&&(d=!1);null==b&&(b=0);null==a&&(a=0);this.down=new qa;this.move=new qa;this.up=new qa;this._x=a;this._y=b;this._isDown=d};h["flambe.platform.BasicPointer"]=Ha;Ha.__name__=!0;Ha.__interfaces__=[Qh];Ha.prototype={get_x:function(){return this._x},get_y:function(){return this._y},isDown:function(){return this._isDown},
submitDown:function(a,b,d){if(!this._isDown){this.submitMove(a,b,d);this._isDown=!0;var l=[],c=O.hitTest(W.root,a,b);if(null!=c){var n=c.owner;do{var p=n._compMap.Sprite_2;null!=p&&l.push(p);n=n.parent}while(null!=n)}this.prepare(a,b,c,d);for(a=0;a<l.length;)if(b=l[a],++a,b.onPointerDown(Ha._sharedEvent),Ha._sharedEvent._stopped)return;this.down.emit(Ha._sharedEvent)}},submitMove:function(a,b,d){if(!(a==this._x&&b==this._y)){var l=[],c=O.hitTest(W.root,a,b);if(null!=c){var n=c.owner;do{var p=n._compMap.Sprite_2;
null!=p&&l.push(p);n=n.parent}while(null!=n)}this.prepare(a,b,c,d);for(a=0;a<l.length;)if(b=l[a],++a,b.onPointerMove(Ha._sharedEvent),Ha._sharedEvent._stopped)return;this.move.emit(Ha._sharedEvent)}},submitUp:function(a,b,d){if(this._isDown){this.submitMove(a,b,d);this._isDown=!1;var l=[],c=O.hitTest(W.root,a,b);if(null!=c){var n=c.owner;do{var p=n._compMap.Sprite_2;null!=p&&l.push(p);n=n.parent}while(null!=n)}this.prepare(a,b,c,d);for(a=0;a<l.length;)if(b=l[a],++a,b.onPointerUp(Ha._sharedEvent),
Ha._sharedEvent._stopped)return;this.up.emit(Ha._sharedEvent)}},prepare:function(a,b,d,l){this._x=a;this._y=b;Ha._sharedEvent.init(Ha._sharedEvent.id+1,a,b,d,l)},__class__:Ha};var Mb=function(a,b,d){this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=b;this._height=d};h["flambe.platform.BasicTexture"]=Mb;Mb.__name__=!0;Mb.__interfaces__=[Bj];Mb.__super__=Pa;Mb.prototype=t(Pa.prototype,{onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},
get_height:function(){return this._height},__class__:Mb});var Cj=function(){};h["flambe.subsystem.TouchSystem"]=Cj;Cj.__name__=!0;var mg=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new rc;this._points=[];this.down=new qa;this.move=new qa;this.up=new qa};h["flambe.platform.BasicTouch"]=mg;mg.__name__=!0;mg.__interfaces__=[Cj];mg.prototype={submitDown:function(a,b,d){if(!this._pointMap.exists(a)){var l=new Nh(a);l.init(b,d);this._pointMap.set(a,l);this._points.push(l);
null==this._pointerTouch&&(this._pointerTouch=l,this._pointer.submitDown(b,d,l._source));this.down.emit(l)}},submitMove:function(a,b,d){a=this._pointMap.get(a);null!=a&&(a.init(b,d),this._pointerTouch==a&&this._pointer.submitMove(b,d,a._source),this.move.emit(a))},submitUp:function(a,b,d){var l=this._pointMap.get(a);null!=l&&(l.init(b,d),this._pointMap.remove(a),C.remove(this._points,l),this._pointerTouch==l&&(this._pointerTouch=null,this._pointer.submitUp(b,d,l._source)),this.up.emit(l))},__class__:mg};
var ce=function(){};h["flambe.sound.Sound"]=ce;ce.__name__=!0;ce.__interfaces__=[Hc];ce.prototype={__class__:ce};var Lb=function(){this._disposed=!1;this._playback=new rg(this)};h["flambe.platform.DummySound"]=Lb;Lb.__name__=!0;Lb.__interfaces__=[ce];Lb.getInstance=function(){null==Lb._instance&&(Lb._instance=new Lb);return Lb._instance};Lb.__super__=Pa;Lb.prototype=t(Pa.prototype,{play:function(){return this._playback},loop:function(){return this._playback},onDisposed:function(){},__class__:Lb});
var ff=function(){};h["flambe.sound.Playback"]=ff;ff.__name__=!0;ff.__interfaces__=[Sc];var rg=function(a){this._sound=a;this.volume=new Ia(0);this._complete=new qb(!0)};h["flambe.platform.DummyPlayback"]=rg;rg.__name__=!0;rg.__interfaces__=[ff];rg.prototype={dispose:function(){},__class__:rg};var Ze=function(){this.down=new qa;this.move=new qa;this.up=new qa};h["flambe.platform.DummyTouch"]=Ze;Ze.__name__=!0;Ze.__interfaces__=[Cj];Ze.prototype={__class__:Ze};var gf=function(){this._entries=[]};h["flambe.platform.EventGroup"]=
gf;gf.__name__=!0;gf.__interfaces__=[Sc];gf.prototype={addListener:function(a,b,d){a.addEventListener(b,d,!1);this._entries.push(new Rh(a,b,d))},addDisposingListener:function(a,b,d){var l=this;this.addListener(a,b,function(a){l.dispose();d(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var d=b[a];++a;d.dispatcher.removeEventListener(d.type,d.listener,!1)}this._entries=[]},__class__:gf};var Rh=function(a,b,d){this.dispatcher=a;this.type=b;this.listener=d};h["flambe.platform._EventGroup.Entry"]=
Rh;Rh.__name__=!0;Rh.prototype={__class__:Rh};var Jd=function(){};h["flambe.platform.InternalGraphics"]=Jd;Jd.__name__=!0;Jd.__interfaces__=[Jh];Jd.prototype={__class__:Jd};var Sh=function(){};h["flambe.subsystem.RendererSystem"]=Sh;Sh.__name__=!0;Sh.prototype={__class__:Sh};var hf=function(){};h["flambe.platform.InternalRenderer"]=hf;hf.__name__=!0;hf.__interfaces__=[Sh];hf.prototype={__class__:hf};var oe=function(){};h["flambe.platform.KeyCodes"]=oe;oe.__name__=!0;oe.toKey=function(a){switch(a){case 65:return e.A;
case 66:return e.B;case 67:return e.C;case 68:return e.D;case 69:return e.E;case 70:return e.F;case 71:return e.G;case 72:return e.H;case 73:return e.I;case 74:return e.J;case 75:return e.K;case 76:return e.L;case 77:return e.M;case 78:return e.N;case 79:return e.O;case 80:return e.P;case 81:return e.Q;case 82:return e.R;case 83:return e.S;case 84:return e.T;case 85:return e.U;case 86:return e.V;case 87:return e.W;case 88:return e.X;case 89:return e.Y;case 90:return e.Z;case 48:return e.Number0;case 49:return e.Number1;
case 50:return e.Number2;case 51:return e.Number3;case 52:return e.Number4;case 53:return e.Number5;case 54:return e.Number6;case 55:return e.Number7;case 56:return e.Number8;case 57:return e.Number9;case 96:return e.Numpad0;case 97:return e.Numpad1;case 98:return e.Numpad2;case 99:return e.Numpad3;case 100:return e.Numpad4;case 101:return e.Numpad5;case 102:return e.Numpad6;case 103:return e.Numpad7;case 104:return e.Numpad8;case 105:return e.Numpad9;case 107:return e.NumpadAdd;case 110:return e.NumpadDecimal;
case 111:return e.NumpadDivide;case 108:return e.NumpadEnter;case 106:return e.NumpadMultiply;case 109:return e.NumpadSubtract;case 112:return e.F1;case 113:return e.F2;case 114:return e.F3;case 115:return e.F4;case 116:return e.F5;case 117:return e.F6;case 118:return e.F7;case 119:return e.F8;case 120:return e.F9;case 121:return e.F10;case 122:return e.F11;case 123:return e.F12;case 37:return e.Left;case 38:return e.Up;case 39:return e.Right;case 40:return e.Down;case 18:return e.Alt;case 192:return e.Backquote;
case 220:return e.Backslash;case 8:return e.Backspace;case 20:return e.CapsLock;case 188:return e.Comma;case 15:return e.Command;case 17:return e.Control;case 46:return e.Delete;case 35:return e.End;case 13:return e.Enter;case 187:return e.Equals;case 27:return e.Escape;case 36:return e.Home;case 45:return e.Insert;case 219:return e.LeftBracket;case 189:return e.Minus;case 34:return e.PageDown;case 33:return e.PageUp;case 190:return e.Period;case 222:return e.Quote;case 221:return e.RightBracket;
case 186:return e.Semicolon;case 16:return e.Shift;case 191:return e.Slash;case 32:return e.Space;case 9:return e.Tab;case 16777234:return e.Menu;case 16777247:return e.Search}return e.Unknown(a)};oe.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;
case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;
case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;
case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;
case 99:return 16777247;case 100:return a[2]}};var Yd=function(){this._tickables=[]};h["flambe.platform.MainLoop"]=Yd;Yd.__name__=!0;Yd.updateEntity=function(a,b){var d=a._compMap.SpeedAdjuster_7;if(null!=d&&(d._realDt=b,b*=d.scale._value,0>=b)){d.onUpdate(b);return}for(d=a.firstComponent;null!=d;){var l=d.next;0==(d._flags&1)&&(d._flags|=1,d.onStart());d.onUpdate(b);d=l}for(d=a.firstChild;null!=d;)l=d.next,Yd.updateEntity(d,b),d=l};Yd.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=
0;b<this._tickables.length;){var d=this._tickables[b];null==d||d.update(a)?this._tickables.splice(b,1):++b}W.volume.update(a);Yd.updateEntity(W.root,a)}},addTickable:function(a){this._tickables.push(a)},__class__:Yd};var Th=function(){};h["flambe.platform.MathUtil"]=Th;Th.__name__=!0;Th.nextPowerOfTwo=function(a){for(var b=1;b<a;)b<<=1;return b};var Ph=function(){};h["flambe.platform.MouseCodes"]=Ph;Ph.__name__=!0;Ph.toButton=function(a){switch(a){case 0:return Aa.Left;case 1:return Aa.Middle;case 2:return Aa.Right}return Aa.Unknown(a)};
var Dj=function(){};h["flambe.platform.TextureRoot"]=Dj;Dj.__name__=!0;var sg=function(){};h["flambe.platform.Tickable"]=sg;sg.__name__=!0;sg.prototype={__class__:sg};var jf=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};h["flambe.platform.html.CanvasGraphics"]=jf;jf.__name__=!0;jf.__interfaces__=[Jd];jf.prototype={save:function(){this._canvasCtx.save()},transform:function(a,b,d,l,c,n){this._canvasCtx.transform(a,b,d,l,c,n)},restore:function(){this._canvasCtx.restore()},
drawTexture:function(a,b,d){this.drawSubTexture(a,b,d,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,d,l,c,n,p){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,d,l,c,n,p),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+l|0,a.rootY+c|0,n|0,p|0,b|0,d|0,n|0,p|0)},fillRect:function(a,b,d,l,c){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",
this.fillRect(a,b,d,l,c),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+o.string(a);this._canvasCtx.fillStyle="#"+o.string(a);this._canvasCtx.fillRect(b|0,d|0,l|0,c|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=
b},applyScissor:function(a,b,d,l){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,d|0,l|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){},__class__:jf};var $d=function(a){this.graphics=new jf(a,!0);this._hasGPU=new qb(!0)};h["flambe.platform.html.CanvasRenderer"]=$d;$d.__name__=!0;$d.__interfaces__=[hf];$d.prototype={get_type:function(){return Nb.Canvas},createTextureFromImage:function(a){a=new vd($d.CANVAS_TEXTURES?M.createCanvas(a):
a);return a.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:$d};var tg=function(a,b,d){Mb.call(this,a,b,d)};h["flambe.platform.html.CanvasTexture"]=tg;tg.__name__=!0;tg.__super__=Mb;tg.prototype=t(Mb.prototype,{__class__:tg});var vd=function(a){this._graphics=null;this._disposed=!1;this.image=a;this.width=a.width;
this.height=a.height};h["flambe.platform.html.CanvasTextureRoot"]=vd;vd.__name__=!0;vd.__interfaces__=[Dj];vd.__super__=Pa;vd.prototype=t(Pa.prototype,{createTexture:function(a,b){return new tg(this,a,b)},onDisposed:function(){this._graphics=this.image=null},__class__:vd});var ba=function(a,b){be.call(this,a,b)};h["flambe.platform.html.HtmlAssetPackLoader"]=ba;ba.__name__=!0;ba.detectImageFormats=function(a){var b=[z.PNG,z.JPG,z.GIF],d=2,l;l=window.document.createElement("img");l.onload=l.onerror=
function(){1==l.width&&b.unshift(z.WEBP);--d;0==d&&a(b)};l.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var c;c=window.document.createElement("img");c.onload=c.onerror=function(){1==c.width&&b.unshift(z.JXR);--d;0==d&&a(b)};c.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};ba.detectAudioFormats=function(){var a;
a=window.document.createElement("audio");if(null==a||null==x(a,a.canPlayType))return[];var b=new bc("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),d=window.navigator.userAgent;if(!da.get_supported()&&b.match(d))return[];for(var b=[{format:z.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:z.MP3,mimeType:"audio/mpeg"},{format:z.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:z.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:z.WAV,mimeType:"audio/wav"}],d=[],l=0;l<b.length;){var c=b[l];++l;var n=
"";try{n=a.canPlayType(c.mimeType)}catch(p){}""!=n&&d.push(c.format)}return d};ba.supportsBlob=function(){if(ba._detectBlobSupport){ba._detectBlobSupport=!1;if((new bc("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;ba._URL=M.loadExtension("URL").value}return null!=ba._URL&&null!=ba._URL.createObjectURL};ba.__super__=be;ba.prototype=
t(be.prototype,{loadEntry:function(a,b){var d=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var l;l=window.document.createElement("img");var c=new gf;c.addDisposingListener(l,"load",function(){ba.supportsBlob()&&ba._URL.revokeObjectURL(l.src);var a=d._platform.getRenderer().createTextureFromImage(l);null!=a?d.handleLoad(b,a):d.handleTextureError(b)});c.addDisposingListener(l,"error",function(){d.handleError(b,"Failed to load image")});ba.supportsBlob()?this.download(a,b,"blob",function(a){l.src=
ba._URL.createObjectURL(a)}):l.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=d._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?d.handleLoad(b,a):d.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(da.get_supported())this.download(a,b,"arraybuffer",function(a){da.ctx.decodeAudioData(a,function(a){d.handleLoad(b,new da(a))},function(){d.handleLoad(b,Lb.getInstance())})});else{var n;n=window.document.createElement("audio");
n.preload="auto";var p=++ba._mediaRefCount;null==ba._mediaElements&&(ba._mediaElements=new rc);ba._mediaElements.set(p,n);c=new gf;c.addDisposingListener(n,"canplaythrough",function(){ba._mediaElements.remove(p);d.handleLoad(b,new kf(n))});c.addDisposingListener(n,"error",function(){ba._mediaElements.remove(p);var a=n.error.code;3==a||4==a?d.handleLoad(b,Lb.getInstance()):d.handleError(b,"Failed to load audio: "+n.error.code)});c.addListener(n,"progress",function(){if(0<n.buffered.length&&0<n.duration){var a=
n.buffered.end(0)/n.duration;d.handleProgress(b,a*b.bytes|0)}});n.src=a;n.load()}break;case 13:this.download(a,b,"text",function(a){d.handleLoad(b,new ef(a))})}},getAssetFormats:function(a){var b=this;null==ba._supportedFormats&&(ba._supportedFormats=new qg,ba.detectImageFormats(function(a){ba._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(ba.detectAudioFormats()).concat([z.Data]))}));ba._supportedFormats.get(a)},download:function(a,b,d,l){var c=
this,n=null,p=null,T=0,e=!1,i=function(){e&&(e=!1,window.clearInterval(T))},h=3,g=function(){--h;return 0<=h?(p(),!0):!1},p=function(){i();null!=n&&n.abort();n=new XMLHttpRequest;n.open("GET",a,!0);n.responseType=d;var p=0;n.onprogress=function(a){e||(e=!0,T=window.setInterval(function(){4!=n.readyState&&5E3<Date.now()-p&&!g()&&(i(),c.handleError(b,"Download stalled"))},1E3));p=Date.now();c.handleProgress(b,a.loaded)};n.onerror=function(){if(0!=n.status||!g())i(),c.handleError(b,"HTTP error "+n.status)};
n.onload=function(){var a=n.response;null==a&&(a=n.responseText);i();l(a)};n.send()};p()},__class__:ba});var Uh=function(){};h["flambe.subsystem.ExternalSystem"]=Uh;Uh.__name__=!0;Uh.prototype={__class__:Uh};var ng=function(){};h["flambe.platform.html.HtmlExternal"]=ng;ng.__name__=!0;ng.__interfaces__=[Uh];ng.prototype={call:function(a,b){null==b&&(b=[]);for(var d=window,l=d,c=0,n=a.split(".");c<n.length;){var p=n[c];++c;d=l;l=pa.field(d,p)}return l.apply(d,b)},__class__:ng};var Ye=function(a,b){hb.call(this,
a);this._canvas=b};h["flambe.platform.html.HtmlMouse"]=Ye;Ye.__name__=!0;Ye.__super__=hb;Ye.prototype=t(hb.prototype,{__class__:Ye});var kf=function(a){this._disposed=!1;this.audioElement=a};h["flambe.platform.html.HtmlSound"]=kf;kf.__name__=!0;kf.__interfaces__=[ce];kf.__super__=Pa;kf.prototype=t(Pa.prototype,{play:function(a){null==a&&(a=1);return new pe(this,a,!1)},loop:function(a){null==a&&(a=1);return new pe(this,a,!0)},onDisposed:function(){this.audioElement=null},__class__:kf});var pe=function(a,
b,d){var l=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=d;this._clonedElement.src=a.audioElement.src;this.volume=new Ia(b,function(){l.updateVolume()});this.updateVolume();this._complete=new qb(!1);this.playAudio();W.hidden._value&&this.set_paused(!0)};h["flambe.platform.html._HtmlSound.HtmlPlayback"]=pe;pe.__name__=!0;pe.__interfaces__=[sg,ff];pe.prototype={set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():
this.playAudio());return a},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(Fc.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=W.volume.get_changed().connect(function(){a.updateVolume()}),
this._hideBinding=W.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},updateVolume:function(){this._clonedElement.volume=W.volume._value*this.volume._value},__class__:pe};var Vh=function(){};h["flambe.subsystem.StageSystem"]=Vh;Vh.__name__=!0;Vh.prototype={__class__:Vh};var Id=function(a){var b=this;this._canvas=a;this.resize=new bd;this.scaleFactor=Id.computeScaleFactor();1!=this.scaleFactor&&(M.setVendorStyle(this._canvas,
"transform-origin","top left"),M.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));M.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){M.callLater(x(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",x(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new qb(null);null!=window.orientation&&(window.addEventListener("orientationchange",x(this,this.onOrientationChange),!1),this.onOrientationChange(null));
this.fullscreen=new qb(!1);M.addVendorListener(window.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};h["flambe.platform.html.HtmlStage"]=Id;Id.__name__=!0;Id.__interfaces__=[Vh];Id.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d"),b=M.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=window.screen.height;return 1136<a*window.screen.width||1136<a*b?
1:a};Id.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var d=this.scaleFactor*a,l=this.scaleFactor*b;if(this._canvas.width==d&&this._canvas.height==l)return!1;this._canvas.width=d|0;this._canvas.height=l|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;
b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";M.callLater(function(){M.hideMobileBrowser();M.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(M.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==M.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:Id};var M=function(){};h["flambe.platform.html.HtmlUtil"]=
M;M.__name__=!0;M.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};M.hideMobileBrowser=function(){window.scrollTo(1,0)};M.loadExtension=function(a,b){null==b&&(b=window);var d=pa.field(b,a);if(null!=d)return{prefix:"",field:a,value:d};for(var d=a.charAt(0).toUpperCase()+C.substr(a,1,null),l=0,c=M.VENDOR_PREFIXES;l<c.length;){var n=c[l];++l;var p=n+d,T=pa.field(b,p);if(null!=T)return{prefix:n,field:p,value:T}}return{prefix:null,field:null,value:null}};M.loadFirstExtension=function(a,
b){for(var d=0;d<a.length;){var l=a[d];++d;l=M.loadExtension(l,b);if(null!=l.field)return l}return{prefix:null,field:null,value:null}};M.polyfill=function(a,b){null==b&&(b=window);var d=M.loadExtension(a,b).value;if(null==d)return!1;b[a]=d;return!0};M.setVendorStyle=function(a,b,d){for(var a=a.style,l=0,c=M.VENDOR_PREFIXES;l<c.length;){var n=c[l];++l;a.setProperty("-"+n+"-"+b,d)}a.setProperty(b,d)};M.addVendorListener=function(a,b,d,l){for(var c=0,n=M.VENDOR_PREFIXES;c<n.length;){var p=n[c];++c;a.addEventListener(p+
b,d,l)}a.addEventListener(b,d,l)};M.orientation=function(a){switch(a){case -90:case 90:return ud.Landscape;default:return ud.Portrait}};M.createEmptyCanvas=function(a,b){var d;d=window.document.createElement("canvas");d.width=a;d.height=b;return d};M.createCanvas=function(a){var b=M.createEmptyCanvas(a.width,a.height),d=b.getContext("2d");d.save();d.globalCompositeOperation="copy";d.drawImage(a,0,0);d.restore();return b};M.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&
null!=window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var d=a[b];++b;if(0<=d.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};M.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var da=function(a){this._disposed=!1;this.buffer=a};h["flambe.platform.html.WebAudioSound"]=da;da.__name__=!0;da.__interfaces__=[ce];da.get_supported=
function(){if(da._detectSupport){da._detectSupport=!1;var a=M.loadExtension("AudioContext").value;null!=a&&(da.ctx=new a,da.gain=da.createGain(),da.gain.connect(da.ctx.destination),W.volume.watch(function(a){da.gain.gain.value=a}))}return null!=da.ctx};da.createGain=function(){return null!=da.ctx.createGain?da.ctx.createGain():da.ctx.createGainNode()};da.start=function(a,b){null!=a.start?a.start(b):a.noteOn(b)};da.__super__=Pa;da.prototype=t(Pa.prototype,{play:function(a){null==a&&(a=1);return new lf(this,
a,!1)},loop:function(a){null==a&&(a=1);return new lf(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:da});var lf=function(a,b,d){var l=this;this._sound=a;this._head=da.gain;this._complete=new qb(!1);this._sourceNode=da.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=d;this._sourceNode.onended=function(){l._complete.set__(!0)};da.start(this._sourceNode,0);this.playAudio();this.volume=new Ia(b,function(a){l.setVolume(a)});
1!=b&&this.setVolume(b);W.hidden._value&&this.set_paused(!0)};h["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=lf;lf.__name__=!0;lf.__interfaces__=[sg,ff];lf.prototype={set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_position:function(){return this._complete._value?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(da.ctx.currentTime-this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);
3==this._sourceNode.playbackState&&this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},setVolume:function(a){null==this._gainNode&&(this._gainNode=da.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=
a},playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=da.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(Fc.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=W.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},__class__:lf};var Wh=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=0;this._pendingSetScissor=!1;
this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new mf(a);this._drawPatternShader=new ug(a);this._fillRectShader=
new nf(a);this.resize(16)};h["flambe.platform.html.WebGLBatcher"]=Wh;Wh.__name__=!0;Wh.prototype={resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},willRender:function(){this._gl.clear(16384)},didRender:function(){this.flush()},bindTexture:function(a){this.flush();this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},deleteTexture:function(a){null!=this._lastTexture&&this._lastTexture.root==a&&(this.flush(),this._currentTexture=
this._lastTexture=null);this._gl.deleteTexture(a.nativeTexture)},deleteFramebuffer:function(a){a==this._lastRenderTarget&&(this.flush(),this._currentRenderTarget=this._lastRenderTarget=null);this._gl.deleteFramebuffer(a.framebuffer)},prepareDrawTexture:function(a,b,d,l){l!=this._lastTexture&&(this.flush(),this._lastTexture=l);return this.prepareQuad(5,a,b,d,this._drawTextureShader)},prepareFillRect:function(a,b,d){return this.prepareQuad(6,a,b,d,this._fillRectShader)},prepareQuad:function(a,b,d,l,
c){b!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=b);d!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=d);c!=this._lastShader&&(this.flush(),this._lastShader=c);if(null!=l||null!=this._lastScissor)if(null==l||null==this._lastScissor||!this._lastScissor.equals(l))this.flush(),this._lastScissor=null!=l?l.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=4*a;return b},
flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(774,771);break;case 3:this._gl.blendFunc(1,769);break;case 4:this._gl.blendFunc(0,770);break;case 5:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&
(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==
this._drawPatternShader){var a=this._lastTexture,b=a.root;this._drawPatternShader.setRegion(a.rootX/b.width,a.rootY/b.height,a._width/b.width,a._height/b.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),d=0;d<a;){var l=
d++;b[6*l]=4*l;b[6*l+1]=4*l+1;b[6*l+2]=4*l+2;b[6*l+3]=4*l+2;b[6*l+4]=4*l+3;b[6*l+5]=4*l}this._gl.bufferData(34963,b,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=this._currentRenderTarget=a},resetLastStateVars:function(){this._gl.enable(3042);this._gl.disable(2960);this._gl.disable(2929);
this._gl.bindBuffer(34962,this._vertexBuffer);this._gl.bindBuffer(34963,this._quadIndexBuffer);null!=this._lastRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);this._gl.blendFunc(1,771);null!=this._lastTexture&&this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture);null!=this._lastShader&&(this._lastShader.useProgram(),this._lastShader.prepare())},__class__:Wh};var Ob=function(a,b){this._inverseProjection=this._stateList=null;null==Ob._scratchQuadArray&&(Ob._scratchQuadArray=new Float32Array(8));
this._batcher=a;this._renderTarget=b};h["flambe.platform.html.WebGLGraphics"]=Ob;Ob.__name__=!0;Ob.__interfaces__=[Jd];Ob.prototype={save:function(){var a=this._stateList,b=this._stateList.next;null==b&&(b=new vg,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=b},transform:function(a,b,d,l,c,n){var p=this._stateList;Ob._scratchMatrix.set(a,b,d,l,c,n);Bb.multiply(p.matrix,Ob._scratchMatrix,
p.matrix)},restore:function(){this._stateList=this._stateList.prev},drawTexture:function(a,b,d){this._batcher.resetLastStateVars();this.drawSubTexture(a,b,d,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,d,l,c,n,p){var T=this._stateList,e=a.root,b=this.transformQuad(b,d,n,p),d=e.width,e=e.height,l=(a.rootX+l)/d,c=(a.rootY+c)/e,n=l+n/d,p=c+p/e,d=T.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,T.blendMode,T.scissor,a),T=this._batcher.data;T[a]=b[0];T[++a]=b[1];T[++a]=l;
T[++a]=c;T[++a]=d;T[++a]=b[2];T[++a]=b[3];T[++a]=n;T[++a]=c;T[++a]=d;T[++a]=b[4];T[++a]=b[5];T[++a]=n;T[++a]=p;T[++a]=d;T[++a]=b[6];T[++a]=b[7];T[++a]=l;T[++a]=p;T[++a]=d},fillRect:function(a,b,d,l,c){var n=this._stateList,b=this.transformQuad(b,d,l,c),d=(a&16711680)/16711680,l=(a&65280)/65280,a=(a&255)/255,c=n.alpha,n=this._batcher.prepareFillRect(this._renderTarget,n.blendMode,n.scissor),p=this._batcher.data;p[n]=b[0];p[++n]=b[1];p[++n]=d;p[++n]=l;p[++n]=a;p[++n]=c;p[++n]=b[2];p[++n]=b[3];p[++n]=
d;p[++n]=l;p[++n]=a;p[++n]=c;p[++n]=b[4];p[++n]=b[5];p[++n]=d;p[++n]=l;p[++n]=a;p[++n]=c;p[++n]=b[6];p[++n]=b[7];p[++n]=d;p[++n]=l;p[++n]=a;p[++n]=c},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,b,d,l){var c=this._stateList,n=Ob._scratchQuadArray;n[0]=a;n[1]=b;n[2]=a+d;n[3]=b+l;c.matrix.transformArray(n,4,n);this._inverseProjection.transformArray(n,4,n);a=n[0];b=n[1];d=n[2]-a;l=n[3]-b;0>d&&(a+=d,d=-d);0>l&&(b+=l,
l=-l);c.applyScissor(a,b,d,l)},willRender:function(){this._batcher.resetLastStateVars();this._batcher.willRender()},didRender:function(){this._batcher.resetLastStateVars();this._batcher.didRender()},onResize:function(a,b){this._stateList=new vg;var d;d=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*d/b,-1,d);this._inverseProjection=new Bb;this._inverseProjection.set(2/a,0,0,2/b,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,b,d,l){var d=a+d,l=b+l,c=Ob._scratchQuadArray;
c[0]=a;c[1]=b;c[2]=d;c[3]=b;c[4]=d;c[5]=l;c[6]=a;c[7]=l;this._stateList.matrix.transformArray(c,8,c);return c},__class__:Ob};var vg=function(){this.scissor=this.prev=this.next=null;this.matrix=new Bb;this.alpha=1;this.blendMode=ka.Normal};h["flambe.platform.html._WebGLGraphics.DrawingState"]=vg;vg.__name__=!0;vg.prototype={applyScissor:function(a,b,d,l){if(null!=this.scissor)var c=qc.max(this.scissor.x,a),n=qc.max(this.scissor.y,b),d=qc.min(this.scissor.x+this.scissor.width,a+d),l=qc.min(this.scissor.y+
this.scissor.height,b+l),a=c,b=n,d=d-c,l=l-n;else this.scissor=new ne;this.scissor.set(Math.round(a),Math.round(b),Math.round(d),Math.round(l))},__class__:vg};var $e=function(a,b){var d=this;this._hasGPU=new qb(!0);this.gl=b;b.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();d._hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",function(){d.init();d._hasGPU.set__(!0)},!1);a.resize.connect(x(this,this.onResize));this.init()};h["flambe.platform.html.WebGLRenderer"]=
$e;$e.__name__=!0;$e.__interfaces__=[hf];$e.prototype={get_type:function(){return Nb.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;var b=new Kd(this,a.width,a.height);b.uploadImageData(a);return b.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){this.gl.isContextLost();return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var a=
this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},init:function(){this.batcher=new Wh(this.gl);this.graphics=new Ob(this.batcher,null);this.onResize()},__class__:$e};var of=function(a,b,d){Mb.call(this,a,b,d)};h["flambe.platform.html.WebGLTexture"]=of;of.__name__=!0;of.__super__=Mb;of.prototype=t(Mb.prototype,{__class__:of});var Kd=function(a,b,d){this.framebuffer=this._graphics=null;this._disposed=!1;this._renderer=a;this.width=qc.max(2,
Th.nextPowerOfTwo(b));this.height=qc.max(2,Th.nextPowerOfTwo(d));b=a.gl;this.nativeTexture=b.createTexture();a.batcher.bindTexture(this.nativeTexture);b.texParameteri(3553,10242,33071);b.texParameteri(3553,10243,33071);b.texParameteri(3553,10240,9729);b.texParameteri(3553,10241,9728)};h["flambe.platform.html.WebGLTextureRoot"]=Kd;Kd.__name__=!0;Kd.__interfaces__=[Dj];Kd.drawBorder=function(a,b,d){var l=a.getContext("2d");l.drawImage(a,b-1,0,1,d,b,0,1,d);l.drawImage(a,0,d-1,b,1,0,d,b,1)};Kd.__super__=
Pa;Kd.prototype=t(Pa.prototype,{createTexture:function(a,b){return new of(this,a,b)},uploadImageData:function(a){if(this.width!=a.width||this.height!=a.height){var b=M.createEmptyCanvas(this.width,this.height);b.getContext("2d").drawImage(a,0,0);Kd.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,0,6408,6408,5121,a)},onDisposed:function(){var a=this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&a.deleteFramebuffer(this);
this._graphics=this.framebuffer=this.nativeTexture=null},__class__:Kd});var kb=function(a,b,d){d="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+d;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,kb.createShader(a,35633,b));a.attachShader(this._program,kb.createShader(a,35632,d));a.linkProgram(this._program);a.useProgram(this._program)};h["flambe.platform.shader.ShaderGL"]=kb;kb.__name__=!0;kb.createShader=function(a,b,d){b=a.createShader(b);a.shaderSource(b,d);a.compileShader(b);
return b};kb.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},__class__:kb};var ug=function(a){kb.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};h["flambe.platform.shader.DrawPatternGL"]=
ug;ug.__name__=!0;ug.__super__=kb;ug.prototype=t(kb.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,b,d,l){this._gl.uniform4f(this.u_region,a,b,d,l)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,
1,5126,!1,20,16)},__class__:ug});var mf=function(a){kb.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");
this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};h["flambe.platform.shader.DrawTextureGL"]=mf;mf.__name__=!0;mf.__super__=kb;mf.prototype=t(kb.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,
2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:mf});var nf=function(a){kb.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}","varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");
this.a_rgb=this.getAttribLocation("a_rgb");this.a_alpha=this.getAttribLocation("a_alpha")};h["flambe.platform.shader.FillRectGL"]=nf;nf.__name__=!0;nf.__super__=kb;nf.prototype=t(kb.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,
1,5126,!1,24,20)},__class__:nf});var Xh=function(){this._transitor=null};h["flambe.scene.Director"]=Xh;Xh.__name__=!0;Xh.__super__=aa;Xh.prototype=t(aa.prototype,{get_name:function(){return"Director_5"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var d=b[a];++a;d.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},
get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},show:function(a){a=a._compMap.Scene_6;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_6;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=
null,this.invalidateVisibility())},__class__:Xh});var Ej=function(){};h["flambe.scene._Director.Transitor"]=Ej;Ej.__name__=!0;Ej.prototype={update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();this._onComplete()},__class__:Ej};var Yh=function(){};h["flambe.scene.Scene"]=Yh;Yh.__name__=!0;Yh.__super__=aa;Yh.prototype=t(aa.prototype,{get_name:function(){return"Scene_6"},__class__:Yh});var Fj=function(){};h["flambe.scene.Transition"]=Fj;Fj.__name__=!0;
Fj.prototype={update:function(){return!0},complete:function(){},__class__:Fj};var Nb=h["flambe.subsystem.RendererType"]={__ename__:!0,__constructs__:["Stage3D","WebGL","Canvas"]};Nb.Stage3D=["Stage3D",0];Nb.Stage3D.toString=g;Nb.Stage3D.__enum__=Nb;Nb.WebGL=["WebGL",1];Nb.WebGL.toString=g;Nb.WebGL.__enum__=Nb;Nb.Canvas=["Canvas",2];Nb.Canvas.toString=g;Nb.Canvas.__enum__=Nb;var Ih=function(){};h["flambe.util.BitSets"]=Ih;Ih.__name__=!0;Ih.set=function(a,b,d){return d?a|b:a&~b};var Zh=function(a){this._capacity=
2147483647;this._allocator=a;this._freeObjects=[]};h["flambe.util.Pool"]=Zh;Zh.__name__=!0;Zh.prototype={take:function(){return 0<this._freeObjects.length?this._freeObjects.pop():this._allocator()},put:function(a){this._freeObjects.length<this._capacity&&this._freeObjects.push(a)},setSize:function(a){if(this._freeObjects.length>a)this._freeObjects.length=a;else for(var a=a-this._freeObjects.length,b=0;b<a;)b++,this._freeObjects.push(this._allocator());return this},__class__:Zh};var qg=function(){this.success=
new qa;this.error=new qa;this.progressChanged=new bd;this.hasResult=!1;this._total=this._progress=0};h["flambe.util.Promise"]=qg;qg.__name__=!0;qg.prototype={set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=
a&&(this._total=a,this.progressChanged.emit());return a},__class__:qg};var bd=function(a){Ca.call(this,a)};h["flambe.util.Signal0"]=bd;bd.__name__=!0;bd.__super__=Ca;bd.prototype=t(Ca.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==Ca.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},
__class__:bd});var Fh=function(a){this.next=null;this.fn=a};h["flambe.util._SignalBase.Task"]=Fh;Fh.__name__=!0;Fh.prototype={__class__:Fh};var cc=function(){};h["flambe.util.Strings"]=cc;cc.__name__=!0;cc.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?C.substr(a,b+1,null):null};cc.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=C.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=C.substr(a,b+1,null));return cc.getFileExtension(a)};cc.joinPath=function(a,b){0<a.length&&
47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};cc.withFields=function(a,b){var d=b.length;if(0<d){for(var a=0<a.length?a+" [":a+"[",l=0;l<d;){0<l&&(a+=", ");var c=b[l],n=b[l+1];if(o.is(n,Error)){var p=n.stack;null!=p&&(n=p)}a+=c+"="+o.string(n);l+=2}a+="]"}return a};var Gj=function(){};h["haxe.Log"]=Gj;Gj.__name__=!0;Gj.trace=function(a,b){v.__trace(a,b)};var Hj=function(){};h["haxe.crypto.Crc32"]=Hj;Hj.__name__=!0;Hj.make=function(a){for(var b=-1,d=a.b,l=0,a=a.length;l<a;){for(var c=l++,c=(b^
d[c])&255,n=0;8>n;)n++,c=1==(c&1)?c>>>1^-306674912:c>>>1;b=b>>>8^c}return b^-1};var wg=function(){};h["haxe.ds.BalancedTree"]=wg;wg.__name__=!0;wg.prototype={set:function(a,b){this.root=this.setLoop(a,b,this.root)},get:function(a){for(var b=this.root;null!=b;){var d=this.compare(a,b.key);if(0==d)return b.value;b=0>d?b.left:b.right}return null},exists:function(a){for(var b=this.root;null!=b;){var d=this.compare(a,b.key);if(0==d)return!0;b=0>d?b.left:b.right}return!1},keys:function(){var a=[];this.keysLoop(this.root,
a);return C.iter(a)},setLoop:function(a,b,d){if(null==d)return new Za(null,a,b,null);var l=this.compare(a,d.key);if(0==l)return new Za(d.left,a,b,d.right,null==d?0:d._height);if(0>l)return this.balance(this.setLoop(a,b,d.left),d.key,d.value,d.right);a=this.setLoop(a,b,d.right);return this.balance(d.left,d.key,d.value,a)},keysLoop:function(a,b){null!=a&&(this.keysLoop(a.left,b),b.push(a.key),this.keysLoop(a.right,b))},balance:function(a,b,d,l){var c;c=null==a?0:a._height;var n;n=null==l?0:l._height;
return c>n+2?function(){var b=a.left;return null==b?0:b._height}(this)>=function(){var b=a.right;return null==b?0:b._height}(this)?new Za(a.left,a.key,a.value,new Za(a.right,b,d,l)):new Za(new Za(a.left,a.key,a.value,a.right.left),a.right.key,a.right.value,new Za(a.right.right,b,d,l)):n>c+2?function(){var a=l.right;return null==a?0:a._height}(this)>function(){var a=l.left;return null==a?0:a._height}(this)?new Za(new Za(a,b,d,l.left),l.key,l.value,l.right):new Za(new Za(a,b,d,l.left.left),l.left.key,
l.left.value,new Za(l.left.right,l.key,l.value,l.right)):new Za(a,b,d,l,(c>n?c:n)+1)},compare:function(a,b){return pa.compare(a,b)},__class__:wg};var Za=function(a,b,d,l,c){null==c&&(c=-1);this.left=a;this.key=b;this.value=d;this.right=l;this._height=-1==c?(function(a){a=a.left;return null==a?0:a._height}(this)>function(a){a=a.right;return null==a?0:a._height}(this)?function(a){a=a.left;return null==a?0:a._height}(this):function(a){a=a.right;return null==a?0:a._height}(this))+1:c};h["haxe.ds.TreeNode"]=
Za;Za.__name__=!0;Za.prototype={__class__:Za};var ua=function(){};h["haxe.ds.EnumValueMap"]=ua;ua.__name__=!0;ua.__interfaces__=[Xd];ua.__super__=wg;ua.prototype=t(wg.prototype,{compare:function(a,b){var d=a[1]-b[1];if(0!=d)return d;var d=a.slice(2),l=b.slice(2);return 0==d.length&&0==l.length?0:this.compareArgs(d,l)},compareArgs:function(a,b){var d=a.length-b.length;if(0!=d)return d;for(var d=0,l=a.length;d<l;){var c=d++,c=this.compareArg(a[c],b[c]);if(0!=c)return c}return 0},compareArg:function(a,
b){return pa.isEnumValue(a)&&pa.isEnumValue(b)?this.compare(a,b):a instanceof Array&&null==a.__enum__&&b instanceof Array&&null==b.__enum__?this.compareArgs(a,b):pa.compare(a,b)},__class__:ua});var $h=function(a,b){this.elt=a;this.next=b};h["haxe.ds.GenericCell"]=$h;$h.__name__=!0;$h.prototype={__class__:$h};var ai=function(){};h["haxe.ds.GenericStack"]=ai;ai.__name__=!0;ai.prototype={add:function(a){this.head=new $h(a,this.head)},pop:function(){var a=this.head;if(null==a)return null;this.head=a.next;
return a.elt},__class__:ai};var rc=function(){this.h={}};h["haxe.ds.IntMap"]=rc;rc.__name__=!0;rc.__interfaces__=[Xd];rc.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},__class__:rc};var za=function(){this.h={};this.h.__keys__={}};h["haxe.ds.ObjectMap"]=za;za.__name__=!0;za.__interfaces__=[Xd];za.prototype={set:function(a,b){var d=a.__id__||
(a.__id__=++za.count);this.h[d]=b;this.h.__keys__[d]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return C.iter(a)},__class__:za};var D=function(){this.h={}};h["haxe.ds.StringMap"]=D;D.__name__=!0;D.__interfaces__=[Xd];D.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+
a)},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return C.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},__class__:D};var sc=function(a,b){this.length=a;this.b=b};h["haxe.io.Bytes"]=sc;sc.__name__=!0;sc.alloc=function(a){for(var b=[],d=0;d<a;)d++,b.push(0);
return new sc(a,b)};sc.ofString=function(a){for(var b=[],d=0;d<a.length;){var l=ya.fastCodeAt(a,d++);55296<=l&&56319>=l&&(l=l-55232<<10|ya.fastCodeAt(a,d++)&1023);127>=l?b.push(l):(2047>=l?b.push(192|l>>6):(65535>=l?b.push(224|l>>12):(b.push(240|l>>18),b.push(128|l>>12&63)),b.push(128|l>>6&63)),b.push(128|l&63))}return new sc(b.length,b)};sc.prototype={getString:function(a,b){if(0>a||0>b||a+b>this.length)throw La.OutsideBounds;for(var d="",l=this.b,c=String.fromCharCode,n=a,p=a+b;n<p;){var T=l[n++];
if(128>T){if(0==T)break;d+=c(T)}else if(224>T)d+=c((T&63)<<6|l[n++]&127);else if(240>T)var e=l[n++],d=d+c((T&31)<<12|(e&127)<<6|l[n++]&127);else var e=l[n++],i=l[n++],T=(T&15)<<18|(e&127)<<12|(i&127)<<6|l[n++]&127,d=d+c((T>>10)+55232),d=d+c(T&1023|56320)}return d},toString:function(){return this.getString(0,this.length)},__class__:sc};var bi=function(){this.b=[]};h["haxe.io.BytesBuffer"]=bi;bi.__name__=!0;bi.prototype={getBytes:function(){var a=new sc(this.b.length,this.b);this.b=null;return a},__class__:bi};
var pf=function(){};h["haxe.io.Input"]=pf;pf.__name__=!0;pf.prototype={readByte:function(){throw"Not implemented";},readBytes:function(a,b,d){var l=d,c=a.b;if(0>b||0>d||b+d>a.length)throw La.OutsideBounds;for(;0<l;)c[b]=this.readByte(),b++,l--;return d},readFullBytes:function(a,b,d){for(;0<d;)var l=this.readBytes(a,b,d),b=b+l,d=d-l},readString:function(a){var b=sc.alloc(a);this.readFullBytes(b,0,a);return b.toString()},__class__:pf};var Ld=function(a,b,d){null==b&&(b=0);null==d&&(d=a.length-b);if(0>
b||0>d||b+d>a.length)throw La.OutsideBounds;this.b=a.b;this.pos=b;this.totlen=this.len=d};h["haxe.io.BytesInput"]=Ld;Ld.__name__=!0;Ld.__super__=pf;Ld.prototype=t(pf.prototype,{readByte:function(){if(0==this.len)throw new xg;this.len--;return this.b[this.pos++]},readBytes:function(a,b,d){if(0>b||0>d||b+d>a.length)throw La.OutsideBounds;if(0==this.len&&0<d)throw new xg;this.len<d&&(d=this.len);for(var l=this.b,a=a.b,c=0;c<d;){var n=c++;a[b+n]=l[this.pos+n]}this.pos+=d;this.len-=d;return d},__class__:Ld});
var Ij=function(){};h["haxe.io.Output"]=Ij;Ij.__name__=!0;var qf=function(){this.b=new bi};h["haxe.io.BytesOutput"]=qf;qf.__name__=!0;qf.__super__=Ij;qf.prototype=t(Ij.prototype,{writeByte:function(a){this.b.b.push(a)},getBytes:function(){return this.b.getBytes()},__class__:qf});var xg=function(){};h["haxe.io.Eof"]=xg;xg.__name__=!0;xg.prototype={toString:function(){return"Eof"},__class__:xg};var La=h["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};La.Blocked=
["Blocked",0];La.Blocked.toString=g;La.Blocked.__enum__=La;La.Overflow=["Overflow",1];La.Overflow.toString=g;La.Overflow.__enum__=La;La.OutsideBounds=["OutsideBounds",2];La.OutsideBounds.toString=g;La.OutsideBounds.__enum__=La;La.Custom=function(a){a=["Custom",3,a];a.__enum__=La;a.toString=g;return a};var yg=function(a){Ld.call(this,sc.ofString(a))};h["haxe.io.StringInput"]=yg;yg.__name__=!0;yg.__super__=Ld;yg.prototype=t(Ld.prototype,{__class__:yg});var dc=h["haxe.xml.Filter"]={__ename__:!0,__constructs__:["FInt",
"FBool","FEnum","FReg"]};dc.FInt=["FInt",0];dc.FInt.toString=g;dc.FInt.__enum__=dc;dc.FBool=["FBool",1];dc.FBool.toString=g;dc.FBool.__enum__=dc;dc.FEnum=function(a){a=["FEnum",2,a];a.__enum__=dc;a.toString=g;return a};dc.FReg=function(a){a=["FReg",3,a];a.__enum__=dc;a.toString=g;return a};var Pb=h["haxe.xml.Attrib"]={__ename__:!0,__constructs__:["Att"]};Pb.Att=function(a,b,d){a=["Att",0,a,b,d];a.__enum__=Pb;a.toString=g;return a};var A=h["haxe.xml.Rule"]={__ename__:!0,__constructs__:"RNode,RData,RMulti,RList,RChoice,ROptional".split(",")};
A.RNode=function(a,b,d){a=["RNode",0,a,b,d];a.__enum__=A;a.toString=g;return a};A.RData=function(a){a=["RData",1,a];a.__enum__=A;a.toString=g;return a};A.RMulti=function(a,b){var d=["RMulti",2,a,b];d.__enum__=A;d.toString=g;return d};A.RList=function(a,b){var d=["RList",3,a,b];d.__enum__=A;d.toString=g;return d};A.RChoice=function(a){a=["RChoice",4,a];a.__enum__=A;a.toString=g;return a};A.ROptional=function(a){a=["ROptional",5,a];a.__enum__=A;a.toString=g;return a};var Y=h["haxe.xml._Check.CheckResult"]=
{__ename__:!0,__constructs__:"CMatch,CMissing,CExtra,CElementExpected,CDataExpected,CExtraAttrib,CMissingAttrib,CInvalidAttrib,CInvalidData,CInElement".split(",")};Y.CMatch=["CMatch",0];Y.CMatch.toString=g;Y.CMatch.__enum__=Y;Y.CMissing=function(a){a=["CMissing",1,a];a.__enum__=Y;a.toString=g;return a};Y.CExtra=function(a){a=["CExtra",2,a];a.__enum__=Y;a.toString=g;return a};Y.CElementExpected=function(a,b){var d=["CElementExpected",3,a,b];d.__enum__=Y;d.toString=g;return d};Y.CDataExpected=function(a){a=
["CDataExpected",4,a];a.__enum__=Y;a.toString=g;return a};Y.CExtraAttrib=function(a,b){var d=["CExtraAttrib",5,a,b];d.__enum__=Y;d.toString=g;return d};Y.CMissingAttrib=function(a,b){var d=["CMissingAttrib",6,a,b];d.__enum__=Y;d.toString=g;return d};Y.CInvalidAttrib=function(a,b,d){a=["CInvalidAttrib",7,a,b,d];a.__enum__=Y;a.toString=g;return a};Y.CInvalidData=function(a,b){var d=["CInvalidData",8,a,b];d.__enum__=Y;d.toString=g;return d};Y.CInElement=function(a,b){var d=["CInElement",9,a,b];d.__enum__=
Y;d.toString=g;return d};var E=function(){};h["haxe.xml.Check"]=E;E.__name__=!0;E.isBlank=function(a){return a.nodeType==w.PCData&&E.blanks.match(a.get_nodeValue())||a.nodeType==w.Comment};E.filterMatch=function(a,b){switch(b[1]){case 0:return E.filterMatch(a,dc.FReg(new bc("[0-9]+","")));case 1:return E.filterMatch(a,dc.FEnum(["true","false","0","1"]));case 2:for(var d=b[2],l=0;l<d.length;){var c=d[l];++l;if(a==c)return!0}return!1;case 3:return b[2].match(a)}};E.isNullable=function(a){switch(a[1]){case 2:var b=
a[2];return!0!=a[3]||E.isNullable(b);case 3:a=a[2];for(b=0;b<a.length;){var d=a[b];++b;if(!E.isNullable(d))return!1}return!0;case 4:a=a[2];for(b=0;b<a.length;)if(d=a[b],++b,E.isNullable(d))return!0;return!1;case 1:return!1;case 0:return!1;case 5:return!0}};E.check=function(a,b){switch(b[1]){case 0:var d=b[4],l=b[3],c=b[2];if(a.nodeType!=w.Element||a.get_nodeName()!=c)return Y.CElementExpected(c,a);l=null==l?[]:l.slice();for(c=a.attributes();c.hasNext();){for(var n=c.next(),p=!1,T=0;T<l.length;){var e=
l[T];++T;var i=e[3],h=e[2];if(n==h){if(null!=i&&!E.filterMatch(a.get(n),i))return Y.CInvalidAttrib(h,a,i);C.remove(l,e);p=!0}}if(!p)return Y.CExtraAttrib(n,a)}for(c=0;c<l.length;)if(n=l[c],++c,p=n[2],null==n[4])return Y.CMissingAttrib(p,a);null==d&&(d=A.RList([]));d=E.checkList(a.iterator(),d);if(d!=Y.CMatch)return Y.CInElement(a,d);for(d=0;d<l.length;)c=l[d],++d,a.set(c[2],c[4]);return Y.CMatch;case 1:return l=b[2],a.nodeType!=w.PCData&&a.nodeType!=w.CData?Y.CDataExpected(a):null!=l&&!E.filterMatch(a.get_nodeValue(),
l)?Y.CInvalidData(a,l):Y.CMatch;case 4:l=b[2];if(0==l.length)throw"No choice possible";for(d=0;d<l.length;)if(c=l[d],++d,E.check(a,c)==Y.CMatch)return Y.CMatch;return E.check(a,l[0]);case 5:return E.check(a,b[2]);default:throw"Unexpected "+o.string(b);}};E.checkList=function(a,b){switch(b[1]){case 3:for(var d=b[3],l=b[2].slice();a.hasNext();){var c=a.next();if(!E.isBlank(c)){for(var n=!1,p=0;p<l.length;){var e=l[p];++p;var i=E.checkList(C.iter([c]),e);if(i==Y.CMatch){n=!0;switch(e[1]){case 2:p=e[2];
if(e[3])for(var i=0,h=l.length;i<h;){var g=i++;l[g]==e&&(l[g]=A.RMulti(p))}break;default:C.remove(l,e)}break}else if(d&&!E.isNullable(e))return i}if(!n)return Y.CExtra(c)}}for(d=0;d<l.length;)if(c=l[d],++d,!E.isNullable(c))return Y.CMissing(c);return Y.CMatch;case 2:l=b[3];d=b[2];for(c=!1;a.hasNext();)if(n=a.next(),!E.isBlank(n)){c=E.checkList(C.iter([n]),d);if(c!=Y.CMatch)return c;c=!0}return l&&!c?Y.CMissing(d):Y.CMatch;default:for(l=!1;a.hasNext();)if(d=a.next(),!E.isBlank(d)){l=E.check(d,b);if(l!=
Y.CMatch)return l;l=!0;break}if(!l)switch(b[1]){case 5:break;default:return Y.CMissing(b)}for(;a.hasNext();)if(l=a.next(),!E.isBlank(l))return Y.CExtra(l);return Y.CMatch}};E.makeWhere=function(a){if(0==a.length)return"";for(var b="In ",d=!0,l=0;l<a.length;){var c=a[l];++l;d?d=!1:b+=".";b+=c.get_nodeName()}return b+": "};E.makeString=function(a){if(a.nodeType==w.Element)return"element "+a.get_nodeName();a=a.get_nodeValue().split("\r").join("\\r").split("\n").join("\\n").split("\t").join("\\t");return 20<
a.length?C.substr(a,0,17)+"...":a};E.makeRule=function(a){switch(a[1]){case 0:return"element "+a[2];case 1:return"data";case 2:return E.makeRule(a[2]);case 3:return E.makeRule(a[2][0]);case 4:return E.makeRule(a[2][0]);case 5:return E.makeRule(a[2])}};E.makeError=function(a,b){null==b&&(b=[]);switch(a[1]){case 0:throw"assert";case 1:var d=a[2];return E.makeWhere(b)+"Missing "+E.makeRule(d);case 2:return d=a[2],E.makeWhere(b)+"Unexpected "+E.makeString(d);case 3:var d=a[3],l=a[2];return E.makeWhere(b)+
E.makeString(d)+" while expected element "+l;case 4:return d=a[2],E.makeWhere(b)+E.makeString(d)+" while data expected";case 5:return d=a[2],b.push(a[3]),E.makeWhere(b)+"unexpected attribute "+d;case 6:return d=a[2],b.push(a[3]),E.makeWhere(b)+"missing required attribute "+d;case 7:return d=a[2],b.push(a[3]),E.makeWhere(b)+"invalid attribute value for "+d;case 8:return d=a[2],E.makeWhere(b)+"invalid data format for "+E.makeString(d);case 9:return d=a[3],b.push(a[2]),E.makeError(d,b)}};E.checkNode=
function(a,b){var d=E.checkList(C.iter([a]),b);if(d!=Y.CMatch)throw E.makeError(d);};var ci=function(a){this.__x=a};h["haxe.xml._Fast.NodeAccess"]=ci;ci.__name__=!0;ci.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b)throw(this.__x.nodeType==w.Document?"Document":this.__x.get_nodeName())+" is missing element "+a;return new Md(b)},__class__:ci};var di=function(a){this.__x=a};h["haxe.xml._Fast.AttribAccess"]=di;di.__name__=!0;di.prototype={resolve:function(a){if(this.__x.nodeType==
w.Document)throw"Cannot access document attribute "+a;var b=this.__x.get(a);if(null==b)throw this.__x.get_nodeName()+" is missing attribute "+a;return b},__class__:di};var ei=function(a){this.__x=a};h["haxe.xml._Fast.HasAttribAccess"]=ei;ei.__name__=!0;ei.prototype={resolve:function(a){if(this.__x.nodeType==w.Document)throw"Cannot access document attribute "+a;return this.__x.exists(a)},__class__:ei};var fi=function(a){this.__x=a};h["haxe.xml._Fast.HasNodeAccess"]=fi;fi.__name__=!0;fi.prototype={resolve:function(a){return this.__x.elementsNamed(a).hasNext()},
__class__:fi};var gi=function(a){this.__x=a};h["haxe.xml._Fast.NodeListAccess"]=gi;gi.__name__=!0;gi.prototype={resolve:function(a){for(var b=new Dh,a=this.__x.elementsNamed(a);a.hasNext();){var d=a.next();b.add(new Md(d))}return b},__class__:gi};var Md=function(a){if(a.nodeType!=w.Document&&a.nodeType!=w.Element)throw"Invalid nodeType "+o.string(a.nodeType);this.x=a;this.node=new ci(a);this.nodes=new gi(a);this.att=new di(a);this.has=new ei(a);this.hasNode=new fi(a)};h["haxe.xml.Fast"]=Md;Md.__name__=
!0;Md.prototype={get_name:function(){return this.x.nodeType==w.Document?"Document":this.x.get_nodeName()},get_elements:function(){var a=this.x.elements();return{hasNext:x(a,a.hasNext),next:function(){var b=a.next();return null==b?null:new Md(b)}}},__class__:Md};var ad=function(){};h["haxe.xml.Parser"]=ad;ad.__name__=!0;ad.parse=function(a){var b=w.createDocument();ad.doParse(a,0,b);return b};ad.doParse=function(a,b,d){null==b&&(b=0);for(var l=null,c=1,n=1,p=null,e=0,i=0,h=0,g=a.charCodeAt(b),j=new Xe;g==
g;){switch(c){case 0:switch(g){case 10:case 13:case 9:case 32:break;default:c=n;continue}break;case 1:switch(g){case 60:c=0;n=2;break;default:e=b;c=13;continue}break;case 13:60==g?(n=w.createPCData(j.b+C.substr(a,e,b-e)),j=new Xe,d.addChild(n),i++,c=0,n=2):38==g&&(j.addSub(a,e,b-e),c=18,n=13,e=b+1);break;case 17:93==g&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c=w.createCData(C.substr(a,e,b-e)),d.addChild(c),i++,b+=2,c=1);break;case 2:switch(g){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=
C.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;c=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=C.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;c=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;c=15}e=b+1;break;case 63:c=14;e=b;break;case 47:if(null==d)throw"Expected node name";e=b+1;c=0;n=10;break;default:c=3;e=b;continue}break;case 3:if(!(97<=g&&122>=g||65<=g&&90>=g||48<=g&&57>=g||58==g||46==g||95==g||45==g)){if(b==
e)throw"Expected node name";l=w.createElement(C.substr(a,e,b-e));d.addChild(l);c=0;n=4;continue}break;case 4:switch(g){case 47:c=11;i++;break;case 62:c=9;i++;break;default:c=5;e=b;continue}break;case 5:if(!(97<=g&&122>=g||65<=g&&90>=g||48<=g&&57>=g||58==g||46==g||95==g||45==g)){if(e==b)throw"Expected attribute name";p=C.substr(a,e,b-e);if(l.exists(p))throw"Duplicate attribute";c=0;n=6;continue}break;case 6:switch(g){case 61:c=0;n=7;break;default:throw"Expected =";}break;case 7:switch(g){case 34:case 39:c=
8;e=b;break;default:throw'Expected "';}break;case 8:g==a.charCodeAt(e)&&(n=C.substr(a,e+1,b-e-1),l.set(p,n),c=0,n=4);break;case 9:e=b=ad.doParse(a,b,l);c=1;break;case 11:switch(g){case 62:c=1;break;default:throw"Expected >";}break;case 12:switch(g){case 62:return 0==i&&d.addChild(w.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=g&&122>=g||65<=g&&90>=g||48<=g&&57>=g||58==g||46==g||95==g||45==g)){if(e==b)throw"Expected node name";if(C.substr(a,e,b-e)!=d.get_nodeName())throw"Expected </"+
d.get_nodeName()+">";c=0;n=12;continue}break;case 15:45==g&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(d.addChild(w.createComment(C.substr(a,e,b-e))),b+=2,c=1);break;case 16:91==g?h++:93==g?h--:62==g&&0==h&&(d.addChild(w.createDocType(C.substr(a,e,b-e))),c=1);break;case 14:63==g&&62==a.charCodeAt(b+1)&&(b++,c=C.substr(a,e+1,b-e-2),d.addChild(w.createProcessingInstruction(c)),c=1);break;case 18:59==g&&(e=C.substr(a,e,b-e),35==e.charCodeAt(0)?(e=120==e.charCodeAt(1)?o.parseInt("0"+C.substr(e,1,
e.length-1)):o.parseInt(C.substr(e,1,e.length-1)),j.add(String.fromCharCode(e))):ad.escapes.exists(e)?j.add(ad.escapes.get(e)):j.b+=o.string("&"+e+";"),e=b+1,c=n)}g=ya.fastCodeAt(a,++b)}1==c&&(e=b,c=13);if(13==c)return(b!=e||0==i)&&d.addChild(w.createPCData(j.b+C.substr(a,e,b-e))),b;throw"Unexpected end";};var Cb=h["hscript.Const"]={__ename__:!0,__constructs__:["CInt","CFloat","CString"]};Cb.CInt=function(a){a=["CInt",0,a];a.__enum__=Cb;a.toString=g;return a};Cb.CFloat=function(a){a=["CFloat",1,a];
a.__enum__=Cb;a.toString=g;return a};Cb.CString=function(a){a=["CString",2,a];a.__enum__=Cb;a.toString=g;return a};var r=h["hscript.Expr"]={__ename__:!0,__constructs__:"EConst,EIdent,EVar,EParent,EBlock,EField,EBinop,EUnop,ECall,EIf,EWhile,EFor,EBreak,EContinue,EFunction,EReturn,EArray,EArrayDecl,ENew,EThrow,ETry,EObject,ETernary,ESwitch".split(",")};r.EConst=function(a){a=["EConst",0,a];a.__enum__=r;a.toString=g;return a};r.EIdent=function(a){a=["EIdent",1,a];a.__enum__=r;a.toString=g;return a};
r.EVar=function(a,b,d){a=["EVar",2,a,b,d];a.__enum__=r;a.toString=g;return a};r.EParent=function(a){a=["EParent",3,a];a.__enum__=r;a.toString=g;return a};r.EBlock=function(a){a=["EBlock",4,a];a.__enum__=r;a.toString=g;return a};r.EField=function(a,b){var d=["EField",5,a,b];d.__enum__=r;d.toString=g;return d};r.EBinop=function(a,b,d){a=["EBinop",6,a,b,d];a.__enum__=r;a.toString=g;return a};r.EUnop=function(a,b,d){a=["EUnop",7,a,b,d];a.__enum__=r;a.toString=g;return a};r.ECall=function(a,b){var d=["ECall",
8,a,b];d.__enum__=r;d.toString=g;return d};r.EIf=function(a,b,d){a=["EIf",9,a,b,d];a.__enum__=r;a.toString=g;return a};r.EWhile=function(a,b){var d=["EWhile",10,a,b];d.__enum__=r;d.toString=g;return d};r.EFor=function(a,b,d){a=["EFor",11,a,b,d];a.__enum__=r;a.toString=g;return a};r.EBreak=["EBreak",12];r.EBreak.toString=g;r.EBreak.__enum__=r;r.EContinue=["EContinue",13];r.EContinue.toString=g;r.EContinue.__enum__=r;r.EFunction=function(a,b,d,l){a=["EFunction",14,a,b,d,l];a.__enum__=r;a.toString=g;
return a};r.EReturn=function(a){a=["EReturn",15,a];a.__enum__=r;a.toString=g;return a};r.EArray=function(a,b){var d=["EArray",16,a,b];d.__enum__=r;d.toString=g;return d};r.EArrayDecl=function(a){a=["EArrayDecl",17,a];a.__enum__=r;a.toString=g;return a};r.ENew=function(a,b){var d=["ENew",18,a,b];d.__enum__=r;d.toString=g;return d};r.EThrow=function(a){a=["EThrow",19,a];a.__enum__=r;a.toString=g;return a};r.ETry=function(a,b,d,l){a=["ETry",20,a,b,d,l];a.__enum__=r;a.toString=g;return a};r.EObject=function(a){a=
["EObject",21,a];a.__enum__=r;a.toString=g;return a};r.ETernary=function(a,b,d){a=["ETernary",22,a,b,d];a.__enum__=r;a.toString=g;return a};r.ESwitch=function(a,b,d){a=["ESwitch",23,a,b,d];a.__enum__=r;a.toString=g;return a};var Qb=h["hscript.CType"]={__ename__:!0,__constructs__:["CTPath","CTFun","CTAnon","CTParent"]};Qb.CTPath=function(a,b){var d=["CTPath",0,a,b];d.__enum__=Qb;d.toString=g;return d};Qb.CTFun=function(a,b){var d=["CTFun",1,a,b];d.__enum__=Qb;d.toString=g;return d};Qb.CTAnon=function(a){a=
["CTAnon",2,a];a.__enum__=Qb;a.toString=g;return a};Qb.CTParent=function(a){a=["CTParent",3,a];a.__enum__=Qb;a.toString=g;return a};var fa=h["hscript.Error"]={__ename__:!0,__constructs__:"EInvalidChar,EUnexpected,EUnterminatedString,EUnterminatedComment,EUnknownVariable,EInvalidIterator,EInvalidOp,EInvalidAccess".split(",")};fa.EInvalidChar=function(a){a=["EInvalidChar",0,a];a.__enum__=fa;a.toString=g;return a};fa.EUnexpected=function(a){a=["EUnexpected",1,a];a.__enum__=fa;a.toString=g;return a};
fa.EUnterminatedString=["EUnterminatedString",2];fa.EUnterminatedString.toString=g;fa.EUnterminatedString.__enum__=fa;fa.EUnterminatedComment=["EUnterminatedComment",3];fa.EUnterminatedComment.toString=g;fa.EUnterminatedComment.__enum__=fa;fa.EUnknownVariable=function(a){a=["EUnknownVariable",4,a];a.__enum__=fa;a.toString=g;return a};fa.EInvalidIterator=function(a){a=["EInvalidIterator",5,a];a.__enum__=fa;a.toString=g;return a};fa.EInvalidOp=function(a){a=["EInvalidOp",6,a];a.__enum__=fa;a.toString=
g;return a};fa.EInvalidAccess=function(a){a=["EInvalidAccess",7,a];a.__enum__=fa;a.toString=g;return a};var Sa=h["hscript._Interp.Stop"]={__ename__:!0,__constructs__:["SBreak","SContinue","SReturn"]};Sa.SBreak=["SBreak",0];Sa.SBreak.toString=g;Sa.SBreak.__enum__=Sa;Sa.SContinue=["SContinue",1];Sa.SContinue.toString=g;Sa.SContinue.__enum__=Sa;Sa.SReturn=function(a){a=["SReturn",2,a];a.__enum__=Sa;a.toString=g;return a};var hi=function(){this.variables=new D;this.locals=new D;this.variables.set("null",
null);this.variables.set("true",!0);this.variables.set("false",!1);this.variables.set("trace",function(a){Gj.trace(o.string(a),{fileName:"hscript",lineNumber:0})});this.initOps()};h["hscript.Interp"]=hi;hi.__name__=!0;hi.prototype={initOps:function(){var a=this;this.binops=new D;this.binops.set("+",function(b,d){return a.expr(b)+a.expr(d)});this.binops.set("-",function(b,d){return a.expr(b)-a.expr(d)});this.binops.set("*",function(b,d){return a.expr(b)*a.expr(d)});this.binops.set("/",function(b,d){return a.expr(b)/
a.expr(d)});this.binops.set("%",function(b,d){return a.expr(b)%a.expr(d)});this.binops.set("&",function(b,d){return a.expr(b)&a.expr(d)});this.binops.set("|",function(b,d){return a.expr(b)|a.expr(d)});this.binops.set("^",function(b,d){return a.expr(b)^a.expr(d)});this.binops.set("<<",function(b,d){return a.expr(b)<<a.expr(d)});this.binops.set(">>",function(b,d){return a.expr(b)>>a.expr(d)});this.binops.set(">>>",function(b,d){return a.expr(b)>>>a.expr(d)});this.binops.set("==",function(b,d){return a.expr(b)==
a.expr(d)});this.binops.set("!=",function(b,d){return a.expr(b)!=a.expr(d)});this.binops.set(">=",function(b,d){return a.expr(b)>=a.expr(d)});this.binops.set("<=",function(b,d){return a.expr(b)<=a.expr(d)});this.binops.set(">",function(b,d){return a.expr(b)>a.expr(d)});this.binops.set("<",function(b,d){return a.expr(b)<a.expr(d)});this.binops.set("||",function(b,d){return!0==a.expr(b)||!0==a.expr(d)});this.binops.set("&&",function(b,d){return!0==a.expr(b)&&!0==a.expr(d)});this.binops.set("=",x(this,
this.assign));this.binops.set("...",function(b,d){return new Ch(a.expr(b),a.expr(d))});this.assignOp("+=",function(a,d){return a+d});this.assignOp("-=",function(a,d){return a-d});this.assignOp("*=",function(a,d){return a*d});this.assignOp("/=",function(a,d){return a/d});this.assignOp("%=",function(a,d){return a%d});this.assignOp("&=",function(a,d){return a&d});this.assignOp("|=",function(a,d){return a|d});this.assignOp("^=",function(a,d){return a^d});this.assignOp("<<=",function(a,d){return a<<d});
this.assignOp(">>=",function(a,d){return a>>d});this.assignOp(">>>=",function(a,d){return a>>>d})},assign:function(a,b){var d=this.expr(b);switch(a[1]){case 1:var l=a[2],c=this.locals.get(l);null==c?this.variables.set(l,d):c.r=d;break;case 5:l=a[3];d=this.set(this.expr(a[2]),l,d);break;case 16:l=a[3];this.expr(a[2])[this.expr(l)]=d;break;default:this.error(fa.EInvalidOp("="))}return d},assignOp:function(a,b){var d=this;this.binops.set(a,function(l,c){return d.evalAssignOp(a,b,l,c)})},evalAssignOp:function(a,
b,d,l){switch(d[1]){case 1:var a=d[2],c=this.locals.get(a),b=b(this.expr(d),this.expr(l));null==c?this.variables.set(a,b):c.r=b;break;case 5:a=d[3];d=this.expr(d[2]);b=b(this.get(d,a),this.expr(l));b=this.set(d,a,b);break;case 16:a=d[3];d=this.expr(d[2]);a=this.expr(a);b=b(d[a],this.expr(l));d[a]=b;break;default:return this.error(fa.EInvalidOp(a))}return b},increment:function(a,b,d){switch(a[1]){case 1:var l=a[2],a=this.locals.get(l),c;c=null==a?this.variables.get(l):a.r;b?(c+=d,null==a?this.variables.set(l,
c):a.r=c):null==a?this.variables.set(l,c+d):a.r=c+d;return c;case 5:return l=a[3],a=this.expr(a[2]),c=this.get(a,l),b?(c+=d,this.set(a,l,c)):this.set(a,l,c+d),c;case 16:return c=a[3],l=this.expr(a[2]),a=this.expr(c),c=l[a],b?(c+=d,l[a]=c):l[a]=c+d,c;default:return this.error(fa.EInvalidOp(0<d?"++":"--"))}},execute:function(a){this.depth=0;this.locals=new D;this.declared=[];return this.exprReturn(a)},exprReturn:function(a){try{return this.expr(a)}catch(b){if(v.__instanceof(b,Sa))switch(b[1]){case 0:throw"Invalid break";
case 1:throw"Invalid continue";case 2:return b[2]}else throw b;}return null},duplicate:function(a){for(var b=new D,d=a.keys();d.hasNext();){var c=d.next(),f=a.get(c);b.set(c,f)}return b},restore:function(a){for(;this.declared.length>a;){var b=this.declared.pop();this.locals.set(b.n,b.old)}},error:function(a){throw a;},resolve:function(a){var b=this.locals.get(a);if(null!=b)return b.r;b=this.variables.get(a);null==b&&!this.variables.exists(a)&&this.error(fa.EUnknownVariable(a));return b},expr:function(a){switch(a[1]){case 0:a=
a[2];switch(a[1]){case 0:return a[2];case 1:return a[2];case 2:return a[2]}break;case 1:return this.resolve(a[2]);case 2:var b=a[4],a=a[2];this.declared.push({n:a,old:this.locals.get(a)});b={r:null==b?null:this.expr(b)};this.locals.set(a,b);break;case 3:return this.expr(a[2]);case 4:for(var a=a[2],b=this.declared.length,d=null,c=0;c<a.length;)d=a[c],++c,d=this.expr(d);this.restore(b);return d;case 5:return b=a[3],this.get(this.expr(a[2]),b);case 6:return b=a[4],c=a[3],a=a[2],d=this.binops.get(a),
null==d&&this.error(fa.EInvalidOp(a)),d(c,b);case 7:b=a[4];c=a[3];a=a[2];switch(a){case "!":return!0!=this.expr(b);case "-":return-this.expr(b);case "++":return this.increment(b,c,1);case "--":return this.increment(b,c,-1);case "~":return~this.expr(b);default:this.error(fa.EInvalidOp(a))}break;case 8:b=a[3];c=a[2];a=[];for(d=0;d<b.length;){var f=b[d];++d;a.push(this.expr(f))}switch(c[1]){case 5:return b=c[3],c=this.expr(c[2]),null==c&&this.error(fa.EInvalidAccess(b)),this.fcall(c,b,a);default:return this.call(null,
this.expr(c),a)}case 9:b=a[4];c=a[3];if(!0==this.expr(a[2]))return this.expr(c);if(null==b)break;else return this.expr(b);case 10:this.whileLoop(a[2],a[3]);break;case 11:this.forLoop(a[2],a[3],a[4]);break;case 12:throw Sa.SBreak;case 13:throw Sa.SContinue;case 15:throw a=a[2],Sa.SReturn(null==a?null:this.expr(a));case 14:for(var n=a[4],p=a[3],e=a[2],i=this.duplicate(this.locals),g=this,h=0,a=0;a<e.length;)b=e[a],++a,b.opt||h++;a=pa.makeVarArgs(function(a){if(a.length!=e.length){if(a.length<h)throw a=
"Invalid number of parameters. Got "+a.length+", required "+h,null!=n&&(a+=" for function '"+n+"'"),a;for(var b=[],d=a.length-h,c=0,l=0;l<e.length;){var f=e[l];++l;f.opt?0<d?(b.push(a[c++]),d--):b.push(null):b.push(a[c++])}a=b}b=g.locals;d=g.depth;g.depth++;g.locals=g.duplicate(i);c=0;for(l=e.length;c<l;)f=c++,g.locals.set(e[f].name,{r:a[f]});a=null;try{a=g.exprReturn(p)}catch(j){throw g.locals=b,g.depth=d,j;}g.locals=b;g.depth=d;return a});null!=n&&(0==this.depth?this.variables.set(n,a):(this.declared.push({n:n,
old:this.locals.get(n)}),b={r:a},this.locals.set(n,b),i.set(n,b)));return a;case 17:a=a[2];b=[];for(c=0;c<a.length;)d=a[c],++c,b.push(this.expr(d));return b;case 16:return b=a[3],this.expr(a[2])[this.expr(b)];case 18:b=a[3];a=a[2];c=[];for(d=0;d<b.length;)f=b[d],++d,c.push(this.expr(f));return this.cnew(a,c);case 19:throw this.expr(a[2]);case 20:b=a[5];c=a[3];f=a[2];a=this.declared.length;try{return d=this.expr(f),this.restore(a),d}catch(j){if(v.__instanceof(j,Sa))throw j;this.restore(a);this.declared.push({n:c,
old:this.locals.get(c)});this.locals.set(c,{r:j});b=this.expr(b);this.restore(a);return b}case 21:a=a[2];b={};for(c=0;c<a.length;)d=a[c],++c,this.set(b,d.name,this.expr(d.e));return b;case 22:return b=a[4],c=a[3],!0==this.expr(a[2])?this.expr(c):this.expr(b);case 23:b=a[4];c=a[3];a=this.expr(a[2]);d=!1;for(f=0;f<c.length;){var k=c[f];++f;for(var m=0,q=k.values;m<q.length;){var o=q[m];++m;if(this.expr(o)==a){d=!0;break}}if(d){a=this.expr(k.expr);break}}d||(a=null==b?null:this.expr(b));return a}return null},
whileLoop:function(a,b){var d=this.declared.length;try{for(;!0==this.expr(a);)try{this.expr(b)}catch(c){if(v.__instanceof(c,Sa))switch(c[1]){case 0:throw"__break__";case 2:throw c;}else throw c;}}catch(f){if("__break__"!=f)throw f;}this.restore(d)},makeIterator:function(a){try{a=xj(a)()}catch(b){}(null==a.hasNext||null==a.next)&&this.error(fa.EInvalidIterator(a));return a},forLoop:function(a,b,d){var c=this.declared.length;this.declared.push({n:a,old:this.locals.get(a)});b=this.makeIterator(this.expr(b));
try{for(;b.hasNext();){var f={r:b.next()};this.locals.set(a,f);try{this.expr(d)}catch(n){if(v.__instanceof(n,Sa))switch(n[1]){case 0:throw"__break__";case 2:throw n;}else throw n;}}}catch(p){if("__break__"!=p)throw p;}this.restore(c)},get:function(a,b){null==a&&this.error(fa.EInvalidAccess(b));return pa.field(a,b)},set:function(a,b,d){null==a&&this.error(fa.EInvalidAccess(b));return a[b]=d},fcall:function(a,b,d){return this.call(a,pa.field(a,b),d)},call:function(a,b,d){return b.apply(a,d)},cnew:function(a,
b){var d=gb.resolveClass(a);null==d&&(d=this.resolve(a));return gb.createInstance(d,b)},__class__:hi};var s=h["hscript.Token"]={__ename__:!0,__constructs__:"TEof,TConst,TId,TOp,TPOpen,TPClose,TBrOpen,TBrClose,TDot,TComma,TSemicolon,TBkOpen,TBkClose,TQuestion,TDoubleDot".split(",")};s.TEof=["TEof",0];s.TEof.toString=g;s.TEof.__enum__=s;s.TConst=function(a){a=["TConst",1,a];a.__enum__=s;a.toString=g;return a};s.TId=function(a){a=["TId",2,a];a.__enum__=s;a.toString=g;return a};s.TOp=function(a){a=["TOp",
3,a];a.__enum__=s;a.toString=g;return a};s.TPOpen=["TPOpen",4];s.TPOpen.toString=g;s.TPOpen.__enum__=s;s.TPClose=["TPClose",5];s.TPClose.toString=g;s.TPClose.__enum__=s;s.TBrOpen=["TBrOpen",6];s.TBrOpen.toString=g;s.TBrOpen.__enum__=s;s.TBrClose=["TBrClose",7];s.TBrClose.toString=g;s.TBrClose.__enum__=s;s.TDot=["TDot",8];s.TDot.toString=g;s.TDot.__enum__=s;s.TComma=["TComma",9];s.TComma.toString=g;s.TComma.__enum__=s;s.TSemicolon=["TSemicolon",10];s.TSemicolon.toString=g;s.TSemicolon.__enum__=s;s.TBkOpen=
["TBkOpen",11];s.TBkOpen.toString=g;s.TBkOpen.__enum__=s;s.TBkClose=["TBkClose",12];s.TBkClose.toString=g;s.TBkClose.__enum__=s;s.TQuestion=["TQuestion",13];s.TQuestion.toString=g;s.TQuestion.__enum__=s;s.TDoubleDot=["TDoubleDot",14];s.TDoubleDot.toString=g;s.TDoubleDot.__enum__=s;var ii=function(){this.uid=0;this.line=1;this.opChars="+*/-=!><&|^%~";this.identChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_";var a=[["%"],["*","/"],["+","-"],["<<",">>",">>>"],["|","&","^"],"==,!=,>,<,>=,<=".split(","),
["..."],["&&"],["||"],"=,+=,-=,*=,/=,%=,<<=,>>=,>>>=,|=,&=,^=".split(",")];this.opPriority=new D;this.opRightAssoc=new D;this.unops=new D;for(var b=0,d=a.length;b<d;)for(var c=b++,f=0,n=a[c];f<n.length;){var p=n[f];++f;this.opPriority.set(p,c);9==c&&this.opRightAssoc.set(p,!0)}a=0;for(b=["!","++","--","-","~"];a<b.length;)d=b[a],++a,this.unops.set(d,"++"==d||"--"==d)};h["hscript.Parser"]=ii;ii.__name__=!0;ii.prototype={error:function(a){throw a;},invalidChar:function(a){this.error(fa.EInvalidChar(a),
0,0)},parseString:function(a){this.line=1;this.uid=0;return this.parse(new yg(a))},parse:function(a){this.tokens=new ai;this["char"]=-1;this.input=a;this.ops=[];this.idents=[];for(var a=0,b=this.opChars.length;a<b;){var d=a++;this.ops[C.cca(this.opChars,d)]=!0}a=0;for(b=this.identChars.length;a<b;)d=a++,this.idents[C.cca(this.identChars,d)]=!0;for(a=[];;){b=this.token();if(b==s.TEof)break;this.tokens.add(b);a.push(this.parseFullExpr())}return 1==a.length?a[0]:this.mk(r.EBlock(a),0,null)},unexpected:function(a){this.error(fa.EUnexpected(this.tokenString(a)),
0,0);return null},push:function(a){this.tokens.add(a)},ensure:function(a){var b=this.token();b!=a&&this.unexpected(b)},mk:function(a){return a},isBlock:function(a){switch(a[1]){case 4:case 21:case 23:return!0;case 14:return this.isBlock(a[3]);case 2:return a=a[4],null!=a&&this.isBlock(a);case 9:var b=a[4],a=a[3];return null!=b?this.isBlock(b):this.isBlock(a);case 6:return this.isBlock(a[4]);case 7:return b=a[4],!a[3]&&this.isBlock(b);case 10:return this.isBlock(a[3]);case 11:return this.isBlock(a[4]);
case 15:return a=a[2],null!=a&&this.isBlock(a);default:return!1}},parseFullExpr:function(){var a=this.parseExpr(),b=this.token();b!=s.TSemicolon&&b!=s.TEof&&(this.isBlock(a)?this.tokens.add(b):this.unexpected(b));return a},parseObject:function(a){var b=[];try{for(;;){var d=this.token(),c=null;switch(d[1]){case 2:c=d[2];break;case 1:var f=d[2];this.allowJSON||this.unexpected(d);switch(f[1]){case 2:c=f[2];break;default:this.unexpected(d)}break;case 7:throw"__break__";default:this.unexpected(d)}this.ensure(s.TDoubleDot);
b.push({name:c,e:this.parseExpr()});d=this.token();switch(d[1]){case 7:throw"__break__";case 9:break;default:this.unexpected(d)}}}catch(n){if("__break__"!=n)throw n;}return this.parseExprNext(this.mk(r.EObject(b),a,null))},parseExpr:function(){var a=this.token();switch(a[1]){case 2:var a=a[2],b=this.parseStructure(a);null==b&&(b=this.mk(r.EIdent(a),null,null));return this.parseExprNext(b);case 1:return this.parseExprNext(this.mk(r.EConst(a[2]),null,null));case 4:return a=this.parseExpr(),this.ensure(s.TPClose),
this.parseExprNext(this.mk(r.EParent(a),0,0));case 6:a=this.token();switch(a[1]){case 7:return this.parseExprNext(this.mk(r.EObject([]),0,null));case 2:b=this.token();this.tokens.add(b);this.tokens.add(a);switch(b[1]){case 14:return this.parseExprNext(this.parseObject(0))}break;case 1:b=a[2];if(this.allowJSON)switch(b[1]){case 2:b=this.token();this.tokens.add(b);this.tokens.add(a);switch(b[1]){case 14:return this.parseExprNext(this.parseObject(0))}break;default:this.tokens.add(a)}else this.tokens.add(a);
break;default:this.tokens.add(a)}for(b=[];;){b.push(this.parseFullExpr());a=this.token();if(a==s.TBrClose)break;this.tokens.add(a)}return this.mk(r.EBlock(b),0,null);case 3:return b=a[2],this.unops.exists(b)?this.makeUnop(b,this.parseExpr()):this.unexpected(a);case 11:b=[];for(a=this.token();a!=s.TBkClose;)this.tokens.add(a),b.push(this.parseExpr()),a=this.token(),a==s.TComma&&(a=this.token());if(1==b.length)switch(b[0][1]){case 11:case 10:return a="__a_"+this.uid++,this.parseExprNext(this.mk(r.EBlock([this.mk(r.EVar(a,
null,this.mk(r.EArrayDecl([]),0,null)),0,null),this.mapCompr(a,b[0]),this.mk(r.EIdent(a),0,null)]),0,null))}return this.parseExprNext(this.mk(r.EArrayDecl(b),0,null));default:return this.unexpected(a)}},mapCompr:function(a,b){var d;switch(b[1]){case 11:d=r.EFor(b[2],b[3],this.mapCompr(a,b[4]));break;case 10:d=r.EWhile(b[2],this.mapCompr(a,b[3]));break;case 9:d=b[3];var c=b[2];d=null==b[4]?r.EIf(c,this.mapCompr(a,d),null):r.ECall(this.mk(r.EField(this.mk(r.EIdent(a),0,0),"push"),0,0),[b]);break;case 4:switch(b[2].length){case 1:d=
r.EBlock([this.mapCompr(a,b[2][0])]);break;default:d=r.ECall(this.mk(r.EField(this.mk(r.EIdent(a),0,0),"push"),0,0),[b])}break;case 3:d=r.EParent(this.mapCompr(a,b[2]));break;default:d=r.ECall(this.mk(r.EField(this.mk(r.EIdent(a),0,0),"push"),0,0),[b])}return d},makeUnop:function(a,b){switch(b[1]){case 6:var d=b[4];return this.mk(r.EBinop(b[2],this.makeUnop(a,b[3]),d),0,0);case 22:var d=b[4],c=b[3];return this.mk(r.ETernary(this.makeUnop(a,b[2]),c,d),0,0);default:return this.mk(r.EUnop(a,!0,b),0,
0)}},makeBinop:function(a,b,d){switch(d[1]){case 6:var c=d[4],f=d[3],n=d[2];return this.opPriority.get(a)<=this.opPriority.get(n)&&!this.opRightAssoc.exists(a)?this.mk(r.EBinop(n,this.makeBinop(a,b,f),c),0,0):this.mk(r.EBinop(a,b,d),0,0);case 22:return c=d[4],f=d[3],n=d[2],this.opRightAssoc.exists(a)?this.mk(r.EBinop(a,b,d),0,0):this.mk(r.ETernary(this.makeBinop(a,b,n),f,c),0,0);default:return this.mk(r.EBinop(a,b,d),0,0)}},parseStructure:function(a){switch(a){case "if":var b=this.parseExpr(),d=this.parseExpr(),
a=null,c=!1,f=this.token();f==s.TSemicolon&&(c=!0,f=this.token());gb.enumEq(f,s.TId("else"))?a=this.parseExpr():(this.tokens.add(f),c&&this.tokens.add(s.TSemicolon));return this.mk(r.EIf(b,d,a),0,null==a?0:0);case "var":b=this.token();d=null;switch(b[1]){case 2:d=b[2];break;default:this.unexpected(b)}b=this.token();a=null;b==s.TDoubleDot&&this.allowTypes&&(a=this.parseType(),b=this.token());c=null;gb.enumEq(b,s.TOp("="))?c=this.parseExpr():this.tokens.add(b);return this.mk(r.EVar(d,a,c),0,null==c?
0:0);case "while":return b=this.parseExpr(),d=this.parseExpr(),this.mk(r.EWhile(b,d),0,0);case "for":this.ensure(s.TPOpen);d=this.token();b=null;switch(d[1]){case 2:b=d[2];break;default:this.unexpected(d)}d=this.token();gb.enumEq(d,s.TId("in"))||this.unexpected(d);d=this.parseExpr();this.ensure(s.TPClose);a=this.parseExpr();return this.mk(r.EFor(b,d,a),0,0);case "break":return r.EBreak;case "continue":return r.EContinue;case "else":return this.unexpected(s.TId(a));case "function":a=this.token();b=
null;switch(a[1]){case 2:b=a[2];break;default:this.tokens.add(a)}this.ensure(s.TPOpen);d=[];a=this.token();if(a!=s.TPClose)for(c=!1;!c;){var n=null,f=!1;switch(a[1]){case 13:f=!0,a=this.token()}switch(a[1]){case 2:n=a[2];break;default:this.unexpected(a)}a=this.token();n={name:n};d.push(n);f&&(n.opt=!0);a==s.TDoubleDot&&this.allowTypes&&(n.t=this.parseType(),a=this.token());switch(a[1]){case 9:a=this.token();break;case 5:c=!0;break;default:this.unexpected(a)}}c=null;this.allowTypes&&(a=this.token(),
a!=s.TDoubleDot?this.tokens.add(a):c=this.parseType());a=this.parseExpr();return this.mk(r.EFunction(d,a,b,c),0,0);case "return":return b=this.token(),this.tokens.add(b),b=b==s.TSemicolon?null:this.parseExpr(),this.mk(r.EReturn(b),0,null==b?0:0);case "new":b=[];d=this.token();switch(d[1]){case 2:b.push(d[2]);break;default:this.unexpected(d)}for(a=!0;a;)switch(d=this.token(),d[1]){case 8:d=this.token();switch(d[1]){case 2:b.push(d[2]);break;default:this.unexpected(d)}break;case 4:a=!1;break;default:this.unexpected(d)}d=
this.parseExprList(s.TPClose);return this.mk(r.ENew(b.join("."),d),0,null);case "throw":return b=this.parseExpr(),this.mk(r.EThrow(b),0,0);case "try":b=this.parseExpr();c=this.token();gb.enumEq(c,s.TId("catch"))||this.unexpected(c);this.ensure(s.TPOpen);c=this.token();switch(c[1]){case 2:d=c[2];break;default:d=this.unexpected(c)}this.ensure(s.TDoubleDot);a=null;this.allowTypes?a=this.parseType():(c=this.token(),gb.enumEq(c,s.TId("Dynamic"))||this.unexpected(c));this.ensure(s.TPClose);c=this.parseExpr();
return this.mk(r.ETry(b,d,a,c),0,0);case "switch":a=this.parseExpr();c=null;f=[];this.ensure(s.TBrOpen);try{for(;;)switch(b=this.token(),b[1]){case 2:switch(b[2]){case "case":n={values:[],expr:null};f.push(n);try{for(;;)switch(d=this.parseExpr(),n.values.push(d),b=this.token(),b[1]){case 9:break;case 14:throw"__break__";default:this.unexpected(b)}}catch(p){if("__break__"!=p)throw p;}var e=[];try{for(;;)switch(b=this.token(),this.tokens.add(b),b[1]){case 2:switch(b[2]){case "case":case "default":throw"__break__";
default:e.push(this.parseFullExpr())}break;case 7:throw"__break__";default:e.push(this.parseFullExpr())}}catch(i){if("__break__"!=i)throw i;}n.expr=1==e.length?e[0]:0==e.length?this.mk(r.EBlock([]),0,0):this.mk(r.EBlock(e),0,0);break;case "default":null!=c&&this.unexpected(b);this.ensure(s.TDoubleDot);n=[];try{for(;;)switch(b=this.token(),this.tokens.add(b),b[1]){case 2:switch(b[2]){case "case":case "default":throw"__break__";default:n.push(this.parseFullExpr())}break;case 7:throw"__break__";default:n.push(this.parseFullExpr())}}catch(g){if("__break__"!=
g)throw g;}c=1==n.length?n[0]:0==n.length?this.mk(r.EBlock([]),0,0):this.mk(r.EBlock(n),0,0);break;default:this.unexpected(b)}break;case 7:throw"__break__";default:this.unexpected(b)}}catch(h){if("__break__"!=h)throw h;}return this.mk(r.ESwitch(a,f,c),0,0);default:return null}},parseExprNext:function(a){var b=this.token();switch(b[1]){case 3:var d=b[2];if(this.unops.get(d)){var c;if(!(c=this.isBlock(a)))switch(a[1]){case 3:c=!0;break;default:c=!1}return c?(this.tokens.add(b),a):this.parseExprNext(this.mk(r.EUnop(d,
!1,a),0,null))}return this.makeBinop(d,a,this.parseExpr());case 8:b=this.token();d=null;switch(b[1]){case 2:d=b[2];break;default:this.unexpected(b)}return this.parseExprNext(this.mk(r.EField(a,d),0,null));case 4:return this.parseExprNext(this.mk(r.ECall(a,this.parseExprList(s.TPClose)),0,null));case 11:return b=this.parseExpr(),this.ensure(s.TBkClose),this.parseExprNext(this.mk(r.EArray(a,b),0,null));case 13:return b=this.parseExpr(),this.ensure(s.TDoubleDot),d=this.parseExpr(),this.mk(r.ETernary(a,
b,d),0,0);default:return this.tokens.add(b),a}},parseType:function(){var a=this.token();switch(a[1]){case 2:for(var b=[a[2]];;){a=this.token();if(a!=s.TDot)break;a=this.token();switch(a[1]){case 2:b.push(a[2]);break;default:this.unexpected(a)}}var d=null;switch(a[1]){case 3:if("<"==a[2]){d=[];try{for(;;){d.push(this.parseType());a=this.token();switch(a[1]){case 9:continue;case 3:if(">"==a[2])throw"__break__";}this.unexpected(a)}}catch(c){if("__break__"!=c)throw c;}}break;default:this.tokens.add(a)}return this.parseTypeNext(Qb.CTPath(b,
d));case 4:return a=this.parseType(),this.ensure(s.TPClose),this.parseTypeNext(Qb.CTParent(a));case 6:b=[];try{for(;;)switch(a=this.token(),a[1]){case 7:throw"__break__";case 2:d=a[2];this.ensure(s.TDoubleDot);b.push({name:d,t:this.parseType()});a=this.token();switch(a[1]){case 9:break;case 7:throw"__break__";default:this.unexpected(a)}break;default:this.unexpected(a)}}catch(f){if("__break__"!=f)throw f;}return this.parseTypeNext(Qb.CTAnon(b));default:return this.unexpected(a)}},parseTypeNext:function(a){var b=
this.token();switch(b[1]){case 3:if("->"!=b[2])return this.tokens.add(b),a;break;default:return this.tokens.add(b),a}b=this.parseType();switch(b[1]){case 1:return b[2].unshift(a),b;default:return Qb.CTFun([a],b)}},parseExprList:function(a){var b=[],d=this.token();if(d==a)return b;this.tokens.add(d);try{for(;;)switch(b.push(this.parseExpr()),d=this.token(),d[1]){case 9:break;default:if(d==a)throw"__break__";this.unexpected(d)}}catch(c){if("__break__"!=c)throw c;}return b},readChar:function(){try{return this.input.readByte()}catch(a){return 0}},
readString:function(a){for(var b=0,d=new qf,c=!1,f=this.line,n=this.input;;){try{b=n.readByte()}catch(p){throw this.line=f,fa.EUnterminatedString;}if(c)switch(c=!1,b){case 110:d.writeByte(10);break;case 114:d.writeByte(13);break;case 116:d.writeByte(9);break;case 39:case 34:case 92:d.writeByte(b);break;case 47:this.allowJSON?d.writeByte(b):this.invalidChar(b);break;case 117:if(!this.allowJSON)throw this.invalidChar(b);var e=null;try{e=n.readString(4)}catch(i){throw this.line=f,fa.EUnterminatedString;
}for(var g=0,h=0;4>h;){var j=h++,g=g<<4,j=C.cca(e,j);switch(j){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:g+=j-48;break;case 65:case 66:case 67:case 68:case 69:case 70:g+=j-55;break;case 97:case 98:case 99:case 100:case 101:case 102:g+=j-87;break;default:this.invalidChar(j)}}127>=g?d.writeByte(g):(2047>=g?d.writeByte(192|g>>6):(d.writeByte(224|g>>12),d.writeByte(128|g>>6&63)),d.writeByte(128|g&63));break;default:this.invalidChar(b)}else if(92==b)c=!0;else if(b==
a)break;else 10==b&&this.line++,d.writeByte(b)}return d.getBytes().toString()},token:function(){if(null!=this.tokens.head)return this.tokens.pop();var a;0>this["char"]?a=this.readChar():(a=this["char"],this["char"]=-1);for(;;){switch(a){case 0:return s.TEof;case 32:case 9:case 13:break;case 10:this.line++;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:for(var b=1*(a-48),d=0;;)switch(a=this.readChar(),d*=10,a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:b=
10*b+(a-48);break;case 46:if(0<d){if(10==d&&46==this.readChar())return this.push(s.TOp("...")),a=b|0,s.TConst(a==b?Cb.CInt(a):Cb.CFloat(b));this.invalidChar(a)}d=1;break;case 120:(0<b||0<d)&&this.invalidChar(a);for(var c=0;;)switch(a=this.readChar(),a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:c=(c<<4)+a-48;break;case 65:case 66:case 67:case 68:case 69:case 70:c=(c<<4)+(a-55);break;case 97:case 98:case 99:case 100:case 101:case 102:c=(c<<4)+(a-87);break;default:return this["char"]=
a,s.TConst(Cb.CInt(c))}break;default:return this["char"]=a,a=b|0,s.TConst(0<d?Cb.CFloat(10*b/d):a==b?Cb.CInt(a):Cb.CFloat(b))}break;case 59:return s.TSemicolon;case 40:return s.TPOpen;case 41:return s.TPClose;case 44:return s.TComma;case 46:a=this.readChar();switch(a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:b=a-48;for(d=1;;)switch(a=this.readChar(),d*=10,a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:b=10*b+(a-48);break;default:return this["char"]=
a,s.TConst(Cb.CFloat(b/d))}break;case 46:return a=this.readChar(),46!=a&&this.invalidChar(a),s.TOp("...");default:return this["char"]=a,s.TDot}break;case 123:return s.TBrOpen;case 125:return s.TBrClose;case 91:return s.TBkOpen;case 93:return s.TBkClose;case 39:return s.TConst(Cb.CString(this.readString(39)));case 34:return s.TConst(Cb.CString(this.readString(34)));case 63:return s.TQuestion;case 58:return s.TDoubleDot;default:if(this.ops[a])for(b=String.fromCharCode(a);;){a=this.readChar();if(!this.ops[a]){if(47==
C.cca(b,0))return this.tokenComment(b,a);this["char"]=a;return s.TOp(b)}b+=String.fromCharCode(a)}if(this.idents[a])for(b=String.fromCharCode(a);;){a=this.readChar();if(!this.idents[a])return this["char"]=a,s.TId(b);b+=String.fromCharCode(a)}this.invalidChar(a)}a=this.readChar()}return null},tokenComment:function(a,b){var d=C.cca(a,1),c=this.input;if(47==d){try{for(;10!=b&&13!=b;)b=c.readByte();this["char"]=b}catch(f){}return this.token()}if(42==d){d=this.line;try{for(;;){for(;42!=b;)10==b&&this.line++,
b=c.readByte();b=c.readByte();if(47==b)break}}catch(n){throw this.line=d,fa.EUnterminatedComment;}return this.token()}this["char"]=b;return s.TOp(a)},constString:function(a){switch(a[1]){case 0:return a=a[2],null==a?"null":""+a;case 1:return a=a[2],null==a?"null":""+a;case 2:return a[2]}},tokenString:function(a){switch(a[1]){case 0:return"<eof>";case 1:return this.constString(a[2]);case 2:return a[2];case 3:return a[2];case 4:return"(";case 5:return")";case 6:return"{";case 7:return"}";case 8:return".";
case 9:return",";case 10:return";";case 11:return"[";case 12:return"]";case 13:return"?";case 14:return":"}},__class__:ii};var v=function(){};h["js.Boot"]=v;v.__name__=!0;v.__unhtml=function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")};v.__trace=function(a,b){var d;d=null!=b?b.fileName+":"+b.lineNumber+": ":"";d+=v.__string_rec(a,"");if(null!=b&&null!=b.customParams)for(var c=0,f=b.customParams;c<f.length;){var n=f[c];++c;d+=","+v.__string_rec(n,"")}var p;
"undefined"!=typeof document&&null!=(p=document.getElementById("haxe:trace"))?p.innerHTML+=v.__unhtml(d)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(d)};v.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};v.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var d=typeof a;if("function"==d&&(a.__name__||a.__ename__))d="object";switch(d){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];
for(var d=a[0]+"(",b=b+"\t",c=2,f=a.length;c<f;)var n=c++,d=2!=n?d+(","+v.__string_rec(a[n],b)):d+v.__string_rec(a[n],b);return d+")"}d=a.length;c="[";b+="\t";for(f=0;f<d;)n=f++,c+=(0<n?",":"")+v.__string_rec(a[n],b);return c+"]"}try{c=a.toString}catch(p){return"???"}if(null!=c&&c!=Object.toString&&(d=a.toString(),"[object Object]"!=d))return d;d=null;c="{\n";b+="\t";f=null!=a.hasOwnProperty;for(d in a)if(!f||a.hasOwnProperty(d))"prototype"==d||"__class__"==d||"__super__"==d||"__interfaces__"==d||
"__properties__"==d||(2!=c.length&&(c+=", \n"),c+=b+d+" : "+v.__string_rec(a[d],b));b=b.substring(1);return c+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};v.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var d=a.__interfaces__;if(null!=d)for(var c=0,f=d.length;c<f;){var n=c++,n=d[n];if(n==b||v.__interfLoop(n,b))return!0}return v.__interfLoop(a.__super__,b)};v.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Xk:return(a|0)===
a;case zk:return"number"==typeof a;case Ak:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case Yk:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof b||v.__interfLoop(v.getClass(a),b)))return!0}else return!1;return b==Zk&&null!=a.__name__||b==$k&&null!=a.__ename__?!0:a.__enum__==b}};v.__cast=function(a,b){if(v.__instanceof(a,b))return a;throw"Cannot cast "+o.string(a)+" to "+o.string(b);};var zj=function(){};h["js.html._CanvasElement.CanvasUtil"]=
zj;zj.__name__=!0;zj.getContextWebGL=function(a,b){for(var d=0,c=["webgl","experimental-webgl"];d<c.length;){var f=c[d];++d;f=a.getContext(f,b);if(null!=f)return f}return null};var q=function(){};h["nape.Config"]=q;q.__name__=!0;var Ic=function(){this.zpp_inner=null};h["nape.callbacks.Callback"]=Ic;Ic.__name__=!0;Ic.prototype={toString:function(){return""},__class__:Ic};var rf=function(){this.zpp_inner=null};h["nape.callbacks.BodyCallback"]=rf;rf.__name__=!0;rf.__super__=Ic;rf.prototype=t(Ic.prototype,
{toString:function(){var a;a="Cb:"+["WAKE","SLEEP"][this.zpp_inner.event-i.id_CbEvent_WAKE];a+=":"+this.zpp_inner.body.outer.toString();return a+=" : listener: "+o.string(this.zpp_inner.listener.outer)},__class__:rf});var Rb=function(){this.zpp_inner=null};h["nape.callbacks.Listener"]=Rb;Rb.__name__=!0;Rb.prototype={toString:function(){var a="BEGIN,END,WAKE,SLEEP,BREAK,PRE,ONGOING".split(",")[this.zpp_inner.event];if(this.zpp_inner.type==i.id_ListenerType_BODY)return"BodyListener{"+a+"::"+o.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer)+
"}";if(this.zpp_inner.type==i.id_ListenerType_CONSTRAINT)return"ConstraintListener{"+a+"::"+o.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer)+"}";var b=this.zpp_inner.interaction,d;switch(b.itype){case i.id_InteractionType_COLLISION:d="COLLISION";break;case i.id_InteractionType_SENSOR:d="SENSOR";break;case i.id_InteractionType_FLUID:d="FLUID";break;default:d="ALL"}return(this.zpp_inner.type==i.id_ListenerType_INTERACTION?"InteractionListener{"+a+"#"+d+"::"+o.string(b.outer_zni.zpp_inner_zn.options1.outer)+
":"+o.string(b.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+d+"::"+o.string(b.outer_znp.zpp_inner_zn.options1.outer)+":"+o.string(b.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence},__class__:Rb};var ji=function(){this.zpp_inner_zn=null};h["nape.callbacks.BodyListener"]=ji;ji.__name__=!0;ji.__super__=Rb;ji.prototype=t(Rb.prototype,{__class__:ji});var Jc=function(){};h["nape.callbacks.CbEvent"]=Jc;Jc.__name__=!0;Jc.prototype={toString:function(){var a;
null==i.CbEvent_PRE&&(i.internal=!0,i.CbEvent_PRE=new Jc,i.internal=!1);this==i.CbEvent_PRE?a="PRE":(null==i.CbEvent_BEGIN&&(i.internal=!0,i.CbEvent_BEGIN=new Jc,i.internal=!1),this==i.CbEvent_BEGIN?a="BEGIN":(null==i.CbEvent_ONGOING&&(i.internal=!0,i.CbEvent_ONGOING=new Jc,i.internal=!1),this==i.CbEvent_ONGOING?a="ONGOING":(null==i.CbEvent_END&&(i.internal=!0,i.CbEvent_END=new Jc,i.internal=!1),this==i.CbEvent_END?a="END":(null==i.CbEvent_WAKE&&(i.internal=!0,i.CbEvent_WAKE=new Jc,i.internal=!1),
this==i.CbEvent_WAKE?a="WAKE":(null==i.CbEvent_SLEEP&&(i.internal=!0,i.CbEvent_SLEEP=new Jc,i.internal=!1),this==i.CbEvent_SLEEP?a="SLEEP":(null==i.CbEvent_BREAK&&(i.internal=!0,i.CbEvent_BREAK=new Jc,i.internal=!1),a=this==i.CbEvent_BREAK?"BREAK":""))))));return a},__class__:Jc};var tc=function(){this.zpp_inner=null;this.zpp_inner=new na;this.zpp_inner.outer=this};h["nape.callbacks.CbType"]=tc;tc.__name__=!0;tc.prototype={toString:function(){return this==na.ANY_BODY?"ANY_BODY":this==na.ANY_SHAPE?
"ANY_SHAPE":this==na.ANY_COMPOUND?"ANY_COMPOUND":this==na.ANY_CONSTRAINT?"ANY_CONSTRAINT":"CbType#"+this.zpp_inner.id},__class__:tc};var ec=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.callbacks.CbTypeIterator"]=ec;ec.__name__=!0;ec.get=function(a){var b;null==ec.zpp_pool?(uc.internal=!0,b=new ec,uc.internal=!1):(b=ec.zpp_pool,ec.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};ec.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();
var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=ec.zpp_pool;ec.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:ec};var ki=function(){this.zpp_inner=null;this.zpp_inner=new uc;this.zpp_inner.outer=this};h["nape.callbacks.CbTypeList"]=ki;ki.__name__=!0;ki.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=
this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();
for(d=ec.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:ki};var zg=function(){this.zpp_inner=null};h["nape.callbacks.ConstraintCallback"]=zg;zg.__name__=!0;zg.__super__=Ic;zg.prototype=t(Ic.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP","BREAK"][this.zpp_inner.event-i.id_CbEvent_WAKE];a+=":"+this.zpp_inner.constraint.outer.toString();return a+=" : listener: "+o.string(this.zpp_inner.listener.outer)},
__class__:zg});var li=function(){this.zpp_inner_zn=null};h["nape.callbacks.ConstraintListener"]=li;li.__name__=!0;li.__super__=Rb;li.prototype=t(Rb.prototype,{__class__:li});var sf=function(){this.zpp_inner=null};h["nape.callbacks.InteractionCallback"]=sf;sf.__name__=!0;sf.__super__=Ic;sf.prototype=t(Ic.prototype,{toString:function(){var a;a="Cb:"+"BEGIN,END,,,,,ONGOING".split(",")[this.zpp_inner.event];a+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString();a+=" : "+
this.zpp_inner.wrap_arbiters.toString();return a+=" : listener: "+o.string(this.zpp_inner.listener.outer)},__class__:sf});var mi=function(){this.zpp_inner_zn=null};h["nape.callbacks.InteractionListener"]=mi;mi.__name__=!0;mi.__super__=Rb;mi.prototype=t(Rb.prototype,{__class__:mi});var wd=function(){};h["nape.callbacks.InteractionType"]=wd;wd.__name__=!0;wd.prototype={toString:function(){var a;null==i.InteractionType_COLLISION&&(i.internal=!0,i.InteractionType_COLLISION=new wd,i.internal=!1);this==
i.InteractionType_COLLISION?a="COLLISION":(null==i.InteractionType_SENSOR&&(i.internal=!0,i.InteractionType_SENSOR=new wd,i.internal=!1),this==i.InteractionType_SENSOR?a="SENSOR":(null==i.InteractionType_FLUID&&(i.internal=!0,i.InteractionType_FLUID=new wd,i.internal=!1),this==i.InteractionType_FLUID?a="FLUID":(null==i.InteractionType_ANY&&(i.internal=!0,i.InteractionType_ANY=new wd,i.internal=!1),a=this==i.InteractionType_ANY?"ANY":"")));return a},__class__:wd};var Db=function(){this.zpp_next=null;
this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.callbacks.ListenerIterator"]=Db;Db.__name__=!0;Db.get=function(a){var b;null==Db.zpp_pool?(xd.internal=!0,b=new Db,xd.internal=!1):(b=Db.zpp_pool,Db.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Db.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Db.zpp_pool;Db.zpp_pool=this;this.zpp_inner=null;return!1},
next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Db};var ni=function(){this.zpp_inner=null;this.zpp_inner=new xd;this.zpp_inner.outer=this};h["nape.callbacks.ListenerList"]=ni;ni.__name__=!0;ni.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&
(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var d=this.zpp_inner.inner.head;null!=d;){if(d.elt==a.zpp_inner){b=!0;break}d=d.next}b&&(null!=
this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=Db.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:ni};var de=function(){};h["nape.callbacks.ListenerType"]=de;de.__name__=!0;de.prototype={toString:function(){var a;null==i.ListenerType_BODY&&
(i.internal=!0,i.ListenerType_BODY=new de,i.internal=!1);this==i.ListenerType_BODY?a="BODY":(null==i.ListenerType_CONSTRAINT&&(i.internal=!0,i.ListenerType_CONSTRAINT=new de,i.internal=!1),this==i.ListenerType_CONSTRAINT?a="CONSTRAINT":(null==i.ListenerType_INTERACTION&&(i.internal=!0,i.ListenerType_INTERACTION=new de,i.internal=!1),this==i.ListenerType_INTERACTION?a="INTERACTION":(null==i.ListenerType_PRE&&(i.internal=!0,i.ListenerType_PRE=new de,i.internal=!1),a=this==i.ListenerType_PRE?"PRE":"")));
return a},__class__:de};var Jj=function(){this.zpp_inner=null};h["nape.callbacks.OptionType"]=Jj;Jj.__name__=!0;Jj.prototype={toString:function(){null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();var a=this.zpp_inner.wrap_includes.toString();null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes();return"@{"+a+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},__class__:Jj};var Ag=function(){this.zpp_inner=null};h["nape.callbacks.PreCallback"]=Ag;Ag.__name__=!0;
Ag.__super__=Ic;Ag.prototype=t(Ic.prototype,{toString:function(){var a;a="Cb:PRE:"+(":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString());a+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString();return a+=" : listnener: "+o.string(this.zpp_inner.listener.outer)},__class__:Ag});var Ja=function(){};h["nape.callbacks.PreFlag"]=Ja;Ja.__name__=!0;Ja.prototype={toString:function(){var a;null==i.PreFlag_ACCEPT&&(i.internal=!0,i.PreFlag_ACCEPT=new Ja,i.internal=!1);this==
i.PreFlag_ACCEPT?a="ACCEPT":(null==i.PreFlag_IGNORE&&(i.internal=!0,i.PreFlag_IGNORE=new Ja,i.internal=!1),this==i.PreFlag_IGNORE?a="IGNORE":(null==i.PreFlag_ACCEPT_ONCE&&(i.internal=!0,i.PreFlag_ACCEPT_ONCE=new Ja,i.internal=!1),this==i.PreFlag_ACCEPT_ONCE?a="ACCEPT_ONCE":(null==i.PreFlag_IGNORE_ONCE&&(i.internal=!0,i.PreFlag_IGNORE_ONCE=new Ja,i.internal=!1),a=this==i.PreFlag_IGNORE_ONCE?"IGNORE_ONCE":"")));return a},__class__:Ja};var oi=function(){this.zpp_inner_zn=null};h["nape.callbacks.PreListener"]=
oi;oi.__name__=!0;oi.__super__=Rb;oi.prototype=t(Rb.prototype,{__class__:oi});var Kj=function(){};h["nape.constraint.Constraint"]=Kj;Kj.__name__=!0;Kj.prototype={toString:function(){return"{Constraint}"},__class__:Kj};var fc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.constraint.ConstraintIterator"]=fc;fc.__name__=!0;fc.get=function(a){var b;null==fc.zpp_pool?(vc.internal=!0,b=new fc,vc.internal=!1):(b=fc.zpp_pool,fc.zpp_pool=b.zpp_next);b.zpp_i=0;
b.zpp_inner=a;b.zpp_critical=!1;return b};fc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=fc.zpp_pool;fc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:fc};var pi=function(){this.zpp_inner=null;this.zpp_inner=new vc;this.zpp_inner.outer=this};h["nape.constraint.ConstraintList"]=pi;pi.__name__=!0;pi.prototype=
{get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=
this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var d=this.zpp_inner.inner.head;null!=d;){if(d.elt==a.zpp_inner){b=!0;break}d=d.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=fc.get(this);d.hasNext();){var c;
d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:pi};var qe=function(){this.zpp_inner=null};h["nape.dynamics.Arbiter"]=qe;qe.__name__=!0;qe.prototype={get_state:function(){var a=this.zpp_inner.immState;if(a==(i.id_ImmState_ACCEPT|i.id_ImmState_ALWAYS))return null==i.PreFlag_ACCEPT&&(i.internal=!0,i.PreFlag_ACCEPT=new Ja,i.internal=!1),i.PreFlag_ACCEPT;switch(a){case i.id_ImmState_ACCEPT:return null==i.PreFlag_ACCEPT_ONCE&&(i.internal=
!0,i.PreFlag_ACCEPT_ONCE=new Ja,i.internal=!1),i.PreFlag_ACCEPT_ONCE;default:if(a==(i.id_ImmState_IGNORE|i.id_ImmState_ALWAYS))return null==i.PreFlag_IGNORE&&(i.internal=!0,i.PreFlag_IGNORE=new Ja,i.internal=!1),i.PreFlag_IGNORE;null==i.PreFlag_IGNORE_ONCE&&(i.internal=!0,i.PreFlag_IGNORE_ONCE=new Ja,i.internal=!1);return i.PreFlag_IGNORE_ONCE}},toString:function(){var a;a=this.zpp_inner.type==Z.COL?"CollisionArbiter":this.zpp_inner.type==Z.FLUID?"FluidArbiter":"SensorArbiter";return this.zpp_inner.cleared?
a+"(object-pooled)":a+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|"+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).toString()+")"+(this.zpp_inner.type==Z.COL?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"")+"<-"+this.get_state().toString()},__class__:qe};var Sb=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.dynamics.ArbiterIterator"]=
Sb;Sb.__name__=!0;Sb.get=function(a){var b;null==Sb.zpp_pool?(yd.internal=!0,b=new Sb,yd.internal=!1):(b=Sb.zpp_pool,Sb.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Sb.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Sb.zpp_pool;Sb.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Sb};var qi=
function(){this.zpp_inner=null;this.zpp_inner=new yd;this.zpp_inner.outer=this};h["nape.dynamics.ArbiterList"]=qi;qi.__name__=!0;qi.prototype={zpp_gl:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.head;null!=a;)a.elt.active&&this.zpp_inner.user_length++,a=a.next}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&
(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.head;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.wrapper()},iterator:function(){this.zpp_vm();
return Sb.get(this)},toString:function(){for(var a="[",b=!0,d=this.iterator();d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:qi};var re=function(){};h["nape.dynamics.ArbiterType"]=re;re.__name__=!0;re.prototype={toString:function(){var a;null==i.ArbiterType_COLLISION&&(i.internal=!0,i.ArbiterType_COLLISION=new re,i.internal=!1);this==i.ArbiterType_COLLISION?a="COLLISION":(null==i.ArbiterType_SENSOR&&(i.internal=
!0,i.ArbiterType_SENSOR=new re,i.internal=!1),this==i.ArbiterType_SENSOR?a="SENSOR":(null==i.ArbiterType_FLUID&&(i.internal=!0,i.ArbiterType_FLUID=new re,i.internal=!1),a=this==i.ArbiterType_FLUID?"FLUID":""));return a},__class__:re};var tf=function(){this.zpp_inner=null};h["nape.dynamics.CollisionArbiter"]=tf;tf.__name__=!0;tf.__super__=qe;tf.prototype=t(qe.prototype,{__class__:tf});var ri=function(){this.zpp_inner=null};h["nape.dynamics.Contact"]=ri;ri.__name__=!0;ri.prototype={toString:function(){return null==
this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?"{object-pooled}":"{Contact}"},__class__:ri};var gc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.dynamics.ContactIterator"]=gc;gc.__name__=!0;gc.get=function(a){var b;null==gc.zpp_pool?(uf.internal=!0,b=new gc,uf.internal=!1):(b=gc.zpp_pool,gc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};gc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();
this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=gc.zpp_pool;gc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:gc};var Lj=function(){this.zpp_inner=null};h["nape.dynamics.ContactList"]=Lj;Lj.__name__=!0;Lj.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.next;null!=a;){var b=a;b.active&&
b.arbiter.active&&this.zpp_inner.user_length++;a=a.next}}return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.next;;){var b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=
this.zpp_inner.at_ite.next;;){b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.wrapper()},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=gc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Lj};var Bg=function(){this.zpp_inner=null};h["nape.dynamics.FluidArbiter"]=Bg;Bg.__name__=!0;Bg.__super__=
qe;Bg.prototype=t(qe.prototype,{__class__:Bg});var si=function(a,b,d,c,f,n){null==n&&(n=-1);null==f&&(f=1);null==c&&(c=-1);null==d&&(d=1);null==b&&(b=-1);null==a&&(a=1);this.zpp_inner=null;null==lb.zpp_pool?this.zpp_inner=new lb:(this.zpp_inner=lb.zpp_pool,lb.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;this.zpp_inner.collisionGroup!=a&&(this.zpp_inner.collisionGroup=a,this.zpp_inner.invalidate());this.zpp_inner.collisionGroup;this.zpp_inner.collisionMask!=
b&&(this.zpp_inner.collisionMask=b,this.zpp_inner.invalidate());this.zpp_inner.collisionMask;this.zpp_inner.sensorGroup!=d&&(this.zpp_inner.sensorGroup=d,this.zpp_inner.invalidate());this.zpp_inner.sensorGroup;this.zpp_inner.sensorMask!=c&&(this.zpp_inner.sensorMask=c,this.zpp_inner.invalidate());this.zpp_inner.sensorMask;this.zpp_inner.fluidGroup!=f&&(this.zpp_inner.fluidGroup=f,this.zpp_inner.invalidate());this.zpp_inner.fluidGroup;this.zpp_inner.fluidMask!=n&&(this.zpp_inner.fluidMask=n,this.zpp_inner.invalidate());
this.zpp_inner.fluidMask};h["nape.dynamics.InteractionFilter"]=si;si.__name__=!0;si.prototype={__class__:si};var Mj=function(){this.zpp_inner=null};h["nape.dynamics.InteractionGroup"]=Mj;Mj.__name__=!0;Mj.prototype={toString:function(){var a="InteractionGroup";this.zpp_inner.ignore&&(a+=":ignore");return a},__class__:Mj};var wc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.dynamics.InteractionGroupIterator"]=wc;wc.__name__=!0;wc.get=function(a){var b;
null==wc.zpp_pool?(se.internal=!0,b=new wc,se.internal=!1):(b=wc.zpp_pool,wc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};wc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=wc.zpp_pool;wc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:wc};var Nj=function(){this.zpp_inner=null};h["nape.dynamics.InteractionGroupList"]=
Nj;Nj.__name__=!0;Nj.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,
this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=wc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Nj};var Oj=function(){this.zpp_inner=null};h["nape.geom.AABB"]=Oj;Oj.__name__=!0;Oj.prototype={toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:Oj};var Pj=
function(){this.zpp_inner=null};h["nape.geom.ConvexResult"]=Pj;Pj.__name__=!0;Pj.prototype={toString:function(){return"{ shape: "+o.string(this.zpp_inner.shape)+" toi: "+this.zpp_inner.toiDistance+" }"},__class__:Pj};var hc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.geom.ConvexResultIterator"]=hc;hc.__name__=!0;hc.get=function(a){var b;null==hc.zpp_pool?(vf.internal=!0,b=new hc,vf.internal=!1):(b=hc.zpp_pool,hc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=
a;b.zpp_critical=!1;return b};hc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=hc.zpp_pool;hc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:hc};var Qj=function(){this.zpp_inner=null};h["nape.geom.ConvexResultList"]=Qj;Qj.__name__=!0;Qj.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&
(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},
toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=hc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Qj};var ti=function(){this.zpp_inner=null};h["nape.geom.GeomPoly"]=ti;ti.__name__=!0;ti.prototype={toString:function(){var a="GeomPoly[",b=this.zpp_inner.vertices,d=this.zpp_inner.vertices;if(null!=b){do{var c=b;c!=this.zpp_inner.vertices&&(a+=",");a+="{"+c.x+","+c.y+"}";b=b.next}while(b!=
d)}return a+"]"},__class__:ti};var xc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.geom.GeomPolyIterator"]=xc;xc.__name__=!0;xc.get=function(a){var b;null==xc.zpp_pool?(te.internal=!0,b=new xc,te.internal=!1):(b=xc.zpp_pool,xc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};xc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=
xc.zpp_pool;xc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:xc};var Rj=function(){this.zpp_inner=null};h["nape.geom.GeomPolyList"]=Rj;Rj.__name__=!0;Rj.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&
(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=xc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();
b=!1}return a+"]"},__class__:Rj};var Sj=function(){this.zpp_inner=null};h["nape.geom.Mat23"]=Sj;Sj.__name__=!0;Sj.prototype={toString:function(){return"{ a: "+this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},__class__:Sj};var Tj=function(){this.zpp_inner=null};h["nape.geom.MatMN"]=Tj;Tj.__name__=!0;Tj.prototype={toString:function(){for(var a="{ ",b=!0,d=0,c=this.zpp_inner.m;d<c;){var f=d++;b||(a+="; ");
for(var b=!1,n=0,p=this.zpp_inner.n;n<p;)var e=n++,a=a+(this.zpp_inner.x[f*this.zpp_inner.n+e]+" ")}return a+"}"},__class__:Tj};var Uj=function(){this.zpp_inner=null};h["nape.geom.RayResult"]=Uj;Uj.__name__=!0;Uj.prototype={toString:function(){return"{ shape: "+o.string(this.zpp_inner.shape)+" distance: "+this.zpp_inner.toiDistance+" ?inner: "+o.string(this.zpp_inner.inner)+" }"},__class__:Uj};var ic=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.geom.RayResultIterator"]=
ic;ic.__name__=!0;ic.get=function(a){var b;null==ic.zpp_pool?(wf.internal=!0,b=new ic,wf.internal=!1):(b=ic.zpp_pool,ic.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};ic.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=ic.zpp_pool;ic.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:ic};
var Vj=function(){this.zpp_inner=null};h["nape.geom.RayResultList"]=Vj;Vj.__name__=!0;Vj.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);
else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=ic.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Vj};var Qa=function(a,b){null==b&&(b=0);null==a&&(a=0);this.zpp_inner=this.zpp_pool=null;this.zpp_inner=ha.get(a,b,null);this.zpp_inner.outer=
this};h["nape.geom.Vec2"]=Qa;Qa.__name__=!0;Qa.get=function(a,b,d){null==d&&(d=!1);null==b&&(b=0);null==a&&(a=0);var c;null==Ae.poolVec2?c=new Qa:(c=Ae.poolVec2,Ae.poolVec2=c.zpp_pool,c.zpp_pool=null);if(null==c.zpp_inner)c.zpp_inner=ha.get(a,b,null),c.zpp_inner.outer=c;else{var f;c.zpp_inner.validate();if(f=c.zpp_inner.x==a)c.zpp_inner.validate(),f=c.zpp_inner.y==b;f||(c.zpp_inner.x=a,c.zpp_inner.y=b,c.zpp_inner.invalidate());c}c.zpp_inner.weak=d;return c};Qa.prototype={dispose:function(){var a=
this.zpp_inner;this.zpp_inner=this.zpp_inner.outer=null;this.zpp_pool=Ae.poolVec2;Ae.poolVec2=this;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=ha.zpp_pool;ha.zpp_pool=a},set:function(a){var b=this.setxy(function(){a.zpp_inner.validate();return a.zpp_inner.x}(this),function(){a.zpp_inner.validate();return a.zpp_inner.y}(this));a.zpp_inner.weak?(a.dispose(),!0):!1;return b},setxy:function(a,b){var d;this.zpp_inner.validate();if(d=
this.zpp_inner.x==a)this.zpp_inner.validate(),d=this.zpp_inner.y==b;d||(this.zpp_inner.x=a,this.zpp_inner.y=b,this.zpp_inner.invalidate());return this},toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:Qa};var jc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.geom.Vec2Iterator"]=jc;jc.__name__=!0;jc.get=function(a){var b;null==jc.zpp_pool?(Be.internal=!0,b=new jc,Be.internal=!1):(b=jc.zpp_pool,jc.zpp_pool=b.zpp_next);
b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};jc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=jc.zpp_pool;jc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:jc};var Nd=function(){this.zpp_inner=null;this.zpp_inner=new Be;this.zpp_inner.outer=this};h["nape.geom.Vec2List"]=Nd;Nd.__name__=!0;Nd.prototype=
{zpp_gl:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,
this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},push:function(a){this.zpp_inner.modify_test();this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),
null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},empty:function(){return 0==this.zpp_gl()},iterator:function(){this.zpp_vm();return jc.get(this)},toString:function(){for(var a="[",b=!0,d=this.iterator();d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Nd};var Wj=function(){this.zpp_inner=null};h["nape.geom.Vec3"]=Wj;Wj.__name__=!0;Wj.prototype={toString:function(){this.zpp_inner.validate();
var a="{ x: "+this.zpp_inner.x+" y: ";this.zpp_inner.validate();a=a+this.zpp_inner.y+" z: ";this.zpp_inner.validate();return a+this.zpp_inner.z+" }"},__class__:Wj};var xf=function(){};h["nape.geom.Winding"]=xf;xf.__name__=!0;xf.prototype={toString:function(){var a;null==i.Winding_UNDEFINED&&(i.internal=!0,i.Winding_UNDEFINED=new xf,i.internal=!1);this==i.Winding_UNDEFINED?a="UNDEFINED":(null==i.Winding_CLOCKWISE&&(i.internal=!0,i.Winding_CLOCKWISE=new xf,i.internal=!1),this==i.Winding_CLOCKWISE?a=
"CLOCKWISE":(null==i.Winding_ANTICLOCKWISE&&(i.internal=!0,i.Winding_ANTICLOCKWISE=new xf,i.internal=!1),a=this==i.Winding_ANTICLOCKWISE?"ANTICLOCKWISE":""));return a},__class__:xf};var Od=function(){this.zpp_inner_i=null};h["nape.phys.Interactor"]=Od;Od.__name__=!0;Od.prototype={toString:function(){return""},__class__:Od};var Pd=function(a,b){this.zpp_inner_i=this.zpp_inner=null;this.zpp_inner=new ld;this.zpp_inner.outer=this;this.zpp_inner.outer_i=this;this.zpp_inner_i=this.zpp_inner;null!=b?(b.zpp_inner.validate(),
this.zpp_inner.posx=b.zpp_inner.x,b.zpp_inner.validate(),this.zpp_inner.posy=b.zpp_inner.y):(this.zpp_inner.posx=0,this.zpp_inner.posy=0);this.set_type(null==a?function(){null==i.BodyType_DYNAMIC&&(i.internal=!0,i.BodyType_DYNAMIC=new Eb,i.internal=!1);return i.BodyType_DYNAMIC}(this):a);null!=b&&(b.zpp_inner.weak?(b.dispose(),!0):!1);this.zpp_inner_i.insert_cbtype(na.ANY_BODY.zpp_inner)};h["nape.phys.Body"]=Pd;Pd.__name__=!0;Pd.__super__=Od;Pd.prototype=t(Od.prototype,{set_type:function(a){this.zpp_inner.immutable_midstep("Body::type");
ld.types[this.zpp_inner.type]!=a&&(null==i.BodyType_DYNAMIC&&(i.internal=!0,i.BodyType_DYNAMIC=new Eb,i.internal=!1),a==i.BodyType_DYNAMIC?a=i.id_BodyType_DYNAMIC:(null==i.BodyType_KINEMATIC&&(i.internal=!0,i.BodyType_KINEMATIC=new Eb,i.internal=!1),a=a==i.BodyType_KINEMATIC?i.id_BodyType_KINEMATIC:i.id_BodyType_STATIC),a==i.id_BodyType_STATIC&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?
this.zpp_inner.space.transmitType(this.zpp_inner,a):this.zpp_inner.type=a);return ld.types[this.zpp_inner.type]},set_space:function(a){this.zpp_inner.immutable_midstep("Body::space");if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=a){if(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer))this.zpp_inner.component.woken=!1;if(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer))(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(this);
null!=a&&a.zpp_inner.wrap_bodies.add(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},get_position:function(){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},set_position:function(a){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();this.zpp_inner.wrap_pos.set(a);null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},set_velocity:function(a){null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();
this.zpp_inner.wrap_vel.set(a);null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();return this.zpp_inner.wrap_vel},toString:function(){return(this.zpp_inner.world?"(space::world":"("+(this.zpp_inner.type==i.id_BodyType_DYNAMIC?"dynamic":this.zpp_inner.type==i.id_BodyType_STATIC?"static":"kinematic"))+")#"+this.zpp_inner_i.id},__class__:Pd});var kc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.phys.BodyIterator"]=kc;kc.__name__=!0;kc.get=function(a){var b;
null==kc.zpp_pool?(Uc.internal=!0,b=new kc,Uc.internal=!1):(b=kc.zpp_pool,kc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};kc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=kc.zpp_pool;kc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:kc};var ui=function(){this.zpp_inner=null;this.zpp_inner=
new Uc;this.zpp_inner.outer=this};h["nape.phys.BodyList"]=ui;ui.__name__=!0;ui.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);
else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),
this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-
1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var d=this.zpp_inner.inner.head;null!=d;){if(d.elt==a.zpp_inner){b=!0;break}d=d.next}b&&(null!=this.zpp_inner.subber&&
this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=kc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:ui};var Eb=function(){};h["nape.phys.BodyType"]=Eb;Eb.__name__=!0;Eb.prototype={toString:function(){var a;null==i.BodyType_STATIC&&(i.internal=!0,i.BodyType_STATIC=
new Eb,i.internal=!1);this==i.BodyType_STATIC?a="STATIC":(null==i.BodyType_DYNAMIC&&(i.internal=!0,i.BodyType_DYNAMIC=new Eb,i.internal=!1),this==i.BodyType_DYNAMIC?a="DYNAMIC":(null==i.BodyType_KINEMATIC&&(i.internal=!0,i.BodyType_KINEMATIC=new Eb,i.internal=!1),a=this==i.BodyType_KINEMATIC?"KINEMATIC":""));return a},__class__:Eb};var vi=function(){this.zpp_inner=null};h["nape.phys.Compound"]=vi;vi.__name__=!0;vi.__super__=Od;vi.prototype=t(Od.prototype,{toString:function(){return"Compound"+this.zpp_inner_i.id},
__class__:vi});var lc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.phys.CompoundIterator"]=lc;lc.__name__=!0;lc.get=function(a){var b;null==lc.zpp_pool?(md.internal=!0,b=new lc,md.internal=!1):(b=lc.zpp_pool,lc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};lc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=lc.zpp_pool;
lc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:lc};var wi=function(){this.zpp_inner=null;this.zpp_inner=new md;this.zpp_inner.outer=this};h["nape.phys.CompoundList"]=wi;wi.__name__=!0;wi.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();
this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var d=this.zpp_inner.inner.head;null!=d;){if(d.elt==a.zpp_inner){b=
!0;break}d=d.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=lc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:wi};var Xj=function(){this.zpp_inner=null};h["nape.phys.FluidProperties"]=Xj;Xj.__name__=!0;Xj.prototype=
{toString:function(){return"{ density: "+1E3*this.zpp_inner.density+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+o.string(this.zpp_inner.wrap_gravity)+" }"},__class__:Xj};var Ce=function(){};h["nape.phys.GravMassMode"]=Ce;Ce.__name__=!0;Ce.prototype={toString:function(){var a;null==i.GravMassMode_DEFAULT&&(i.internal=!0,i.GravMassMode_DEFAULT=new Ce,i.internal=!1);this==i.GravMassMode_DEFAULT?a="DEFAULT":(null==i.GravMassMode_FIXED&&(i.internal=!0,i.GravMassMode_FIXED=new Ce,i.internal=!1),
this==i.GravMassMode_FIXED?a="FIXED":(null==i.GravMassMode_SCALED&&(i.internal=!0,i.GravMassMode_SCALED=new Ce,i.internal=!1),a=this==i.GravMassMode_SCALED?"SCALED":""));return a},__class__:Ce};var yf=function(){};h["nape.phys.InertiaMode"]=yf;yf.__name__=!0;yf.prototype={toString:function(){var a;null==i.InertiaMode_DEFAULT&&(i.internal=!0,i.InertiaMode_DEFAULT=new yf,i.internal=!1);this==i.InertiaMode_DEFAULT?a="DEFAULT":(null==i.InertiaMode_FIXED&&(i.internal=!0,i.InertiaMode_FIXED=new yf,i.internal=
!1),a=this==i.InertiaMode_FIXED?"FIXED":"");return a},__class__:yf};var Fb=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.phys.InteractorIterator"]=Fb;Fb.__name__=!0;Fb.get=function(a){var b;null==Fb.zpp_pool?(zf.internal=!0,b=new Fb,zf.internal=!1):(b=Fb.zpp_pool,Fb.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Fb.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=
!0;if(this.zpp_i<a)return!0;this.zpp_next=Fb.zpp_pool;Fb.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Fb};var Yj=function(){this.zpp_inner=null};h["nape.phys.InteractorList"]=Yj;Yj.__name__=!0;Yj.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();
this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer_i},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=Fb.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||
(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Yj};var Cg=function(){};h["nape.phys.MassMode"]=Cg;Cg.__name__=!0;Cg.prototype={toString:function(){var a;null==i.MassMode_DEFAULT&&(i.internal=!0,i.MassMode_DEFAULT=new Cg,i.internal=!1);this==i.MassMode_DEFAULT?a="DEFAULT":(null==i.MassMode_FIXED&&(i.internal=!0,i.MassMode_FIXED=new Cg,i.internal=!1),a=this==i.MassMode_FIXED?"FIXED":"");return a},__class__:Cg};var ra=function(a,b,d,c,f){null==f&&(f=0.001);null==c&&(c=1);null==
d&&(d=2);null==b&&(b=1);null==a&&(a=0);this.zpp_inner=null;null==L.zpp_pool?this.zpp_inner=new L:(this.zpp_inner=L.zpp_pool,L.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;a!=this.zpp_inner.elasticity&&(this.zpp_inner.elasticity=a/1,this.zpp_inner.invalidate(L.WAKE|L.ARBITERS));this.zpp_inner.elasticity;b!=this.zpp_inner.dynamicFriction&&(this.zpp_inner.dynamicFriction=b/1,this.zpp_inner.invalidate(L.WAKE|L.ANGDRAG|L.ARBITERS));this.zpp_inner.dynamicFriction;
d!=this.zpp_inner.staticFriction&&(this.zpp_inner.staticFriction=d/1,this.zpp_inner.invalidate(L.WAKE|L.ARBITERS));this.zpp_inner.staticFriction;c!=1E3*this.zpp_inner.density&&(this.zpp_inner.density=c/1E3,this.zpp_inner.invalidate(L.WAKE|L.PROPS));1E3*this.zpp_inner.density;f!=this.zpp_inner.rollingFriction&&(this.zpp_inner.rollingFriction=f/1,this.zpp_inner.invalidate(L.WAKE|L.ARBITERS));this.zpp_inner.rollingFriction};h["nape.phys.Material"]=ra;ra.__name__=!0;ra.wood=function(){return new ra(0.4,
0.2,0.38,0.7,0.005)};ra.steel=function(){return new ra(0.2,0.57,0.74,7.8,0.001)};ra.ice=function(){return new ra(0.3,0.03,0.1,0.9,1.0E-4)};ra.rubber=function(){return new ra(0.8,1,1.4,1.5,0.01)};ra.glass=function(){return new ra(0.4,0.4,0.94,2.6,0.002)};ra.sand=function(){return new ra(-1,0.45,0.6,1.6,16)};ra.prototype={toString:function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+
1E3*this.zpp_inner.density+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},__class__:ra};var zd=function(){this.zpp_inner_i=this.zpp_inner=null};h["nape.shape.Shape"]=zd;zd.__name__=!0;zd.__super__=Od;zd.prototype=t(Od.prototype,{toString:function(){return(this.zpp_inner.type==i.id_ShapeType_CIRCLE?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},__class__:zd});var Dg=function(a,b,d,c){this.zpp_inner_zn=null;zd.call(this);this.zpp_inner_zn=new Af;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=
this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i.outer_i=this;this.zpp_inner.immutable_midstep("Circle::radius");a!=this.zpp_inner_zn.radius&&(this.zpp_inner_zn.radius=a,this.zpp_inner_zn.invalidate_radius());this.zpp_inner_zn.radius;null==b?(this.zpp_inner.localCOMx=0,this.zpp_inner.localCOMy=0):(b.zpp_inner.validate(),this.zpp_inner.localCOMx=b.zpp_inner.x,b.zpp_inner.validate(),this.zpp_inner.localCOMy=b.zpp_inner.y,b.zpp_inner.weak?(b.dispose(),!0):!1);null==d?(null==L.zpp_pool?
this.zpp_inner.material=new L:(this.zpp_inner.material=L.zpp_pool,L.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null),null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(d.zpp_inner),this.zpp_inner.material.wrapper());null==c?(null==lb.zpp_pool?this.zpp_inner.filter=new lb:(this.zpp_inner.filter=lb.zpp_pool,lb.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(c.zpp_inner),
this.zpp_inner.filter.wrapper());this.zpp_inner_i.insert_cbtype(na.ANY_SHAPE.zpp_inner)};h["nape.shape.Circle"]=Dg;Dg.__name__=!0;Dg.__super__=zd;Dg.prototype=t(zd.prototype,{__class__:Dg});var xi=function(){this.zpp_inner=null};h["nape.shape.Edge"]=xi;xi.__name__=!0;xi.prototype={toString:function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+
this.zpp_inner.lnormy+" }")+" }";this.zpp_inner.polygon.validate_gaxi();return"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" worldNormal : "+("{ x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" }")+" }"},__class__:xi};var yc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.shape.EdgeIterator"]=yc;yc.__name__=!0;yc.get=function(a){var b;null==yc.zpp_pool?(De.internal=!0,b=new yc,De.internal=!1):(b=yc.zpp_pool,
yc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};yc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=yc.zpp_pool;yc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:yc};var Zj=function(){this.zpp_inner=null};h["nape.shape.EdgeList"]=Zj;Zj.__name__=!0;Zj.prototype={get_length:function(){this.zpp_inner.valmod();
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&a!=this.get_length()-1&&(a=this.get_length()-2-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;
return this.zpp_inner.at_ite.elt.wrapper()},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=yc.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:Zj};var Tb=function(a,b,d){this.zpp_inner_zn=null;zd.call(this);this.zpp_inner_zn=new Bf;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i.outer_i=this;if(a instanceof
Array&&null==a.__enum__)for(var c=0;c<a.length;){var f=a[c];++c;var n=f;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(Qa.get(function(){n.zpp_inner.validate();return n.zpp_inner.x}(this),function(){n.zpp_inner.validate();return n.zpp_inner.y}(this),!1))}else if(v.__instanceof(a,Nd))for(c=a.iterator();c.hasNext();){var p;c.zpp_critical=!1;p=c.zpp_inner.at(c.zpp_i++);null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(Qa.get(function(){p.zpp_inner.validate();
return p.zpp_inner.x}(this),function(){p.zpp_inner.validate();return p.zpp_inner.y}(this),!1))}else if(v.__instanceof(a,ti)&&(c=a.zpp_inner.vertices,null!=c)){f=c;do{var e=Qa.get(f.x,f.y,null),f=f.next;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(Qa.get(function(){e.zpp_inner.validate();return e.zpp_inner.x}(this),function(){e.zpp_inner.validate();return e.zpp_inner.y}(this),!1));e.dispose()}while(f!=c)}if(a instanceof Array&&null==a.__enum__)for(c=
0;c<a.length;){var f=a[c],i;if(i=f.zpp_inner.weak)f.dispose(),i=!0;i?a.splice(c,1):c++}else if(v.__instanceof(a,Nd)){null!=a.zpp_inner._validate&&a.zpp_inner._validate();a=a.zpp_inner.inner;c=null;for(f=a.head;null!=f;)i=f.elt,i.outer.zpp_inner.weak?(f=a.erase(c),i.outer.zpp_inner.weak?(i.outer.dispose(),!0):!1):(c=f,f=f.next)}null==b?(null==L.zpp_pool?this.zpp_inner.material=new L:(this.zpp_inner.material=L.zpp_pool,L.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null),null):
(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(b.zpp_inner),this.zpp_inner.material.wrapper());null==d?(null==lb.zpp_pool?this.zpp_inner.filter=new lb:(this.zpp_inner.filter=lb.zpp_pool,lb.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(d.zpp_inner),this.zpp_inner.filter.wrapper());this.zpp_inner_i.insert_cbtype(na.ANY_SHAPE.zpp_inner)};h["nape.shape.Polygon"]=Tb;
Tb.__name__=!0;Tb.rect=function(a,b,d,c,f){null==f&&(f=!1);return[Qa.get(a,b,f),Qa.get(a+d,b,f),Qa.get(a+d,b+c,f),Qa.get(a,b+c,f)]};Tb.box=function(a,b,d){null==d&&(d=!1);return Tb.rect(-a/2,-b/2,a,b,d)};Tb.__super__=zd;Tb.prototype=t(zd.prototype,{__class__:Tb});var Ub=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.shape.ShapeIterator"]=Ub;Ub.__name__=!0;Ub.get=function(a){var b;null==Ub.zpp_pool?(Qd.internal=!0,b=new Ub,Qd.internal=!1):(b=Ub.zpp_pool,
Ub.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Ub.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Ub.zpp_pool;Ub.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Ub};var yi=function(){this.zpp_inner=null;this.zpp_inner=new Qd;this.zpp_inner.outer=this};h["nape.shape.ShapeList"]=yi;
yi.__name__=!0;yi.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,
this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,
a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,
a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var d=this.zpp_inner.inner.head;null!=d;){if(d.elt==a.zpp_inner){b=!0;break}d=d.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),
this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,d;this.zpp_inner.valmod();for(d=Ub.get(this);d.hasNext();){var c;d.zpp_critical=!1;c=d.zpp_inner.at(d.zpp_i++);b||(a+=",");a=null==c?a+"NULL":a+c.toString();b=!1}return a+"]"},__class__:yi};var Eg=function(){};h["nape.shape.ShapeType"]=Eg;Eg.__name__=!0;Eg.prototype={toString:function(){var a;null==i.ShapeType_CIRCLE&&(i.internal=!0,i.ShapeType_CIRCLE=new Eg,i.internal=!1);this==i.ShapeType_CIRCLE?a="CIRCLE":(null==i.ShapeType_POLYGON&&
(i.internal=!0,i.ShapeType_POLYGON=new Eg,i.internal=!1),a=this==i.ShapeType_POLYGON?"POLYGON":"");return a},__class__:Eg};var Ee=function(){};h["nape.shape.ValidationResult"]=Ee;Ee.__name__=!0;Ee.prototype={toString:function(){var a;null==i.ValidationResult_VALID&&(i.internal=!0,i.ValidationResult_VALID=new Ee,i.internal=!1);this==i.ValidationResult_VALID?a="VALID":(null==i.ValidationResult_DEGENERATE&&(i.internal=!0,i.ValidationResult_DEGENERATE=new Ee,i.internal=!1),this==i.ValidationResult_DEGENERATE?
a="DEGENERATE":(null==i.ValidationResult_CONCAVE&&(i.internal=!0,i.ValidationResult_CONCAVE=new Ee,i.internal=!1),this==i.ValidationResult_CONCAVE?a="CONCAVE":(null==i.ValidationResult_SELF_INTERSECTING&&(i.internal=!0,i.ValidationResult_SELF_INTERSECTING=new Ee,i.internal=!1),a=this==i.ValidationResult_SELF_INTERSECTING?"SELF_INTERSECTING":"")));return a},__class__:Ee};var ee=function(){};h["nape.space.Broadphase"]=ee;ee.__name__=!0;ee.prototype={toString:function(){var a;null==i.Broadphase_DYNAMIC_AABB_TREE&&
(i.internal=!0,i.Broadphase_DYNAMIC_AABB_TREE=new ee,i.internal=!1);this==i.Broadphase_DYNAMIC_AABB_TREE?a="DYNAMIC_AABB_TREE":(null==i.Broadphase_SWEEP_AND_PRUNE&&(i.internal=!0,i.Broadphase_SWEEP_AND_PRUNE=new ee,i.internal=!1),a=this==i.Broadphase_SWEEP_AND_PRUNE?"SWEEP_AND_PRUNE":"");return a},__class__:ee};var Ai=function(a,b){this.zpp_inner=null;this.zpp_inner=new zi(null==a?null:a.zpp_inner,b);this.zpp_inner.outer=this;null!=a&&(a.zpp_inner.weak?(a.dispose(),!0):!1)};h["nape.space.Space"]=
Ai;Ai.__name__=!0;Ai.prototype={step:function(a,b,d){null==d&&(d=10);null==b&&(b=10);this.zpp_inner.step(a,b,d)},__class__:Ai};var fe=function(a){this.time=0;null!=a&&(this.id=a.has.resolve("id")?o.parseInt(a.att.resolve("id")):0,this.time=a.has.resolve("time")?o.parseInt(a.att.resolve("time")):0,this.curveType=a.has.resolve("curve_type")?gb.createEnum(U,a.att.resolve("curve_type").toUpperCase()):U.LINEAR,this.c1=a.has.resolve("c1")?o.parseFloat(a.att.resolve("c1")):0,this.c2=a.has.resolve("c2")?
o.parseFloat(a.att.resolve("c2")):0)};h["spriter.definitions.TimelineKey"]=fe;fe.__name__=!0;fe.prototype={copy:function(){return this.clone(new fe)},clone:function(a){a.id=this.id;a.time=this.time;a.curveType=this.curveType;a.c1=this.c1;a.c2=this.c2;return a},interpolate:function(a,b,d){this.linearKey(a,this.getTWithNextKey(a,b,d))},getTWithNextKey:function(a,b,d){if(this.curveType==U.INSTANT||this.time==a.time)return 0;a=(d-this.time)/(a.time-this.time);return this.curveType==U.LINEAR?a:this.curveType==
U.QUADRATIC?this.quadratic(0,this.c1,1,a):this.curveType==U.CUBIC?this.cubic(0,this.c1,this.c2,1,a):0},linear:function(a,b,d){return(b-a)*d+a},linearKey:function(){return null},angleLinear:function(a,b,d,c){if(0==d)return a;0<d?0>b-a&&(b+=360):0>d&&0<b-a&&(b-=360);return this.linear(a,b,c)},quadratic:function(a,b,d,c){return this.linear(this.linear(a,b,c),this.linear(b,d,c),c)},cubic:function(a,b,d,c,f){return this.linear(this.quadratic(a,b,d,f),this.quadratic(b,d,c,f),f)},__class__:fe};var Vb=function(a){fe.call(this,
a);if(null!=a){var b;b=a.has.resolve("spin")?o.parseInt(a.att.resolve("spin")):1;var a=a.hasNode.resolve("object")?a.node.resolve("object"):a.node.resolve("bone"),d;d=a.has.resolve("x")?o.parseFloat(a.att.resolve("x")):0;var c;c=a.has.resolve("y")?o.parseFloat(a.att.resolve("y")):0;var f;f=a.has.resolve("angle")?o.parseFloat(a.att.resolve("angle")):0;var n;n=a.has.resolve("scale_x")?o.parseFloat(a.att.resolve("scale_x")):1;var p;p=a.has.resolve("scale_y")?o.parseFloat(a.att.resolve("scale_y")):1;
a=a.has.resolve("a")?o.parseFloat(a.att.resolve("a")):1;this.info=new Rd(d,c,f,n,p,a,b)}};h["spriter.definitions.SpatialTimelineKey"]=Vb;Vb.__name__=!0;Vb.__super__=fe;Vb.prototype=t(fe.prototype,{copy:function(){return this.clone(new Vb)},clone:function(a){fe.prototype.clone.call(this,a);a.info=this.info.copy();return a},linearSpatialInfo:function(a,b,d,c){this.info.x=this.linear(a.x,b.x,c);this.info.y=this.linear(a.y,b.y,c);this.info.angle=this.angleLinear(a.angle,b.angle,d,c);this.info.scaleX=
this.linear(a.scaleX,b.scaleX,c);this.info.scaleY=this.linear(a.scaleY,b.scaleY,c);this.info.a=this.linear(a.a,b.a,c)},paint:function(a,b){return new Ad(a,b)},__class__:Vb});var Bd=function(a){this.paintDebugBones=!0;null!=a&&(this.length=a.has.resolve("length")?o.parseInt(a.att.resolve("length")):200,this.width=a.has.resolve("width")?o.parseInt(a.att.resolve("width")):10);Vb.call(this,a)};h["spriter.definitions.BoneTimelineKey"]=Bd;Bd.__name__=!0;Bd.__super__=Vb;Bd.prototype=t(Vb.prototype,{copy:function(){return this.clone(new Bd)},
clone:function(a){Vb.prototype.clone.call(this,a);a.length=this.length;a.width=this.width;a.paintDebugBones=this.paintDebugBones;return a},paint:function(a,b){return new Ad(a,b)},linearKey:function(a,b){if(!v.__instanceof(a,Bd))throw"keyB must be BoneTimelineKeys";var d;d=v.__cast(a,Bd);this.linearSpatialInfo(this.info,d.info,this.info.spin,b);this.paintDebugBones&&(this.length=o["int"](this.linear(this.length,d.length,b)),this.width=o["int"](this.linear(this.width,d.width,b)))},__class__:Bd});var Ci=
function(a){this.maps=[];this.id=o.parseInt(a.att.resolve("id"));this.name=a.att.resolve("name");for(a=a.nodes.resolve("map").iterator();a.hasNext();){var b=a.next();this.maps.push(new Bi(b))}};h["spriter.definitions.CharacterMap"]=Ci;Ci.__name__=!0;Ci.prototype={__class__:Ci};var Di=function(a){this.boneRefs=[];this.objectRefs=[];this.id=o.parseInt(a.att.resolve("id"));this.time=a.has.resolve("time")?o.parseInt(a.att.resolve("time")):0;for(var b=a.nodes.resolve("bone_ref").iterator();b.hasNext();){var d=
b.next();this.boneRefs.push(new Cf(d))}for(a=a.nodes.resolve("object_ref").iterator();a.hasNext();)b=a.next(),this.objectRefs.push(new Cf(b))};h["spriter.definitions.MainlineKey"]=Di;Di.__name__=!0;Di.prototype={__class__:Di};var Bi=function(a){this.folder=o.parseInt(a.att.resolve("folder"));this.file=o.parseInt(a.att.resolve("file"));this.tarFolder=a.has.resolve("target_folder")?o.parseInt(a.att.resolve("target_folder")):-1;this.tarFile=a.has.resolve("target_file")?o.parseInt(a.att.resolve("target_file")):
-1};h["spriter.definitions.MapInstruction"]=Bi;Bi.__name__=!0;Bi.prototype={__class__:Bi};var ib=function(a,b){Vb.call(this,a);null!=a&&(this.type=b,a=a.node.resolve("object"),this.useDefaultPivot=!a.has.resolve("pivot_x")&&!a.has.resolve("pivot_y"),this.pivot_x=a.has.resolve("pivot_x")?o.parseFloat(a.att.resolve("pivot_x")):0,this.pivot_y=a.has.resolve("pivot_y")?o.parseFloat(a.att.resolve("pivot_y")):1)};h["spriter.definitions.ObjectTimelineKey"]=ib;ib.__name__=!0;ib.__super__=Vb;ib.prototype=t(Vb.prototype,
{copy:function(){return this.clone(new ib)},clone:function(a){Vb.prototype.clone.call(this,a);a.useDefaultPivot=this.useDefaultPivot;a.pivot_x=this.pivot_x;a.pivot_y=this.pivot_y;a.type=this.type;return a},paint:function(a,b){var d,c;this.useDefaultPivot?(d=a,c=b):(d=this.pivot_x,c=this.pivot_y);return new Ad(d,c)},linearKey:function(a,b){if(!v.__instanceof(a,ib))throw"keyB must be ObjectTimelineKey";var d;d=v.__cast(a,ib);this.linearSpatialInfo(this.info,d.info,this.info.spin,b);this.useDefaultPivot||
(this.pivot_x=this.linear(this.pivot_x,d.pivot_x,b),this.pivot_y=this.linear(this.pivot_y,d.pivot_y,b))},__class__:ib});var Ad=function(a,b){null==b&&(b=1);null==a&&(a=0);this.pivotX=a;this.pivotY=b};h["spriter.definitions.PivotInfo"]=Ad;Ad.__name__=!0;Ad.prototype={__class__:Ad};var Ei=function(a,b,d,c){this.p1=a;this.p2=b;this.p3=d;this.p4=c};h["spriter.definitions.Quadrilateral"]=Ei;Ei.__name__=!0;Ei.prototype={__class__:Ei};var Fe=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};
h["spriter.definitions.QuadPoint"]=Fe;Fe.__name__=!0;Fe.prototype={__class__:Fe};var Cf=function(a){this.id=o.parseInt(a.att.resolve("id"));this.parent=a.has.resolve("parent")?o.parseInt(a.att.resolve("parent")):-1;this.timeline=o.parseInt(a.att.resolve("timeline"));this.key=o.parseInt(a.att.resolve("key"))};h["spriter.definitions.Ref"]=Cf;Cf.__name__=!0;Cf.prototype={__class__:Cf};var Ba=h["spriter.definitions.MetaDispatch"]={__ename__:!0,__constructs__:["ONCE","ONCE_PER_LOOP","ALWAYS"]};Ba.ONCE=
["ONCE",0];Ba.ONCE.toString=g;Ba.ONCE.__enum__=Ba;Ba.ONCE_PER_LOOP=["ONCE_PER_LOOP",1];Ba.ONCE_PER_LOOP.toString=g;Ba.ONCE_PER_LOOP.__enum__=Ba;Ba.ALWAYS=["ALWAYS",2];Ba.ALWAYS.toString=g;Ba.ALWAYS.__enum__=Ba;var Fi=function(){};h["spriter.interfaces.IScml"]=Fi;Fi.__name__=!0;Fi.prototype={__class__:Fi};var Df=function(a){this.metaDispatch=Ba.ONCE_PER_LOOP;this.endAnimRemoval=!0;this.currentEntity=this.currentAnimation="";if(null!=a){this.folders=[];this.entities=new D;a=new Md(a.firstElement());
"1.0"!=a.att.resolve("scml_version")&&null;for(a=a.get_elements();a.hasNext();){var b=a.next();if("folder"==b.get_name())this.folders.push(new Fg(b));else if("entity"==b.get_name()){var d=b.att.resolve("name"),c=new Gi(b);this.entities.set(d,c);"0"==b.att.resolve("id")&&(this.currentEntity=b.att.resolve("name"),this.currentAnimation=b.node.resolve("animation").att.resolve("name"))}else if("tag_list"==b.get_name()){null==this.tags&&(this.tags=[]);for(b=b.get_elements();b.hasNext();)this.tags.push(b.next().att.resolve("name"))}}this.activeCharacterMap=
this.copyFolders()}};h["spriter.definitions.ScmlObject"]=Df;Df.__name__=!0;Df.__interfaces__=[Fi];Df.prototype={getPivots:function(a,b){var d=this.activeCharacterMap[a].files[b];return null!=d?new Ad(d.pivotX,d.pivotY):new Ad},getFileName:function(a,b){var d=this.activeCharacterMap[a].files[b];return null!=d?d.name:null},onEndAnim:function(){if(null!=this.endAnimCallback){var a=this.endAnimCallback;this.endAnimRemoval&&(this.endAnimCallback=null);a()}},onTag:function(a){null!=this.tagCallback&&this.tagCallback(this.tags[a])},
onVar:function(a,b){var d=this.entities.get(this.currentEntity).variables[a];d.set(b)&&null!=this.varChangeCallback&&this.varChangeCallback(d)},setCurrentTime:function(a,b,d){var c=this.entities.get(this.currentEntity),f=c.animations.get(this.currentAnimation);this.spriterSpatialInfo=d;f.setCurrentTime(a,b,this,c)},copyFolders:function(){for(var a=[],b=0,d=this.folders.length;b<d;){var c=b++;a[c]=this.folders[c].copy()}return a},__class__:Df};var Rd=function(a,b,d,c,f,n,p){null==p&&(p=1);null==n&&
(n=1);null==f&&(f=1);null==c&&(c=1);null==d&&(d=0);null==b&&(b=0);null==a&&(a=0);this.scaleX=this.scaleY=this.a=this.spin=1;this.x=this.y=this.angle=0;this.x=a;this.y=b;this.angle=d;this.scaleX=c;this.scaleY=f;this.a=n;this.spin=p};h["spriter.definitions.SpatialInfo"]=Rd;Rd.__name__=!0;Rd.prototype={unmapFromParent:function(a){var b,d=this.angle+a.angle,c=this.scaleX*a.scaleX,f=this.scaleY*a.scaleY,n=this.a*a.a;if(0!=this.x||0!=this.y){var p=this.x*a.scaleX,e=this.y*a.scaleY;b=nd.toRadians(nd.under360(a.angle));
var i=Math.sin(b),g=Math.cos(b);b=p*g-e*i+a.x;a=p*i+e*g+a.y}else b=a.x,a=a.y;return new Rd(b,a,d,c,f,n,this.spin)},copy:function(){return new Rd(this.x,this.y,this.angle,this.scaleX,this.scaleY,this.a,this.spin)},__class__:Rd};var Cd=function(a){ib.call(this,a);null!=a&&(a=a.node.resolve("object"),this.folder=a.has.resolve("folder")?o.parseInt(a.att.resolve("folder")):0,this.file=a.has.resolve("file")?o.parseInt(a.att.resolve("file")):0)};h["spriter.definitions.SpriteTimelineKey"]=Cd;Cd.__name__=
!0;Cd.__super__=ib;Cd.prototype=t(ib.prototype,{copy:function(){return this.clone(new Cd)},clone:function(a){ib.prototype.clone.call(this,a);a.folder=this.folder;a.file=this.file;a.useDefaultPivot=this.useDefaultPivot;a.pivot_x=this.pivot_x;a.pivot_y=this.pivot_y;return a},__class__:Cd});var tb=h["spriter.definitions.LoopType"]={__ename__:!0,__constructs__:["LOOPING","NO_LOOPING"]};tb.LOOPING=["LOOPING",0];tb.LOOPING.toString=g;tb.LOOPING.__enum__=tb;tb.NO_LOOPING=["NO_LOOPING",1];tb.NO_LOOPING.toString=
g;tb.NO_LOOPING.__enum__=tb;var Ki=function(a){this.loop=0;this.mainlineKeys=[];this.timelines=[];this.id=o.parseInt(a.att.resolve("id"));this.name=a.att.resolve("name");this.length=o.parseInt(a.att.resolve("length"));this.loopType=a.has.resolve("looping")?"true"==a.att.resolve("looping")?tb.LOOPING:tb.NO_LOOPING:tb.LOOPING;for(var b=a.node.resolve("mainline").nodes.resolve("key").iterator();b.hasNext();){var d=b.next();this.mainlineKeys.push(new Di(d))}for(b=a.nodes.resolve("timeline").iterator();b.hasNext();)d=
b.next(),this.timelines.push(new Hi(d));if(a.hasNode.resolve("meta")){a=a.node.resolve("meta");if(a.hasNode.resolve("tagline")){this.taglines=[];for(b=a.node.resolve("tagline").nodes.resolve("key").iterator();b.hasNext();)d=b.next(),this.taglines.push(new Ii(d))}if(a.hasNode.resolve("varline")){this.varlines=[];for(a=a.nodes.resolve("varline").iterator();a.hasNext();)b=a.next(),this.varlines.push(new Ji(b))}}};h["spriter.definitions.SpriterAnimation"]=Ki;Ki.__name__=!0;Ki.prototype={setCurrentTime:function(a,
b,d,c){var f;switch(this.loopType[1]){case 0:f=this.loop;this.loop=a/this.length|0;a%=this.length;this.updateCharacter(this.mainlineKeyFromTime(a),a,b,d,c);d.metaDispatch==Ba.ONCE_PER_LOOP&&f!=this.loop&&this.resetMetaDispatch();if(1==this.loop&&1>f)d.onEndAnim();break;case 1:if(a=o["int"](Math.min(a,this.length)),this.updateCharacter(this.mainlineKeyFromTime(a),a,b,d,c),a==this.length)d.onEndAnim()}},updateCharacter:function(a,b,d,c,f){for(var n=[],p,e,i,g=a.boneRefs.length,h=0;h<g;)i=h++,e=a.boneRefs[i],
p=this.keyFromRef(e,b),i=0<=e.parent?n[e.parent]:c.spriterSpatialInfo,i=p.info.unmapFromParent(i),n.push(i);this.points=[];this.boxes=[];g=a.objectRefs.length;for(h=0;h<g;){i=h++;e=a.objectRefs[i];p=this.keyFromRef(e,b);i=0<=e.parent?n[e.parent]:c.spriterSpatialInfo;i=p.info.unmapFromParent(i);var j;if(v.__instanceof(p,Cd)){var k;k=v.__cast(p,Cd);j=c.getPivots(k.folder,k.file);j=p.paint(j.pivotX,j.pivotY);p=c.getFileName(k.folder,k.file);null!=p&&d.addGraphic(c.spriterName,e.timeline,e.key,p,i,j)}else j=
new Ad,j=p.paint(j.pivotX,j.pivotY),v.__cast(p,ib).type==ja.POINT?this.points.push(d.compute(i,j,0,0)):(e=this.getTimelineName(e.timeline),e=f.boxes_info.get(e),this.boxes.push(d.computeRectCoordinates(i,j,e.width,e.height)))}if(null!=this.taglines){b=0;for(d=this.taglines;b<d.length;)if(f=d[b],++b,f.time==a.time)if(c.metaDispatch==Ba.ALWAYS)c.onTag(f.id);else c.metaDispatch==Ba.ONCE_PER_LOOP&&a.time!=f.get_lastDispatched()?(f.set_lastDispatched(a.time),c.onTag(f.id)):c.metaDispatch==Ba.ONCE&&!f.get_dispatched()&&
(f.set_lastDispatched(a.time),c.onTag(f.id))}if(null!=this.varlines){b=0;for(d=this.varlines;b<d.length;){f=d[b];++b;n=0;for(g=f.keys;n<g.length;)if(i=g[n],++n,i.time==a.time)if(c.metaDispatch==Ba.ALWAYS)c.onVar(f.id,i.value);else c.metaDispatch==Ba.ONCE_PER_LOOP&&a.time!=i.get_lastDispatched()?(i.set_lastDispatched(a.time),c.onVar(f.id,i.value)):c.metaDispatch==Ba.ONCE&&!i.get_dispatched()&&(i.set_lastDispatched(a.time),c.onVar(f.id,i.value))}}},mainlineKeyFromTime:function(a){for(var b=0,d=this.mainlineKeys.length,
c=0;c<d;){var f=c++;this.mainlineKeys[f].time<=a&&(b=f);if(this.mainlineKeys[f].time>=a)break}return this.mainlineKeys[b]},keyFromRef:function(a,b){var d=this.timelines[a.timeline],c=d.keys[a.key].copy();if(1==d.keys.length||c.curveType==U.INSTANT)return c;var f=a.key+1;if(f>=d.keys.length)if(this.loopType==tb.LOOPING)f=0;else return c;d=d.keys[f].copy();f=d.time;f<c.time&&(f+=this.length);c.interpolate(d,f,b);return c},getTimelineName:function(a){return this.timelines[a].name},resetMetaDispatch:function(){if(null!=
this.taglines)for(var a=0,b=this.taglines;a<b.length;){var d=b[a];++a;d.set_dispatched(!1)}},__class__:Ki};var Li=function(a){null!=a&&(this.name=a.att.resolve("name"),this.pivotX=a.has.resolve("pivot_x")?o.parseFloat(a.att.resolve("pivot_x")):0,this.pivotY=a.has.resolve("pivot_y")?o.parseFloat(a.att.resolve("pivot_y")):0,this.width=a.has.resolve("w")?o.parseFloat(a.att.resolve("w")):0,this.height=a.has.resolve("h")?o.parseFloat(a.att.resolve("h")):0)};h["spriter.definitions.SpriterBox"]=Li;Li.__name__=
!0;Li.prototype={__class__:Li};var Gi=function(a){this.characterMaps=new D;this.animations=new D;this.variables=[];this.boxes_info=new D;this.id=o.parseInt(a.att.resolve("id"));this.name=a.att.resolve("name");for(var b=a.nodes.resolve("character_map").iterator();b.hasNext();){var d=b.next(),c=d.att.resolve("name"),d=new Ci(d);this.characterMaps.set(c,d)}if(a.hasNode.resolve("var_defs"))for(b=a.node.resolve("var_defs").get_elements();b.hasNext();)switch(c=b.next(),c.att.resolve("type")){case "int":this.variables.push(new Gg(c.att.resolve("name"),
o.parseInt(c.att.resolve("default"))));break;case "string":this.variables.push(new Ef(c.att.resolve("name"),o.string(c.att.resolve("default"))));break;case "float":this.variables.push(new Hg(c.att.resolve("name"),o.parseFloat(c.att.resolve("default"))))}for(b=a.nodes.resolve("obj_info").iterator();b.hasNext();)d=b.next(),c=d.att.resolve("name"),d=new Li(d),this.boxes_info.set(c,d);for(a=a.nodes.resolve("animation").iterator();a.hasNext();)c=a.next(),b=c.att.resolve("name"),c=new Ki(c),this.animations.set(b,
c)};h["spriter.definitions.SpriterEntity"]=Gi;Gi.__name__=!0;Gi.prototype={__class__:Gi};var Ff=function(a){null!=a&&(this.id=o.parseInt(a.att.resolve("id")),this.name=a.att.resolve("name"),this.pivotX=a.has.resolve("pivot_x")?o.parseFloat(a.att.resolve("pivot_x")):0,this.pivotY=a.has.resolve("pivot_y")?o.parseFloat(a.att.resolve("pivot_y")):1,this.width=a.has.resolve("width")?o.parseFloat(a.att.resolve("width")):0,this.height=a.has.resolve("height")?o.parseFloat(a.att.resolve("height")):0)};h["spriter.definitions.SpriterFile"]=
Ff;Ff.__name__=!0;Ff.prototype={copy:function(){var a=new Ff;a.name=this.name;a.id=this.id;a.pivotX=this.pivotX;a.pivotY=this.pivotY;a.width=this.width;a.height=this.height;return a},__class__:Ff};var Fg=function(a){this.name="";this.files=[];if(null!=a){this.id=o.parseInt(a.att.resolve("id"));a.hasNode.resolve("name")&&(this.name=a.att.resolve("name"));for(a=a.nodes.resolve("file").iterator();a.hasNext();){var b=a.next();this.files.push(new Ff(b))}}};h["spriter.definitions.SpriterFolder"]=Fg;Fg.__name__=
!0;Fg.prototype={copy:function(){var a=new Fg;a.name=this.name;a.id=this.id;for(var b=0,d=this.files.length;b<d;){var c=b++;a.files[c]=this.files[c].copy()}return a},__class__:Fg};var ja=h["spriter.definitions.ObjectType"]={__ename__:!0,__constructs__:"SPRITE,BONE,BOX,POINT,SOUND,ENTITY,VARIABLE".split(",")};ja.SPRITE=["SPRITE",0];ja.SPRITE.toString=g;ja.SPRITE.__enum__=ja;ja.BONE=["BONE",1];ja.BONE.toString=g;ja.BONE.__enum__=ja;ja.BOX=["BOX",2];ja.BOX.toString=g;ja.BOX.__enum__=ja;ja.POINT=["POINT",
3];ja.POINT.toString=g;ja.POINT.__enum__=ja;ja.SOUND=["SOUND",4];ja.SOUND.toString=g;ja.SOUND.__enum__=ja;ja.ENTITY=["ENTITY",5];ja.ENTITY.toString=g;ja.ENTITY.__enum__=ja;ja.VARIABLE=["VARIABLE",6];ja.VARIABLE.toString=g;ja.VARIABLE.__enum__=ja;var Hi=function(a){this.keys=[];this.id=o.parseInt(a.att.resolve("id"));this.name=a.has.resolve("name")?a.att.resolve("name"):"";this.objectType=a.has.resolve("object_type")?gb.createEnum(ja,a.att.resolve("object_type").toUpperCase()):ja.SPRITE;switch(this.objectType[1]){case 0:for(a=
a.nodes.resolve("key").iterator();a.hasNext();){var b=a.next();this.keys.push(new Cd(b))}break;case 1:for(a=a.nodes.resolve("key").iterator();a.hasNext();)b=a.next(),this.keys.push(new Bd(b));break;case 3:for(a=a.nodes.resolve("key").iterator();a.hasNext();)b=a.next(),this.keys.push(new ib(b,this.objectType));break;case 2:for(a=a.nodes.resolve("key").iterator();a.hasNext();)b=a.next(),this.keys.push(new ib(b,this.objectType))}};h["spriter.definitions.SpriterTimeline"]=Hi;Hi.__name__=!0;Hi.prototype=
{__class__:Hi};var Ii=function(a){this._lastDispatched=-1;this._dispatched=!1;this.time=0;null!=a&&(this.id=a.has.resolve("id")?o.parseInt(a.att.resolve("id")):0,this.time=a.has.resolve("time")?o.parseInt(a.att.resolve("time")):0,a=a.node.resolve("tag"),this.t=o.parseInt(a.att.resolve("t")))};h["spriter.definitions.TaglineKey"]=Ii;Ii.__name__=!0;Ii.prototype={set_lastDispatched:function(a){this._lastDispatched=a;this._dispatched=-1!=a;return a},get_lastDispatched:function(){return this._lastDispatched},
set_dispatched:function(a){this._dispatched=a;a||(this._lastDispatched=-1);return a},get_dispatched:function(){return this._dispatched},__class__:Ii};var U=h["spriter.definitions.CurveType"]={__ename__:!0,__constructs__:["INSTANT","LINEAR","QUADRATIC","CUBIC"]};U.INSTANT=["INSTANT",0];U.INSTANT.toString=g;U.INSTANT.__enum__=U;U.LINEAR=["LINEAR",1];U.LINEAR.toString=g;U.LINEAR.__enum__=U;U.QUADRATIC=["QUADRATIC",2];U.QUADRATIC.toString=g;U.QUADRATIC.__enum__=U;U.CUBIC=["CUBIC",3];U.CUBIC.toString=
g;U.CUBIC.__enum__=U;var Ji=function(a){if(null!=a){this.id=o.parseInt(a.att.resolve("def"));this.keys=[];for(a=a.nodes.resolve("key").iterator();a.hasNext();){var b=a.next();this.keys.push(new Mi(b))}}};h["spriter.definitions.Varline"]=Ji;Ji.__name__=!0;Ji.prototype={__class__:Ji};var Mi=function(a){this._lastDispatched=-1;this._dispatched=!1;this.time=0;null!=a&&(this.id=a.has.resolve("id")?o.parseInt(a.att.resolve("id")):0,this.time=a.has.resolve("time")?o.parseInt(a.att.resolve("time")):0,this.value=
a.att.resolve("val"))};h["spriter.definitions.VarlineKey"]=Mi;Mi.__name__=!0;Mi.prototype={set_lastDispatched:function(a){this._lastDispatched=a;this._dispatched=-1!=a;return a},get_lastDispatched:function(){return this._lastDispatched},get_dispatched:function(){return this._dispatched},__class__:Mi};var Ni=function(a,b,d,c){this.playbackSpeed=1;this.paused=!1;this.timeMS=0;this.scml=b;this.library=d;this.spriterName=a;this.scml.spriterName=this.spriterName;this.info=c};h["spriter.engine.Spriter"]=
Ni;Ni.__name__=!0;Ni.prototype={advanceTime:function(a){this.paused||(this.timeMS+=a*this.playbackSpeed|0);this.scml.setCurrentTime(this.timeMS,this.library,this.info)},playAnim:function(a,b,d){null==d&&(d=!0);if(null==a)return this.paused&&(this.paused=!1),this.timeMS=0,null!=b&&(this.scml.endAnimCallback=function(a,b,d,c){return function(){return a(b,d,c)}}(b,this,this.scml.currentEntity,this.scml.currentAnimation),this.scml.endAnimRemoval=d),!0;return this.scml.entities.get(this.scml.currentEntity).animations.exists(a)?
(this.paused&&(this.paused=!1),this.timeMS=0,this.scml.currentAnimation=a,null!=b&&(this.scml.endAnimCallback=function(a,b,d,c){return function(){return a(b,d,c)}}(b,this,this.scml.currentEntity,a),this.scml.endAnimRemoval=d),!0):!1},__class__:Ni};var Ig=function(a,b,d){aa.call(this);this._pack=a;a=b.split("/");a.pop();this._basePath=a.join("/");b=this._pack.getFile(b).toString();this._scml=new Df(w.parse(b));this._container=(new mb).add(new O);this._library=new cd(this._container,this._pack,this._basePath);
this._spriter=new Ni(d,this._scml,this._library,new Rd)};h["spriter.flambe.SpriterMovie"]=Ig;Ig.__name__=!0;Ig.__super__=aa;Ig.prototype=t(aa.prototype,{get_name:function(){return"SpriterMovie_1"},onStart:function(){this.owner.addChild(this._container)},onUpdate:function(a){this._library.clear();this._spriter.advanceTime(1E3*a|0)},playAnim:function(a){this._spriter.playAnim(a);return this},__class__:Ig});var Gf=function(a){this._basePath=a};h["spriter.library.AbstractLibrary"]=Gf;Gf.__name__=!0;Gf.prototype=
{addGraphic:function(){throw"must be overrided";},compute:function(a,b,d,c){var f=nd.under360(a.angle),n=f*Math.PI/180,p=Math.sin(n),n=Math.cos(n),e=a.x,i=a.y,d=a.x-b.pivotX*d*a.scaleX,b=a.y+(1-b.pivotY)*c*a.scaleY;return new Rd((d-e)*n-(b-i)*p+e,-((d-e)*p+(b-i)*n+i),f,a.scaleX,a.scaleY,a.a,a.spin)},computeRectCoordinates:function(a,b,d,c){var f=-nd.under360(a.angle)*Math.PI/180,n=Math.sin(f),f=Math.cos(f),p=a.x,e=-a.y,i=p-d*a.scaleX*b.pivotX,b=e-c*a.scaleY*(1-b.pivotY),g=i+d*a.scaleX,h=b,g=(g-p)*
f-(h-e)*n+p,h=(g-p)*n+(h-e)*f+e,d=i+d*a.scaleX,j=b+c*a.scaleY,d=(d-p)*f-(j-e)*n+p,j=(d-p)*n+(j-e)*f+e,c=b+c*a.scaleY,a=(i-p)*f-(c-e)*n+p,c=(a-p)*n+(c-e)*f+e,i=(i-p)*f-(b-e)*n+p;return new Ei(new Fe(i,(i-p)*n+(b-e)*f+e),new Fe(g,h),new Fe(d,j),new Fe(a,c))},__class__:Gf};var cd=function(a,b,d){this._basePath=d;this._pack=b;this._point=new bf;this._matrix=new Bb;this._rootEntity=a;cd._textures=new D;this._entityPool=(new Zh(function(){return new mb})).setSize(25)};h["spriter.library.FlambeLibrary"]=
cd;cd.__name__=!0;cd.__super__=Gf;cd.prototype=t(Gf.prototype,{getTexture:function(a){if(!cd._textures.exists(a)){var b=this._pack.getTexture(this._basePath+"/"+a.substring(0,a.lastIndexOf(".")));cd._textures.set(a,b)}return cd._textures.get(a)},clear:function(){for(;null!=this._rootEntity.firstChild;){var a=this._rootEntity.firstChild;this._rootEntity.removeChild(a);this._entityPool.put(a)}this._rootEntity.add(new O)},addGraphic:function(a,b,d,c,f,n){a=this.getTexture(c);f=this.compute(f,n,a.get_width(),
a.get_height());n=new ae(a);n.getLocalMatrix().compose(f.x,f.y,f.scaleX,f.scaleY,qc.toRadians(nd.fixRotation(f.angle)));n.alpha.set__(f.a);this._rootEntity.addChild(this._entityPool.take().add(n))},__class__:cd});var nd=function(){};h["spriter.util.SpriterUtil"]=nd;nd.__name__=!0;nd.toRadians=function(a){return a*Math.PI/180};nd.fixRotation=function(a){0==a&&(a=360);return 360-a};nd.under360=function(a){for(;360<a;)a-=360;for(;0>a;)a+=360;return a};var va=function(a,b){this.name=a;this.def=this.value=
b};h["spriter.vars.Variable"]=va;va.__name__=!0;va.prototype={set:function(){return!1},__class__:va};var Hg=function(a,b){va.call(this,a,b)};h["spriter.vars.VariableFloat"]=Hg;Hg.__name__=!0;Hg.__super__=va;Hg.prototype=t(va.prototype,{set:function(a){var b=this.value;this.value=o.parseFloat(a);return b!=this.value?!0:!1},__class__:Hg});var Gg=function(a,b){va.call(this,a,b)};h["spriter.vars.VariableInt"]=Gg;Gg.__name__=!0;Gg.__super__=va;Gg.prototype=t(va.prototype,{set:function(a){var b=this.value;
this.value=o.parseInt(a);return b!=this.value?!0:!1},__class__:Gg});var Ef=function(a,b){va.call(this,a,b)};h["spriter.vars.VariableString"]=Ef;Ef.__name__=!0;Ef.__super__=va;Ef.prototype=t(va.prototype,{set:function(a){var b=this.value;this.value=a;return b!=this.value?!0:!1},__class__:Ef});var Kc=function(){};h["tools.spark.Main"]=Kc;Kc.__name__=!0;Kc.main=function(){Jg.init();Kc._loadClientConfig()};Kc._loadClientConfig=function(){J.successSignal.connect(Kc._onClientConfigLoaded).once();J.initiateBatch();
J.addFile(Kc._getSkcUrl(),"config");J.loadBatch()};Kc._onClientConfigLoaded=function(){if(!1!=(new Oi(J.getFile("config"))).parseClient()){K.init();Jg.createDisplayRenderers();for(var a=0,b=ea.executeModules;a<b.length;){var d=b[a];++a;F.execute(d)}W.root.add(new Hf)}};Kc._getSkcUrl=function(){try{var a=W._platform.getExternal().call("getMainSparkClientUrl");return 0==a.length?"main.skc":a}catch(b){return"main.skc"}};var J=function(){};h["tools.spark.framework.Assets"]=J;J.__name__=!0;J.init=function(){J._loader=
new Pi;J._loader.successSignal.connect(J._onLoaderSuccess);J._loader.errorSignal.connect(J._onLoaderError);J._loader.progressSignal.connect(J._onLoaderProgress);J.successSignal=new bd;J.errorSignal=new qa;J.progressSignal=new rd};J._onLoaderSuccess=function(){J.successSignal.emit()};J._onLoaderError=function(a){J.errorSignal.emit(a)};J._onLoaderProgress=function(a,b){J.progressSignal.emit(a,b)};J.initiateBatch=function(){J._loader.startNewBatchLoad()};J.addFile=function(a,b,d){null==d&&(d=!1);null==
b&&(b=a);J._loader.addFile(b,a,d)};J.loadBatch=function(){J._loader.initiateLoad()};J.getAssetPackOf=function(a){return J._loader.getAssetPackOf(a)};J.getFile=function(a){return J._loader.getFile(a)};J.getTexture=function(a){return J._loader.getTexture(a)};J.getSound=function(a){return J._loader.getSound(a)};var P=function(){};h["tools.spark.framework.Console"]=P;P.__name__=!0;P.log=function(){};P.info=function(){};P.debug=function(){};P.warn=function(){};P.error=function(){};var Jg=function(){};
h["tools.spark.framework.Framework"]=Jg;Jg.__name__=!0;Jg.init=function(){Object.defineProperty&&Object.defineProperty(Array.prototype,"__class__",{enumerable:!1});W.init();Kg.init();J.init();ea.init();F.init()};Jg.createDisplayRenderers=function(){Kg.createDisplayRenderers()};var F=function(){};h["tools.spark.framework.ModuleManager"]=F;F.__name__=!0;F.init=function(){F._moduleStates=new D;F._modulesLoadQueue=[];F._modulesLoadQueueBytes=[];F._loadingBatch=!1;J.successSignal.connect(F._onLoaderSuccess);
J.errorSignal.connect(F._onLoaderError);J.progressSignal.connect(F._onLoaderProgress)};F._onLoaderSuccess=function(){if(!1!=F._loadingBatch){F._loadingBatch=!1;var a=F._modulesLoadQueue[0],b=wa.LOADED;F._moduleStates.set(a,b);b;F._modulesLoadQueue.shift();F._modulesLoadQueueBytes.shift();F._executeModule(a);F._startLoadBatch()}};F._onLoaderError=function(){null};F._onLoaderProgress=function(){};F.execute=function(a){F.isModuleLoaded(a)?F._executeModule(a):F._loadModule(a)};F.getModuleState=function(a){if(null==
F._moduleStates.get(a)){var b=wa.NOT_LOADED;F._moduleStates.set(a,b);b}return F._moduleStates.get(a)};F.isModuleLoaded=function(a){switch(F.getModuleState(a)[1]){case 0:case 1:return!1;case 2:case 3:case 4:return!0}};F.isModuleExecuted=function(a){switch(F.getModuleState(a)[1]){case 0:case 1:case 2:return!1;case 3:case 4:return!0}};F._executeModule=function(a){if(!F.isModuleExecuted(a)&&F.isModuleExecutable(a)){K.logic.createAndRun(ea.modules.get(a).executeEntity);var b=wa.RUNNING;F._moduleStates.set(a,
b);b}};F.isModuleExecutable=function(a){return"none"==ea.modules.get(a).executeEntity?!1:!0};F._loadModule=function(a){if(F.getModuleState(a)==wa.NOT_LOADED){for(var b=0,d=ea.modules.get(a).requiresModules;b<d.length;){var c=d[b];++b;F.getModuleState(c)==wa.NOT_LOADED&&F._loadModule(c)}F._loadAssetsOfModule(a)}};F._loadAssetsOfModule=function(a){for(var b=0,d=ea.modules.get(a).assets.iterator();d.hasNext();)var c=d.next(),b=b+o.parseInt(c.bytes);d=wa.LOADING;F._moduleStates.set(a,d);d;F._modulesLoadQueue.push(a);
F._modulesLoadQueueBytes.push(b);!1==F._loadingBatch&&F._startLoadBatch()};F._startLoadBatch=function(){if(0<F._modulesLoadQueue.length){var a=F._modulesLoadQueue[0];J.initiateBatch();for(a=ea.modules.get(a).assets.iterator();a.hasNext();){var b=a.next();J.addFile(ea.getPath(b.location,b.type)+b.url,b.id,"true"==b.forceLoadAsData)}J.loadBatch();F._loadingBatch=!0}};var ea=function(){};h["tools.spark.framework.Project"]=ea;ea.__name__=!0;ea.init=function(){ea.executeModules=[];ea.sliced=new ua;ea.paths=
new D;ea.modules=new D};ea.setPath=function(a,b,d){if(null==ea.paths.get(a)){var c=new D;ea.paths.set(a,c);c}ea.paths.get(a).set(b,d);d};ea.getPath=function(a,b){return null==ea.paths.get(a)?null:ea.paths.get(a).get(b)};var Hf=function(){aa.call(this)};h["tools.spark.framework.RootComponent"]=Hf;Hf.__name__=!0;Hf.__super__=aa;Hf.prototype=t(aa.prototype,{get_name:function(){return"RootComponent_0"},onUpdate:function(){K.input.update();K.event.update();K.logic.update();K.display.update();K.comms.update()},
__class__:Hf});var Qi=function(a){this.id=a};h["tools.spark.framework.assets.Asset"]=Qi;Qi.__name__=!0;Qi.prototype={__class__:Qi};var wa=h["tools.spark.framework.assets.EModuleState"]={__ename__:!0,__constructs__:["NOT_LOADED","LOADING","LOADED","RUNNING","PAUSED"]};wa.NOT_LOADED=["NOT_LOADED",0];wa.NOT_LOADED.toString=g;wa.NOT_LOADED.__enum__=wa;wa.LOADING=["LOADING",1];wa.LOADING.toString=g;wa.LOADING.__enum__=wa;wa.LOADED=["LOADED",2];wa.LOADED.toString=g;wa.LOADED.__enum__=wa;wa.RUNNING=["RUNNING",
3];wa.RUNNING.toString=g;wa.RUNNING.__enum__=wa;wa.PAUSED=["PAUSED",4];wa.PAUSED.toString=g;wa.PAUSED.__enum__=wa;var Pi=function(){this._init()};h["tools.spark.framework.assets.FlambeLoader"]=Pi;Pi.__name__=!0;Pi.prototype={_init:function(){this.successSignal=new bd;this.errorSignal=new qa;this.progressSignal=new rd;this._assetInUse=new D;this._assetToBatchLoad=new D;this._batchLoadToAssetPack=new za},startNewBatchLoad:function(){this._manifest=new td},addFile:function(a,b,d){d?this._manifest.add(a,
b+"?"+o.random(1E4),1,z.Data):this._manifest.add(a,b+"?"+o.random(1E4),1);b=this._manifest;this._assetToBatchLoad.set(a,b);b},getAssetPackOf:function(a){return this._batchLoadToAssetPack.h[this._assetToBatchLoad.get(a).__id__]},getFile:function(a){return this._batchLoadToAssetPack.h[this._assetToBatchLoad.get(a).__id__].getFile(a)},getTexture:function(a){return this._batchLoadToAssetPack.h[this._assetToBatchLoad.get(a).__id__].getTexture(a)},getSound:function(a){return this._batchLoadToAssetPack.h[this._assetToBatchLoad.get(a).__id__].getSound(a)},
initiateLoad:function(){this._promise=W._platform.loadAssetPack(this._manifest);this._promiseSignalSuccess=this._promise.success.connect(x(this,this._onPromiseSuccess));this._promiseSignalError=this._promise.error.connect(x(this,this._onPromiseError));this._promiseSignalProgress=this._promise.progressChanged.connect(x(this,this._onPromiseProgress))},_onPromiseSuccess:function(a){this._disposePromiseSignals();this._batchLoadToAssetPack.set(this._manifest,a);a;this.successSignal.emit()},_onPromiseError:function(a){this._disposePromiseSignals();
this.errorSignal.emit(a)},_onPromiseProgress:function(){this.progressSignal.emit(this._promise._progress,this._promise._total)},_disposePromiseSignals:function(){this._promiseSignalSuccess.dispose();this._promiseSignalError.dispose();this._promiseSignalProgress.dispose()},__class__:Pi};var Ri=function(a){this.id=a;this.requiresModules=[];this.assets=new D};h["tools.spark.framework.assets.Module"]=Ri;Ri.__name__=!0;Ri.prototype={__class__:Ri};var Oi=function(a){this._configFile=a;this._initNodeNamesMap();
this._initNodeTypesMap();this._configValidator=new Si(this._xmlNodeTypeToNodeName);this._configInstantiator=new Ti(this._xmlNodeTypeToNodeName)};h["tools.spark.framework.config.Config"]=Oi;Oi.__name__=!0;Oi.prototype={parseClient:function(){return this._parse(m.CLIENT)},_parse:function(a){var b;try{b=w.parse(this._configFile.toString())}catch(d){return P.error(o.string(d)),!1}b=b.firstElement();var c;c=this._xmlNodeNameToNodeType.get(b.get_nodeName());if(c!=a)return P.error("Config file is not correct. Expected Root Child: "+
o.string(a)+", got: "+o.string(c)+"."),!1;this._configValidator.init(a);if(!1==this._validateConfigNode(b))return!1;this._configInstantiator.init(b,a);this._configInstantiator.instantiateProject();this._configInstantiator.instantiateSliced();this._configInstantiator.instantiatePaths();this._configInstantiator.instantiateAssets();return!0},_validateConfigNode:function(a){var b;b=this._xmlNodeNameToNodeType.get(a.get_nodeName());if(this._configValidator.validateConfigNode(a,b))return!0;for(a=a.elements();a.hasNext()&&
!(!1==this._validateConfigNode(a.next())););return!1},_initNodeNamesMap:function(){this._xmlNodeTypeToNodeName=new ua;this._xmlNodeTypeToNodeName.set(m.CLIENT,"Client");"Client";this._xmlNodeTypeToNodeName.set(m.SERVER,"Server");"Server";this._xmlNodeTypeToNodeName.set(m.PROJECT,"Project");"Project";this._xmlNodeTypeToNodeName.set(m.SLICED,"Sliced");"Sliced";this._xmlNodeTypeToNodeName.set(m.PATHS,"Paths");"Paths";this._xmlNodeTypeToNodeName.set(m.ASSETS,"Assets");"Assets";this._xmlNodeTypeToNodeName.set(m.PROJECT_NAME,
"Name");"Name";this._xmlNodeTypeToNodeName.set(m.PROJECT_VERSION,"Version");"Version";this._xmlNodeTypeToNodeName.set(m.EXECUTE_AT_LAUNCH,"ExecuteAtLaunch");"ExecuteAtLaunch";this._xmlNodeTypeToNodeName.set(m.EXECUTE_MODULE,"ExecuteModule");"ExecuteModule";this._xmlNodeTypeToNodeName.set(m.SOUND_SERVICE,"Sound");"Sound";this._xmlNodeTypeToNodeName.set(m.LOGIC_SERVICE,"Logic");"Logic";this._xmlNodeTypeToNodeName.set(m.INPUT_SERVICE,"Input");"Input";this._xmlNodeTypeToNodeName.set(m.COMMUNICATIONS_SERVICE,
"Comms");"Comms";this._xmlNodeTypeToNodeName.set(m.EVENT_SERVICE,"Event");"Event";this._xmlNodeTypeToNodeName.set(m.DISPLAY_SERVICE,"Display");"Display";this._xmlNodeTypeToNodeName.set(m.PATH,"Path");"Path";this._xmlNodeTypeToNodeName.set(m.MODULE,"Module");"Module";this._xmlNodeTypeToNodeName.set(m.ASSET,"Asset");"Asset";this._xmlNodeTypeToNodeName.set(m.REQUIRES,"Requires");"Requires";this._xmlNodeTypeToNodeName.set(m.REQUIRES_MODULE,"RequiresModule");"RequiresModule"},_initNodeTypesMap:function(){this._xmlNodeNameToNodeType=
new D;var a=this._xmlNodeTypeToNodeName.get(m.CLIENT),b=m.CLIENT;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.SERVER);b=m.SERVER;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.PROJECT);b=m.PROJECT;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.SLICED);b=m.SLICED;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.PATHS);b=m.PATHS;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.ASSETS);
b=m.ASSETS;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.PROJECT_NAME);b=m.PROJECT_NAME;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.PROJECT_VERSION);b=m.PROJECT_VERSION;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.EXECUTE_AT_LAUNCH);b=m.EXECUTE_AT_LAUNCH;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.EXECUTE_MODULE);b=m.EXECUTE_MODULE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.SOUND_SERVICE);
b=m.SOUND_SERVICE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.LOGIC_SERVICE);b=m.LOGIC_SERVICE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.INPUT_SERVICE);b=m.INPUT_SERVICE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.COMMUNICATIONS_SERVICE);b=m.COMMUNICATIONS_SERVICE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.EVENT_SERVICE);b=m.EVENT_SERVICE;this._xmlNodeNameToNodeType.set(a,
b);b;a=this._xmlNodeTypeToNodeName.get(m.DISPLAY_SERVICE);b=m.DISPLAY_SERVICE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.PATH);b=m.PATH;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.MODULE);b=m.MODULE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.ASSET);b=m.ASSET;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.REQUIRES);b=m.REQUIRES;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(m.REQUIRES_MODULE);
b=m.REQUIRES_MODULE;this._xmlNodeNameToNodeType.set(a,b);b},__class__:Oi};var Ti=function(a){this._xmlNodeTypeToNodeName=a};h["tools.spark.framework.config.ConfigInstantiator"]=Ti;Ti.__name__=!0;Ti.prototype={init:function(a,b){this._configNode=a;this._rootNodeType=b},instantiateProject:function(){var a=this._configNode.elementsNamed(this._xmlNodeTypeToNodeName.get(m.PROJECT)).next();ea.$name=a.elementsNamed(this._xmlNodeTypeToNodeName.get(m.PROJECT_NAME)).next().firstChild().get_nodeValue();ea.version=
a.elementsNamed(this._xmlNodeTypeToNodeName.get(m.PROJECT_VERSION)).next().firstChild().get_nodeValue();ea.type=this._rootNodeType;for(a=a.elementsNamed(this._xmlNodeTypeToNodeName.get(m.EXECUTE_AT_LAUNCH)).next().elements();a.hasNext();){var b=a.next();ea.executeModules.push(b.firstChild().get_nodeValue())}},instantiateSliced:function(){var a=this._configNode.elementsNamed(this._xmlNodeTypeToNodeName.get(m.SLICED)).next(),b=a.elementsNamed(this._xmlNodeTypeToNodeName.get(m.LOGIC_SERVICE)).next().firstChild().get_nodeValue();
ea.sliced.set(m.LOGIC_SERVICE,b);b;b=a.elementsNamed(this._xmlNodeTypeToNodeName.get(m.COMMUNICATIONS_SERVICE)).next().firstChild().get_nodeValue();ea.sliced.set(m.COMMUNICATIONS_SERVICE,b);b;b=a.elementsNamed(this._xmlNodeTypeToNodeName.get(m.EVENT_SERVICE)).next().firstChild().get_nodeValue();ea.sliced.set(m.EVENT_SERVICE,b);b;ea.type==m.CLIENT&&(b=a.elementsNamed(this._xmlNodeTypeToNodeName.get(m.SOUND_SERVICE)).next().firstChild().get_nodeValue(),ea.sliced.set(m.SOUND_SERVICE,b),b,b=a.elementsNamed(this._xmlNodeTypeToNodeName.get(m.INPUT_SERVICE)).next().firstChild().get_nodeValue(),
ea.sliced.set(m.INPUT_SERVICE,b),b,a=a.elementsNamed(this._xmlNodeTypeToNodeName.get(m.DISPLAY_SERVICE)).next().firstChild().get_nodeValue(),ea.sliced.set(m.DISPLAY_SERVICE,a),a)},instantiatePaths:function(){for(var a=this._configNode.elementsNamed(this._xmlNodeTypeToNodeName.get(m.PATHS)).next().elements();a.hasNext();){var b=a.next();ea.setPath(b.get("location"),b.get("type"),b.firstChild().get_nodeValue())}},instantiateAssets:function(){for(var a=this._configNode.elementsNamed(this._xmlNodeTypeToNodeName.get(m.ASSETS)).next().elements();a.hasNext();){var b=
a.next(),d=b.get("id"),b=this._instantiateModule(b);ea.modules.set(d,b);b}},_instantiateModule:function(a){var b=new Ri(a.get("id"));b.executeEntity=a.get("executeEntity");if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(m.REQUIRES)).hasNext())for(var d=a.elementsNamed(this._xmlNodeTypeToNodeName.get(m.REQUIRES)).next().elements();d.hasNext();){var c=d.next();b.requiresModules.push(c.firstChild().get_nodeValue())}for(a=a.elementsNamed(this._xmlNodeTypeToNodeName.get(m.ASSET));a.hasNext();)d=this._instantiateAsset(a.next()),
b.assets.set(d.id,d),d;return b},_instantiateAsset:function(a){var b;b="useUrl"==a.get("id")?a.firstChild().get_nodeValue():a.get("id");b=new Qi(b);b.url=a.firstChild().get_nodeValue();b.type=a.get("type");b.subtype=a.get("subtype");b.location=a.get("location");b.bytes=a.get("bytes");b.condition=a.get("condition");b.forceLoadAsData=a.get("forceLoadAsData");return b},__class__:Ti};var Si=function(a){this._xmlNodeTypeToNodeName=a};h["tools.spark.framework.config.ConfigValidator"]=Si;Si.__name__=!0;
Si.prototype={init:function(a){this._initNodeRulesMap(a)},_initNodeRulesMap:function(a){this._xmlNodeTypeToNodeRule=new ua;var b=this._createRequiresModuleNodeRule();this._xmlNodeTypeToNodeRule.set(m.REQUIRES_MODULE,b);b;b=this._createRequiresNodeRule();this._xmlNodeTypeToNodeRule.set(m.REQUIRES,b);b;b=this._createAssetNodeRule();this._xmlNodeTypeToNodeRule.set(m.ASSET,b);b;b=this._createModuleNodeRule();this._xmlNodeTypeToNodeRule.set(m.MODULE,b);b;b=this._createAssetsNodeRule();this._xmlNodeTypeToNodeRule.set(m.ASSETS,
b);b;b=this._createPathNodeRule();this._xmlNodeTypeToNodeRule.set(m.PATH,b);b;b=this._createPathsNodeRule();this._xmlNodeTypeToNodeRule.set(m.PATHS,b);b;b=this._createSoundServiceNodeRule();this._xmlNodeTypeToNodeRule.set(m.SOUND_SERVICE,b);b;b=this._createLogicServiceNodeRule();this._xmlNodeTypeToNodeRule.set(m.LOGIC_SERVICE,b);b;b=this._createInputServiceNodeRule();this._xmlNodeTypeToNodeRule.set(m.INPUT_SERVICE,b);b;b=this._createCommsServiceNodeRule();this._xmlNodeTypeToNodeRule.set(m.COMMUNICATIONS_SERVICE,
b);b;b=this._createEventServiceNodeRule();this._xmlNodeTypeToNodeRule.set(m.EVENT_SERVICE,b);b;b=this._createDisplayServiceNodeRule();this._xmlNodeTypeToNodeRule.set(m.DISPLAY_SERVICE,b);b;b=this._createExecuteModuleNodeRule();this._xmlNodeTypeToNodeRule.set(m.EXECUTE_MODULE,b);b;b=this._createExecuteAtLaunchNodeRule();this._xmlNodeTypeToNodeRule.set(m.EXECUTE_AT_LAUNCH,b);b;b=this._createProjectNameNodeRule();this._xmlNodeTypeToNodeRule.set(m.PROJECT_NAME,b);b;b=this._createProjectVersionNodeRule();
this._xmlNodeTypeToNodeRule.set(m.PROJECT_VERSION,b);b;b=this._createProjectNodeRule();this._xmlNodeTypeToNodeRule.set(m.PROJECT,b);b;a==m.CLIENT?(a=this._createSlicedClientNodeRule(),this._xmlNodeTypeToNodeRule.set(m.SLICED,a),a,a=this._createClientNodeRule(),this._xmlNodeTypeToNodeRule.set(m.CLIENT,a),a):a==m.SERVER&&(a=this._createSlicedServerNodeRule(),this._xmlNodeTypeToNodeRule.set(m.SLICED,a),a,a=this._createServerNodeRule(),this._xmlNodeTypeToNodeRule.set(m.SERVER,a),a)},validateConfigNode:function(a,
b){if(null==this._xmlNodeTypeToNodeRule.get(b))return!1;try{return E.checkNode(a,this._xmlNodeTypeToNodeRule.get(b)),!0}catch(d){if(v.__instanceof(d,String))return!1;throw d;}},_createClientNodeRule:function(){var a=A.RList([this._xmlNodeTypeToNodeRule.get(m.PROJECT),this._xmlNodeTypeToNodeRule.get(m.SLICED),this._xmlNodeTypeToNodeRule.get(m.PATHS),this._xmlNodeTypeToNodeRule.get(m.ASSETS)],!1);return A.RNode(this._xmlNodeTypeToNodeName.get(m.CLIENT),[],a)},_createServerNodeRule:function(){var a=
A.RList([this._xmlNodeTypeToNodeRule.get(m.PROJECT),this._xmlNodeTypeToNodeRule.get(m.SLICED),this._xmlNodeTypeToNodeRule.get(m.PATHS),this._xmlNodeTypeToNodeRule.get(m.ASSETS)],!1);return A.RNode(this._xmlNodeTypeToNodeName.get(m.SERVER),[],a)},_createProjectNodeRule:function(){var a=A.RList([this._xmlNodeTypeToNodeRule.get(m.PROJECT_NAME),this._xmlNodeTypeToNodeRule.get(m.PROJECT_VERSION),this._xmlNodeTypeToNodeRule.get(m.EXECUTE_AT_LAUNCH)],!1);return A.RNode(this._xmlNodeTypeToNodeName.get(m.PROJECT),
[],a)},_createProjectNameNodeRule:function(){var a=A.RData();return A.RNode(this._xmlNodeTypeToNodeName.get(m.PROJECT_NAME),[],a)},_createProjectVersionNodeRule:function(){var a=A.RData();return A.RNode(this._xmlNodeTypeToNodeName.get(m.PROJECT_VERSION),[],a)},_createExecuteAtLaunchNodeRule:function(){var a=A.RMulti(this._xmlNodeTypeToNodeRule.get(m.EXECUTE_MODULE),!0);return A.RNode(this._xmlNodeTypeToNodeName.get(m.EXECUTE_AT_LAUNCH),[],a)},_createExecuteModuleNodeRule:function(){var a=A.RData();
return A.RNode(this._xmlNodeTypeToNodeName.get(m.EXECUTE_MODULE),[],a)},_createSlicedClientNodeRule:function(){var a=A.RList([this._xmlNodeTypeToNodeRule.get(m.SOUND_SERVICE),this._xmlNodeTypeToNodeRule.get(m.LOGIC_SERVICE),this._xmlNodeTypeToNodeRule.get(m.INPUT_SERVICE),this._xmlNodeTypeToNodeRule.get(m.COMMUNICATIONS_SERVICE),this._xmlNodeTypeToNodeRule.get(m.EVENT_SERVICE),this._xmlNodeTypeToNodeRule.get(m.DISPLAY_SERVICE)],!1);return A.RNode(this._xmlNodeTypeToNodeName.get(m.SLICED),[],a)},_createSlicedServerNodeRule:function(){var a=
A.RList([this._xmlNodeTypeToNodeRule.get(m.LOGIC_SERVICE),this._xmlNodeTypeToNodeRule.get(m.COMMUNICATIONS_SERVICE),this._xmlNodeTypeToNodeRule.get(m.EVENT_SERVICE)],!1);return A.RNode(this._xmlNodeTypeToNodeName.get(m.SLICED),[],a)},_createSoundServiceNodeRule:function(){var a=A.RData();return A.RNode(this._xmlNodeTypeToNodeName.get(m.SOUND_SERVICE),[],a)},_createLogicServiceNodeRule:function(){var a=A.RData();return A.RNode(this._xmlNodeTypeToNodeName.get(m.LOGIC_SERVICE),[],a)},_createInputServiceNodeRule:function(){var a=
A.RData();return A.RNode(this._xmlNodeTypeToNodeName.get(m.INPUT_SERVICE),[],a)},_createCommsServiceNodeRule:function(){var a=A.RData();return A.RNode(this._xmlNodeTypeToNodeName.get(m.COMMUNICATIONS_SERVICE),[],a)},_createEventServiceNodeRule:function(){var a=A.RData();return A.RNode(this._xmlNodeTypeToNodeName.get(m.EVENT_SERVICE),[],a)},_createDisplayServiceNodeRule:function(){var a=A.RData();return A.RNode(this._xmlNodeTypeToNodeName.get(m.DISPLAY_SERVICE),[],a)},_createPathsNodeRule:function(){var a=
A.RMulti(this._xmlNodeTypeToNodeRule.get(m.PATH),!0);return A.RNode(this._xmlNodeTypeToNodeName.get(m.PATHS),[],a)},_createPathNodeRule:function(){var a=A.RData(),b=[Pb.Att("location"),Pb.Att("type")];return A.RNode(this._xmlNodeTypeToNodeName.get(m.PATH),b,a)},_createAssetsNodeRule:function(){var a=A.RMulti(this._xmlNodeTypeToNodeRule.get(m.MODULE),!0);return A.RNode(this._xmlNodeTypeToNodeName.get(m.ASSETS),[],a)},_createModuleNodeRule:function(){var a=A.RList([A.ROptional(this._xmlNodeTypeToNodeRule.get(m.REQUIRES)),
A.RMulti(this._xmlNodeTypeToNodeRule.get(m.ASSET),!0)],!1),b=[Pb.Att("id"),Pb.Att("executeEntity",null,"none")];return A.RNode(this._xmlNodeTypeToNodeName.get(m.MODULE),b,a)},_createAssetNodeRule:function(){var a=A.RData(),b=[Pb.Att("location"),Pb.Att("type"),Pb.Att("bytes"),Pb.Att("subtype",null,"none"),Pb.Att("id",null,"useUrl"),Pb.Att("condition",null,"always"),Pb.Att("forceLoadAsData",null,"false")];return A.RNode(this._xmlNodeTypeToNodeName.get(m.ASSET),b,a)},_createRequiresNodeRule:function(){var a=
A.RMulti(this._xmlNodeTypeToNodeRule.get(m.REQUIRES_MODULE),!0);return A.RNode(this._xmlNodeTypeToNodeName.get(m.REQUIRES),[],a)},_createRequiresModuleNodeRule:function(){var a=A.RData();return A.RNode(this._xmlNodeTypeToNodeName.get(m.REQUIRES_MODULE),[],a)},__class__:Si};var m=h["tools.spark.framework.config.ENodeType"]={__ename__:!0,__constructs__:"CLIENT,SERVER,PROJECT,SLICED,PATHS,ASSETS,PROJECT_NAME,PROJECT_VERSION,EXECUTE_AT_LAUNCH,EXECUTE_MODULE,SOUND_SERVICE,LOGIC_SERVICE,INPUT_SERVICE,COMMUNICATIONS_SERVICE,EVENT_SERVICE,DISPLAY_SERVICE,PATH,MODULE,ASSET,REQUIRES,REQUIRES_MODULE".split(",")};
m.CLIENT=["CLIENT",0];m.CLIENT.toString=g;m.CLIENT.__enum__=m;m.SERVER=["SERVER",1];m.SERVER.toString=g;m.SERVER.__enum__=m;m.PROJECT=["PROJECT",2];m.PROJECT.toString=g;m.PROJECT.__enum__=m;m.SLICED=["SLICED",3];m.SLICED.toString=g;m.SLICED.__enum__=m;m.PATHS=["PATHS",4];m.PATHS.toString=g;m.PATHS.__enum__=m;m.ASSETS=["ASSETS",5];m.ASSETS.toString=g;m.ASSETS.__enum__=m;m.PROJECT_NAME=["PROJECT_NAME",6];m.PROJECT_NAME.toString=g;m.PROJECT_NAME.__enum__=m;m.PROJECT_VERSION=["PROJECT_VERSION",7];m.PROJECT_VERSION.toString=
g;m.PROJECT_VERSION.__enum__=m;m.EXECUTE_AT_LAUNCH=["EXECUTE_AT_LAUNCH",8];m.EXECUTE_AT_LAUNCH.toString=g;m.EXECUTE_AT_LAUNCH.__enum__=m;m.EXECUTE_MODULE=["EXECUTE_MODULE",9];m.EXECUTE_MODULE.toString=g;m.EXECUTE_MODULE.__enum__=m;m.SOUND_SERVICE=["SOUND_SERVICE",10];m.SOUND_SERVICE.toString=g;m.SOUND_SERVICE.__enum__=m;m.LOGIC_SERVICE=["LOGIC_SERVICE",11];m.LOGIC_SERVICE.toString=g;m.LOGIC_SERVICE.__enum__=m;m.INPUT_SERVICE=["INPUT_SERVICE",12];m.INPUT_SERVICE.toString=g;m.INPUT_SERVICE.__enum__=
m;m.COMMUNICATIONS_SERVICE=["COMMUNICATIONS_SERVICE",13];m.COMMUNICATIONS_SERVICE.toString=g;m.COMMUNICATIONS_SERVICE.__enum__=m;m.EVENT_SERVICE=["EVENT_SERVICE",14];m.EVENT_SERVICE.toString=g;m.EVENT_SERVICE.__enum__=m;m.DISPLAY_SERVICE=["DISPLAY_SERVICE",15];m.DISPLAY_SERVICE.toString=g;m.DISPLAY_SERVICE.__enum__=m;m.PATH=["PATH",16];m.PATH.toString=g;m.PATH.__enum__=m;m.MODULE=["MODULE",17];m.MODULE.toString=g;m.MODULE.__enum__=m;m.ASSET=["ASSET",18];m.ASSET.toString=g;m.ASSET.__enum__=m;m.REQUIRES=
["REQUIRES",19];m.REQUIRES.toString=g;m.REQUIRES.__enum__=m;m.REQUIRES_MODULE=["REQUIRES_MODULE",20];m.REQUIRES_MODULE.toString=g;m.REQUIRES_MODULE.__enum__=m;var If=function(){};h["tools.spark.framework.space2_5D.interfaces.IBase2_5D"]=If;If.__name__=!0;If.prototype={__class__:If};var od=function(a){this.gameEntity=a};h["tools.spark.framework.space2_5D.core.ABase2_5D"]=od;od.__name__=!0;od.__interfaces__=[If];od.prototype={setPosSize:function(){},__class__:od};var Jf=function(){};h["tools.spark.framework.space2_5D.interfaces.IObject2_5D"]=
Jf;Jf.__name__=!0;Jf.__interfaces__=[If];var dd=function(a){this.gameEntity=a};h["tools.spark.framework.space2_5D.core.AObject2_5D"]=dd;dd.__name__=!0;dd.__interfaces__=[Jf];dd.__super__=od;dd.prototype=t(od.prototype,{__class__:dd});var Lg=function(){};h["tools.spark.framework.space2_5D.interfaces.ICamera2_5D"]=Lg;Lg.__name__=!0;Lg.__interfaces__=[Jf];Lg.prototype={__class__:Lg};var Ma=function(a){this.gameEntity=a;this._initACamera2_5D()};h["tools.spark.framework.space2_5D.core.ACamera2_5D"]=Ma;
Ma.__name__=!0;Ma.__interfaces__=[Lg];Ma.__super__=dd;Ma.prototype=t(dd.prototype,{_initACamera2_5D:function(){this._attachedToViews=new za},attachToView:function(a){this._attachedToViews.set(a,a);a;return null},__class__:Ma});var Ge=function(a){Ma.call(this,a)};h["tools.spark.framework.dom2_5D.DomCamera2_5D"]=Ge;Ge.__name__=!0;Ge.__super__=Ma;Ge.prototype=t(Ma.prototype,{__class__:Ge});var Ui=function(){};h["tools.spark.framework.space2_5D.interfaces.IObjectContainer2_5D"]=Ui;Ui.__name__=!0;Ui.__interfaces__=
[Jf];var Na=function(a){this.gameEntity=a;this.children=[]};h["tools.spark.framework.space2_5D.core.AObjectContainer2_5D"]=Na;Na.__name__=!0;Na.__interfaces__=[Ui];Na.__super__=dd;Na.prototype=t(dd.prototype,{addChild:function(a){this.children.push(a)},removeChild:function(a){C.remove(this.children,a)},__class__:Na});var ge=function(){};h["tools.spark.framework.space2_5D.interfaces.IInstantiable2_5D"]=ge;ge.__name__=!0;ge.__interfaces__=[Ui];ge.prototype={__class__:ge};var sa=function(a){Na.call(this,
a);this._instances=new za;this._updateStateFunctions=new D;this.groupInstances=new za};h["tools.spark.framework.space2_5D.core.AInstantiable2_5D"]=sa;sa.__name__=!0;sa.__interfaces__=[ge];sa.__super__=Na;sa.prototype=t(Na.prototype,{getInstance:function(a){return this._instances.h[a.__id__]},_updateState:function(a,b){if(null==b)for(var d=this._instances.keys();d.hasNext();){var c=d.next();null!=this._updateStateFunctions.get(a)?this._updateStateFunctions.get(a)(this.gameEntity.getState(a),c):null}else null!=
this._updateStateFunctions.get(a)?this._updateStateFunctions.get(a)(this.gameEntity.getState(a),b):null},_updateLayoutGroup:function(a){if(null==a)for(a=this.groupInstances.keys();a.hasNext();)this.groupInstances.h[a.next().__id__].update();else this.groupInstances.h[a.__id__].update()},_createChildrenOfInstance:function(a){for(var b=0,d=this.children;b<d.length;){var c=d[b];++b;this._createChildOfInstance(c,a)}},createInstance:function(a){this._createChildrenOfInstance(a);return this._instances.h[a.__id__]},
_createChildOfInstance:function(){},_removeChildOfInstance:function(){},update:function(){},addChild:function(a){Na.prototype.addChild.call(this,a);for(var b=this._instances.keys();b.hasNext();){var d=b.next();this._createChildOfInstance(a,d);a.update(d)}},removeChild:function(a){Na.prototype.removeChild.call(this,a);for(var b=this._instances.keys();b.hasNext();){var d=b.next();this._removeChildOfInstance(a,d)}},__class__:sa});var Kf=function(){};h["tools.spark.framework.space2_5D.interfaces.IEntity2_5D"]=
Kf;Kf.__name__=!0;Kf.__interfaces__=[ge];Kf.prototype={__class__:Kf};var $a=function(a){sa.call(this,a)};h["tools.spark.framework.space2_5D.core.AEntity2_5D"]=$a;$a.__name__=!0;$a.__interfaces__=[Kf];$a.__super__=sa;$a.prototype=t(sa.prototype,{createInstance:function(a){if(!0==this.gameEntity.getState("layoutable")){var b=new He(this.gameEntity,"Entity",this);this.groupInstances.set(a,b);b}return sa.prototype.createInstance.call(this,a)},_createChildOfInstance:function(a,b){!0==a.gameEntity.getState("layoutable")&&
this.groupInstances.h[b.__id__].children.push(a.groupInstances.h[b.__id__])},_removeChildOfInstance:function(a,b){!0==a.gameEntity.getState("layoutable")&&C.remove(this.groupInstances.h[b.__id__].children,a.groupInstances.h[b.__id__])},__class__:$a});var Lc=function(a){sa.call(this,a);this._initDomEntity2_5D()};h["tools.spark.framework.dom2_5D.DomEntity2_5D"]=Lc;Lc.__name__=!0;Lc.__super__=$a;Lc.prototype=t($a.prototype,{_initDomEntity2_5D:function(){var a=x(this,this._updateNCmeshType);this._updateStateFunctions.set("NCmeshType",
a);a;a=x(this,this._updateTouchable);this._updateStateFunctions.set("touchable",a);a;a=x(this,this._updateNCstyleable);this._updateStateFunctions.set("NCstyleable",a);a;a=x(this,this._updateVisibility);this._updateStateFunctions.set("visibility",a);a;a=x(this,this._updateOpacity);this._updateStateFunctions.set("opacity",a);a;a=x(this,this._updateDisplay);this._updateStateFunctions.set("display",a);a;a=x(this,this._updateText);this._updateStateFunctions.set("text",a);a;a=x(this,this._updateFontColor);
this._updateStateFunctions.set("fontColor",a);a;a=x(this,this._updateImageSrc);this._updateStateFunctions.set("src",a);a;a=x(this,this._updateFontSize);this._updateStateFunctions.set("fontSize",a);a;a=x(this,this._updateOverflow);this._updateStateFunctions.set("overflow",a);a;a=x(this,this._updateWidth);this._updateStateFunctions.set("width",a);a;a=x(this,this._updateHeight);this._updateStateFunctions.set("height",a);a;a=x(this,this._updateBackgroundColor);this._updateStateFunctions.set("backgroundColor",
a);a},createInstance:function(a){switch(this.gameEntity.getState("NCmeshType")){case "Div":var b;b=window.document.createElement("div");this._instances.set(a,b);b;break;case "Input":b=window.document.createElement("input");this._instances.set(a,b);b;this._instances.h[a.__id__].onchange=x(this,this._onChange);this._instances.h[a.__id__].style.outline="0";break;case "Button":b=window.document.createElement("div");this._instances.set(a,b);b;this._instances.h[a.__id__].style.outline="0";break;case "Image":b=
window.document.createElement("img");this._instances.set(a,b);b;break;case "Ace":b=window.document.createElement("div");this._instances.set(a,b);b;break;case "Tree":b=window.document.createElement("div");this._instances.set(a,b);b;break;default:b=window.document.createElement("div"),this._instances.set(a,b),b}this._instances.h[a.__id__].style.position="absolute";return $a.prototype.createInstance.call(this,a)},_createChildOfInstance:function(a,b){this._instances.h[b.__id__].appendChild(v.__cast(a.createInstance(b),
Element));$a.prototype._createChildOfInstance.call(this,a,b)},_removeChildOfInstance:function(a,b){this._instances.h[b.__id__].removeChild(v.__cast(a.getInstance(b),Element));$a.prototype._removeChildOfInstance.call(this,a,b)},update:function(a){this._updateState("NCmeshType",a);!0==this.gameEntity.getState("NCstyleable")&&(this._updateState("NCstyleable",a),this._updateState("visibility",a),this._updateState("opacity",a),this._updateState("display",a),this._updateState("fontSize",a),this._updateState("fontColor",
a),this._updateState("overflow",a),this._updateState("backgroundColor",a));this._updateState("touchable",a);null!=this.gameEntity.getState("text")&&this._updateState("text",a);!0==this.gameEntity.getState("layoutable")&&this._updateLayoutGroup(a);for(var b=0,d=this.children;b<d.length;){var c=d[b];++b;c.update(a)}},setPosSize:function(a,b,d,c,f){f=this._instances.h[f.__id__];null!=f&&(null!=a&&(f.style.left=(null==a?"null":""+a)+"px"),null!=b&&(f.style.top=(null==b?"null":""+b)+"px"),null!=d&&(f.style.width=
(null==d?"null":""+d)+"px"),null!=c&&(f.style.height=(null==c?"null":""+c)+"px"))},_updateNCstyleable:function(a,b){null!=this.gameEntity.getState("border")&&"Undefined"!=this.gameEntity.getState("border")&&(this._instances.h[b.__id__].style.border=this.gameEntity.getState("border"));null!=this.gameEntity.getState("borderRadius")&&"Undefined"!=this.gameEntity.getState("borderRadius")&&(this._instances.h[b.__id__].style.borderRadius=this.gameEntity.getState("borderRadius"));null!=this.gameEntity.getState("boxShadow")&&
"Undefined"!=this.gameEntity.getState("boxShadow")&&(this._instances.h[b.__id__].style.boxShadow=this.gameEntity.getState("boxShadow"));null!=this.gameEntity.getState("fontFamily")&&"Undefined"!=this.gameEntity.getState("fontFamily")&&(this._instances.h[b.__id__].style.fontFamily=this.gameEntity.getState("fontFamily"));null!=this.gameEntity.getState("textAlign")&&"Undefined"!=this.gameEntity.getState("textAlign")&&(this._instances.h[b.__id__].style.textAlign=this.gameEntity.getState("textAlign"));
null!=this.gameEntity.getState("textVerticalAlign")&&"Undefined"!=this.gameEntity.getState("textVerticalAlign")&&"middle"==this.gameEntity.getState("textVerticalAlign")&&(this._instances.h[b.__id__].style.lineHeight=o.string(this.gameEntity.getState("height"))+"px");null!=this.gameEntity.getState("textIndent")&&"Undefined"!=this.gameEntity.getState("textIndent")&&(this._instances.h[b.__id__].style.textIndent=this.gameEntity.getState("textIndent"));null!=this.gameEntity.getState("cursor")&&"Undefined"!=
this.gameEntity.getState("cursor")&&(this._instances.h[b.__id__].style.cursor=this.gameEntity.getState("cursor"));null!=this.gameEntity.getState("white-space")&&"Undefined"!=this.gameEntity.getState("white-space")&&(this._instances.h[b.__id__].style.whiteSpace=this.gameEntity.getState("white-space"))},_updateImageSrc:function(a,b){var d=this._instances.h[b.__id__];if("Undefined"!=a)if(-1==a.indexOf("assets/")){var c=ea.modules.get("DoNotLoad").assets.get(a);d.src=ea.getPath(c.location,c.type)+c.url}else d.src=
"../"+a},_updateWidth:function(a,b){!0==this.gameEntity.getState("layoutable")&&(this.groupInstances.h[b.__id__].updateState("width"),K.display.projectActiveSpaceReference.activeStageReference.layoutManager.validated=!1)},_updateHeight:function(a,b){!0==this.gameEntity.getState("layoutable")&&(this.groupInstances.h[b.__id__].updateState("height"),K.display.projectActiveSpaceReference.activeStageReference.layoutManager.validated=!1)},_updateOverflow:function(a,b){"Undefined"!=a&&(this._instances.h[b.__id__].style.overflow=
a)},_updateFontSize:function(a,b){"Undefined"!=a&&(this._instances.h[b.__id__].style.fontSize=a)},_updateFontColor:function(a,b){"Undefined"!=a&&(this._instances.h[b.__id__].style.color=a)},_updateVisibility:function(a,b){this._instances.h[b.__id__].style.visibility=a},_updateOpacity:function(a,b){this._instances.h[b.__id__].style.opacity=a},_updateBackgroundColor:function(a,b){"Undefined"!=a&&(this._instances.h[b.__id__].style.backgroundColor=a)},_updateDisplay:function(a,b){this._instances.h[b.__id__].style.display=
a},_updateText:function(a,b){if("Undefined"!=a)switch(this.gameEntity.getState("NCmeshType")){case "Div":this._instances.h[b.__id__].innerHTML=a;break;case "Input":this._instances.h[b.__id__].value=a;break;case "Button":this._instances.h[b.__id__].innerHTML=a}},_updateNCmeshType:function(a,b){switch(a){case "Div":break;case "Button":this._updateButtonProperties(b);break;case "Input":this._updateInputProperties(b);break;case "Image":this._updateImageSrc(this.gameEntity.getState("src"),b);break;case "Ace":this._updateAceProperties(b);
break;case "Tree":this._updateTreeProperties(b);break;case "Undefined":null;break;default:null}},_updateInputProperties:function(a){a=this._instances.h[a.__id__];null!=this.gameEntity.getState("text")&&"Undefined"!=this.gameEntity.getState("text")&&(a.value=this.gameEntity.getState("text"));null!=this.gameEntity.getState("placeholder")&&"Undefined"!=this.gameEntity.getState("placeholder")&&(a.placeholder=this.gameEntity.getState("placeholder"));null!=this.gameEntity.getState("type")&&"Undefined"!=
this.gameEntity.getState("type")&&(a.type=this.gameEntity.getState("type"));"file"==this.gameEntity.getState("type")&&null!=this.gameEntity.getState("accept")&&"Undefined"!=this.gameEntity.getState("accept")&&(a.accept=this.gameEntity.getState("accept"))},_updateButtonProperties:function(a){a=this._instances.h[a.__id__];null!=this.gameEntity.getState("text")&&"Undefined"!=this.gameEntity.getState("text")&&(a.innerHTML=this.gameEntity.getState("text"))},_updateAceProperties:function(a){this._instances.h[a.__id__].id=
"editor";a=ace.edit("editor");a.setTheme("ace/theme/merbivore_soft");a.getSession().setMode("ace/mode/xml");this.gameEntity.setState("aceObject",a)},_updateTreeProperties:function(a){a=this._instances.h[a.__id__];a.id="tree";var b=$("#tree");a.style.overflowX="hidden";a.style.overflowY="scroll";this.gameEntity.setState("treeObject",b)},_updateTouchable:function(a,b){var d=this._instances.h[b.__id__];null!=d&&a&&(d.onclick=x(this,this._onPointerClick))},_onPointerClick:function(){K.input.pointer.submitPointerEvent(k.MOUSE_LEFT_CLICK,
this.gameEntity)},_onChange:function(a){"file"==this.gameEntity.getState("type")?(this.gameEntity.setState("files",a.target.files),K.input.pointer.submitPointerEvent(k.MOUSE_LEFT_CLICK,this.gameEntity)):(this.gameEntity.setState("text",a.target.value),K.event.raiseEvent(k.CHANGED,this.gameEntity))},__class__:Lc});var $j=function(){};h["tools.spark.framework.space2_5D.interfaces.IScene2_5D"]=$j;$j.__name__=!0;$j.__interfaces__=[ge];var ab=function(a){sa.call(this,a)};h["tools.spark.framework.space2_5D.core.AScene2_5D"]=
ab;ab.__name__=!0;ab.__interfaces__=[$j];ab.__super__=sa;ab.prototype=t(sa.prototype,{createInstance:function(a){return sa.prototype.createInstance.call(this,a)},_createChildOfInstance:function(a,b){!0==a.gameEntity.getState("layoutable")&&b.group.children.push(a.groupInstances.h[b.__id__]);a.parentScene=this},_removeChildOfInstance:function(a,b){!0==a.gameEntity.getState("layoutable")&&C.remove(b.group.children,a.groupInstances.h[b.__id__])},__class__:ab});var Vc=function(a){sa.call(this,a);this._initDomScene2_5D()};
h["tools.spark.framework.dom2_5D.DomScene2_5D"]=Vc;Vc.__name__=!0;Vc.__super__=ab;Vc.prototype=t(ab.prototype,{_initDomScene2_5D:function(){},createInstance:function(a){var b;b=window.document.createElement("div");this._instances.set(a,b);b;this._instances.h[a.__id__].style.position="absolute";return ab.prototype.createInstance.call(this,a)},update:function(a){for(var b=0,d=this.children;b<d.length;){var c=d[b];++b;c.update(a)}},_createChildOfInstance:function(a,b){this._instances.h[b.__id__].appendChild(v.__cast(a.createInstance(b),
Element));ab.prototype._createChildOfInstance.call(this,a,b)},__class__:Vc});var Mg=function(){};h["tools.spark.framework.space2_5D.interfaces.IView2_5D"]=Mg;Mg.__name__=!0;Mg.__interfaces__=[If];Mg.prototype={__class__:Mg};var zc=function(a){this.gameEntity=a;this.group=K.display.projectActiveSpaceReference.activeStageReference.layoutManager.getViewGroupByGameEntity(this.gameEntity);this.group.layoutableInstance=this};h["tools.spark.framework.space2_5D.core.AView2_5D"]=zc;zc.__name__=!0;zc.__interfaces__=
[Mg];zc.__super__=od;zc.prototype=t(od.prototype,{render:function(){},__class__:zc});var Ie=function(a){zc.call(this,a);this._initDomView2_5D()};h["tools.spark.framework.dom2_5D.DomView2_5D"]=Ie;Ie.__name__=!0;Ie.__super__=zc;Ie.prototype=t(zc.prototype,{updateState:function(a){switch(a){case "visible":this._instanceView.style.display=!0==this.gameEntity.getState(a)?"inline":"none"}},_initDomView2_5D:function(){var a=window.document.getElementById("content");this._instanceView=window.document.createElement("div");
this._instanceView.style.position="absolute";a.insertBefore(this._instanceView,a.firstElementChild)},set_camera:function(a){if(this.camera==a)return this.camera;if(null==a)return this.camera=null,this._updateCurrentView(),null;this.camera=a;this.camera.attachToView(this);this._updateCurrentView();return this.camera},set_scene:function(a){if(this.scene==a)return this.scene;if(null==a)return this.scene=null,this._disposeCurrentScene(),this._updateCurrentView(),null;this.scene=a;this._instanceScene=
v.__cast(this.scene.createInstance(this),HTMLDivElement);this._updateCurrentView();return this.scene},_updateCurrentView:function(){null==this.scene||null==this.camera?null!=this._instanceView.firstElementChild&&this._instanceView.removeChild(this._instanceView.firstElementChild):(null==this._instanceView.firstElementChild&&this._instanceView.appendChild(this._instanceScene),this.scene.update(this))},_disposeCurrentScene:function(){this._instanceScene=null},setPosSize:function(a,b,d,c){null!=a&&(this._instanceView.style.left=
(null==a?"null":""+a)+"px");null!=b&&(this._instanceView.style.top=(null==b?"null":""+b)+"px");null!=d&&(this._instanceView.style.width=(null==d?"null":""+d)+"px");null!=c&&(this._instanceView.style.height=(null==c?"null":""+c)+"px")},__class__:Ie});var Lf=function(a){Ma.call(this,a)};h["tools.spark.framework.flambe2_5D.FlambeCamera2_5D"]=Lf;Lf.__name__=!0;Lf.__super__=Ma;Lf.prototype=t(Ma.prototype,{__class__:Lf});var he=function(a){sa.call(this,a);this._initFlambeEntity2_5D()};h["tools.spark.framework.flambe2_5D.FlambeEntity2_5D"]=
he;he.__name__=!0;he.__super__=$a;he.prototype=t($a.prototype,{_initFlambeEntity2_5D:function(){this._instancesMesh=new za;var a=x(this,this._update2DMeshType);this._updateStateFunctions.set("2DmeshType",a);a;a=x(this,this._updatePositionX);this._updateStateFunctions.set("spaceX",a);a;a=x(this,this._updatePositionY);this._updateStateFunctions.set("spaceY",a);a;a=x(this,this._updateSizeX);this._updateStateFunctions.set("scaleX",a);a;a=x(this,this._updateSizeY);this._updateStateFunctions.set("scaleY",
a);a;a=x(this,this._updateTouchable);this._updateStateFunctions.set("touchable",a);a;a=x(this,this._updateVisible);this._updateStateFunctions.set("visible",a);a;a=x(this,this._updateOpacity);this._updateStateFunctions.set("opacity",a);a;a=x(this,this._centerAnchor);this._updateStateFunctions.set("centerAnchor",a);a;a=x(this,this._updatePhysics);this._updateStateFunctions.set("physicsEntity",a);a;a=x(this,this._updateSpaceWidth);this._updateStateFunctions.set("spaceWidth",a);a;a=x(this,this._updateSpaceHeight);
this._updateStateFunctions.set("spaceHeight",a);a;a=x(this,this._update2DMeshImageForm);this._updateStateFunctions.set("2DMeshImageForm",a);a;a=x(this,this._update2DMeshSpriterForm);this._updateStateFunctions.set("2DMeshSpriterForm",a);a;a=x(this,this._update2DMeshFillRectForm);this._updateStateFunctions.set("2DMeshFillRectForm",a);a;a=x(this,this._update2DMeshSpriteForm);this._updateStateFunctions.set("2DMeshSpriteForm",a);a;a=x(this,this._update2DMeshSpriterAnimForm);this._updateStateFunctions.set("2DMeshSpriterAnimForm",
a);a},createInstance:function(a){var b=new mb;this._instances.set(a,b);b;return $a.prototype.createInstance.call(this,a)},_createChildOfInstance:function(a,b){this._instances.h[b.__id__].addChild(v.__cast(a.createInstance(b),mb));$a.prototype._createChildOfInstance.call(this,a,b)},update:function(a){this._updateState("2DmeshType",a);if(null==this.gameEntity.getState("layoutable")||!1==this.gameEntity.getState("layoutable"))this._updateState("spaceX",a),this._updateState("spaceY",a);this._updateState("scaleX",
a);this._updateState("scaleY",a);this._updateState("touchable",a);this._updateState("visible",a);this._updateState("opacity",a);this._updateState("centerAnchor",a);this._updateState("physicsEntity",a);!0==this.gameEntity.getState("layoutable")&&this._updateLayoutGroup(a);for(var b=0,d=this.children;b<d.length;){var c=d[b];++b;c.update(a)}},_update2DMeshType:function(a,b){switch(a){case "Image":null!=this._updateStateFunctions.get("2DMeshImageForm")?this._updateStateFunctions.get("2DMeshImageForm")(this.gameEntity.getState("2DMeshImageForm"),
b):null;break;case "Spriter":null!=this._updateStateFunctions.get("2DMeshSpriterForm")?this._updateStateFunctions.get("2DMeshSpriterForm")(this.gameEntity.getState("2DMeshSpriterForm"),b):null;break;case "FillRect":null!=this._updateStateFunctions.get("2DMeshFillRectForm")?this._updateStateFunctions.get("2DMeshFillRectForm")(this.gameEntity.getState("2DMeshFillRectForm"),b):null;break;case "Sprite":null!=this._updateStateFunctions.get("2DMeshSpriteForm")?this._updateStateFunctions.get("2DMeshSpriteForm")(this.gameEntity.getState("2DMeshSpriteForm"),
b):null;break;case "Undefined":null;break;default:null}this._updateBounds(b)},_update2DMeshImageForm:function(a,b){if(!("Image"!=this.gameEntity.getState("2DmeshType")||"Undefined"==a)){var d=this._instances.h[b.__id__],c;c=null!=this._instancesMesh.h[b.__id__]?v.__cast(this._instancesMesh.h[b.__id__],ae):null;null==c?(c=new ae(J.getTexture(this.gameEntity.gameForm.getState(a))),c.blendMode=ka.Copy,d.add(c),this._instancesMesh.set(b,c),c):c.texture=J.getTexture(this.gameEntity.gameForm.getState(a))}},
_update2DMeshSpriterForm:function(a,b){if(!("Spriter"!=this.gameEntity.getState("2DmeshType")||"Undefined"==a)){var d=this._instances.h[b.__id__],c=this._instancesMesh.h[b.__id__];if(null==c){var c=new O,f=this.gameEntity.gameForm.getState(a),f=new Ig(J.getAssetPackOf(f),f,null);c.blendMode=ka.Copy;d.add(c);d.add(f);this._instancesMesh.set(b,c);c}null!=this._updateStateFunctions.get("2DMeshSpriterAnimForm")?this._updateStateFunctions.get("2DMeshSpriterAnimForm")(this.gameEntity.getState("2DMeshSpriterAnimForm"),
b):null}},_update2DMeshFillRectForm:function(a,b){if(!("FillRect"!=this.gameEntity.getState("2DmeshType")||"Undefined"==a)){var d=this._instances.h[b.__id__],c;c=null!=this._instancesMesh.h[b.__id__]?v.__cast(this._instancesMesh.h[b.__id__],Tc):null;null==c&&(c=new Tc(this.gameEntity.gameForm.getState(a),this.gameEntity.getState("spaceWidth"),this.gameEntity.getState("spaceHeight")),c.blendMode=ka.Copy,d.add(c),this._instancesMesh.set(b,c),c)}},_update2DMeshSpriteForm:function(a,b){if(!("Sprite"!=
this.gameEntity.getState("2DmeshType")||"Undefined"==a)){var d=this._instances.h[b.__id__],c;c=null!=this._instancesMesh.h[b.__id__]?v.__cast(this._instancesMesh.h[b.__id__],O):null;null==c&&(c=new O,c.blendMode=ka.Copy,d.add(c),this._instancesMesh.set(b,c),c)}},_update2DMeshSpriterAnimForm:function(a,b){if(!("Spriter"!=this.gameEntity.getState("2DmeshType")||"Undefined"==this.gameEntity.getState("2DMeshSpriterForm"))&&"Undefined"!=a){var d=this._instances.h[b.__id__]._compMap.SpriterMovie_1;null!=
d&&d.playAnim(this.gameEntity.gameForm.getState(a))}},_updatePositionX:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&d.x.set__(a)},_updatePositionY:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&d.y.set__(a)},_updateSizeX:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&d.scaleX.set__(a)},_updateSizeY:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&d.scaleY.set__(a)},_updateVisible:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&d.set_visible(a)},
_updateOpacity:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&d.setAlpha(a)},_centerAnchor:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&d.centerAnchor()},_updatePhysics:function(a,b){var d=this._instances.h[b.__id__],c=this._instancesMesh.h[b.__id__];if(null!=c&&a&&(P.error("UPDATING PHYSICS ENTITY: "+o.string(this.gameEntity.getState("name"))+": "+o.string(this.gameEntity.getState("physicsType"))),null!=this.parentScene&&this.parentScene.gameEntity.getState("physicsScene"))){var f=
this.parentScene.getInstance(b),n;"Static"==this.gameEntity.getState("physicsType")?(null==i.BodyType_STATIC&&(i.internal=!0,i.BodyType_STATIC=new Eb,i.internal=!1),n=new Pd(i.BodyType_STATIC)):n=new Pd;var p;switch(this.gameEntity.getState("physicsMaterial")){case "Glass":p=ra.glass();break;case "Ice":p=ra.ice();break;case "Rubber":p=ra.rubber();break;case "Sand":p=ra.sand();break;case "Steel":p=ra.steel();break;case "Wood":p=ra.wood();break;default:p=ra.wood()}switch(this.gameEntity.getState("physicsShape")){case "Circle":var e=
(c.getNaturalWidth()*c.scaleX._value+c.getNaturalHeight()*c.scaleY._value)/4;p=new Dg(e,null,p);break;case "Polygon":p=new Tb(Tb.box(c.getNaturalWidth()*c.scaleX._value,c.getNaturalHeight()*c.scaleY._value),p);break;default:p=new Tb(Tb.box(c.getNaturalWidth()*c.scaleX._value,c.getNaturalHeight()*c.scaleY._value),p)}n.zpp_inner.wrap_shapes.add(p);n.set_position(new Qa(c.x._value,c.y._value));"Static"!=this.gameEntity.getState("physicsType")&&n.set_velocity(new Qa(this.gameEntity.getState("initialForceX"),
this.gameEntity.getState("initialForceY")));n.set_space(f._compMap.SpaceComponent_3.space);d.add(new Mf(n))}},_updateTouchable:function(a,b){var d=this._instancesMesh.h[b.__id__];null!=d&&a&&(d.set_pointerEnabled(!0),d.get_pointerIn().hasListeners()||d.get_pointerIn().connect(x(this,this._onPointerIn)),d.get_pointerMove().hasListeners()||d.get_pointerMove().connect(x(this,this._onPointerMove)),d.get_pointerOut().hasListeners()||d.get_pointerOut().connect(x(this,this._onPointerOut)),d.get_pointerDown().hasListeners()||
d.get_pointerDown().connect(x(this,this._onPointerDown)))},_onPointerIn:function(){K.input.pointer.submitPointerEvent(k.MOUSE_ENTERED,this.gameEntity)},_onPointerMove:function(){K.input.pointer.submitPointerEvent(k.MOUSE_MOVED,this.gameEntity)},_onPointerOut:function(){K.input.pointer.submitPointerEvent(k.MOUSE_LEFT,this.gameEntity)},_onPointerDown:function(){K.input.pointer.submitPointerEvent(k.MOUSE_LEFT_CLICK,this.gameEntity)},setPosSize:function(a,b,d,c,f){var n=this._instancesMesh.h[f.__id__];
null!=n&&(null!=a&&n.x.set__(a),null!=b&&n.y.set__(b));a=o.instance(this._instances.h[f.__id__]._compMap.Sprite_2,Tc);null!=a&&a.setSize(d,c)},_updateSpaceWidth:function(a,b){var d=o.instance(this._instances.h[b.__id__]._compMap.Sprite_2,Tc);null!=d&&d.width.set__(a)},_updateSpaceHeight:function(a,b){var d=o.instance(this._instances.h[b.__id__]._compMap.Sprite_2,Tc);null!=d&&d.height.set__(a)},_updateBounds:function(a){a=this._instances.h[a.__id__];null!=a&&this.gameEntity.setState("boundsRect",O.getBounds(a))},
__class__:he});var pd=function(a){sa.call(this,a);this._initFlambeScene2_5D()};h["tools.spark.framework.flambe2_5D.FlambeScene2_5D"]=pd;pd.__name__=!0;pd.__super__=ab;pd.prototype=t(ab.prototype,{_initFlambeScene2_5D:function(){var a=x(this,this._updatePhysics);this._updateStateFunctions.set("physicsScene",a);a},createInstance:function(a){var b=new mb;this._instances.set(a,b);b;return ab.prototype.createInstance.call(this,a)},update:function(a){this._updateState("physicsScene",a);for(var b=0,d=this.children;b<
d.length;){var c=d[b];++b;c.update(a)}},_updatePhysics:function(a,b){var d=this._instances.h[b.__id__];if(a){P.error("UPDATING PHYSICS SCENE: "+o.string(this.gameEntity.getState("name")));var c=new Ng(this.gameEntity.getState("gravityX"),this.gameEntity.getState("gravityY"));d.add(c)}},_createChildOfInstance:function(a,b){this._instances.h[b.__id__].addChild(v.__cast(a.createInstance(b),mb));ab.prototype._createChildOfInstance.call(this,a,b)},_removeChildOfInstance:function(a,b){this._instances.h[b.__id__].removeChild(v.__cast(a.getInstance(b),
mb));ab.prototype._removeChildOfInstance.call(this,a,b)},__class__:pd});var ie=function(a,b){zc.call(this,a);this._flambeGraphics=b;this._initFlambeView2_5D()};h["tools.spark.framework.flambe2_5D.FlambeView2_5D"]=ie;ie.__name__=!0;ie.__super__=zc;ie.prototype=t(zc.prototype,{_initFlambeView2_5D:function(){this._instanceView=new mb;var a=new O;a.blendMode=ka.Copy;this._instanceView.add(a);this.gameEntity.getState("visible")&&W.root.addChild(this._instanceView)},render:function(){this.gameEntity.getState("visible")&&
O.render(this._instanceView,this._flambeGraphics)},setVisible:function(a){a?W.root.addChild(this._instanceView):W.root.removeChild(this._instanceView)},set_camera:function(a){if(this.camera==a)return this.camera;if(null==a)return this.camera=null,this._updateCurrentView(),null;this.camera=a;this.camera.attachToView(this);this._updateCurrentView();return this.camera},set_scene:function(a){if(this.scene==a)return this.scene;if(null==a)return this.scene=null,this._disposeCurrentScene(),this._updateCurrentView(),
null;null!=this.scene&&(this.scene=null,this._disposeCurrentScene());this.scene=a;this._instanceScene=v.__cast(this.scene.createInstance(this),mb);this._updateCurrentView();return this.scene},_updateCurrentView:function(){null==this.scene||null==this.camera?null!=this._instanceView.firstChild&&this._instanceView.removeChild(this._instanceView.firstChild):(null==this._instanceView.firstChild&&this._instanceView.addChild(this._instanceScene),this.scene.update(this))},_disposeCurrentScene:function(){this._instanceScene=
null;this._instanceView.disposeChildren()},setPosSize:function(a,b){var d=this._instanceView._compMap.Sprite_2;null!=a&&d.x.set__(a);null!=b&&d.y.set__(b)},__class__:ie});var Mf=function(a){aa.call(this);this._body=a};h["tools.spark.framework.flambe2_5D.components.BodyComponent"]=Mf;Mf.__name__=!0;Mf.__super__=aa;Mf.prototype=t(aa.prototype,{get_name:function(){return"BodyComponent_4"},onUpdate:function(){var a=this._body.get_position();a.zpp_inner.validate();if(a.zpp_inner.y>W._platform.getStage().get_height()+
100)this.owner.dispose();else{var b=this.owner._compMap.Sprite_2;b.x.set__(function(){a.zpp_inner.validate();return a.zpp_inner.x}(this));b.y.set__(function(){a.zpp_inner.validate();return a.zpp_inner.y}(this));b.rotation.set__(180*this._body.zpp_inner.rot/3.141592653589793)}},onRemoved:function(){this._body.set_space(null)},__class__:Mf});var Ng=function(a,b){aa.call(this);this.space=new Ai(new Qa(a,b))};h["tools.spark.framework.flambe2_5D.components.SpaceComponent"]=Ng;Ng.__name__=!0;Ng.__super__=
aa;Ng.prototype=t(aa.prototype,{get_name:function(){return"SpaceComponent_3"},onUpdate:function(a){this.space.step(a)},__class__:Ng});var Ta=h["tools.spark.framework.haxe.Filter"]={__ename__:!0,__constructs__:["FInt","FBool","FEnum","FReg"]};Ta.FInt=["FInt",0];Ta.FInt.toString=g;Ta.FInt.__enum__=Ta;Ta.FBool=["FBool",1];Ta.FBool.toString=g;Ta.FBool.__enum__=Ta;Ta.FEnum=function(a){a=["FEnum",2,a];a.__enum__=Ta;a.toString=g;return a};Ta.FReg=function(a){a=["FReg",3,a];a.__enum__=Ta;a.toString=g;return a};
var Bk=h["tools.spark.framework.haxe.Attrib"]={__ename__:!0,__constructs__:["Att"]};Bk.Att=function(a,b,d){a=["Att",0,a,b,d];a.__enum__=Bk;a.toString=g;return a};var B=h["tools.spark.framework.haxe.Rule"]={__ename__:!0,__constructs__:"RNode,RData,RMulti,RList,RChoice,ROptional".split(",")};B.RNode=function(a,b,d){a=["RNode",0,a,b,d];a.__enum__=B;a.toString=g;return a};B.RData=function(a){a=["RData",1,a];a.__enum__=B;a.toString=g;return a};B.RMulti=function(a,b){var d=["RMulti",2,a,b];d.__enum__=B;
d.toString=g;return d};B.RList=function(a,b){var d=["RList",3,a,b];d.__enum__=B;d.toString=g;return d};B.RChoice=function(a){a=["RChoice",4,a];a.__enum__=B;a.toString=g;return a};B.ROptional=function(a){a=["ROptional",5,a];a.__enum__=B;a.toString=g;return a};var R=h["tools.spark.framework.haxe._LooseCheck.CheckResult"]={__ename__:!0,__constructs__:"CMatch,CMissing,CExtra,CElementExpected,CDataExpected,CExtraAttrib,CMissingAttrib,CInvalidAttrib,CInvalidData,CInElement".split(",")};R.CMatch=["CMatch",
0];R.CMatch.toString=g;R.CMatch.__enum__=R;R.CMissing=function(a){a=["CMissing",1,a];a.__enum__=R;a.toString=g;return a};R.CExtra=function(a){a=["CExtra",2,a];a.__enum__=R;a.toString=g;return a};R.CElementExpected=function(a,b){var d=["CElementExpected",3,a,b];d.__enum__=R;d.toString=g;return d};R.CDataExpected=function(a){a=["CDataExpected",4,a];a.__enum__=R;a.toString=g;return a};R.CExtraAttrib=function(a,b){var d=["CExtraAttrib",5,a,b];d.__enum__=R;d.toString=g;return d};R.CMissingAttrib=function(a,
b){var d=["CMissingAttrib",6,a,b];d.__enum__=R;d.toString=g;return d};R.CInvalidAttrib=function(a,b,d){a=["CInvalidAttrib",7,a,b,d];a.__enum__=R;a.toString=g;return a};R.CInvalidData=function(a,b){var d=["CInvalidData",8,a,b];d.__enum__=R;d.toString=g;return d};R.CInElement=function(a,b){var d=["CInElement",9,a,b];d.__enum__=R;d.toString=g;return d};var I=function(){};h["tools.spark.framework.haxe.LooseCheck"]=I;I.__name__=!0;I.isBlank=function(a){return a.nodeType==w.PCData&&I.blanks.match(a.get_nodeValue())||
a.nodeType==w.Comment};I.filterMatch=function(a,b){switch(b[1]){case 0:return I.filterMatch(a,Ta.FReg(new bc("[0-9]+","")));case 1:return I.filterMatch(a,Ta.FEnum(["true","false","0","1"]));case 2:for(var d=b[2],c=0;c<d.length;){var f=d[c];++c;if(a==f)return!0}return!1;case 3:return b[2].match(a)}};I.isNullable=function(a){switch(a[1]){case 2:var b=a[2];return!0!=a[3]||I.isNullable(b);case 3:a=a[2];for(b=0;b<a.length;){var d=a[b];++b;if(!I.isNullable(d))return!1}return!0;case 4:a=a[2];for(b=0;b<a.length;)if(d=
a[b],++b,I.isNullable(d))return!0;return!1;case 1:return!1;case 0:return!1;case 5:return!0}};I.check=function(a,b){switch(b[1]){case 0:var d=b[4],c=b[3],f=b[2];if(a.nodeType!=w.Element||a.get_nodeName()!=f)return R.CElementExpected(f,a);if(null!=c){for(var f=c.slice(),n=a.attributes();n.hasNext();){for(var p=n.next(),e=!1,i=0;i<f.length;){var g=f[i];++i;var h=g[3],j=g[2];if(p==j){if(null!=h&&!I.filterMatch(a.get(p),h))return R.CInvalidAttrib(j,a,h);C.remove(f,g);e=!0}}if(!e)return R.CExtraAttrib(p,
a)}for(n=0;n<f.length;)if(p=f[n],++n,e=p[2],null==p[4])return R.CMissingAttrib(e,a)}if(null!=d&&(d=I.checkList(a.iterator(),d),d!=R.CMatch))return R.CInElement(a,d);if(null!=c)for(d=0;d<c.length;)f=c[d],++d,a.set(f[2],f[4]);return R.CMatch;case 1:return c=b[2],a.nodeType!=w.PCData&&a.nodeType!=w.CData?R.CDataExpected(a):null!=c&&!I.filterMatch(a.get_nodeValue(),c)?R.CInvalidData(a,c):R.CMatch;case 4:c=b[2];if(0==c.length)throw"No choice possible";for(d=0;d<c.length;)if(f=c[d],++d,I.check(a,f)==R.CMatch)return R.CMatch;
return I.check(a,c[0]);case 5:return I.check(a,b[2]);default:throw"Unexpected "+o.string(b);}};I.checkList=function(a,b){switch(b[1]){case 3:for(var d=b[3],c=b[2].slice();a.hasNext();){var f=a.next();if(!I.isBlank(f)){for(var n=!1,p=0;p<c.length;){var e=c[p];++p;var i=I.checkList(C.iter([f]),e);if(i==R.CMatch){n=!0;switch(e[1]){case 2:p=e[2];if(e[3])for(var i=0,g=c.length;i<g;){var h=i++;c[h]==e&&(c[h]=B.RMulti(p))}break;default:C.remove(c,e)}break}else if(d&&!I.isNullable(e))return i}if(!n)return R.CExtra(f)}}for(d=
0;d<c.length;)if(f=c[d],++d,!I.isNullable(f))return R.CMissing(f);return R.CMatch;case 2:c=b[3];d=b[2];for(f=!1;a.hasNext();)if(n=a.next(),!I.isBlank(n)){f=I.checkList(C.iter([n]),d);if(f!=R.CMatch)return f;f=!0}return c&&!f?R.CMissing(d):R.CMatch;default:for(c=!1;a.hasNext();)if(d=a.next(),!I.isBlank(d)){c=I.check(d,b);if(c!=R.CMatch)return c;c=!0;break}if(!c)switch(b[1]){case 5:break;default:return R.CMissing(b)}for(;a.hasNext();)if(c=a.next(),!I.isBlank(c))return R.CExtra(c);return R.CMatch}};
I.makeWhere=function(a){if(0==a.length)return"";for(var b="In ",d=!0,c=0;c<a.length;){var f=a[c];++c;d?d=!1:b+=".";b+=f.get_nodeName()}return b+": "};I.makeString=function(a){if(a.nodeType==w.Element)return"element "+a.get_nodeName();a=a.get_nodeValue().split("\r").join("\\r").split("\n").join("\\n").split("\t").join("\\t");return 20<a.length?C.substr(a,0,17)+"...":a};I.makeRule=function(a){switch(a[1]){case 0:return"element "+a[2];case 1:return"data";case 2:return I.makeRule(a[2]);case 3:return I.makeRule(a[2][0]);
case 4:return I.makeRule(a[2][0]);case 5:return I.makeRule(a[2])}};I.makeError=function(a,b){null==b&&(b=[]);switch(a[1]){case 0:throw"assert";case 1:var d=a[2];return I.makeWhere(b)+"Missing "+I.makeRule(d);case 2:return d=a[2],I.makeWhere(b)+"Unexpected "+I.makeString(d);case 3:var d=a[3],c=a[2];return I.makeWhere(b)+I.makeString(d)+" while expected element "+c;case 4:return d=a[2],I.makeWhere(b)+I.makeString(d)+" while data expected";case 5:return d=a[2],b.push(a[3]),I.makeWhere(b)+"unexpected attribute "+
d;case 6:return d=a[2],b.push(a[3]),I.makeWhere(b)+"missing required attribute "+d;case 7:return d=a[2],b.push(a[3]),I.makeWhere(b)+"invalid attribute value for "+d;case 8:return d=a[2],I.makeWhere(b)+"invalid data format for "+I.makeString(d);case 9:return d=a[3],b.push(a[2]),I.makeError(d,b)}};I.checkNode=function(a,b){var d=I.checkList(C.iter([a]),b);if(d!=R.CMatch)throw I.makeError(d);};var He=function(a,b,d){this.layoutableEntity=a;this.layoutableInstanceType=b;this.layoutableInstance=d;this.children=
[];this.x=this.y=this.width=this.height=0};h["tools.spark.framework.layout.containers.Group"]=He;He.__name__=!0;He.prototype={update:function(){this.updateState("layout");this.updateState("includeInLayout");this.updateState("x");this.updateState("y");this.updateState("width");this.updateState("height");this.updateState("left");this.updateState("top");this.updateState("right");this.updateState("bottom");this.updateState("horizontalCenter");this.updateState("verticalCenter");null!=this.layout&&"Basic"!=
this.layout.layoutType&&(this.updateState("paddingLeft"),this.updateState("paddingRight"),this.updateState("paddingTop"),this.updateState("paddingBottom"),this.updateState("gap"),this.updateState("horizontalAlign"),this.updateState("verticalAlign"),"Horizontal"==this.layout.layoutType?(this.updateState("columnWidth"),this.updateState("requestedColumnCount"),this.updateState("requestedMaxColumnCount"),this.updateState("requestedMinColumnCount"),this.updateState("variableColumnWidth")):"Vertical"==
this.layout.layoutType&&(this.updateState("rowHeight"),this.updateState("requestedRowCount"),this.updateState("requestedMaxRowCount"),this.updateState("requestedMinRowCount"),this.updateState("variableRowHeight")))},updateState:function(a){switch(a){case "layout":this._updateLayout(this.layoutableEntity.getState(a));break;case "includeInLayout":this.includeInLayout=this.layoutableEntity.getState(a);break;case "x":Math.isNaN(this.layoutableEntity.getState(a))||(this.x=this.layoutableEntity.getState(a));
break;case "y":Math.isNaN(this.layoutableEntity.getState(a))||(this.y=this.layoutableEntity.getState(a));break;case "width":this._updateExplicitSize(this.layoutableEntity.getState(a),"width");break;case "height":this._updateExplicitSize(this.layoutableEntity.getState(a),"height");break;case "left":Math.isNaN(this.layoutableEntity.getState(a))||(this.left=this.layoutableEntity.getState(a));break;case "top":Math.isNaN(this.layoutableEntity.getState(a))||(this.top=this.layoutableEntity.getState(a));
break;case "right":Math.isNaN(this.layoutableEntity.getState(a))||(this.right=this.layoutableEntity.getState(a));break;case "bottom":Math.isNaN(this.layoutableEntity.getState(a))||(this.bottom=this.layoutableEntity.getState(a));break;case "horizontalCenter":Math.isNaN(this.layoutableEntity.getState(a))||(this.horizontalCenter=this.layoutableEntity.getState(a));break;case "verticalCenter":Math.isNaN(this.layoutableEntity.getState(a))||(this.verticalCenter=this.layoutableEntity.getState(a));break;case "paddingLeft":this.paddingLeft=
this.layoutableEntity.getState(a);break;case "paddingRight":this.paddingRight=this.layoutableEntity.getState(a);break;case "paddingTop":this.paddingTop=this.layoutableEntity.getState(a);break;case "paddingBottom":this.paddingBottom=this.layoutableEntity.getState(a);break;case "gap":this.gap=this.layoutableEntity.getState(a);break;case "horizontalAlign":a=this.layoutableEntity.getState(a);"left"==a?this.horizontalAlign=N.LEFT:"center"==a?this.horizontalAlign=N.CENTER:"right"==a?this.horizontalAlign=
N.RIGHT:"justify"==a?this.horizontalAlign=N.JUSTIFY:"contentJustify"==a&&(this.horizontalAlign=N.CONTENT_JUSTIFY);break;case "verticalAlign":a=this.layoutableEntity.getState(a);"top"==a?this.verticalAlign=ca.TOP:"middle"==a?this.verticalAlign=ca.MIDDLE:"bottom"==a?this.verticalAlign=ca.BOTTOM:"justify"==a?this.verticalAlign=ca.JUSTIFY:"contentJustify"==a&&(this.verticalAlign=ca.CONTENT_JUSTIFY);break;case "columnWidth":this.columnWidth=this.layoutableEntity.getState(a);break;case "requestedColumnCount":this.requestedColumnCount=
this.layoutableEntity.getState(a);break;case "requestedMaxColumnCount":this.requestedMaxColumnCount=this.layoutableEntity.getState(a);break;case "requestedMinColumnCount":this.requestedMinColumnCount=this.layoutableEntity.getState(a);break;case "variableColumnWidth":this.variableColumnWidth=this.layoutableEntity.getState(a);break;case "rowHeight":this.rowHeight=this.layoutableEntity.getState(a);break;case "requestedRowCount":this.requestedRowCount=this.layoutableEntity.getState(a);break;case "requestedMaxRowCount":this.requestedMaxRowCount=
this.layoutableEntity.getState(a);break;case "requestedMinRowCount":this.requestedMinRowCount=this.layoutableEntity.getState(a);break;case "variableRowHeight":this.variableRowHeight=this.layoutableEntity.getState(a)}},_updateLayout:function(a){"Basic"==a?null==this.layout?this.set_layout(new nb):this.layout.layoutType!=a&&this.set_layout(new nb):"Horizontal"==a?null==this.layout?this.set_layout(new Gb):this.layout.layoutType!=a&&this.set_layout(new Gb):"Vertical"==a&&(null==this.layout?this.set_layout(new bb):
this.layout.layoutType!=a&&this.set_layout(new bb));this.layout.set_target(this)},_updateExplicitSize:function(a,b){var d=null,c=null;"Implicit"!=a&&(-1!=a.indexOf("%")?c=o.parseFloat(a):d=o.parseFloat(a));"width"==b?(this.explicitWidth=d,this.percentWidth=c):(this.explicitHeight=d,this.percentHeight=c)},set_layout:function(a){return this.layout==a?this.layout:this.layout=a},measure:function(){this.layout.measure()},updateDisplayList:function(a,b){this.layout.updateDisplayList(a,b)},setActualSize:function(a,
b){null!=this.explicitWidth?this.width=this.explicitWidth:null!=a&&0!=a?this.measuredWidth=this.width=a:0!=this.get_preferredWidth()&&(this.width=this.get_preferredWidth());null!=this.explicitHeight?this.height=this.explicitHeight:null!=b&&0!=b?this.measuredHeight=this.height=b:0!=this.get_preferredHeight()&&(this.height=this.get_preferredHeight())},get_preferredWidth:function(){return null==this.explicitWidth?this.measuredWidth:this.explicitWidth},get_preferredHeight:function(){return null==this.explicitHeight?
this.measuredHeight:this.explicitHeight},get_preferredMinWidth:function(){return null==this.explicitMinWidth?this.measuredMinWidth:this.explicitMinWidth},get_preferredMinHeight:function(){return null==this.explicitMinHeight?this.measuredMinHeight:this.explicitMinHeight},get_preferredMaxWidth:function(){return null==this.explicitMaxWidth?this.measuredMaxWidth:this.explicitMaxWidth},get_preferredMaxHeight:function(){return null==this.explicitMaxHeight?this.measuredMaxHeight:this.explicitMaxHeight},
__class__:He};var Nf=function(){this.size=0};h["tools.spark.framework.layout.helpers.ChildInfo"]=Nf;Nf.__name__=!0;Nf.prototype={__class__:Nf};var Vi=function(){};h["tools.spark.framework.layout.helpers.LayoutHelper"]=Vi;Vi.__name__=!0;Vi.flexChildrenProportionally=function(a,b,d,c){var f=c.length,n,p,e;do{n=0;p=!0;e=b-a*d/100;0<e?b-=e:e=0;for(var i=b/d,g=0;g<f;){var h=c[g],j=h.percent*i;if(j<h.min){p=h.min;h.size=p;c[g]=c[--f];c[f]=h;d-=h.percent;e>=p?e-=p:(b-=p-e,e=0);p=!1;break}else if(j>h.max){p=
h.max;h.size=p;c[g]=c[--f];c[f]=h;d-=h.percent;e>=p?e-=p:(b-=p-e,e=0);p=!1;break}else h.size=j,n+=j;g++}}while(!p);return Math.max(0,Math.floor(b+e-n))};var Og=function(){};h["tools.spark.framework.layout.helpers.SizesAndLimit"]=Og;Og.__name__=!0;Og.prototype={__class__:Og};var N=h["tools.spark.framework.layout.interfaces.EHorizontalAlign"]={__ename__:!0,__constructs__:["LEFT","CENTER","RIGHT","JUSTIFY","CONTENT_JUSTIFY"]};N.LEFT=["LEFT",0];N.LEFT.toString=g;N.LEFT.__enum__=N;N.CENTER=["CENTER",1];
N.CENTER.toString=g;N.CENTER.__enum__=N;N.RIGHT=["RIGHT",2];N.RIGHT.toString=g;N.RIGHT.__enum__=N;N.JUSTIFY=["JUSTIFY",3];N.JUSTIFY.toString=g;N.JUSTIFY.__enum__=N;N.CONTENT_JUSTIFY=["CONTENT_JUSTIFY",4];N.CONTENT_JUSTIFY.toString=g;N.CONTENT_JUSTIFY.__enum__=N;var ca=h["tools.spark.framework.layout.interfaces.EVerticalAlign"]={__ename__:!0,__constructs__:["TOP","MIDDLE","BOTTOM","JUSTIFY","CONTENT_JUSTIFY"]};ca.TOP=["TOP",0];ca.TOP.toString=g;ca.TOP.__enum__=ca;ca.MIDDLE=["MIDDLE",1];ca.MIDDLE.toString=
g;ca.MIDDLE.__enum__=ca;ca.BOTTOM=["BOTTOM",2];ca.BOTTOM.toString=g;ca.BOTTOM.__enum__=ca;ca.JUSTIFY=["JUSTIFY",3];ca.JUSTIFY.toString=g;ca.JUSTIFY.__enum__=ca;ca.CONTENT_JUSTIFY=["CONTENT_JUSTIFY",4];ca.CONTENT_JUSTIFY.toString=g;ca.CONTENT_JUSTIFY.__enum__=ca;var Wb=function(){};h["tools.spark.framework.layout.layouts.ALayoutBase"]=Wb;Wb.__name__=!0;Wb.prototype={get_typicalLayoutElement:function(){null==this._typicalLayoutElement&&null!=this.target&&0<this.target.children.length&&(this._typicalLayoutElement=
this.target.children[0]);return this._typicalLayoutElement},set_target:function(a){return this.target==a?this.target:this.target=a},measure:function(){},updateDisplayList:function(){},__class__:Wb};var nb=function(){this.layoutType="Basic"};h["tools.spark.framework.layout.layouts.BasicLayout"]=nb;nb.__name__=!0;nb._constraintsDetermineWidth=function(a){return null!=a.percentWidth||null!=a.left&&null!=a.right};nb._constraintsDetermineHeight=function(a){return null!=a.percentHeight||null!=a.top&&null!=
a.bottom};nb._maxSizeToFitIn=function(a,b,d,c,f){return null!=b?a-2*Math.abs(b):null!=d?a-d:null!=c?a-c:a-f};nb.__super__=Wb;nb.prototype=t(Wb.prototype,{measure:function(){for(var a=0,b=0,d=0,c=0,f=0,n=this.target.children;f<n.length;){var p=n[f];++f;if(!(null==p||!1==p.includeInLayout)){var e,i;null!=p.left&&null!=p.right?e=p.left+p.right:null!=p.horizontalCenter?e=2*Math.abs(p.horizontalCenter):null!=p.left||null!=p.right?(e=null==p.left?0:p.left,e=null==p.right?e+0:e+p.right):e=p.x;null!=p.top&&
null!=p.bottom?i=p.top+p.bottom:null!=p.verticalCenter?i=2*Math.abs(p.verticalCenter):null!=p.top||null!=p.bottom?(i=null==p.top?0:p.top,i=null==p.bottom?i+0:i+p.bottom):i=p.y;var a=Math.max(a,e+p.get_preferredWidth()),b=Math.max(b,i+p.get_preferredHeight()),g;g=nb._constraintsDetermineWidth(p)?p.get_preferredMinWidth():p.get_preferredWidth();p=nb._constraintsDetermineHeight(p)?p.get_preferredMinHeight():p.get_preferredHeight();d=Math.max(d,e+g);c=Math.max(c,i+p)}}this.target.measuredWidth=Math.ceil(Math.max(a,
d));this.target.measuredHeight=Math.ceil(Math.max(b,c));this.target.measuredMinWidth=Math.ceil(d);this.target.measuredMinHeight=Math.ceil(c);this.target.measuredMaxWidth=999999;this.target.measuredMaxHeight=999999},updateDisplayList:function(a,b){for(var d=0,c=0,f=0,n=this.target.children;f<n.length;){var e=n[f];++f;if(!(null==e||!1==e.includeInLayout)){var i=null,g=null,h=null,j=null;null!=e.percentWidth?(i=a,null!=e.left&&(i-=e.left),null!=e.right&&(i-=e.right),h=Math.round(i*Math.min(0.01*e.percentWidth,
1)),i=Math.min(e.get_preferredMaxWidth(),nb._maxSizeToFitIn(a,e.horizontalCenter,e.left,e.right,e.x))):null!=e.left&&null!=e.right&&(h=a-e.right-e.left);null!=e.percentHeight?(g=b,null!=e.top&&(g-=e.top),null!=e.bottom&&(g-=e.bottom),j=Math.round(g*Math.min(0.01*e.percentHeight,1)),g=Math.min(e.get_preferredMaxHeight(),nb._maxSizeToFitIn(b,e.verticalCenter,e.top,e.bottom,e.y))):null!=e.top&&null!=e.bottom&&(j=b-e.bottom-e.top);null!=h&&(null==i&&(i=e.get_preferredMaxWidth()),h=Math.max(e.get_preferredMinWidth(),
Math.min(i,h)));null!=j&&(null==g&&(g=e.get_preferredMaxHeight()),j=Math.max(e.get_preferredMinHeight(),Math.min(g,j)));e.setActualSize(h,j);i=e.width;g=e.height;j=h=null;h=null!=e.horizontalCenter?Math.round((a-i)/2+e.horizontalCenter):null!=e.left?e.left:null!=e.right?a-i-e.right:e.x;j=null!=e.verticalCenter?Math.round((b-g)/2+e.verticalCenter):null!=e.top?e.top:null!=e.bottom?b-g-e.bottom:e.y;e.x=h;e.y=j;d=Math.max(d,h+i);c=Math.max(c,j+g)}}this.target.width=Math.ceil(a);this.target.height=Math.ceil(b)},
__class__:nb});var Gb=function(){this.layoutType="Horizontal"};h["tools.spark.framework.layout.layouts.HorizontalLayout"]=Gb;Gb.__name__=!0;Gb._pinBetween=function(a,b,d){return Math.min(d,Math.max(b,a))};Gb._calculatePercentHeight=function(a,b){return Gb._pinBetween(Math.min(Math.round(0.01*a.percentHeight*b),b),a.get_preferredMinHeight(),a.get_preferredMaxHeight())};Gb._sizeLayoutElement=function(a,b,d,c,f,n,e){var i=null;d==ca.JUSTIFY||d==ca.CONTENT_JUSTIFY?i=c:null!=a.percentHeight&&(i=Gb._calculatePercentHeight(a,
b));n?a.setActualSize(f,i):a.setActualSize(e,i)};Gb.__super__=Wb;Gb.prototype=t(Wb.prototype,{_getColumsToMeasure:function(a){-1!=this.target.requestedColumnCount?a=this.target.requestedColumnCount:(-1!=this.target.requestedMaxColumnCount&&(a=o["int"](Math.min(this.target.requestedMaxColumnCount,a))),-1!=this.target.requestedMinColumnCount&&(a=o["int"](Math.max(this.target.requestedMinColumnCount,a))));return a},_getElementWidth:function(a,b,d){b=null==b?Math.ceil(a.get_preferredWidth()):b;a=null!=
a.percentWidth?Math.ceil(a.get_preferredMinWidth()):b;d.preferredSize=b;d.minSize=a},_getElementHeight:function(a,b,d){var c=Math.ceil(a.get_preferredHeight()),a=null!=a.percentHeight||b?Math.ceil(a.get_preferredMinHeight()):c;d.preferredSize=c;d.minSize=a},_distributeWidth:function(a,b,d){var c=a,f=0,n=[],e,i;i=this.target.variableColumnWidth?0:Math.ceil(o.parseFloat(this.target.columnWidth));for(var g=this.target.children.length,h=0,j=this.target.children;h<j.length;){var k=j[h];++h;null==k||!1==
k.includeInLayout?g--:null!=k.percentWidth&&this.target.variableColumnWidth?(f+=k.percentWidth,e=new Nf,e.layoutElement=k,e.percent=k.percentWidth,e.min=k.get_preferredMinWidth(),e.max=k.get_preferredMaxWidth(),n.push(e)):(Gb._sizeLayoutElement(k,b,this.target.verticalAlign,d,null,this.target.variableColumnWidth,i),c-=Math.ceil(k.width))}1<g&&(c-=(g-1)*this.target.gap);if(0!=f){Vi.flexChildrenProportionally(a,c,f,n);for(f=a=0;f<n.length;)e=n[f],++f,g=Math.round(e.size+a),a+=e.size-g,Gb._sizeLayoutElement(e.layoutElement,
b,this.target.verticalAlign,d,g,this.target.variableColumnWidth,i),c-=g}return c},measure:function(){var a=new Og,b=this.target.verticalAlign==ca.JUSTIFY,d=this.target.children.length,c=0,f=0,n=0,e=0,i=0,g=null;this.target.variableColumnWidth||(g="calculated"==this.target.columnWidth?this.get_typicalLayoutElement().get_preferredWidth():o.parseFloat(this.target.columnWidth));for(var h=this._getColumsToMeasure(d),j=0,k=this.target.children;j<k.length;){var m=k[j];++j;null==m||!1==m.includeInLayout?
d--:(this._getElementHeight(m,b,a),f=Math.max(f,a.preferredSize),e=Math.max(e,a.minSize),c<h&&(this._getElementWidth(m,g,a),n+=a.preferredSize,i+=a.minSize,c++))}h=this._getColumsToMeasure(d);c<h&&(d=this.get_typicalLayoutElement(),null!=d&&(this._getElementHeight(d,b,a),f=Math.max(f,a.preferredSize),e=Math.max(e,a.minSize),this._getElementWidth(d,g,a),n+=a.preferredSize*(h-c),i+=a.minSize*(h-c),c=h));1<c&&(a=this.target.gap*(c-1),n+=a,i+=a);a=this.target.paddingLeft+this.target.paddingRight;b=this.target.paddingTop+
this.target.paddingBottom;this.target.measuredHeight=Math.ceil(f+b);this.target.measuredWidth=Math.ceil(n+a);this.target.measuredMinHeight=Math.ceil(e+b);this.target.measuredMinWidth=Math.ceil(i+a);this.target.measuredMaxWidth=999999;this.target.measuredMaxHeight=999999},updateDisplayList:function(a,b){if(0==this.target.children.length||0==a||0==b)0==this.target.children.length&&(this.target.width=Math.ceil(this.target.paddingLeft+this.target.paddingRight),this.target.height=Math.ceil(this.target.paddingTop+
this.target.paddingBottom));else{var d=Math.max(0,this.target.width-this.target.paddingLeft-this.target.paddingRight),c=Math.max(0,this.target.height-this.target.paddingTop-this.target.paddingBottom),f=c;if(this.target.verticalAlign==ca.CONTENT_JUSTIFY)for(var n=0,e=this.target.children;n<e.length;){var i=e[n];++n;null==i||!1==i.includeInLayout||(i=null!=i.percentHeight?Gb._calculatePercentHeight(i,c):i.get_preferredHeight(),f=Math.max(f,Math.ceil(i)))}var g=this._distributeWidth(d,c,f),d=0;this.target.verticalAlign==
ca.MIDDLE?d=0.5:this.target.verticalAlign==ca.BOTTOM&&(d=1);var c=this.target.paddingLeft,n=this.target.paddingTop,e=this.target.paddingLeft,i=this.target.paddingTop,h=this.target.horizontalAlign;h==N.CENTER?c=this.target.paddingLeft+Math.round(g/2):h==N.RIGHT&&(c=this.target.paddingLeft+g);g=0;for(h=this.target.children;g<h.length;){var j=h[g];++g;if(!(null==j||!1==j.includeInLayout)){var k=Math.ceil(j.width),m=Math.ceil(j.height),q;q=n+(f-m)*d;0.5==d&&(q=Math.round(q));j.x=c;j.y=q;e=Math.max(e,
c+k);i=Math.max(i,q+m);c+=k+this.target.gap}}this.target.width=Math.ceil(a);this.target.height=Math.ceil(b)}},__class__:Gb});var bb=function(){this.layoutType="Vertical"};h["tools.spark.framework.layout.layouts.VerticalLayout"]=bb;bb.__name__=!0;bb._pinBetween=function(a,b,d){return Math.min(d,Math.max(b,a))};bb._calculatePercentWidth=function(a,b){return bb._pinBetween(Math.min(Math.round(0.01*a.percentWidth*b),b),a.get_preferredMinWidth(),a.get_preferredMaxWidth())};bb._sizeLayoutElement=function(a,
b,d,c,f,n,e){var i=null;d==N.JUSTIFY||d==N.CONTENT_JUSTIFY?i=c:null!=a.percentWidth&&(i=bb._calculatePercentWidth(a,b));n?a.setActualSize(i,f):a.setActualSize(i,e)};bb.__super__=Wb;bb.prototype=t(Wb.prototype,{_getRowsToMeasure:function(a){-1!=this.target.requestedRowCount?a=this.target.requestedRowCount:(-1!=this.target.requestedMaxRowCount&&(a=o["int"](Math.min(this.target.requestedMaxRowCount,a))),-1!=this.target.requestedMinRowCount&&(a=o["int"](Math.max(this.target.requestedMinRowCount,a))));
return a},_getElementWidth:function(a,b,d){var c=Math.ceil(a.get_preferredWidth()),a=null!=a.percentWidth||b?Math.ceil(a.get_preferredMinWidth()):c;d.preferredSize=c;d.minSize=a},_getElementHeight:function(a,b,d){b=null==b?Math.ceil(a.get_preferredHeight()):b;a=null!=a.percentHeight?Math.ceil(a.get_preferredMinHeight()):b;d.preferredSize=b;d.minSize=a},_distributeHeight:function(a,b,d){var c=b,f=0,n=[],e,i;i=this.target.variableRowHeight?0:Math.ceil(o.parseFloat(this.target.rowHeight));for(var g=
this.target.children.length,h=0,j=this.target.children;h<j.length;){var k=j[h];++h;null==k||!1==k.includeInLayout?g--:null!=k.percentHeight&&this.target.variableRowHeight?(f+=k.percentHeight,e=new Nf,e.layoutElement=k,e.percent=k.percentHeight,e.min=k.get_preferredMinHeight(),e.max=k.get_preferredMaxHeight(),n.push(e)):(bb._sizeLayoutElement(k,a,this.target.horizontalAlign,d,null,this.target.variableRowHeight,i),c-=Math.ceil(k.height))}1<g&&(c-=(g-1)*this.target.gap);if(0!=f){Vi.flexChildrenProportionally(b,
c,f,n);for(f=b=0;f<n.length;)e=n[f],++f,g=Math.round(e.size+b),b+=e.size-g,bb._sizeLayoutElement(e.layoutElement,a,this.target.horizontalAlign,d,g,this.target.variableRowHeight,i),c-=g}return c},measure:function(){var a=new Og,b=this.target.horizontalAlign==N.JUSTIFY,d=this.target.children.length,c=0,f=0,n=0,e=0,i=0,g=null;this.target.variableRowHeight||(g="calculated"==this.target.rowHeight?this.get_typicalLayoutElement().get_preferredHeight():o.parseFloat(this.target.rowHeight));for(var h=this._getRowsToMeasure(d),
j=0,k=this.target.children;j<k.length;){var m=k[j];++j;null==m||!1==m.includeInLayout?d--:(c<h&&(this._getElementHeight(m,g,a),f+=a.preferredSize,e+=a.minSize,c++),this._getElementWidth(m,b,a),n=Math.max(n,a.preferredSize),i=Math.max(i,a.minSize))}h=this._getRowsToMeasure(d);c<h&&(d=this.get_typicalLayoutElement(),null!=d&&(this._getElementHeight(d,g,a),f+=a.preferredSize*(h-c),e+=a.minSize*(h-c),this._getElementWidth(d,b,a),n=Math.max(n,a.preferredSize),i=Math.max(i,a.minSize),c=h));1<c&&(a=this.target.gap*
(c-1),f+=a,e+=a);a=this.target.paddingLeft+this.target.paddingRight;b=this.target.paddingTop+this.target.paddingBottom;this.target.measuredHeight=Math.ceil(f+b);this.target.measuredWidth=Math.ceil(n+a);this.target.measuredMinHeight=Math.ceil(e+b);this.target.measuredMinWidth=Math.ceil(i+a);this.target.measuredMaxWidth=999999;this.target.measuredMaxHeight=999999},updateDisplayList:function(a,b){if(0==this.target.children.length||0==a||0==b)0==this.target.children.length&&(this.target.width=Math.ceil(this.target.paddingLeft+
this.target.paddingRight),this.target.height=Math.ceil(this.target.paddingTop+this.target.paddingBottom));else{var d=Math.max(0,this.target.width-this.target.paddingLeft-this.target.paddingRight),c=Math.max(0,this.target.height-this.target.paddingTop-this.target.paddingBottom),f=d;if(this.target.horizontalAlign==N.CONTENT_JUSTIFY)for(var n=0,e=this.target.children;n<e.length;){var i=e[n];++n;null==i||!1==i.includeInLayout||(i=null!=i.percentWidth?bb._calculatePercentWidth(i,d):i.get_preferredWidth(),
f=Math.max(f,Math.ceil(i)))}var g=this._distributeHeight(d,c,f),d=0;this.target.horizontalAlign==N.CENTER?d=0.5:this.target.horizontalAlign==N.RIGHT&&(d=1);var c=this.target.paddingLeft,n=this.target.paddingTop,e=this.target.paddingLeft,i=this.target.paddingTop,h=this.target.verticalAlign;h==ca.MIDDLE?n=this.target.paddingTop+Math.round(g/2):h==ca.BOTTOM&&(n=this.target.paddingTop+g);g=0;for(h=this.target.children;g<h.length;){var j=h[g];++g;if(!(null==j||!1==j.includeInLayout)){var k=Math.ceil(j.width),
m=Math.ceil(j.height),q=c+(f-k)*d;0.5==d&&(q=Math.round(q));j.x=q;j.y=n;e=Math.max(e,q+k);i=Math.max(i,n+m);n+=m+this.target.gap}}this.target.width=Math.ceil(a);this.target.height=Math.ceil(b)}},__class__:bb});var Wi=function(a){this.rootLayoutElement=a;this.validated=!1};h["tools.spark.framework.layout.managers.LayoutManager"]=Wi;Wi.__name__=!0;Wi.prototype={validate:function(){this.validated||(this.measure(this.rootLayoutElement),this.updateDisplayList(this.rootLayoutElement),this.updateRealObjects(this.rootLayoutElement),
this.validated=!0)},getViewGroupByGameEntity:function(a,b){null==b&&(b=this.rootLayoutElement);if(b.layoutableEntity==a)return b;for(var d=0,c=b.children;d<c.length;){var f=c[d];++d;if("Entity"!=f.layoutableInstanceType&&(f=this.getViewGroupByGameEntity(a,f),null!=f))return f}return null},updateRealObjects:function(a,b,d,c){null==d&&(d=0);null==b&&(b=0);if("View"==a.layoutableInstanceType)if("3D"==a.layoutableEntity.getState("renderer")){var f=a.layoutableInstance;f.x=a.x+b;f.y=a.y+d;f.width=a.width;
f.height=a.height}else c=a.layoutableInstance,c.setPosSize(a.x+b,a.y+d,a.width,a.height);else"Entity"==a.layoutableInstanceType&&a.layoutableInstance.setPosSize(a.x,a.y,a.width,a.height,c);for(var f=0,n=a.children;f<n.length;){var e=n[f];++f;this.updateRealObjects(e,a.x+b,a.y+d,c)}},measure:function(a){for(var b=0,d=a.children;b<d.length;){var c=d[b];++b;this.measure(c)}a.measure()},updateDisplayList:function(a){a.updateDisplayList(a.get_preferredWidth(),a.get_preferredHeight());for(var b=0,a=a.children;b<
a.length;){var d=a[b];++b;this.updateDisplayList(d)}},__class__:Wi};var Kg=function(){};h["tools.spark.framework.platform.html.Graphics"]=Kg;Kg.__name__=!0;Kg.init=function(){Gc.init()};Kg.createDisplayRenderers=function(){Gc.createDisplayRenderers();var a=new Je;K.display.platformRendererSet.set("NativeControls",a);a};var Gc=function(){};h["tools.spark.framework.platform.html.flambe2_5.Subgraphics"]=Gc;Gc.__name__=!0;Gc.createDisplayRenderers=function(){var a=new Of;K.display.platformRendererSet.set("2D",
a);a};Gc.init=function(){Gc._flambeDisplaySystem=Fc.instance.getRenderer()};Gc.onRender=function(){Gc._flambeDisplaySystem.willRender();if(null!=K.display&&null!=K.display.projectActiveSpaceReference&&null!=K.display.projectActiveSpaceReference.activeStageReference)for(var a=0,b=K.display.projectActiveSpaceReference.activeStageReference.activeViewReferences;a<b.length;){var d=b[a];++a;d.renderer.renderView(d.viewEntity)}Gc._flambeDisplaySystem.didRender()};var ed=function(){};h["tools.spark.sliced.interfaces.IService"]=
ed;ed.__name__=!0;var Ua=function(){};h["tools.spark.sliced.core.AService"]=Ua;Ua.__name__=!0;Ua.__interfaces__=[ed];Ua.prototype={__class__:Ua};var yk=function(){};h["tools.spark.sliced.interfaces.IServiceFactory"]=yk;yk.__name__=!0;var Pf=function(){this._init()};h["tools.spark.sliced.core.ServiceFactory"]=Pf;Pf.__name__=!0;Pf.__interfaces__=[yk];Pf.prototype={_init:function(){this._createServices()},_createServices:function(){var a=this._reflectService(m.SOUND_SERVICE),b=this._reflectService(m.LOGIC_SERVICE),
d=this._reflectService(m.INPUT_SERVICE),c=this._reflectService(m.COMMUNICATIONS_SERVICE),f=this._reflectService(m.EVENT_SERVICE),n=this._reflectService(m.DISPLAY_SERVICE);K.assignServices(a,b,d,c,f,n)},_reflectService:function(a){a=ea.sliced.get(a);return gb.createInstance(gb.resolveClass(a),[])},__class__:Pf};var K=function(){};h["tools.spark.sliced.core.Sliced"]=K;K.__name__=!0;K.init=function(){new Pf};K.assignServices=function(a,b,d,c,f,n){K.sound=a;K.logic=b;K.input=d;K.comms=c;K.event=f;K.display=
n};var Pg=function(){};h["tools.spark.sliced.interfaces.IComms"]=Pg;Pg.__name__=!0;Pg.__interfaces__=[ed];Pg.prototype={__class__:Pg};var Qf=function(){};h["tools.spark.sliced.interfaces.IDisplay"]=Qf;Qf.__name__=!0;Qf.__interfaces__=[ed];Qf.prototype={__class__:Qf};var Qg=function(){};h["tools.spark.sliced.interfaces.IEvent"]=Qg;Qg.__name__=!0;Qg.__interfaces__=[ed];Qg.prototype={__class__:Qg};var Rf=function(){};h["tools.spark.sliced.interfaces.IInput"]=Rf;Rf.__name__=!0;Rf.__interfaces__=[ed];
Rf.prototype={__class__:Rf};var Rg=function(){};h["tools.spark.sliced.interfaces.ILogic"]=Rg;Rg.__name__=!0;Rg.__interfaces__=[ed];Rg.prototype={__class__:Rg};var ak=function(){};h["tools.spark.sliced.interfaces.ISound"]=ak;ak.__name__=!0;ak.__interfaces__=[ed];var Sf=function(){this._init()};h["tools.spark.sliced.services.std.comms.core.Comms"]=Sf;Sf.__name__=!0;Sf.__interfaces__=[Pg];Sf.__super__=Ua;Sf.prototype=t(Ua.prototype,{_init:function(){this._socket=new Sg;this._requestsData=new D;this._serverEventsData=
new D;this.isConnected=!1;this._file_requestsData=new D;this.file_isConnected=!1},update:function(){this._requestsData=new D;this._serverEventsData=new D;this._file_requestsData=new D},getRequestData:function(a){return this._requestsData.get(a)},getServerEventData:function(a){return this._serverEventsData.get(a)},connectTo:function(a,b,d){var c=this;null==d&&(d=a+":"+b);this._socket.init(a,b,null,function(){c.isConnected=!0;c.connectedServerName=d;K.event.raiseEvent(k.NETWORK_CONNECTED)})},request:function(a,
b,d){var c=this;null==d&&(d=a);this._socket.request(a,b,function(a){c._requestsData.set(d,a);a;K.event.raiseEvent(k.NETWORK_REQUEST)})},disconnect:function(){this._socket.disconnect();this.isConnected=!1;this.connectedServerName=null},addServerEvent:function(a,b){var d=this;null==b&&(b=a);this._socket.on(a,function(a){d._serverEventsData.set(b,a);a;K.event.raiseEvent(k.NETWORK_SERVER_EVENT)})},file_connectTo:function(a,b,d){var c=this;this.file_isConnected?null:(null==d&&(d=a+":"+b),this._fileTransfer=
new Tf("ws://"+a+":"+b),this._fileTransfer.onConnected(function(){c.file_isConnected=!0;c.file_connectedServerName=d;K.event.raiseEvent(k.FILETRANSFER_CONNECTED)}))},file_getSendFileRequestData:function(a){return this._file_requestsData.get(a)},file_disconnect:function(){this._fileTransfer.disconnect();this.file_isConnected=!1;this.file_connectedServerName=this._fileTransfer=null},file_sendFileRequest:function(a,b,d){var c=this;if(this.file_isConnected){null==d&&(d=b.name);var f=0;this._fileTransfer.sendFile(a,
b,function(a){f+=a.length;a.progress=f/b.size;a.progressPercent=Math.round(100*(f/b.size));c._file_requestsData.set(d,a);a;K.event.raiseEvent(k.FILETRANSFER_SENDREQUEST)})}else null},__class__:Sf});var Xi=function(){};h["tools.spark.sliced.services.std.comms.filetransfer.interfaces.IFileTransfer"]=Xi;Xi.__name__=!0;Xi.prototype={__class__:Xi};var Tf=function(a){this._binaryJs=new BinaryClient(a)};h["tools.spark.sliced.services.std.comms.filetransfer.core.platform.html5.websocket.binaryjs.FileTransfer"]=
Tf;Tf.__name__=!0;Tf.__interfaces__=[Xi];Tf.prototype={onConnected:function(a){this._binaryJs.on("open",a)},disconnect:function(){this._binaryJs.close();this._binaryJs=null},sendFile:function(a,b,d){this._binaryJs.send(a,b).on("data",d)},__class__:Tf};var Yi=function(){};h["tools.spark.sliced.services.std.comms.sockets.interfaces.ISocket"]=Yi;Yi.__name__=!0;Yi.prototype={__class__:Yi};var Sg=function(){};h["tools.spark.sliced.services.std.comms.sockets.core.pomelo.platform.html5.websocket.Socket"]=
Sg;Sg.__name__=!0;Sg.__interfaces__=[Yi];Sg.prototype={init:function(a,b,d,c){null==d&&(d=!1);window.pomelo.init({host:a,port:b,log:d},c)},request:function(a,b,d){window.pomelo.request(a,b,d)},on:function(a,b){window.pomelo.on(a,b)},disconnect:function(){window.pomelo.disconnect()},__class__:Sg};var Zi=function(){};h["tools.spark.sliced.services.std.display.active_displayentity_references.interfaces.IActiveSpaceReference"]=Zi;Zi.__name__=!0;Zi.prototype={__class__:Zi};var Ke=function(a){this.spaceEntity=
a};h["tools.spark.sliced.services.std.display.active_displayentity_references.core.ActiveSpaceReference"]=Ke;Ke.__name__=!0;Ke.__interfaces__=[Zi];Ke.prototype={__class__:Ke};var Le=function(){};h["tools.spark.sliced.services.std.display.active_displayentity_references.interfaces.IActiveStageAreaReference"]=Le;Le.__name__=!0;Le.prototype={__class__:Le};var Uf=function(a){this.stageAreaEntity=a;this.layoutElement=new He(this.stageAreaEntity,"StageArea",this)};h["tools.spark.sliced.services.std.display.active_displayentity_references.core.ActiveStageAreaReference"]=
Uf;Uf.__name__=!0;Uf.__interfaces__=[Le];Uf.prototype={__class__:Uf};var Me=function(){};h["tools.spark.sliced.services.std.display.active_displayentity_references.interfaces.IActiveStageReference"]=Me;Me.__name__=!0;Me.prototype={__class__:Me};var je=function(a){this.stageEntity=a;this.activeViewReferences=[];this.activeStageAreaReferences=[];this.layoutRoot=new He(this.stageEntity,"Stage",this);this.layoutManager=new Wi(this.layoutRoot);W._platform.getStage().resize.connect(x(this,this._onResize))};
h["tools.spark.sliced.services.std.display.active_displayentity_references.core.ActiveStageReference"]=je;je.__name__=!0;je.__interfaces__=[Me];je.prototype={_onResize:function(){this.layoutRoot.explicitWidth=window.innerWidth;this.layoutRoot.explicitHeight=window.innerHeight;this.layoutManager.validated=!1},addView:function(a){this.activeViewReferences.push(a);this.activeViewReferences.sort(x(this,this._orderViews));this._addLayoutElement(a.layoutElement)},addStageArea:function(a){this.activeStageAreaReferences.push(a);
this._addLayoutElement(a.layoutElement)},_addLayoutElement:function(a){if("Implicit"==a.layoutableEntity.getState("parent"))this.layoutRoot.children.push(a);else for(var b=0,d=this.activeStageAreaReferences;b<d.length;){var c=d[b];++b;if(c.stageAreaEntity.getState("name")==a.layoutableEntity.getState("parent")){c.layoutElement.children.push(a);break}}},_orderViews:function(a,b){return a.viewEntity.getState("zIndex")>b.viewEntity.getState("zIndex")?1:a.viewEntity.getState("zIndex")<b.viewEntity.getState("zIndex")?
-1:0},__class__:je};var Tg=function(){};h["tools.spark.sliced.services.std.display.active_displayentity_references.interfaces.IActiveViewReference"]=Tg;Tg.__name__=!0;Tg.prototype={__class__:Tg};var Dd=function(a){this.viewEntity=a;this.layoutElement=new He(this.viewEntity,"View",this)};h["tools.spark.sliced.services.std.display.active_displayentity_references.core.ActiveViewReference"]=Dd;Dd.__name__=!0;Dd.__interfaces__=[Tg];Dd.prototype={__class__:Dd};var Vf=function(){this._init()};h["tools.spark.sliced.services.std.display.core.Display"]=
Vf;Vf.__name__=!0;Vf.__interfaces__=[Qf];Vf.__super__=Ua;Vf.prototype=t(Ua.prototype,{_initRenderStateNames:function(){this._renderStateNames.set("2DmeshType",!0);!0;this._renderStateNames.set("3DmeshType",!0);!0;this._renderStateNames.set("touchable",!0);!0;this._renderStateNames.set("2DMeshImageForm",!0);!0;this._renderStateNames.set("2DMeshSpriterForm",!0);!0;this._renderStateNames.set("2DMeshFillRectForm",!0);!0;this._renderStateNames.set("2DMeshSpriteForm",!0);!0;this._renderStateNames.set("2DMeshSpriterAnimForm",
!0);!0;this._renderStateNames.set("visibility",!0);!0;this._renderStateNames.set("visible",!0);!0;this._renderStateNames.set("width",!0);!0;this._renderStateNames.set("height",!0);!0;this._renderStateNames.set("opacity",!0);!0;this._renderStateNames.set("display",!0);!0;this._renderStateNames.set("text",!0);!0;this._renderStateNames.set("fontSize",!0);!0;this._renderStateNames.set("fontColor",!0);!0;this._renderStateNames.set("src",!0);!0;this._renderStateNames.set("overflow",!0);!0;this._renderStateNames.set("backgroundColor",
!0);!0;this._renderStateNames.set("spaceX",!0);!0;this._renderStateNames.set("spaceY",!0);!0;this._renderStateNames.set("spaceZ",!0);!0;this._renderStateNames.set("scaleX",!0);!0;this._renderStateNames.set("scaleY",!0);!0;this._renderStateNames.set("scaleZ",!0);!0;this._renderStateNames.set("spaceWidth",!0);!0;this._renderStateNames.set("spaceHeight",!0);!0;this._renderStateNames.set("stage",!0);!0;this._renderStateNames.set("view",!0);!0;this._renderStateNames.set("camera",!0);!0;this._renderStateNames.set("scene",
!0);!0;this._renderStateNames.set("space",!0);!0;this._renderStateNames.set("active",!0);!0},_init:function(){this._renderStateNames=new D;this._initRenderStateNames();this._renderFormStateNames=new D;this._activeReferenceMediator=new Ug(this);this.platformRendererSet=new D;this._dataBuffer=new Wf},setActiveSpace:function(a){return"Space"==a.getState("displayType")?(this._dataBuffer.addEntry(xa.SET_SPACE,a),!0):!1},_setActiveSpace:function(a){null!=this._activeReferenceMediator.getActiveSpaceReference(a)?
null:(null!=this.projectActiveSpaceReference&&null,this.projectActiveSpaceReference=this._activeReferenceMediator.createSpaceReference(a),this._activeReferenceMediator.spaceReferenceManager.update(this.projectActiveSpaceReference,a))},update:function(){for(var a=0,b=this._dataBuffer.dataBuffer;a<b.length;){var d=b[a];++a;switch(d.type[1]){case 0:this._setActiveSpace(d.source);break;case 1:switch(d.source.getState("displayType")){case "Space":null;break;case "Stage":null;break;case "StageArea":null;
break;case "View":for(d=this.platformRendererSet.iterator();d.hasNext();)d.next(),null;break;default:for(var c=this.platformRendererSet.iterator();c.hasNext();)c.next().addChild(d.source,d.target)}break;case 2:switch(d.source.getState("displayType")){case "Space":null;break;case "Stage":null;break;case "StageArea":null;break;case "View":for(d=this.platformRendererSet.iterator();d.hasNext();)d.next(),null;break;default:for(c=this.platformRendererSet.iterator();c.hasNext();)c.next().removeChild(d.source,
d.target)}break;case 3:switch(d.source.getState("displayType")){case "Space":this._activeReferenceMediator.spaceReferenceManager.updateState(this._activeReferenceMediator.getActiveSpaceReference(d.source),d.source,d.field);break;case "Stage":this._activeReferenceMediator.stageReferenceManager.updateState(this._activeReferenceMediator.getActiveStageReference(d.source),d.source,d.field);break;case "StageArea":this._activeReferenceMediator.stageAreaReferenceManager.updateState(this._activeReferenceMediator.getActiveStageAreaReference(d.source),
d.source,d.field);break;case "View":this._activeReferenceMediator.viewReferenceManager.updateState(this._activeReferenceMediator.getActiveViewReference(d.source),d.source,d.field);for(c=this.platformRendererSet.iterator();c.hasNext();)c.next().updateState(d.source,d.field);break;default:for(c=this.platformRendererSet.iterator();c.hasNext();)c.next().updateState(d.source,d.field)}break;default:P.warn("DISPLAY: Unhandled request: "+o.string(d.type))}}this._dataBuffer.clearBuffer();null!=this.projectActiveSpaceReference&&
this.projectActiveSpaceReference.activeStageReference.layoutManager.validate()},addDisplayObjectChild:function(a,b){null!=a.getState("displayType")&&null!=b.getState("displayType")&&this._dataBuffer.addEntry(xa.ADDED,a,b)},removeDisplayObjectChild:function(a,b){null!=a.getState("displayType")&&null!=b.getState("displayType")&&this._dataBuffer.addEntry(xa.REMOVED,a,b)},updateDisplayObjectState:function(a,b){null!=a.getState("displayType")&&!0==this._renderStateNames.get(b)&&this._dataBuffer.addEntry(xa.UPDATED_STATE,
a,null,b)},updateDisplayObjectFormState:function(a,b){null!=a.getState("displayType")&&!0==this._renderFormStateNames.get(b)&&this._dataBuffer.addEntry(xa.UPDATED_FORM_STATE,a,null,b)},_addChild:function(a,b){this._dataBuffer.addEntry(xa.ADDED,a,b)},_removeChild:function(a,b){this._dataBuffer.addEntry(xa.REMOVED,a,b)},_updateState:function(a,b){this._dataBuffer.addEntry(xa.UPDATED_STATE,a,null,b)},_updateFormState:function(a,b){this._dataBuffer.addEntry(xa.UPDATED_FORM_STATE,a,null,b)},log:function(){null},
info:function(){null},debug:function(){null},warn:function(){null},error:function(){null},__class__:Vf});var $i=function(){};h["tools.spark.sliced.services.std.display.databuffer.interfaces.IBufferEntry"]=$i;$i.__name__=!0;$i.prototype={__class__:$i};var Vg=function(a,b,d,c){this.type=a;this.source=b;this.target=d;this.field=c};h["tools.spark.sliced.services.std.display.databuffer.core.BufferEntry"]=Vg;Vg.__name__=!0;Vg.__interfaces__=[$i];Vg.prototype={__class__:Vg};var aj=function(){};h["tools.spark.sliced.services.std.display.databuffer.interfaces.IDataBuffer"]=
aj;aj.__name__=!0;aj.prototype={__class__:aj};var Wf=function(){this.dataBuffer=[]};h["tools.spark.sliced.services.std.display.databuffer.core.DataBuffer"]=Wf;Wf.__name__=!0;Wf.__interfaces__=[aj];Wf.prototype={addEntry:function(a,b,d,c){this.dataBuffer.push(new Vg(a,b,d,c))},clearBuffer:function(){this.dataBuffer=[]},__class__:Wf};var xa=h["tools.spark.sliced.services.std.display.databuffer.interfaces.EBufferEntryType"]={__ename__:!0,__constructs__:["SET_SPACE","ADDED","REMOVED","UPDATED_STATE",
"UPDATED_FORM_STATE"]};xa.SET_SPACE=["SET_SPACE",0];xa.SET_SPACE.toString=g;xa.SET_SPACE.__enum__=xa;xa.ADDED=["ADDED",1];xa.ADDED.toString=g;xa.ADDED.__enum__=xa;xa.REMOVED=["REMOVED",2];xa.REMOVED.toString=g;xa.REMOVED.__enum__=xa;xa.UPDATED_STATE=["UPDATED_STATE",3];xa.UPDATED_STATE.toString=g;xa.UPDATED_STATE.__enum__=xa;xa.UPDATED_FORM_STATE=["UPDATED_FORM_STATE",4];xa.UPDATED_FORM_STATE.toString=g;xa.UPDATED_FORM_STATE.__enum__=xa;var bj=function(){};h["tools.spark.sliced.services.std.display.managers.interfaces.IActiveReferenceMediator"]=
bj;bj.__name__=!0;bj.prototype={__class__:bj};var Ug=function(a){this.display=a;this.spaceReferenceManager=new Xf(this);this.stageReferenceManager=new Wg(this);this.viewReferenceManager=new Yf(this);this.stageAreaReferenceManager=new Xg(this)};h["tools.spark.sliced.services.std.display.managers.core.ActiveReferenceMediator"]=Ug;Ug.__name__=!0;Ug.__interfaces__=[bj];Ug.prototype={createSpaceReference:function(a){return v.__cast(this.spaceReferenceManager.create(a),Ke)},createStageReference:function(a){return v.__cast(this.stageReferenceManager.create(a),
je)},createViewReference:function(a){return v.__cast(this.viewReferenceManager.create(a),Dd)},createStageAreaReference:function(a){return v.__cast(this.stageAreaReferenceManager.create(a),Uf)},getActiveSpaceReference:function(a){return null==this.display.projectActiveSpaceReference?null:a==this.display.projectActiveSpaceReference.spaceEntity?this.display.projectActiveSpaceReference:null},getActiveStageReference:function(a){return null==this.display.projectActiveSpaceReference||null==this.display.projectActiveSpaceReference.activeStageReference?
null:a==this.display.projectActiveSpaceReference.activeStageReference.stageEntity?this.display.projectActiveSpaceReference.activeStageReference:null},getActiveViewReference:function(a){if(null==this.display.projectActiveSpaceReference||null==this.display.projectActiveSpaceReference.activeStageReference)return null;for(var b=0,d=this.display.projectActiveSpaceReference.activeStageReference.activeViewReferences;b<d.length;){var c=d[b];++b;if(c.viewEntity==a)return c}return null},getActiveStageAreaReference:function(a){if(null==
this.display.projectActiveSpaceReference||null==this.display.projectActiveSpaceReference.activeStageReference)return null;for(var b=0,d=this.display.projectActiveSpaceReference.activeStageReference.activeStageAreaReferences;b<d.length;){var c=d[b];++b;if(c.stageAreaEntity==a)return c}return null},__class__:Ug};var Va=function(){};h["tools.spark.sliced.services.std.display.managers.interfaces.IDisplayObjectManager"]=Va;Va.__name__=!0;Va.prototype={__class__:Va};var Zf=function(a){this._renderer=a};
h["tools.spark.sliced.services.std.display.managers.core.DomCameraManager"]=Zf;Zf.__name__=!0;Zf.__interfaces__=[Va];Zf.prototype={create:function(a){return new Ge(a)},update:function(){},updateState:function(){},__class__:Zf};var Yg=function(a){this._renderer=a};h["tools.spark.sliced.services.std.display.managers.core.DomObjectManager"]=Yg;Yg.__name__=!0;Yg.__interfaces__=[Va];Yg.prototype={create:function(a){var b=new Lc(a);this.update(b,a);return b},update:function(a,b){var d;d=v.__cast(a,Lc);
for(var c=0,f=b.get_children();c<f.length;){var n=f[c];++c;this.addTo(this._renderer.createObject(n),d)}},updateState:function(a,b,d){a=v.__cast(a,Lc);for(b=a._instances.keys();b.hasNext();){var c=b.next();null!=a._updateStateFunctions.get(d)?a._updateStateFunctions.get(d)(a.gameEntity.getState(d),c):null}},addTo:function(a,b){var d;d=v.__cast(b,Lc);null!=a&&d.addChild(a)},removeFrom:function(a,b){var d;d=v.__cast(b,Lc);null!=a&&d.removeChild(a)},__class__:Yg};var $f=function(a){this._renderer=a};
h["tools.spark.sliced.services.std.display.managers.core.DomSceneManager"]=$f;$f.__name__=!0;$f.__interfaces__=[Va];$f.prototype={create:function(a){var b=new Vc(a);this.update(b,a);return b},update:function(a,b){var d;d=v.__cast(a,Vc);for(var c=0,f=b.get_children();c<f.length;){var n=f[c];++c;this.addTo(this._renderer.createObject(n),d)}},updateState:function(){},addTo:function(a,b){var d;d=v.__cast(b,Vc);null!=a&&d.addChild(a)},__class__:$f};var Zg=function(a){this._renderer=a};h["tools.spark.sliced.services.std.display.managers.core.DomViewManager"]=
Zg;Zg.__name__=!0;Zg.__interfaces__=[Va];Zg.prototype={create:function(a){var b=new Ie(a);this.update(b,a);return b},update:function(a,b){this.updateState(a,b,"scene");this.updateState(a,b,"camera");this.updateState(a,b,"visible")},updateState:function(a,b,d){a=v.__cast(a,Ie);switch(d){case "scene":b=b.getState(d);a.set_scene(this._renderer.createScene(b));break;case "camera":b=b.getState(d);a.set_camera(this._renderer.createCamera(b));break;case "visible":a.updateState(d)}},__class__:Zg};var ag=
function(a){this._renderer=a};h["tools.spark.sliced.services.std.display.managers.core.Flambe2_5DCameraManager"]=ag;ag.__name__=!0;ag.__interfaces__=[Va];ag.prototype={create:function(a){return new Lf(a)},update:function(){},updateState:function(){},__class__:ag};var $g=function(a){this._renderer=a};h["tools.spark.sliced.services.std.display.managers.core.Flambe2_5DObjectManager"]=$g;$g.__name__=!0;$g.__interfaces__=[Va];$g.prototype={create:function(a){var b=new he(a);this.update(b,a);return b},
update:function(a,b){var d;d=v.__cast(a,he);for(var c=0,f=b.get_children();c<f.length;){var n=f[c];++c;this.addTo(this._renderer.createObject(n),d)}},updateState:function(a,b,d){a=v.__cast(a,he);for(b=a._instances.keys();b.hasNext();){var c=b.next();null!=a._updateStateFunctions.get(d)?a._updateStateFunctions.get(d)(a.gameEntity.getState(d),c):null}},addTo:function(a,b){var d;d=v.__cast(b,he);null!=a&&d.addChild(a)},__class__:$g};var bg=function(a){this._renderer=a};h["tools.spark.sliced.services.std.display.managers.core.Flambe2_5DSceneManager"]=
bg;bg.__name__=!0;bg.__interfaces__=[Va];bg.prototype={create:function(a){var b=new pd(a);this.update(b,a);return b},update:function(a,b){var d;d=v.__cast(a,pd);for(var c=0,f=b.get_children();c<f.length;){var n=f[c];++c;this.addTo(this._renderer.createObject(n),d)}},updateState:function(){},addTo:function(a,b){var d;d=v.__cast(b,pd);null!=a&&d.addChild(a)},removeFrom:function(a,b){var d;d=v.__cast(b,pd);null!=a&&d.removeChild(a)},__class__:bg};var ah=function(a,b){this._renderer=a;this._flambeGraphics=
b};h["tools.spark.sliced.services.std.display.managers.core.Flambe2_5DViewManager"]=ah;ah.__name__=!0;ah.__interfaces__=[Va];ah.prototype={create:function(a){var b=new ie(a,this._flambeGraphics);this.update(b,a);return b},update:function(a,b){this.updateState(a,b,"scene");this.updateState(a,b,"camera")},updateState:function(a,b,d){a=v.__cast(a,ie);switch(d){case "scene":b=b.getState(d);a.set_scene(this._renderer.createScene(b));break;case "camera":b=b.getState(d);a.set_camera(this._renderer.createCamera(b));
break;case "visible":a.setVisible(b.getState(d))}},__class__:ah};var Xf=function(a){this._activeReferenceMediator=a};h["tools.spark.sliced.services.std.display.managers.core.SpaceReferenceManager"]=Xf;Xf.__name__=!0;Xf.__interfaces__=[Va];Xf.prototype={create:function(a){return new Ke(a)},update:function(a,b){null!=a&&this.updateState(a,b,"stage")},updateState:function(a,b,d){if(null!=a)switch(a=v.__cast(a,Ke),d){case "stage":null!=b.getState(d)&&this._setStage(a,this._activeReferenceMediator.createStageReference(b.getState(d)),
b.getState(d))}},_setStage:function(a,b,d){null!=this._activeReferenceMediator.getActiveStageReference(d)?P.warn("This stage object ["+o.string(d.getState("name"))+"] is already bound to the Active Space. Ignoring..."):(null!=this._activeReferenceMediator.display.projectActiveSpaceReference.activeStageReference&&null,a.activeStageReference=b,this._activeReferenceMediator.stageReferenceManager.update(b,d))},__class__:Xf};var Xg=function(a){this._activeReferenceMediator=a};h["tools.spark.sliced.services.std.display.managers.core.StageAreaReferenceManager"]=
Xg;Xg.__name__=!0;Xg.__interfaces__=[Va];Xg.prototype={create:function(a){return new Uf(a)},update:function(a){null!=a&&v.__cast(a,Le).layoutElement.update()},updateState:function(a,b,d){null!=a&&v.__cast(a,Le).layoutElement.updateState(d)},__class__:Xg};var Wg=function(a){this._activeReferenceMediator=a};h["tools.spark.sliced.services.std.display.managers.core.StageReferenceManager"]=Wg;Wg.__name__=!0;Wg.__interfaces__=[Va];Wg.prototype={create:function(a){return new je(a)},update:function(a,b){if(null!=
a){var d;d=v.__cast(a,Me);this.updateState(d,b,"test");this.updateState(d,b,"width");this.updateState(d,b,"height");d.layoutRoot.update();d.layoutRoot.explicitWidth=W._platform.getStage().get_width();d.layoutRoot.explicitHeight=W._platform.getStage().get_height();for(var c=0,f=b.getChildren();c<f.length;){var n=f[c];++c;this.addTo(n,d)}}},updateState:function(a){null!=a&&v.__cast(a,Me)},addTo:function(a,b){if(null!=b){var d;d=v.__cast(b,je);var c;c=v.__cast(a,Ne);"View"==c.getState("displayType")?
this._addView(d,this._activeReferenceMediator.createViewReference(c),c):"StageArea"==c.getState("displayType")?this._addStageArea(d,this._activeReferenceMediator.createStageAreaReference(c),c):null}},_addView:function(a,b,d){null!=this._activeReferenceMediator.getActiveViewReference(d)?P.warn("This view object ["+o.string(d.getState("name"))+"] is already bound to the Active Stage. Ignoring..."):null==d.getState("scene")||null==d.getState("camera")?P.warn("This view object ["+o.string(d.getState("name"))+
"] is not ready yet (missing camera or scene). Ignoring..."):(a.addView(b),this._activeReferenceMediator.viewReferenceManager.update(b,d))},_addStageArea:function(a,b,d){null!=this._activeReferenceMediator.getActiveStageAreaReference(d)?P.warn("This stageArea object ["+o.string(d.getState("name"))+"] is already bound to the Active Stage. Ignoring..."):(a.addStageArea(b),this._activeReferenceMediator.stageAreaReferenceManager.update(b,d))},__class__:Wg};var Yf=function(a){this._activeReferenceMediator=
a};h["tools.spark.sliced.services.std.display.managers.core.ViewReferenceManager"]=Yf;Yf.__name__=!0;Yf.__interfaces__=[Va];Yf.prototype={create:function(a){return new Dd(a)},update:function(a,b){if(null!=a){var d;d=v.__cast(a,Tg);this.updateState(d,b,"scene");this.updateState(d,b,"camera");d.layoutElement.update();this._updateRenderer(d)}},updateState:function(a,b,d){if(null!=a)switch(d){case "scene":this._updateRenderer(v.__cast(a,Dd));break;case "camera":this._updateRenderer(v.__cast(a,Dd))}},
_updateRenderer:function(a){if(null==a.renderer){if("Implicit"!=a.viewEntity.getState("renderer")){var b=a.viewEntity.getState("renderer");a.renderer=this._activeReferenceMediator.display.platformRendererSet.get(b)}else P.error("Implicit Renderer selection has not been implemented yet. View "+o.string(a.viewEntity.getState("name"))+" cannot be rendered!");null!=a.renderer?a.renderer.createView(a.viewEntity):P.error("Could not create renderer: "+o.string(a.viewEntity.getState("renderer"))+".")}},__class__:Yf};
var bk=function(){};h["tools.spark.sliced.services.std.display.renderers.interfaces.IRenderer"]=bk;bk.__name__=!0;var Ed=function(){null};h["tools.spark.sliced.services.std.display.renderers.core.ARenderer"]=Ed;Ed.__name__=!0;Ed.__interfaces__=[bk];Ed.prototype={__class__:Ed};var cj=function(){};h["tools.spark.sliced.services.std.display.renderers.interfaces.IDimensionSpecificRenderer"]=cj;cj.__name__=!0;cj.__interfaces__=[bk];var mc=function(){Ed.call(this);null};h["tools.spark.sliced.services.std.display.renderers.core.dimension.A2_5DRenderer"]=
mc;mc.__name__=!0;mc.__interfaces__=[cj];mc.__super__=Ed;mc.prototype=t(Ed.prototype,{__class__:mc});var Oe=function(){};h["tools.spark.sliced.services.std.display.renderers.interfaces.ILibrarySpecificRenderer"]=Oe;Oe.__name__=!0;Oe.__interfaces__=[cj];Oe.prototype={__class__:Oe};var Wc=function(){mc.call(this);this._internalGraphics=this._platform.getRenderer().graphics;null==this._internalGraphics&&null;this._views=new za;this._scenes=new za;this._cameras=new za;this._objects=new za;this._viewManager=
new ah(this,this._internalGraphics);this._sceneManager=new bg(this);this._cameraManager=new ag(this);this._objectManager=new $g(this)};h["tools.spark.sliced.services.std.display.renderers.core.library.AFlambe2_5DRenderer"]=Wc;Wc.__name__=!0;Wc.__interfaces__=[Oe];Wc.__super__=mc;Wc.prototype=t(mc.prototype,{renderView:function(a){this._views.h[a.__id__].render()},createView:function(a){if(null!=this._views.h[a.__id__])P.warn("View "+o.string(a.getState("name"))+" has already been added to this Flambe2_5DRenderer. Ignoring...");
else{var b;b=v.__cast(this._viewManager.create(a),ie);this._views.set(a,b);b}return this._views.h[a.__id__]},createScene:function(a){if(null!=this._scenes.h[a.__id__])P.warn("Scene "+o.string(a.getState("name"))+" has already been added to this Flambe2_5DRenderer. Ignoring...");else{var b;b=v.__cast(this._sceneManager.create(a),pd);this._scenes.set(a,b);b}return this._scenes.h[a.__id__]},createCamera:function(a){if(null!=this._cameras.h[a.__id__])P.warn("Camera "+o.string(a.getState("name"))+" has already been added to this Flambe2_5DRenderer. Ignoring...");
else{var b;b=v.__cast(this._cameraManager.create(a),Lf);this._cameras.set(a,b);b}return this._cameras.h[a.__id__]},createObject:function(a){if("Entity"==a.getState("displayType")){if(null!=this._objects.h[a.__id__])P.warn("Object "+o.string(a.getState("name"))+" has already been added to this Flambe2_5DRenderer. Ignoring...");else{var b;b=v.__cast(this._objectManager.create(a),Na);this._objects.set(a,b);b}return this._objects.h[a.__id__]}return null},addChild:function(a,b){switch(a.getState("displayType")){case "Scene":null!=
this._scenes.h[a.__id__]&&this._sceneManager.addTo(this.createObject(b),this._scenes.h[a.__id__]);break;case "Entity":null!=this._objects.h[a.__id__]&&this._objectManager.addTo(this.createObject(b),this._objects.h[a.__id__]);break;default:P.warn("AFlambe2_5DRenderer: Unhandled add child request: "+o.string(a.getState("displayType")))}},removeChild:function(a,b){switch(a.getState("displayType")){case "Scene":null!=this._scenes.h[a.__id__]&&this._sceneManager.removeFrom(this._objects.h[b.__id__],this._scenes.h[a.__id__]);
break;case "Entity":null!=this._objects.h[a.__id__]&&null;break;default:P.warn("AFlambe2_5DRenderer: Unhandled remove child request: "+o.string(a.getState("displayType")))}},updateState:function(a,b){null!=this._objects.h[a.__id__]?this._objectManager.updateState(this._objects.h[a.__id__],a,b):null!=this._views.h[a.__id__]&&this._viewManager.updateState(this._views.h[a.__id__],a,b)},__class__:Wc});var ke=function(){mc.call(this)};h["tools.spark.sliced.services.std.display.renderers.core.library.ANativeControls2_5DRenderer"]=
ke;ke.__name__=!0;ke.__interfaces__=[Oe];ke.__super__=mc;ke.prototype=t(mc.prototype,{renderView:function(){},createView:function(){return null},createScene:function(){return null},createCamera:function(){return null},createObject:function(){return null},addChild:function(){},removeChild:function(){},updateState:function(){},__class__:ke});var dj=function(){};h["tools.spark.sliced.services.std.display.renderers.interfaces.IPlatformSpecificRenderer"]=dj;dj.__name__=!0;dj.__interfaces__=[Oe];var Of=
function(){this._platform=Fc.instance;Wc.call(this);null};h["tools.spark.sliced.services.std.display.renderers.core.platform.html.Flambe2_5DHtmlRenderer"]=Of;Of.__name__=!0;Of.__interfaces__=[dj];Of.__super__=Wc;Of.prototype=t(Wc.prototype,{__class__:Of});var Je=function(){mc.call(this);this._views=new za;this._scenes=new za;this._cameras=new za;this._objects=new za;this._viewManager=new Zg(this);this._sceneManager=new $f(this);this._cameraManager=new Zf(this);this._objectManager=new Yg(this)};h["tools.spark.sliced.services.std.display.renderers.core.platform.html.NativeControlsHtmlRenderer"]=
Je;Je.__name__=!0;Je.__interfaces__=[dj];Je.__super__=ke;Je.prototype=t(ke.prototype,{renderView:function(a){this._views.h[a.__id__].render()},createView:function(a){if(null!=this._views.h[a.__id__])P.warn("View "+o.string(a.getState("name"))+" has already been added to this NativeControlsHtmlRenderer. Ignoring...");else{var b;b=v.__cast(this._viewManager.create(a),Ie);this._views.set(a,b);b}return this._views.h[a.__id__]},createScene:function(a){if(null!=this._scenes.h[a.__id__])P.warn("Scene "+
o.string(a.getState("name"))+" has already been added to this NativeControlsHtmlRenderer. Ignoring...");else{var b;b=v.__cast(this._sceneManager.create(a),Vc);this._scenes.set(a,b);b}return this._scenes.h[a.__id__]},createCamera:function(a){if(null!=this._cameras.h[a.__id__])P.warn("Camera "+o.string(a.getState("name"))+" has already been added to this NativeControlsHtmlRenderer. Ignoring...");else{var b;b=v.__cast(this._cameraManager.create(a),Ge);this._cameras.set(a,b);b}return this._cameras.h[a.__id__]},
createObject:function(a){if("Entity"==a.getState("displayType")){if(null!=this._objects.h[a.__id__])P.warn("Object "+o.string(a.getState("name"))+" has already been added to this NativeControlsHtmlRenderer. Ignoring...");else{var b;b=v.__cast(this._objectManager.create(a),Na);this._objects.set(a,b);b}return this._objects.h[a.__id__]}return null},addChild:function(a,b){switch(a.getState("displayType")){case "Scene":null!=this._scenes.h[a.__id__]&&this._sceneManager.addTo(this.createObject(b),this._scenes.h[a.__id__]);
break;case "Entity":null!=this._objects.h[a.__id__]&&this._objectManager.addTo(this.createObject(b),this._objects.h[a.__id__]);break;default:P.warn("NativeControlsHtmlRenderer: Unhandled add child request: "+o.string(a.getState("displayType")))}},removeChild:function(a,b){switch(a.getState("displayType")){case "Scene":null!=this._scenes.h[a.__id__]&&null;break;case "Entity":null!=this._objects.h[a.__id__]&&this._objectManager.removeFrom(this.createObject(b),this._objects.h[a.__id__]);break;default:P.warn("NativeControlsHtmlRenderer: Unhandled remove child request: "+
o.string(a.getState("displayType")))}},updateState:function(a,b){null!=this._objects.h[a.__id__]?this._objectManager.updateState(this._objects.h[a.__id__],a,b):null!=this._views.h[a.__id__]&&this._viewManager.updateState(this._views.h[a.__id__],a,b)},__class__:Je});var cg=function(){this._init()};h["tools.spark.sliced.services.std.event.core.Event"]=cg;cg.__name__=!0;cg.__interfaces__=[Qg];cg.__super__=Ua;cg.prototype=t(Ua.prototype,{_init:function(){this._NO_FILTER=[];this._FILTER_VARIABLE_USER_ENTITY=
[];this._eventTypeFilterFlags=new ua;this._eventTypeFilterTriggers=new ua;this._initPrefabConvertToTypeMap();this._initPrefabConvertToFilterMap()},addTrigger:function(a){var b=this._prefabConvertToType.get(a.eventPrefab),d=this._prefabConvertToFilter.get(a.eventPrefab);d==this._FILTER_VARIABLE_USER_ENTITY&&(d=a.parentEntity);if(!1==this._eventTypeFilterTriggers.exists(b)){var c=new za;this._eventTypeFilterTriggers.set(b,c)}!1==this._eventTypeFilterTriggers.get(b).exists(d)&&this._eventTypeFilterTriggers.get(b).set(d,
[]);this._eventTypeFilterTriggers.get(b).get(d).push(a);(b==k.MOUSE_LEFT_CLICK||b==k.MOUSE_RIGHT_CLICK||b==k.MOUSE_ENTERED||b==k.MOUSE_MOVED||b==k.MOUSE_LEFT)&&K.input.pointer.registerTrigger(b,d)},raiseEvent:function(a,b){null==b&&(b=this._NO_FILTER);if(!1==this._eventTypeFilterFlags.exists(a)){var d=new za;this._eventTypeFilterFlags.set(a,d);d}this._eventTypeFilterFlags.get(a).set(b,!0);b!=this._NO_FILTER&&this._eventTypeFilterFlags.get(a).set(this._NO_FILTER,!0)},_doTriggers:function(a,b){if(this._eventTypeFilterTriggers.exists(a)&&
this._eventTypeFilterTriggers.get(a).exists(b))for(var d=0,c=this._eventTypeFilterTriggers.get(a).get(b);d<c.length;){var f=c[d];++d;f.doPass()}},update:function(){for(var a=this._eventTypeFilterFlags.keys();a.hasNext();){var b=a.next();if(!0==this._eventTypeFilterFlags.get(b).get(this._NO_FILTER))for(var d=this._eventTypeFilterFlags.get(b).keys();d.hasNext();){var c=d.next();!0==this._eventTypeFilterFlags.get(b).get(c)&&(this._eventTypeFilterFlags.get(b).set(c,!1),this._doTriggers(b,c))}}},_initPrefabConvertToTypeMap:function(){this._prefabConvertToType=
new ua;var a=k.CREATED;this._prefabConvertToType.set(c.CREATED,a);a;var b=k.UPDATE;this._prefabConvertToType.set(c.UPDATE,b);b;var d=k.CHANGED;this._prefabConvertToType.set(c.CHANGED,d);d;var l=k.NETWORK_CONNECTED;this._prefabConvertToType.set(c.NETWORK_CONNECTED,l);l;var f=k.NETWORK_REQUEST;this._prefabConvertToType.set(c.NETWORK_REQUEST,f);f;var n=k.NETWORK_SERVER_EVENT;this._prefabConvertToType.set(c.NETWORK_SERVER_EVENT,n);n;var e=k.FILETRANSFER_CONNECTED;this._prefabConvertToType.set(c.FILETRANSFER_CONNECTED,
e);e;var i=k.FILETRANSFER_SENDREQUEST;this._prefabConvertToType.set(c.FILETRANSFER_SENDREQUEST,i);i;var g=k.MOUSE_LEFT_CLICK;this._prefabConvertToType.set(c.MOUSE_LEFT_CLICK,g);g;var h=k.MOUSE_RIGHT_CLICK;this._prefabConvertToType.set(c.MOUSE_RIGHT_CLICK,h);h;var j=k.MOUSE_LEFT_CLICK;this._prefabConvertToType.set(c.MOUSE_LEFT_CLICKED,j);j;var m=k.MOUSE_RIGHT_CLICK;this._prefabConvertToType.set(c.MOUSE_RIGHT_CLICKED,m);m;var q=k.MOUSE_ENTERED;this._prefabConvertToType.set(c.MOUSE_ENTERED,q);q;var o=
k.MOUSE_MOVED;this._prefabConvertToType.set(c.MOUSE_MOVED,o);o;var s=k.MOUSE_LEFT;this._prefabConvertToType.set(c.MOUSE_LEFT,s);s;var r=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED,r);r;var t=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED,t);t;var w=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_ALT,w);w;var y=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_BACKSPACE,y);y;var v=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_CAPS_LOCK,v);v;
var z=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_CONTROL,z);z;var x=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_DELETE,x);x;var G=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_DOWN,G);G;var B=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_END,B);B;var K=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_ENTER,K);K;var C=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_ESCAPE,C);C;var A=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F1,
A);A;var D=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F10,D);D;var E=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F11,E);E;var F=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F12,F);F;var I=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F13,I);I;var P=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F14,P);P;var J=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F15,J);J;var W=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F2,
W);W;var O=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F3,O);O;var Y=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F4,Y);Y;var R=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F5,R);R;var M=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F6,M);M;var V=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F7,V);V;var X=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F8,X);X;var Z=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F9,
Z);Z;var ha=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_HOME,ha);ha;var L=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_INSERT,L);L;var ea=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_LEFT,ea);ea;var fa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_0,fa);fa;var N=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_1,N);N;var ca=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_2,ca);ca;var ba=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_3,
ba);ba;var da=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_4,da);da;var ja=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_5,ja);ja;var ka=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_6,ka);ka;var ma=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_7,ma);ma;var ta=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_8,ta);ta;var u=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_9,u);u;var qa=k.KEY_PRESSED;
this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_ADD,qa);qa;var xa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_DECIMAL,xa);xa;var aa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_DIVIDE,aa);aa;var wa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_ENTER,wa);wa;var cb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_MULTIPLY,cb);cb;var oa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMPAD_SUBTRACT,oa);oa;var Fa=
k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_PAGE_DOWN,Fa);Fa;var ra=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_PAGE_UP,ra);ra;var S=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_RIGHT,S);S;var bh=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_SHIFT,bh);bh;var ga=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_SPACE,ga);ga;var Pe=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_TAB,Pe);Pe;var Ck=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_UP,
Ck);Ck;var Qe=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_A,Qe);Qe;var Dk=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_B,Dk);Dk;var Ek=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_C,Ek);Ek;var za=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_D,za);za;var U=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_E,U);U;var ia=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_F,ia);ia;var Ac=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_G,
Ac);Ac;var Ja=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_H,Ja);Ja;var pa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_I,pa);pa;var Ca=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_J,Ca);Ca;var ej=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_K,ej);ej;var Fk=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_L,Fk);Fk;var Qa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_M,Qa);Qa;var Ba=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_N,
Ba);Ba;var Gk=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_O,Gk);Gk;var ch=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_P,ch);ch;var ob=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_Q,ob);ob;var gb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_R,gb);gb;var fj=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_S,fj);fj;var Ia=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_T,Ia);Ia;var H=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_U,
H);H;var Pa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_V,Pa);Pa;var Hk=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_W,Hk);Hk;var Ha=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_X,Ha);Ha;var Ik=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_Y,Ik);Ik;var Aa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_Z,Aa);Aa;var Jk=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_0,Jk);Jk;var Mc=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_1,
Mc);Mc;var La=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_2,La);La;var lb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_3,lb);lb;var db=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_4,db);db;var sa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_5,sa);sa;var Kk=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_6,Kk);Kk;var Da=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_7,Da);Da;var Ea=k.KEY_PRESSED;
this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_8,Ea);Ea;var Lk=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_NUMBER_9,Lk);Lk;var gj=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_EQUALS,gj);gj;var Ya=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_SLASH,Ya);Ya;var Mk=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_BACKSLASH,Mk);Mk;var Fd=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_LEFTBRACKET,Fd);Fd;var Gd=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_RIGHTBRACKET,
Gd);Gd;var Sd=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_BACKQUOTE,Sd);Sd;var Bc=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_COMMA,Bc);Bc;var pb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_COMMAND,pb);pb;var Wa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_MINUS,Wa);Wa;var ye=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_PERIOD,ye);ye;var qb=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_QUOTE,qb);qb;var ze=k.KEY_PRESSED;
this._prefabConvertToType.set(c.KEY_PRESSED_SEMICOLON,ze);ze;var dh=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_ANDROIDMENU,dh);dh;var Za=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_ANDROIDSEARCH,Za);Za;var Sa=k.KEY_PRESSED;this._prefabConvertToType.set(c.KEY_PRESSED_UNKNOWN,Sa);Sa;var Ta=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_ALT,Ta);Ta;var Ua=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_BACKSPACE,Ua);Ua;var Xa=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_CAPS_LOCK,
Xa);Xa;var Ra=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_CONTROL,Ra);Ra;var fb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_DELETE,fb);fb;var Ab=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_DOWN,Ab);Ab;var Ka=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_END,Ka);Ka;var vb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_ENTER,vb);vb;var kb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_ESCAPE,kb);kb;var na=k.KEY_RELEASED;
this._prefabConvertToType.set(c.KEY_RELEASED_F1,na);na;var Va=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F10,Va);Va;var Hb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F11,Hb);Hb;var eb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F12,eb);eb;var ub=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F13,ub);ub;var rb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F14,rb);rb;var Ga=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F15,
Ga);Ga;var wb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F2,wb);wb;var mb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F3,mb);mb;var Cc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F4,Cc);Cc;var Nk=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F5,Nk);Nk;var hb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F6,hb);hb;var Cb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F7,Cb);Cb;var Eb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F8,
Eb);Eb;var ib=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F9,ib);ib;var $a=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_HOME,$a);$a;var yb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_INSERT,yb);yb;var Ok=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_LEFT,Ok);Ok;var ab=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_0,ab);ab;var Gb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_1,Gb);Gb;var bb=k.KEY_RELEASED;
this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_2,bb);bb;var Ib=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_3,Ib);Ib;var Bb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_4,Bb);Bb;var Lb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_5,Lb);Lb;var Nb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_6,Nb);Nb;var dc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_7,dc);dc;var Vb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_8,
Vb);Vb;var nb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_9,nb);nb;var xb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_ADD,xb);xb;var Dc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_DECIMAL,Dc);Dc;var Oa=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_DIVIDE,Oa);Oa;var sb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_ENTER,sb);sb;var la=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_MULTIPLY,
la);la;var jb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMPAD_SUBTRACT,jb);jb;var zb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_PAGE_DOWN,zb);zb;var ck=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_PAGE_UP,ck);ck;var cc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_RIGHT,cc);cc;var Kb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_SHIFT,Kb);Kb;var Ob=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_SPACE,Ob);Ob;
var Pb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_TAB,Pb);Pb;var va=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_UP,va);va;var Na=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_A,Na);Na;var mc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_B,mc);mc;var $b=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_C,$b);$b;var pc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_D,pc);pc;var bc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_E,
bc);bc;var ya=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_F,ya);ya;var Fc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_G,Fc);Fc;var qc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_H,qc);qc;var Mb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_I,Mb);Mb;var sc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_J,sc);sc;var Qb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_K,Qb);Qb;var Ic=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_L,
Ic);Ic;var Rb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_M,Rb);Rb;var ec=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_N,ec);ec;var Db=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_O,Db);Db;var fc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_P,fc);fc;var Sb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_Q,Sb);Sb;var Pk=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_R,Pk);Pk;var gc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_S,
gc);gc;var wc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_T,wc);wc;var hc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_U,hc);hc;var xc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_V,xc);xc;var ic=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_W,ic);ic;var jc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_X,jc);jc;var kc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_Y,kc);kc;var qd=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_Z,
qd);qd;var lc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_0,lc);lc;var Fb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_1,Fb);Fb;var yc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_2,yc);yc;var Tb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_3,Tb);Tb;var Ub=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_4,Ub);Ub;var tb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_5,tb);
tb;var Ma=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_6,Ma);Ma;var zc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_7,zc);zc;var Xb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_8,Xb);Xb;var Ec=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_NUMBER_9,Ec);Ec;var Yb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_EQUALS,Yb);Yb;var Nc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_SLASH,Nc);Nc;var Zb=
k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_BACKSLASH,Zb);Zb;var Oc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_LEFTBRACKET,Oc);Oc;var Pc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_RIGHTBRACKET,Pc);Pc;var ac=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_BACKQUOTE,ac);ac;var Qc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_COMMA,Qc);Qc;var Jb=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_COMMAND,Jb);Jb;var Sc=
k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_MINUS,Sc);Sc;var Gc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_PERIOD,Gc);Gc;var rc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_QUOTE,rc);rc;var Jc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_SEMICOLON,Jc);Jc;var dk=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_ANDROIDMENU,dk);dk;var uc=k.KEY_RELEASED;this._prefabConvertToType.set(c.KEY_RELEASED_ANDROIDSEARCH,uc);uc;var vc=k.KEY_RELEASED;
this._prefabConvertToType.set(c.KEY_RELEASED_UNKNOWN,vc);vc},_initPrefabConvertToFilterMap:function(){this._prefabConvertToFilter=new ua;this._prefabConvertToFilter.set(c.CREATED,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.UPDATE,this._NO_FILTER);this._prefabConvertToFilter.set(c.CHANGED,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.NETWORK_CONNECTED,this._NO_FILTER);this._prefabConvertToFilter.set(c.NETWORK_REQUEST,this._NO_FILTER);this._prefabConvertToFilter.set(c.NETWORK_SERVER_EVENT,
this._NO_FILTER);this._prefabConvertToFilter.set(c.FILETRANSFER_CONNECTED,this._NO_FILTER);this._prefabConvertToFilter.set(c.FILETRANSFER_SENDREQUEST,this._NO_FILTER);this._prefabConvertToFilter.set(c.MOUSE_LEFT_CLICK,this._NO_FILTER);this._prefabConvertToFilter.set(c.MOUSE_RIGHT_CLICK,this._NO_FILTER);this._prefabConvertToFilter.set(c.MOUSE_LEFT_CLICKED,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.MOUSE_RIGHT_CLICKED,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.MOUSE_ENTERED,
this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.MOUSE_MOVED,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.MOUSE_LEFT,this._FILTER_VARIABLE_USER_ENTITY);this._prefabConvertToFilter.set(c.KEY_PRESSED,this._NO_FILTER);this._prefabConvertToFilter.set(c.KEY_RELEASED,this._NO_FILTER);this._prefabConvertToFilter.set(c.KEY_PRESSED_ALT,e.Alt);this._prefabConvertToFilter.set(c.KEY_PRESSED_BACKSPACE,e.Backspace);this._prefabConvertToFilter.set(c.KEY_PRESSED_CAPS_LOCK,
e.CapsLock);this._prefabConvertToFilter.set(c.KEY_PRESSED_CONTROL,e.Control);this._prefabConvertToFilter.set(c.KEY_PRESSED_DELETE,e.Delete);this._prefabConvertToFilter.set(c.KEY_PRESSED_DOWN,e.Down);this._prefabConvertToFilter.set(c.KEY_PRESSED_END,e.End);this._prefabConvertToFilter.set(c.KEY_PRESSED_ENTER,e.Enter);this._prefabConvertToFilter.set(c.KEY_PRESSED_ESCAPE,e.Escape);this._prefabConvertToFilter.set(c.KEY_PRESSED_F1,e.F1);this._prefabConvertToFilter.set(c.KEY_PRESSED_F10,e.F10);this._prefabConvertToFilter.set(c.KEY_PRESSED_F11,
e.F11);this._prefabConvertToFilter.set(c.KEY_PRESSED_F12,e.F12);this._prefabConvertToFilter.set(c.KEY_PRESSED_F13,e.F13);this._prefabConvertToFilter.set(c.KEY_PRESSED_F14,e.F14);this._prefabConvertToFilter.set(c.KEY_PRESSED_F15,e.F15);this._prefabConvertToFilter.set(c.KEY_PRESSED_F2,e.F2);this._prefabConvertToFilter.set(c.KEY_PRESSED_F3,e.F3);this._prefabConvertToFilter.set(c.KEY_PRESSED_F4,e.F4);this._prefabConvertToFilter.set(c.KEY_PRESSED_F5,e.F5);this._prefabConvertToFilter.set(c.KEY_PRESSED_F6,
e.F6);this._prefabConvertToFilter.set(c.KEY_PRESSED_F7,e.F7);this._prefabConvertToFilter.set(c.KEY_PRESSED_F8,e.F8);this._prefabConvertToFilter.set(c.KEY_PRESSED_F9,e.F9);this._prefabConvertToFilter.set(c.KEY_PRESSED_HOME,e.Home);this._prefabConvertToFilter.set(c.KEY_PRESSED_INSERT,e.Insert);this._prefabConvertToFilter.set(c.KEY_PRESSED_LEFT,e.Left);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_0,e.Numpad0);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_1,e.Numpad1);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_2,
e.Numpad2);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_3,e.Numpad3);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_4,e.Numpad4);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_5,e.Numpad5);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_6,e.Numpad6);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_7,e.Numpad7);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_8,e.Numpad8);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_9,e.Numpad9);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_ADD,
e.NumpadAdd);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_DECIMAL,e.NumpadDecimal);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_DIVIDE,e.NumpadDivide);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_ENTER,e.NumpadEnter);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_MULTIPLY,e.NumpadMultiply);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMPAD_SUBTRACT,e.NumpadSubtract);this._prefabConvertToFilter.set(c.KEY_PRESSED_PAGE_DOWN,e.PageDown);this._prefabConvertToFilter.set(c.KEY_PRESSED_PAGE_UP,
e.PageUp);this._prefabConvertToFilter.set(c.KEY_PRESSED_RIGHT,e.Right);this._prefabConvertToFilter.set(c.KEY_PRESSED_SHIFT,e.Shift);this._prefabConvertToFilter.set(c.KEY_PRESSED_SPACE,e.Space);this._prefabConvertToFilter.set(c.KEY_PRESSED_TAB,e.Tab);this._prefabConvertToFilter.set(c.KEY_PRESSED_UP,e.Up);this._prefabConvertToFilter.set(c.KEY_PRESSED_A,e.A);this._prefabConvertToFilter.set(c.KEY_PRESSED_B,e.B);this._prefabConvertToFilter.set(c.KEY_PRESSED_C,e.C);this._prefabConvertToFilter.set(c.KEY_PRESSED_D,
e.D);this._prefabConvertToFilter.set(c.KEY_PRESSED_E,e.E);this._prefabConvertToFilter.set(c.KEY_PRESSED_F,e.F);this._prefabConvertToFilter.set(c.KEY_PRESSED_G,e.G);this._prefabConvertToFilter.set(c.KEY_PRESSED_H,e.H);this._prefabConvertToFilter.set(c.KEY_PRESSED_I,e.I);this._prefabConvertToFilter.set(c.KEY_PRESSED_J,e.J);this._prefabConvertToFilter.set(c.KEY_PRESSED_K,e.K);this._prefabConvertToFilter.set(c.KEY_PRESSED_L,e.L);this._prefabConvertToFilter.set(c.KEY_PRESSED_M,e.M);this._prefabConvertToFilter.set(c.KEY_PRESSED_N,
e.N);this._prefabConvertToFilter.set(c.KEY_PRESSED_O,e.O);this._prefabConvertToFilter.set(c.KEY_PRESSED_P,e.P);this._prefabConvertToFilter.set(c.KEY_PRESSED_Q,e.Q);this._prefabConvertToFilter.set(c.KEY_PRESSED_R,e.R);this._prefabConvertToFilter.set(c.KEY_PRESSED_S,e.S);this._prefabConvertToFilter.set(c.KEY_PRESSED_T,e.T);this._prefabConvertToFilter.set(c.KEY_PRESSED_U,e.U);this._prefabConvertToFilter.set(c.KEY_PRESSED_V,e.V);this._prefabConvertToFilter.set(c.KEY_PRESSED_W,e.W);this._prefabConvertToFilter.set(c.KEY_PRESSED_X,
e.X);this._prefabConvertToFilter.set(c.KEY_PRESSED_Y,e.Y);this._prefabConvertToFilter.set(c.KEY_PRESSED_Z,e.Z);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_0,e.Number0);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_1,e.Number1);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_2,e.Number2);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_3,e.Number3);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_4,e.Number4);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_5,e.Number5);
this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_6,e.Number6);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_7,e.Number7);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_8,e.Number8);this._prefabConvertToFilter.set(c.KEY_PRESSED_NUMBER_9,e.Number9);this._prefabConvertToFilter.set(c.KEY_PRESSED_EQUALS,e.Equals);this._prefabConvertToFilter.set(c.KEY_PRESSED_SLASH,e.Slash);this._prefabConvertToFilter.set(c.KEY_PRESSED_BACKSLASH,e.Backslash);this._prefabConvertToFilter.set(c.KEY_PRESSED_LEFTBRACKET,
e.LeftBracket);this._prefabConvertToFilter.set(c.KEY_PRESSED_RIGHTBRACKET,e.RightBracket);this._prefabConvertToFilter.set(c.KEY_PRESSED_BACKQUOTE,e.Backquote);this._prefabConvertToFilter.set(c.KEY_PRESSED_COMMA,e.Comma);this._prefabConvertToFilter.set(c.KEY_PRESSED_COMMAND,e.Command);this._prefabConvertToFilter.set(c.KEY_PRESSED_MINUS,e.Minus);this._prefabConvertToFilter.set(c.KEY_PRESSED_PERIOD,e.Period);this._prefabConvertToFilter.set(c.KEY_PRESSED_QUOTE,e.Quote);this._prefabConvertToFilter.set(c.KEY_PRESSED_SEMICOLON,
e.Semicolon);this._prefabConvertToFilter.set(c.KEY_PRESSED_ANDROIDMENU,e.Menu);this._prefabConvertToFilter.set(c.KEY_PRESSED_ANDROIDSEARCH,e.Search);this._prefabConvertToFilter.set(c.KEY_PRESSED_UNKNOWN,e.Unknown);this._prefabConvertToFilter.set(c.KEY_RELEASED_ALT,e.Alt);this._prefabConvertToFilter.set(c.KEY_RELEASED_BACKSPACE,e.Backspace);this._prefabConvertToFilter.set(c.KEY_RELEASED_CAPS_LOCK,e.CapsLock);this._prefabConvertToFilter.set(c.KEY_RELEASED_CONTROL,e.Control);this._prefabConvertToFilter.set(c.KEY_RELEASED_DELETE,
e.Delete);this._prefabConvertToFilter.set(c.KEY_RELEASED_DOWN,e.Down);this._prefabConvertToFilter.set(c.KEY_RELEASED_END,e.End);this._prefabConvertToFilter.set(c.KEY_RELEASED_ENTER,e.Enter);this._prefabConvertToFilter.set(c.KEY_RELEASED_ESCAPE,e.Escape);this._prefabConvertToFilter.set(c.KEY_RELEASED_F1,e.F1);this._prefabConvertToFilter.set(c.KEY_RELEASED_F10,e.F10);this._prefabConvertToFilter.set(c.KEY_RELEASED_F11,e.F11);this._prefabConvertToFilter.set(c.KEY_RELEASED_F12,e.F12);this._prefabConvertToFilter.set(c.KEY_RELEASED_F13,
e.F13);this._prefabConvertToFilter.set(c.KEY_RELEASED_F14,e.F14);this._prefabConvertToFilter.set(c.KEY_RELEASED_F15,e.F15);this._prefabConvertToFilter.set(c.KEY_RELEASED_F2,e.F2);this._prefabConvertToFilter.set(c.KEY_RELEASED_F3,e.F3);this._prefabConvertToFilter.set(c.KEY_RELEASED_F4,e.F4);this._prefabConvertToFilter.set(c.KEY_RELEASED_F5,e.F5);this._prefabConvertToFilter.set(c.KEY_RELEASED_F6,e.F6);this._prefabConvertToFilter.set(c.KEY_RELEASED_F7,e.F7);this._prefabConvertToFilter.set(c.KEY_RELEASED_F8,
e.F8);this._prefabConvertToFilter.set(c.KEY_RELEASED_F9,e.F9);this._prefabConvertToFilter.set(c.KEY_RELEASED_HOME,e.Home);this._prefabConvertToFilter.set(c.KEY_RELEASED_INSERT,e.Insert);this._prefabConvertToFilter.set(c.KEY_RELEASED_LEFT,e.Left);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_0,e.Numpad0);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_1,e.Numpad1);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_2,e.Numpad2);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_3,
e.Numpad3);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_4,e.Numpad4);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_5,e.Numpad5);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_6,e.Numpad6);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_7,e.Numpad7);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_8,e.Numpad8);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_9,e.Numpad9);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_ADD,e.NumpadAdd);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_DECIMAL,
e.NumpadDecimal);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_DIVIDE,e.NumpadDivide);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_ENTER,e.NumpadEnter);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_MULTIPLY,e.NumpadMultiply);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMPAD_SUBTRACT,e.NumpadSubtract);this._prefabConvertToFilter.set(c.KEY_RELEASED_PAGE_DOWN,e.PageDown);this._prefabConvertToFilter.set(c.KEY_RELEASED_PAGE_UP,e.PageUp);this._prefabConvertToFilter.set(c.KEY_RELEASED_RIGHT,
e.Right);this._prefabConvertToFilter.set(c.KEY_RELEASED_SHIFT,e.Shift);this._prefabConvertToFilter.set(c.KEY_RELEASED_SPACE,e.Space);this._prefabConvertToFilter.set(c.KEY_RELEASED_TAB,e.Tab);this._prefabConvertToFilter.set(c.KEY_RELEASED_UP,e.Up);this._prefabConvertToFilter.set(c.KEY_RELEASED_A,e.A);this._prefabConvertToFilter.set(c.KEY_RELEASED_B,e.B);this._prefabConvertToFilter.set(c.KEY_RELEASED_C,e.C);this._prefabConvertToFilter.set(c.KEY_RELEASED_D,e.D);this._prefabConvertToFilter.set(c.KEY_RELEASED_E,
e.E);this._prefabConvertToFilter.set(c.KEY_RELEASED_F,e.F);this._prefabConvertToFilter.set(c.KEY_RELEASED_G,e.G);this._prefabConvertToFilter.set(c.KEY_RELEASED_H,e.H);this._prefabConvertToFilter.set(c.KEY_RELEASED_I,e.I);this._prefabConvertToFilter.set(c.KEY_RELEASED_J,e.J);this._prefabConvertToFilter.set(c.KEY_RELEASED_K,e.K);this._prefabConvertToFilter.set(c.KEY_RELEASED_L,e.L);this._prefabConvertToFilter.set(c.KEY_RELEASED_M,e.M);this._prefabConvertToFilter.set(c.KEY_RELEASED_N,e.N);this._prefabConvertToFilter.set(c.KEY_RELEASED_O,
e.O);this._prefabConvertToFilter.set(c.KEY_RELEASED_P,e.P);this._prefabConvertToFilter.set(c.KEY_RELEASED_Q,e.Q);this._prefabConvertToFilter.set(c.KEY_RELEASED_R,e.R);this._prefabConvertToFilter.set(c.KEY_RELEASED_S,e.S);this._prefabConvertToFilter.set(c.KEY_RELEASED_T,e.T);this._prefabConvertToFilter.set(c.KEY_RELEASED_U,e.U);this._prefabConvertToFilter.set(c.KEY_RELEASED_V,e.V);this._prefabConvertToFilter.set(c.KEY_RELEASED_W,e.W);this._prefabConvertToFilter.set(c.KEY_RELEASED_X,e.X);this._prefabConvertToFilter.set(c.KEY_RELEASED_Y,
e.Y);this._prefabConvertToFilter.set(c.KEY_RELEASED_Z,e.Z);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_0,e.Number0);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_1,e.Number1);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_2,e.Number2);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_3,e.Number3);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_4,e.Number4);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_5,e.Number5);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_6,
e.Number6);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_7,e.Number7);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_8,e.Number8);this._prefabConvertToFilter.set(c.KEY_RELEASED_NUMBER_9,e.Number9);this._prefabConvertToFilter.set(c.KEY_RELEASED_EQUALS,e.Equals);this._prefabConvertToFilter.set(c.KEY_RELEASED_SLASH,e.Slash);this._prefabConvertToFilter.set(c.KEY_RELEASED_BACKSLASH,e.Backslash);this._prefabConvertToFilter.set(c.KEY_RELEASED_LEFTBRACKET,e.LeftBracket);this._prefabConvertToFilter.set(c.KEY_RELEASED_RIGHTBRACKET,
e.RightBracket);this._prefabConvertToFilter.set(c.KEY_RELEASED_BACKQUOTE,e.Backquote);this._prefabConvertToFilter.set(c.KEY_RELEASED_COMMA,e.Comma);this._prefabConvertToFilter.set(c.KEY_RELEASED_COMMAND,e.Command);this._prefabConvertToFilter.set(c.KEY_RELEASED_MINUS,e.Minus);this._prefabConvertToFilter.set(c.KEY_RELEASED_PERIOD,e.Period);this._prefabConvertToFilter.set(c.KEY_RELEASED_QUOTE,e.Quote);this._prefabConvertToFilter.set(c.KEY_RELEASED_SEMICOLON,e.Semicolon);this._prefabConvertToFilter.set(c.KEY_RELEASED_ANDROIDMENU,
e.Menu);this._prefabConvertToFilter.set(c.KEY_RELEASED_ANDROIDSEARCH,e.Search);this._prefabConvertToFilter.set(c.KEY_RELEASED_UNKNOWN,e.Unknown)},__class__:cg});var eh=function(){this._init()};h["tools.spark.sliced.services.std.input.core.Input"]=eh;eh.__name__=!0;eh.__interfaces__=[Rf];eh.__super__=Ua;eh.prototype=t(Ua.prototype,{_init:function(){this.keyboard=new dg;this.pointer=new fh},update:function(){this.keyboard.update();this.pointer.update()},__class__:eh});var ek=function(){};h["tools.spark.sliced.services.std.input.devices.interfaces.IInputDevice"]=
ek;ek.__name__=!0;var dg=function(){this._init()};h["tools.spark.sliced.services.std.input.devices.core.KeyboardDevice"]=dg;dg.__name__=!0;dg.__interfaces__=[ek];dg.prototype={_init:function(){this._keysDown=[];this._keysUp=[];this._keysJustPressed=new ua;this._keysJustReleased=new ua;W._platform.getKeyboard().down.connect(x(this,this._onKeyDown));W._platform.getKeyboard().up.connect(x(this,this._onKeyUp))},_onKeyDown:function(a){this._keysDown.push(a.key)},_onKeyUp:function(a){this._keysUp.push(a.key)},
update:function(){this._keysJustPressed=new ua;for(this._keysJustReleased=new ua;0<this._keysDown.length;){var a=this._keysDown.pop();this._keysJustPressed.set(a,!0);!0;K.event.raiseEvent(k.KEY_PRESSED,a)}for(;0<this._keysUp.length;)a=this._keysUp.pop(),this._keysJustReleased.set(a,!0),!0,K.event.raiseEvent(k.KEY_RELEASED,a)},registerTrigger:function(){},isKeyDown:function(a){return W._platform.getKeyboard().isDown(a)},isKeyPressed:function(a){return this._keysJustPressed.exists(a)},isKeyReleased:function(a){return this._keysJustReleased.exists(a)},
__class__:dg};var fh=function(){this._init()};h["tools.spark.sliced.services.std.input.devices.core.PointerDevice"]=fh;fh.__name__=!0;fh.__interfaces__=[ek];fh.prototype={_init:function(){this._registeredTriggers=new ua},update:function(){this._oldX=this.currentX;this._oldY=this.currentY;this.currentX=W._platform.getPointer().get_x();this.currentY=W._platform.getPointer().get_y()},distX:function(){return this.currentX-this._oldX},distY:function(){return this.currentY-this._oldY},isDown:function(){return W._platform.getPointer().isDown()},
_setTrigger:function(a,b){if(null==this._registeredTriggers.get(a)){var d=new za;this._registeredTriggers.set(a,d);d}this._registeredTriggers.get(a).set(b,b);b},_getTrigger:function(a,b){return null==this._registeredTriggers.get(a)?null:this._registeredTriggers.get(a).get(b)},registerTrigger:function(a,b){this._setTrigger(a,b)},submitPointerEvent:function(a,b){null!=this._getTrigger(a,b)&&K.event.raiseEvent(a,b)},_onMove:function(){null},__class__:fh};var eg=function(){this._init()};h["tools.spark.sliced.services.std.logic.core.Logic"]=
eg;eg.__name__=!0;eg.__interfaces__=[Rg];eg.__super__=Ua;eg.prototype=t(Ua.prototype,{_init:function(){this.scriptInterpreter=new gh;this.gmlInterpreter=new fg;this.gameFactory=new hh;this.rootGameEntitiesRunning=new D;this.rootGameEntitiesPaused=new D;this._gameEntitiesByName=new D},update:function(){for(var a=this.rootGameEntitiesRunning.iterator();a.hasNext();)a.next().doActions()},startAction:function(a,b){return a.startAction(b)},createAndRun:function(a){var b=this.gameFactory.createGameEntity(a);
this.rootGameEntitiesRunning.set(a,b);b;null},createAndPause:function(a){var b=this.gameFactory.createGameEntity(a);this.rootGameEntitiesPaused.set(a,b);b},getEntityByName:function(a){return this._gameEntitiesByName.get(a)},registerEntityByName:function(a){null!=a.getState("name")&&this._gameEntitiesByName.set(a.getState("name"),a)},__class__:eg});var Xc=function(){};h["tools.spark.sliced.services.std.logic.gde.interfaces.IGameBase"]=Xc;Xc.__name__=!0;Xc.prototype={__class__:Xc};var Xa=function(){};
h["tools.spark.sliced.services.std.logic.gde.core.AGameBase"]=Xa;Xa.__name__=!0;Xa.__interfaces__=[Xc];Xa.prototype={__class__:Xa};var gg=function(){};h["tools.spark.sliced.services.std.logic.gde.interfaces.IGameAction"]=gg;gg.__name__=!0;gg.__interfaces__=[Xc];gg.prototype={__class__:gg};var hg=function(){this._init()};h["tools.spark.sliced.services.std.logic.gde.core.GameAction"]=hg;hg.__name__=!0;hg.__interfaces__=[gg];hg.__super__=Xa;hg.prototype=t(Xa.prototype,{_init:function(){this.scriptSet=
[];this.gameStateSet=new D},addState:function(a){null!=this.gameStateSet.get(a.id)&&null;this.gameStateSet.set(a.id,a);a},doPass:function(){for(var a=0,b=this.scriptSet;a<b.length;){var d=b[a];++a;-1==d?K.logic.gmlInterpreter.run(d,function(a){var b=new D;b.set("me",a.parentEntity);b.set("parent",a.parentEntity.parentEntity);return b}(this)):K.logic.scriptInterpreter.run(d,function(a){var b=new D;b.set("me",a.parentEntity);b.set("parent",a.parentEntity.parentEntity);return b}(this))}},getState:function(a){return null==
this.gameStateSet.get(a)?null:this.gameStateSet.get(a).value},setState:function(a,b){this.gameStateSet.get(a).value=b;return this.gameStateSet.get(a).value},__class__:hg});var hj=function(){};h["tools.spark.sliced.services.std.logic.gde.interfaces.IGameClassInstantiator"]=hj;hj.__name__=!0;hj.prototype={__class__:hj};var ih=function(a,b,d,c){this._xmlNodeTypeToNodeName=a;this._xmlConcurrencyNameToType=b;this._xmlStateNameToType=d;this._xmlEventNameToPrefab=c;this._init()};h["tools.spark.sliced.services.std.logic.gde.core.GameClassInstantiator"]=
ih;ih.__name__=!0;ih.__interfaces__=[hj];ih.prototype={_init:function(){},instantiateEntity:function(a,b){var d=new Ne;d.parentEntity=b;d.gameForm=this.instantiateForm(a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.FORM)).next(),d);if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.STATES)).hasNext())for(var c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.STATES)).next().elements();c.hasNext();){var f=c.next();d.addState(this.instantiateState(f,d))}if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.ACTIONS)).hasNext())for(c=
a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.ACTIONS)).next().elements();c.hasNext();)f=this.instantiateAction(c.next(),d),d.addAction(f);if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.TRIGGERS)).hasNext())for(c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.TRIGGERS)).next().elements();c.hasNext();)f=this.instantiateTrigger(c.next(),d),K.event.addTrigger(f);K.logic.registerEntityByName(d);K.event.raiseEvent(k.CREATED,d);return d},instantiateForm:function(a,b){var d=new Re;d.parentEntity=
b;if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.STATES)).hasNext())for(var c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.STATES)).next().elements();c.hasNext();){var f=c.next();d.addState(this.instantiateState(f,b))}d.gameSpace=this.instantiateSpace(a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.SPACE)).next(),b);return d},instantiateSpace:function(a,b){var d=new ig;d.parentEntity=b;if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.ENTITIES)).hasNext())for(var c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.ENTITIES)).next().elements();c.hasNext();){var f=
c.next();d.gameEntitySet.push(this.instantiateEntity(f,b))}return d},instantiateState:function(a,b){var d=new Se;d.parentEntity=b;d.id=a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.ID)).next().firstChild().get_nodeValue();var c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.TYPE)).next().firstChild().get_nodeValue();d.type=this._xmlStateNameToType.get(c);c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.VALUE)).next().firstChild().get_nodeValue();switch(d.type[1]){case 3:d.value="true"==
c||"True"==c||"t"==c||"T"==c;break;case 2:d.value=o.parseFloat(c);break;case 1:d.value=o.parseInt(c);break;case 4:d.value=c;break;case 0:d.value=null}return d},instantiateAction:function(a,b){var d=new hg;d.parentEntity=b;d.id=a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.ID)).next().firstChild().get_nodeValue();var c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.CONCURRENCY)).next().firstChild().get_nodeValue();d.concurrency=this._xmlConcurrencyNameToType.get(c);for(c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.SCRIPTS)).next().elements();c.hasNext();){var f=
c.next();f.get_nodeName()==this._xmlNodeTypeToNodeName.get(j.SCRIPT)?d.scriptSet.push(K.logic.scriptInterpreter.hash(f.firstChild().get_nodeValue())):d.scriptSet.push(K.logic.gmlInterpreter.hash(f.firstChild().get_nodeValue()))}if(a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.STATES)).hasNext())for(c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.STATES)).next().elements();c.hasNext();)f=c.next(),d.addState(this.instantiateState(f,b));return d},instantiateTrigger:function(a,b){var d=new jg;
d.parentEntity=b;var c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.EVENT)).next().firstChild().get_nodeValue();d.eventPrefab=this._xmlEventNameToPrefab.get(c);for(c=a.elementsNamed(this._xmlNodeTypeToNodeName.get(j.SCRIPTS)).next().elements();c.hasNext();){var f=c.next();f.get_nodeName()==this._xmlNodeTypeToNodeName.get(j.SCRIPT)?d.scriptSet.push(K.logic.scriptInterpreter.hash(f.firstChild().get_nodeValue())):d.scriptSet.push(K.logic.gmlInterpreter.hash(f.firstChild().get_nodeValue()))}return d},
__class__:ih};var ij=function(){};h["tools.spark.sliced.services.std.logic.gde.interfaces.IGameClassParser"]=ij;ij.__name__=!0;ij.prototype={__class__:ij};var jh=function(){this._init()};h["tools.spark.sliced.services.std.logic.gde.core.GameClassParser"]=jh;jh.__name__=!0;jh.__interfaces__=[ij];jh.prototype={_init:function(){this._initNodeNamesMap();this._initNodeTypesMap();this._initGameTypesMap();this._initNodeToGameMap();this._initFileExtensionsMap();this._initExtendableNodesMap();this._initMergableNodesMap();
this._initTargetMergableNodesMap();this._initArrayNodesMap();this._initConcurrencyTypeToNameMap();this._initConcurrencyNameToTypeMap();this._initStateTypeToNameMap();this._initStateNameToTypeMap();this._initEventPrefabToNameMap();this._initEventNameToPrefabMap();this._gameClassValidator=new kh(this._xmlNodeTypeToNodeName,this._xmlConcurrencyTypeToName,this._xmlStateTypeToName,this._xmlEventPrefabToName);this._gameClassInstantiator=new ih(this._xmlNodeTypeToNodeName,this._xmlConcurrencyNameToType,
this._xmlStateNameToType,this._xmlEventNameToPrefab)},_initNodeNamesMap:function(){this._xmlNodeTypeToNodeName=new ua;this._xmlNodeTypeToNodeName.set(j.ACTION,"Action");"Action";this._xmlNodeTypeToNodeName.set(j.ACTIONS,"Actions");"Actions";this._xmlNodeTypeToNodeName.set(j.ENTITIES,"Entities");"Entities";this._xmlNodeTypeToNodeName.set(j.ENTITY,"Entity");"Entity";this._xmlNodeTypeToNodeName.set(j.FORM,"Form");"Form";this._xmlNodeTypeToNodeName.set(j.SCRIPTS,"Scripts");"Scripts";this._xmlNodeTypeToNodeName.set(j.SCRIPT,
"Script");"Script";this._xmlNodeTypeToNodeName.set(j.GML,"Gml");"Gml";this._xmlNodeTypeToNodeName.set(j.TRIGGERS,"Triggers");"Triggers";this._xmlNodeTypeToNodeName.set(j.TRIGGER,"Trigger");"Trigger";this._xmlNodeTypeToNodeName.set(j.EVENT,"Event");"Event";this._xmlNodeTypeToNodeName.set(j.CONCURRENCY,"Concurrency");"Concurrency";this._xmlNodeTypeToNodeName.set(j.ID,"Id");"Id";this._xmlNodeTypeToNodeName.set(j.SPACE,"Space");"Space";this._xmlNodeTypeToNodeName.set(j.STATE,"State");"State";this._xmlNodeTypeToNodeName.set(j.STATES,
"States");"States";this._xmlNodeTypeToNodeName.set(j.TYPE,"Type");"Type";this._xmlNodeTypeToNodeName.set(j.VALUE,"Value");"Value";this._xmlNodeTypeToNodeName.set(j.EXTENDS,"Extends");"Extends"},_initNodeTypesMap:function(){this._xmlNodeNameToNodeType=new D;var a=this._xmlNodeTypeToNodeName.get(j.ACTION),b=j.ACTION;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.ACTIONS);b=j.ACTIONS;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.ENTITIES);b=j.ENTITIES;
this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.ENTITY);b=j.ENTITY;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.FORM);b=j.FORM;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.SCRIPTS);b=j.SCRIPTS;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.SCRIPT);b=j.SCRIPT;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.GML);b=j.GML;this._xmlNodeNameToNodeType.set(a,b);b;
a=this._xmlNodeTypeToNodeName.get(j.TRIGGERS);b=j.TRIGGERS;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.TRIGGER);b=j.TRIGGER;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.EVENT);b=j.EVENT;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.CONCURRENCY);b=j.CONCURRENCY;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.ID);b=j.ID;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.SPACE);
b=j.SPACE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.STATE);b=j.STATE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.STATES);b=j.STATES;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.TYPE);b=j.TYPE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.VALUE);b=j.VALUE;this._xmlNodeNameToNodeType.set(a,b);b;a=this._xmlNodeTypeToNodeName.get(j.EXTENDS);b=j.EXTENDS;this._xmlNodeNameToNodeType.set(a,
b);b},_initGameTypesMap:function(){this._xmlGameTypeToNodeName=new ua;var a=this._xmlNodeTypeToNodeName.get(j.ENTITY);this._xmlGameTypeToNodeName.set(V.ENTITY,a);a;a=this._xmlNodeTypeToNodeName.get(j.STATE);this._xmlGameTypeToNodeName.set(V.STATE,a);a;a=this._xmlNodeTypeToNodeName.get(j.SPACE);this._xmlGameTypeToNodeName.set(V.SPACE,a);a;a=this._xmlNodeTypeToNodeName.get(j.FORM);this._xmlGameTypeToNodeName.set(V.FORM,a);a;a=this._xmlNodeTypeToNodeName.get(j.ACTION);this._xmlGameTypeToNodeName.set(V.ACTION,
a);a;a=this._xmlNodeTypeToNodeName.get(j.TRIGGER);this._xmlGameTypeToNodeName.set(V.TRIGGER,a);a},_initNodeToGameMap:function(){this._xmlNodeTypeToGameType=new ua;var a=V.ENTITY;this._xmlNodeTypeToGameType.set(j.ENTITY,a);a;a=V.STATE;this._xmlNodeTypeToGameType.set(j.STATE,a);a;a=V.SPACE;this._xmlNodeTypeToGameType.set(j.SPACE,a);a;a=V.FORM;this._xmlNodeTypeToGameType.set(j.FORM,a);a;a=V.ACTION;this._xmlNodeTypeToGameType.set(j.ACTION,a);a;a=V.TRIGGER;this._xmlNodeTypeToGameType.set(j.TRIGGER,a);
a},_initFileExtensionsMap:function(){this._xmlGameTypeToFileExtension=new ua;this._xmlGameTypeToFileExtension.set(V.ENTITY,"egc");"egc";this._xmlGameTypeToFileExtension.set(V.STATE,"sgc");"sgc";this._xmlGameTypeToFileExtension.set(V.SPACE,"pgc");"pgc";this._xmlGameTypeToFileExtension.set(V.FORM,"fgc");"fgc";this._xmlGameTypeToFileExtension.set(V.ACTION,"agc");"agc";this._xmlGameTypeToFileExtension.set(V.TRIGGER,"tgc");"tgc"},_initExtendableNodesMap:function(){this._isNodeExtendable=new ua;this._isNodeExtendable.set(j.ACTION,
!0);!0;this._isNodeExtendable.set(j.ACTIONS,!1);!1;this._isNodeExtendable.set(j.ENTITIES,!1);!1;this._isNodeExtendable.set(j.ENTITY,!0);!0;this._isNodeExtendable.set(j.FORM,!0);!0;this._isNodeExtendable.set(j.SCRIPTS,!1);!1;this._isNodeExtendable.set(j.SCRIPT,!1);!1;this._isNodeExtendable.set(j.GML,!1);!1;this._isNodeExtendable.set(j.TRIGGERS,!1);!1;this._isNodeExtendable.set(j.TRIGGER,!0);!0;this._isNodeExtendable.set(j.EVENT,!1);!1;this._isNodeExtendable.set(j.CONCURRENCY,!1);!1;this._isNodeExtendable.set(j.ID,
!1);!1;this._isNodeExtendable.set(j.SPACE,!0);!0;this._isNodeExtendable.set(j.STATE,!0);!0;this._isNodeExtendable.set(j.STATES,!1);!1;this._isNodeExtendable.set(j.TYPE,!1);!1;this._isNodeExtendable.set(j.VALUE,!1);!1;this._isNodeExtendable.set(j.EXTENDS,!1);!1},_initMergableNodesMap:function(){this._isNodeMergable=new ua;this._isNodeMergable.set(j.ACTION,!1);!1;this._isNodeMergable.set(j.ACTIONS,!0);!0;this._isNodeMergable.set(j.ENTITIES,!0);!0;this._isNodeMergable.set(j.ENTITY,!1);!1;this._isNodeMergable.set(j.FORM,
!0);!0;this._isNodeMergable.set(j.SCRIPTS,!0);!0;this._isNodeMergable.set(j.SCRIPT,!1);!1;this._isNodeMergable.set(j.GML,!1);!1;this._isNodeMergable.set(j.TRIGGERS,!0);!0;this._isNodeMergable.set(j.TRIGGER,!1);!1;this._isNodeMergable.set(j.EVENT,!1);!1;this._isNodeMergable.set(j.CONCURRENCY,!1);!1;this._isNodeMergable.set(j.ID,!1);!1;this._isNodeMergable.set(j.SPACE,!0);!0;this._isNodeMergable.set(j.STATE,!1);!1;this._isNodeMergable.set(j.STATES,!0);!0;this._isNodeMergable.set(j.TYPE,!1);!1;this._isNodeMergable.set(j.VALUE,
!1);!1;this._isNodeMergable.set(j.EXTENDS,!1);!1},_initTargetMergableNodesMap:function(){this._isNodeTargetMergable=new ua;this._isNodeTargetMergable.set(j.ACTION,!0);!0;this._isNodeTargetMergable.set(j.ACTIONS,!1);!1;this._isNodeTargetMergable.set(j.ENTITIES,!1);!1;this._isNodeTargetMergable.set(j.ENTITY,!1);!1;this._isNodeTargetMergable.set(j.FORM,!1);!1;this._isNodeTargetMergable.set(j.SCRIPTS,!1);!1;this._isNodeTargetMergable.set(j.SCRIPT,!1);!1;this._isNodeTargetMergable.set(j.GML,!1);!1;this._isNodeTargetMergable.set(j.TRIGGERS,
!1);!1;this._isNodeTargetMergable.set(j.TRIGGER,!1);!1;this._isNodeTargetMergable.set(j.EVENT,!1);!1;this._isNodeTargetMergable.set(j.CONCURRENCY,!1);!1;this._isNodeTargetMergable.set(j.ID,!1);!1;this._isNodeTargetMergable.set(j.SPACE,!1);!1;this._isNodeTargetMergable.set(j.STATE,!0);!0;this._isNodeTargetMergable.set(j.STATES,!1);!1;this._isNodeTargetMergable.set(j.TYPE,!1);!1;this._isNodeTargetMergable.set(j.VALUE,!1);!1;this._isNodeTargetMergable.set(j.EXTENDS,!1);!1},_initArrayNodesMap:function(){this._isNodeArray=
new ua;this._isNodeArray.set(j.ACTION,!1);!1;this._isNodeArray.set(j.ACTIONS,!0);!0;this._isNodeArray.set(j.ENTITIES,!0);!0;this._isNodeArray.set(j.ENTITY,!1);!1;this._isNodeArray.set(j.FORM,!1);!1;this._isNodeArray.set(j.SCRIPTS,!0);!0;this._isNodeArray.set(j.SCRIPT,!1);!1;this._isNodeArray.set(j.GML,!1);!1;this._isNodeArray.set(j.TRIGGERS,!0);!0;this._isNodeArray.set(j.TRIGGER,!1);!1;this._isNodeArray.set(j.EVENT,!1);!1;this._isNodeArray.set(j.CONCURRENCY,!1);!1;this._isNodeArray.set(j.ID,!1);!1;
this._isNodeArray.set(j.SPACE,!1);!1;this._isNodeArray.set(j.STATE,!1);!1;this._isNodeArray.set(j.STATES,!0);!0;this._isNodeArray.set(j.TYPE,!1);!1;this._isNodeArray.set(j.VALUE,!1);!1;this._isNodeArray.set(j.EXTENDS,!0);!0},_initConcurrencyTypeToNameMap:function(){this._xmlConcurrencyTypeToName=new ua;this._xmlConcurrencyTypeToName.set(S.PARALLEL,"Parallel");"Parallel";this._xmlConcurrencyTypeToName.set(S.PERSISTENT,"Persistent");"Persistent";this._xmlConcurrencyTypeToName.set(S.TRANSIENT,"Transient");
"Transient"},_initConcurrencyNameToTypeMap:function(){this._xmlConcurrencyNameToType=new D;var a=this._xmlConcurrencyTypeToName.get(S.PARALLEL),b=S.PARALLEL;this._xmlConcurrencyNameToType.set(a,b);b;a=this._xmlConcurrencyTypeToName.get(S.PERSISTENT);b=S.PERSISTENT;this._xmlConcurrencyNameToType.set(a,b);b;a=this._xmlConcurrencyTypeToName.get(S.TRANSIENT);b=S.TRANSIENT;this._xmlConcurrencyNameToType.set(a,b);b},_initStateTypeToNameMap:function(){this._xmlStateTypeToName=new ua;this._xmlStateTypeToName.set(X.DYNAMIC,
"Dynamic");"Dynamic";this._xmlStateTypeToName.set(X.BOOLEAN,"Boolean");"Boolean";this._xmlStateTypeToName.set(X.DECIMAL,"Decimal");"Decimal";this._xmlStateTypeToName.set(X.INTEGER,"Integer");"Integer";this._xmlStateTypeToName.set(X.TEXT,"Text");"Text"},_initStateNameToTypeMap:function(){this._xmlStateNameToType=new D;var a=this._xmlStateTypeToName.get(X.DYNAMIC),b=X.DYNAMIC;this._xmlStateNameToType.set(a,b);b;a=this._xmlStateTypeToName.get(X.BOOLEAN);b=X.BOOLEAN;this._xmlStateNameToType.set(a,b);
b;a=this._xmlStateTypeToName.get(X.DECIMAL);b=X.DECIMAL;this._xmlStateNameToType.set(a,b);b;a=this._xmlStateTypeToName.get(X.INTEGER);b=X.INTEGER;this._xmlStateNameToType.set(a,b);b;a=this._xmlStateTypeToName.get(X.TEXT);b=X.TEXT;this._xmlStateNameToType.set(a,b);b},_initEventPrefabToNameMap:function(){this._xmlEventPrefabToName=new ua;this._xmlEventPrefabToName.set(c.CREATED,"Created");"Created";this._xmlEventPrefabToName.set(c.UPDATE,"Update");"Update";this._xmlEventPrefabToName.set(c.CHANGED,"Changed");
"Changed";this._xmlEventPrefabToName.set(c.NETWORK_CONNECTED,"NetworkConnected");"NetworkConnected";this._xmlEventPrefabToName.set(c.NETWORK_REQUEST,"NetworkRequest");"NetworkRequest";this._xmlEventPrefabToName.set(c.NETWORK_SERVER_EVENT,"NetworkServerEvent");"NetworkServerEvent";this._xmlEventPrefabToName.set(c.FILETRANSFER_CONNECTED,"FileTransferConnected");"FileTransferConnected";this._xmlEventPrefabToName.set(c.FILETRANSFER_SENDREQUEST,"FileTransferRequest");"FileTransferRequest";this._xmlEventPrefabToName.set(c.MOUSE_LEFT_CLICK,
"MouseLeftClick");"MouseLeftClick";this._xmlEventPrefabToName.set(c.MOUSE_RIGHT_CLICK,"MouseRightClick");"MouseRightClick";this._xmlEventPrefabToName.set(c.MOUSE_LEFT_CLICKED,"MouseLeftClicked");"MouseLeftClicked";this._xmlEventPrefabToName.set(c.MOUSE_RIGHT_CLICKED,"MouseRightClicked");"MouseRightClicked";this._xmlEventPrefabToName.set(c.MOUSE_ENTERED,"MouseEntered");"MouseEntered";this._xmlEventPrefabToName.set(c.MOUSE_MOVED,"MouseMoved");"MouseMoved";this._xmlEventPrefabToName.set(c.MOUSE_LEFT,
"MouseLeft");"MouseLeft";this._xmlEventPrefabToName.set(c.KEY_PRESSED,"KeyPressed");"KeyPressed";this._xmlEventPrefabToName.set(c.KEY_RELEASED,"KeyReleased");"KeyReleased";this._xmlEventPrefabToName.set(c.KEY_PRESSED_ALT,"KeyPressed_Alt");"KeyPressed_Alt";this._xmlEventPrefabToName.set(c.KEY_PRESSED_BACKSPACE,"KeyPressed_Backspace");"KeyPressed_Backspace";this._xmlEventPrefabToName.set(c.KEY_PRESSED_CAPS_LOCK,"KeyPressed_Capslock");"KeyPressed_Capslock";this._xmlEventPrefabToName.set(c.KEY_PRESSED_CONTROL,
"KeyPressed_Control");"KeyPressed_Control";this._xmlEventPrefabToName.set(c.KEY_PRESSED_DELETE,"KeyPressed_Delete");"KeyPressed_Delete";this._xmlEventPrefabToName.set(c.KEY_PRESSED_DOWN,"KeyPressed_Down");"KeyPressed_Down";this._xmlEventPrefabToName.set(c.KEY_PRESSED_END,"KeyPressed_End");"KeyPressed_End";this._xmlEventPrefabToName.set(c.KEY_PRESSED_ENTER,"KeyPressed_Enter");"KeyPressed_Enter";this._xmlEventPrefabToName.set(c.KEY_PRESSED_ESCAPE,"KeyPressed_Escape");"KeyPressed_Escape";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F1,
"KeyPressed_F1");"KeyPressed_F1";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F10,"KeyPressed_F10");"KeyPressed_F10";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F11,"KeyPressed_F11");"KeyPressed_F11";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F12,"KeyPressed_F12");"KeyPressed_F12";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F13,"KeyPressed_F13");"KeyPressed_F13";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F14,"KeyPressed_F14");"KeyPressed_F14";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F15,
"KeyPressed_F15");"KeyPressed_F15";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F2,"KeyPressed_F2");"KeyPressed_F2";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F3,"KeyPressed_F3");"KeyPressed_F3";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F4,"KeyPressed_F4");"KeyPressed_F4";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F5,"KeyPressed_F5");"KeyPressed_F5";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F6,"KeyPressed_F6");"KeyPressed_F6";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F7,"KeyPressed_F7");
"KeyPressed_F7";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F8,"KeyPressed_F8");"KeyPressed_F8";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F9,"KeyPressed_F9");"KeyPressed_F9";this._xmlEventPrefabToName.set(c.KEY_PRESSED_HOME,"KeyPressed_Home");"KeyPressed_Home";this._xmlEventPrefabToName.set(c.KEY_PRESSED_INSERT,"KeyPressed_Insert");"KeyPressed_Insert";this._xmlEventPrefabToName.set(c.KEY_PRESSED_LEFT,"KeyPressed_Left");"KeyPressed_Left";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_0,"KeyPressed_Num0");
"KeyPressed_Num0";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_1,"KeyPressed_Num1");"KeyPressed_Num1";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_2,"KeyPressed_Num2");"KeyPressed_Num2";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_3,"KeyPressed_Num3");"KeyPressed_Num3";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_4,"KeyPressed_Num4");"KeyPressed_Num4";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_5,"KeyPressed_Num5");"KeyPressed_Num5";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_6,
"KeyPressed_Num6");"KeyPressed_Num6";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_7,"KeyPressed_Num7");"KeyPressed_Num7";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_8,"KeyPressed_Num8");"KeyPressed_Num8";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_9,"KeyPressed_Num9");"KeyPressed_Num9";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_ADD,"KeyPressed_Add");"KeyPressed_Add";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_DECIMAL,"KeyPressed_Decimal");"KeyPressed_Decimal";
this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_DIVIDE,"KeyPressed_Divide");"KeyPressed_Divide";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_ENTER,"KeyPressed_Enter");"KeyPressed_Enter";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_MULTIPLY,"KeyPressed_Multiply");"KeyPressed_Multiply";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMPAD_SUBTRACT,"KeyPressed_Subtract");"KeyPressed_Subtract";this._xmlEventPrefabToName.set(c.KEY_PRESSED_PAGE_DOWN,"KeyPressed_Pagedown");"KeyPressed_Pagedown";
this._xmlEventPrefabToName.set(c.KEY_PRESSED_PAGE_UP,"KeyPressed_Pageup");"KeyPressed_Pageup";this._xmlEventPrefabToName.set(c.KEY_PRESSED_RIGHT,"KeyPressed_Right");"KeyPressed_Right";this._xmlEventPrefabToName.set(c.KEY_PRESSED_SHIFT,"KeyPressed_Shift");"KeyPressed_Shift";this._xmlEventPrefabToName.set(c.KEY_PRESSED_SPACE,"KeyPressed_Space");"KeyPressed_Space";this._xmlEventPrefabToName.set(c.KEY_PRESSED_TAB,"KeyPressed_Tab");"KeyPressed_Tab";this._xmlEventPrefabToName.set(c.KEY_PRESSED_UP,"KeyPressed_Up");
"KeyPressed_Up";this._xmlEventPrefabToName.set(c.KEY_PRESSED_A,"KeyPressed_A");"KeyPressed_A";this._xmlEventPrefabToName.set(c.KEY_PRESSED_B,"KeyPressed_B");"KeyPressed_B";this._xmlEventPrefabToName.set(c.KEY_PRESSED_C,"KeyPressed_C");"KeyPressed_C";this._xmlEventPrefabToName.set(c.KEY_PRESSED_D,"KeyPressed_D");"KeyPressed_D";this._xmlEventPrefabToName.set(c.KEY_PRESSED_E,"KeyPressed_E");"KeyPressed_E";this._xmlEventPrefabToName.set(c.KEY_PRESSED_F,"KeyPressed_F");"KeyPressed_F";this._xmlEventPrefabToName.set(c.KEY_PRESSED_G,
"KeyPressed_G");"KeyPressed_G";this._xmlEventPrefabToName.set(c.KEY_PRESSED_H,"KeyPressed_H");"KeyPressed_H";this._xmlEventPrefabToName.set(c.KEY_PRESSED_I,"KeyPressed_I");"KeyPressed_I";this._xmlEventPrefabToName.set(c.KEY_PRESSED_J,"KeyPressed_J");"KeyPressed_J";this._xmlEventPrefabToName.set(c.KEY_PRESSED_K,"KeyPressed_K");"KeyPressed_K";this._xmlEventPrefabToName.set(c.KEY_PRESSED_L,"KeyPressed_L");"KeyPressed_L";this._xmlEventPrefabToName.set(c.KEY_PRESSED_M,"KeyPressed_M");"KeyPressed_M";this._xmlEventPrefabToName.set(c.KEY_PRESSED_N,
"KeyPressed_N");"KeyPressed_N";this._xmlEventPrefabToName.set(c.KEY_PRESSED_O,"KeyPressed_O");"KeyPressed_O";this._xmlEventPrefabToName.set(c.KEY_PRESSED_P,"KeyPressed_P");"KeyPressed_P";this._xmlEventPrefabToName.set(c.KEY_PRESSED_Q,"KeyPressed_Q");"KeyPressed_Q";this._xmlEventPrefabToName.set(c.KEY_PRESSED_R,"KeyPressed_R");"KeyPressed_R";this._xmlEventPrefabToName.set(c.KEY_PRESSED_S,"KeyPressed_S");"KeyPressed_S";this._xmlEventPrefabToName.set(c.KEY_PRESSED_T,"KeyPressed_T");"KeyPressed_T";this._xmlEventPrefabToName.set(c.KEY_PRESSED_U,
"KeyPressed_U");"KeyPressed_U";this._xmlEventPrefabToName.set(c.KEY_PRESSED_V,"KeyPressed_V");"KeyPressed_V";this._xmlEventPrefabToName.set(c.KEY_PRESSED_W,"KeyPressed_W");"KeyPressed_W";this._xmlEventPrefabToName.set(c.KEY_PRESSED_X,"KeyPressed_X");"KeyPressed_X";this._xmlEventPrefabToName.set(c.KEY_PRESSED_Y,"KeyPressed_Y");"KeyPressed_Y";this._xmlEventPrefabToName.set(c.KEY_PRESSED_Z,"KeyPressed_Z");"KeyPressed_Z";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_0,"KeyPressed_0");"KeyPressed_0";
this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_1,"KeyPressed_1");"KeyPressed_1";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_2,"KeyPressed_2");"KeyPressed_2";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_3,"KeyPressed_3");"KeyPressed_3";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_4,"KeyPressed_4");"KeyPressed_4";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_5,"KeyPressed_5");"KeyPressed_5";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_6,"KeyPressed_6");"KeyPressed_6";
this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_7,"KeyPressed_7");"KeyPressed_7";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_8,"KeyPressed_8");"KeyPressed_8";this._xmlEventPrefabToName.set(c.KEY_PRESSED_NUMBER_9,"KeyPressed_9");"KeyPressed_9";this._xmlEventPrefabToName.set(c.KEY_PRESSED_EQUALS,"KeyPressed_Equals");"KeyPressed_Equals";this._xmlEventPrefabToName.set(c.KEY_PRESSED_SLASH,"KeyPressed_Slash");"KeyPressed_Slash";this._xmlEventPrefabToName.set(c.KEY_PRESSED_BACKSLASH,"KeyPressed_Backslash");
"KeyPressed_Backslash";this._xmlEventPrefabToName.set(c.KEY_PRESSED_LEFTBRACKET,"KeyPressed_LeftBracket");"KeyPressed_LeftBracket";this._xmlEventPrefabToName.set(c.KEY_PRESSED_RIGHTBRACKET,"KeyPressed_RightBracket");"KeyPressed_RightBracket";this._xmlEventPrefabToName.set(c.KEY_PRESSED_BACKQUOTE,"KeyPressed_Backquote");"KeyPressed_Backquote";this._xmlEventPrefabToName.set(c.KEY_PRESSED_COMMA,"KeyPressed_Comma");"KeyPressed_Comma";this._xmlEventPrefabToName.set(c.KEY_PRESSED_COMMAND,"KeyPressed_Command");
"KeyPressed_Command";this._xmlEventPrefabToName.set(c.KEY_PRESSED_MINUS,"KeyPressed_Minus");"KeyPressed_Minus";this._xmlEventPrefabToName.set(c.KEY_PRESSED_PERIOD,"KeyPressed_Period");"KeyPressed_Period";this._xmlEventPrefabToName.set(c.KEY_PRESSED_QUOTE,"KeyPressed_Quote");"KeyPressed_Quote";this._xmlEventPrefabToName.set(c.KEY_PRESSED_SEMICOLON,"KeyPressed_Semicolon");"KeyPressed_Semicolon";this._xmlEventPrefabToName.set(c.KEY_PRESSED_ANDROIDMENU,"KeyPressed_AndroidMenu");"KeyPressed_AndroidMenu";
this._xmlEventPrefabToName.set(c.KEY_PRESSED_ANDROIDSEARCH,"KeyPressed_AndroidSearch");"KeyPressed_AndroidSearch";this._xmlEventPrefabToName.set(c.KEY_PRESSED_UNKNOWN,"KeyPressed_Unknown");"KeyPressed_Unknown";this._xmlEventPrefabToName.set(c.KEY_RELEASED_ALT,"KeyReleased_Alt");"KeyReleased_Alt";this._xmlEventPrefabToName.set(c.KEY_RELEASED_BACKSPACE,"KeyReleased_Backspace");"KeyReleased_Backspace";this._xmlEventPrefabToName.set(c.KEY_RELEASED_CAPS_LOCK,"KeyReleased_Capslock");"KeyReleased_Capslock";
this._xmlEventPrefabToName.set(c.KEY_RELEASED_CONTROL,"KeyReleased_Control");"KeyReleased_Control";this._xmlEventPrefabToName.set(c.KEY_RELEASED_DELETE,"KeyReleased_Delete");"KeyReleased_Delete";this._xmlEventPrefabToName.set(c.KEY_RELEASED_DOWN,"KeyReleased_Down");"KeyReleased_Down";this._xmlEventPrefabToName.set(c.KEY_RELEASED_END,"KeyReleased_End");"KeyReleased_End";this._xmlEventPrefabToName.set(c.KEY_RELEASED_ENTER,"KeyReleased_Enter");"KeyReleased_Enter";this._xmlEventPrefabToName.set(c.KEY_RELEASED_ESCAPE,
"KeyReleased_Escape");"KeyReleased_Escape";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F1,"KeyReleased_F1");"KeyReleased_F1";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F10,"KeyReleased_F10");"KeyReleased_F10";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F11,"KeyReleased_F11");"KeyReleased_F11";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F12,"KeyReleased_F12");"KeyReleased_F12";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F13,"KeyReleased_F13");"KeyReleased_F13";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F14,
"KeyReleased_F14");"KeyReleased_F14";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F15,"KeyReleased_F15");"KeyReleased_F15";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F2,"KeyReleased_F2");"KeyReleased_F2";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F3,"KeyReleased_F3");"KeyReleased_F3";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F4,"KeyReleased_F4");"KeyReleased_F4";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F5,"KeyReleased_F5");"KeyReleased_F5";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F6,
"KeyReleased_F6");"KeyReleased_F6";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F7,"KeyReleased_F7");"KeyReleased_F7";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F8,"KeyReleased_F8");"KeyReleased_F8";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F9,"KeyReleased_F9");"KeyReleased_F9";this._xmlEventPrefabToName.set(c.KEY_RELEASED_HOME,"KeyReleased_Home");"KeyReleased_Home";this._xmlEventPrefabToName.set(c.KEY_RELEASED_INSERT,"KeyReleased_Insert");"KeyReleased_Insert";this._xmlEventPrefabToName.set(c.KEY_RELEASED_LEFT,
"KeyReleased_Left");"KeyReleased_Left";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_0,"KeyReleased_Num0");"KeyReleased_Num0";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_1,"KeyReleased_Num1");"KeyReleased_Num1";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_2,"KeyReleased_Num2");"KeyReleased_Num2";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_3,"KeyReleased_Num3");"KeyReleased_Num3";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_4,"KeyReleased_Num4");"KeyReleased_Num4";
this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_5,"KeyReleased_Num5");"KeyReleased_Num5";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_6,"KeyReleased_Num6");"KeyReleased_Num6";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_7,"KeyReleased_Num7");"KeyReleased_Num7";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_8,"KeyReleased_Num8");"KeyReleased_Num8";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_9,"KeyReleased_Num9");"KeyReleased_Num9";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_ADD,
"KeyReleased_Add");"KeyReleased_Add";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_DECIMAL,"KeyReleased_Decimal");"KeyReleased_Decimal";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_DIVIDE,"KeyReleased_Divide");"KeyReleased_Divide";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_ENTER,"KeyReleased_Enter");"KeyReleased_Enter";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_MULTIPLY,"KeyReleased_Multiply");"KeyReleased_Multiply";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMPAD_SUBTRACT,
"KeyReleased_Subtract");"KeyReleased_Subtract";this._xmlEventPrefabToName.set(c.KEY_RELEASED_PAGE_DOWN,"KeyReleased_Pagedown");"KeyReleased_Pagedown";this._xmlEventPrefabToName.set(c.KEY_RELEASED_PAGE_UP,"KeyReleased_Pageup");"KeyReleased_Pageup";this._xmlEventPrefabToName.set(c.KEY_RELEASED_RIGHT,"KeyReleased_Right");"KeyReleased_Right";this._xmlEventPrefabToName.set(c.KEY_RELEASED_SHIFT,"KeyReleased_Shift");"KeyReleased_Shift";this._xmlEventPrefabToName.set(c.KEY_RELEASED_SPACE,"KeyReleased_Space");
"KeyReleased_Space";this._xmlEventPrefabToName.set(c.KEY_RELEASED_TAB,"KeyReleased_Tab");"KeyReleased_Tab";this._xmlEventPrefabToName.set(c.KEY_RELEASED_UP,"KeyReleased_Up");"KeyReleased_Up";this._xmlEventPrefabToName.set(c.KEY_RELEASED_A,"KeyReleased_A");"KeyReleased_A";this._xmlEventPrefabToName.set(c.KEY_RELEASED_B,"KeyReleased_B");"KeyReleased_B";this._xmlEventPrefabToName.set(c.KEY_RELEASED_C,"KeyReleased_C");"KeyReleased_C";this._xmlEventPrefabToName.set(c.KEY_RELEASED_D,"KeyReleased_D");"KeyReleased_D";
this._xmlEventPrefabToName.set(c.KEY_RELEASED_E,"KeyReleased_E");"KeyReleased_E";this._xmlEventPrefabToName.set(c.KEY_RELEASED_F,"KeyReleased_F");"KeyReleased_F";this._xmlEventPrefabToName.set(c.KEY_RELEASED_G,"KeyReleased_G");"KeyReleased_G";this._xmlEventPrefabToName.set(c.KEY_RELEASED_H,"KeyReleased_H");"KeyReleased_H";this._xmlEventPrefabToName.set(c.KEY_RELEASED_I,"KeyReleased_I");"KeyReleased_I";this._xmlEventPrefabToName.set(c.KEY_RELEASED_J,"KeyReleased_J");"KeyReleased_J";this._xmlEventPrefabToName.set(c.KEY_RELEASED_K,
"KeyReleased_K");"KeyReleased_K";this._xmlEventPrefabToName.set(c.KEY_RELEASED_L,"KeyReleased_L");"KeyReleased_L";this._xmlEventPrefabToName.set(c.KEY_RELEASED_M,"KeyReleased_M");"KeyReleased_M";this._xmlEventPrefabToName.set(c.KEY_RELEASED_N,"KeyReleased_N");"KeyReleased_N";this._xmlEventPrefabToName.set(c.KEY_RELEASED_O,"KeyReleased_O");"KeyReleased_O";this._xmlEventPrefabToName.set(c.KEY_RELEASED_P,"KeyReleased_P");"KeyReleased_P";this._xmlEventPrefabToName.set(c.KEY_RELEASED_Q,"KeyReleased_Q");
"KeyReleased_Q";this._xmlEventPrefabToName.set(c.KEY_RELEASED_R,"KeyReleased_R");"KeyReleased_R";this._xmlEventPrefabToName.set(c.KEY_RELEASED_S,"KeyReleased_S");"KeyReleased_S";this._xmlEventPrefabToName.set(c.KEY_RELEASED_T,"KeyReleased_T");"KeyReleased_T";this._xmlEventPrefabToName.set(c.KEY_RELEASED_U,"KeyReleased_U");"KeyReleased_U";this._xmlEventPrefabToName.set(c.KEY_RELEASED_V,"KeyReleased_V");"KeyReleased_V";this._xmlEventPrefabToName.set(c.KEY_RELEASED_W,"KeyReleased_W");"KeyReleased_W";
this._xmlEventPrefabToName.set(c.KEY_RELEASED_X,"KeyReleased_X");"KeyReleased_X";this._xmlEventPrefabToName.set(c.KEY_RELEASED_Y,"KeyReleased_Y");"KeyReleased_Y";this._xmlEventPrefabToName.set(c.KEY_RELEASED_Z,"KeyReleased_Z");"KeyReleased_Z";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_0,"KeyReleased_0");"KeyReleased_0";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_1,"KeyReleased_1");"KeyReleased_1";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_2,"KeyReleased_2");"KeyReleased_2";
this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_3,"KeyReleased_3");"KeyReleased_3";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_4,"KeyReleased_4");"KeyReleased_4";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_5,"KeyReleased_5");"KeyReleased_5";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_6,"KeyReleased_6");"KeyReleased_6";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_7,"KeyReleased_7");"KeyReleased_7";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_8,"KeyReleased_8");
"KeyReleased_8";this._xmlEventPrefabToName.set(c.KEY_RELEASED_NUMBER_9,"KeyReleased_9");"KeyReleased_9";this._xmlEventPrefabToName.set(c.KEY_RELEASED_EQUALS,"KeyReleased_Equals");"KeyReleased_Equals";this._xmlEventPrefabToName.set(c.KEY_RELEASED_SLASH,"KeyReleased_Slash");"KeyReleased_Slash";this._xmlEventPrefabToName.set(c.KEY_RELEASED_BACKSLASH,"KeyReleased_Backslash");"KeyReleased_Backslash";this._xmlEventPrefabToName.set(c.KEY_RELEASED_LEFTBRACKET,"KeyReleased_LeftBracket");"KeyReleased_LeftBracket";
this._xmlEventPrefabToName.set(c.KEY_RELEASED_RIGHTBRACKET,"KeyReleased_RightBracket");"KeyReleased_RightBracket";this._xmlEventPrefabToName.set(c.KEY_RELEASED_BACKQUOTE,"KeyReleased_Backquote");"KeyReleased_Backquote";this._xmlEventPrefabToName.set(c.KEY_RELEASED_COMMA,"KeyReleased_Comma");"KeyReleased_Comma";this._xmlEventPrefabToName.set(c.KEY_RELEASED_COMMAND,"KeyReleased_Command");"KeyReleased_Command";this._xmlEventPrefabToName.set(c.KEY_RELEASED_MINUS,"KeyReleased_Minus");"KeyReleased_Minus";
this._xmlEventPrefabToName.set(c.KEY_RELEASED_PERIOD,"KeyReleased_Period");"KeyReleased_Period";this._xmlEventPrefabToName.set(c.KEY_RELEASED_QUOTE,"KeyReleased_Quote");"KeyReleased_Quote";this._xmlEventPrefabToName.set(c.KEY_RELEASED_SEMICOLON,"KeyReleased_Semicolon");"KeyReleased_Semicolon";this._xmlEventPrefabToName.set(c.KEY_RELEASED_ANDROIDMENU,"KeyReleased_AndroidMenu");"KeyReleased_AndroidMenu";this._xmlEventPrefabToName.set(c.KEY_RELEASED_ANDROIDSEARCH,"KeyReleased_AndroidSearch");"KeyReleased_AndroidSearch";
this._xmlEventPrefabToName.set(c.KEY_RELEASED_UNKNOWN,"KeyReleased_Unknown");"KeyReleased_Unknown"},_initEventNameToPrefabMap:function(){this._xmlEventNameToPrefab=new D;var a=this._xmlEventPrefabToName.get(c.CREATED),b=c.CREATED;this._xmlEventNameToPrefab.set(a,b);b;var d=this._xmlEventPrefabToName.get(c.UPDATE),l=c.UPDATE;this._xmlEventNameToPrefab.set(d,l);l;var f=this._xmlEventPrefabToName.get(c.CHANGED),e=c.CHANGED;this._xmlEventNameToPrefab.set(f,e);e;var i=this._xmlEventPrefabToName.get(c.NETWORK_CONNECTED),
g=c.NETWORK_CONNECTED;this._xmlEventNameToPrefab.set(i,g);g;var h=this._xmlEventPrefabToName.get(c.NETWORK_REQUEST),j=c.NETWORK_REQUEST;this._xmlEventNameToPrefab.set(h,j);j;var k=this._xmlEventPrefabToName.get(c.NETWORK_SERVER_EVENT),m=c.NETWORK_SERVER_EVENT;this._xmlEventNameToPrefab.set(k,m);m;var q=this._xmlEventPrefabToName.get(c.FILETRANSFER_CONNECTED),o=c.FILETRANSFER_CONNECTED;this._xmlEventNameToPrefab.set(q,o);o;var s=this._xmlEventPrefabToName.get(c.FILETRANSFER_SENDREQUEST),r=c.FILETRANSFER_SENDREQUEST;
this._xmlEventNameToPrefab.set(s,r);r;var t=this._xmlEventPrefabToName.get(c.MOUSE_LEFT_CLICK),w=c.MOUSE_LEFT_CLICK;this._xmlEventNameToPrefab.set(t,w);w;var y=this._xmlEventPrefabToName.get(c.MOUSE_RIGHT_CLICK),v=c.MOUSE_RIGHT_CLICK;this._xmlEventNameToPrefab.set(y,v);v;var z=this._xmlEventPrefabToName.get(c.MOUSE_LEFT_CLICKED),x=c.MOUSE_LEFT_CLICKED;this._xmlEventNameToPrefab.set(z,x);x;var G=this._xmlEventPrefabToName.get(c.MOUSE_RIGHT_CLICKED),B=c.MOUSE_RIGHT_CLICKED;this._xmlEventNameToPrefab.set(G,
B);B;var K=this._xmlEventPrefabToName.get(c.MOUSE_ENTERED),C=c.MOUSE_ENTERED;this._xmlEventNameToPrefab.set(K,C);C;var A=this._xmlEventPrefabToName.get(c.MOUSE_MOVED),E=c.MOUSE_MOVED;this._xmlEventNameToPrefab.set(A,E);E;var F=this._xmlEventPrefabToName.get(c.MOUSE_LEFT),I=c.MOUSE_LEFT;this._xmlEventNameToPrefab.set(F,I);I;var P=this._xmlEventPrefabToName.get(c.KEY_PRESSED),J=c.KEY_PRESSED;this._xmlEventNameToPrefab.set(P,J);J;var W=this._xmlEventPrefabToName.get(c.KEY_RELEASED),O=c.KEY_RELEASED;
this._xmlEventNameToPrefab.set(W,O);O;var Y=this._xmlEventPrefabToName.get(c.KEY_PRESSED_ALT),R=c.KEY_PRESSED_ALT;this._xmlEventNameToPrefab.set(Y,R);R;var M=this._xmlEventPrefabToName.get(c.KEY_PRESSED_BACKSPACE),V=c.KEY_PRESSED_BACKSPACE;this._xmlEventNameToPrefab.set(M,V);V;var X=this._xmlEventPrefabToName.get(c.KEY_PRESSED_CAPS_LOCK),Z=c.KEY_PRESSED_CAPS_LOCK;this._xmlEventNameToPrefab.set(X,Z);Z;var ha=this._xmlEventPrefabToName.get(c.KEY_PRESSED_CONTROL),L=c.KEY_PRESSED_CONTROL;this._xmlEventNameToPrefab.set(ha,
L);L;var ea=this._xmlEventPrefabToName.get(c.KEY_PRESSED_DELETE),fa=c.KEY_PRESSED_DELETE;this._xmlEventNameToPrefab.set(ea,fa);fa;var N=this._xmlEventPrefabToName.get(c.KEY_PRESSED_DOWN),ca=c.KEY_PRESSED_DOWN;this._xmlEventNameToPrefab.set(N,ca);ca;var ba=this._xmlEventPrefabToName.get(c.KEY_PRESSED_END),da=c.KEY_PRESSED_END;this._xmlEventNameToPrefab.set(ba,da);da;var ja=this._xmlEventPrefabToName.get(c.KEY_PRESSED_ENTER),ka=c.KEY_PRESSED_ENTER;this._xmlEventNameToPrefab.set(ja,ka);ka;var ma=this._xmlEventPrefabToName.get(c.KEY_PRESSED_ESCAPE),
ta=c.KEY_PRESSED_ESCAPE;this._xmlEventNameToPrefab.set(ma,ta);ta;var qa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F1),u=c.KEY_PRESSED_F1;this._xmlEventNameToPrefab.set(qa,u);u;var xa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F10),ua=c.KEY_PRESSED_F10;this._xmlEventNameToPrefab.set(xa,ua);ua;var aa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F11),wa=c.KEY_PRESSED_F11;this._xmlEventNameToPrefab.set(aa,wa);wa;var cb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F12),oa=c.KEY_PRESSED_F12;this._xmlEventNameToPrefab.set(cb,
oa);oa;var Fa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F13),ra=c.KEY_PRESSED_F13;this._xmlEventNameToPrefab.set(Fa,ra);ra;var S=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F14),bh=c.KEY_PRESSED_F14;this._xmlEventNameToPrefab.set(S,bh);bh;var ga=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F15),Pe=c.KEY_PRESSED_F15;this._xmlEventNameToPrefab.set(ga,Pe);Pe;var za=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F2),Qe=c.KEY_PRESSED_F2;this._xmlEventNameToPrefab.set(za,Qe);Qe;var U=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F3),
ia=c.KEY_PRESSED_F3;this._xmlEventNameToPrefab.set(U,ia);ia;var Ja=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F4),pa=c.KEY_PRESSED_F4;this._xmlEventNameToPrefab.set(Ja,pa);pa;var Ca=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F5),Ac=c.KEY_PRESSED_F5;this._xmlEventNameToPrefab.set(Ca,Ac);Ac;var Qa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F6),Ba=c.KEY_PRESSED_F6;this._xmlEventNameToPrefab.set(Qa,Ba);Ba;var ob=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F7),ej=c.KEY_PRESSED_F7;this._xmlEventNameToPrefab.set(ob,
ej);ej;var gb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F8),Ia=c.KEY_PRESSED_F8;this._xmlEventNameToPrefab.set(gb,Ia);Ia;var Pa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F9),Ha=c.KEY_PRESSED_F9;this._xmlEventNameToPrefab.set(Pa,Ha);Ha;var ch=this._xmlEventPrefabToName.get(c.KEY_PRESSED_HOME),Aa=c.KEY_PRESSED_HOME;this._xmlEventNameToPrefab.set(ch,Aa);Aa;var La=this._xmlEventPrefabToName.get(c.KEY_PRESSED_INSERT),fj=c.KEY_PRESSED_INSERT;this._xmlEventNameToPrefab.set(La,fj);fj;var lb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_LEFT),
H=c.KEY_PRESSED_LEFT;this._xmlEventNameToPrefab.set(lb,H);H;var sa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_0),Da=c.KEY_PRESSED_NUMPAD_0;this._xmlEventNameToPrefab.set(sa,Da);Da;var Ea=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_1),Ya=c.KEY_PRESSED_NUMPAD_1;this._xmlEventNameToPrefab.set(Ea,Ya);Ya;var pb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_2),qb=c.KEY_PRESSED_NUMPAD_2;this._xmlEventNameToPrefab.set(pb,qb);qb;var Mc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_3),
Za=c.KEY_PRESSED_NUMPAD_3;this._xmlEventNameToPrefab.set(Mc,Za);Za;var Sa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_4),db=c.KEY_PRESSED_NUMPAD_4;this._xmlEventNameToPrefab.set(Sa,db);db;var Ta=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_5),Ua=c.KEY_PRESSED_NUMPAD_5;this._xmlEventNameToPrefab.set(Ta,Ua);Ua;var Xa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_6),Ra=c.KEY_PRESSED_NUMPAD_6;this._xmlEventNameToPrefab.set(Xa,Ra);Ra;var fb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_7),
gj=c.KEY_PRESSED_NUMPAD_7;this._xmlEventNameToPrefab.set(fb,gj);gj;var Ab=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_8),Ka=c.KEY_PRESSED_NUMPAD_8;this._xmlEventNameToPrefab.set(Ab,Ka);Ka;var Fd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_9),Gd=c.KEY_PRESSED_NUMPAD_9;this._xmlEventNameToPrefab.set(Fd,Gd);Gd;var Sd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_ADD),Bc=c.KEY_PRESSED_NUMPAD_ADD;this._xmlEventNameToPrefab.set(Sd,Bc);Bc;var vb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_DECIMAL),
Wa=c.KEY_PRESSED_NUMPAD_DECIMAL;this._xmlEventNameToPrefab.set(vb,Wa);Wa;var ye=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_DIVIDE),kb=c.KEY_PRESSED_NUMPAD_DIVIDE;this._xmlEventNameToPrefab.set(ye,kb);kb;var ze=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_ENTER),dh=c.KEY_PRESSED_NUMPAD_ENTER;this._xmlEventNameToPrefab.set(ze,dh);dh;var na=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_MULTIPLY),Va=c.KEY_PRESSED_NUMPAD_MULTIPLY;this._xmlEventNameToPrefab.set(na,Va);Va;var Hb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_SUBTRACT),
eb=c.KEY_PRESSED_NUMPAD_SUBTRACT;this._xmlEventNameToPrefab.set(Hb,eb);eb;var ub=this._xmlEventPrefabToName.get(c.KEY_PRESSED_PAGE_DOWN),rb=c.KEY_PRESSED_PAGE_DOWN;this._xmlEventNameToPrefab.set(ub,rb);rb;var Ga=this._xmlEventPrefabToName.get(c.KEY_PRESSED_PAGE_UP),wb=c.KEY_PRESSED_PAGE_UP;this._xmlEventNameToPrefab.set(Ga,wb);wb;var mb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_RIGHT),hb=c.KEY_PRESSED_RIGHT;this._xmlEventNameToPrefab.set(mb,hb);hb;var Cb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_SHIFT),
Eb=c.KEY_PRESSED_SHIFT;this._xmlEventNameToPrefab.set(Cb,Eb);Eb;var ib=this._xmlEventPrefabToName.get(c.KEY_PRESSED_SPACE),$a=c.KEY_PRESSED_SPACE;this._xmlEventNameToPrefab.set(ib,$a);$a;var ab=this._xmlEventPrefabToName.get(c.KEY_PRESSED_TAB),Gb=c.KEY_PRESSED_TAB;this._xmlEventNameToPrefab.set(ab,Gb);Gb;var bb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_UP),Ib=c.KEY_PRESSED_UP;this._xmlEventNameToPrefab.set(bb,Ib);Ib;var Bb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_A),Lb=c.KEY_PRESSED_A;this._xmlEventNameToPrefab.set(Bb,
Lb);Lb;var Cc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_B),Nb=c.KEY_PRESSED_B;this._xmlEventNameToPrefab.set(Cc,Nb);Nb;var dc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_C),Vb=c.KEY_PRESSED_C;this._xmlEventNameToPrefab.set(dc,Vb);Vb;var nb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_D),xb=c.KEY_PRESSED_D;this._xmlEventNameToPrefab.set(nb,xb);xb;var Dc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_E),yb=c.KEY_PRESSED_E;this._xmlEventNameToPrefab.set(Dc,yb);yb;var Oa=this._xmlEventPrefabToName.get(c.KEY_PRESSED_F),
sb=c.KEY_PRESSED_F;this._xmlEventNameToPrefab.set(Oa,sb);sb;var jb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_G),cc=c.KEY_PRESSED_G;this._xmlEventNameToPrefab.set(jb,cc);cc;var Kb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_H),Ob=c.KEY_PRESSED_H;this._xmlEventNameToPrefab.set(Kb,Ob);Ob;var Pb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_I),va=c.KEY_PRESSED_I;this._xmlEventNameToPrefab.set(Pb,va);va;var Na=this._xmlEventPrefabToName.get(c.KEY_PRESSED_J),mc=c.KEY_PRESSED_J;this._xmlEventNameToPrefab.set(Na,
mc);mc;var $b=this._xmlEventPrefabToName.get(c.KEY_PRESSED_K),pc=c.KEY_PRESSED_K;this._xmlEventNameToPrefab.set($b,pc);pc;var bc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_L),ya=c.KEY_PRESSED_L;this._xmlEventNameToPrefab.set(bc,ya);ya;var Fc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_M),la=c.KEY_PRESSED_M;this._xmlEventNameToPrefab.set(Fc,la);la;var qc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_N),zb=c.KEY_PRESSED_N;this._xmlEventNameToPrefab.set(qc,zb);zb;var ck=this._xmlEventPrefabToName.get(c.KEY_PRESSED_O),
Mb=c.KEY_PRESSED_O;this._xmlEventNameToPrefab.set(ck,Mb);Mb;var sc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_P),Qb=c.KEY_PRESSED_P;this._xmlEventNameToPrefab.set(sc,Qb);Qb;var Ic=this._xmlEventPrefabToName.get(c.KEY_PRESSED_Q),Rb=c.KEY_PRESSED_Q;this._xmlEventNameToPrefab.set(Ic,Rb);Rb;var ec=this._xmlEventPrefabToName.get(c.KEY_PRESSED_R),Db=c.KEY_PRESSED_R;this._xmlEventNameToPrefab.set(ec,Db);Db;var fc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_S),Sb=c.KEY_PRESSED_S;this._xmlEventNameToPrefab.set(fc,
Sb);Sb;var gc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_T),wc=c.KEY_PRESSED_T;this._xmlEventNameToPrefab.set(gc,wc);wc;var hc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_U),xc=c.KEY_PRESSED_U;this._xmlEventNameToPrefab.set(hc,xc);xc;var ic=this._xmlEventPrefabToName.get(c.KEY_PRESSED_V),jc=c.KEY_PRESSED_V;this._xmlEventNameToPrefab.set(ic,jc);jc;var kc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_W),lc=c.KEY_PRESSED_W;this._xmlEventNameToPrefab.set(kc,lc);lc;var Fb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_X),
yc=c.KEY_PRESSED_X;this._xmlEventNameToPrefab.set(Fb,yc);yc;var Tb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_Y),Ub=c.KEY_PRESSED_Y;this._xmlEventNameToPrefab.set(Tb,Ub);Ub;var tb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_Z),Ma=c.KEY_PRESSED_Z;this._xmlEventNameToPrefab.set(tb,Ma);Ma;var zc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_0),Xb=c.KEY_PRESSED_NUMBER_0;this._xmlEventNameToPrefab.set(zc,Xb);Xb;var Ec=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_1),Yb=c.KEY_PRESSED_NUMBER_1;
this._xmlEventNameToPrefab.set(Ec,Yb);Yb;var Nc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_2),Zb=c.KEY_PRESSED_NUMBER_2;this._xmlEventNameToPrefab.set(Nc,Zb);Zb;var Oc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_3),qd=c.KEY_PRESSED_NUMBER_3;this._xmlEventNameToPrefab.set(Oc,qd);qd;var Pc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_4),ac=c.KEY_PRESSED_NUMBER_4;this._xmlEventNameToPrefab.set(Pc,ac);ac;var Qc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_5),Jb=c.KEY_PRESSED_NUMBER_5;
this._xmlEventNameToPrefab.set(Qc,Jb);Jb;var Sc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_6),Gc=c.KEY_PRESSED_NUMBER_6;this._xmlEventNameToPrefab.set(Sc,Gc);Gc;var rc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_7),Jc=c.KEY_PRESSED_NUMBER_7;this._xmlEventNameToPrefab.set(rc,Jc);Jc;var uc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_8),vc=c.KEY_PRESSED_NUMBER_8;this._xmlEventNameToPrefab.set(uc,vc);vc;var ld=this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_9),Uc=c.KEY_PRESSED_NUMBER_9;
this._xmlEventNameToPrefab.set(ld,Uc);Uc;var zd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_EQUALS),Xc=c.KEY_PRESSED_EQUALS;this._xmlEventNameToPrefab.set(zd,Xc);Xc;var hd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_SLASH),ad=c.KEY_PRESSED_SLASH;this._xmlEventNameToPrefab.set(hd,ad);ad;var td=this._xmlEventPrefabToName.get(c.KEY_PRESSED_BACKSLASH),Tc=c.KEY_PRESSED_BACKSLASH;this._xmlEventNameToPrefab.set(td,Tc);Tc;var ud=this._xmlEventPrefabToName.get(c.KEY_PRESSED_LEFTBRACKET),bd=c.KEY_PRESSED_LEFTBRACKET;
this._xmlEventNameToPrefab.set(ud,bd);bd;var Md=this._xmlEventPrefabToName.get(c.KEY_PRESSED_RIGHTBRACKET),xd=c.KEY_PRESSED_RIGHTBRACKET;this._xmlEventNameToPrefab.set(Md,xd);xd;var dk=this._xmlEventPrefabToName.get(c.KEY_PRESSED_BACKQUOTE),yd=c.KEY_PRESSED_BACKQUOTE;this._xmlEventNameToPrefab.set(dk,yd);yd;var Od=this._xmlEventPrefabToName.get(c.KEY_PRESSED_COMMA),md=c.KEY_PRESSED_COMMA;this._xmlEventNameToPrefab.set(Od,md);md;var Qd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_COMMAND),Ad=c.KEY_PRESSED_COMMAND;
this._xmlEventNameToPrefab.set(Qd,Ad);Ad;var nd=this._xmlEventPrefabToName.get(c.KEY_PRESSED_MINUS),cd=c.KEY_PRESSED_MINUS;this._xmlEventNameToPrefab.set(nd,cd);cd;var Kc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_PERIOD),dd=c.KEY_PRESSED_PERIOD;this._xmlEventNameToPrefab.set(Kc,dd);dd;var Lc=this._xmlEventPrefabToName.get(c.KEY_PRESSED_QUOTE),pd=c.KEY_PRESSED_QUOTE;this._xmlEventNameToPrefab.set(Lc,pd);pd;var Wb=this._xmlEventPrefabToName.get(c.KEY_PRESSED_SEMICOLON),gd=c.KEY_PRESSED_SEMICOLON;
this._xmlEventNameToPrefab.set(Wb,gd);gd;var le=this._xmlEventPrefabToName.get(c.KEY_PRESSED_ANDROIDMENU),ue=c.KEY_PRESSED_ANDROIDMENU;this._xmlEventNameToPrefab.set(le,ue);ue;var al=this._xmlEventPrefabToName.get(c.KEY_PRESSED_ANDROIDSEARCH),fd=c.KEY_PRESSED_ANDROIDSEARCH;this._xmlEventNameToPrefab.set(al,fd);fd;var Td=this._xmlEventPrefabToName.get(c.KEY_PRESSED_UNKNOWN),nc=c.KEY_PRESSED_UNKNOWN;this._xmlEventNameToPrefab.set(Td,nc);nc;var Zc=this._xmlEventPrefabToName.get(c.KEY_RELEASED_ALT),id=
c.KEY_RELEASED_ALT;this._xmlEventNameToPrefab.set(Zc,id);id;var Vd=this._xmlEventPrefabToName.get(c.KEY_RELEASED_BACKSPACE),jd=c.KEY_RELEASED_BACKSPACE;this._xmlEventNameToPrefab.set(Vd,jd);jd;var kd=this._xmlEventPrefabToName.get(c.KEY_RELEASED_CAPS_LOCK),Rc=c.KEY_RELEASED_CAPS_LOCK;this._xmlEventNameToPrefab.set(kd,Rc);Rc;var Wd=this._xmlEventPrefabToName.get(c.KEY_RELEASED_CONTROL),$c=c.KEY_RELEASED_CONTROL;this._xmlEventNameToPrefab.set(Wd,$c);$c;var rd=this._xmlEventPrefabToName.get(c.KEY_RELEASED_DELETE),
Hc=c.KEY_RELEASED_DELETE;this._xmlEventNameToPrefab.set(rd,Hc);Hc;var be=this._xmlEventPrefabToName.get(c.KEY_RELEASED_DOWN),Kd=c.KEY_RELEASED_DOWN;this._xmlEventNameToPrefab.set(be,Kd);Kd;var bl=this._xmlEventPrefabToName.get(c.KEY_RELEASED_END),we=c.KEY_RELEASED_END;this._xmlEventNameToPrefab.set(bl,we);we;var qe=this._xmlEventPrefabToName.get(c.KEY_RELEASED_ENTER),Nd=c.KEY_RELEASED_ENTER;this._xmlEventNameToPrefab.set(qe,Nd);Nd;var xe=this._xmlEventPrefabToName.get(c.KEY_RELEASED_ESCAPE),ve=c.KEY_RELEASED_ESCAPE;
this._xmlEventNameToPrefab.set(xe,ve);ve;var fe=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F1),Rd=c.KEY_RELEASED_F1;this._xmlEventNameToPrefab.set(fe,Rd);Rd;var Bd=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F10),Cd=c.KEY_RELEASED_F10;this._xmlEventNameToPrefab.set(Bd,Cd);Cd;var od=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F11),Vc=c.KEY_RELEASED_F11;this._xmlEventNameToPrefab.set(od,Vc);Vc;var he=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F12),ed=c.KEY_RELEASED_F12;this._xmlEventNameToPrefab.set(he,
ed);ed;var Dd=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F13),oc=c.KEY_RELEASED_F13;this._xmlEventNameToPrefab.set(Dd,oc);oc;var Yc=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F14),Wc=c.KEY_RELEASED_F14;this._xmlEventNameToPrefab.set(Yc,Wc);Wc;var me=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F15),Xd=c.KEY_RELEASED_F15;this._xmlEventNameToPrefab.set(me,Xd);Xd;var Id=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F2),Yd=c.KEY_RELEASED_F2;this._xmlEventNameToPrefab.set(Id,Yd);Yd;var $d=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F3),
sd=c.KEY_RELEASED_F3;this._xmlEventNameToPrefab.set($d,sd);sd;var ae=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F4),ce=c.KEY_RELEASED_F4;this._xmlEventNameToPrefab.set(ae,ce);ce;var Ld=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F5),tc=c.KEY_RELEASED_F5;this._xmlEventNameToPrefab.set(Ld,tc);tc;var wd=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F6),de=c.KEY_RELEASED_F6;this._xmlEventNameToPrefab.set(wd,de);de;var Be=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F7),Pd=c.KEY_RELEASED_F7;this._xmlEventNameToPrefab.set(Be,
Pd);Pd;var Ee=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F8),ee=c.KEY_RELEASED_F8;this._xmlEventNameToPrefab.set(Ee,ee);ee;var Fe=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F9),ge=c.KEY_RELEASED_F9;this._xmlEventNameToPrefab.set(Fe,ge);ge;var He=this._xmlEventPrefabToName.get(c.KEY_RELEASED_HOME),Qk=c.KEY_RELEASED_HOME;this._xmlEventNameToPrefab.set(He,Qk);Qk;var cl=this._xmlEventPrefabToName.get(c.KEY_RELEASED_INSERT),Rk=c.KEY_RELEASED_INSERT;this._xmlEventNameToPrefab.set(cl,Rk);Rk;var dl=
this._xmlEventPrefabToName.get(c.KEY_RELEASED_LEFT),Sk=c.KEY_RELEASED_LEFT;this._xmlEventNameToPrefab.set(dl,Sk);Sk;var el=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_0),Tk=c.KEY_RELEASED_NUMPAD_0;this._xmlEventNameToPrefab.set(el,Tk);Tk;var Ie=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_1),ie=c.KEY_RELEASED_NUMPAD_1;this._xmlEventNameToPrefab.set(Ie,ie);ie;var Ke=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_2),je=c.KEY_RELEASED_NUMPAD_2;this._xmlEventNameToPrefab.set(Ke,
je);je;var Ne=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_3),Ed=c.KEY_RELEASED_NUMPAD_3;this._xmlEventNameToPrefab.set(Ne,Ed);Ed;var Oe=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_4),ke=c.KEY_RELEASED_NUMPAD_4;this._xmlEventNameToPrefab.set(Oe,ke);ke;var Te=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_5),Ud=c.KEY_RELEASED_NUMPAD_5;this._xmlEventNameToPrefab.set(Te,Ud);Ud;var Ve=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_6),Hd=c.KEY_RELEASED_NUMPAD_6;this._xmlEventNameToPrefab.set(Ve,
Hd);Hd;var Xe=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_7),Zd=c.KEY_RELEASED_NUMPAD_7;this._xmlEventNameToPrefab.set(Xe,Zd);Zd;var bf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_8),ne=c.KEY_RELEASED_NUMPAD_8;this._xmlEventNameToPrefab.set(bf,ne);ne;var ef=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_9),oe=c.KEY_RELEASED_NUMPAD_9;this._xmlEventNameToPrefab.set(ef,oe);oe;var gf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_ADD),Jd=c.KEY_RELEASED_NUMPAD_ADD;this._xmlEventNameToPrefab.set(gf,
Jd);Jd;var hf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_DECIMAL),vd=c.KEY_RELEASED_NUMPAD_DECIMAL;this._xmlEventNameToPrefab.set(hf,vd);vd;var kf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_DIVIDE),pe=c.KEY_RELEASED_NUMPAD_DIVIDE;this._xmlEventNameToPrefab.set(kf,pe);pe;var lf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_ENTER),re=c.KEY_RELEASED_NUMPAD_ENTER;this._xmlEventNameToPrefab.set(lf,re);re;var uf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_MULTIPLY),se=
c.KEY_RELEASED_NUMPAD_MULTIPLY;this._xmlEventNameToPrefab.set(uf,se);se;var vf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_SUBTRACT),te=c.KEY_RELEASED_NUMPAD_SUBTRACT;this._xmlEventNameToPrefab.set(vf,te);te;var wf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_PAGE_DOWN),Ae=c.KEY_RELEASED_PAGE_DOWN;this._xmlEventNameToPrefab.set(wf,Ae);Ae;var xf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_PAGE_UP),Ce=c.KEY_RELEASED_PAGE_UP;this._xmlEventNameToPrefab.set(xf,Ce);Ce;var zf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_RIGHT),
De=c.KEY_RELEASED_RIGHT;this._xmlEventNameToPrefab.set(zf,De);De;var If=this._xmlEventPrefabToName.get(c.KEY_RELEASED_SHIFT),Ge=c.KEY_RELEASED_SHIFT;this._xmlEventNameToPrefab.set(If,Ge);Ge;var Lf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_SPACE),Je=c.KEY_RELEASED_SPACE;this._xmlEventNameToPrefab.set(Lf,Je);Je;var Of=this._xmlEventPrefabToName.get(c.KEY_RELEASED_TAB),Le=c.KEY_RELEASED_TAB;this._xmlEventNameToPrefab.set(Of,Le);Le;var Uf=this._xmlEventPrefabToName.get(c.KEY_RELEASED_UP),Me=c.KEY_RELEASED_UP;
this._xmlEventNameToPrefab.set(Uf,Me);Me;var hg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_A),Re=c.KEY_RELEASED_A;this._xmlEventNameToPrefab.set(hg,Re);Re;var ig=this._xmlEventPrefabToName.get(c.KEY_RELEASED_B),Se=c.KEY_RELEASED_B;this._xmlEventNameToPrefab.set(ig,Se);Se;var jg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_C),Ue=c.KEY_RELEASED_C;this._xmlEventNameToPrefab.set(jg,Ue);Ue;var kg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_D),We=c.KEY_RELEASED_D;this._xmlEventNameToPrefab.set(kg,
We);We;var lg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_E),Ye=c.KEY_RELEASED_E;this._xmlEventNameToPrefab.set(lg,Ye);Ye;var mg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_F),Ze=c.KEY_RELEASED_F;this._xmlEventNameToPrefab.set(mg,Ze);Ze;var ng=this._xmlEventPrefabToName.get(c.KEY_RELEASED_G),$e=c.KEY_RELEASED_G;this._xmlEventNameToPrefab.set(ng,$e);$e;var og=this._xmlEventPrefabToName.get(c.KEY_RELEASED_H),af=c.KEY_RELEASED_H;this._xmlEventNameToPrefab.set(og,af);af;var pg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_I),
cf=c.KEY_RELEASED_I;this._xmlEventNameToPrefab.set(pg,cf);cf;var qg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_J),df=c.KEY_RELEASED_J;this._xmlEventNameToPrefab.set(qg,df);df;var rg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_K),ff=c.KEY_RELEASED_K;this._xmlEventNameToPrefab.set(rg,ff);ff;var sg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_L),jf=c.KEY_RELEASED_L;this._xmlEventNameToPrefab.set(sg,jf);jf;var tg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_M),mf=c.KEY_RELEASED_M;this._xmlEventNameToPrefab.set(tg,
mf);mf;var ug=this._xmlEventPrefabToName.get(c.KEY_RELEASED_N),nf=c.KEY_RELEASED_N;this._xmlEventNameToPrefab.set(ug,nf);nf;var vg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_O),of=c.KEY_RELEASED_O;this._xmlEventNameToPrefab.set(vg,of);of;var wg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_P),pf=c.KEY_RELEASED_P;this._xmlEventNameToPrefab.set(wg,pf);pf;var xg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_Q),qf=c.KEY_RELEASED_Q;this._xmlEventNameToPrefab.set(xg,qf);qf;var yg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_R),
rf=c.KEY_RELEASED_R;this._xmlEventNameToPrefab.set(yg,rf);rf;var zg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_S),sf=c.KEY_RELEASED_S;this._xmlEventNameToPrefab.set(zg,sf);sf;var Ag=this._xmlEventPrefabToName.get(c.KEY_RELEASED_T),tf=c.KEY_RELEASED_T;this._xmlEventNameToPrefab.set(Ag,tf);tf;var Bg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_U),yf=c.KEY_RELEASED_U;this._xmlEventNameToPrefab.set(Bg,yf);yf;var Cg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_V),Af=c.KEY_RELEASED_V;this._xmlEventNameToPrefab.set(Cg,
Af);Af;var Dg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_W),Bf=c.KEY_RELEASED_W;this._xmlEventNameToPrefab.set(Dg,Bf);Bf;var Eg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_X),Cf=c.KEY_RELEASED_X;this._xmlEventNameToPrefab.set(Eg,Cf);Cf;var Fg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_Y),Df=c.KEY_RELEASED_Y;this._xmlEventNameToPrefab.set(Fg,Df);Df;var Gg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_Z),Ef=c.KEY_RELEASED_Z;this._xmlEventNameToPrefab.set(Gg,Ef);Ef;var Hg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_0),
Ff=c.KEY_RELEASED_NUMBER_0;this._xmlEventNameToPrefab.set(Hg,Ff);Ff;var Ig=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_1),Gf=c.KEY_RELEASED_NUMBER_1;this._xmlEventNameToPrefab.set(Ig,Gf);Gf;var Jg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_2),Hf=c.KEY_RELEASED_NUMBER_2;this._xmlEventNameToPrefab.set(Jg,Hf);Hf;var Kg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_3),Jf=c.KEY_RELEASED_NUMBER_3;this._xmlEventNameToPrefab.set(Kg,Jf);Jf;var Lg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_4),
Kf=c.KEY_RELEASED_NUMBER_4;this._xmlEventNameToPrefab.set(Lg,Kf);Kf;var Mg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_5),Mf=c.KEY_RELEASED_NUMBER_5;this._xmlEventNameToPrefab.set(Mg,Mf);Mf;var Ng=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_6),Nf=c.KEY_RELEASED_NUMBER_6;this._xmlEventNameToPrefab.set(Ng,Nf);Nf;var Og=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_7),Pf=c.KEY_RELEASED_NUMBER_7;this._xmlEventNameToPrefab.set(Og,Pf);Pf;var Pg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_8),
Qf=c.KEY_RELEASED_NUMBER_8;this._xmlEventNameToPrefab.set(Pg,Qf);Qf;var Qg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_9),Rf=c.KEY_RELEASED_NUMBER_9;this._xmlEventNameToPrefab.set(Qg,Rf);Rf;var Rg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_EQUALS),Sf=c.KEY_RELEASED_EQUALS;this._xmlEventNameToPrefab.set(Rg,Sf);Sf;var Sg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_SLASH),Tf=c.KEY_RELEASED_SLASH;this._xmlEventNameToPrefab.set(Sg,Tf);Tf;var Tg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_BACKSLASH),
Vf=c.KEY_RELEASED_BACKSLASH;this._xmlEventNameToPrefab.set(Tg,Vf);Vf;var Ug=this._xmlEventPrefabToName.get(c.KEY_RELEASED_LEFTBRACKET),Wf=c.KEY_RELEASED_LEFTBRACKET;this._xmlEventNameToPrefab.set(Ug,Wf);Wf;var Vg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_RIGHTBRACKET),Xf=c.KEY_RELEASED_RIGHTBRACKET;this._xmlEventNameToPrefab.set(Vg,Xf);Xf;var Wg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_BACKQUOTE),Yf=c.KEY_RELEASED_BACKQUOTE;this._xmlEventNameToPrefab.set(Wg,Yf);Yf;var Xg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_COMMA),
Zf=c.KEY_RELEASED_COMMA;this._xmlEventNameToPrefab.set(Xg,Zf);Zf;var Yg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_COMMAND),$f=c.KEY_RELEASED_COMMAND;this._xmlEventNameToPrefab.set(Yg,$f);$f;var Zg=this._xmlEventPrefabToName.get(c.KEY_RELEASED_MINUS),ag=c.KEY_RELEASED_MINUS;this._xmlEventNameToPrefab.set(Zg,ag);ag;var $g=this._xmlEventPrefabToName.get(c.KEY_RELEASED_PERIOD),bg=c.KEY_RELEASED_PERIOD;this._xmlEventNameToPrefab.set($g,bg);bg;var ah=this._xmlEventPrefabToName.get(c.KEY_RELEASED_QUOTE),
cg=c.KEY_RELEASED_QUOTE;this._xmlEventNameToPrefab.set(ah,cg);cg;var eh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_SEMICOLON),dg=c.KEY_RELEASED_SEMICOLON;this._xmlEventNameToPrefab.set(eh,dg);dg;var fh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_ANDROIDMENU),eg=c.KEY_RELEASED_ANDROIDMENU;this._xmlEventNameToPrefab.set(fh,eg);eg;var gh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_ANDROIDSEARCH),fg=c.KEY_RELEASED_ANDROIDSEARCH;this._xmlEventNameToPrefab.set(gh,fg);fg;var hh=this._xmlEventPrefabToName.get(c.KEY_RELEASED_UNKNOWN),
gg=c.KEY_RELEASED_UNKNOWN;this._xmlEventNameToPrefab.set(hh,gg);gg},parseGameNode:function(a){P.info("Extending "+a.get_nodeName()+" Node...");return this._extendGameNode(a)&&(P.info("Extending "+a.get_nodeName()+" Node COMPLETED"),P.info("Merging "+a.get_nodeName()+" Node..."),this._mergeGameNode(a),P.info("Merging "+a.get_nodeName()+" Node COMPLETED"),P.info("Validating "+a.get_nodeName()+" Node..."),this._validateGameNode(a))?(P.info("Validating "+a.get_nodeName()+" Node COMPLETED"),!0):!1},instantiateEntity:function(a){return this._gameClassInstantiator.instantiateEntity(a)},
_extendGameNode:function(a){var b;b=a.get_nodeName();"_"==C.substr(b,0,1)?(b=a.get_nodeName(),b=this._xmlNodeNameToNodeType.get(C.substr(b,1,null))):b=this._xmlNodeNameToNodeType.get(a.get_nodeName());if(null==b)return P.error("Unexpected Element: <"+a.get_nodeName()+">"),!1;for(var d=a.elements();d.hasNext();){var c=d.next();if(!1==this._extendGameNode(c))return P.error("Failed to parse node "+c.get_nodeName()),!1}if(this._handleExtendsElement(a,b)){if(this._handleExtendsAttribute(a,b))return!0;
P.error("Failed to extend "+o.string(b)+' node from the "extends" parameter.');return!1}P.error("Failed to extend "+o.string(b)+' node from the "Extends" tag.');return!1},_handleExtendsElement:function(a,b){var d=a.elementsNamed("Extends").hasNext();if(this._isNodeExtendable.get(b)&&d){for(var d=a.elementsNamed("Extends").next(),c=[],f=d.elements();f.hasNext();){var e=f.next();c.splice(0,0,e)}for(f=0;f<c.length;)if(e=c[f],++f,this._xmlNodeTypeToNodeName.get(b)==e.get_nodeName())this._moveChildren(a,
e);else return P.error("Expected Node <"+this._xmlNodeTypeToNodeName.get(b)+">. Got <"+e.get_nodeName()+">."),!1;a.removeChild(d);return!0}return d?(P.warn("Element "+o.string(b)+" cannot be extended!"),!1):!0},_handleExtendsAttribute:function(a,b){if(this._isNodeExtendable.get(b)&&a.exists("extends")){var d=this.getGameNode(this._xmlNodeTypeToGameType.get(b),a.get("extends"),null);a.remove("extends");if(null!=d){if(this._extendGameNode(d))return this._moveChildren(a,d),!0;P.error(""+o.string(b)+
" Class is not valid!");return!1}P.error(""+o.string(b)+" Class is not well-formed or not found!");return!1}return a.exists("extends")?(P.error("Element "+o.string(b)+" cannot be extended!"),!1):!0},_moveChildren:function(a,b){for(var d=[],c=b.elements();c.hasNext();){var f=c.next();d.push(f)}for(c=0;c<d.length;)if(f=d[c],++c,!1==a.elementsNamed(f.get_nodeName()).hasNext())a.addChild(f);else{var e=f.get_nodeName();"_"==C.substr(e,0,1)&&a.insertChild(f,0)}},_validateGameNode:function(a){var b;b=this._xmlNodeNameToNodeType.get(a.get_nodeName());
if(this._gameClassValidator.validateGameNode(a,b)){for(a=a.elements();a.hasNext();)if(b=a.next(),!1==this._validateGameNode(b))return P.error("Failed to validate node "+b.get_nodeName()),!1;return!0}P.error("Failed to validate "+o.string(b)+" node");return!1},_mergeGameNode:function(a){this._mergeSingleGameNode(a);for(a=a.elements();a.hasNext();)this._mergeGameNode(a.next())},_mergeSingleGameNode:function(a){for(var b=[],d=a.elements();d.hasNext();){var c=d.next();b.push(c)}for(d=0;d<b.length;){var f=
b[d];++d;if("_"==function(){var a=f.get_nodeName();return C.substr(a,0,1)}(this)){var e,c=f.get_nodeName();e=C.substr(c,1,null);if(function(a){var b=a._xmlNodeNameToNodeType.get(e);return a._isNodeMergable.get(b)}(this))a.elementsNamed(e).hasNext()?(c=a.elementsNamed(e).next(),this._mergeChildren(f,c),a.removeChild(f)):f.set_nodeName(function(){var a=f.get_nodeName();return C.substr(a,1,null)}(this));else if(function(a){var b=a._xmlNodeNameToNodeType.get(e);return a._isNodeTargetMergable.get(b)}(this))if(f.exists("id")){for(var c=
null,i=!1,g=a.elementsNamed(e);g.hasNext();){var h=g.next();if(h.elementsNamed("Id").hasNext()&&h.elementsNamed("Id").next().firstChild().get_nodeValue()==f.get("id")){c=h;i=!0;break}}i?(this._mergeChildren(f,c),a.removeChild(f)):(f.set_nodeName(function(){var a=f.get_nodeName();return C.substr(a,1,null)}(this)),f.remove("id"))}else null;else null}}},_mergeChildren:function(a,b){for(var d=[],c=a.elements();c.hasNext();){var f=c.next();d.push(f)}if(function(a){var d;d=b.get_nodeName();d=a._xmlNodeNameToNodeType.get(d);
return a._isNodeArray.get(d)}(this))for(c=0;c<d.length;)f=d[c],++c,b.addChild(f);else for(c=0;c<d.length;){var e=d[c];++c;"_"!=function(){var a=e.get_nodeName();return C.substr(a,0,1)}(this)&&b.elementsNamed(e.get_nodeName()).hasNext()&&b.removeChild(b.elementsNamed(e.get_nodeName()).next());b.addChild(e)}},_parseEmbeddedStringAsset:function(a){try{return w.parse(J.getFile(a).toString())}catch(b){return P.error(o.string(b)),null}},_getClassUrl:function(a,b){return ya.replace(a,".","/")+"."+b},getGameNode:function(a,
b,d){null!=b&&null!=d?b=d:null!=b?(b=this._parseEmbeddedStringAsset(this._getClassUrl(b,this._xmlGameTypeToFileExtension.get(a))),null!=b&&(b=b.firstElement())):b=null!=d?d:w.createElement(this._xmlGameTypeToNodeName.get(a));if(null!=b)return b.get_nodeName()!=this._xmlGameTypeToNodeName.get(a)?(P.error("Expected "+this._xmlGameTypeToNodeName.get(a)+", got "+b.get_nodeName()),null):b;P.error("Class "+o.string(a)+" is not well-formed or not found!");return null},__class__:jh};var jj=function(){};h["tools.spark.sliced.services.std.logic.gde.interfaces.IGameClassValidator"]=
jj;jj.__name__=!0;jj.prototype={__class__:jj};var kh=function(a,b,d,c){this._xmlNodeTypeToNodeName=a;this._xmlConcurrencyTypeToName=b;this._xmlStateTypeToName=d;this._xmlEventPrefabToName=c;this._init()};h["tools.spark.sliced.services.std.logic.gde.core.GameClassValidator"]=kh;kh.__name__=!0;kh.__interfaces__=[jj];kh.prototype={_init:function(){this._initNodeRulesMap()},_initNodeRulesMap:function(){this._xmlNodeTypeToNodeRule=new ua;var a=this._createActionNodeRule();this._xmlNodeTypeToNodeRule.set(j.ACTION,
a);a;a=this._createActionsNodeRule();this._xmlNodeTypeToNodeRule.set(j.ACTIONS,a);a;a=this._createEntitiesNodeRule();this._xmlNodeTypeToNodeRule.set(j.ENTITIES,a);a;a=this._createEntityNodeRule();this._xmlNodeTypeToNodeRule.set(j.ENTITY,a);a;a=this._createFormNodeRule();this._xmlNodeTypeToNodeRule.set(j.FORM,a);a;a=this._createScriptsNodeRule();this._xmlNodeTypeToNodeRule.set(j.SCRIPTS,a);a;a=this._createScriptNodeRule();this._xmlNodeTypeToNodeRule.set(j.SCRIPT,a);a;a=this._createGmlNodeRule();this._xmlNodeTypeToNodeRule.set(j.GML,
a);a;a=this._createTriggersNodeRule();this._xmlNodeTypeToNodeRule.set(j.TRIGGERS,a);a;a=this._createTriggerNodeRule();this._xmlNodeTypeToNodeRule.set(j.TRIGGER,a);a;a=this._createEventNodeRule();this._xmlNodeTypeToNodeRule.set(j.EVENT,a);a;a=this._createConcurrencyNodeRule();this._xmlNodeTypeToNodeRule.set(j.CONCURRENCY,a);a;a=this._createIdNodeRule();this._xmlNodeTypeToNodeRule.set(j.ID,a);a;a=this._createSpaceNodeRule();this._xmlNodeTypeToNodeRule.set(j.SPACE,a);a;a=this._createStateNodeRule();
this._xmlNodeTypeToNodeRule.set(j.STATE,a);a;a=this._createStatesNodeRule();this._xmlNodeTypeToNodeRule.set(j.STATES,a);a;a=this._createTypeNodeRule();this._xmlNodeTypeToNodeRule.set(j.TYPE,a);a;a=this._createValueNodeRule();this._xmlNodeTypeToNodeRule.set(j.VALUE,a);a},validateGameNode:function(a,b){if(null==this._xmlNodeTypeToNodeRule.get(b))return!1;try{return I.checkNode(a,this._xmlNodeTypeToNodeRule.get(b)),!0}catch(d){if(v.__instanceof(d,String))return!1;throw d;}},_createEntityNodeRule:function(){var a=
B.RList([B.ROptional(B.RNode(this._xmlNodeTypeToNodeName.get(j.ACTIONS))),B.ROptional(B.RNode(this._xmlNodeTypeToNodeName.get(j.STATES))),B.ROptional(B.RNode(this._xmlNodeTypeToNodeName.get(j.TRIGGERS))),B.RNode(this._xmlNodeTypeToNodeName.get(j.FORM))],!1);return B.RNode(this._xmlNodeTypeToNodeName.get(j.ENTITY),[],a)},_createFormNodeRule:function(){var a=B.RList([B.ROptional(B.RNode(this._xmlNodeTypeToNodeName.get(j.STATES))),B.RNode(this._xmlNodeTypeToNodeName.get(j.SPACE))],!1);return B.RNode(this._xmlNodeTypeToNodeName.get(j.FORM),
[],a)},_createStateNodeRule:function(){var a=B.RList([B.RNode(this._xmlNodeTypeToNodeName.get(j.ID)),B.RNode(this._xmlNodeTypeToNodeName.get(j.TYPE)),B.RNode(this._xmlNodeTypeToNodeName.get(j.VALUE))],!1);return B.RNode(this._xmlNodeTypeToNodeName.get(j.STATE),[],a)},_createActionNodeRule:function(){var a=B.RList([B.RNode(this._xmlNodeTypeToNodeName.get(j.ID)),B.RNode(this._xmlNodeTypeToNodeName.get(j.CONCURRENCY)),B.RNode(this._xmlNodeTypeToNodeName.get(j.SCRIPTS)),B.ROptional(B.RNode(this._xmlNodeTypeToNodeName.get(j.STATES)))],
!1);return B.RNode(this._xmlNodeTypeToNodeName.get(j.ACTION),[],a)},_createSpaceNodeRule:function(){var a=B.ROptional(B.RNode(this._xmlNodeTypeToNodeName.get(j.ENTITIES)));return B.RNode(this._xmlNodeTypeToNodeName.get(j.SPACE),[],a)},_createEntitiesNodeRule:function(){var a=B.RMulti(B.RNode(this._xmlNodeTypeToNodeName.get(j.ENTITY)),!1);return B.RNode(this._xmlNodeTypeToNodeName.get(j.ENTITIES),[],a)},_createStatesNodeRule:function(){var a=B.RMulti(B.RNode(this._xmlNodeTypeToNodeName.get(j.STATE)),
!1);return B.RNode(this._xmlNodeTypeToNodeName.get(j.STATES),[],a)},_createActionsNodeRule:function(){var a=B.RMulti(B.RNode(this._xmlNodeTypeToNodeName.get(j.ACTION)),!1);return B.RNode(this._xmlNodeTypeToNodeName.get(j.ACTIONS),[],a)},_createIdNodeRule:function(){var a=B.RData();return B.RNode(this._xmlNodeTypeToNodeName.get(j.ID),[],a)},_createScriptsNodeRule:function(){var a=B.RMulti(B.RChoice([B.RNode(this._xmlNodeTypeToNodeName.get(j.SCRIPT)),B.RNode(this._xmlNodeTypeToNodeName.get(j.GML))]),
!0);return B.RNode(this._xmlNodeTypeToNodeName.get(j.SCRIPTS),[],a)},_createScriptNodeRule:function(){var a=B.RData();return B.RNode(this._xmlNodeTypeToNodeName.get(j.SCRIPT),[],a)},_createGmlNodeRule:function(){var a=B.RData();return B.RNode(this._xmlNodeTypeToNodeName.get(j.GML),[],a)},_createTriggersNodeRule:function(){var a=B.RMulti(B.RNode(this._xmlNodeTypeToNodeName.get(j.TRIGGER)),!1);return B.RNode(this._xmlNodeTypeToNodeName.get(j.TRIGGERS),[],a)},_createTriggerNodeRule:function(){var a=
B.RList([B.RNode(this._xmlNodeTypeToNodeName.get(j.EVENT)),B.RNode(this._xmlNodeTypeToNodeName.get(j.SCRIPTS))],!1);return B.RNode(this._xmlNodeTypeToNodeName.get(j.TRIGGER),[],a)},_createConcurrencyNodeRule:function(){var a=B.RData(Ta.FEnum([this._xmlConcurrencyTypeToName.get(S.PARALLEL),this._xmlConcurrencyTypeToName.get(S.PERSISTENT),this._xmlConcurrencyTypeToName.get(S.TRANSIENT)]));return B.RNode(this._xmlNodeTypeToNodeName.get(j.CONCURRENCY),[],a)},_createTypeNodeRule:function(){var a=B.RData(Ta.FEnum([this._xmlStateTypeToName.get(X.DYNAMIC),
this._xmlStateTypeToName.get(X.INTEGER),this._xmlStateTypeToName.get(X.DECIMAL),this._xmlStateTypeToName.get(X.BOOLEAN),this._xmlStateTypeToName.get(X.TEXT)]));return B.RNode(this._xmlNodeTypeToNodeName.get(j.TYPE),[],a)},_createValueNodeRule:function(){var a=B.RData();return B.RNode(this._xmlNodeTypeToNodeName.get(j.VALUE),[],a)},_createEventNodeRule:function(){var a=B.RData(Ta.FEnum([this._xmlEventPrefabToName.get(c.CREATED),this._xmlEventPrefabToName.get(c.UPDATE),this._xmlEventPrefabToName.get(c.CHANGED),
this._xmlEventPrefabToName.get(c.NETWORK_CONNECTED),this._xmlEventPrefabToName.get(c.NETWORK_REQUEST),this._xmlEventPrefabToName.get(c.NETWORK_SERVER_EVENT),this._xmlEventPrefabToName.get(c.FILETRANSFER_CONNECTED),this._xmlEventPrefabToName.get(c.FILETRANSFER_SENDREQUEST),this._xmlEventPrefabToName.get(c.MOUSE_LEFT_CLICK),this._xmlEventPrefabToName.get(c.MOUSE_RIGHT_CLICK),this._xmlEventPrefabToName.get(c.MOUSE_LEFT_CLICKED),this._xmlEventPrefabToName.get(c.MOUSE_RIGHT_CLICKED),this._xmlEventPrefabToName.get(c.MOUSE_ENTERED),
this._xmlEventPrefabToName.get(c.MOUSE_MOVED),this._xmlEventPrefabToName.get(c.MOUSE_LEFT),this._xmlEventPrefabToName.get(c.KEY_PRESSED),this._xmlEventPrefabToName.get(c.KEY_RELEASED),this._xmlEventPrefabToName.get(c.KEY_PRESSED_ALT),this._xmlEventPrefabToName.get(c.KEY_PRESSED_BACKSPACE),this._xmlEventPrefabToName.get(c.KEY_PRESSED_CAPS_LOCK),this._xmlEventPrefabToName.get(c.KEY_PRESSED_CONTROL),this._xmlEventPrefabToName.get(c.KEY_PRESSED_DELETE),this._xmlEventPrefabToName.get(c.KEY_PRESSED_DOWN),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_END),this._xmlEventPrefabToName.get(c.KEY_PRESSED_ENTER),this._xmlEventPrefabToName.get(c.KEY_PRESSED_ESCAPE),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F1),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F10),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F11),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F12),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F13),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F14),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F15),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_F2),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F3),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F4),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F5),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F6),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F7),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F8),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F9),this._xmlEventPrefabToName.get(c.KEY_PRESSED_HOME),this._xmlEventPrefabToName.get(c.KEY_PRESSED_INSERT),this._xmlEventPrefabToName.get(c.KEY_PRESSED_LEFT),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_0),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_1),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_2),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_3),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_4),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_5),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_6),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_7),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_8),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_9),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_ADD),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_DECIMAL),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_DIVIDE),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_ENTER),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_MULTIPLY),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMPAD_SUBTRACT),this._xmlEventPrefabToName.get(c.KEY_PRESSED_PAGE_DOWN),this._xmlEventPrefabToName.get(c.KEY_PRESSED_PAGE_UP),this._xmlEventPrefabToName.get(c.KEY_PRESSED_RIGHT),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_SHIFT),this._xmlEventPrefabToName.get(c.KEY_PRESSED_SPACE),this._xmlEventPrefabToName.get(c.KEY_PRESSED_TAB),this._xmlEventPrefabToName.get(c.KEY_PRESSED_UP),this._xmlEventPrefabToName.get(c.KEY_PRESSED_A),this._xmlEventPrefabToName.get(c.KEY_PRESSED_B),this._xmlEventPrefabToName.get(c.KEY_PRESSED_C),this._xmlEventPrefabToName.get(c.KEY_PRESSED_D),this._xmlEventPrefabToName.get(c.KEY_PRESSED_E),this._xmlEventPrefabToName.get(c.KEY_PRESSED_F),this._xmlEventPrefabToName.get(c.KEY_PRESSED_G),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_H),this._xmlEventPrefabToName.get(c.KEY_PRESSED_I),this._xmlEventPrefabToName.get(c.KEY_PRESSED_J),this._xmlEventPrefabToName.get(c.KEY_PRESSED_K),this._xmlEventPrefabToName.get(c.KEY_PRESSED_L),this._xmlEventPrefabToName.get(c.KEY_PRESSED_M),this._xmlEventPrefabToName.get(c.KEY_PRESSED_N),this._xmlEventPrefabToName.get(c.KEY_PRESSED_O),this._xmlEventPrefabToName.get(c.KEY_PRESSED_P),this._xmlEventPrefabToName.get(c.KEY_PRESSED_Q),this._xmlEventPrefabToName.get(c.KEY_PRESSED_R),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_S),this._xmlEventPrefabToName.get(c.KEY_PRESSED_T),this._xmlEventPrefabToName.get(c.KEY_PRESSED_U),this._xmlEventPrefabToName.get(c.KEY_PRESSED_V),this._xmlEventPrefabToName.get(c.KEY_PRESSED_W),this._xmlEventPrefabToName.get(c.KEY_PRESSED_X),this._xmlEventPrefabToName.get(c.KEY_PRESSED_Y),this._xmlEventPrefabToName.get(c.KEY_PRESSED_Z),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_0),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_1),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_2),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_3),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_4),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_5),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_6),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_7),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_8),this._xmlEventPrefabToName.get(c.KEY_PRESSED_NUMBER_9),this._xmlEventPrefabToName.get(c.KEY_PRESSED_EQUALS),this._xmlEventPrefabToName.get(c.KEY_PRESSED_SLASH),this._xmlEventPrefabToName.get(c.KEY_PRESSED_BACKSLASH),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_LEFTBRACKET),this._xmlEventPrefabToName.get(c.KEY_PRESSED_RIGHTBRACKET),this._xmlEventPrefabToName.get(c.KEY_PRESSED_BACKQUOTE),this._xmlEventPrefabToName.get(c.KEY_PRESSED_COMMA),this._xmlEventPrefabToName.get(c.KEY_PRESSED_COMMAND),this._xmlEventPrefabToName.get(c.KEY_PRESSED_MINUS),this._xmlEventPrefabToName.get(c.KEY_PRESSED_PERIOD),this._xmlEventPrefabToName.get(c.KEY_PRESSED_QUOTE),this._xmlEventPrefabToName.get(c.KEY_PRESSED_SEMICOLON),this._xmlEventPrefabToName.get(c.KEY_PRESSED_ANDROIDMENU),
this._xmlEventPrefabToName.get(c.KEY_PRESSED_ANDROIDSEARCH),this._xmlEventPrefabToName.get(c.KEY_PRESSED_UNKNOWN),this._xmlEventPrefabToName.get(c.KEY_RELEASED_ALT),this._xmlEventPrefabToName.get(c.KEY_RELEASED_BACKSPACE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_CAPS_LOCK),this._xmlEventPrefabToName.get(c.KEY_RELEASED_CONTROL),this._xmlEventPrefabToName.get(c.KEY_RELEASED_DELETE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_DOWN),this._xmlEventPrefabToName.get(c.KEY_RELEASED_END),this._xmlEventPrefabToName.get(c.KEY_RELEASED_ENTER),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_ESCAPE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F1),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F10),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F11),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F12),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F13),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F14),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F15),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F2),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F3),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_F4),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F5),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F6),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F7),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F8),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F9),this._xmlEventPrefabToName.get(c.KEY_RELEASED_HOME),this._xmlEventPrefabToName.get(c.KEY_RELEASED_INSERT),this._xmlEventPrefabToName.get(c.KEY_RELEASED_LEFT),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_0),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_1),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_2),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_3),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_4),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_5),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_6),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_7),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_8),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_9),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_ADD),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_DECIMAL),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_DIVIDE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_ENTER),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_MULTIPLY),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMPAD_SUBTRACT),this._xmlEventPrefabToName.get(c.KEY_RELEASED_PAGE_DOWN),this._xmlEventPrefabToName.get(c.KEY_RELEASED_PAGE_UP),this._xmlEventPrefabToName.get(c.KEY_RELEASED_RIGHT),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_SHIFT),this._xmlEventPrefabToName.get(c.KEY_RELEASED_SPACE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_TAB),this._xmlEventPrefabToName.get(c.KEY_RELEASED_UP),this._xmlEventPrefabToName.get(c.KEY_RELEASED_A),this._xmlEventPrefabToName.get(c.KEY_RELEASED_B),this._xmlEventPrefabToName.get(c.KEY_RELEASED_C),this._xmlEventPrefabToName.get(c.KEY_RELEASED_D),this._xmlEventPrefabToName.get(c.KEY_RELEASED_E),this._xmlEventPrefabToName.get(c.KEY_RELEASED_F),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_G),this._xmlEventPrefabToName.get(c.KEY_RELEASED_H),this._xmlEventPrefabToName.get(c.KEY_RELEASED_I),this._xmlEventPrefabToName.get(c.KEY_RELEASED_J),this._xmlEventPrefabToName.get(c.KEY_RELEASED_K),this._xmlEventPrefabToName.get(c.KEY_RELEASED_L),this._xmlEventPrefabToName.get(c.KEY_RELEASED_M),this._xmlEventPrefabToName.get(c.KEY_RELEASED_N),this._xmlEventPrefabToName.get(c.KEY_RELEASED_O),this._xmlEventPrefabToName.get(c.KEY_RELEASED_P),this._xmlEventPrefabToName.get(c.KEY_RELEASED_Q),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_R),this._xmlEventPrefabToName.get(c.KEY_RELEASED_S),this._xmlEventPrefabToName.get(c.KEY_RELEASED_T),this._xmlEventPrefabToName.get(c.KEY_RELEASED_U),this._xmlEventPrefabToName.get(c.KEY_RELEASED_V),this._xmlEventPrefabToName.get(c.KEY_RELEASED_W),this._xmlEventPrefabToName.get(c.KEY_RELEASED_X),this._xmlEventPrefabToName.get(c.KEY_RELEASED_Y),this._xmlEventPrefabToName.get(c.KEY_RELEASED_Z),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_0),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_1),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_2),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_3),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_4),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_5),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_6),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_7),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_8),this._xmlEventPrefabToName.get(c.KEY_RELEASED_NUMBER_9),this._xmlEventPrefabToName.get(c.KEY_RELEASED_EQUALS),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_SLASH),this._xmlEventPrefabToName.get(c.KEY_RELEASED_BACKSLASH),this._xmlEventPrefabToName.get(c.KEY_RELEASED_LEFTBRACKET),this._xmlEventPrefabToName.get(c.KEY_RELEASED_RIGHTBRACKET),this._xmlEventPrefabToName.get(c.KEY_RELEASED_BACKQUOTE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_COMMA),this._xmlEventPrefabToName.get(c.KEY_RELEASED_COMMAND),this._xmlEventPrefabToName.get(c.KEY_RELEASED_MINUS),this._xmlEventPrefabToName.get(c.KEY_RELEASED_PERIOD),
this._xmlEventPrefabToName.get(c.KEY_RELEASED_QUOTE),this._xmlEventPrefabToName.get(c.KEY_RELEASED_SEMICOLON),this._xmlEventPrefabToName.get(c.KEY_RELEASED_ANDROIDMENU),this._xmlEventPrefabToName.get(c.KEY_RELEASED_ANDROIDSEARCH),this._xmlEventPrefabToName.get(c.KEY_RELEASED_UNKNOWN)]));return B.RNode(this._xmlNodeTypeToNodeName.get(j.EVENT),[],a)},__class__:kh};var lh=function(){};h["tools.spark.sliced.services.std.logic.gde.interfaces.IGameEntity"]=lh;lh.__name__=!0;lh.__interfaces__=[Xc];lh.prototype=
{__class__:lh};var Ne=function(){this._init()};h["tools.spark.sliced.services.std.logic.gde.core.GameEntity"]=Ne;Ne.__name__=!0;Ne.__interfaces__=[lh];Ne.__super__=Xa;Ne.prototype=t(Xa.prototype,{_init:function(){this.gameStateSet=new D;this.possibleActionSet=new D;this.currentActionSet=new D},doActions:function(){for(var a=this.currentActionSet.iterator();a.hasNext();)for(var b=a.next(),d=0;d<b.length;){var c=b[d];++d;c.doPass()}a=0;for(b=this.gameForm.gameSpace.gameEntitySet;a<b.length;)d=b[a],
++a,d.doActions()},addState:function(a){null!=this.gameStateSet.get(a.id)&&null;this.gameStateSet.set(a.id,a);a},addAction:function(a){if(null!=this.possibleActionSet.get(a.id))null;else{var b=[];this.currentActionSet.set(a.id,b);b}this.possibleActionSet.set(a.id,a);a},getAction:function(a){return this.possibleActionSet.get(a)},startAction:function(a){a=this.possibleActionSet.get(a);if(null!=a){switch(a.concurrency[1]){case 0:this.currentActionSet.get(a.id).push(a);break;case 1:0==this.currentActionSet.get(a.id).length&&
this.currentActionSet.get(a.id).push(a);break;case 2:for(;0<this.currentActionSet.get(a.id).length;)this.currentActionSet.get(a.id).pop();this.currentActionSet.get(a.id).push(a)}return!0}return!1},stopAction:function(a){if(this.currentActionSet.exists(a)){for(;0<this.currentActionSet.get(a).length;)this.currentActionSet.get(a).pop();return!0}return!1},getState:function(a){return null==this.gameStateSet.get(a)?null:this.gameStateSet.get(a).value},setState:function(a,b){this.gameStateSet.get(a).value=
b;K.display.updateDisplayObjectState(this,a);return this.gameStateSet.get(a).value},addChild:function(a){this.get_children().push(a);a.parentEntity=this;K.display.addDisplayObjectChild(this,a)},removeChild:function(a){var b=this.get_children();C.remove(b,a);K.display.removeDisplayObjectChild(this,a)},getChildren:function(){return this.get_children()},get_children:function(){return this.gameForm.gameSpace.gameEntitySet},__class__:Ne});var kj=function(){};h["tools.spark.sliced.services.std.logic.gde.interfaces.IGameFactory"]=
kj;kj.__name__=!0;kj.prototype={__class__:kj};var hh=function(){this._init()};h["tools.spark.sliced.services.std.logic.gde.core.GameFactory"]=hh;hh.__name__=!0;hh.__interfaces__=[kj];hh.prototype={_init:function(){this._gameClassParser=new jh},createGameEntityExtended:function(a,b){var d=this._gameClassParser.getGameNode(V.ENTITY,b);d.set("extends",a);return this.createGameEntity(null,d)},createGameEntityByXml:function(a){return this.createGameEntity(null,a)},createGameEntity:function(a,b){var d=
this._gameClassParser.getGameNode(V.ENTITY,a,b);if(null!=d){if(this._gameClassParser.parseGameNode(d))return d=this._gameClassParser.instantiateEntity(d),null!=d?d:null;P.debug(d.toString())}return null},__class__:hh};var mh=function(){};h["tools.spark.sliced.services.std.logic.gde.interfaces.IGameForm"]=mh;mh.__name__=!0;mh.__interfaces__=[Xc];mh.prototype={__class__:mh};var Re=function(){this._init()};h["tools.spark.sliced.services.std.logic.gde.core.GameForm"]=Re;Re.__name__=!0;Re.__interfaces__=
[mh];Re.__super__=Xa;Re.prototype=t(Xa.prototype,{_init:function(){this.gameStateSet=new D},addState:function(a){null!=this.gameStateSet.get(a.id)&&null;this.gameStateSet.set(a.id,a);a},getState:function(a){return null==this.gameStateSet.get(a)?null:this.gameStateSet.get(a).value},setState:function(a,b){this.gameStateSet.get(a).value=b;return this.gameStateSet.get(a).value},__class__:Re});var nh=function(){};h["tools.spark.sliced.services.std.logic.gde.interfaces.IGameSpace"]=nh;nh.__name__=!0;nh.__interfaces__=
[Xc];nh.prototype={__class__:nh};var ig=function(){this._init()};h["tools.spark.sliced.services.std.logic.gde.core.GameSpace"]=ig;ig.__name__=!0;ig.__interfaces__=[nh];ig.__super__=Xa;ig.prototype=t(Xa.prototype,{_init:function(){this.gameEntitySet=[]},__class__:ig});var oh=function(){};h["tools.spark.sliced.services.std.logic.gde.interfaces.IGameState"]=oh;oh.__name__=!0;oh.__interfaces__=[Xc];oh.prototype={__class__:oh};var Se=function(){this._init()};h["tools.spark.sliced.services.std.logic.gde.core.GameState"]=
Se;Se.__name__=!0;Se.__interfaces__=[oh];Se.__super__=Xa;Se.prototype=t(Xa.prototype,{_init:function(){},__class__:Se});var ph=function(){};h["tools.spark.sliced.services.std.logic.gde.interfaces.IGameTrigger"]=ph;ph.__name__=!0;ph.__interfaces__=[Xc];ph.prototype={__class__:ph};var jg=function(){this._init()};h["tools.spark.sliced.services.std.logic.gde.core.GameTrigger"]=jg;jg.__name__=!0;jg.__interfaces__=[ph];jg.__super__=Xa;jg.prototype=t(Xa.prototype,{_init:function(){this.scriptSet=[]},doPass:function(){for(var a=
0,b=this.scriptSet;a<b.length;){var d=b[a];++a;-1==d?K.logic.gmlInterpreter.run(d,function(a){var b=new D;b.set("me",a.parentEntity);b.set("parent",a.parentEntity.parentEntity);return b}(this)):K.logic.scriptInterpreter.run(d,function(a){var b=new D;b.set("me",a.parentEntity);b.set("parent",a.parentEntity.parentEntity);return b}(this))}},__class__:jg});var S=h["tools.spark.sliced.services.std.logic.gde.interfaces.EConcurrencyType"]={__ename__:!0,__constructs__:["PARALLEL","PERSISTENT","TRANSIENT"]};
S.PARALLEL=["PARALLEL",0];S.PARALLEL.toString=g;S.PARALLEL.__enum__=S;S.PERSISTENT=["PERSISTENT",1];S.PERSISTENT.toString=g;S.PERSISTENT.__enum__=S;S.TRANSIENT=["TRANSIENT",2];S.TRANSIENT.toString=g;S.TRANSIENT.__enum__=S;var c=h["tools.spark.sliced.services.std.logic.gde.interfaces.EEventPrefab"]={__ename__:!0,__constructs__:"CREATED,UPDATE,CHANGED,NETWORK_CONNECTED,NETWORK_REQUEST,NETWORK_SERVER_EVENT,FILETRANSFER_CONNECTED,FILETRANSFER_SENDREQUEST,MOUSE_LEFT_CLICK,MOUSE_RIGHT_CLICK,MOUSE_LEFT_CLICKED,MOUSE_RIGHT_CLICKED,MOUSE_ENTERED,MOUSE_MOVED,MOUSE_LEFT,KEY_PRESSED,KEY_RELEASED,KEY_PRESSED_ALT,KEY_PRESSED_BACKSPACE,KEY_PRESSED_CAPS_LOCK,KEY_PRESSED_CONTROL,KEY_PRESSED_DELETE,KEY_PRESSED_DOWN,KEY_PRESSED_END,KEY_PRESSED_ENTER,KEY_PRESSED_ESCAPE,KEY_PRESSED_F1,KEY_PRESSED_F10,KEY_PRESSED_F11,KEY_PRESSED_F12,KEY_PRESSED_F13,KEY_PRESSED_F14,KEY_PRESSED_F15,KEY_PRESSED_F2,KEY_PRESSED_F3,KEY_PRESSED_F4,KEY_PRESSED_F5,KEY_PRESSED_F6,KEY_PRESSED_F7,KEY_PRESSED_F8,KEY_PRESSED_F9,KEY_PRESSED_HOME,KEY_PRESSED_INSERT,KEY_PRESSED_LEFT,KEY_PRESSED_NUMPAD_0,KEY_PRESSED_NUMPAD_1,KEY_PRESSED_NUMPAD_2,KEY_PRESSED_NUMPAD_3,KEY_PRESSED_NUMPAD_4,KEY_PRESSED_NUMPAD_5,KEY_PRESSED_NUMPAD_6,KEY_PRESSED_NUMPAD_7,KEY_PRESSED_NUMPAD_8,KEY_PRESSED_NUMPAD_9,KEY_PRESSED_NUMPAD_ADD,KEY_PRESSED_NUMPAD_DECIMAL,KEY_PRESSED_NUMPAD_DIVIDE,KEY_PRESSED_NUMPAD_ENTER,KEY_PRESSED_NUMPAD_MULTIPLY,KEY_PRESSED_NUMPAD_SUBTRACT,KEY_PRESSED_PAGE_DOWN,KEY_PRESSED_PAGE_UP,KEY_PRESSED_RIGHT,KEY_PRESSED_SHIFT,KEY_PRESSED_SPACE,KEY_PRESSED_TAB,KEY_PRESSED_UP,KEY_PRESSED_A,KEY_PRESSED_B,KEY_PRESSED_C,KEY_PRESSED_D,KEY_PRESSED_E,KEY_PRESSED_F,KEY_PRESSED_G,KEY_PRESSED_H,KEY_PRESSED_I,KEY_PRESSED_J,KEY_PRESSED_K,KEY_PRESSED_L,KEY_PRESSED_M,KEY_PRESSED_N,KEY_PRESSED_O,KEY_PRESSED_P,KEY_PRESSED_Q,KEY_PRESSED_R,KEY_PRESSED_S,KEY_PRESSED_T,KEY_PRESSED_U,KEY_PRESSED_V,KEY_PRESSED_W,KEY_PRESSED_X,KEY_PRESSED_Y,KEY_PRESSED_Z,KEY_PRESSED_NUMBER_0,KEY_PRESSED_NUMBER_1,KEY_PRESSED_NUMBER_2,KEY_PRESSED_NUMBER_3,KEY_PRESSED_NUMBER_4,KEY_PRESSED_NUMBER_5,KEY_PRESSED_NUMBER_6,KEY_PRESSED_NUMBER_7,KEY_PRESSED_NUMBER_8,KEY_PRESSED_NUMBER_9,KEY_PRESSED_EQUALS,KEY_PRESSED_SLASH,KEY_PRESSED_BACKSLASH,KEY_PRESSED_LEFTBRACKET,KEY_PRESSED_RIGHTBRACKET,KEY_PRESSED_BACKQUOTE,KEY_PRESSED_COMMA,KEY_PRESSED_COMMAND,KEY_PRESSED_MINUS,KEY_PRESSED_PERIOD,KEY_PRESSED_QUOTE,KEY_PRESSED_SEMICOLON,KEY_PRESSED_ANDROIDMENU,KEY_PRESSED_ANDROIDSEARCH,KEY_PRESSED_UNKNOWN,KEY_RELEASED_ALT,KEY_RELEASED_BACKSPACE,KEY_RELEASED_CAPS_LOCK,KEY_RELEASED_CONTROL,KEY_RELEASED_DELETE,KEY_RELEASED_DOWN,KEY_RELEASED_END,KEY_RELEASED_ENTER,KEY_RELEASED_ESCAPE,KEY_RELEASED_F1,KEY_RELEASED_F10,KEY_RELEASED_F11,KEY_RELEASED_F12,KEY_RELEASED_F13,KEY_RELEASED_F14,KEY_RELEASED_F15,KEY_RELEASED_F2,KEY_RELEASED_F3,KEY_RELEASED_F4,KEY_RELEASED_F5,KEY_RELEASED_F6,KEY_RELEASED_F7,KEY_RELEASED_F8,KEY_RELEASED_F9,KEY_RELEASED_HOME,KEY_RELEASED_INSERT,KEY_RELEASED_LEFT,KEY_RELEASED_NUMPAD_0,KEY_RELEASED_NUMPAD_1,KEY_RELEASED_NUMPAD_2,KEY_RELEASED_NUMPAD_3,KEY_RELEASED_NUMPAD_4,KEY_RELEASED_NUMPAD_5,KEY_RELEASED_NUMPAD_6,KEY_RELEASED_NUMPAD_7,KEY_RELEASED_NUMPAD_8,KEY_RELEASED_NUMPAD_9,KEY_RELEASED_NUMPAD_ADD,KEY_RELEASED_NUMPAD_DECIMAL,KEY_RELEASED_NUMPAD_DIVIDE,KEY_RELEASED_NUMPAD_ENTER,KEY_RELEASED_NUMPAD_MULTIPLY,KEY_RELEASED_NUMPAD_SUBTRACT,KEY_RELEASED_PAGE_DOWN,KEY_RELEASED_PAGE_UP,KEY_RELEASED_RIGHT,KEY_RELEASED_SHIFT,KEY_RELEASED_SPACE,KEY_RELEASED_TAB,KEY_RELEASED_UP,KEY_RELEASED_A,KEY_RELEASED_B,KEY_RELEASED_C,KEY_RELEASED_D,KEY_RELEASED_E,KEY_RELEASED_F,KEY_RELEASED_G,KEY_RELEASED_H,KEY_RELEASED_I,KEY_RELEASED_J,KEY_RELEASED_K,KEY_RELEASED_L,KEY_RELEASED_M,KEY_RELEASED_N,KEY_RELEASED_O,KEY_RELEASED_P,KEY_RELEASED_Q,KEY_RELEASED_R,KEY_RELEASED_S,KEY_RELEASED_T,KEY_RELEASED_U,KEY_RELEASED_V,KEY_RELEASED_W,KEY_RELEASED_X,KEY_RELEASED_Y,KEY_RELEASED_Z,KEY_RELEASED_NUMBER_0,KEY_RELEASED_NUMBER_1,KEY_RELEASED_NUMBER_2,KEY_RELEASED_NUMBER_3,KEY_RELEASED_NUMBER_4,KEY_RELEASED_NUMBER_5,KEY_RELEASED_NUMBER_6,KEY_RELEASED_NUMBER_7,KEY_RELEASED_NUMBER_8,KEY_RELEASED_NUMBER_9,KEY_RELEASED_EQUALS,KEY_RELEASED_SLASH,KEY_RELEASED_BACKSLASH,KEY_RELEASED_LEFTBRACKET,KEY_RELEASED_RIGHTBRACKET,KEY_RELEASED_BACKQUOTE,KEY_RELEASED_COMMA,KEY_RELEASED_COMMAND,KEY_RELEASED_MINUS,KEY_RELEASED_PERIOD,KEY_RELEASED_QUOTE,KEY_RELEASED_SEMICOLON,KEY_RELEASED_ANDROIDMENU,KEY_RELEASED_ANDROIDSEARCH,KEY_RELEASED_UNKNOWN".split(",")};
c.CREATED=["CREATED",0];c.CREATED.toString=g;c.CREATED.__enum__=c;c.UPDATE=["UPDATE",1];c.UPDATE.toString=g;c.UPDATE.__enum__=c;c.CHANGED=["CHANGED",2];c.CHANGED.toString=g;c.CHANGED.__enum__=c;c.NETWORK_CONNECTED=["NETWORK_CONNECTED",3];c.NETWORK_CONNECTED.toString=g;c.NETWORK_CONNECTED.__enum__=c;c.NETWORK_REQUEST=["NETWORK_REQUEST",4];c.NETWORK_REQUEST.toString=g;c.NETWORK_REQUEST.__enum__=c;c.NETWORK_SERVER_EVENT=["NETWORK_SERVER_EVENT",5];c.NETWORK_SERVER_EVENT.toString=g;c.NETWORK_SERVER_EVENT.__enum__=
c;c.FILETRANSFER_CONNECTED=["FILETRANSFER_CONNECTED",6];c.FILETRANSFER_CONNECTED.toString=g;c.FILETRANSFER_CONNECTED.__enum__=c;c.FILETRANSFER_SENDREQUEST=["FILETRANSFER_SENDREQUEST",7];c.FILETRANSFER_SENDREQUEST.toString=g;c.FILETRANSFER_SENDREQUEST.__enum__=c;c.MOUSE_LEFT_CLICK=["MOUSE_LEFT_CLICK",8];c.MOUSE_LEFT_CLICK.toString=g;c.MOUSE_LEFT_CLICK.__enum__=c;c.MOUSE_RIGHT_CLICK=["MOUSE_RIGHT_CLICK",9];c.MOUSE_RIGHT_CLICK.toString=g;c.MOUSE_RIGHT_CLICK.__enum__=c;c.MOUSE_LEFT_CLICKED=["MOUSE_LEFT_CLICKED",
10];c.MOUSE_LEFT_CLICKED.toString=g;c.MOUSE_LEFT_CLICKED.__enum__=c;c.MOUSE_RIGHT_CLICKED=["MOUSE_RIGHT_CLICKED",11];c.MOUSE_RIGHT_CLICKED.toString=g;c.MOUSE_RIGHT_CLICKED.__enum__=c;c.MOUSE_ENTERED=["MOUSE_ENTERED",12];c.MOUSE_ENTERED.toString=g;c.MOUSE_ENTERED.__enum__=c;c.MOUSE_MOVED=["MOUSE_MOVED",13];c.MOUSE_MOVED.toString=g;c.MOUSE_MOVED.__enum__=c;c.MOUSE_LEFT=["MOUSE_LEFT",14];c.MOUSE_LEFT.toString=g;c.MOUSE_LEFT.__enum__=c;c.KEY_PRESSED=["KEY_PRESSED",15];c.KEY_PRESSED.toString=g;c.KEY_PRESSED.__enum__=
c;c.KEY_RELEASED=["KEY_RELEASED",16];c.KEY_RELEASED.toString=g;c.KEY_RELEASED.__enum__=c;c.KEY_PRESSED_ALT=["KEY_PRESSED_ALT",17];c.KEY_PRESSED_ALT.toString=g;c.KEY_PRESSED_ALT.__enum__=c;c.KEY_PRESSED_BACKSPACE=["KEY_PRESSED_BACKSPACE",18];c.KEY_PRESSED_BACKSPACE.toString=g;c.KEY_PRESSED_BACKSPACE.__enum__=c;c.KEY_PRESSED_CAPS_LOCK=["KEY_PRESSED_CAPS_LOCK",19];c.KEY_PRESSED_CAPS_LOCK.toString=g;c.KEY_PRESSED_CAPS_LOCK.__enum__=c;c.KEY_PRESSED_CONTROL=["KEY_PRESSED_CONTROL",20];c.KEY_PRESSED_CONTROL.toString=
g;c.KEY_PRESSED_CONTROL.__enum__=c;c.KEY_PRESSED_DELETE=["KEY_PRESSED_DELETE",21];c.KEY_PRESSED_DELETE.toString=g;c.KEY_PRESSED_DELETE.__enum__=c;c.KEY_PRESSED_DOWN=["KEY_PRESSED_DOWN",22];c.KEY_PRESSED_DOWN.toString=g;c.KEY_PRESSED_DOWN.__enum__=c;c.KEY_PRESSED_END=["KEY_PRESSED_END",23];c.KEY_PRESSED_END.toString=g;c.KEY_PRESSED_END.__enum__=c;c.KEY_PRESSED_ENTER=["KEY_PRESSED_ENTER",24];c.KEY_PRESSED_ENTER.toString=g;c.KEY_PRESSED_ENTER.__enum__=c;c.KEY_PRESSED_ESCAPE=["KEY_PRESSED_ESCAPE",25];
c.KEY_PRESSED_ESCAPE.toString=g;c.KEY_PRESSED_ESCAPE.__enum__=c;c.KEY_PRESSED_F1=["KEY_PRESSED_F1",26];c.KEY_PRESSED_F1.toString=g;c.KEY_PRESSED_F1.__enum__=c;c.KEY_PRESSED_F10=["KEY_PRESSED_F10",27];c.KEY_PRESSED_F10.toString=g;c.KEY_PRESSED_F10.__enum__=c;c.KEY_PRESSED_F11=["KEY_PRESSED_F11",28];c.KEY_PRESSED_F11.toString=g;c.KEY_PRESSED_F11.__enum__=c;c.KEY_PRESSED_F12=["KEY_PRESSED_F12",29];c.KEY_PRESSED_F12.toString=g;c.KEY_PRESSED_F12.__enum__=c;c.KEY_PRESSED_F13=["KEY_PRESSED_F13",30];c.KEY_PRESSED_F13.toString=
g;c.KEY_PRESSED_F13.__enum__=c;c.KEY_PRESSED_F14=["KEY_PRESSED_F14",31];c.KEY_PRESSED_F14.toString=g;c.KEY_PRESSED_F14.__enum__=c;c.KEY_PRESSED_F15=["KEY_PRESSED_F15",32];c.KEY_PRESSED_F15.toString=g;c.KEY_PRESSED_F15.__enum__=c;c.KEY_PRESSED_F2=["KEY_PRESSED_F2",33];c.KEY_PRESSED_F2.toString=g;c.KEY_PRESSED_F2.__enum__=c;c.KEY_PRESSED_F3=["KEY_PRESSED_F3",34];c.KEY_PRESSED_F3.toString=g;c.KEY_PRESSED_F3.__enum__=c;c.KEY_PRESSED_F4=["KEY_PRESSED_F4",35];c.KEY_PRESSED_F4.toString=g;c.KEY_PRESSED_F4.__enum__=
c;c.KEY_PRESSED_F5=["KEY_PRESSED_F5",36];c.KEY_PRESSED_F5.toString=g;c.KEY_PRESSED_F5.__enum__=c;c.KEY_PRESSED_F6=["KEY_PRESSED_F6",37];c.KEY_PRESSED_F6.toString=g;c.KEY_PRESSED_F6.__enum__=c;c.KEY_PRESSED_F7=["KEY_PRESSED_F7",38];c.KEY_PRESSED_F7.toString=g;c.KEY_PRESSED_F7.__enum__=c;c.KEY_PRESSED_F8=["KEY_PRESSED_F8",39];c.KEY_PRESSED_F8.toString=g;c.KEY_PRESSED_F8.__enum__=c;c.KEY_PRESSED_F9=["KEY_PRESSED_F9",40];c.KEY_PRESSED_F9.toString=g;c.KEY_PRESSED_F9.__enum__=c;c.KEY_PRESSED_HOME=["KEY_PRESSED_HOME",
41];c.KEY_PRESSED_HOME.toString=g;c.KEY_PRESSED_HOME.__enum__=c;c.KEY_PRESSED_INSERT=["KEY_PRESSED_INSERT",42];c.KEY_PRESSED_INSERT.toString=g;c.KEY_PRESSED_INSERT.__enum__=c;c.KEY_PRESSED_LEFT=["KEY_PRESSED_LEFT",43];c.KEY_PRESSED_LEFT.toString=g;c.KEY_PRESSED_LEFT.__enum__=c;c.KEY_PRESSED_NUMPAD_0=["KEY_PRESSED_NUMPAD_0",44];c.KEY_PRESSED_NUMPAD_0.toString=g;c.KEY_PRESSED_NUMPAD_0.__enum__=c;c.KEY_PRESSED_NUMPAD_1=["KEY_PRESSED_NUMPAD_1",45];c.KEY_PRESSED_NUMPAD_1.toString=g;c.KEY_PRESSED_NUMPAD_1.__enum__=
c;c.KEY_PRESSED_NUMPAD_2=["KEY_PRESSED_NUMPAD_2",46];c.KEY_PRESSED_NUMPAD_2.toString=g;c.KEY_PRESSED_NUMPAD_2.__enum__=c;c.KEY_PRESSED_NUMPAD_3=["KEY_PRESSED_NUMPAD_3",47];c.KEY_PRESSED_NUMPAD_3.toString=g;c.KEY_PRESSED_NUMPAD_3.__enum__=c;c.KEY_PRESSED_NUMPAD_4=["KEY_PRESSED_NUMPAD_4",48];c.KEY_PRESSED_NUMPAD_4.toString=g;c.KEY_PRESSED_NUMPAD_4.__enum__=c;c.KEY_PRESSED_NUMPAD_5=["KEY_PRESSED_NUMPAD_5",49];c.KEY_PRESSED_NUMPAD_5.toString=g;c.KEY_PRESSED_NUMPAD_5.__enum__=c;c.KEY_PRESSED_NUMPAD_6=
["KEY_PRESSED_NUMPAD_6",50];c.KEY_PRESSED_NUMPAD_6.toString=g;c.KEY_PRESSED_NUMPAD_6.__enum__=c;c.KEY_PRESSED_NUMPAD_7=["KEY_PRESSED_NUMPAD_7",51];c.KEY_PRESSED_NUMPAD_7.toString=g;c.KEY_PRESSED_NUMPAD_7.__enum__=c;c.KEY_PRESSED_NUMPAD_8=["KEY_PRESSED_NUMPAD_8",52];c.KEY_PRESSED_NUMPAD_8.toString=g;c.KEY_PRESSED_NUMPAD_8.__enum__=c;c.KEY_PRESSED_NUMPAD_9=["KEY_PRESSED_NUMPAD_9",53];c.KEY_PRESSED_NUMPAD_9.toString=g;c.KEY_PRESSED_NUMPAD_9.__enum__=c;c.KEY_PRESSED_NUMPAD_ADD=["KEY_PRESSED_NUMPAD_ADD",
54];c.KEY_PRESSED_NUMPAD_ADD.toString=g;c.KEY_PRESSED_NUMPAD_ADD.__enum__=c;c.KEY_PRESSED_NUMPAD_DECIMAL=["KEY_PRESSED_NUMPAD_DECIMAL",55];c.KEY_PRESSED_NUMPAD_DECIMAL.toString=g;c.KEY_PRESSED_NUMPAD_DECIMAL.__enum__=c;c.KEY_PRESSED_NUMPAD_DIVIDE=["KEY_PRESSED_NUMPAD_DIVIDE",56];c.KEY_PRESSED_NUMPAD_DIVIDE.toString=g;c.KEY_PRESSED_NUMPAD_DIVIDE.__enum__=c;c.KEY_PRESSED_NUMPAD_ENTER=["KEY_PRESSED_NUMPAD_ENTER",57];c.KEY_PRESSED_NUMPAD_ENTER.toString=g;c.KEY_PRESSED_NUMPAD_ENTER.__enum__=c;c.KEY_PRESSED_NUMPAD_MULTIPLY=
["KEY_PRESSED_NUMPAD_MULTIPLY",58];c.KEY_PRESSED_NUMPAD_MULTIPLY.toString=g;c.KEY_PRESSED_NUMPAD_MULTIPLY.__enum__=c;c.KEY_PRESSED_NUMPAD_SUBTRACT=["KEY_PRESSED_NUMPAD_SUBTRACT",59];c.KEY_PRESSED_NUMPAD_SUBTRACT.toString=g;c.KEY_PRESSED_NUMPAD_SUBTRACT.__enum__=c;c.KEY_PRESSED_PAGE_DOWN=["KEY_PRESSED_PAGE_DOWN",60];c.KEY_PRESSED_PAGE_DOWN.toString=g;c.KEY_PRESSED_PAGE_DOWN.__enum__=c;c.KEY_PRESSED_PAGE_UP=["KEY_PRESSED_PAGE_UP",61];c.KEY_PRESSED_PAGE_UP.toString=g;c.KEY_PRESSED_PAGE_UP.__enum__=c;
c.KEY_PRESSED_RIGHT=["KEY_PRESSED_RIGHT",62];c.KEY_PRESSED_RIGHT.toString=g;c.KEY_PRESSED_RIGHT.__enum__=c;c.KEY_PRESSED_SHIFT=["KEY_PRESSED_SHIFT",63];c.KEY_PRESSED_SHIFT.toString=g;c.KEY_PRESSED_SHIFT.__enum__=c;c.KEY_PRESSED_SPACE=["KEY_PRESSED_SPACE",64];c.KEY_PRESSED_SPACE.toString=g;c.KEY_PRESSED_SPACE.__enum__=c;c.KEY_PRESSED_TAB=["KEY_PRESSED_TAB",65];c.KEY_PRESSED_TAB.toString=g;c.KEY_PRESSED_TAB.__enum__=c;c.KEY_PRESSED_UP=["KEY_PRESSED_UP",66];c.KEY_PRESSED_UP.toString=g;c.KEY_PRESSED_UP.__enum__=
c;c.KEY_PRESSED_A=["KEY_PRESSED_A",67];c.KEY_PRESSED_A.toString=g;c.KEY_PRESSED_A.__enum__=c;c.KEY_PRESSED_B=["KEY_PRESSED_B",68];c.KEY_PRESSED_B.toString=g;c.KEY_PRESSED_B.__enum__=c;c.KEY_PRESSED_C=["KEY_PRESSED_C",69];c.KEY_PRESSED_C.toString=g;c.KEY_PRESSED_C.__enum__=c;c.KEY_PRESSED_D=["KEY_PRESSED_D",70];c.KEY_PRESSED_D.toString=g;c.KEY_PRESSED_D.__enum__=c;c.KEY_PRESSED_E=["KEY_PRESSED_E",71];c.KEY_PRESSED_E.toString=g;c.KEY_PRESSED_E.__enum__=c;c.KEY_PRESSED_F=["KEY_PRESSED_F",72];c.KEY_PRESSED_F.toString=
g;c.KEY_PRESSED_F.__enum__=c;c.KEY_PRESSED_G=["KEY_PRESSED_G",73];c.KEY_PRESSED_G.toString=g;c.KEY_PRESSED_G.__enum__=c;c.KEY_PRESSED_H=["KEY_PRESSED_H",74];c.KEY_PRESSED_H.toString=g;c.KEY_PRESSED_H.__enum__=c;c.KEY_PRESSED_I=["KEY_PRESSED_I",75];c.KEY_PRESSED_I.toString=g;c.KEY_PRESSED_I.__enum__=c;c.KEY_PRESSED_J=["KEY_PRESSED_J",76];c.KEY_PRESSED_J.toString=g;c.KEY_PRESSED_J.__enum__=c;c.KEY_PRESSED_K=["KEY_PRESSED_K",77];c.KEY_PRESSED_K.toString=g;c.KEY_PRESSED_K.__enum__=c;c.KEY_PRESSED_L=["KEY_PRESSED_L",
78];c.KEY_PRESSED_L.toString=g;c.KEY_PRESSED_L.__enum__=c;c.KEY_PRESSED_M=["KEY_PRESSED_M",79];c.KEY_PRESSED_M.toString=g;c.KEY_PRESSED_M.__enum__=c;c.KEY_PRESSED_N=["KEY_PRESSED_N",80];c.KEY_PRESSED_N.toString=g;c.KEY_PRESSED_N.__enum__=c;c.KEY_PRESSED_O=["KEY_PRESSED_O",81];c.KEY_PRESSED_O.toString=g;c.KEY_PRESSED_O.__enum__=c;c.KEY_PRESSED_P=["KEY_PRESSED_P",82];c.KEY_PRESSED_P.toString=g;c.KEY_PRESSED_P.__enum__=c;c.KEY_PRESSED_Q=["KEY_PRESSED_Q",83];c.KEY_PRESSED_Q.toString=g;c.KEY_PRESSED_Q.__enum__=
c;c.KEY_PRESSED_R=["KEY_PRESSED_R",84];c.KEY_PRESSED_R.toString=g;c.KEY_PRESSED_R.__enum__=c;c.KEY_PRESSED_S=["KEY_PRESSED_S",85];c.KEY_PRESSED_S.toString=g;c.KEY_PRESSED_S.__enum__=c;c.KEY_PRESSED_T=["KEY_PRESSED_T",86];c.KEY_PRESSED_T.toString=g;c.KEY_PRESSED_T.__enum__=c;c.KEY_PRESSED_U=["KEY_PRESSED_U",87];c.KEY_PRESSED_U.toString=g;c.KEY_PRESSED_U.__enum__=c;c.KEY_PRESSED_V=["KEY_PRESSED_V",88];c.KEY_PRESSED_V.toString=g;c.KEY_PRESSED_V.__enum__=c;c.KEY_PRESSED_W=["KEY_PRESSED_W",89];c.KEY_PRESSED_W.toString=
g;c.KEY_PRESSED_W.__enum__=c;c.KEY_PRESSED_X=["KEY_PRESSED_X",90];c.KEY_PRESSED_X.toString=g;c.KEY_PRESSED_X.__enum__=c;c.KEY_PRESSED_Y=["KEY_PRESSED_Y",91];c.KEY_PRESSED_Y.toString=g;c.KEY_PRESSED_Y.__enum__=c;c.KEY_PRESSED_Z=["KEY_PRESSED_Z",92];c.KEY_PRESSED_Z.toString=g;c.KEY_PRESSED_Z.__enum__=c;c.KEY_PRESSED_NUMBER_0=["KEY_PRESSED_NUMBER_0",93];c.KEY_PRESSED_NUMBER_0.toString=g;c.KEY_PRESSED_NUMBER_0.__enum__=c;c.KEY_PRESSED_NUMBER_1=["KEY_PRESSED_NUMBER_1",94];c.KEY_PRESSED_NUMBER_1.toString=
g;c.KEY_PRESSED_NUMBER_1.__enum__=c;c.KEY_PRESSED_NUMBER_2=["KEY_PRESSED_NUMBER_2",95];c.KEY_PRESSED_NUMBER_2.toString=g;c.KEY_PRESSED_NUMBER_2.__enum__=c;c.KEY_PRESSED_NUMBER_3=["KEY_PRESSED_NUMBER_3",96];c.KEY_PRESSED_NUMBER_3.toString=g;c.KEY_PRESSED_NUMBER_3.__enum__=c;c.KEY_PRESSED_NUMBER_4=["KEY_PRESSED_NUMBER_4",97];c.KEY_PRESSED_NUMBER_4.toString=g;c.KEY_PRESSED_NUMBER_4.__enum__=c;c.KEY_PRESSED_NUMBER_5=["KEY_PRESSED_NUMBER_5",98];c.KEY_PRESSED_NUMBER_5.toString=g;c.KEY_PRESSED_NUMBER_5.__enum__=
c;c.KEY_PRESSED_NUMBER_6=["KEY_PRESSED_NUMBER_6",99];c.KEY_PRESSED_NUMBER_6.toString=g;c.KEY_PRESSED_NUMBER_6.__enum__=c;c.KEY_PRESSED_NUMBER_7=["KEY_PRESSED_NUMBER_7",100];c.KEY_PRESSED_NUMBER_7.toString=g;c.KEY_PRESSED_NUMBER_7.__enum__=c;c.KEY_PRESSED_NUMBER_8=["KEY_PRESSED_NUMBER_8",101];c.KEY_PRESSED_NUMBER_8.toString=g;c.KEY_PRESSED_NUMBER_8.__enum__=c;c.KEY_PRESSED_NUMBER_9=["KEY_PRESSED_NUMBER_9",102];c.KEY_PRESSED_NUMBER_9.toString=g;c.KEY_PRESSED_NUMBER_9.__enum__=c;c.KEY_PRESSED_EQUALS=
["KEY_PRESSED_EQUALS",103];c.KEY_PRESSED_EQUALS.toString=g;c.KEY_PRESSED_EQUALS.__enum__=c;c.KEY_PRESSED_SLASH=["KEY_PRESSED_SLASH",104];c.KEY_PRESSED_SLASH.toString=g;c.KEY_PRESSED_SLASH.__enum__=c;c.KEY_PRESSED_BACKSLASH=["KEY_PRESSED_BACKSLASH",105];c.KEY_PRESSED_BACKSLASH.toString=g;c.KEY_PRESSED_BACKSLASH.__enum__=c;c.KEY_PRESSED_LEFTBRACKET=["KEY_PRESSED_LEFTBRACKET",106];c.KEY_PRESSED_LEFTBRACKET.toString=g;c.KEY_PRESSED_LEFTBRACKET.__enum__=c;c.KEY_PRESSED_RIGHTBRACKET=["KEY_PRESSED_RIGHTBRACKET",
107];c.KEY_PRESSED_RIGHTBRACKET.toString=g;c.KEY_PRESSED_RIGHTBRACKET.__enum__=c;c.KEY_PRESSED_BACKQUOTE=["KEY_PRESSED_BACKQUOTE",108];c.KEY_PRESSED_BACKQUOTE.toString=g;c.KEY_PRESSED_BACKQUOTE.__enum__=c;c.KEY_PRESSED_COMMA=["KEY_PRESSED_COMMA",109];c.KEY_PRESSED_COMMA.toString=g;c.KEY_PRESSED_COMMA.__enum__=c;c.KEY_PRESSED_COMMAND=["KEY_PRESSED_COMMAND",110];c.KEY_PRESSED_COMMAND.toString=g;c.KEY_PRESSED_COMMAND.__enum__=c;c.KEY_PRESSED_MINUS=["KEY_PRESSED_MINUS",111];c.KEY_PRESSED_MINUS.toString=
g;c.KEY_PRESSED_MINUS.__enum__=c;c.KEY_PRESSED_PERIOD=["KEY_PRESSED_PERIOD",112];c.KEY_PRESSED_PERIOD.toString=g;c.KEY_PRESSED_PERIOD.__enum__=c;c.KEY_PRESSED_QUOTE=["KEY_PRESSED_QUOTE",113];c.KEY_PRESSED_QUOTE.toString=g;c.KEY_PRESSED_QUOTE.__enum__=c;c.KEY_PRESSED_SEMICOLON=["KEY_PRESSED_SEMICOLON",114];c.KEY_PRESSED_SEMICOLON.toString=g;c.KEY_PRESSED_SEMICOLON.__enum__=c;c.KEY_PRESSED_ANDROIDMENU=["KEY_PRESSED_ANDROIDMENU",115];c.KEY_PRESSED_ANDROIDMENU.toString=g;c.KEY_PRESSED_ANDROIDMENU.__enum__=
c;c.KEY_PRESSED_ANDROIDSEARCH=["KEY_PRESSED_ANDROIDSEARCH",116];c.KEY_PRESSED_ANDROIDSEARCH.toString=g;c.KEY_PRESSED_ANDROIDSEARCH.__enum__=c;c.KEY_PRESSED_UNKNOWN=["KEY_PRESSED_UNKNOWN",117];c.KEY_PRESSED_UNKNOWN.toString=g;c.KEY_PRESSED_UNKNOWN.__enum__=c;c.KEY_RELEASED_ALT=["KEY_RELEASED_ALT",118];c.KEY_RELEASED_ALT.toString=g;c.KEY_RELEASED_ALT.__enum__=c;c.KEY_RELEASED_BACKSPACE=["KEY_RELEASED_BACKSPACE",119];c.KEY_RELEASED_BACKSPACE.toString=g;c.KEY_RELEASED_BACKSPACE.__enum__=c;c.KEY_RELEASED_CAPS_LOCK=
["KEY_RELEASED_CAPS_LOCK",120];c.KEY_RELEASED_CAPS_LOCK.toString=g;c.KEY_RELEASED_CAPS_LOCK.__enum__=c;c.KEY_RELEASED_CONTROL=["KEY_RELEASED_CONTROL",121];c.KEY_RELEASED_CONTROL.toString=g;c.KEY_RELEASED_CONTROL.__enum__=c;c.KEY_RELEASED_DELETE=["KEY_RELEASED_DELETE",122];c.KEY_RELEASED_DELETE.toString=g;c.KEY_RELEASED_DELETE.__enum__=c;c.KEY_RELEASED_DOWN=["KEY_RELEASED_DOWN",123];c.KEY_RELEASED_DOWN.toString=g;c.KEY_RELEASED_DOWN.__enum__=c;c.KEY_RELEASED_END=["KEY_RELEASED_END",124];c.KEY_RELEASED_END.toString=
g;c.KEY_RELEASED_END.__enum__=c;c.KEY_RELEASED_ENTER=["KEY_RELEASED_ENTER",125];c.KEY_RELEASED_ENTER.toString=g;c.KEY_RELEASED_ENTER.__enum__=c;c.KEY_RELEASED_ESCAPE=["KEY_RELEASED_ESCAPE",126];c.KEY_RELEASED_ESCAPE.toString=g;c.KEY_RELEASED_ESCAPE.__enum__=c;c.KEY_RELEASED_F1=["KEY_RELEASED_F1",127];c.KEY_RELEASED_F1.toString=g;c.KEY_RELEASED_F1.__enum__=c;c.KEY_RELEASED_F10=["KEY_RELEASED_F10",128];c.KEY_RELEASED_F10.toString=g;c.KEY_RELEASED_F10.__enum__=c;c.KEY_RELEASED_F11=["KEY_RELEASED_F11",
129];c.KEY_RELEASED_F11.toString=g;c.KEY_RELEASED_F11.__enum__=c;c.KEY_RELEASED_F12=["KEY_RELEASED_F12",130];c.KEY_RELEASED_F12.toString=g;c.KEY_RELEASED_F12.__enum__=c;c.KEY_RELEASED_F13=["KEY_RELEASED_F13",131];c.KEY_RELEASED_F13.toString=g;c.KEY_RELEASED_F13.__enum__=c;c.KEY_RELEASED_F14=["KEY_RELEASED_F14",132];c.KEY_RELEASED_F14.toString=g;c.KEY_RELEASED_F14.__enum__=c;c.KEY_RELEASED_F15=["KEY_RELEASED_F15",133];c.KEY_RELEASED_F15.toString=g;c.KEY_RELEASED_F15.__enum__=c;c.KEY_RELEASED_F2=["KEY_RELEASED_F2",
134];c.KEY_RELEASED_F2.toString=g;c.KEY_RELEASED_F2.__enum__=c;c.KEY_RELEASED_F3=["KEY_RELEASED_F3",135];c.KEY_RELEASED_F3.toString=g;c.KEY_RELEASED_F3.__enum__=c;c.KEY_RELEASED_F4=["KEY_RELEASED_F4",136];c.KEY_RELEASED_F4.toString=g;c.KEY_RELEASED_F4.__enum__=c;c.KEY_RELEASED_F5=["KEY_RELEASED_F5",137];c.KEY_RELEASED_F5.toString=g;c.KEY_RELEASED_F5.__enum__=c;c.KEY_RELEASED_F6=["KEY_RELEASED_F6",138];c.KEY_RELEASED_F6.toString=g;c.KEY_RELEASED_F6.__enum__=c;c.KEY_RELEASED_F7=["KEY_RELEASED_F7",139];
c.KEY_RELEASED_F7.toString=g;c.KEY_RELEASED_F7.__enum__=c;c.KEY_RELEASED_F8=["KEY_RELEASED_F8",140];c.KEY_RELEASED_F8.toString=g;c.KEY_RELEASED_F8.__enum__=c;c.KEY_RELEASED_F9=["KEY_RELEASED_F9",141];c.KEY_RELEASED_F9.toString=g;c.KEY_RELEASED_F9.__enum__=c;c.KEY_RELEASED_HOME=["KEY_RELEASED_HOME",142];c.KEY_RELEASED_HOME.toString=g;c.KEY_RELEASED_HOME.__enum__=c;c.KEY_RELEASED_INSERT=["KEY_RELEASED_INSERT",143];c.KEY_RELEASED_INSERT.toString=g;c.KEY_RELEASED_INSERT.__enum__=c;c.KEY_RELEASED_LEFT=
["KEY_RELEASED_LEFT",144];c.KEY_RELEASED_LEFT.toString=g;c.KEY_RELEASED_LEFT.__enum__=c;c.KEY_RELEASED_NUMPAD_0=["KEY_RELEASED_NUMPAD_0",145];c.KEY_RELEASED_NUMPAD_0.toString=g;c.KEY_RELEASED_NUMPAD_0.__enum__=c;c.KEY_RELEASED_NUMPAD_1=["KEY_RELEASED_NUMPAD_1",146];c.KEY_RELEASED_NUMPAD_1.toString=g;c.KEY_RELEASED_NUMPAD_1.__enum__=c;c.KEY_RELEASED_NUMPAD_2=["KEY_RELEASED_NUMPAD_2",147];c.KEY_RELEASED_NUMPAD_2.toString=g;c.KEY_RELEASED_NUMPAD_2.__enum__=c;c.KEY_RELEASED_NUMPAD_3=["KEY_RELEASED_NUMPAD_3",
148];c.KEY_RELEASED_NUMPAD_3.toString=g;c.KEY_RELEASED_NUMPAD_3.__enum__=c;c.KEY_RELEASED_NUMPAD_4=["KEY_RELEASED_NUMPAD_4",149];c.KEY_RELEASED_NUMPAD_4.toString=g;c.KEY_RELEASED_NUMPAD_4.__enum__=c;c.KEY_RELEASED_NUMPAD_5=["KEY_RELEASED_NUMPAD_5",150];c.KEY_RELEASED_NUMPAD_5.toString=g;c.KEY_RELEASED_NUMPAD_5.__enum__=c;c.KEY_RELEASED_NUMPAD_6=["KEY_RELEASED_NUMPAD_6",151];c.KEY_RELEASED_NUMPAD_6.toString=g;c.KEY_RELEASED_NUMPAD_6.__enum__=c;c.KEY_RELEASED_NUMPAD_7=["KEY_RELEASED_NUMPAD_7",152];
c.KEY_RELEASED_NUMPAD_7.toString=g;c.KEY_RELEASED_NUMPAD_7.__enum__=c;c.KEY_RELEASED_NUMPAD_8=["KEY_RELEASED_NUMPAD_8",153];c.KEY_RELEASED_NUMPAD_8.toString=g;c.KEY_RELEASED_NUMPAD_8.__enum__=c;c.KEY_RELEASED_NUMPAD_9=["KEY_RELEASED_NUMPAD_9",154];c.KEY_RELEASED_NUMPAD_9.toString=g;c.KEY_RELEASED_NUMPAD_9.__enum__=c;c.KEY_RELEASED_NUMPAD_ADD=["KEY_RELEASED_NUMPAD_ADD",155];c.KEY_RELEASED_NUMPAD_ADD.toString=g;c.KEY_RELEASED_NUMPAD_ADD.__enum__=c;c.KEY_RELEASED_NUMPAD_DECIMAL=["KEY_RELEASED_NUMPAD_DECIMAL",
156];c.KEY_RELEASED_NUMPAD_DECIMAL.toString=g;c.KEY_RELEASED_NUMPAD_DECIMAL.__enum__=c;c.KEY_RELEASED_NUMPAD_DIVIDE=["KEY_RELEASED_NUMPAD_DIVIDE",157];c.KEY_RELEASED_NUMPAD_DIVIDE.toString=g;c.KEY_RELEASED_NUMPAD_DIVIDE.__enum__=c;c.KEY_RELEASED_NUMPAD_ENTER=["KEY_RELEASED_NUMPAD_ENTER",158];c.KEY_RELEASED_NUMPAD_ENTER.toString=g;c.KEY_RELEASED_NUMPAD_ENTER.__enum__=c;c.KEY_RELEASED_NUMPAD_MULTIPLY=["KEY_RELEASED_NUMPAD_MULTIPLY",159];c.KEY_RELEASED_NUMPAD_MULTIPLY.toString=g;c.KEY_RELEASED_NUMPAD_MULTIPLY.__enum__=
c;c.KEY_RELEASED_NUMPAD_SUBTRACT=["KEY_RELEASED_NUMPAD_SUBTRACT",160];c.KEY_RELEASED_NUMPAD_SUBTRACT.toString=g;c.KEY_RELEASED_NUMPAD_SUBTRACT.__enum__=c;c.KEY_RELEASED_PAGE_DOWN=["KEY_RELEASED_PAGE_DOWN",161];c.KEY_RELEASED_PAGE_DOWN.toString=g;c.KEY_RELEASED_PAGE_DOWN.__enum__=c;c.KEY_RELEASED_PAGE_UP=["KEY_RELEASED_PAGE_UP",162];c.KEY_RELEASED_PAGE_UP.toString=g;c.KEY_RELEASED_PAGE_UP.__enum__=c;c.KEY_RELEASED_RIGHT=["KEY_RELEASED_RIGHT",163];c.KEY_RELEASED_RIGHT.toString=g;c.KEY_RELEASED_RIGHT.__enum__=
c;c.KEY_RELEASED_SHIFT=["KEY_RELEASED_SHIFT",164];c.KEY_RELEASED_SHIFT.toString=g;c.KEY_RELEASED_SHIFT.__enum__=c;c.KEY_RELEASED_SPACE=["KEY_RELEASED_SPACE",165];c.KEY_RELEASED_SPACE.toString=g;c.KEY_RELEASED_SPACE.__enum__=c;c.KEY_RELEASED_TAB=["KEY_RELEASED_TAB",166];c.KEY_RELEASED_TAB.toString=g;c.KEY_RELEASED_TAB.__enum__=c;c.KEY_RELEASED_UP=["KEY_RELEASED_UP",167];c.KEY_RELEASED_UP.toString=g;c.KEY_RELEASED_UP.__enum__=c;c.KEY_RELEASED_A=["KEY_RELEASED_A",168];c.KEY_RELEASED_A.toString=g;c.KEY_RELEASED_A.__enum__=
c;c.KEY_RELEASED_B=["KEY_RELEASED_B",169];c.KEY_RELEASED_B.toString=g;c.KEY_RELEASED_B.__enum__=c;c.KEY_RELEASED_C=["KEY_RELEASED_C",170];c.KEY_RELEASED_C.toString=g;c.KEY_RELEASED_C.__enum__=c;c.KEY_RELEASED_D=["KEY_RELEASED_D",171];c.KEY_RELEASED_D.toString=g;c.KEY_RELEASED_D.__enum__=c;c.KEY_RELEASED_E=["KEY_RELEASED_E",172];c.KEY_RELEASED_E.toString=g;c.KEY_RELEASED_E.__enum__=c;c.KEY_RELEASED_F=["KEY_RELEASED_F",173];c.KEY_RELEASED_F.toString=g;c.KEY_RELEASED_F.__enum__=c;c.KEY_RELEASED_G=["KEY_RELEASED_G",
174];c.KEY_RELEASED_G.toString=g;c.KEY_RELEASED_G.__enum__=c;c.KEY_RELEASED_H=["KEY_RELEASED_H",175];c.KEY_RELEASED_H.toString=g;c.KEY_RELEASED_H.__enum__=c;c.KEY_RELEASED_I=["KEY_RELEASED_I",176];c.KEY_RELEASED_I.toString=g;c.KEY_RELEASED_I.__enum__=c;c.KEY_RELEASED_J=["KEY_RELEASED_J",177];c.KEY_RELEASED_J.toString=g;c.KEY_RELEASED_J.__enum__=c;c.KEY_RELEASED_K=["KEY_RELEASED_K",178];c.KEY_RELEASED_K.toString=g;c.KEY_RELEASED_K.__enum__=c;c.KEY_RELEASED_L=["KEY_RELEASED_L",179];c.KEY_RELEASED_L.toString=
g;c.KEY_RELEASED_L.__enum__=c;c.KEY_RELEASED_M=["KEY_RELEASED_M",180];c.KEY_RELEASED_M.toString=g;c.KEY_RELEASED_M.__enum__=c;c.KEY_RELEASED_N=["KEY_RELEASED_N",181];c.KEY_RELEASED_N.toString=g;c.KEY_RELEASED_N.__enum__=c;c.KEY_RELEASED_O=["KEY_RELEASED_O",182];c.KEY_RELEASED_O.toString=g;c.KEY_RELEASED_O.__enum__=c;c.KEY_RELEASED_P=["KEY_RELEASED_P",183];c.KEY_RELEASED_P.toString=g;c.KEY_RELEASED_P.__enum__=c;c.KEY_RELEASED_Q=["KEY_RELEASED_Q",184];c.KEY_RELEASED_Q.toString=g;c.KEY_RELEASED_Q.__enum__=
c;c.KEY_RELEASED_R=["KEY_RELEASED_R",185];c.KEY_RELEASED_R.toString=g;c.KEY_RELEASED_R.__enum__=c;c.KEY_RELEASED_S=["KEY_RELEASED_S",186];c.KEY_RELEASED_S.toString=g;c.KEY_RELEASED_S.__enum__=c;c.KEY_RELEASED_T=["KEY_RELEASED_T",187];c.KEY_RELEASED_T.toString=g;c.KEY_RELEASED_T.__enum__=c;c.KEY_RELEASED_U=["KEY_RELEASED_U",188];c.KEY_RELEASED_U.toString=g;c.KEY_RELEASED_U.__enum__=c;c.KEY_RELEASED_V=["KEY_RELEASED_V",189];c.KEY_RELEASED_V.toString=g;c.KEY_RELEASED_V.__enum__=c;c.KEY_RELEASED_W=["KEY_RELEASED_W",
190];c.KEY_RELEASED_W.toString=g;c.KEY_RELEASED_W.__enum__=c;c.KEY_RELEASED_X=["KEY_RELEASED_X",191];c.KEY_RELEASED_X.toString=g;c.KEY_RELEASED_X.__enum__=c;c.KEY_RELEASED_Y=["KEY_RELEASED_Y",192];c.KEY_RELEASED_Y.toString=g;c.KEY_RELEASED_Y.__enum__=c;c.KEY_RELEASED_Z=["KEY_RELEASED_Z",193];c.KEY_RELEASED_Z.toString=g;c.KEY_RELEASED_Z.__enum__=c;c.KEY_RELEASED_NUMBER_0=["KEY_RELEASED_NUMBER_0",194];c.KEY_RELEASED_NUMBER_0.toString=g;c.KEY_RELEASED_NUMBER_0.__enum__=c;c.KEY_RELEASED_NUMBER_1=["KEY_RELEASED_NUMBER_1",
195];c.KEY_RELEASED_NUMBER_1.toString=g;c.KEY_RELEASED_NUMBER_1.__enum__=c;c.KEY_RELEASED_NUMBER_2=["KEY_RELEASED_NUMBER_2",196];c.KEY_RELEASED_NUMBER_2.toString=g;c.KEY_RELEASED_NUMBER_2.__enum__=c;c.KEY_RELEASED_NUMBER_3=["KEY_RELEASED_NUMBER_3",197];c.KEY_RELEASED_NUMBER_3.toString=g;c.KEY_RELEASED_NUMBER_3.__enum__=c;c.KEY_RELEASED_NUMBER_4=["KEY_RELEASED_NUMBER_4",198];c.KEY_RELEASED_NUMBER_4.toString=g;c.KEY_RELEASED_NUMBER_4.__enum__=c;c.KEY_RELEASED_NUMBER_5=["KEY_RELEASED_NUMBER_5",199];
c.KEY_RELEASED_NUMBER_5.toString=g;c.KEY_RELEASED_NUMBER_5.__enum__=c;c.KEY_RELEASED_NUMBER_6=["KEY_RELEASED_NUMBER_6",200];c.KEY_RELEASED_NUMBER_6.toString=g;c.KEY_RELEASED_NUMBER_6.__enum__=c;c.KEY_RELEASED_NUMBER_7=["KEY_RELEASED_NUMBER_7",201];c.KEY_RELEASED_NUMBER_7.toString=g;c.KEY_RELEASED_NUMBER_7.__enum__=c;c.KEY_RELEASED_NUMBER_8=["KEY_RELEASED_NUMBER_8",202];c.KEY_RELEASED_NUMBER_8.toString=g;c.KEY_RELEASED_NUMBER_8.__enum__=c;c.KEY_RELEASED_NUMBER_9=["KEY_RELEASED_NUMBER_9",203];c.KEY_RELEASED_NUMBER_9.toString=
g;c.KEY_RELEASED_NUMBER_9.__enum__=c;c.KEY_RELEASED_EQUALS=["KEY_RELEASED_EQUALS",204];c.KEY_RELEASED_EQUALS.toString=g;c.KEY_RELEASED_EQUALS.__enum__=c;c.KEY_RELEASED_SLASH=["KEY_RELEASED_SLASH",205];c.KEY_RELEASED_SLASH.toString=g;c.KEY_RELEASED_SLASH.__enum__=c;c.KEY_RELEASED_BACKSLASH=["KEY_RELEASED_BACKSLASH",206];c.KEY_RELEASED_BACKSLASH.toString=g;c.KEY_RELEASED_BACKSLASH.__enum__=c;c.KEY_RELEASED_LEFTBRACKET=["KEY_RELEASED_LEFTBRACKET",207];c.KEY_RELEASED_LEFTBRACKET.toString=g;c.KEY_RELEASED_LEFTBRACKET.__enum__=
c;c.KEY_RELEASED_RIGHTBRACKET=["KEY_RELEASED_RIGHTBRACKET",208];c.KEY_RELEASED_RIGHTBRACKET.toString=g;c.KEY_RELEASED_RIGHTBRACKET.__enum__=c;c.KEY_RELEASED_BACKQUOTE=["KEY_RELEASED_BACKQUOTE",209];c.KEY_RELEASED_BACKQUOTE.toString=g;c.KEY_RELEASED_BACKQUOTE.__enum__=c;c.KEY_RELEASED_COMMA=["KEY_RELEASED_COMMA",210];c.KEY_RELEASED_COMMA.toString=g;c.KEY_RELEASED_COMMA.__enum__=c;c.KEY_RELEASED_COMMAND=["KEY_RELEASED_COMMAND",211];c.KEY_RELEASED_COMMAND.toString=g;c.KEY_RELEASED_COMMAND.__enum__=c;
c.KEY_RELEASED_MINUS=["KEY_RELEASED_MINUS",212];c.KEY_RELEASED_MINUS.toString=g;c.KEY_RELEASED_MINUS.__enum__=c;c.KEY_RELEASED_PERIOD=["KEY_RELEASED_PERIOD",213];c.KEY_RELEASED_PERIOD.toString=g;c.KEY_RELEASED_PERIOD.__enum__=c;c.KEY_RELEASED_QUOTE=["KEY_RELEASED_QUOTE",214];c.KEY_RELEASED_QUOTE.toString=g;c.KEY_RELEASED_QUOTE.__enum__=c;c.KEY_RELEASED_SEMICOLON=["KEY_RELEASED_SEMICOLON",215];c.KEY_RELEASED_SEMICOLON.toString=g;c.KEY_RELEASED_SEMICOLON.__enum__=c;c.KEY_RELEASED_ANDROIDMENU=["KEY_RELEASED_ANDROIDMENU",
216];c.KEY_RELEASED_ANDROIDMENU.toString=g;c.KEY_RELEASED_ANDROIDMENU.__enum__=c;c.KEY_RELEASED_ANDROIDSEARCH=["KEY_RELEASED_ANDROIDSEARCH",217];c.KEY_RELEASED_ANDROIDSEARCH.toString=g;c.KEY_RELEASED_ANDROIDSEARCH.__enum__=c;c.KEY_RELEASED_UNKNOWN=["KEY_RELEASED_UNKNOWN",218];c.KEY_RELEASED_UNKNOWN.toString=g;c.KEY_RELEASED_UNKNOWN.__enum__=c;var k=h["tools.spark.sliced.services.std.logic.gde.interfaces.EEventType"]={__ename__:!0,__constructs__:"CREATED,UPDATE,CHANGED,NETWORK_CONNECTED,NETWORK_REQUEST,NETWORK_SERVER_EVENT,FILETRANSFER_CONNECTED,FILETRANSFER_SENDREQUEST,MOUSE_LEFT_CLICK,MOUSE_RIGHT_CLICK,MOUSE_ENTERED,MOUSE_MOVED,MOUSE_LEFT,KEY_PRESSED,KEY_RELEASED".split(",")};
k.CREATED=["CREATED",0];k.CREATED.toString=g;k.CREATED.__enum__=k;k.UPDATE=["UPDATE",1];k.UPDATE.toString=g;k.UPDATE.__enum__=k;k.CHANGED=["CHANGED",2];k.CHANGED.toString=g;k.CHANGED.__enum__=k;k.NETWORK_CONNECTED=["NETWORK_CONNECTED",3];k.NETWORK_CONNECTED.toString=g;k.NETWORK_CONNECTED.__enum__=k;k.NETWORK_REQUEST=["NETWORK_REQUEST",4];k.NETWORK_REQUEST.toString=g;k.NETWORK_REQUEST.__enum__=k;k.NETWORK_SERVER_EVENT=["NETWORK_SERVER_EVENT",5];k.NETWORK_SERVER_EVENT.toString=g;k.NETWORK_SERVER_EVENT.__enum__=
k;k.FILETRANSFER_CONNECTED=["FILETRANSFER_CONNECTED",6];k.FILETRANSFER_CONNECTED.toString=g;k.FILETRANSFER_CONNECTED.__enum__=k;k.FILETRANSFER_SENDREQUEST=["FILETRANSFER_SENDREQUEST",7];k.FILETRANSFER_SENDREQUEST.toString=g;k.FILETRANSFER_SENDREQUEST.__enum__=k;k.MOUSE_LEFT_CLICK=["MOUSE_LEFT_CLICK",8];k.MOUSE_LEFT_CLICK.toString=g;k.MOUSE_LEFT_CLICK.__enum__=k;k.MOUSE_RIGHT_CLICK=["MOUSE_RIGHT_CLICK",9];k.MOUSE_RIGHT_CLICK.toString=g;k.MOUSE_RIGHT_CLICK.__enum__=k;k.MOUSE_ENTERED=["MOUSE_ENTERED",
10];k.MOUSE_ENTERED.toString=g;k.MOUSE_ENTERED.__enum__=k;k.MOUSE_MOVED=["MOUSE_MOVED",11];k.MOUSE_MOVED.toString=g;k.MOUSE_MOVED.__enum__=k;k.MOUSE_LEFT=["MOUSE_LEFT",12];k.MOUSE_LEFT.toString=g;k.MOUSE_LEFT.__enum__=k;k.KEY_PRESSED=["KEY_PRESSED",13];k.KEY_PRESSED.toString=g;k.KEY_PRESSED.__enum__=k;k.KEY_RELEASED=["KEY_RELEASED",14];k.KEY_RELEASED.toString=g;k.KEY_RELEASED.__enum__=k;var V=h["tools.spark.sliced.services.std.logic.gde.interfaces.EGameType"]={__ename__:!0,__constructs__:"ENTITY,FORM,STATE,SPACE,ACTION,TRIGGER".split(",")};
V.ENTITY=["ENTITY",0];V.ENTITY.toString=g;V.ENTITY.__enum__=V;V.FORM=["FORM",1];V.FORM.toString=g;V.FORM.__enum__=V;V.STATE=["STATE",2];V.STATE.toString=g;V.STATE.__enum__=V;V.SPACE=["SPACE",3];V.SPACE.toString=g;V.SPACE.__enum__=V;V.ACTION=["ACTION",4];V.ACTION.toString=g;V.ACTION.__enum__=V;V.TRIGGER=["TRIGGER",5];V.TRIGGER.toString=g;V.TRIGGER.__enum__=V;var j=h["tools.spark.sliced.services.std.logic.gde.interfaces.ENodeType"]={__ename__:!0,__constructs__:"ENTITIES,ENTITY,FORM,STATES,STATE,SPACE,ACTIONS,ACTION,SCRIPTS,SCRIPT,GML,TRIGGERS,TRIGGER,EVENT,CONCURRENCY,ID,TYPE,VALUE,EXTENDS".split(",")};
j.ENTITIES=["ENTITIES",0];j.ENTITIES.toString=g;j.ENTITIES.__enum__=j;j.ENTITY=["ENTITY",1];j.ENTITY.toString=g;j.ENTITY.__enum__=j;j.FORM=["FORM",2];j.FORM.toString=g;j.FORM.__enum__=j;j.STATES=["STATES",3];j.STATES.toString=g;j.STATES.__enum__=j;j.STATE=["STATE",4];j.STATE.toString=g;j.STATE.__enum__=j;j.SPACE=["SPACE",5];j.SPACE.toString=g;j.SPACE.__enum__=j;j.ACTIONS=["ACTIONS",6];j.ACTIONS.toString=g;j.ACTIONS.__enum__=j;j.ACTION=["ACTION",7];j.ACTION.toString=g;j.ACTION.__enum__=j;j.SCRIPTS=
["SCRIPTS",8];j.SCRIPTS.toString=g;j.SCRIPTS.__enum__=j;j.SCRIPT=["SCRIPT",9];j.SCRIPT.toString=g;j.SCRIPT.__enum__=j;j.GML=["GML",10];j.GML.toString=g;j.GML.__enum__=j;j.TRIGGERS=["TRIGGERS",11];j.TRIGGERS.toString=g;j.TRIGGERS.__enum__=j;j.TRIGGER=["TRIGGER",12];j.TRIGGER.toString=g;j.TRIGGER.__enum__=j;j.EVENT=["EVENT",13];j.EVENT.toString=g;j.EVENT.__enum__=j;j.CONCURRENCY=["CONCURRENCY",14];j.CONCURRENCY.toString=g;j.CONCURRENCY.__enum__=j;j.ID=["ID",15];j.ID.toString=g;j.ID.__enum__=j;j.TYPE=
["TYPE",16];j.TYPE.toString=g;j.TYPE.__enum__=j;j.VALUE=["VALUE",17];j.VALUE.toString=g;j.VALUE.__enum__=j;j.EXTENDS=["EXTENDS",18];j.EXTENDS.toString=g;j.EXTENDS.__enum__=j;var X=h["tools.spark.sliced.services.std.logic.gde.interfaces.EStateType"]={__ename__:!0,__constructs__:["DYNAMIC","INTEGER","DECIMAL","BOOLEAN","TEXT"]};X.DYNAMIC=["DYNAMIC",0];X.DYNAMIC.toString=g;X.DYNAMIC.__enum__=X;X.INTEGER=["INTEGER",1];X.INTEGER.toString=g;X.INTEGER.__enum__=X;X.DECIMAL=["DECIMAL",2];X.DECIMAL.toString=
g;X.DECIMAL.__enum__=X;X.BOOLEAN=["BOOLEAN",3];X.BOOLEAN.toString=g;X.BOOLEAN.__enum__=X;X.TEXT=["TEXT",4];X.TEXT.toString=g;X.TEXT.__enum__=X;var qh=function(){};h["tools.spark.sliced.services.std.logic.interpreter.interfaces.IInterpreter"]=qh;qh.__name__=!0;qh.prototype={__class__:qh};var fg=function(){this._init()};h["tools.spark.sliced.services.std.logic.interpreter.core.GmlInterpreter"]=fg;fg.__name__=!0;fg.__interfaces__=[qh];fg.prototype={_init:function(){this._hashTable=new rc},run:function(a,
b){this._deleteMeCircleAround(b.get("me"));return!0},_deleteMeCircleAround:function(a){null!=a.getState("std_object")&&(a.setState("std_x",a.getState("initX")+50*Math.cos(a.getState("rotationDegree"))),a.getState("std_object").x=a.getState("std_x"),a.setState("std_y",a.getState("initY")+50*Math.sin(a.getState("rotationDegree"))),a.getState("std_object").y=a.getState("std_y"),a.setState("rotationDegree",a.getState("rotationDegree")+0.1))},hash:function(){return-1},__class__:fg};var gh=function(){this._init()};
h["tools.spark.sliced.services.std.logic.interpreter.core.HaxeInterpreter"]=gh;gh.__name__=!0;gh.__interfaces__=[qh];gh.prototype={_init:function(){this._hashTable=new rc;this._parser=new ii;this._interpreter=new hi;this._interpreter.variables.set("Game",K);this._interpreter.variables.set("Sound",K.sound);this._interpreter.variables.set("Logic",K.logic);this._interpreter.variables.set("Input",K.input);this._interpreter.variables.set("Comms",K.comms);this._interpreter.variables.set("Display",K.display);
this._interpreter.variables.set("Key",e);this._interpreter.variables.set("Console",P);this._interpreter.variables.set("Math",Math);this._interpreter.variables.set("Std",o);this._interpreter.variables.set("String",String);this._interpreter.variables.set("Assets",J);this._interpreter.variables.set("Xml",w);this._interpreter.variables.set("Fast",Md);this._interpreter.variables.set("StringTools",ya);this._interpreter.variables.set("XMLHttpRequest",XMLHttpRequest)},run:function(a,b){var d=this._get(a);
this._interpreter.variables.set("Game",K);this._interpreter.variables.set("Sound",K.sound);this._interpreter.variables.set("Logic",K.logic);this._interpreter.variables.set("Input",K.input);this._interpreter.variables.set("Comms",K.comms);this._interpreter.variables.set("Display",K.display);this._interpreter.variables.set("Key",e);this._interpreter.variables.set("Console",P);this._interpreter.variables.set("Math",Math);this._interpreter.variables.set("Std",o);this._interpreter.variables.set("String",
String);this._interpreter.variables.set("Assets",J);this._interpreter.variables.set("Xml",w);this._interpreter.variables.set("Fast",Md);this._interpreter.variables.set("StringTools",ya);this._interpreter.variables.set("XMLHttpRequest",XMLHttpRequest);for(var c=b.keys();c.hasNext();){var f=c.next(),n=b.get(f);this._interpreter.variables.set(f,n)}return this._interpreter.execute(d)},hash:function(a){return this._store(this._parser.parseString(a),Hj.make(sc.ofString(a)))},_get:function(a){a=this._hashTable.get(a);
null==a&&null;return a},_store:function(a,b){if(null!=this._hashTable.get(b)){if(o.string(a)==o.string(this._hashTable.get(b)))return b;P.warn("Collision detected with hashId: ["+b+"] and script ["+o.string(a)+"]. Previous Stored Entry Script: "+o.string(this._hashTable.get(b)));return this._store(a,++b)}this._hashTable.set(b,a);a;return b},__class__:gh};var rh=function(){this._init()};h["tools.spark.sliced.services.std.sound.core.Sound"]=rh;rh.__name__=!0;rh.__interfaces__=[ak];rh.__super__=Ua;rh.prototype=
t(Ua.prototype,{_init:function(){null},playSound:function(a,b){return J.getSound(a).play(b)},loopSound:function(a,b){return J.getSound(a).loop(b)},__class__:rh});var xb=function(){};h["zpp_nape.ZPP_ID"]=xb;xb.__name__=!0;xb.Interactor=function(){return xb._Interactor++};xb.CbType=function(){return xb._CbType++};xb.CbSet=function(){return xb._CbSet++};var Xb=function(){this.body=this.constraint=null;this.pre_swapped=!1;this.int1=this.int2=this.set=this.wrap_arbiters=this.pre_arbiter=null;this.length=
0;this.listener=this.next=this.prev=null;this.event=0;this.outer_body=this.outer_con=this.outer_int=null;this.length=0};h["zpp_nape.callbacks.ZPP_Callback"]=Xb;Xb.__name__=!0;Xb.prototype={wrapper_body:function(){null==this.outer_body&&(this.outer_body=new rf,this.outer_body.zpp_inner=this);return this.outer_body},wrapper_con:function(){null==this.outer_con&&(this.outer_con=new zg,this.outer_con.zpp_inner=this);return this.outer_con},wrapper_int:function(){null==this.outer_int&&(this.outer_int=new sf,
this.outer_int.zpp_inner=this);null==this.wrap_arbiters?this.wrap_arbiters=yd.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters;this.wrap_arbiters.zpp_inner.zip_length=!0;this.wrap_arbiters.zpp_inner.at_ite=null;return this.outer_int},push:function(a){null!=this.prev?this.prev.next=a:this.next=a;a.prev=this.prev;a.next=null;this.prev=a;this.length++},pop:function(){var a=this.next;this.next=a.next;null==this.next?this.prev=null:this.next.prev=null;this.length--;return a},
empty:function(){return null==this.next},__class__:Xb};var ma=function(){this.interactors=this.constraints=null;this.zip_conlisteners=!1;this.conlisteners=null;this.zip_bodylisteners=!1;this.bodylisteners=null;this.zip_listeners=!1;this.manager=this.cbpairs=this.listeners=null;this.id=0;this.next=null;this.count=0;this.cbTypes=null;this.cbTypes=new gd;this.listeners=new Te;this.zip_listeners=!0;this.bodylisteners=new sh;this.zip_bodylisteners=!0;this.conlisteners=new th;this.zip_conlisteners=!0;this.constraints=
new Td;this.interactors=new Zc;this.id=xb.CbSet();this.cbpairs=new lj};h["zpp_nape.callbacks.ZPP_CbSet"]=ma;ma.__name__=!0;ma.setlt=function(a,b){for(var d=a.cbTypes.head,c=b.cbTypes.head;null!=d&&null!=c;){var f=d.elt,e=c.elt;if(f.id<e.id)return!0;if(e.id<f.id)return!1;d=d.next;c=c.next}return null!=c&&null==d};ma.get=function(a){var b;null==ma.zpp_pool?b=new ma:(b=ma.zpp_pool,ma.zpp_pool=b.next,b.next=null);null;for(var d=null,a=a.head;null!=a;){var c=a.elt,d=b.cbTypes.insert(d,c);c.cbsets.add(b);
a=a.next}return b};ma.single_intersection=function(a,b,d){return a.manager.pair(a,b).single_intersection(d)};ma.find_all=function(a,b,d,c){a.manager.pair(a,b).forall(d,c)};ma.prototype={invalidate_pairs:function(){for(var a=this.cbpairs.head;null!=a;)a.elt.zip_listeners=!0,a=a.next},realvalidate_listeners:function(){this.listeners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,d=this.listeners.head,c=a.elt.listeners.head;null!=c;){var f=c.elt;null!=d&&d.elt==f?(c=c.next,b=d,d=d.next):
null==d||Dc.setlt(f,d.elt)?(f.space==this.manager.space&&(b=this.listeners.inlined_insert(b,f)),c=c.next):(b=d,d=d.next)}a=a.next}},realvalidate_bodylisteners:function(){this.bodylisteners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,d=this.bodylisteners.head,c=a.elt.bodylisteners.head;null!=c;){var f=c.elt;null!=d&&d.elt==f?(c=c.next,b=d,d=d.next):null==d||Dc.setlt(f,d.elt)?(!f.options.excluded(this.cbTypes)&&f.space==this.manager.space&&(b=this.bodylisteners.inlined_insert(b,f)),
c=c.next):(b=d,d=d.next)}a=a.next}},realvalidate_conlisteners:function(){this.conlisteners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,d=this.conlisteners.head,c=a.elt.conlisteners.head;null!=c;){var f=c.elt;null!=d&&d.elt==f?(c=c.next,b=d,d=d.next):null==d||Dc.setlt(f,d.elt)?(!f.options.excluded(this.cbTypes)&&f.space==this.manager.space&&(b=this.conlisteners.inlined_insert(b,f)),c=c.next):(b=d,d=d.next)}a=a.next}},validate:function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners());
this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners());this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},free:function(){this.listeners.clear();this.zip_listeners=!0;this.bodylisteners.clear();this.zip_bodylisteners=!0;this.conlisteners.clear();for(this.zip_conlisteners=!0;null!=this.cbTypes.head;)this.cbTypes.pop_unsafe().cbsets.remove(this)},__class__:ma};var Ra=function(){this.listeners=null;this.zip_listeners=!1;this.a=this.b=this.next=
null;this.listeners=new Te};h["zpp_nape.callbacks.ZPP_CbSetPair"]=Ra;Ra.__name__=!0;Ra.get=function(a,b){var d;null==Ra.zpp_pool?d=new Ra:(d=Ra.zpp_pool,Ra.zpp_pool=d.next,d.next=null);d.zip_listeners=!0;ma.setlt(a,b)?(d.a=a,d.b=b):(d.a=b,d.b=a);return d};Ra.setlt=function(a,b){return ma.setlt(a.a,b.a)||a.a==b.a&&ma.setlt(a.b,b.b)};Ra.prototype={__validate:function(){this.listeners.clear();for(var a=this.a.listeners.head,b=this.b.listeners.head;null!=a&&null!=b;){var d=a.elt,c=b.elt;d==c?((d.options1.compatible(this.a.cbTypes)&&
d.options2.compatible(this.b.cbTypes)||d.options2.compatible(this.a.cbTypes)&&d.options1.compatible(this.b.cbTypes))&&this.listeners.add(d),a=a.next,b=b.next):d.precedence>c.precedence||d.precedence==c.precedence&&d.id>c.id?a=a.next:b=b.next}},empty_intersection:function(){return null==this.listeners.head},single_intersection:function(a){var b=this.listeners.head;return null!=b&&b.elt==a&&null==b.next},forall:function(a,b){for(var d=this.listeners.head;null!=d;){var c=d.elt;c.event==a&&b(c);d=d.next}},
__class__:Ra};var Te=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_InteractionListener"]=Te;Te.__name__=!0;Te.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Hb.zpp_pool?b=new Hb:(b=Hb.zpp_pool,Hb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_insert:function(a,b){var d;null==Hb.zpp_pool?d=new Hb:(d=Hb.zpp_pool,Hb.zpp_pool=d.next,
d.next=null);null;d.elt=b;null==a?(d.next=this.head,this.head=d):(d.next=a.next,a.next=d);this.pushmod=this.modified=!0;this.length++;return d},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Hb.zpp_pool;Hb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,d=this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;break}b=d;d=d.next}return c},inlined_erase:function(a){var b,
d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=Hb.zpp_pool;Hb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:Te};var sh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_BodyListener"]=
sh;sh.__name__=!0;sh.prototype={inlined_insert:function(a,b){var d;null==Ec.zpp_pool?d=new Ec:(d=Ec.zpp_pool,Ec.zpp_pool=d.next,d.next=null);null;d.elt=b;null==a?(d.next=this.head,this.head=d):(d.next=a.next,a.next=d);this.pushmod=this.modified=!0;this.length++;return d},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Ec.zpp_pool;Ec.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=
null,d=this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;break}b=d;d=d.next}return c},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=Ec.zpp_pool;Ec.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:sh};var th=function(){this.length=0;this.modified=
this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_ConstraintListener"]=th;th.__name__=!0;th.prototype={inlined_insert:function(a,b){var d;null==Yb.zpp_pool?d=new Yb:(d=Yb.zpp_pool,Yb.zpp_pool=d.next,d.next=null);null;d.elt=b;null==a?(d.next=this.head,this.head=d):(d.next=a.next,a.next=d);this.pushmod=this.modified=!0;this.length++;return d},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Yb.zpp_pool;Yb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=
!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,d=this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;break}b=d;d=d.next}return c},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=Yb.zpp_pool;Yb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},clear:function(){for(;null!=
this.head;)this.inlined_pop();this.pushmod=!0},__class__:th};var Td=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Constraint"]=Td;Td.__name__=!0;Td.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Nc.zpp_pool?b=new Nc:(b=Nc.zpp_pool,Nc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.head;this.head=a.next;a.elt=null;a.next=Nc.zpp_pool;Nc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,d=this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;break}b=d;d=d.next}return c},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,d;null==a?(b=this.head,
this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=Nc.zpp_pool;Nc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Td};var Zc=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Interactor"]=Zc;Zc.__name__=!0;Zc.prototype={add:function(a){return this.inlined_add(a)},
inlined_add:function(a){var b;null==Zb.zpp_pool?b=new Zb:(b=Zb.zpp_pool,Zb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Zb.zpp_pool;Zb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();
return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,d=this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;break}b=d;d=d.next}return c},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=Zb.zpp_pool;Zb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},inlined_clear:function(){for(;null!=
this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Zc};var Ud=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_CbSet"]=Ud;Ud.__name__=!0;Ud.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Oc.zpp_pool?b=new Oc:(b=Oc.zpp_pool,Oc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;
return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Oc.zpp_pool;Oc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,d=this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;break}b=
d;d=d.next}return c},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=Oc.zpp_pool;Oc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},__class__:Ud};var na=function(){this.cbsets=this.listeners=this.bodylisteners=this.conlisteners=null;this.id=0;this.outer=null;this.id=xb.CbType();this.listeners=new Te;this.bodylisteners=new sh;this.conlisteners=
new th;this.constraints=new Td;this.interactors=new Zc;this.cbsets=new Ud};h["zpp_nape.callbacks.ZPP_CbType"]=na;na.__name__=!0;na.prototype={addint:function(a){for(var b=null,d=this.listeners.head;null!=d;){var c=d.elt;if(a.precedence>c.precedence||a.precedence==c.precedence&&a.id>c.id)break;b=d;d=d.next}this.listeners.inlined_insert(b,a);this.invalidateint()},invalidateint:function(){for(var a=this.cbsets.head;null!=a;){var b=a.elt;b.zip_listeners=!0;b.invalidate_pairs();a=a.next}},addbody:function(a){for(var b=
null,d=this.bodylisteners.head;null!=d;){var c=d.elt;if(a.precedence>c.precedence||a.precedence==c.precedence&&a.id>c.id)break;b=d;d=d.next}this.bodylisteners.inlined_insert(b,a);this.invalidatebody()},invalidatebody:function(){for(var a=this.cbsets.head;null!=a;)a.elt.zip_bodylisteners=!0,a=a.next},addconstraint:function(a){for(var b=null,d=this.conlisteners.head;null!=d;){var c=d.elt;if(a.precedence>c.precedence||a.precedence==c.precedence&&a.id>c.id)break;b=d;d=d.next}this.conlisteners.inlined_insert(b,
a);this.invalidateconstraint()},invalidateconstraint:function(){for(var a=this.cbsets.head;null!=a;)a.elt.zip_conlisteners=!0,a=a.next},__class__:na};var i=function(){};h["zpp_nape.util.ZPP_Flags"]=i;i.__name__=!0;var Dc=function(){this.body=this.constraint=this.interaction=this.space=null;this.id=this.type=this.event=this.precedence=0;this.outer=null};h["zpp_nape.callbacks.ZPP_Listener"]=Dc;Dc.__name__=!0;Dc.setlt=function(a,b){return a.precedence>b.precedence||a.precedence==b.precedence&&a.id>b.id};
Dc.prototype={addedToSpace:function(){},removedFromSpace:function(){},__class__:Dc};var mj=function(){this.outer_zn=this.options=this.handler=null};h["zpp_nape.callbacks.ZPP_BodyListener"]=mj;mj.__name__=!0;mj.__super__=Dc;mj.prototype=t(Dc.prototype,{addedToSpace:function(){this.options.handler=x(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;)a.elt.addbody(this),a=a.next},removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;b.bodylisteners.remove(this);
b.invalidatebody();a=a.next}this.options.handler=null},cbtype_change:function(a,b,d){this.removedFromSpace();this.options.effect_change(a,b,d);this.addedToSpace()},__class__:mj});var nj=function(){this.outer_zn=this.options=this.handler=null};h["zpp_nape.callbacks.ZPP_ConstraintListener"]=nj;nj.__name__=!0;nj.__super__=Dc;nj.prototype=t(Dc.prototype,{addedToSpace:function(){this.options.handler=x(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;)a.elt.addconstraint(this),a=a.next},
removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;b.conlisteners.remove(this);b.invalidateconstraint();a=a.next}this.options.handler=null},cbtype_change:function(a,b,d){this.removedFromSpace();this.options.effect_change(a,b,d);this.addedToSpace()},__class__:nj});var gd=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_CbType"]=gd;gd.__name__=!0;gd.prototype={inlined_add:function(a){var b;null==eb.zpp_pool?b=new eb:
(b=eb.zpp_pool,eb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var d;null==eb.zpp_pool?d=new eb:(d=eb.zpp_pool,eb.zpp_pool=d.next,d.next=null);null;d.elt=b;null==a?(d.next=this.head,this.head=d):(d.next=a.next,a.next=d);this.pushmod=this.modified=!0;this.length++;return d},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=
a.next;a.elt=null;a.next=eb.zpp_pool;eb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,d=this.head,c=!1;null!=d;){if(d.elt==a){this.inlined_erase(b);c=!0;break}b=d;d=d.next}return c},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=
b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=eb.zpp_pool;eb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},has:function(a){return this.inlined_has(a)},inlined_has:function(a){var b;b=!1;for(var d=this.head;null!=d;){if(d.elt==a){b=!0;break}d=d.next}return b},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},
__class__:gd};var fb=function(){this.handlerp=null;this.allowSleepingCallbacks=this.pure=!1;this.options1=this.options2=this.handleri=null;this.itype=0;this.outer_zni=this.outer_znp=null};h["zpp_nape.callbacks.ZPP_InteractionListener"]=fb;fb.__name__=!0;fb.__super__=Dc;fb.prototype=t(Dc.prototype,{CbSetset:function(a,b,d){for(var c=fb.UCbSet,f=fb.VCbSet,e=fb.WCbSet,a=a.head,i=b.head;null!=a&&null!=i;){var g=a.elt,h=i.elt;g==h?(e.inlined_add(g),a=a.next,i=i.next):ma.setlt(g,h)?(c.inlined_add(g),a=
a.next):(f.inlined_add(h),i=i.next)}for(;null!=a;)c.inlined_add(a.elt),a=a.next;for(;null!=i;)f.inlined_add(i.elt),i=i.next;for(;null!=c.head;){a=c.pop_unsafe();for(i=b.head;null!=i;)d(a,i.elt),i=i.next}for(;null!=f.head;){b=f.pop_unsafe();for(c=e.head;null!=c;)d(b,c.elt),c=c.next}for(;null!=e.head;){f=e.pop_unsafe();d(f,f);for(b=e.head;null!=b;)d(f,b.elt),b=b.next}},CbTypeset:function(a,b,d){for(var c=fb.UCbType,f=fb.VCbType,e=fb.WCbType,a=a.head,i=b.head;null!=a&&null!=i;){var g=a.elt,h=i.elt;g==
h?(e.inlined_add(g),a=a.next,i=i.next):g.id<h.id?(c.inlined_add(g),a=a.next):(f.inlined_add(h),i=i.next)}for(;null!=a;)c.inlined_add(a.elt),a=a.next;for(;null!=i;)f.inlined_add(i.elt),i=i.next;for(;null!=c.head;){a=c.pop_unsafe();for(i=b.head;null!=i;)d(a,i.elt),i=i.next}for(;null!=f.head;){b=f.pop_unsafe();for(c=e.head;null!=c;)d(b,c.elt),c=c.next}for(;null!=e.head;){f=e.pop_unsafe();d(f,f);for(b=e.head;null!=b;)d(f,b.elt),b=b.next}},with_uniquesets:function(a){var b=this,d;null==ga.zpp_pool?d=new ga:
(d=ga.zpp_pool,ga.zpp_pool=d.next,d.next=null);null;d.lt=Ra.setlt;this.CbTypeset(this.options1.includes,this.options2.includes,function(a,c){b.CbSetset(a.cbsets,c.cbsets,function(a,c){a.validate();c.validate();ma.single_intersection(a,c,b)&&d.try_insert(Ra.get(a,c))})});d.clear_with(function(d){a?b.space.freshListenerType(d.a,d.b):b.space.nullListenerType(d.a,d.b);d.a=d.b=null;d.listeners.clear();d.next=Ra.zpp_pool;Ra.zpp_pool=d});var c=d;c.data=null;c.lt=null;c.swapped=null;c.next=ga.zpp_pool;ga.zpp_pool=
c},with_union:function(a){for(var b=this.options1.includes.head,d=this.options2.includes.head;null!=b&&null!=d;){var c=b.elt,f=d.elt;c==f?(a(c),b=b.next,d=d.next):c.id<f.id?(a(c),b=b.next):(a(f),d=d.next)}for(;null!=b;)a(b.elt),b=b.next;for(;null!=d;)a(d.elt),d=d.next},addedToSpace:function(){var a=this,b=this.type==i.id_ListenerType_PRE;this.with_union(function(d){d.addint(a);if(b)for(d=d.interactors.head;null!=d;)d.elt.wake(),d=d.next});this.options1.handler=x(this,this.cbtype_change1);this.options2.handler=
x(this,this.cbtype_change2);this.with_uniquesets(!0)},removedFromSpace:function(){var a=this;this.with_uniquesets(!1);var b=this.type==i.id_ListenerType_PRE;this.with_union(function(d){d.listeners.remove(a);d.invalidateint();if(b)for(d=d.interactors.head;null!=d;)d.elt.wake(),d=d.next});this.options1.handler=null;this.options2.handler=null},cbtype_change1:function(a,b,d){this.cbtype_change(this.options1,a,b,d)},cbtype_change2:function(a,b,d){this.cbtype_change(this.options2,a,b,d)},cbtype_change:function(a,
b,d,c){this.removedFromSpace();a.effect_change(b,d,c);this.addedToSpace();null},__class__:fb});var fk=function(){this.outer=this.handler=this.includes=this.excludes=this.wrap_includes=this.wrap_excludes=null};h["zpp_nape.callbacks.ZPP_OptionType"]=fk;fk.__name__=!0;fk.prototype={setup_includes:function(){this.wrap_includes=uc.get(this.includes,!0)},setup_excludes:function(){this.wrap_excludes=uc.get(this.excludes,!0)},excluded:function(a){return this.nonemptyintersection(a,this.excludes)},compatible:function(a){return this.nonemptyintersection(a,
this.includes)&&!this.nonemptyintersection(a,this.excludes)},nonemptyintersection:function(a,b){for(var d=!1,c=a.head,f=b.head;null!=f&&null!=c;){var e=f.elt,i=c.elt;if(e==i){d=!0;break}else e.id<i.id?f=f.next:c=c.next}return d},effect_change:function(a,b,d){if(b)if(d){b=null;for(d=this.includes.head;null!=d&&!(a.id<d.elt.id);){b=d;d=d.next}this.includes.inlined_insert(b,a)}else this.includes.remove(a);else if(d){b=null;for(d=this.excludes.head;null!=d&&!(a.id<d.elt.id);){b=d;d=d.next}this.excludes.inlined_insert(b,
a)}else this.excludes.remove(a)},__class__:fk};var gk=function(){this.cbTypes=this.cbSet=null;this.ignore=this.__velocity=!1;this.component=null;this.active=this.stiff=this.removeOnBreak=!1;this.outer=this.compound=this.space=null};h["zpp_nape.constraint.ZPP_Constraint"]=gk;gk.__name__=!0;gk.prototype={alloc_cbSet:function(){if(null!=(this.cbSet=this.space.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.constraints.add(this)},dealloc_cbSet:function(){if(null!=this.cbSet){this.cbSet.constraints.remove(this);
if(0==--this.cbSet.count){this.space.cbsets.remove(this.cbSet);var a=this.cbSet;a.free();a.next=ma.zpp_pool;ma.zpp_pool=a}this.cbSet=null}},addedToSpace:function(){this.active&&this.activeInSpace();this.activeBodies();for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.add(this),a=a.next},removedFromSpace:function(){this.active&&this.inactiveOrOutSpace();this.inactiveBodies();for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.remove(this),a=a.next},activeInSpace:function(){this.alloc_cbSet();
null==ub.zpp_pool?this.component=new ub:(this.component=ub.zpp_pool,ub.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=!1;this.component.constraint=this},inactiveOrOutSpace:function(){this.dealloc_cbSet();var a=this.component;a.body=null;a.constraint=null;null;a.next=ub.zpp_pool;ub.zpp_pool=a;this.component=null},activeBodies:function(){},inactiveBodies:function(){},clearcache:function(){},wake_connected:function(){},forest:function(){},pair_exists:function(){return!1},
broken:function(){},warmStart:function(){},preStep:function(){return!1},applyImpulseVel:function(){return!1},applyImpulsePos:function(){return!1},__class__:gk};var Z=function(){this.colarb=this.fluidarb=this.sensorarb=null;this.type=0;this.b1=this.b2=this.ws1=this.ws2=this.pair=null;this.invalidated=!1;this.immState=0;this.intchange=this.presentable=this.continuous=this.fresh=!1;this.present=0;this.active=this.cleared=this.sleeping=!1;this.id=this.di=this.stamp=this.up_stamp=this.sleep_stamp=this.endGenerated=
0;this.outer=null};h["zpp_nape.dynamics.ZPP_Arbiter"]=Z;Z.__name__=!0;Z.prototype={wrapper:function(){null==this.outer&&(Z.internal=!0,this.type==Z.COL?(this.colarb.outer_zn=new tf,this.outer=this.colarb.outer_zn):this.type==Z.FLUID?(this.fluidarb.outer_zn=new Bg,this.outer=this.fluidarb.outer_zn):this.outer=new qe,this.outer.zpp_inner=this,Z.internal=!1);return this.outer},__class__:Z};var Ab=function(){this.next=null;Z.call(this);this.type=Z.SENSOR;this.sensorarb=this};h["zpp_nape.dynamics.ZPP_SensorArbiter"]=
Ab;Ab.__name__=!0;Ab.__super__=Z;Ab.prototype=t(Z.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;this.intchange=this.active=!1;this.next=Ab.zpp_pool;Ab.zpp_pool=this},__class__:Ab});var Ka=function(){this.wMass=this.adamp=this.agamma=this.vMassa=this.vMassb=this.vMassc=this.dampx=this.dampy=this.lgamma=this.nx=this.ny=this.buoyx=this.buoyy=this.pre_dt=
0;this.nodrag=!1;this.centroidx=this.centroidy=this.overlap=this.r1x=this.r1y=this.r2x=this.r2y=0;this.outer_zn=this.next=null;Z.call(this);this.type=Z.FLUID;this.fluidarb=this;this.buoyy=this.buoyx=0;this.pre_dt=-1};h["zpp_nape.dynamics.ZPP_FluidArbiter"]=Ka;Ka.__name__=!0;Ka.__super__=Z;Ka.prototype=t(Z.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;
this.intchange=this.active=!1;this.next=Ka.zpp_pool;Ka.zpp_pool=this;this.pre_dt=-1},preStep:function(a,b){-1==this.pre_dt&&(this.pre_dt=b);var d=b/this.pre_dt;this.pre_dt=b;this.r1x=this.centroidx-this.b1.posx;this.r1y=this.centroidy-this.b1.posy;this.r2x=this.centroidx-this.b2.posx;this.r2y=this.centroidy-this.b2.posy;var c=0,f=0;this.ws1.fluidEnabled&&null!=this.ws1.fluidProperties.wrap_gravity?(c=this.ws1.fluidProperties.gravityx,f=this.ws1.fluidProperties.gravityy):(c=a.gravityx,f=a.gravityy);
var e=0,g=0;this.ws2.fluidEnabled&&null!=this.ws2.fluidProperties.wrap_gravity?(e=this.ws2.fluidProperties.gravityx,g=this.ws2.fluidProperties.gravityy):(e=a.gravityx,g=a.gravityy);var h=0,Q=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var j=this.overlap*this.ws1.fluidProperties.density,k=this.overlap*this.ws2.fluidProperties.density;if(j>k)e=j+k,h-=c*e,Q-=f*e;else if(j<k)c=j+k,h+=e*c,Q+=g*c;else{var m=0,o=0,m=0.5*(c+e),o=0.5*(f+g);this.ws1.worldCOMx*m+this.ws1.worldCOMy*o>this.ws2.worldCOMx*
m+this.ws2.worldCOMy*o?(c=j+k,h-=m*c,Q-=o*c):(c=j+k,h+=m*c,Q+=o*c)}}else this.ws1.fluidEnabled?(e=this.overlap*this.ws1.fluidProperties.density,h-=c*e,Q-=f*e):this.ws2.fluidEnabled&&(c=this.overlap*this.ws2.fluidProperties.density,h+=e*c,Q+=g*c);h*=b;Q*=b;this.buoyx=h;this.buoyy=Q;this.b1.type==i.id_BodyType_DYNAMIC&&(c=this.b1.imass,this.b1.velx-=h*c,this.b1.vely-=Q*c,this.b1.angvel-=(Q*this.r1x-h*this.r1y)*this.b1.iinertia);this.b2.type==i.id_BodyType_DYNAMIC&&(c=this.b2.imass,this.b2.velx+=h*c,
this.b2.vely+=Q*c,this.b2.angvel+=(Q*this.r2x-h*this.r2y)*this.b2.iinertia);if((!this.ws1.fluidEnabled||0==this.ws1.fluidProperties.viscosity)&&(!this.ws2.fluidEnabled||0==this.ws2.fluidProperties.viscosity))this.nodrag=!0,this.adamp=this.dampy=this.dampx=0;else{this.nodrag=!1;h=0;this.ws1.fluidEnabled&&(this.ws2.validate_angDrag(),h+=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area);this.ws2.fluidEnabled&&(this.ws1.validate_angDrag(),h+=this.ws2.fluidProperties.viscosity*
this.ws1.angDrag*this.overlap/this.ws1.area);0!=h?(Q=this.b1.sinertia+this.b2.sinertia,this.wMass=0!=Q?1/Q:0,h=2*Math.PI*4.0E-4*h,this.agamma=1/(b*h*(2+h*b)),h=1/(1+this.agamma),this.agamma*=h,this.wMass*=h):this.agamma=this.wMass=0;h=this.b2.velx+this.b2.kinvelx-this.r2y*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel));Q=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.r1x*(this.b1.angvel+
this.b1.kinangvel));h*h+Q*Q<q.epsilon*q.epsilon||(c=1/Math.sqrt(h*h+Q*Q),this.nx=h*c,this.ny=Q*c);h=0;if(this.ws1.fluidEnabled)if(Q=-this.ws1.fluidProperties.viscosity*this.overlap/this.ws2.area,this.ws2.type==i.id_ShapeType_CIRCLE)h-=Q*this.ws2.circle.radius*q.fluidLinearDrag/(2*this.ws2.circle.radius*Math.PI);else{f=c=0;for(e=this.ws2.polygon.edges.head;null!=e;)g=e.elt,c+=g.length,g=Q*g.length*(g.gnormx*this.nx+g.gnormy*this.ny),0<g&&(g=g*=-q.fluidVacuumDrag),f-=0.5*g*q.fluidLinearDrag,e=e.next;
h+=f/c}if(this.ws2.fluidEnabled)if(Q=-this.ws2.fluidProperties.viscosity*this.overlap/this.ws1.area,this.ws1.type==i.id_ShapeType_CIRCLE)h-=Q*this.ws1.circle.radius*q.fluidLinearDrag/(2*this.ws1.circle.radius*Math.PI);else{f=c=0;for(e=this.ws1.polygon.edges.head;null!=e;)g=e.elt,c+=g.length,g=Q*g.length*(g.gnormx*this.nx+g.gnormy*this.ny),0<g&&(g=g*=-q.fluidVacuumDrag),f-=0.5*g*q.fluidLinearDrag,e=e.next;h+=f/c}0!=h?(e=this.b1.smass+this.b2.smass,f=c=Q=0,Q=e,c=0,f=e,0!=this.b1.sinertia&&(e=this.r1x*
this.b1.sinertia,g=this.r1y*this.b1.sinertia,Q+=g*this.r1y,c+=-g*this.r1x,f+=e*this.r1x),0!=this.b2.sinertia&&(e=this.r2x*this.b2.sinertia,g=this.r2y*this.b2.sinertia,Q+=g*this.r2y,c+=-g*this.r2x,f+=e*this.r2x),e=Q*f-c*c,e!=e?(Q=c=f=0,3):0==e?(e=0,0!=Q?Q=1/Q:(Q=0,e|=1),0!=f?f=1/f:(f=0,e|=2),c=0,e):(e=1/e,g=f*e,f=Q*e,Q=g,c*=-e,0),this.vMassa=Q,this.vMassb=c,this.vMassc=f,h*=2*Math.PI,this.lgamma=1/(b*h*(2+h*b)),h=1/(1+this.lgamma),this.lgamma*=h,this.vMassa*=h,this.vMassb*=h,this.vMassc*=h):this.lgamma=
this.vMassc=this.vMassb=this.vMassa=0}this.dampx*=d;this.dampy*=d;this.adamp*=d},warmStart:function(){var a=this.b1.imass;this.b1.velx-=this.dampx*a;this.b1.vely-=this.dampy*a;a=this.b2.imass;this.b2.velx+=this.dampx*a;this.b2.vely+=this.dampy*a;this.b1.angvel-=this.b1.iinertia*(this.dampy*this.r1x-this.dampx*this.r1y);this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y);this.b1.angvel-=this.adamp*this.b1.iinertia;this.b2.angvel+=this.adamp*this.b2.iinertia},applyImpulseVel:function(){if(!this.nodrag){var a=
this.b1.angvel+this.b1.kinangvel,b=this.b2.angvel+this.b2.kinangvel,d=this.b1.velx+this.b1.kinvelx-this.r1y*a-(this.b2.velx+this.b2.kinvelx-this.r2y*b),c=this.b1.vely+this.b1.kinvely+this.r1x*a-(this.b2.vely+this.b2.kinvely+this.r2x*b),f=this.vMassa*d+this.vMassb*c,c=this.vMassb*d+this.vMassc*c,e=this.lgamma,d=f-this.dampx*e,c=c-this.dampy*e;this.dampx+=1*d;this.dampy+=1*c;f=this.b1.imass;this.b1.velx-=d*f;this.b1.vely-=c*f;f=this.b2.imass;this.b2.velx+=d*f;this.b2.vely+=c*f;this.b1.angvel-=this.b1.iinertia*
(c*this.r1x-d*this.r1y);this.b2.angvel+=this.b2.iinertia*(c*this.r2x-d*this.r2y);a=(a-b)*this.wMass-this.adamp*this.agamma;this.adamp+=a;this.b1.angvel-=a*this.b1.iinertia;this.b2.angvel+=a*this.b2.iinertia}},__class__:Ka});var vb=function(){this.pre_dt=0;this.stat=!1;this.next=null;this.hc2=this.hpc2=!1;this.c1=this.oc1=this.c2=this.oc2=null;this.__ref_vertex=0;this.__ref_edge1=this.__ref_edge2=null;this.biasCoef=0;this.rev=!1;this.nx=this.ny=this.kMassa=this.kMassb=this.kMassc=this.Ka=this.Kb=this.Kc=
this.rMass=this.jrAcc=this.rn1a=this.rt1a=this.rn1b=this.rt1b=this.rn2a=this.rt2a=this.rn2b=this.rt2b=this.k1x=this.k1y=this.k2x=this.k2y=this.surfacex=this.surfacey=this.lnormx=this.lnormy=this.lproj=this.radius=0;this.s1=this.s2=this.contacts=this.innards=null;this.userdef_dyn_fric=this.userdef_stat_fric=this.userdef_restitution=this.userdef_rfric=!1;this.dyn_fric=this.stat_fric=this.restitution=this.rfric=0;this.outer_zn=null;Z.call(this);this.pre_dt=-1;this.contacts=new Da;this.innards=new uh;
this.type=Z.COL;this.colarb=this};h["zpp_nape.dynamics.ZPP_ColArbiter"]=vb;vb.__name__=!0;vb.__super__=Z;vb.prototype=t(Z.prototype,{injectContact:function(a,b,d,c,f,e,i){null==i&&(i=!1);for(var g=null,h=this.contacts.next;null!=h;){var j=h;if(e==j.hash){g=j;break}h=h.next}null==g?(null==Da.zpp_pool?g=new Da:(g=Da.zpp_pool,Da.zpp_pool=g.next,g.next=null),null,h=g.inner,h.jnAcc=h.jtAcc=0,g.hash=e,g.fresh=!0,g.arbiter=this,this.jrAcc=0,this.contacts.inlined_add(g),this.innards.add(h)):g.fresh=!1;g.px=
a;g.py=b;this.nx=d;this.ny=c;g.dist=f;g.stamp=this.stamp;g.posOnly=i;return g},retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;for(this.intchange=this.active=!1;null!=this.contacts.next;){var a=this.contacts.inlined_pop_unsafe();a.arbiter=null;a.next=Da.zpp_pool;Da.zpp_pool=a;this.innards.inlined_pop()}this.userdef_rfric=this.userdef_restitution=this.userdef_stat_fric=
this.userdef_dyn_fric=!1;this.__ref_edge1=this.__ref_edge2=null;this.next=vb.zpp_pool;vb.zpp_pool=this;this.pre_dt=-1},cleanupContacts:function(){var a=!0,b=null,d=null,c=this.innards.next;this.hc2=!1;for(var f=this.contacts.next;null!=f;){var e=f;e.stamp+q.arbiterExpirationDelay<this.stamp?(f=this.contacts.inlined_erase(b),c=this.innards.inlined_erase(d),e.arbiter=null,e.next=Da.zpp_pool,Da.zpp_pool=e):(b=e.inner,d=e.active,e.active=e.stamp==this.stamp,e.active&&(a?(a=!1,this.c1=b,this.oc1=e):(this.hc2=
!0,this.c2=b,this.oc2=e)),d!=e.active&&(this.contacts.modified=!0),b=f,d=c,c=c.next,f=f.next)}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(c=this.c1,this.c1=this.c2,this.c2=c,c=this.oc1,this.oc1=this.oc2,this.oc2=c,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;return a},preStep:function(a){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.restitution=this.s1.material.elasticity<=Math.NEGATIVE_INFINITY||this.s2.material.elasticity<=Math.NEGATIVE_INFINITY?
0:this.s1.material.elasticity>=Math.POSITIVE_INFINITY||this.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(this.s1.material.elasticity+this.s2.material.elasticity)/2,0>this.restitution&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||
(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction)));-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;var d=this.b1.smass+this.b2.smass;this.hc2=!1;a=!0;this.biasCoef=this.b1.type!=i.id_BodyType_DYNAMIC||this.b2.type!=i.id_BodyType_DYNAMIC?this.continuous?q.contactContinuousStaticBiasCoef:q.contactStaticBiasCoef:this.continuous?q.contactContinuousBiasCoef:q.contactBiasCoef;this.continuous=!1;for(var c=null,f=null,e=this.innards.next,g=this.contacts.next;null!=
g;){var h=g;if(h.stamp+q.arbiterExpirationDelay<this.stamp)g=this.contacts.inlined_erase(c),e=this.innards.inlined_erase(f),h.arbiter=null,h.next=Da.zpp_pool,Da.zpp_pool=h;else{c=h.inner;f=h.active;h.active=h.stamp==this.stamp;if(h.active){a?(a=!1,this.c1=c,this.oc1=h):(this.hc2=!0,this.c2=c,this.oc2=h);c.r2x=h.px-this.b2.posx;c.r2y=h.py-this.b2.posy;c.r1x=h.px-this.b1.posx;c.r1y=h.py-this.b1.posy;var Q=d+this.b2.sinertia*Ue.sqr(c.r2x*this.nx+c.r2y*this.ny),Q=Q+this.b1.sinertia*Ue.sqr(c.r1x*this.nx+
c.r1y*this.ny);c.tMass=Q<q.epsilon*q.epsilon?0:1/Q;Q=d+this.b2.sinertia*Ue.sqr(this.ny*c.r2x-this.nx*c.r2y);Q+=this.b1.sinertia*Ue.sqr(this.ny*c.r1x-this.nx*c.r1y);c.nMass=Q<q.epsilon*q.epsilon?0:1/Q;var j=Q=0,k=this.b2.angvel+this.b2.kinangvel,Q=this.b2.velx+this.b2.kinvelx-c.r2y*k,j=this.b2.vely+this.b2.kinvely+c.r2x*k,k=this.b1.angvel+this.b1.kinangvel,Q=Q-(this.b1.velx+this.b1.kinvelx-c.r1y*k),j=j-(this.b1.vely+this.b1.kinvely+c.r1x*k),k=this.nx*Q+this.ny*j;h.elasticity=this.restitution;c.bounce=
k*h.elasticity;c.bounce>-q.elasticThreshold&&(c.bounce=0);k=j*this.nx-Q*this.ny;Q=q.staticFrictionThreshold;c.friction=k*k>Q*Q?this.dyn_fric:this.stat_fric;c.jnAcc*=b;c.jtAcc*=b}f!=h.active&&(this.contacts.modified=!0);c=g;f=e;e=e.next;g=g.next}}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(e=this.c1,this.c1=this.c2,this.c2=e,e=this.oc1,this.oc1=this.oc2,this.oc2=e,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;this.jrAcc*=b;a||(this.rn1a=this.ny*this.c1.r1x-this.nx*
this.c1.r1y,this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*this.ny,this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y,this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny,this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel),this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*this.b1.kinangvel));this.hc2&&(this.rn2a=this.ny*this.c2.r1x-this.nx*this.c2.r1y,this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny,this.rn2b=this.ny*this.c2.r2x-
this.nx*this.c2.r2y,this.rt2b=this.c2.r2x*this.nx+this.c2.r2y*this.ny,this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel),this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel),this.kMassa=d+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*this.rn1b*this.rn1b,this.kMassb=d+this.b1.sinertia*this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b,this.kMassc=d+this.b1.sinertia*this.rn2a*this.rn2a+
this.b2.sinertia*this.rn2b*this.rn2b,this.kMassa*this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc<q.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)?(this.Ka=this.kMassa,this.Kb=this.kMassb,this.Kc=this.kMassc,b=this.kMassa*this.kMassc-this.kMassb*this.kMassb,b!=b?(this.kMassa=this.kMassb=this.kMassc=0,3):0==b?(b=0,0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,b|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,b|=2),this.kMassb=0,b):(b=1/
b,d=this.kMassc*b,this.kMassc=this.kMassa*b,this.kMassa=d,this.kMassb*=-b,0)):(this.hc2=!1,this.oc2.dist<this.oc1.dist&&(b=this.c1,this.c1=this.c2,this.c2=b),this.oc2.active=!1,this.contacts.modified=!0));this.surfacex=this.b2.svelx;this.surfacey=this.b2.svely;this.surfacex+=1*this.b1.svelx;this.surfacey+=1*this.b1.svely;this.surfacex=-this.surfacex;this.surfacey=-this.surfacey;this.rMass=this.b1.sinertia+this.b2.sinertia;0!=this.rMass&&(this.rMass=1/this.rMass);return a},warmStart:function(){var a=
this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc,b=this.ny*this.c1.jnAcc+this.nx*this.c1.jtAcc,d=this.b1.imass;this.b1.velx-=a*d;this.b1.vely-=b*d;this.b1.angvel-=this.b1.iinertia*(b*this.c1.r1x-a*this.c1.r1y);d=this.b2.imass;this.b2.velx+=a*d;this.b2.vely+=b*d;this.b2.angvel+=this.b2.iinertia*(b*this.c1.r2x-a*this.c1.r2y);this.hc2&&(a=this.nx*this.c2.jnAcc-this.ny*this.c2.jtAcc,b=this.ny*this.c2.jnAcc+this.nx*this.c2.jtAcc,d=this.b1.imass,this.b1.velx-=a*d,this.b1.vely-=b*d,this.b1.angvel-=this.b1.iinertia*
(b*this.c2.r1x-a*this.c2.r1y),d=this.b2.imass,this.b2.velx+=a*d,this.b2.vely+=b*d,this.b2.angvel+=this.b2.iinertia*(b*this.c2.r2x-a*this.c2.r2y));this.b2.angvel+=this.jrAcc*this.b2.iinertia;this.b1.angvel-=this.jrAcc*this.b1.iinertia},applyImpulseVel:function(){var a,b,d,c,f;c=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel);var e=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel);d=(e*this.nx-c*this.ny+this.surfacex)*
this.c1.tMass;c=this.c1.friction*this.c1.jnAcc;a=this.c1.jtAcc;f=a-d;f>c?f=c:f<-c&&(f=-c);d=f-a;this.c1.jtAcc=f;a=-this.ny*d;b=this.nx*d;this.b2.velx+=a*this.b2.imass;this.b2.vely+=b*this.b2.imass;this.b1.velx-=a*this.b1.imass;this.b1.vely-=b*this.b1.imass;this.b2.angvel+=this.rt1b*d*this.b2.iinertia;this.b1.angvel-=this.rt1a*d*this.b1.iinertia;this.hc2?(f=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-
(this.b1.vely+this.c2.r1x*this.b1.angvel),d=(b*this.nx-f*this.ny+this.surfacex)*this.c2.tMass,c=this.c2.friction*this.c2.jnAcc,a=this.c2.jtAcc,f=a-d,f>c?f=c:f<-c&&(f=-c),d=f-a,this.c2.jtAcc=f,a=-this.ny*d,b=this.nx*d,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rt2b*d*this.b2.iinertia,this.b1.angvel-=this.rt2a*d*this.b1.iinertia,c=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*
this.b1.angvel),e=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),f=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),d=this.c1.jnAcc,a=this.c2.jnAcc,c=c*this.nx+e*this.ny+this.surfacey+this.c1.bounce-(this.Ka*d+this.Kb*a),f=f*this.nx+b*this.ny+this.surfacey+this.c2.bounce-(this.Kb*d+this.Kc*a),b=-(this.kMassa*c+this.kMassb*
f),e=-(this.kMassb*c+this.kMassc*f),0<=b&&0<=e?(c=b-d,f=e-a,this.c1.jnAcc=b,this.c2.jnAcc=e):(b=-this.c1.nMass*c,0<=b&&0<=this.Kb*b+f?(c=b-d,f=-a,this.c1.jnAcc=b,this.c2.jnAcc=0):(e=-this.c2.nMass*f,0<=e&&0<=this.Kb*e+c?(c=-d,f=e-a,this.c1.jnAcc=0,this.c2.jnAcc=e):0<=c&&0<=f?(c=-d,f=-a,this.c1.jnAcc=this.c2.jnAcc=0):f=c=0)),d=c+f,a=this.nx*d,b=this.ny*d,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=(this.rn1b*
c+this.rn2b*f)*this.b2.iinertia,this.b1.angvel-=(this.rn1a*c+this.rn2a*f)*this.b1.iinertia):(0!=this.radius&&(d=(this.b2.angvel-this.b1.angvel)*this.rMass,c=this.rfric*this.c1.jnAcc,a=this.jrAcc,this.jrAcc-=d,this.jrAcc>c?this.jrAcc=c:this.jrAcc<-c&&(this.jrAcc=-c),d=this.jrAcc-a,this.b2.angvel+=d*this.b2.iinertia,this.b1.angvel-=d*this.b1.iinertia),c=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),e=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+
this.c1.r1x*this.b1.angvel),d=(this.c1.bounce+(this.nx*c+this.ny*e)+this.surfacey)*this.c1.nMass,a=this.c1.jnAcc,f=a-d,0>f&&(f=0),d=f-a,this.c1.jnAcc=f,a=this.nx*d,b=this.ny*d,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rn1b*d*this.b2.iinertia,this.b1.angvel-=this.rn1a*d*this.b1.iinertia)},applyImpulsePos:function(){if(2==this.ptype){var a=this.c1,b=0,d=0,b=this.b2.axisy*a.lr2x-this.b2.axisx*a.lr2y,d=
a.lr2x*this.b2.axisx+a.lr2y*this.b2.axisy,b=b+1*this.b2.posx,d=d+1*this.b2.posy,c=0,f=0,c=this.b1.axisy*a.lr1x-this.b1.axisx*a.lr1y,f=a.lr1x*this.b1.axisx+a.lr1y*this.b1.axisy,c=c+1*this.b1.posx,f=f+1*this.b1.posy,e=a=0,a=b-c,e=d-f,i=Math.sqrt(a*a+e*e),g=this.radius-q.collisionSlop,h=i-g;0>a*this.nx+e*this.ny&&(a=-a,e=-e,h-=this.radius);0>h&&(i<q.epsilon?0!=this.b1.smass?this.b1.posx+=10*q.epsilon:this.b2.posx+=10*q.epsilon:(h=1/i,a*=h,e*=h,b=0.5*(c+b),d=0.5*(f+d),c=b-this.b1.posx,f=d-this.b1.posy,
b-=this.b2.posx,d-=this.b2.posy,c=e*c-a*f,b=e*b-a*d,d=this.b2.smass+b*b*this.b2.sinertia+this.b1.smass+c*c*this.b1.sinertia,0!=d&&(i=-this.biasCoef*(i-g)/d,d=g=0,g=a*i,d=e*i,a=this.b1.imass,this.b1.posx-=g*a,this.b1.posy-=d*a,this.b1.delta_rot(-c*this.b1.iinertia*i),a=this.b2.imass,this.b2.posx+=g*a,this.b2.posy+=d*a,this.b2.delta_rot(b*this.b2.iinertia*i))))}else{var j=h=e=a=0,f=b=0;0==this.ptype?(a=this.b1.axisy*this.lnormx-this.b1.axisx*this.lnormy,e=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy,
g=this.lproj+(a*this.b1.posx+e*this.b1.posy),h=this.b2.axisy*this.c1.lr1x-this.b2.axisx*this.c1.lr1y,j=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy,h+=1*this.b2.posx,j+=1*this.b2.posy,this.hpc2&&(b=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y,f=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy,b+=1*this.b2.posx,f+=1*this.b2.posy)):(a=this.b2.axisy*this.lnormx-this.b2.axisx*this.lnormy,e=this.lnormx*this.b2.axisx+this.lnormy*this.b2.axisy,g=this.lproj+(a*this.b2.posx+e*this.b2.posy),
h=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y,j=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy,h+=1*this.b1.posx,j+=1*this.b1.posy,this.hpc2&&(b=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y,f=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy,b+=1*this.b1.posx,f+=1*this.b1.posy));i=h*a+j*e-g-this.radius;i+=q.collisionSlop;d=0;this.hpc2&&(d=b*a+f*e-g-this.radius,d+=q.collisionSlop);if(0>i||0>d){this.rev&&(a=-a,e=-e);var k=0,m=0,k=h-this.b1.posx,m=j-this.b1.posy,c=g=0,g=
h-this.b2.posx,c=j-this.b2.posy,o=0,s=0,j=h=0;if(this.hpc2){o=b-this.b1.posx;s=f-this.b1.posy;h=b-this.b2.posx;j=f-this.b2.posy;b=e*k-a*m;g=e*g-a*c;f=e*o-a*s;c=e*h-a*j;h=this.b1.smass+this.b2.smass;this.kMassa=h+this.b1.sinertia*b*b+this.b2.sinertia*g*g;this.kMassb=h+this.b1.sinertia*b*f+this.b2.sinertia*g*c;this.kMassc=h+this.b1.sinertia*f*f+this.b2.sinertia*c*c;k=j=h=0;h=this.kMassa;j=this.kMassb;k=this.kMassc;m=i*this.biasCoef;o=d*this.biasCoef;d=i=0;i=-m;d=-o;s=this.kMassa*this.kMassc-this.kMassb*
this.kMassb;if(s!=s)i=d=0;else if(0==s)i=0!=this.kMassa?i/this.kMassa:0,d=0!=this.kMassc?d/this.kMassc:0;else var s=1/s,r=s*(this.kMassc*i-this.kMassb*d),d=s*(this.kMassa*d-this.kMassb*i),i=r;0<=i&&0<=d?(h=(i+d)*this.b1.imass,this.b1.posx-=a*h,this.b1.posy-=e*h,this.b1.delta_rot(-this.b1.iinertia*(b*i+f*d)),b=(i+d)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=e*b,this.b2.delta_rot(this.b2.iinertia*(g*i+c*d))):(i=-m/h,d=0,0<=i&&0<=j*i+o?(h=(i+d)*this.b1.imass,this.b1.posx-=a*h,this.b1.posy-=e*h,this.b1.delta_rot(-this.b1.iinertia*
(b*i+f*d)),b=(i+d)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=e*b,this.b2.delta_rot(this.b2.iinertia*(g*i+c*d))):(i=0,d=-o/k,0<=d&&0<=j*d+m&&(h=(i+d)*this.b1.imass,this.b1.posx-=a*h,this.b1.posy-=e*h,this.b1.delta_rot(-this.b1.iinertia*(b*i+f*d)),b=(i+d)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=e*b,this.b2.delta_rot(this.b2.iinertia*(g*i+c*d)))))}else b=e*k-a*m,g=e*g-a*c,d=this.b2.smass+g*g*this.b2.sinertia+this.b1.smass+b*b*this.b1.sinertia,0!=d&&(i=-this.biasCoef*i/d,c=d=0,d=a*i,c=e*i,a=
this.b1.imass,this.b1.posx-=d*a,this.b1.posy-=c*a,this.b1.delta_rot(-b*this.b1.iinertia*i),a=this.b2.imass,this.b2.posx+=d*a,this.b2.posy+=c*a,this.b2.delta_rot(g*this.b2.iinertia*i))}}},__class__:vb});var Da=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.dist=this.elasticity=0;this.fresh=!1;this.stamp=this.hash=0;this.active=this.posOnly=!1;this.arbiter=this.inner=null;this.px=this.py=0;this.outer=null;this.inner=new uh};h["zpp_nape.dynamics.ZPP_Contact"]=
Da;Da.__name__=!0;Da.prototype={wrapper:function(){null==this.outer&&(Da.internal=!0,this.outer=new ri,Da.internal=!1,this.outer.zpp_inner=this);return this.outer},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},
inlined_erase:function(a){var b,d;null==a?(b=this.next,this.next=d=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return d},__class__:Da};var uh=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.r1x=this.r1y=this.r2x=this.r2y=this.nMass=this.tMass=this.bounce=this.friction=this.jnAcc=this.jtAcc=this.lr1x=this.lr1y=this.lr2x=this.lr2y=0};h["zpp_nape.dynamics.ZPP_IContact"]=
uh;uh.__name__=!0;uh.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_erase:function(a){var b,d;null==a?(b=this.next,this.next=d=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));b._inuse=!1;this.modified=
!0;this.length--;this.pushmod=!0;return d},__class__:uh};var lb=function(){this.collisionGroup=this.collisionMask=this.sensorGroup=this.sensorMask=this.fluidGroup=this.fluidMask=0;this.next=this.outer=this.shapes=null;this.shapes=new Ve;this.collisionGroup=this.sensorGroup=this.fluidGroup=1;this.collisionMask=this.sensorMask=this.fluidMask=-1};h["zpp_nape.dynamics.ZPP_InteractionFilter"]=lb;lb.__name__=!0;lb.prototype={wrapper:function(){if(null==this.outer){this.outer=new si;var a=this.outer.zpp_inner;
a.outer=null;a.next=lb.zpp_pool;lb.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},shouldCollide:function(a){return 0!=(this.collisionMask&a.collisionGroup)&&0!=(a.collisionMask&this.collisionGroup)},shouldSense:function(a){return 0!=(this.sensorMask&a.sensorGroup)&&0!=(a.sensorMask&this.sensorGroup)},shouldFlow:function(a){return 0!=(this.fluidMask&a.fluidGroup)&&0!=(a.fluidMask&this.fluidGroup)},invalidate:function(){for(var a=this.shapes.head;null!=a;)a.elt.invalidate_filter(),a=a.next},
__class__:lb};var hk=function(){this.depth=0;this.group=this.interactors=null;this.ignore=!1;this.outer=null};h["zpp_nape.dynamics.ZPP_InteractionGroup"]=hk;hk.__name__=!0;hk.prototype={__class__:hk};var ia=function(){this.wrap_max=null;this.maxx=this.maxy=0;this.wrap_min=null;this.minx=this.miny=0;this.outer=this.next=null;this._immutable=!1;this._invalidate=this._validate=null};h["zpp_nape.geom.ZPP_AABB"]=ia;ia.__name__=!0;ia.get=function(a,b,d,c){var f;null==ia.zpp_pool?f=new ia:(f=ia.zpp_pool,
ia.zpp_pool=f.next,f.next=null);null;f.minx=a;f.miny=b;f.maxx=d;f.maxy=c;return f};ia.prototype={validate:function(){null!=this._validate&&this._validate()},perimeter:function(){return 2*(this.maxx-this.minx+(this.maxy-this.miny))},intersectY:function(a){return!(a.miny>this.maxy||this.miny>a.maxy)},intersect:function(a){return a.miny<=this.maxy&&this.miny<=a.maxy&&a.minx<=this.maxx&&this.minx<=a.maxx},combine:function(a){a.minx<this.minx&&(this.minx=a.minx);a.maxx>this.maxx&&(this.maxx=a.maxx);a.miny<
this.miny&&(this.miny=a.miny);a.maxy>this.maxy&&(this.maxy=a.maxy)},contains:function(a){return a.minx>=this.minx&&a.miny>=this.miny&&a.maxx<=this.maxx&&a.maxy<=this.maxy},setCombine:function(a,b){this.minx=a.minx<b.minx?a.minx:b.minx;this.miny=a.miny<b.miny?a.miny:b.miny;this.maxx=a.maxx>b.maxx?a.maxx:b.maxx;this.maxy=a.maxy>b.maxy?a.maxy:b.maxy},setExpand:function(a,b){this.minx=a.minx-b;this.miny=a.miny-b;this.maxx=a.maxx+b;this.maxy=a.maxy+b},toString:function(){return"{ x: "+this.minx+" y: "+
this.miny+" w: "+(this.maxx-this.minx)+" h: "+(this.maxy-this.miny)+" }"},__class__:ia};var kg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Vec2"]=kg;kg.__name__=!0;kg.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==rb.zpp_pool?b=new rb:(b=rb.zpp_pool,rb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,
b)},inlined_insert:function(a,b){var d;null==rb.zpp_pool?d=new rb:(d=rb.zpp_pool,rb.zpp_pool=d.next,d.next=null);null;d.elt=b;null==a?(d.next=this.head,this.head=d):(d.next=a.next,a.next=d);this.pushmod=this.modified=!0;this.length++;return d},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=rb.zpp_pool;rb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,d;null==a?(b=this.head,this.head=d=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,d=b.next,a.next=d,null==d&&(this.pushmod=!0));a=b;a.elt=null;a.next=rb.zpp_pool;rb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return d},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<
a--&&null!=b;)b=b.next;return b},__class__:kg};var G=function(){};h["zpp_nape.geom.ZPP_Collide"]=G;G.__name__=!0;G.contactCollide=function(a,b,d,c){if(b.type==i.id_ShapeType_POLYGON)if(a.type==i.id_ShapeType_POLYGON){for(var f=!0,e=-1.0E100,g=-1,h=null,j=null,k=a.polygon.edges.head;null!=k;){for(var m=k.elt,o=1.0E100,s=b.polygon.gverts.next;null!=s;){var r=s,r=m.gnormx*r.x+m.gnormy*r.y;r<o&&(o=r);if(o-m.gprojection<=e)break;s=s.next}o-=m.gprojection;if(0<=o){f=!1;break}o>e&&(e=o,h=m,g=1);k=k.next}if(f){for(k=
b.polygon.edges.head;null!=k;){m=k.elt;o=1.0E100;for(s=a.polygon.gverts.next;null!=s;){r=s;r=m.gnormx*r.x+m.gnormy*r.y;r<o&&(o=r);if(o-m.gprojection<=e)break;s=s.next}o-=m.gprojection;if(0<=o){f=!1;break}o>e&&(e=o,j=m,g=2);k=k.next}if(f){1==g?(a=b.polygon,b=h,j=1):(a=a.polygon,b=j,j=-1);h=null;f=1.0E100;for(e=a.edges.head;null!=e;)k=e.elt,m=b.gnormx*k.gnormx+b.gnormy*k.gnormy,m<f&&(f=m,h=k),e=e.next;var e=f=0,f=h.gp0.x,e=h.gp0.y,m=k=0,k=h.gp1.x,m=h.gp1.y,s=o=0,o=k-f,s=m-e,t=b.gnormy*f-b.gnormx*e,
r=b.gnormy*k-b.gnormx*m,w=1/(r-t),t=(-b.tp1-t)*w;t>q.epsilon&&(f+=o*t,e+=s*t);r=(-b.tp0-r)*w;r<-q.epsilon&&(k+=o*r,m+=s*r);s=o=0;s=j;o=b.gnormx*s;s*=b.gnormy;d.lnormx=b.lnormx;d.lnormy=b.lnormy;d.lproj=b.lprojection;d.radius=0;d.rev=c!=(-1==j);d.ptype=d.rev?1:0;r=f*b.gnormx+e*b.gnormy-b.gprojection;j=k*b.gnormx+m*b.gnormy-b.gprojection;if(0<r&&0<j)return!1;c&&(o=-o,s=-s);c=d.injectContact(f-0.5*b.gnormx*r,e-0.5*b.gnormy*r,o,s,r,d.rev?1:0,0<r);f-=1*a.body.posx;e-=1*a.body.posy;c.inner.lr1x=f*a.body.axisy+
e*a.body.axisx;c.inner.lr1y=e*a.body.axisy-f*a.body.axisx;c=d.injectContact(k-0.5*b.gnormx*j,m-0.5*b.gnormy*j,o,s,j,d.rev?0:1,0<j);k-=1*a.body.posx;m-=1*a.body.posy;c.inner.lr1x=k*a.body.axisy+m*a.body.axisx;c.inner.lr1y=m*a.body.axisy-k*a.body.axisx;1==g?(d.__ref_edge1=b,d.__ref_edge2=h):(d.__ref_edge2=b,d.__ref_edge1=h);return!0}}}else{j=-1.0E100;h=!0;f=g=null;e=b.polygon.gverts.next;for(k=b.polygon.edges.head;null!=k;){m=k.elt;o=m.gnormx*a.circle.worldCOMx+m.gnormy*a.circle.worldCOMy-m.gprojection-
a.circle.radius;if(0<o){h=!1;break}o>j&&(j=o,g=m,f=e);e=e.next;k=k.next}if(h){h=f;f=null==f.next?b.polygon.gverts.next:f.next;e=a.circle.worldCOMy*g.gnormx-a.circle.worldCOMx*g.gnormy;if(e<=h.y*g.gnormx-h.x*g.gnormy)return j=a.circle.radius,e=f=0,f=h.x-a.circle.worldCOMx,e=h.y-a.circle.worldCOMy,k=f*f+e*e,k>j*j?j=null:k<q.epsilon*q.epsilon?j=d.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-j,0,null):(k=1/Math.sqrt(k),m=k<q.epsilon?1.0E100:1/k,o=0.5+(a.circle.radius-0.5*j)*k,j=c?d.injectContact(a.circle.worldCOMx+
f*o,a.circle.worldCOMy+e*o,-f*k,-e*k,m-j,0,null):d.injectContact(a.circle.worldCOMx+f*o,a.circle.worldCOMy+e*o,f*k,e*k,m-j,0,null)),null!=j&&(f=j.inner,d.ptype=2,k=e=0,e=h.x-b.polygon.body.posx,k=h.y-b.polygon.body.posy,d.__ref_edge1=g,d.__ref_vertex=-1,c?(f.lr1x=e*b.polygon.body.axisy+k*b.polygon.body.axisx,f.lr1y=k*b.polygon.body.axisy-e*b.polygon.body.axisx,f.lr2x=a.circle.localCOMx,f.lr2y=a.circle.localCOMy):(f.lr2x=e*b.polygon.body.axisy+k*b.polygon.body.axisx,f.lr2y=k*b.polygon.body.axisy-e*
b.polygon.body.axisx,f.lr1x=a.circle.localCOMx,f.lr1y=a.circle.localCOMy),d.radius=a.circle.radius),null!=j;if(e>=f.y*g.gnormx-f.x*g.gnormy)return h=a.circle.radius,e=j=0,j=f.x-a.circle.worldCOMx,e=f.y-a.circle.worldCOMy,k=j*j+e*e,k>h*h?h=null:k<q.epsilon*q.epsilon?h=d.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-h,0,null):(k=1/Math.sqrt(k),m=k<q.epsilon?1.0E100:1/k,o=0.5+(a.circle.radius-0.5*h)*k,h=c?d.injectContact(a.circle.worldCOMx+j*o,a.circle.worldCOMy+e*o,-j*k,-e*k,m-h,0,null):
d.injectContact(a.circle.worldCOMx+j*o,a.circle.worldCOMy+e*o,j*k,e*k,m-h,0,null)),null!=h&&(j=h.inner,d.ptype=2,k=e=0,e=f.x-b.polygon.body.posx,k=f.y-b.polygon.body.posy,d.__ref_edge1=g,d.__ref_vertex=1,c?(j.lr1x=e*b.polygon.body.axisy+k*b.polygon.body.axisx,j.lr1y=k*b.polygon.body.axisy-e*b.polygon.body.axisx,j.lr2x=a.circle.localCOMx,j.lr2y=a.circle.localCOMy):(j.lr2x=e*b.polygon.body.axisy+k*b.polygon.body.axisx,j.lr2y=k*b.polygon.body.axisy-e*b.polygon.body.axisx,j.lr1x=a.circle.localCOMx,j.lr1y=
a.circle.localCOMy),d.radius=a.circle.radius),null!=h;h=b=0;h=a.circle.radius+0.5*j;b=g.gnormx*h;h*=g.gnormy;e=f=0;f=a.circle.worldCOMx-b;e=a.circle.worldCOMy-h;b=c?d.injectContact(f,e,g.gnormx,g.gnormy,j,0,null):d.injectContact(f,e,-g.gnormx,-g.gnormy,j,0,null);d.ptype=c?0:1;d.lnormx=g.lnormx;d.lnormy=g.lnormy;d.rev=!c;d.lproj=g.lprojection;d.radius=a.circle.radius;b.inner.lr1x=a.circle.localCOMx;b.inner.lr1y=a.circle.localCOMy;d.__ref_edge1=g;d.__ref_vertex=0;return!0}}else if(g=a.circle.radius+
b.circle.radius,j=h=0,h=b.circle.worldCOMx-a.circle.worldCOMx,j=b.circle.worldCOMy-a.circle.worldCOMy,f=h*h+j*j,f>g*g?g=null:f<q.epsilon*q.epsilon?g=d.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-g,0,null):(f=1/Math.sqrt(f),e=f<q.epsilon?1.0E100:1/f,k=0.5+(a.circle.radius-0.5*g)*f,g=c?d.injectContact(a.circle.worldCOMx+h*k,a.circle.worldCOMy+j*k,-h*f,-j*f,e-g,0,null):d.injectContact(a.circle.worldCOMx+h*k,a.circle.worldCOMy+j*k,h*f,j*f,e-g,0,null)),null!=g)return g=g.inner,c?(g.lr1x=b.circle.localCOMx,
g.lr1y=b.circle.localCOMy,g.lr2x=a.circle.localCOMx,g.lr2y=a.circle.localCOMy):(g.lr1x=a.circle.localCOMx,g.lr1y=a.circle.localCOMy,g.lr2x=b.circle.localCOMx,g.lr2y=b.circle.localCOMy),d.radius=a.circle.radius+b.circle.radius,d.ptype=2,!0;return!1};G.testCollide_safe=function(a,b){if(b.type==i.id_ShapeType_CIRCLE)var d=a,a=b,b=d;return G.testCollide(a,b)};G.testCollide=function(a,b){if(b.type==i.id_ShapeType_POLYGON){if(a.type==i.id_ShapeType_POLYGON){for(var d=!0,c=a.polygon.edges.head;null!=c;){for(var f=
c.elt,e=1.0E100,g=b.polygon.gverts.next;null!=g;){var h=g,h=f.gnormx*h.x+f.gnormy*h.y;h<e&&(e=h);g=g.next}e-=f.gprojection;if(0<e){d=!1;break}c=c.next}if(d){for(c=b.polygon.edges.head;null!=c;){f=c.elt;e=1.0E100;for(g=a.polygon.gverts.next;null!=g;)h=g,h=f.gnormx*h.x+f.gnormy*h.y,h<e&&(e=h),g=g.next;e-=f.gprojection;if(0<e){d=!1;break}c=c.next}return d}}else{c=d=null;f=!0;e=-1.0E100;g=b.polygon.gverts.next;for(h=b.polygon.edges.head;null!=h;){var j=h.elt,k=j.gnormx*a.circle.worldCOMx+j.gnormy*a.circle.worldCOMy-
j.gprojection-a.circle.radius;if(0<k){f=!1;break}k>e&&(e=k,d=j,c=g);g=g.next;h=h.next}if(f){f=c;c=null==c.next?b.polygon.gverts.next:c.next;e=a.circle.worldCOMy*d.gnormx-a.circle.worldCOMx*d.gnormy;if(e<=f.y*d.gnormx-f.x*d.gnormy)return d=a.circle.radius,e=c=0,c=f.x-a.circle.worldCOMx,e=f.y-a.circle.worldCOMy,c*c+e*e<=d*d;return e>=c.y*d.gnormx-c.x*d.gnormy?(d=a.circle.radius,e=f=0,f=c.x-a.circle.worldCOMx,e=c.y-a.circle.worldCOMy,f*f+e*e<=d*d):!0}}return!1}d=a.circle.radius+b.circle.radius;f=c=0;
c=b.circle.worldCOMx-a.circle.worldCOMx;f=b.circle.worldCOMy-a.circle.worldCOMy;return c*c+f*f<=d*d};G.flowCollide=function(a,b,d){if(b.type==i.id_ShapeType_POLYGON){if(a.type==i.id_ShapeType_POLYGON){for(var c=[],f=[],e=!0,g=!0,h=a.polygon.edges.head;null!=h;){for(var j=h.elt,k=1.0E100,m=0,o=b.polygon.gverts.next;null!=o;){var s=o,r=j.gnormx*s.x+j.gnormy*s.y;r<k&&(k=r);r>=j.gprojection+q.epsilon&&(f[m]=!0,g=!1);m++;o=o.next}k-=j.gprojection;if(0<k){e=!1;break}h=h.next}if(g)return b.polygon.validate_worldCOM(),
d.overlap=b.polygon.area,d.centroidx=b.polygon.worldCOMx,d.centroidy=b.polygon.worldCOMy,null,!0;if(e){for(var g=!0,t=b.polygon.edges.head;null!=t;){for(var w=t.elt,v=1.0E100,z=0,y=a.polygon.gverts.next;null!=y;){var x=y,B=w.gnormx*x.x+w.gnormy*x.y;B<v&&(v=B);B>=w.gprojection+q.epsilon&&(c[z]=!0,g=!1);z++;y=y.next}v-=w.gprojection;if(0<v){e=!1;break}t=t.next}if(g)return a.polygon.validate_worldCOM(),d.overlap=a.polygon.area,d.centroidx=a.polygon.worldCOMx,d.centroidy=a.polygon.worldCOMy,null,!0;if(e){for(;null!=
G.flowpoly.head;){var K=G.flowpoly.pop_unsafe();if(!K._inuse){var C=K;null!=C.outer&&(C.outer.zpp_inner=null,C.outer=null);C._isimmutable=null;C._validate=null;C._invalidate=null;C.next=ha.zpp_pool;ha.zpp_pool=C}}for(var A=null,D=!1,E=a.polygon.gverts.next,I=0,F=b.polygon.gverts.next,J=0,P=0,W=b.polygon.edgeCnt;P<W;){var O=P++;if(f[O])F=F.next;else{J=O;break}}if(null==F){for(var F=b.polygon.gverts.next,D=!0,R=0,Y=a.polygon.edgeCnt;R<Y;){var V=R++;if(c[V])E=E.next;else{I=V;break}}null==E?E=a.polygon.gverts.next:
(G.flowpoly.add(E),A=G.flowpoly.head.elt)}else G.flowpoly.add(F),A=G.flowpoly.head.elt;var M=1;if(null==G.flowpoly.head){for(var X=!0,Z=a.polygon.gverts.next,L=Z,ea=Z.next;null!=ea;){for(var fa=ea,ca=2,da=b.polygon.gverts.next,N=da,ba=da.next;null!=ba;){var ka=ba,ja=0;(function(){var a=0,b=0,a=L.x-N.x,b=L.y-N.y,d=0,c=0,d=fa.x-L.x,c=fa.y-L.y,l=0,f=0,l=ka.x-N.x,f=ka.y-N.y,e=c*l-d*f;e*e>q.epsilon*q.epsilon?(e=1/e,l=(f*a-l*b)*e,l>q.epsilon&&l<1-q.epsilon?(a=(c*a-d*b)*e,a>q.epsilon&&a<1-q.epsilon?(ja=
l,a=!0):a=!1):a=!1):a=!1;return a})(this)&&ja<ca&&(ca=ja,F=da);da=ba;N=ka;ba=ba.next}var ta=ba=b.polygon.gverts.next,ma=0;(function(){var a=0,b=0,a=L.x-N.x,b=L.y-N.y,d=0,c=0,d=fa.x-L.x,c=fa.y-L.y,l=0,f=0,l=ta.x-N.x,f=ta.y-N.y,e=c*l-d*f;e*e>q.epsilon*q.epsilon?(e=1/e,l=(f*a-l*b)*e,l>q.epsilon&&l<1-q.epsilon?(a=(c*a-d*b)*e,a>q.epsilon&&a<1-q.epsilon?(ma=l,a=!0):a=!1):a=!1):a=!1;return a})(this)&&ma<ca&&(ca=ma,F=da);if(2!=ca){var qa=0,xa=0,ua=ca,qa=L.x+(fa.x-L.x)*ua,xa=L.y+(fa.y-L.y)*ua,A=ha.get(qa,
xa,null);G.flowpoly.add(A);D=!0;E=Z;X=!1;break}Z=ea;L=fa;ea=ea.next}if(X){for(var wa=ea=a.polygon.gverts.next,u=2,oa=b.polygon.gverts.next,aa=oa,ra=oa.next;null!=ra;){var Fa=ra,cb=0;(function(){var a=0,b=0,a=L.x-aa.x,b=L.y-aa.y,d=0,c=0,d=wa.x-L.x,c=wa.y-L.y,l=0,f=0,l=Fa.x-aa.x,f=Fa.y-aa.y,e=c*l-d*f;e*e>q.epsilon*q.epsilon?(e=1/e,l=(f*a-l*b)*e,l>q.epsilon&&l<1-q.epsilon?(a=(c*a-d*b)*e,a>q.epsilon&&a<1-q.epsilon?(cb=l,a=!0):a=!1):a=!1):a=!1;return a})(this)&&cb<u&&(u=cb,F=oa);oa=ra;aa=Fa;ra=ra.next}var S=
ra=b.polygon.gverts.next,ga=0;(function(){var a=0,b=0,a=L.x-aa.x,b=L.y-aa.y,d=0,c=0,d=wa.x-L.x,c=wa.y-L.y,l=0,f=0,l=S.x-aa.x,f=S.y-aa.y,e=c*l-d*f;e*e>q.epsilon*q.epsilon?(e=1/e,l=(f*a-l*b)*e,l>q.epsilon&&l<1-q.epsilon?(a=(c*a-d*b)*e,a>q.epsilon&&a<1-q.epsilon?(ga=l,a=!0):a=!1):a=!1):a=!1;return a})(this)&&ga<u&&(u=ga,F=oa);if(2!=u){var za=0,U=0,bh=u,za=L.x+(wa.x-L.x)*bh,U=L.y+(wa.y-L.y)*bh,A=ha.get(za,U,null);G.flowpoly.add(A);D=!0;E=Z}}M=2}for(;;)if(D)if(E=E.next,I++,null==E&&(E=a.polygon.gverts.next,
I=0),c[I]){var ia=G.flowpoly.head.elt,Pe=E,pa=F,Qe=F.next;null==Qe&&(Qe=b.polygon.gverts.next);var Ja=-1,Ba=null,Ca=0,Ia=0,Qa=Qe,Ac=Qe;do{var gb=Ac,Ha=0;if(function(){var a=0,b=0,a=pa.x-ia.x,b=pa.y-ia.y,d=0,c=0,d=gb.x-pa.x,c=gb.y-pa.y,l=0,f=0,l=Pe.x-ia.x,f=Pe.y-ia.y,e=c*l-d*f;e*e>q.epsilon*q.epsilon?(e=1/e,l=(f*a-l*b)*e,l>q.epsilon&&l<1-q.epsilon?(a=(c*a-d*b)*e,a>q.epsilon&&a<1-q.epsilon?(Ha=l,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Ha>=Ja)if(Ba=F,Ca=J,++Ia==M){Ja=Ha;Ac=Qa;break}else Ja=Ha;pa=gb;
F=Ac;J++;J>=b.polygon.edgeCnt&&(J=0);Ac=Ac.next;null==Ac&&(Ac=b.polygon.gverts.next)}while(0);for(;Ac!=Qa;){var Aa=Ac,Pa=0;if(function(){var a=0,b=0,a=pa.x-ia.x,b=pa.y-ia.y,d=0,c=0,d=Aa.x-pa.x,c=Aa.y-pa.y,l=0,f=0,l=Pe.x-ia.x,f=Pe.y-ia.y,e=c*l-d*f;e*e>q.epsilon*q.epsilon?(e=1/e,l=(f*a-l*b)*e,l>q.epsilon&&l<1-q.epsilon?(a=(c*a-d*b)*e,a>q.epsilon&&a<1-q.epsilon?(Pa=l,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Pa>=Ja)if(Ba=F,Ca=J,++Ia==M){Ja=Pa;Ac=Qa;break}else Ja=Pa;pa=Aa;F=Ac;J++;J>=b.polygon.edgeCnt&&
(J=0);Ac=Ac.next;null==Ac&&(Ac=b.polygon.gverts.next)}if(null==Ba)break;var Da=Ba,Ya=Ba.next;null==Ya&&(Ya=b.polygon.gverts.next);var qb=Ya,Za=0,ch=0,La=Ja,Za=Da.x+(qb.x-Da.x)*La,ch=Da.y+(qb.y-Da.y)*La;if(null!=A&&ob.vec_dsq(Za,ch,A.x,A.y)<q.epsilon)break;G.flowpoly.add(ha.get(Za,ch,null));null==A&&(A=G.flowpoly.head.elt);F=Ba;J=Ca;D=!D;M=2}else{var lb=E;if(null!=A&&ob.vec_dsq(lb.x,lb.y,A.x,A.y)<q.epsilon)break;G.flowpoly.add(lb);null==A&&(A=G.flowpoly.head.elt);M=1}else if(F=F.next,J++,null==F&&
(F=b.polygon.gverts.next,J=0),f[J]){var sa=G.flowpoly.head.elt,Ua=F,H=E,Ra=E.next;null==Ra&&(Ra=a.polygon.gverts.next);var Ka=-1,Ea=null,pb=0,kb=0,Sa=Ra,Mc=Ra;do{var Ta=Mc,Va=0;if(function(){var a=0,b=0,a=H.x-sa.x,b=H.y-sa.y,d=0,c=0,d=Ta.x-H.x,c=Ta.y-H.y,l=0,f=0,l=Ua.x-sa.x,f=Ua.y-sa.y,e=c*l-d*f;e*e>q.epsilon*q.epsilon?(e=1/e,l=(f*a-l*b)*e,l>q.epsilon&&l<1-q.epsilon?(a=(c*a-d*b)*e,a>q.epsilon&&a<1-q.epsilon?(Va=l,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Va>=Ka)if(Ea=E,pb=I,++kb==M){Ka=Va;Mc=Sa;break}else Ka=
Va;H=Ta;E=Mc;I++;I>=a.polygon.edgeCnt&&(I=0);Mc=Mc.next;null==Mc&&(Mc=a.polygon.gverts.next)}while(0);for(;Mc!=Sa;){var db=Mc,Xa=0;if(function(){var a=0,b=0,a=H.x-sa.x,b=H.y-sa.y,d=0,c=0,d=db.x-H.x,c=db.y-H.y,l=0,f=0,l=Ua.x-sa.x,f=Ua.y-sa.y,e=c*l-d*f;e*e>q.epsilon*q.epsilon?(e=1/e,l=(f*a-l*b)*e,l>q.epsilon&&l<1-q.epsilon?(a=(c*a-d*b)*e,a>q.epsilon&&a<1-q.epsilon?(Xa=l,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Xa>=Ka)if(Ea=E,pb=I,++kb==M){Ka=Xa;Mc=Sa;break}else Ka=Xa;H=db;E=Mc;I++;I>=a.polygon.edgeCnt&&
(I=0);Mc=Mc.next;null==Mc&&(Mc=a.polygon.gverts.next)}if(null==Ea)break;var eb=Ea,fb=Ea.next;null==fb&&(fb=a.polygon.gverts.next);var Ab=fb,vb=0,rb=0,wb=Ka,vb=eb.x+(Ab.x-eb.x)*wb,rb=eb.y+(Ab.y-eb.y)*wb;if(null!=A&&ob.vec_dsq(vb,rb,A.x,A.y)<q.epsilon)break;G.flowpoly.add(ha.get(vb,rb,null));null==A&&(A=G.flowpoly.head.elt);E=Ea;I=pb;D=!D;M=2}else{var hb=F;if(null!=A&&ob.vec_dsq(hb.x,hb.y,A.x,A.y)<q.epsilon)break;G.flowpoly.add(hb);null==A&&(A=G.flowpoly.head.elt);M=1}if(null!=G.flowpoly.head&&null!=
G.flowpoly.head.next&&null!=G.flowpoly.head.next.next){for(var Fd=0,Gd=0,Sd=0,Fd=Sd=Gd=0,Bc=G.flowpoly.head,na=Bc.elt,Bc=Bc.next,Wa=Bc.elt,Bc=Bc.next;null!=Bc;)var ye=Bc.elt,Fd=Fd+Wa.x*(ye.y-na.y),Eb=ye.y*Wa.x-ye.x*Wa.y,Gd=Gd+(Wa.x+ye.x)*Eb,Sd=Sd+(Wa.y+ye.y)*Eb,na=Wa,Wa=ye,Bc=Bc.next;var Bc=G.flowpoly.head,ze=Bc.elt,Fd=Fd+Wa.x*(ze.y-na.y),dh=ze.y*Wa.x-ze.x*Wa.y,Gd=Gd+(Wa.x+ze.x)*dh,Sd=Sd+(Wa.y+ze.y)*dh,na=Wa,Wa=ze,Bc=Bc.next,$a=Bc.elt,Fd=Fd+Wa.x*($a.y-na.y),Gb=$a.y*Wa.x-$a.x*Wa.y,Gd=Gd+(Wa.x+$a.x)*
Gb,Sd=Sd+(Wa.y+$a.y)*Gb,Fd=0.5*Fd,Hb=1/(6*Fd),Gd=Gd*Hb,Sd=Sd*Hb;d.overlap=-Fd;d.centroidx=Gd;d.centroidy=Sd;null;return!0}}}return!1}for(var ub=[],Ib=!0,Ga=null,mb=null,Lb=-1.0E100,Nb=!0,Cb=b.polygon.gverts.next,Vb=0,ib=b.polygon.edges.head;null!=ib;){var ab=ib.elt,bb=ab.gnormx*a.circle.worldCOMx+ab.gnormy*a.circle.worldCOMy;if(bb>ab.gprojection+a.circle.radius){Nb=!1;break}else bb+a.circle.radius>ab.gprojection+q.epsilon&&(Ib=!1,ub[Vb]=!0);bb-=ab.gprojection+a.circle.radius;bb>Lb&&(Lb=bb,Ga=ab,mb=
Cb);Cb=Cb.next;Vb++;ib=ib.next}if(Nb){if(Ib)return d.overlap=a.circle.area,d.centroidx=a.circle.worldCOMx,d.centroidy=a.circle.worldCOMy,null,!0;var xb=mb,sb;sb=null==mb.next?b.polygon.gverts.next:mb.next;var cc=a.circle.worldCOMy*Ga.gnormx-a.circle.worldCOMx*Ga.gnormy;if(cc<=xb.y*Ga.gnormx-xb.x*Ga.gnormy?function(){var b=a.circle.radius,d=0,c=0,d=xb.x-a.circle.worldCOMx,c=xb.y-a.circle.worldCOMy;return d*d+c*c<=b*b}(this):cc>=sb.y*Ga.gnormx-sb.x*Ga.gnormy?function(){var b=a.circle.radius,d=0,c=0,
d=sb.x-a.circle.worldCOMx,c=sb.y-a.circle.worldCOMy;return d*d+c*c<=b*b}(this):1){for(var Bb=[],Ob=0,dc=!0,Cc=null,va=0,nb=b.polygon.gverts.next;null!=nb;){var mc=nb,Dc=ob.vec_dsq(mc.x,mc.y,a.circle.worldCOMx,a.circle.worldCOMy);(Bb[Ob]=Dc<=a.circle.radius*a.circle.radius)?(va=Ob,Cc=nb):dc=!1;Ob++;nb=nb.next}if(dc)return b.polygon.validate_worldCOM(),d.overlap=b.polygon.area,d.centroidx=b.polygon.worldCOMx,d.centroidy=b.polygon.worldCOMy,null,!0;for(;null!=G.flowpoly.head;){var pc=G.flowpoly.pop_unsafe();
if(!pc._inuse){var Oa=pc;null!=Oa.outer&&(Oa.outer.zpp_inner=null,Oa.outer=null);Oa._isimmutable=null;Oa._validate=null;Oa._invalidate=null;Oa.next=ha.zpp_pool;ha.zpp_pool=Oa}}G.flowsegs.clear();var yb=null,ya=1;null==Cc?(Cc=b.polygon.gverts.next,ya=2):G.flowpoly.add(yb=Cc);for(;0!=ya;)if(1==ya)if(Cc=Cc.next,null==Cc&&(Cc=b.polygon.gverts.next),va++,va>=b.polygon.edgeCnt&&(va=0),Bb[va]){if(ob.vec_dsq(yb.x,yb.y,Cc.x,Cc.y)<q.epsilon)break;G.flowpoly.add(Cc)}else{var jb=G.flowpoly.head.elt,Kb=Cc,Mb=
0,Pb=0,Mb=Kb.x-jb.x,Pb=Kb.y-jb.y,Qb=0,Rb=0,Qb=jb.x-a.circle.worldCOMx,Rb=jb.y-a.circle.worldCOMy,Db=Mb*Mb+Pb*Pb,Sb=2*(Qb*Mb+Rb*Pb),wc=Math.sqrt(Sb*Sb-4*Db*(Qb*Qb+Rb*Rb-a.circle.radius*a.circle.radius)),Db=1/(2*Db),xc=(-Sb-wc)*Db,jc=0,lc=0,yc=xc<q.epsilon?(-Sb+wc)*Db:xc,jc=jb.x+(Kb.x-jb.x)*yc,lc=jb.y+(Kb.y-jb.y)*yc;if(ob.vec_dsq(yb.x,yb.y,jc,lc)<q.epsilon)break;G.flowpoly.add(ha.get(jc,lc,null));ya=2}else if(2==ya){var Ub=Cc.next;null==Ub&&(Ub=b.polygon.gverts.next);var la=Cc,ya=0,Ma=Ub,zb=Ub;do{var Na=
zb,Xb=va+1;Xb==b.polygon.edgeCnt&&(Xb=0);if(ub[va])if(Bb[Xb]){var Yb=0,Zb=0,Yb=Na.x-la.x,Zb=Na.y-la.y,$b=0,ac=0,$b=la.x-a.circle.worldCOMx,ac=la.y-a.circle.worldCOMy,Jb=Yb*Yb+Zb*Zb,bc=2*($b*Yb+ac*Zb),Fc=Math.sqrt(bc*bc-4*Jb*($b*$b+ac*ac-a.circle.radius*a.circle.radius)),Jb=1/(2*Jb),Gc=(-bc-Fc)*Jb,qc=0,sc=0,Ic=Gc<q.epsilon?(-bc+Fc)*Jb:Gc,qc=la.x+(Na.x-la.x)*Ic,sc=la.y+(Na.y-la.y)*Ic;if(ob.vec_dsq(yb.x,yb.y,qc,sc)<q.epsilon){ya=0;zb=Ma;break}var Jc=ha.get(qc,sc,null);G.flowsegs.add(G.flowpoly.head.elt);
G.flowsegs.add(Jc);G.flowpoly.add(Jc);ya=1;zb=Ma;break}else{var ec=0,fc=0,vc,gc=0,hc=0,gc=Na.x-la.x,hc=Na.y-la.y,ic=0,kc=0,ic=la.x-a.circle.worldCOMx,kc=la.y-a.circle.worldCOMy,Fb=gc*gc+hc*hc,Tb=2*(ic*gc+kc*hc),tb=Tb*Tb-4*Fb*(ic*ic+kc*kc-a.circle.radius*a.circle.radius);tb*tb<q.epsilon?(ec=0>tb?10:fc=-Tb/(2*Fb),vc=!1):(tb=Math.sqrt(tb),Fb=1/(2*Fb),ec=(-Tb-tb)*Fb,fc=(-Tb+tb)*Fb,vc=!0);if(ec<1-q.epsilon&&fc>q.epsilon){var zc=0,Ec=0,Nc=ec,zc=la.x+(Na.x-la.x)*Nc,Ec=la.y+(Na.y-la.y)*Nc;if(null!=yb&&ob.vec_dsq(yb.x,
yb.y,zc,Ec)<q.epsilon){ya=0;zb=Ma;break}var Oc=ha.get(zc,Ec,null);null!=G.flowpoly.head&&(G.flowsegs.add(G.flowpoly.head.elt),G.flowsegs.add(Oc));G.flowpoly.add(Oc);null==yb&&(yb=G.flowpoly.head.elt);if(vc){var Pc=0,Qc=0,Sc=fc,Pc=la.x+(Na.x-la.x)*Sc,Qc=la.y+(Na.y-la.y)*Sc;G.flowpoly.add(ha.get(Pc,Qc,null))}}}la=Na;Cc=zb;va=Xb;zb=zb.next;null==zb&&(zb=b.polygon.gverts.next)}while(0);for(;zb!=Ma;){var qd=zb,rc=va+1;rc==b.polygon.edgeCnt&&(rc=0);if(ub[va])if(Bb[rc]){var uc=0,Uc=0,uc=qd.x-la.x,Uc=qd.y-
la.y,Xc=0,ad=0,Xc=la.x-a.circle.worldCOMx,ad=la.y-a.circle.worldCOMy,Tc=uc*uc+Uc*Uc,bd=2*(Xc*uc+ad*Uc),xd=Math.sqrt(bd*bd-4*Tc*(Xc*Xc+ad*ad-a.circle.radius*a.circle.radius)),Tc=1/(2*Tc),yd=(-bd-xd)*Tc,ld=0,md=0,zd=yd<q.epsilon?(-bd+xd)*Tc:yd,ld=la.x+(qd.x-la.x)*zd,md=la.y+(qd.y-la.y)*zd;if(ob.vec_dsq(yb.x,yb.y,ld,md)<q.epsilon){ya=0;zb=Ma;break}var Ad=ha.get(ld,md,null);G.flowsegs.add(G.flowpoly.head.elt);G.flowsegs.add(Ad);G.flowpoly.add(Ad);ya=1;zb=Ma;break}else{var cd=0,dd=0,pd,gd=0,hd=0,gd=qd.x-
la.x,hd=qd.y-la.y,id=0,jd=0,id=la.x-a.circle.worldCOMx,jd=la.y-a.circle.worldCOMy,Rc=gd*gd+hd*hd,$c=2*(id*gd+jd*hd),Hc=$c*$c-4*Rc*(id*id+jd*jd-a.circle.radius*a.circle.radius);Hc*Hc<q.epsilon?(cd=0>Hc?10:dd=-$c/(2*Rc),pd=!1):(Hc=Math.sqrt(Hc),Rc=1/(2*Rc),cd=(-$c-Hc)*Rc,dd=(-$c+Hc)*Rc,pd=!0);if(cd<1-q.epsilon&&dd>q.epsilon){var td=0,ud=0,Kd=cd,td=la.x+(qd.x-la.x)*Kd,ud=la.y+(qd.y-la.y)*Kd;if(null!=yb&&ob.vec_dsq(yb.x,yb.y,td,ud)<q.epsilon){ya=0;zb=Ma;break}var Md=ha.get(td,ud,null);null!=G.flowpoly.head&&
(G.flowsegs.add(G.flowpoly.head.elt),G.flowsegs.add(Md));G.flowpoly.add(Md);null==yb&&(yb=G.flowpoly.head.elt);if(pd){var Nd=0,Od=0,Qd=dd,Nd=la.x+(qd.x-la.x)*Qd,Od=la.y+(qd.y-la.y)*Qd;G.flowpoly.add(ha.get(Nd,Od,null))}}}la=qd;Cc=zb;va=rc;zb=zb.next;null==zb&&(zb=b.polygon.gverts.next)}}if(null==G.flowpoly.head)return!1;if(null==G.flowpoly.head.next){for(var Rd=!0,nd=b.polygon.edges.head;null!=nd;){var Cd=nd.elt;if(Cd.gnormx*a.circle.worldCOMx+Cd.gnormy*a.circle.worldCOMy>Cd.gprojection){Rd=!1;break}nd=
nd.next}return Rd?(d.overlap=a.circle.area,d.centroidx=a.circle.worldCOMx,d.centroidy=a.circle.worldCOMy,null,!0):!1}var Kc=0,Lc=0,Vc=0;if(null!=G.flowpoly.head.next.next){for(var le=0,ue=0,Wb=0,le=Wb=ue=0,fd=G.flowpoly.head,ed=fd.elt,fd=fd.next,nc=fd.elt,fd=fd.next;null!=fd;)var Wc=fd.elt,le=le+nc.x*(Wc.y-ed.y),Td=Wc.y*nc.x-Wc.x*nc.y,ue=ue+(nc.x+Wc.x)*Td,Wb=Wb+(nc.y+Wc.y)*Td,ed=nc,nc=Wc,fd=fd.next;var fd=G.flowpoly.head,Zc=fd.elt,le=le+nc.x*(Zc.y-ed.y),Vd=Zc.y*nc.x-Zc.x*nc.y,ue=ue+(nc.x+Zc.x)*Vd,
Wb=Wb+(nc.y+Zc.y)*Vd,ed=nc,nc=Zc,fd=fd.next,kd=fd.elt,le=le+nc.x*(kd.y-ed.y),Wd=kd.y*nc.x-kd.x*nc.y,ue=ue+(nc.x+kd.x)*Wd,Wb=Wb+(nc.y+kd.y)*Wd,le=0.5*le,Xd=1/(6*le),ue=ue*Xd,Wb=Wb*Xd,Yd=-le,Kc=Kc+ue*Yd,Lc=Lc+Wb*Yd,Vc=Vc-le}else G.flowsegs.add(G.flowpoly.head.elt),G.flowsegs.add(G.flowpoly.head.next.elt);for(;null!=G.flowsegs.head;)var rd=G.flowsegs.pop_unsafe(),sd=G.flowsegs.pop_unsafe(),be=0,ce=0,be=sd.x-rd.x,ce=sd.y-rd.y,tc=0,we=0,tc=be,we=ce,de=1/Math.sqrt(tc*tc+we*we),tc=tc*de,we=we*de,qe=tc,tc=
-we,we=qe,xe=0,ve=0,xe=rd.x+sd.x,ve=rd.y+sd.y,xe=0.5*xe,ve=0.5*ve,xe=xe-1*a.circle.worldCOMx,ve=ve-1*a.circle.worldCOMy,Pd=0,ee=0,fe=tc*xe+we*ve,Bd=fe/a.circle.radius,od=Math.sqrt(1-Bd*Bd),ge=Math.acos(Bd),Pd=a.circle.radius*(a.circle.radius*ge-fe*od),ee=0.6666666666666666*a.circle.radius*od*od*od/(ge-Bd*od),xe=a.circle.worldCOMx,ve=a.circle.worldCOMy,he=ee,xe=xe+tc*he,ve=ve+we*he,ie=Pd,Kc=Kc+xe*ie,Lc=Lc+ve*ie,Vc=Vc+Pd;var je=1/Vc,Kc=Kc*je,Lc=Lc*je;d.overlap=Vc;d.centroidx=Kc;d.centroidy=Lc;null;
return!0}}return!1}var oc=a.circle,Yc=b.circle,Dd=0,Ed=0,Dd=Yc.worldCOMx-oc.worldCOMx,Ed=Yc.worldCOMy-oc.worldCOMy,ke=oc.radius+Yc.radius,Ud=Dd*Dd+Ed*Ed;if(Ud>ke*ke)return!1;if(Ud<q.epsilon*q.epsilon)oc.radius<Yc.radius?(d.overlap=oc.area,d.centroidx=oc.worldCOMx,d.centroidy=oc.worldCOMy):(d.overlap=Yc.area,d.centroidx=Yc.worldCOMx,d.centroidy=Yc.worldCOMy);else{var Hd=Math.sqrt(Ud),me=1/Hd,Id=0.5*(Hd-(Yc.radius*Yc.radius-oc.radius*oc.radius)*me);if(Id<=-oc.radius)d.overlap=oc.area,d.centroidx=oc.worldCOMx,
d.centroidy=oc.worldCOMy;else{var Zd=Hd-Id;if(Zd<=-Yc.radius)d.overlap=Yc.area,d.centroidx=Yc.worldCOMx,d.centroidy=Yc.worldCOMy;else{var $d=0,ne=0,ae=0,oe=0,Jd=Id/oc.radius,vd=Math.sqrt(1-Jd*Jd),pe=Math.acos(Jd),$d=oc.radius*(oc.radius*pe-Id*vd),ne=0.6666666666666666*oc.radius*vd*vd*vd/(pe-Jd*vd),Ld=Zd/Yc.radius,wd=Math.sqrt(1-Ld*Ld),re=Math.acos(Ld),ae=Yc.radius*(Yc.radius*re-Zd*wd),oe=0.6666666666666666*Yc.radius*wd*wd*wd/(re-Ld*wd),se=$d+ae,te=(ne*$d+(Hd-oe)*ae)/se*me;d.overlap=se;d.centroidx=
oc.worldCOMx+Dd*te;d.centroidy=oc.worldCOMy+Ed*te}}}null;return!0};var ik=function(){this.toiDistance=0;this.inner=!1;this.shape=null};h["zpp_nape.geom.ZPP_ConvexRayResult"]=ik;ik.__name__=!0;ik.prototype={__class__:ik};var jk=function(){this.next=null;this.x=this.y=0};h["zpp_nape.geom.ZPP_GeomVert"]=jk;jk.__name__=!0;jk.prototype={__class__:jk};var kk=function(){this.outer=this.vertices=null};h["zpp_nape.geom.ZPP_GeomPoly"]=kk;kk.__name__=!0;kk.prototype={__class__:kk};var lk=function(){this.a=this.b=
this.c=this.d=this.tx=this.ty=0};h["zpp_nape.geom.ZPP_Mat23"]=lk;lk.__name__=!0;lk.prototype={__class__:lk};var mk=function(){this.x=null;this.m=this.n=0};h["zpp_nape.geom.ZPP_MatMN"]=mk;mk.__name__=!0;mk.prototype={__class__:mk};var Ea=function(){this.slipped=this.failed=this.kinematic=!1;this.c1=this.c2=this.axis=null;this.frozen1=this.frozen2=!1;this.s1=this.s2=this.arbiter=null;this.toi=0;this.next=null;this.c1=new ha;this.c2=new ha;this.axis=new ha};h["zpp_nape.geom.ZPP_ToiEvent"]=Ea;Ea.__name__=
!0;Ea.prototype={__class__:Ea};var $b=function(){};h["zpp_nape.geom.ZPP_SweepDistance"]=$b;$b.__name__=!0;$b.dynamicSweep=function(a,b,d,c,f){null==f&&(f=!1);var e=a.s1,g=a.s2,i=e.body,h=g.body,j=0,k=0,j=h.velx-i.velx,k=h.vely-i.vely,m=i.angvel;0>m&&(m=-m);var o=h.angvel;0>o&&(o=-o);var s=e.sweepCoef*m+g.sweepCoef*o;if(!f&&!a.kinematic&&j*j+k*k<q.dynamicSweepLinearThreshold*q.dynamicSweepLinearThreshold&&s<q.dynamicSweepAngularThreshold)a.toi=-1,a.failed=!0;else{for(var r=a.c1,m=a.c2,o=a.axis,t=0;;){i.sweepIntegrate(d*
b);i.sweepValidate(e);h.sweepIntegrate(d*b);h.sweepValidate(g);var w=$b.distance(e,g,r,m,o,null)+c,v=j*o.x+k*o.y;if(w<q.distanceThresholdCCD){if(f)break;var y=0,A=0,y=r.x-i.posx,A=r.y-i.posy,z=0,x=0,z=m.x-h.posx,x=m.y-h.posy,y=v-i.sweep_angvel*(o.y*y-o.x*A)+h.sweep_angvel*(o.y*z-o.x*x);0<y&&(a.slipped=!0);if(0>=y||w<0.5*q.distanceThresholdCCD)break}v=(s-v)*b;if(0>=v){d=-1;break}v=w/v;1.0E-6>v&&(v=1.0E-6);d+=v;if(1<=d){d=1;i.sweepIntegrate(d*b);i.sweepValidate(e);h.sweepIntegrate(d*b);h.sweepValidate(g);
b=$b.distance(e,g,r,m,o,null)+c;j=j*o.x+k*o.y;if(b<q.distanceThresholdCCD){if(f)break;k=f=0;f=r.x-i.posx;k=r.y-i.posy;c=r=0;r=m.x-h.posx;c=m.y-h.posy;i=j-i.sweep_angvel*(o.y*f-o.x*k)+h.sweep_angvel*(o.y*r-o.x*c);0<i&&(a.slipped=!0);if(0>=i||b<0.5*q.distanceThresholdCCD)break}d=-1;break}if(40<=++t){w>c&&(a.failed=!0);break}}a.toi=d}};$b.staticSweep=function(a,b,d,c){var f=a.s1,e=a.s2,g=f.body,i=0,h=0,i=-g.velx,h=-g.vely,j=g.sweep_angvel;0>j&&(j=-j);for(var k=f.sweepCoef*j,j=a.c1,m=a.c2,o=a.axis,s=
0;;){g.sweepIntegrate(d*b);g.sweepValidate(f);var r=$b.distance(f,e,j,m,o,null)+c,t=i*o.x+h*o.y;if(r<q.distanceThresholdCCD){var v=0,w=0,v=j.x-g.posx,w=j.y-g.posy,v=t-g.sweep_angvel*(o.y*v-o.x*w);0<v&&(a.slipped=!0);if(0>=v||r<0.5*q.distanceThresholdCCD)break}t=(k-t)*b;if(0>=t){d=-1;break}t=r/t;1.0E-6>t&&(t=1.0E-6);d+=t;if(1<=d){d=1;g.sweepIntegrate(d*b);g.sweepValidate(f);b=$b.distance(f,e,j,m,o,null)+c;i=i*o.x+h*o.y;if(b<q.distanceThresholdCCD&&(c=h=0,h=j.x-g.posx,c=j.y-g.posy,g=i-g.sweep_angvel*
(o.y*h-o.x*c),0<g&&(a.slipped=!0),0>=g||b<0.5*q.distanceThresholdCCD))break;d=-1;break}if(40<=++s){r>c&&(a.failed=!0);break}}a.toi=d};$b.distance=function(a,b,d,c,f,e){null==e&&(e=1.0E100);if(a.type==i.id_ShapeType_CIRCLE&&b.type==i.id_ShapeType_CIRCLE){var g=a.circle,h=b.circle,j,k=0,m=0,k=h.worldCOMx-g.worldCOMx,m=h.worldCOMy-g.worldCOMy,o=Math.sqrt(k*k+m*m);j=o-(g.radius+h.radius);if(j<e){if(0==o)k=1,m=0;else var s=1/o,k=k*s,m=m*s;var r=g.radius;d.x=g.worldCOMx+k*r;d.y=g.worldCOMy+m*r;var t=-h.radius;
c.x=h.worldCOMx+k*t;c.y=h.worldCOMy+m*t;f.x=k;f.y=m}return j}var v=!1;if(a.type==i.id_ShapeType_CIRCLE&&b.type==i.id_ShapeType_POLYGON)var w=a,a=b,b=w,A=d,d=c,c=A,v=!0;if(a.type==i.id_ShapeType_POLYGON&&b.type==i.id_ShapeType_CIRCLE){for(var y=b.circle,z=-1.0E100,x=null,B=a.polygon.edges.head;null!=B;){var F=B.elt,G=F.gnormx*y.worldCOMx+F.gnormy*y.worldCOMy-F.gprojection-y.radius;if(G>e){z=G;break}0<G?G>z&&(z=G,x=F):0>z&&G>z&&(z=G,x=F);B=B.next}if(z<e){var C=x.gp0,E=x.gp1,K=y.worldCOMy*x.gnormx-y.worldCOMx*
x.gnormy;if(K<=C.y*x.gnormx-C.x*x.gnormy){var I=0,J=0,I=y.worldCOMx-C.x,J=y.worldCOMy-C.y,D=Math.sqrt(I*I+J*J),z=D-y.radius;if(z<e){if(0==D)I=1,J=0;else var L=1/D,I=I*L,J=J*L;d.x=C.x+0*I;d.y=C.y+0*J;var P=-y.radius;c.x=y.worldCOMx+I*P;c.y=y.worldCOMy+J*P;f.x=I;f.y=J}}else if(K>=E.y*x.gnormx-E.x*x.gnormy){var M=0,O=0,M=y.worldCOMx-E.x,O=y.worldCOMy-E.y,R=Math.sqrt(M*M+O*O),z=R-y.radius;if(z<e){if(0==R)M=1,O=0;else var W=1/R,M=M*W,O=O*W;d.x=E.x+0*M;d.y=E.y+0*O;var Y=-y.radius;c.x=y.worldCOMx+M*Y;c.y=
y.worldCOMy+O*Y;f.x=M;f.y=O}}else{var V=-y.radius;c.x=y.worldCOMx+x.gnormx*V;c.y=y.worldCOMy+x.gnormy*V;var Z=-z;d.x=c.x+x.gnormx*Z;d.y=c.y+x.gnormy*Z;f.x=x.gnormx;f.y=x.gnormy}}v&&(f.x=-f.x,f.y=-f.y);return z}for(var ea=a.polygon,fa=b.polygon,N=-1.0E100,X=null,ca=null,ba=0,da=ea.edges.head;null!=da;){for(var ha=da.elt,aa=1.0E100,ka=fa.gverts.next;null!=ka;){var ja=ka,wa=ha.gnormx*ja.x+ha.gnormy*ja.y;wa<aa&&(aa=wa);ka=ka.next}aa-=ha.gprojection;if(aa>e){N=aa;break}0<aa?aa>N&&(N=aa,X=ha,ba=1):0>N&&
aa>N&&(N=aa,X=ha,ba=1);da=da.next}if(N<e){for(var ma=fa.edges.head;null!=ma;){for(var ta=ma.elt,u=1.0E100,oa=ea.gverts.next;null!=oa;){var pa=oa,qa=ta.gnormx*pa.x+ta.gnormy*pa.y;qa<u&&(u=qa);oa=oa.next}u-=ta.gprojection;if(u>e){N=u;break}0<u?u>N&&(N=u,ca=ta,ba=2):0>N&&u>N&&(N=u,ca=ta,ba=2);ma=ma.next}if(N<e){var ra,cb;if(1==ba)ra=fa,cb=X;else{ra=ea;cb=ca;var xa=d,d=c,c=xa,v=!v}for(var ia=null,ua=1.0E100,Ja=ra.edges.head;null!=Ja;){var Fa=Ja.elt,Ba=cb.gnormx*Fa.gnormx+cb.gnormy*Fa.gnormy;Ba<ua&&(ua=
Ba,ia=Fa);Ja=Ja.next}v?(f.x=-cb.gnormx,f.y=-cb.gnormy):(f.x=cb.gnormx,f.y=cb.gnormy);if(0<=N){var ga=cb.gp0,sa=cb.gp1,S=ia.gp0,ya=ia.gp1,za=0,U=0,va=0,Ka=0,za=sa.x-ga.x,U=sa.y-ga.y,va=ya.x-S.x,Ka=ya.y-S.y,Na=1/(za*za+U*U),Ea=1/(va*va+Ka*Ka),Ha=-(za*(ga.x-S.x)+U*(ga.y-S.y))*Na,Ca=-(za*(ga.x-ya.x)+U*(ga.y-ya.y))*Na,Pa=-(va*(S.x-ga.x)+Ka*(S.y-ga.y))*Ea,Qa=-(va*(S.x-sa.x)+Ka*(S.y-sa.y))*Ea;0>Ha?Ha=0:1<Ha&&(Ha=1);0>Ca?Ca=0:1<Ca&&(Ca=1);0>Pa?Pa=0:1<Pa&&(Pa=1);0>Qa?Qa=0:1<Qa&&(Qa=1);var Da=0,Ga=0,gb=Ha,
Da=ga.x+za*gb,Ga=ga.y+U*gb,Ia=0,Aa=0,Ua=Ca,Ia=ga.x+za*Ua,Aa=ga.y+U*Ua,Ra=0,Ya=0,H=Pa,Ra=S.x+va*H,Ya=S.y+Ka*H,Oa=0,jb=0,Za=Qa,Oa=S.x+va*Za,jb=S.y+Ka*Za,na=ob.vec_dsq(Da,Ga,S.x,S.y),lb=ob.vec_dsq(Ia,Aa,ya.x,ya.y),$a=ob.vec_dsq(Ra,Ya,ga.x,ga.y),ab=ob.vec_dsq(Oa,jb,sa.x,sa.y),bb=0,Va=0,db=null;na<lb?(bb=Da,Va=Ga,db=S):(bb=Ia,Va=Aa,db=ya,na=lb);var Xa=0,eb=0,pb=null;$a<ab?(Xa=Ra,eb=Ya,pb=ga):(Xa=Oa,eb=jb,pb=sa,$a=ab);na<$a?(d.x=bb,d.y=Va,c.x=db.x,c.y=db.y,N=Math.sqrt(na)):(c.x=Xa,c.y=eb,d.x=pb.x,d.y=pb.y,
N=Math.sqrt($a));if(0!=N){f.x=c.x-d.x;f.y=c.y-d.y;var qb=1/N;f.x*=qb;f.y*=qb;v&&(f.x=-f.x,f.y=-f.y)}return N}var La=0,Sa=0,La=ia.gp0.x,Sa=ia.gp0.y,Ma=0,Ta=0,Ma=ia.gp1.x,Ta=ia.gp1.y,fb=0,vb=0,fb=Ma-La,vb=Ta-Sa,rb=cb.gnormy*La-cb.gnormx*Sa,sb=cb.gnormy*Ma-cb.gnormx*Ta,mb=1/(sb-rb),Wa=(-cb.tp1-rb)*mb;Wa>q.epsilon&&(La+=fb*Wa,Sa+=vb*Wa);var hb=(-cb.tp0-sb)*mb;hb<-q.epsilon&&(Ma+=fb*hb,Ta+=vb*hb);var kb=La*cb.gnormx+Sa*cb.gnormy-cb.gprojection,ib=Ma*cb.gnormx+Ta*cb.gnormy-cb.gprojection;if(kb<ib){c.x=
La;c.y=Sa;var tb=-kb;d.x=c.x+cb.gnormx*tb;d.y=c.y+cb.gnormy*tb;return kb}c.x=Ma;c.y=Ta;var nb=-ib;d.x=c.x+cb.gnormx*nb;d.y=c.y+cb.gnormy*nb;return ib}}return e};var ha=function(){this.length=this.x=this.y=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.weak=!1;this._isimmutable=this.outer=null;this._immutable=!1;this._invalidate=this._validate=null};h["zpp_nape.geom.ZPP_Vec2"]=ha;ha.__name__=!0;ha.get=function(a,b,d){null==d&&(d=!1);var c;null==ha.zpp_pool?c=new ha:(c=ha.zpp_pool,
ha.zpp_pool=c.next,c.next=null);c.weak=!1;c._immutable=d;c.x=a;c.y=b;return c};ha.prototype={validate:function(){null!=this._validate&&this._validate()},invalidate:function(){null!=this._invalidate&&this._invalidate(this)},wrapper:function(){if(null==this.outer){this.outer=new Qa;var a=this.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=ha.zpp_pool;ha.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},add:function(a){return this.inlined_add(a)},
inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){b._inuse=!0;null==a?(b.next=this.next,this.next=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=
c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.next,b=null;null!=a;){var c=a.next;a.next=b;b=this.next=a;a=c}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=this.next;0<a--&&null!=b;)b=b.next;return b},toString:function(){return"{ x: "+this.x+" y: "+this.y+" }"},__class__:ha};var nk=function(){this._validate=null;this.x=this.y=this.z=0};h["zpp_nape.geom.ZPP_Vec3"]=nk;nk.__name__=!0;nk.prototype=
{validate:function(){null!=this._validate&&this._validate()},__class__:nk};var ob=function(){};h["zpp_nape.geom.ZPP_VecMath"]=ob;ob.__name__=!0;ob.vec_dsq=function(a,b,c,l){var f=0,e=0,f=a-c,e=b-l;return f*f+e*e};var ta=function(){this.ishape=this.ibody=this.icompound=this.cbsets=this.group=this.cbTypes=this.cbSet=null;this.id=0;this.outer_i=null;this.id=xb.Interactor();this.cbsets=new oj;this.cbTypes=new gd};h["zpp_nape.phys.ZPP_Interactor"]=ta;ta.__name__=!0;ta.get=function(a,b){var c;c=a.id<b.id?
a.id:b.id;var l;l=a.id<b.id?b.id:a.id;for(var e=null,g=(a.cbsets.length<b.cbsets.length?a.cbsets:b.cbsets).head;null!=g;){var i=g.elt;if(i.id==c&&i.di==l){e=i;break}g=g.next}return e};ta.int_callback=function(a,b,c){var l=a.int1,a=a.int2;b.options1.compatible(l.cbTypes)&&b.options2.compatible(a.cbTypes)?(c.int1=l,c.int2=a):(c.int1=a,c.int2=l)};ta.prototype={__iaddedToSpace:function(){null!=this.group&&this.group.interactors.add(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.add(this),
a=a.next;this.alloc_cbSet()},__iremovedFromSpace:function(){null!=this.group&&this.group.interactors.remove(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.remove(this),a=a.next;this.dealloc_cbSet()},wake:function(){if(null!=this.ishape){var a=this.ishape.body;null!=a&&null!=a.space&&a.space.non_inlined_wake(a);!0}else null!=this.ibody?null!=this.ibody.space?this.ibody.space.non_inlined_wake(this.ibody):!1:(null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound),
!0)},insert_cbtype:function(a){if(!this.cbTypes.has(a)){var b;b=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=b&&(this.dealloc_cbSet(),a.interactors.add(this));for(var c=null,l=this.cbTypes.head;null!=l&&!(a.id<l.elt.id);){c=l;l=l.next}this.cbTypes.inlined_insert(c,a);null!=b&&(this.alloc_cbSet(),this.wake())}},alloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=
this.ibody?this.ibody.space:this.icompound.space;if(null!=(this.cbSet=a.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.interactors.add(this),this.cbSet.validate(),a.freshInteractorType(this)},dealloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=this.cbSet&&(this.cbSet.interactors.remove(this),a.nullInteractorType(this),0==--this.cbSet.count&&(a.cbsets.remove(this.cbSet),a=this.cbSet,
a.free(),a.next=ma.zpp_pool,ma.zpp_pool=a),this.cbSet=null)},immutable_midstep:function(a){null!=this.ibody?null:null!=this.ishape?this.ishape.__immutable_midstep(a):this.icompound.__imutable_midstep(a)},lookup_group:function(){for(var a=this;null!=a&&null==a.group;)a=null!=a.ishape?a.ishape.body:null!=a.icompound?a.icompound.compound:a.ibody.compound;return null==a?null:a.group},__class__:ta};var ld=function(){this.wrap_localCOM=this.wrap_worldCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=
0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_aabb=!1;this.aabb=null;this.norotate=!1;this.cinertia=this.iinertia=this.sinertia=0;this.zip_inertia=!1;this.inertiaMode=this.inertia=0;this.zip_gravMassScale=!1;this.gravMassMode=this.gravMassScale=0;this.zip_gravMass=!1;this.gravMass=0;this.nomove=!1;this.massMode=this.imass=this.smass=this.cmass=0;this.zip_mass=!1;this.mass=0;this.zip_axis=!1;this.forcex=this.forcey=this.kinvelx=this.kinvely=this.svelx=this.svely=this.angvel=this.torque=
this.kinangvel=this.pre_rot=this.rot=this.axisx=this.axisy=0;this.wrap_vel=null;this.velx=this.vely=0;this.wrap_pos=null;this.pre_posx=this.pre_posy=this.posx=this.posy=0;this.bullet=this.bulletEnabled=this.disableCCD=!1;this.sweepRadius=0;this.sweepFrozen=!1;this.sweepTime=this.sweep_angvel=0;this.compound=this.shapes=this.wrap_shapes=this.space=this.arbiters=this.constraints=this.component=null;this.type=0;this.world=!1;this.outer=null;ta.call(this);this.ibody=this;this.bulletEnabled=this.world=
!1;this.sweep_angvel=this.sweepTime=0;this.disableCCD=this.norotate=this.nomove=!1;this.axisx=this.rot=this.posy=this.posx=0;this.axisy=1;this.torque=this.angvel=this.kinangvel=this.forcey=this.forcex=this.kinvely=this.kinvelx=this.vely=this.velx=this.svely=this.svelx=0;this.pre_rot=this.pre_posy=this.pre_posx=Math.POSITIVE_INFINITY;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.zip_aabb=!0;this.aabb=ia.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=x(this,this.aabb_validate);
this.massMode=i.id_MassMode_DEFAULT;this.gravMassMode=i.id_GravMassMode_DEFAULT;this.gravMassScale=1;this.inertiaMode=i.id_InertiaMode_DEFAULT;this.arbiters=new We;this.constraints=new Td;this.shapes=new Ve;this.wrap_shapes=Qd.get(this.shapes);this.wrap_shapes.zpp_inner.adder=x(this,this.shapes_adder);this.wrap_shapes.zpp_inner.subber=x(this,this.shapes_subber);this.wrap_shapes.zpp_inner._invalidate=x(this,this.shapes_invalidate);this.kinematicDelaySleep=!1};h["zpp_nape.phys.ZPP_Body"]=ld;ld.__name__=
!0;ld.__static=function(){null==i.BodyType_STATIC&&(i.internal=!0,i.BodyType_STATIC=new Eb,i.internal=!1);var a=new Pd(i.BodyType_STATIC),b=a.zpp_inner;b.world=!0;b.wrap_shapes.zpp_inner.immutable=!0;b.smass=b.imass=b.cmass=b.mass=b.gravMass=0;b.sinertia=b.iinertia=b.cinertia=b.inertia=0;b.cbTypes.clear();return a};ld.__super__=ta;ld.prototype=t(ta.prototype,{invalidate_type:function(){this.invalidate_mass();this.invalidate_inertia()},invalidate_shapes:function(){this.zip_worldCOM=this.zip_localCOM=
this.zip_aabb=!0;this.invalidate_mass();this.invalidate_inertia()},atRest:function(a){if(this.type!=i.id_BodyType_DYNAMIC)return this.component.sleeping;var b=q.linearSleepThreshold,b=b*b;if(this.velx*this.velx+this.vely*this.vely>b)a=!1;else if(ob.vec_dsq(this.posx,this.posy,this.pre_posx,this.pre_posy)>0.25*b*a*a)a=!1;else{var c=b=0,b=this.aabb.maxx-this.aabb.minx,c=this.aabb.maxy-this.aabb.miny,b=b*b+c*c,c=q.angularSleepThreshold,c=c*c;if(4*this.angvel*this.angvel*b>c)a=!1;else var l=this.rot-
this.pre_rot,a=l*l*b>c*a*a?!1:!0}a||(this.component.waket=this.space.stamp);return this.component.waket+q.sleepDelay<this.space.stamp},refreshArbiters:function(){for(var a=this.arbiters.head;null!=a;)a.elt.invalidated=!0,a=a.next},sweepIntegrate:function(a){var b=a-this.sweepTime;0!=b&&(this.sweepTime=a,this.posx+=this.velx*b,this.posy+=this.vely*b,0!=this.angvel&&this.delta_rot(this.sweep_angvel*b))},sweepValidate:function(a){if(a.type==i.id_ShapeType_CIRCLE)a.worldCOMx=this.posx+(this.axisy*a.localCOMx-
this.axisx*a.localCOMy),a.worldCOMy=this.posy+(a.localCOMx*this.axisx+a.localCOMy*this.axisy);else{for(var a=a.polygon,b=a.lverts.next,c=a.gverts.next;null!=c;){var l=c,e=b,b=b.next;l.x=this.posx+(this.axisy*e.x-this.axisx*e.y);l.y=this.posy+(e.x*this.axisx+e.y*this.axisy);c=c.next}c=a.edges.head;b=l=a.gverts.next;for(l=l.next;null!=l;){var e=l,g=c.elt,c=c.next;g.gnormx=this.axisy*g.lnormx-this.axisx*g.lnormy;g.gnormy=g.lnormx*this.axisx+g.lnormy*this.axisy;g.gprojection=this.posx*g.gnormx+this.posy*
g.gnormy+g.lprojection;g.tp0=b.y*g.gnormx-b.x*g.gnormy;g.tp1=e.y*g.gnormx-e.x*g.gnormy;b=e;l=l.next}a=a.gverts.next;c=c.elt;c.gnormx=this.axisy*c.lnormx-this.axisx*c.lnormy;c.gnormy=c.lnormx*this.axisx+c.lnormy*this.axisy;c.gprojection=this.posx*c.gnormx+this.posy*c.gnormy+c.lprojection;c.tp0=b.y*c.gnormx-b.x*c.gnormy;c.tp1=a.y*c.gnormx-a.x*c.gnormy}},invalidate_pos:function(){for(var a=this.shapes.head;null!=a;){var b=a.elt;b.type==i.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());
b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},pos_invalidate:function(a){this.immutable_midstep("Body::position");this.posx==a.x&&this.posy==a.y||(this.posx=a.x,this.posy=a.y,this.invalidate_pos(),this.wake())},pos_validate:function(){this.wrap_pos.zpp_inner.x=this.posx;this.wrap_pos.zpp_inner.y=this.posy},vel_invalidate:function(a){this.velx=a.x;this.vely=a.y;this.wake()},vel_validate:function(){this.wrap_vel.zpp_inner.x=this.velx;this.wrap_vel.zpp_inner.y=this.vely},setupPosition:function(){this.wrap_pos=
Qa.get(this.posx,this.posy,null);this.wrap_pos.zpp_inner._inuse=!0;this.world?this.wrap_pos.zpp_inner._immutable=!0:(this.wrap_pos.zpp_inner._invalidate=x(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=x(this,this.pos_validate))},setupVelocity:function(){this.wrap_vel=Qa.get(this.velx,this.vely,null);this.wrap_vel.zpp_inner._inuse=!0;this.world?this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=x(this,this.vel_invalidate),this.wrap_vel.zpp_inner._validate=x(this,
this.vel_validate))},invalidate_rot:function(){this.zip_axis=!0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.type==i.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},validate_axis:function(){this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null)},delta_rot:function(a){this.rot+=a;if(1.0E-4<a*a)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null;else{var b=
a*a,c=1-0.5*b,b=1-b*b/8,l=(c*this.axisx+a*this.axisy)*b;this.axisy=(c*this.axisy-a*this.axisx)*b;this.axisx=l}},invalidate_mass:function(){this.zip_mass=!0;this.invalidate_gravMass()},validate_mass:function(){if(this.zip_mass){this.zip_mass=!1;if(this.massMode==i.id_MassMode_DEFAULT){this.cmass=0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cmass+=b.area*b.material.density;a=a.next}}this.type==i.id_BodyType_DYNAMIC&&!this.nomove?
(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Math.POSITIVE_INFINITY,this.imass=this.smass=0)}},invalidate_gravMass:function(){this.gravMassMode!=i.id_GravMassMode_FIXED&&(this.zip_gravMass=!0);this.gravMassMode!=i.id_GravMassMode_SCALED&&(this.zip_gravMassScale=!0);this.wake()},validate_gravMass:function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),this.gravMassMode==i.id_GravMassMode_DEFAULT?(this.validate_mass(),this.gravMass=this.cmass):this.gravMassMode==
i.id_GravMassMode_SCALED&&(this.validate_mass(),this.gravMass=this.cmass*this.gravMassScale))},invalidate_inertia:function(){this.zip_inertia=!0;this.wake()},validate_inertia:function(){if(this.zip_inertia){this.zip_inertia=!1;if(this.inertiaMode==i.id_InertiaMode_DEFAULT){this.cinertia=0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cinertia+=b.inertia*b.area*b.material.density;a=a.next}}this.type==i.id_BodyType_DYNAMIC&&
!this.norotate?(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia):(this.inertia=Math.POSITIVE_INFINITY,this.sinertia=this.iinertia=0)}},validate_aabb:function(){if(this.zip_aabb){this.zip_aabb=!1;this.aabb.minx=Math.POSITIVE_INFINITY;this.aabb.miny=Math.POSITIVE_INFINITY;this.aabb.maxx=Math.NEGATIVE_INFINITY;this.aabb.maxy=Math.NEGATIVE_INFINITY;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.zip_aabb&&null!=b.body&&(b.zip_aabb=!1,b.type==i.id_ShapeType_CIRCLE?b.circle.__validate_aabb():
b.polygon.__validate_aabb());this.aabb.combine(b.aabb);a=a.next}}},invalidate_localCOM:function(){this.zip_worldCOM=this.zip_localCOM=!0},validate_localCOM:function(){if(this.zip_localCOM){this.zip_localCOM=!1;for(var a=0,b=0,c=0,l=this.shapes.head;null!=l;){var e=l.elt;e.zip_localCOM&&(e.zip_localCOM=!1,e.type==i.id_ShapeType_POLYGON&&e.polygon.__validate_localCOM(),null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy));e.validate_area_inertia();
var g=e.area*e.material.density,a=a+e.localCOMx*g,b=b+e.localCOMy*g,c=c+e.area*e.material.density,l=l.next}0!=c&&(l=1/c,this.localCOMx=a*l,this.localCOMy=b*l);null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy);this.zip_mass&&this.massMode==i.id_MassMode_DEFAULT&&(this.zip_mass=!1,this.cmass=c,this.type==i.id_BodyType_DYNAMIC?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Math.POSITIVE_INFINITY,this.imass=this.smass=
0))}},validate_worldCOM:function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null),this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy),null!=this.wrap_worldCOM&&(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},aabb_validate:function(){this.validate_aabb()},
shapes_adder:function(a){return a.zpp_inner.body!=this?(null!=a.zpp_inner.body&&a.zpp_inner.body.wrap_shapes.remove(a),a.zpp_inner.body=this,a.zpp_inner.addedToBody(),null!=this.space&&this.space.added_shape(a.zpp_inner,null),a.zpp_inner.type==i.id_ShapeType_POLYGON&&(a.zpp_inner.polygon.invalidate_gaxi(),a.zpp_inner.polygon.invalidate_gverts()),!0):!1},shapes_subber:function(a){null!=this.space&&this.space.removed_shape(a.zpp_inner);a.zpp_inner.body=null;a.zpp_inner.removedFromBody()},shapes_invalidate:function(){this.invalidate_shapes()},
addedToSpace:function(){null==ub.zpp_pool?this.component=new ub:(this.component=ub.zpp_pool,ub.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=!0;this.component.body=this;this.__iaddedToSpace()},removedFromSpace:function(){for(;null!=this.arbiters.head;){var a=this.arbiters.pop_unsafe();a.cleared=!0;a.b2==this&&a.b1.arbiters.inlined_try_remove(a);a.b1==this&&a.b2.arbiters.inlined_try_remove(a);null!=a.pair&&(a.pair.arb=null,a.pair=null);a.active=!1;this.space.f_arbiters.modified=
!0}a=this.component;a.body=null;a.constraint=null;null;a.next=ub.zpp_pool;ub.zpp_pool=a;this.component=null;this.__iremovedFromSpace()},__class__:ld});var pj=function(){this.compound=this.space=null;this.depth=0;this.outer=this.bodies=this.constraints=this.compounds=this.wrap_constraints=null};h["zpp_nape.phys.ZPP_Compound"]=pj;pj.__name__=!0;pj.__super__=ta;pj.prototype=t(ta.prototype,{__imutable_midstep:function(){},addedToSpace:function(){this.__iaddedToSpace()},removedFromSpace:function(){this.__iremovedFromSpace()},
__class__:pj});var ok=function(){this.wrap_gravity=null;this.viscosity=this.density=this.gravityx=this.gravityy=0;this.shapes=null};h["zpp_nape.phys.ZPP_FluidProperties"]=ok;ok.__name__=!0;ok.prototype={__class__:ok};var L=function(){this.dynamicFriction=this.staticFriction=this.density=this.elasticity=this.rollingFriction=0;this.next=this.outer=this.shapes=null;this.shapes=new Ve;this.elasticity=0;this.dynamicFriction=1;this.staticFriction=2;this.density=0.001;this.rollingFriction=0.01};h["zpp_nape.phys.ZPP_Material"]=
L;L.__name__=!0;L.prototype={wrapper:function(){if(null==this.outer){this.outer=new ra;var a=this.outer.zpp_inner;a.outer=null;a.next=L.zpp_pool;L.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},set:function(a){this.dynamicFriction=a.dynamicFriction;this.staticFriction=a.staticFriction;this.density=a.density;this.elasticity=a.elasticity;this.rollingFriction=a.rollingFriction},invalidate:function(a){for(var b=this.shapes.head;null!=b;)b.elt.invalidate_material(a),b=b.next},__class__:L};var hd=
function(a){this.zip_aabb=!1;this.sweep=this.node=this.pairs=this.aabb=null;this.fluidEnabled=this.sensorEnabled=!1;this.circle=this.polygon=this.refmaterial=this.material=this.filter=this.fluidProperties=null;this.sweepCoef=0;this.zip_sweepRadius=!1;this.sweepRadius=0;this.wrap_localCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_angDrag=!1;this.inertia=this.angDrag=0;this.zip_area_inertia=!1;this.type=this.area=0;this.outer=
this.body=null;ta.call(this);this.pairs=new qj;this.ishape=this;this.type=a;this.aabb=ia.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=x(this,this.aabb_validate);this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=!0;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.sensorEnabled=this.fluidEnabled=!1;this.body=this.fluidProperties=null;this.refmaterial=new L;this.sweepRadius=this.sweepCoef=0};h["zpp_nape.shape.ZPP_Shape"]=hd;hd.__name__=!0;hd.__super__=
ta;hd.prototype=t(ta.prototype,{validate_sweepRadius:function(){this.zip_sweepRadius&&(this.zip_sweepRadius=!1,this.type==i.id_ShapeType_CIRCLE?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},validate_area_inertia:function(){this.zip_area_inertia&&(this.zip_area_inertia=!1,this.type==i.id_ShapeType_CIRCLE?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},validate_angDrag:function(){if(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction)this.zip_angDrag=
!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,this.type==i.id_ShapeType_CIRCLE?this.circle.__validate_angDrag():this.polygon.__validate_angDrag()},validate_worldCOM:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==i.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)),this.body.validate_axis(),
this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy))},invalidate_area_inertia:function(){this.zip_area_inertia=!0;null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia())},invalidate_angDrag:function(){this.zip_angDrag=!0},invalidate_localCOM:function(){this.zip_localCOM=!0;this.invalidate_area_inertia();this.type==
i.id_ShapeType_CIRCLE&&(this.zip_sweepRadius=!0);this.invalidate_angDrag();this.invalidate_worldCOM();null!=this.body&&this.body.invalidate_localCOM()},invalidate_worldCOM:function(){this.zip_aabb=this.zip_worldCOM=!0;null!=this.body&&(this.body.zip_aabb=!0)},invalidate_material:function(a){0!=(a&L.WAKE)&&this.wake();0!=(a&L.ARBITERS)&&null!=this.body&&this.body.refreshArbiters();0!=(a&L.PROPS)&&null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia());
0!=(a&L.ANGDRAG)&&this.invalidate_angDrag();this.refmaterial.set(this.material)},invalidate_filter:function(){this.wake()},aabb_validate:function(){this.zip_aabb&&null!=this.body&&(this.zip_aabb=!1,this.type==i.id_ShapeType_CIRCLE?this.circle.__validate_aabb():this.polygon.__validate_aabb())},setMaterial:function(a){this.material!=a&&(null!=this.body&&null!=this.body.space&&null!=this.material&&this.material.shapes.remove(this),this.material=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),
this.wake(),null!=this.body&&this.body.refreshArbiters())},setFilter:function(a){this.filter!=a&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.shapes.remove(this),this.filter=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.wake())},__immutable_midstep:function(){},addedToBody:function(){this.invalidate_worldCOM();this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0)},removedFromBody:function(){},addedToSpace:function(){this.__iaddedToSpace();this.material.shapes.add(this);
this.filter.shapes.add(this);null!=this.fluidProperties&&this.fluidProperties.shapes.add(this)},removedFromSpace:function(){this.__iremovedFromSpace();this.material.shapes.remove(this);this.filter.shapes.remove(this);null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this)},__class__:hd});var Af=function(){this.radius=0;this.outer_zn=null;hd.call(this,i.id_ShapeType_CIRCLE);this.circle=this;this.zip_localCOM=!1};h["zpp_nape.shape.ZPP_Circle"]=Af;Af.__name__=!0;Af.__super__=hd;Af.prototype=
t(hd.prototype,{invalidate_radius:function(){this.invalidate_area_inertia();this.invalidate_angDrag();this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0);null!=this.body&&this.body.wake()},__validate_aabb:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==i.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)),
this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy));var a=this.radius,b=this.radius;this.aabb.minx=this.worldCOMx-a;this.aabb.miny=this.worldCOMy-b;this.aabb.maxx=this.worldCOMx+a;this.aabb.maxy=this.worldCOMy+b},_force_validate_aabb:function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy);
this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy);this.aabb.minx=this.worldCOMx-this.radius;this.aabb.miny=this.worldCOMy-this.radius;this.aabb.maxx=this.worldCOMx+this.radius;this.aabb.maxy=this.worldCOMy+this.radius},__validate_sweepRadius:function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy);this.sweepRadius=this.sweepCoef+this.radius},__validate_area_inertia:function(){var a=this.radius*this.radius;this.area=
a*Math.PI;this.inertia=0.5*a+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},__validate_angDrag:function(){var a=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,b=this.radius*this.radius;this.angDrag=(a+2*b)*this.material.dynamicFriction*q.fluidAngularDragFriction+0.5*q.fluidAngularDrag*(1+q.fluidVacuumDrag)*a;this.angDrag/=2*(a+0.5*b)},__class__:Af});var Fa=function(){this.tp0=this.tp1=0;this.lp0=this.gp0=this.lp1=this.gp1=null;this.length=this.lprojection=this.gprojection=
0;this.wrap_gnorm=null;this.gnormx=this.gnormy=0;this.wrap_lnorm=null;this.lnormx=this.lnormy=0;this.next=this.polygon=this.outer=null;this.gprojection=this.lprojection=this.length=this.gnormy=this.gnormx=this.lnormy=this.lnormx=0};h["zpp_nape.shape.ZPP_Edge"]=Fa;Fa.__name__=!0;Fa.prototype={wrapper:function(){null==this.outer&&(Fa.internal=!0,this.outer=new xi,Fa.internal=!1,this.outer.zpp_inner=this);return this.outer},__class__:Fa};var Bf=function(){this.reverse_flag=this.zip_lverts=this.zip_laxi=
this.zip_gverts=this.zip_gaxi=this.zip_valid=this.zip_sanitation=!1;this.edgeCnt=0;this.outer_zn=this.lverts=this.wrap_lverts=this.gverts=this.wrap_gverts=this.edges=this.wrap_edges=null;hd.call(this,i.id_ShapeType_POLYGON);this.polygon=this;this.lverts=new ha;this.gverts=new ha;this.edges=new rj;this.edgeCnt=0};h["zpp_nape.shape.ZPP_Polygon"]=Bf;Bf.__name__=!0;Bf.__super__=hd;Bf.prototype=t(hd.prototype,{lverts_pa_invalidate:function(){this.invalidate_lverts()},gverts_pa_validate:function(){this.validate_gverts()},
lverts_post_adder:function(a){a.zpp_inner._invalidate=x(this,this.lverts_pa_invalidate);for(var b=null,c=null,l=this.lverts.next;null!=l&&!(l==a.zpp_inner);){b=null==b?this.gverts.next:b.next,c=null==c?this.edges.head:c.next;l=l.next}a=ha.get(0,0,!0);this.gverts.insert(b,a);null!=this.lverts.next.next&&(null==this.lverts.next.next.next?(null==Fa.zpp_pool?c=new Fa:(c=Fa.zpp_pool,Fa.zpp_pool=c.next,c.next=null),null,c.polygon=this,this.edges.add(c),null==Fa.zpp_pool?c=new Fa:(c=Fa.zpp_pool,Fa.zpp_pool=
c.next,c.next=null),null,c.polygon=this,this.edges.add(c),this.edgeCnt+=2):(null==Fa.zpp_pool?b=new Fa:(b=Fa.zpp_pool,Fa.zpp_pool=b.next,b.next=null),null,b.polygon=this,this.edges.insert(c,b),this.edgeCnt++));a._validate=x(this,this.gverts_pa_validate)},lverts_subber:function(a){this.cleanup_lvert(a.zpp_inner)},lverts_invalidate:function(){this.invalidate_lverts()},lverts_validate:function(){this.validate_lverts()},getlverts:function(){this.wrap_lverts=Hd.get(this.lverts);this.wrap_lverts.zpp_inner.post_adder=
x(this,this.lverts_post_adder);this.wrap_lverts.zpp_inner.subber=x(this,this.lverts_subber);this.wrap_lverts.zpp_inner._invalidate=x(this,this.lverts_invalidate);this.wrap_lverts.zpp_inner._validate=x(this,this.lverts_validate);this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},invalidate_lverts:function(){this.invalidate_laxi();this.invalidate_area_inertia();this.invalidate_angDrag();this.invalidate_localCOM();this.invalidate_gverts();this.zip_sanitation=this.zip_valid=this.zip_lverts=!0;
null!=this.body&&this.body.wake()},invalidate_laxi:function(){this.invalidate_gaxi();this.zip_laxi=this.zip_sweepRadius=!0},invalidate_gverts:function(){this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0);this.zip_gverts=!0},invalidate_gaxi:function(){this.zip_gaxi=!0},validate_lverts:function(){this.zip_lverts&&(this.zip_lverts=!1,2<this.lverts.length&&(this.validate_area_inertia(),0>this.area&&(this.reverse_vertices(),this.area=-this.area)))},cleanup_lvert:function(a){for(var b=null,c=null,
l=this.lverts.next;null!=l&&!(l==a);){b=null==b?this.gverts.next:b.next,c=null==c?this.edges.head:c.next;l=l.next}a=null==b?this.gverts.next:b.next;this.gverts.erase(b);null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=ha.zpp_pool;ha.zpp_pool=a;2==this.edgeCnt?(c=this.edges.pop_unsafe(),c.polygon=null,c.next=Fa.zpp_pool,Fa.zpp_pool=c,c=this.edges.pop_unsafe(),c.polygon=null,c.next=Fa.zpp_pool,Fa.zpp_pool=c,this.edgeCnt=0):0!=this.edgeCnt&&
(b=null==c?this.edges.head.elt:c.next.elt,this.edges.erase(c),b.polygon=null,b.next=Fa.zpp_pool,Fa.zpp_pool=b,this.edgeCnt--)},splice_collinear:function(){this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real())},splice_collinear_real:function(){if(!(null==this.lverts.next||null==this.lverts.next.next)&&null!=this.lverts.next.next.next){for(var a=null,b=this.lverts.next;null!=b;){var c=b,l=null==b.next?this.lverts.next:b.next;ob.vec_dsq(c.x,c.y,l.x,l.y)<q.epsilon*q.epsilon?(this.cleanup_lvert(b),
b=this.lverts.erase(a)):(a=b,b=b.next)}if(null!=this.lverts.next){do{a=!1;for(b=this.lverts.next;null!=b;){var c=null==b.next?this.lverts.next:b.next,e=b,l=c,g=null==c.next?this.lverts.next:c.next,i=0,h=0,i=l.x-e.x,h=l.y-e.y,j=e=0,e=g.x-l.x,j=g.y-l.y,l=j*i-e*h;l*l>=q.epsilon*q.epsilon||(this.cleanup_lvert(c),this.lverts.erase(null==b.next?null:b),a=!0);b=b.next}}while(a)}}},reverse_vertices:function(){this.lverts.reverse();this.gverts.reverse();this.edges.reverse();var a=this.edges.iterator_at(this.edgeCnt-
1),b=this.edges.pop_unsafe();this.edges.insert(a,b);this.reverse_flag=!this.reverse_flag;null!=this.wrap_lverts&&(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},validate_laxi:function(){if(this.zip_laxi){this.zip_laxi=!1;this.validate_lverts();for(var a=this.edges.head,b=this.lverts.next,c=b,b=b.next;null!=b;){var l=b,e=
a.elt,a=a.next;e.lp0=c;e.lp1=l;var g=0,i=0,g=c.x-l.x,i=c.y-l.y,h=Math.sqrt(g*g+i*i);e.length=h;h=1/h;g*=h;i*=h;h=g;g=-i;i=h;e.lprojection=g*c.x+i*c.y;e.lnormx=g;e.lnormy=i;null!=e.wrap_lnorm&&(e.wrap_lnorm.zpp_inner.x=g,e.wrap_lnorm.zpp_inner.y=i);c=l;b=b.next}e=this.lverts.next;a=a.elt;a.lp0=c;a.lp1=e;l=b=0;b=c.x-e.x;l=c.y-e.y;e=Math.sqrt(b*b+l*l);a.length=e;e=1/e;g=b*e;b=-(l*e);l=g;a.lprojection=b*c.x+l*c.y;a.lnormx=b;a.lnormy=l;null!=a.wrap_lnorm&&(a.wrap_lnorm.zpp_inner.x=b,a.wrap_lnorm.zpp_inner.y=
l)}},validate_gverts:function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1;this.validate_lverts();this.body.validate_axis();for(var a=this.lverts.next,b=this.gverts.next;null!=b;){var c=b,e=a,a=a.next;c.x=this.body.posx+(this.body.axisy*e.x-this.body.axisx*e.y);c.y=this.body.posy+(e.x*this.body.axisx+e.y*this.body.axisy);b=b.next}}},validate_gaxi:function(){if(this.zip_gaxi&&null!=this.body){this.zip_gaxi=!1;this.validate_laxi();this.body.validate_axis();this.validate_gverts();for(var a=
this.edges.head,b=this.gverts.next,c=b,b=b.next;null!=b;){var e=b,f=a.elt,a=a.next;f.gp0=c;f.gp1=e;f.gnormx=this.body.axisy*f.lnormx-this.body.axisx*f.lnormy;f.gnormy=f.lnormx*this.body.axisx+f.lnormy*this.body.axisy;f.gprojection=this.body.posx*f.gnormx+this.body.posy*f.gnormy+f.lprojection;null!=f.wrap_gnorm&&(f.wrap_gnorm.zpp_inner.x=f.gnormx,f.wrap_gnorm.zpp_inner.y=f.gnormy);f.tp0=f.gp0.y*f.gnormx-f.gp0.x*f.gnormy;f.tp1=f.gp1.y*f.gnormx-f.gp1.x*f.gnormy;c=e;b=b.next}b=this.gverts.next;a=a.elt;
a.gp0=c;a.gp1=b;a.gnormx=this.body.axisy*a.lnormx-this.body.axisx*a.lnormy;a.gnormy=a.lnormx*this.body.axisx+a.lnormy*this.body.axisy;a.gprojection=this.body.posx*a.gnormx+this.body.posy*a.gnormy+a.lprojection;null!=a.wrap_gnorm&&(a.wrap_gnorm.zpp_inner.x=a.gnormx,a.wrap_gnorm.zpp_inner.y=a.gnormy);a.tp0=a.gp0.y*a.gnormx-a.gp0.x*a.gnormy;a.tp1=a.gp1.y*a.gnormx-a.gp1.x*a.gnormy}},__validate_aabb:function(){this.validate_gverts();var a=this.gverts.next;this.aabb.minx=a.x;this.aabb.miny=a.y;this.aabb.maxx=
a.x;this.aabb.maxy=a.y;for(a=this.gverts.next.next;null!=a;){var b=a;b.x<this.aabb.minx&&(this.aabb.minx=b.x);b.x>this.aabb.maxx&&(this.aabb.maxx=b.x);b.y<this.aabb.miny&&(this.aabb.miny=b.y);b.y>this.aabb.maxy&&(this.aabb.maxy=b.y);a=a.next}},_force_validate_aabb:function(){var a=this.lverts.next,b=this.gverts.next,c=a,a=a.next;b.x=this.body.posx+(this.body.axisy*c.x-this.body.axisx*c.y);b.y=this.body.posy+(c.x*this.body.axisx+c.y*this.body.axisy);this.aabb.minx=b.x;this.aabb.miny=b.y;this.aabb.maxx=
b.x;this.aabb.maxy=b.y;for(b=this.gverts.next.next;null!=b;){var c=b,e=a,a=a.next;c.x=this.body.posx+(this.body.axisy*e.x-this.body.axisx*e.y);c.y=this.body.posy+(e.x*this.body.axisx+e.y*this.body.axisy);c.x<this.aabb.minx&&(this.aabb.minx=c.x);c.x>this.aabb.maxx&&(this.aabb.maxx=c.x);c.y<this.aabb.miny&&(this.aabb.miny=c.y);c.y>this.aabb.maxy&&(this.aabb.maxy=c.y);b=b.next}},__validate_sweepRadius:function(){var a=0,b=0;this.validate_laxi();for(var c=this.lverts.next;null!=c;){var e=c,e=e.x*e.x+
e.y*e.y;e>a&&(a=e);c=c.next}for(c=this.edges.head;null!=c;){e=c.elt;if(e.lprojection<b&&(b=e.lprojection,0>b))break;c=c.next}0>b&&(b=0);this.sweepRadius=Math.sqrt(a);this.sweepCoef=this.sweepRadius-b},__validate_area_inertia:function(){if(null==this.lverts.next||null==this.lverts.next.next||null==this.lverts.next.next.next)this.inertia=this.area=0;else{for(var a=this.area=0,b=0,c=this.lverts.next,e=c,f=c=c.next,c=c.next;null!=c;){var g=c,i=f.y*e.x-f.x*e.y,a=a+i*(f.x*f.x+f.y*f.y+(f.x*e.x+f.y*e.y)+
(e.x*e.x+e.y*e.y)),b=b+i;this.area+=f.x*(g.y-e.y);e=f;f=g;c=c.next}i=c=this.lverts.next;g=f.y*e.x-f.x*e.y;a+=g*(f.x*f.x+f.y*f.y+(f.x*e.x+f.y*e.y)+(e.x*e.x+e.y*e.y));this.area+=f.x*(i.y-e.y);e=f;f=i;c=c.next;i=f.y*e.x-f.x*e.y;a+=i*(f.x*f.x+f.y*f.y+(f.x*e.x+f.y*e.y)+(e.x*e.x+e.y*e.y));this.area+=f.x*(c.y-e.y);this.inertia=a/(6*(b+g+i));this.area*=0.5;0>this.area&&(this.area=-this.area,this.reverse_vertices())}},__validate_angDrag:function(){this.validate_area_inertia();this.validate_laxi();for(var a=
0,b=this.edges.head,c=0,e=this.lverts.next,f=e,e=e.next;null!=e;){var g=e,i=b.elt,b=b.next,c=c+i.length,h=0,j=0,h=g.x-f.x,j=g.y-f.y,a=a+i.length*q.fluidAngularDragFriction*this.material.dynamicFriction*i.lprojection*i.lprojection,k=-(f.y*i.lnormx-f.x*i.lnormy)/(j*i.lnormx-h*i.lnormy);if(0<k){var m;m=1<k?1:k;var o=0,s=0,o=f.x,s=f.y,r=m,o=o+h*r,s=s+j*r,r=i.lnormy*f.x-i.lnormx*f.y,o=i.lnormy*o-i.lnormx*s,a=a+(o*o*o-r*r*r)/(3*(o-r))*m*i.length*q.fluidAngularDrag}1>k&&(k=0>k?0:k,o=m=0,m=f.x,o=f.y,f=k,
m+=h*f,o+=j*f,f=i.lnormy*m-i.lnormx*o,h=i.lnormy*g.x-i.lnormx*g.y,a+=(h*h*h-f*f*f)/(3*(h-f))*q.fluidVacuumDrag*(1-k)*i.length*q.fluidAngularDrag);f=g;e=e.next}e=this.lverts.next;b=b.elt;c+=b.length;i=g=0;g=e.x-f.x;i=e.y-f.y;a+=b.length*q.fluidAngularDragFriction*this.material.dynamicFriction*b.lprojection*b.lprojection;h=-(f.y*b.lnormx-f.x*b.lnormy)/(i*b.lnormx-g*b.lnormy);0<h&&(j=1<h?1:h,o=m=0,m=f.x,o=f.y,k=b.lnormy*f.x-b.lnormx*f.y,m=b.lnormy*(m+g*j)-b.lnormx*(o+i*j),a+=(m*m*m-k*k*k)/(3*(m-k))*
j*b.length*q.fluidAngularDrag);1>h&&(h=0>h?0:h,k=j=0,j=f.x,k=f.y,f=b.lnormy*(j+g*h)-b.lnormx*(k+i*h),e=b.lnormy*e.x-b.lnormx*e.y,a+=(e*e*e-f*f*f)/(3*(e-f))*q.fluidVacuumDrag*(1-h)*b.length*q.fluidAngularDrag);this.angDrag=a/(this.inertia*c)},__validate_localCOM:function(){if(null==this.lverts.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y;else if(null==this.lverts.next.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y,this.localCOMx+=1*this.lverts.next.next.x,
this.localCOMy+=1*this.lverts.next.next.y,this.localCOMx*=0.5,this.localCOMy*=0.5;else{for(var a=this.localCOMy=this.localCOMx=0,b=this.lverts.next,c=b,e=b=b.next,b=b.next;null!=b;){var f=b,a=a+e.x*(f.y-c.y),c=f.y*e.x-f.x*e.y;this.localCOMx+=(e.x+f.x)*c;this.localCOMy+=(e.y+f.y)*c;c=e;e=f;b=b.next}f=b=this.lverts.next;a+=e.x*(f.y-c.y);c=f.y*e.x-f.x*e.y;this.localCOMx+=(e.x+f.x)*c;this.localCOMy+=(e.y+f.y)*c;c=e;e=f;b=b.next;a+=e.x*(b.y-c.y);c=b.y*e.x-b.x*e.y;this.localCOMx+=(e.x+b.x)*c;this.localCOMy+=
(e.y+b.y)*c;a=1/(3*a);this.localCOMx*=a;this.localCOMy*=a}},__class__:Bf});var id=function(){this.sweep=this.dynab=null;this.is_sweep=!1;this.space=null};h["zpp_nape.space.ZPP_Broadphase"]=id;id.__name__=!0;id.prototype={insert:function(a){this.is_sweep?this.sweep.__insert(a):this.dynab.__insert(a)},remove:function(a){this.is_sweep?this.sweep.__remove(a):this.dynab.__remove(a)},sync:function(a){this.is_sweep?!this.sweep.space.continuous&&a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==i.id_ShapeType_CIRCLE?
a.circle.__validate_aabb():a.polygon.__validate_aabb()):this.dynab.__sync(a)},broadphase:function(){},__class__:id};var Ya=function(){this.synced=this.first_sync=!1;this.snext=null;this.moved=!1;this.next=this.mnext=null;this.height=0;this.parent=this.child1=this.child2=null;this.dyn=!1;this.aabb=this.shape=null;this.height=-1};h["zpp_nape.space.ZPP_AABBNode"]=Ya;Ya.__name__=!0;Ya.prototype={free:function(){this.height=-1;var a=this.aabb;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a.wrap_min=
a.wrap_max=null;a._invalidate=null;a._validate=null;a.next=ia.zpp_pool;ia.zpp_pool=a;this.mnext=this.snext=this.next=this.child1=this.child2=this.parent=null},__class__:Ya};var oa=function(){this.arb=this.next=null;this.id=this.di=0;this.first=this.sleeping=!1;this.n1=this.n2=null};h["zpp_nape.space.ZPP_AABBPair"]=oa;oa.__name__=!0;oa.prototype={__class__:oa};var Ib=function(){this.root=null};h["zpp_nape.space.ZPP_AABBTree"]=Ib;Ib.__name__=!0;Ib.prototype={inlined_insertLeaf:function(a){if(null==
this.root)this.root=a,this.root.parent=null;else{for(var b=a.aabb,c=this.root;null!=c.child1;){var e=c.child1,f=c.child2,g=c.aabb.perimeter();Ib.tmpaabb.setCombine(c.aabb,b);var i=Ib.tmpaabb.perimeter(),h=2*i,g=2*(i-g);Ib.tmpaabb.setCombine(b,e.aabb);null==e.child1?i=Ib.tmpaabb.perimeter()+g:(i=e.aabb.perimeter(),i=Ib.tmpaabb.perimeter()-i+g);Ib.tmpaabb.setCombine(b,f.aabb);if(null==f.child1)g=Ib.tmpaabb.perimeter()+g;else var j=f.aabb.perimeter(),g=Ib.tmpaabb.perimeter()-j+g;if(h<i&&h<g)break;else c=
i<g?e:f}e=c.parent;null==Ya.zpp_pool?f=new Ya:(f=Ya.zpp_pool,Ya.zpp_pool=f.next,f.next=null);null==ia.zpp_pool?f.aabb=new ia:(f.aabb=ia.zpp_pool,ia.zpp_pool=f.aabb.next,f.aabb.next=null);null;f.moved=!1;f.synced=!1;f.first_sync=!1;f.parent=e;f.aabb.setCombine(b,c.aabb);f.height=c.height+1;null!=e?(e.child1==c?e.child1=f:e.child2=f,f.child1=c,f.child2=a,c.parent=f,a.parent=f):(f.child1=c,f.child2=a,c.parent=f,this.root=a.parent=f);for(c=a.parent;null!=c;)c=this.balance(c),a=c.child1,b=c.child2,e=a.height,
f=b.height,c.height=1+(e>f?e:f),c.aabb.setCombine(a.aabb,b.aabb),c=c.parent}},removeLeaf:function(a){this.inlined_removeLeaf(a)},inlined_removeLeaf:function(a){if(a==this.root)this.root=null;else{var b=a.parent,c=b.parent,a=b.child1==a?b.child2:b.child1;if(null!=c){c.child1==b?c.child1=a:c.child2=a;a.parent=c;b.free();b.next=Ya.zpp_pool;Ya.zpp_pool=b;for(b=c;null!=b;)b=this.balance(b),a=b.child1,c=b.child2,b.aabb.setCombine(a.aabb,c.aabb),a=a.height,c=c.height,b.height=1+(a>c?a:c),b=b.parent}else this.root=
a,a.parent=null,b.free(),b.next=Ya.zpp_pool,Ya.zpp_pool=b}},balance:function(a){if(null==a.child1||2>a.height)return a;var b=a.child1,c=a.child2,e=c.height-b.height;if(1<e){var f=c.child1,g=c.child2;c.child1=a;c.parent=a.parent;a.parent=c;null!=c.parent?c.parent.child1==a?c.parent.child1=c:c.parent.child2=c:this.root=c;f.height>g.height?(c.child2=f,a.child2=g,g.parent=a,a.aabb.setCombine(b.aabb,g.aabb),c.aabb.setCombine(a.aabb,f.aabb),a.height=1+function(){var a=b.height,c=g.height;return a>c?a:c}(this),
c.height=1+function(){var b=a.height,c=f.height;return b>c?b:c}(this)):(c.child2=g,a.child2=f,f.parent=a,a.aabb.setCombine(b.aabb,f.aabb),c.aabb.setCombine(a.aabb,g.aabb),a.height=1+function(){var a=b.height,c=f.height;return a>c?a:c}(this),c.height=1+function(){var b=a.height,c=g.height;return b>c?b:c}(this));return c}if(-1>e){var i=b.child1,h=b.child2;b.child1=a;b.parent=a.parent;a.parent=b;null!=b.parent?b.parent.child1==a?b.parent.child1=b:b.parent.child2=b:this.root=b;i.height>h.height?(b.child2=
i,a.child1=h,h.parent=a,a.aabb.setCombine(c.aabb,h.aabb),b.aabb.setCombine(a.aabb,i.aabb),a.height=1+function(){var a=c.height,b=h.height;return a>b?a:b}(this),b.height=1+function(){var b=a.height,c=i.height;return b>c?b:c}(this)):(b.child2=h,a.child1=i,i.parent=a,a.aabb.setCombine(c.aabb,i.aabb),b.aabb.setCombine(a.aabb,h.aabb),a.height=1+function(){var a=c.height,b=i.height;return a>b?a:b}(this),b.height=1+function(){var b=a.height,c=h.height;return b>c?b:c}(this));return b}return a},__class__:Ib};
var vh=function(a){this.stree=this.dtree=this.pairs=this.syncs=this.moves=null;id.call(this);this.space=a;this.is_sweep=!1;this.dynab=this;this.stree=new Ib;this.dtree=new Ib};h["zpp_nape.space.ZPP_DynAABBPhase"]=vh;vh.__name__=!0;vh.__super__=id;vh.prototype=t(id.prototype,{__insert:function(a){var b;null==Ya.zpp_pool?b=new Ya:(b=Ya.zpp_pool,Ya.zpp_pool=b.next,b.next=null);null==ia.zpp_pool?b.aabb=new ia:(b.aabb=ia.zpp_pool,ia.zpp_pool=b.aabb.next,b.aabb.next=null);null;b.moved=!1;b.synced=!1;b.first_sync=
!1;b.shape=a;a.node=b;b.synced=!0;b.first_sync=!0;b.snext=this.syncs;this.syncs=b},__remove:function(a){var b=a.node;b.first_sync||(b.dyn?this.dtree.removeLeaf(b):this.stree.removeLeaf(b));a.node=null;if(b.synced){for(var c=null,e=this.syncs;null!=e&&!(e==b);){c=e;e=e.snext}null==c?this.syncs=e.snext:c.snext=e.snext;e.snext=null;b.synced=!1}if(b.moved){c=null;for(e=this.moves;null!=e&&!(e==b);){c=e;e=e.mnext}null==c?this.moves=e.mnext:c.mnext=e.mnext;e.mnext=null;b.moved=!1}for(var c=null,f=this.pairs;null!=
f;)e=f.next,f.n1==b||f.n2==b?(null==c?this.pairs=e:c.next=e,null!=f.arb&&(f.arb.pair=null),f.arb=null,f.n1.shape.pairs.remove(f),f.n2.shape.pairs.remove(f),f.n1=f.n2=null,f.sleeping=!1,f.next=oa.zpp_pool,oa.zpp_pool=f):c=f,f=e;for(;null!=a.pairs.head;)c=a.pairs.pop_unsafe(),c.n1==b?c.n2.shape.pairs.remove(c):c.n1.shape.pairs.remove(c),null!=c.arb&&(c.arb.pair=null),c.arb=null,c.n1=c.n2=null,c.sleeping=!1,c.next=oa.zpp_pool,oa.zpp_pool=c;b.free();b.next=Ya.zpp_pool;Ya.zpp_pool=b},__sync:function(a){var b=
a.node;if(!b.synced&&(!this.space.continuous&&a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==i.id_ShapeType_CIRCLE?a.circle.__validate_aabb():a.polygon.__validate_aabb()),b.dyn!=(a.body.type==i.id_BodyType_STATIC?!1:!a.body.component.sleeping)||!b.aabb.contains(a.aabb)))b.synced=!0,b.snext=this.syncs,this.syncs=b},broadphase:function(a,b){for(var c=this.syncs;null!=c;){var e=c.shape;c.first_sync?c.first_sync=!1:(c.dyn?this.dtree:this.stree).inlined_removeLeaf(c);var f=c.aabb;!a.continuous&&e.zip_aabb&&
null!=e.body&&(e.zip_aabb=!1,e.type==i.id_ShapeType_CIRCLE?e.circle.__validate_aabb():e.polygon.__validate_aabb());f.setExpand(e.aabb,3);((e.body.type==i.id_BodyType_STATIC?c.dyn=!1:c.dyn=!e.body.component.sleeping)?this.dtree:this.stree).inlined_insertLeaf(c);c.synced=!1;c=c.snext}for(;null!=this.syncs;)if(c=this.syncs,this.syncs=c.snext,c.snext=null,!c.moved&&(c.moved=!1,e=c.shape,!e.body.component.sleeping)){var f=c.aabb,g=null;null!=this.dtree.root&&(this.dtree.root.next=g,g=this.dtree.root);
for(;null!=g;){var h;h=g;g=h.next;h.next=null;if(h!=c)if(null==h.child1){var j=h.shape;if(j.body!=e.body&&!(j.body.type==i.id_BodyType_STATIC&&e.body.type==i.id_BodyType_STATIC)&&f.intersect(h.aabb)){var k,m;e.id<j.id?(k=e.id,m=j.id):(k=j.id,m=e.id);for(var o=null,q=(e.pairs.length<j.pairs.length?e:j).pairs.head;null!=q;){var r=q.elt;if(r.id==k&&r.di==m){o=r;break}q=q.next}null!=o?o.sleeping&&(o.sleeping=!1,o.next=this.pairs,this.pairs=o,o.first=!0):(null==oa.zpp_pool?o=new oa:(o=oa.zpp_pool,oa.zpp_pool=
o.next,o.next=null),null,o.n1=c,o.n2=h,o.id=k,o.di=m,o.next=this.pairs,this.pairs=o,o.first=!0,e.pairs.inlined_add(o),j.pairs.inlined_add(o))}}else f.intersect(h.aabb)&&(null!=h.child1&&(h.child1.next=g,g=h.child1),null!=h.child2&&(h.child2.next=g,g=h.child2))}null!=this.stree.root&&(this.stree.root.next=g,g=this.stree.root);for(;null!=g;)if(h=g,g=h.next,h.next=null,h!=c)if(null==h.child1){if(j=h.shape,j.body!=e.body&&!(j.body.type==i.id_BodyType_STATIC&&e.body.type==i.id_BodyType_STATIC)&&f.intersect(h.aabb)){e.id<
j.id?(k=e.id,m=j.id):(k=j.id,m=e.id);o=null;for(q=(e.pairs.length<j.pairs.length?e:j).pairs.head;null!=q;){r=q.elt;if(r.id==k&&r.di==m){o=r;break}q=q.next}null!=o?o.sleeping&&(o.sleeping=!1,o.next=this.pairs,this.pairs=o,o.first=!0):(null==oa.zpp_pool?o=new oa:(o=oa.zpp_pool,oa.zpp_pool=o.next,o.next=null),null,o.n1=c,o.n2=h,o.id=k,o.di=m,o.next=this.pairs,this.pairs=o,o.first=!0,e.pairs.inlined_add(o),j.pairs.inlined_add(o))}}else f.intersect(h.aabb)&&(null!=h.child1&&(h.child1.next=g,g=h.child1),
null!=h.child2&&(h.child2.next=g,g=h.child2))}for(;null!=this.moves;)if(c=this.moves,this.moves=c.mnext,c.mnext=null,c.moved=!1,e=c.shape,!e.body.component.sleeping){f=c.aabb;g=null;null!=this.dtree.root&&(this.dtree.root.next=g,g=this.dtree.root);for(;null!=g;)if(h=g,g=h.next,h.next=null,h!=c)if(null==h.child1){if(j=h.shape,j.body!=e.body&&!(j.body.type==i.id_BodyType_STATIC&&e.body.type==i.id_BodyType_STATIC)&&f.intersect(h.aabb)){e.id<j.id?(k=e.id,m=j.id):(k=j.id,m=e.id);o=null;for(q=(e.pairs.length<
j.pairs.length?e:j).pairs.head;null!=q;){r=q.elt;if(r.id==k&&r.di==m){o=r;break}q=q.next}null!=o?o.sleeping&&(o.sleeping=!1,o.next=this.pairs,this.pairs=o,o.first=!0):(null==oa.zpp_pool?o=new oa:(o=oa.zpp_pool,oa.zpp_pool=o.next,o.next=null),null,o.n1=c,o.n2=h,o.id=k,o.di=m,o.next=this.pairs,this.pairs=o,o.first=!0,e.pairs.inlined_add(o),j.pairs.inlined_add(o))}}else f.intersect(h.aabb)&&(null!=h.child1&&(h.child1.next=g,g=h.child1),null!=h.child2&&(h.child2.next=g,g=h.child2));null!=this.stree.root&&
(this.stree.root.next=g,g=this.stree.root);for(;null!=g;)if(h=g,g=h.next,h.next=null,h!=c)if(null==h.child1){if(j=h.shape,j.body!=e.body&&!(j.body.type==i.id_BodyType_STATIC&&e.body.type==i.id_BodyType_STATIC)&&f.intersect(h.aabb)){e.id<j.id?(k=e.id,m=j.id):(k=j.id,m=e.id);o=null;for(q=(e.pairs.length<j.pairs.length?e:j).pairs.head;null!=q;){r=q.elt;if(r.id==k&&r.di==m){o=r;break}q=q.next}null!=o?o.sleeping&&(o.sleeping=!1,o.next=this.pairs,this.pairs=o,o.first=!0):(null==oa.zpp_pool?o=new oa:(o=
oa.zpp_pool,oa.zpp_pool=o.next,o.next=null),null,o.n1=c,o.n2=h,o.id=k,o.di=m,o.next=this.pairs,this.pairs=o,o.first=!0,e.pairs.inlined_add(o),j.pairs.inlined_add(o))}}else f.intersect(h.aabb)&&(null!=h.child1&&(h.child1.next=g,g=h.child1),null!=h.child2&&(h.child2.next=g,g=h.child2))}c=null;for(e=this.pairs;null!=e;)!e.first&&!e.n1.aabb.intersect(e.n2.aabb)?(null==c?this.pairs=e.next:c.next=e.next,e.n1.shape.pairs.inlined_try_remove(e),e.n2.shape.pairs.inlined_try_remove(e),f=e.next,null!=e.arb&&
(e.arb.pair=null),e.arb=null,e.n1=e.n2=null,e.sleeping=!1,e.next=oa.zpp_pool,oa.zpp_pool=e,e=f):(f=e.n1.shape,g=f.body,h=e.n2.shape,j=h.body,!e.first&&(g.component.sleeping||g.type==i.id_BodyType_STATIC)&&(j.component.sleeping||j.type==i.id_BodyType_STATIC)?(e.sleeping=!0,null==c?this.pairs=e.next:c.next=e.next):(e.first=!1,f.aabb.intersect(h.aabb)&&(c=e.arb,e.arb=b?a.narrowPhase(f,h,g.type!=i.id_BodyType_DYNAMIC||j.type!=i.id_BodyType_DYNAMIC,e.arb,!1):a.continuousEvent(f,h,g.type!=i.id_BodyType_DYNAMIC||
j.type!=i.id_BodyType_DYNAMIC,e.arb,!1),null==e.arb?null!=c&&(c.pair=null):e.arb.pair=e),c=e),e=e.next)},__class__:vh});var pc=function(){this.waket=0;this.sleep=!1;this.comps=null;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.comps=new sj};h["zpp_nape.space.ZPP_Island"]=pc;pc.__name__=!0;pc.prototype={inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},__class__:pc};var ub=function(){this.woken=!1;this.waket=0;this.sleeping=!1;this.body=this.constraint=this.island=null;this.isBody=!1;this.rank=0;this.next=this.parent=null;this.sleeping=!1;this.island=null;this.parent=this;this.rank=0;this.woken=!1};h["zpp_nape.space.ZPP_Component"]=ub;ub.__name__=!0;ub.prototype={__class__:ub};
var pb=function(){this.freed=this.lazydel=!1;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.int1=this.int2=this.next=null;this.id=this.di=0;this.arbiters=new We};h["zpp_nape.space.ZPP_CallbackSet"]=pb;pb.__name__=!0;pb.get=function(a,b){var c;null==pb.zpp_pool?c=new pb:(c=pb.zpp_pool,pb.zpp_pool=c.next,c.next=null);c.freed=!1;c.lazydel=!1;c.COLLISIONstate=i.id_PreFlag_ACCEPT;c.COLLISIONstamp=0;c.SENSORstate=i.id_PreFlag_ACCEPT;c.SENSORstamp=0;c.FLUIDstate=i.id_PreFlag_ACCEPT;c.FLUIDstamp=
0;a.id<b.id?(c.int1=a,c.int2=b):(c.int1=b,c.int2=a);c.id=c.int1.id;c.di=c.int2.id;return c};pb.prototype={inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},remove_arb:function(a){this.arbiters.inlined_try_remove(a)},
empty_arb:function(a){var b;b=!0;for(var c=this.arbiters.head;null!=c;)if(0==(c.elt.type&a))c=c.next;else{b=!1;break}return b},sleeping:function(){var a;a=!0;for(var b=this.arbiters.head;null!=b;)if(b.elt.sleeping)b=b.next;else{a=!1;break}return a},__class__:pb};var tj=function(a){this.cbsets=this.space=null;null==Oa.zpp_pool?this.cbsets=new Oa:(this.cbsets=Oa.zpp_pool,Oa.zpp_pool=this.cbsets.next,this.cbsets.next=null);null;this.cbsets.lt=ma.setlt;this.space=a};h["zpp_nape.space.ZPP_CbSetManager"]=
tj;tj.__name__=!0;tj.prototype={get:function(a){if(null==a.head)return null;var b;null==ma.zpp_pool?b=new ma:(b=ma.zpp_pool,ma.zpp_pool=b.next,b.next=null);null;var c=b.cbTypes;b.cbTypes=a;var e=this.cbsets.find_weak(b);null!=e?a=e.data:(a=ma.get(a),this.cbsets.insert(a),a.manager=this);b.cbTypes=c;b.free();b.next=ma.zpp_pool;ma.zpp_pool=b;return a},remove:function(a){for(this.cbsets.remove(a);null!=a.cbpairs.head;){var b=a.cbpairs.pop_unsafe();b.a!=b.b&&(a==b.a?b.b.cbpairs.remove(b):b.a.cbpairs.remove(b));
b.a=b.b=null;b.listeners.clear();b.next=Ra.zpp_pool;Ra.zpp_pool=b}a.manager=null},validate:function(){if(!this.cbsets.empty()){for(var a=this.cbsets.parent;null!=a.prev;)a=a.prev;for(;null!=a;)if(a.data.validate(),null!=a.next)for(a=a.next;null!=a.prev;)a=a.prev;else{for(;null!=a.parent&&a==a.parent.next;)a=a.parent;a=a.parent}}},pair:function(a,b){for(var c=null,e=(a.cbpairs.length<b.cbpairs.length?a.cbpairs:b.cbpairs).head;null!=e;){var f=e.elt;if(f.a==a&&f.b==b||f.a==b&&f.b==a){c=f;break}e=e.next}null==
c&&(c=Ra.get(a,b),a.cbpairs.add(c),b!=a&&b.cbpairs.add(c));c.zip_listeners&&(c.zip_listeners=!1,c.__validate());return c},__class__:tj};var zi=function(a,b){this.precb=this.prelisteners=null;this.continuous=!1;this.toiEvents=null;this.pre_dt=0;this.c_arbiters_true=this.c_arbiters_false=this.f_arbiters=this.s_arbiters=this.live=this.wrap_live=this.live_constraints=this.wrap_livecon=this.staticsleep=this.islands=this.listeners=this.wrap_listeners=this.callbacks=this.callbackset_list=this.cbsets=null;
this.sortcontacts=!1;this.time=0;this.midstep=!1;this.global_lin_drag=this.global_ang_drag=this.stamp=0;this.bodies=this.wrap_bodies=this.compounds=this.wrap_compounds=this.constraints=this.wrap_constraints=this.kinematics=this.bphase=this.__static=null;this.gravityx=this.gravityy=0;this.outer=null;this.toiEvents=new uj;this.global_ang_drag=this.global_lin_drag=0.015;this.precb=new Ag;this.precb.zpp_inner=new Xb;this.sortcontacts=!0;this.pre_dt=0;var c;if(!(c=null==b))null==i.Broadphase_DYNAMIC_AABB_TREE&&
(i.internal=!0,i.Broadphase_DYNAMIC_AABB_TREE=new ee,i.internal=!1),c=b==i.Broadphase_DYNAMIC_AABB_TREE;c?this.bphase=new vh(this):(null==i.Broadphase_SWEEP_AND_PRUNE&&(i.internal=!0,i.Broadphase_SWEEP_AND_PRUNE=new ee,i.internal=!1),b==i.Broadphase_SWEEP_AND_PRUNE&&(this.bphase=new wh(this)));this.time=0;null!=a?(this.gravityx=a.x,this.gravityy=a.y):this.gravityy=this.gravityx=0;this.bodies=new me;this.wrap_bodies=Uc.get(this.bodies);this.wrap_bodies.zpp_inner.adder=x(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=
x(this,this.bodies_subber);this.compounds=new xh;this.wrap_compounds=md.get(this.compounds);this.wrap_compounds.zpp_inner.adder=x(this,this.compounds_adder);this.wrap_compounds.zpp_inner.subber=x(this,this.compounds_subber);this.kinematics=new me;this.c_arbiters_true=new yh;this.c_arbiters_false=new yh;this.f_arbiters=new vj;this.s_arbiters=new wj;this.islands=new pc;this.live=new me;this.wrap_live=Uc.get(this.live,!0);this.staticsleep=new me;this.constraints=new Td;this.wrap_constraints=vc.get(this.constraints);
this.wrap_constraints.zpp_inner.adder=x(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=x(this,this.constraints_subber);this.live_constraints=new Td;this.wrap_livecon=vc.get(this.live_constraints,!0);this.__static=ld.__static();this.__static.zpp_inner.space=this;this.callbacks=new Xb;this.midstep=!1;this.listeners=new zh;this.wrap_listeners=xd.get(this.listeners);this.wrap_listeners.zpp_inner.adder=x(this,this.listeners_adder);this.wrap_listeners.zpp_inner.subber=x(this,this.listeners_subber);
this.callbackset_list=new pb;this.mrca1=new Zc;this.mrca2=new Zc;this.prelisteners=new Te;this.cbsets=new tj(this)};h["zpp_nape.space.ZPP_Space"]=zi;zi.__name__=!0;zi.prototype={bodies_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(a),this.addBody(a.zpp_inner),!0):!1},bodies_subber:function(a){this.remBody(a.zpp_inner)},compounds_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.wrap_compounds.remove(a),
this.addCompound(a.zpp_inner),!0):!1},compounds_subber:function(a){this.remCompound(a.zpp_inner)},constraints_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(a),this.addConstraint(a.zpp_inner),!0):!1},constraints_subber:function(a){this.remConstraint(a.zpp_inner)},listeners_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(a),this.addListener(a.zpp_inner),
!0):!1},listeners_subber:function(a){this.remListener(a.zpp_inner)},addListener:function(a){a.space=this;a.addedToSpace();null!=a.interaction&&null},remListener:function(a){null!=a.interaction&&null;a.removedFromSpace();a.space=null},add_callbackset:function(a){a.int1.cbsets.inlined_add(a);a.int2.cbsets.inlined_add(a);this.callbackset_list.inlined_add(a)},remove_callbackset:function(a){a.lazydel=!0;a.int1.cbsets.inlined_try_remove(a);a.int2.cbsets.inlined_try_remove(a)},transmitType:function(a,b){a.world||
(a.component.waket=this.stamp+(this.midstep?0:1),a.type==i.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!1));a.type==i.id_BodyType_DYNAMIC?this.live.remove(a):a.type==i.id_BodyType_KINEMATIC?(this.kinematics.remove(a),this.staticsleep.remove(a)):a.type==i.id_BodyType_STATIC&&this.staticsleep.remove(a);a.type=b;a.type==i.id_BodyType_KINEMATIC&&this.kinematics.add(a);a.type==i.id_BodyType_STATIC&&this.static_validation(a);a.component.sleeping=!0;a.world||
(a.component.waket=this.stamp+(this.midstep?0:1),a.type==i.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0))},added_shape:function(a,b){null==b&&(b=!1);if(!b){var c=a.body;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==i.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1))}this.bphase.insert(a);a.addedToSpace()},removed_shape:function(a,b){null==b&&(b=!1);var c=this,e=a.body;b||e.wake();for(var f=
null,g=e.arbiters.head;null!=g;){var h=[g.elt];if(h[0].ws1==a||h[0].ws2==a){if(0!=h[0].present){this.MRCA_chains(h[0].ws1,h[0].ws2);for(g=this.mrca1.head;null!=g;){for(var j=g.elt,k=this.mrca2.head;null!=k;){var m=k.elt,o=j.cbSet,q=m.cbSet;o.validate();q.validate();o.manager.pair(o,q).empty_intersection()||(m=[ta.get(j,m)],m[0].remove_arb(h[0]),h[0].present--,o.manager.pair(o,q).forall(i.id_CbEvent_END,function(a,b){return function(e){if(0!=(e.itype&b[0].type)&&a[0].empty_arb(e.itype)){var f=c.push_callback(e);
f.event=i.id_CbEvent_END;ta.int_callback(a[0],e,f);f.set=a[0]}}}(m,h)),null==m[0].arbiters.head&&this.remove_callbackset(m[0]));k=k.next}g=g.next}}h[0].b1!=e&&h[0].b1.type==i.id_BodyType_DYNAMIC&&(g=h[0].b1,g.world||(g.component.waket=this.stamp+(this.midstep?0:1),g.type==i.id_BodyType_KINEMATIC&&(g.kinematicDelaySleep=!0),g.component.sleeping&&this.really_wake(g,!1)));h[0].b2!=e&&h[0].b2.type==i.id_BodyType_DYNAMIC&&(g=h[0].b2,g.world||(g.component.waket=this.stamp+(this.midstep?0:1),g.type==i.id_BodyType_KINEMATIC&&
(g.kinematicDelaySleep=!0),g.component.sleeping&&this.really_wake(g,!1)));h[0].cleared=!0;(null==e||h[0].b2==e)&&h[0].b1.arbiters.inlined_try_remove(h[0]);(null==e||h[0].b1==e)&&h[0].b2.arbiters.inlined_try_remove(h[0]);null!=h[0].pair&&(h[0].pair.arb=null,h[0].pair=null);h[0].active=!1;this.f_arbiters.modified=!0;g=e.arbiters.erase(f)}else f=g,g=g.next}this.bphase.remove(a);a.removedFromSpace()},addConstraint:function(a){a.space=this;a.addedToSpace();a.active&&(a.component.sleeping=!0,this.wake_constraint(a,
!0))},remConstraint:function(a){a.active&&(this.wake_constraint(a,!0),this.live_constraints.remove(a));a.removedFromSpace();a.space=null},addCompound:function(a){a.space=this;a.addedToSpace();for(var b=a.bodies.head;null!=b;)this.addBody(b.elt),b=b.next;for(b=a.constraints.head;null!=b;)this.addConstraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.addCompound(a.elt),a=a.next},remCompound:function(a){for(var b=a.bodies.head;null!=b;)this.remBody(b.elt),b=b.next;for(b=a.constraints.head;null!=
b;)this.remConstraint(b.elt),b=b.next;for(b=a.compounds.head;null!=b;)this.remCompound(b.elt),b=b.next;a.removedFromSpace();a.space=null},addBody:function(a,b){null==b&&(b=-1);a.space=this;a.addedToSpace();a.component.sleeping=!0;a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==i.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0));for(var c=a.shapes.head;null!=c;)this.added_shape(c.elt,!0),c=c.next;a.type==i.id_BodyType_STATIC?this.static_validation(a):
a.type!=i.id_BodyType_DYNAMIC&&b!=i.id_BodyType_KINEMATIC&&this.kinematics.add(a)},remBody:function(a,b){null==b&&(b=-1);a.type==i.id_BodyType_STATIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==i.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a)):a.type==i.id_BodyType_DYNAMIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==i.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&
this.really_wake(a,!0)),this.live.remove(a)):(b!=i.id_BodyType_KINEMATIC&&this.kinematics.remove(a),a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==i.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a));for(var c=a.shapes.head;null!=c;)this.removed_shape(c.elt,!0),c=c.next;a.removedFromSpace();a.space=null},push_callback:function(a){var b;null==Xb.zpp_pool?b=new Xb:(b=Xb.zpp_pool,Xb.zpp_pool=b.next,b.next=null);
null;this.callbacks.push(b);b.listener=a;return b},step:function(a,b,c){var e=this;this.time+=a;this.pre_dt=a;this.midstep=!0;this.stamp++;this.validation();this.bphase.broadphase(this,!0);this.prestep(a);if(this.sortcontacts){var f=this.c_arbiters_false;if(null!=f.head&&null!=f.head.next){var g=f.head,h=null,j=null,k=null,m=null,o=1,q,r,s;do{q=0;j=g;for(h=g=null;null!=j;){q++;k=j;r=0;for(s=o;null!=k&&r<o;)r++,k=k.next;for(;0<r||0<s&&null!=k;)0==r?(m=k,k=k.next,s--):0==s||null==k?(m=j,j=j.next,r--):
(j.elt.active&&k.elt.active?j.elt.oc1.dist<k.elt.oc1.dist:1)?(m=j,j=j.next,r--):(m=k,k=k.next,s--),null!=h?h.next=m:g=m,h=m;j=k}h.next=null;o<<=1}while(1<q);f.head=g;f.modified=!0;f.pushmod=!0}}this.updateVel(a);this.warmStart();this.iterateVel(b);for(b=this.kinematics.head;null!=b;)f=b.elt,f.pre_posx=f.posx,f.pre_posy=f.posy,f.pre_rot=f.rot,b=b.next;for(b=this.live.head;null!=b;)f=b.elt,f.pre_posx=f.posx,f.pre_posy=f.posy,f.pre_rot=f.rot,b=b.next;this.updatePos(a);this.continuous=!0;this.continuousCollisions(a);
this.continuous=!1;this.iteratePos(c);for(c=this.kinematics.head;null!=c;)b=c.elt,f=b.pre_rot!=b.rot,!(b.posx==b.pre_posx&&b.posy==b.pre_posy)&&b.invalidate_pos(),f&&b.invalidate_rot(),c=c.next;for(c=this.live.head;null!=c;)b=c.elt,f=b.pre_rot!=b.rot,!(b.posx==b.pre_posx&&b.posy==b.pre_posy)&&b.invalidate_pos(),f&&b.invalidate_rot(),c=c.next;c=null;for(b=this.staticsleep.head;null!=b;)f=b.elt,f.type!=i.id_BodyType_KINEMATIC||0==f.velx&&0==f.vely&&0==f.angvel?f.kinematicDelaySleep?(f.kinematicDelaySleep=
!1,b=b.next):(f.component.sleeping=!0,b=this.staticsleep.inlined_erase(c)):(c=b,b=b.next);this.doForests(a);this.sleepArbiters();this.midstep=!1;c=null;for(a=this.callbackset_list.next;null!=a;)b=[a],null==b[0].arbiters.head?(a=this.callbackset_list.inlined_erase(c),b=b[0],b.int1=b.int2=null,b.id=b.di=-1,b.freed=!0,null,b.next=pb.zpp_pool,pb.zpp_pool=b):(c=[b[0].sleeping()],ma.find_all(b[0].int1.cbSet,b[0].int2.cbSet,i.id_CbEvent_ONGOING,function(a,b){return function(c){if((!a[0]||c.allowSleepingCallbacks)&&
!b[0].empty_arb(c.itype)){var d=e.push_callback(c);d.event=i.id_CbEvent_ONGOING;ta.int_callback(b[0],c,d);d.set=b[0]}}}(c,b)),c=a,a=a.next);for(;!this.callbacks.empty();)a=this.callbacks.pop(),a.listener.type==i.id_ListenerType_BODY?a.listener.body.handler(a.wrapper_body()):a.listener.type==i.id_ListenerType_CONSTRAINT?a.listener.constraint.handler(a.wrapper_con()):a.listener.type==i.id_ListenerType_INTERACTION&&a.listener.interaction.handleri(a.wrapper_int()),a.int1=a.int2=null,a.body=null,a.constraint=
null,a.listener=null,null!=a.wrap_arbiters&&(a.wrap_arbiters.zpp_inner.inner=null),a.set=null,a.next=Xb.zpp_pool,Xb.zpp_pool=a},continuousCollisions:function(a){var b=2*Math.PI/a;this.bphase.broadphase(this,!1);for(var c=0;1>c&&null!=this.toiEvents.head;){for(var e=null,c=2,f=!1,g=null,h=null,j=this.toiEvents.head;null!=j;){var k=j.elt,m=k.s1.body,o=k.s2.body;if(m.sweepFrozen&&o.sweepFrozen)if(0!=k.toi&&G.testCollide_safe(k.s1,k.s2))k.toi=0;else{j=this.toiEvents.erase(h);k.next=Ea.zpp_pool;Ea.zpp_pool=
k;continue}if(k.frozen1!=m.sweepFrozen||k.frozen2!=o.sweepFrozen)if(k.kinematic){j=this.toiEvents.erase(h);k.next=Ea.zpp_pool;Ea.zpp_pool=k;continue}else if(k.frozen1=m.sweepFrozen,k.frozen2=o.sweepFrozen,k.frozen1&&(m=k.s1,k.s1=k.s2,k.s2=m,k.frozen1=!1,k.frozen2=!0),$b.staticSweep(k,a,0,q.collisionSlopCCD),0>k.toi){j=this.toiEvents.erase(h);k.next=Ea.zpp_pool;Ea.zpp_pool=k;continue}if(0<=k.toi&&(k.toi<c||!f&&k.kinematic))e=k,c=k.toi,f=k.kinematic,g=h;h=j;j=j.next}if(null==e)break;this.toiEvents.erase(g);
c=e.toi;f=e.s1.body;g=e.s2.body;f.sweepFrozen||(f.sweepIntegrate(c*a),f.sweepValidate(e.s1));g.sweepFrozen||(g.sweepIntegrate(c*a),g.sweepValidate(e.s2));h=this.narrowPhase(e.s1,e.s2,!0,e.arbiter,!0);null==h?null!=e.arbiter&&null!=e.arbiter.pair&&(e.arbiter.pair.arb=null,e.arbiter.pair=null):!this.presteparb(h,a,!0)&&h.type==Z.COL&&h.active&&0!=(h.immState&i.id_ImmState_ACCEPT)&&(h.colarb.warmStart(),h.colarb.applyImpulseVel(),h.colarb.applyImpulseVel(),h.colarb.applyImpulseVel(),h.colarb.applyImpulseVel(),
f.sweep_angvel=f.angvel%b,g.sweep_angvel=g.angvel%b);null!=h&&h.active&&0!=(h.immState&i.id_ImmState_ACCEPT)&&h.type==Z.COL&&(!f.sweepFrozen&&f.type!=i.id_BodyType_KINEMATIC&&(f.sweepFrozen=!0,f.angvel=e.failed?f.sweep_angvel=0:e.slipped?f.sweep_angvel*=q.angularCCDSlipScale:f.sweep_angvel),!g.sweepFrozen&&g.type!=i.id_BodyType_KINEMATIC&&(g.sweepFrozen=!0,g.angvel=e.failed?g.sweep_angvel=0:e.slipped?g.sweep_angvel*=q.angularCCDSlipScale:g.sweep_angvel))}for(;null!=this.toiEvents.head;)b=this.toiEvents.pop_unsafe(),
b.next=Ea.zpp_pool,Ea.zpp_pool=b;for(b=this.kinematics.head;null!=b;)e=b.elt,e.sweepIntegrate(a),e.sweepTime=0,b=b.next;for(b=this.live.head;null!=b;)e=b.elt,e.sweepFrozen||e.sweepIntegrate(a),e.sweepTime=0,b=b.next},continuousEvent:function(a,b,c,e){if(a.body.sweepFrozen&&b.body.sweepFrozen||a.body.disableCCD||b.body.disableCCD||null!=e&&null==e.colarb||0>=this.interactionType(a,b,a.body,b.body))return e;var f=a.body,g=b.body;if(c||f.bullet||g.bullet){var h;null==Ea.zpp_pool?h=new Ea:(h=Ea.zpp_pool,
Ea.zpp_pool=h.next,h.next=null);h.failed=!1;h.s1=h.s2=null;h.arbiter=null;f=f.type==i.id_BodyType_KINEMATIC||g.type==i.id_BodyType_KINEMATIC;c&&!f?(a.body.type!=i.id_BodyType_DYNAMIC?(h.s2=a,h.s1=b):(h.s1=a,h.s2=b),h.kinematic=!1,$b.staticSweep(h,this.pre_dt,0,q.collisionSlopCCD)):(h.s1=a,h.s2=b,h.kinematic=f,h.s1.body.sweepFrozen||h.s2.body.sweepFrozen?(h.s1.body.sweepFrozen&&(a=h.s1,h.s1=h.s2,h.s2=a,h.frozen1=!1,h.frozen2=!0),$b.staticSweep(h,this.pre_dt,0,q.collisionSlopCCD)):$b.dynamicSweep(h,
this.pre_dt,0,q.collisionSlopCCD));c&&0>h.toi||h.failed?(c=h,c.next=Ea.zpp_pool,Ea.zpp_pool=c):(this.toiEvents.add(h),h.frozen1=h.s1.body.sweepFrozen,h.frozen2=h.s2.body.sweepFrozen,h.arbiter=null!=e?e.colarb:null)}return e},bodyCbWake:function(a){if(a.type==i.id_BodyType_DYNAMIC&&null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==i.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=i.id_CbEvent_WAKE,c.body=a);b=b.next}else a.component.woken=!0},bodyCbSleep:function(a){if(a.type==
i.id_BodyType_DYNAMIC&&null!=a.cbSet)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==i.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=i.id_CbEvent_SLEEP,c.body=a);b=b.next}},constraintCbWake:function(a){if(null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==i.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=i.id_CbEvent_WAKE,c.constraint=a);b=b.next}else a.component.woken=!0},constraintCbSleep:function(a){if(null!=a.cbSet)for(var b=
a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==i.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=i.id_CbEvent_SLEEP,c.constraint=a);b=b.next}},constraintCbBreak:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==i.id_CbEvent_BREAK&&(c=this.push_callback(c),c.event=i.id_CbEvent_BREAK,c.constraint=a);b=b.next}},nullListenerType:function(a,b){for(var c=new Zc,e=a.interactors.head;null!=e;)c.add(e.elt),e=e.next;if(a!=b)for(e=b.interactors.head;null!=
e;)c.add(e.elt),e=e.next;for(;null!=c.head;)if(e=c.pop_unsafe(),null!=e.icompound){for(var e=e.icompound,f=e.bodies.head;null!=f;)c.add(f.elt),f=f.next;for(e=e.compounds.head;null!=e;)c.add(e.elt),e=e.next}else{f=null!=e.ibody?e.ibody:e.ishape.body;e=null!=e.ishape?e.ishape:null;for(f=f.arbiters.head;null!=f;){var g=f.elt;if(0!=g.present&&(null==e||g.ws1==e||g.ws2==e)){this.MRCA_chains(g.ws1,g.ws2);for(g=this.mrca1.head;null!=g;){var h=g.elt;if(!(h.cbSet!=a&&h.cbSet!=b))for(var i=this.mrca2.head;null!=
i;){var j=i.elt;if(!(h.cbSet==a&&j.cbSet!=b||h.cbSet==b&&j.cbSet!=a))if(j=ta.get(h,j),null!=j){for(;null!=j.arbiters.head;)j.arbiters.pop_unsafe().present--;this.remove_callbackset(j)}i=i.next}g=g.next}}f=f.next}}},nullInteractorType:function(a,b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,e=c.bodies.head;null!=e;)this.nullInteractorType(e.elt,b),e=e.next;for(c=c.compounds.head;null!=c;)this.nullInteractorType(c.elt,b),c=c.next}else{e=null!=a.ibody?a.ibody:a.ishape.body;c=null!=a.ishape?
a.ishape:null;for(e=e.arbiters.head;null!=e;){var f=e.elt;if(0!=f.present&&(null==c||f.ws1==c||f.ws2==c)){this.MRCA_chains(f.ws1,f.ws2);for(var g=this.mrca1.head;null!=g;){for(var h=g.elt,i=this.mrca2.head;null!=i;){var j=i.elt;h!=b&&j!=b||(j=ta.get(h,j),null!=j&&(f.present--,j.remove_arb(f),null==j.arbiters.head&&this.remove_callbackset(j)));i=i.next}g=g.next}}e=e.next}}},freshListenerType:function(a,b){for(var c=new Zc,e=a.interactors.head;null!=e;)c.add(e.elt),e=e.next;if(a!=b)for(e=b.interactors.head;null!=
e;)c.add(e.elt),e=e.next;for(;null!=c.head;)if(e=c.pop_unsafe(),null!=e.icompound){for(var e=e.icompound,f=e.bodies.head;null!=f;)c.add(f.elt),f=f.next;for(e=e.compounds.head;null!=e;)c.add(e.elt),e=e.next}else{f=null!=e.ibody?e.ibody:e.ishape.body;e=null!=e.ishape?e.ishape:null;for(f=f.arbiters.head;null!=f;){var g=f.elt;if(g.presentable&&(null==e||g.ws1==e||g.ws2==e)){this.MRCA_chains(g.ws1,g.ws2);for(var h=this.mrca1.head;null!=h;){var i=h.elt;if(!(i.cbSet!=a&&i.cbSet!=b))for(var j=this.mrca2.head;null!=
j;){var k=j.elt;if(!(i.cbSet==a&&k.cbSet!=b||i.cbSet==b&&k.cbSet!=a)){var m=ta.get(i,k);null==m&&(m=pb.get(i,k),this.add_callbackset(m));if(k=!m.arbiters.inlined_has(g))m.arbiters.inlined_add(g),k=!0;k&&g.present++}j=j.next}h=h.next}}f=f.next}}},freshInteractorType:function(a,b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,e=c.bodies.head;null!=e;)this.freshInteractorType(e.elt,b),e=e.next;for(c=c.compounds.head;null!=c;)this.freshInteractorType(c.elt,b),c=c.next}else{e=null!=a.ibody?
a.ibody:a.ishape.body;c=null!=a.ishape?a.ishape:null;for(e=e.arbiters.head;null!=e;){var f=e.elt;if(f.presentable&&(null==c||f.ws1==c||f.ws2==c)){this.MRCA_chains(f.ws1,f.ws2);for(var g=this.mrca1.head;null!=g;){for(var h=g.elt,i=this.mrca2.head;null!=i;){var j=i.elt;if(!(h!=b&&j!=b)){var k=h.cbSet,m=j.cbSet;k.validate();m.validate();if(!k.manager.pair(k,m).empty_intersection()){k=ta.get(h,j);null==k&&(k=pb.get(h,j),this.add_callbackset(k));if(j=!k.arbiters.inlined_has(f))k.arbiters.inlined_add(f),
j=!0;j&&f.present++}}i=i.next}g=g.next}}e=e.next}}},wakeCompound:function(a){for(var b=a.bodies.head;null!=b;){var c=b.elt;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==i.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1));b=b.next}for(b=a.constraints.head;null!=b;)this.wake_constraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.wakeCompound(a.elt),a=a.next},wakeIsland:function(a){for(;null!=a.comps.head;){var b=a.comps.pop_unsafe();
b.waket=this.stamp+(this.midstep?0:1);if(b.isBody){var c=b.body;this.live.add(c);for(var e=c.arbiters.head;null!=e;){var f=e.elt;f.sleeping&&(f.sleeping=!1,f.up_stamp+=this.stamp-f.sleep_stamp,f.type==Z.COL?(f=f.colarb,f.stat?this.c_arbiters_true.inlined_add(f):this.c_arbiters_false.inlined_add(f)):f.type==Z.FLUID?this.f_arbiters.inlined_add(f.fluidarb):this.s_arbiters.inlined_add(f.sensorarb));e=e.next}this.bodyCbWake(c);b.sleeping=!1;b.island=null;b.parent=b;b.rank=0;if(c.type!=i.id_BodyType_STATIC)for(b=
c.shapes.head;null!=b;)c=b.elt,null!=c.node&&this.bphase.sync(c),b=b.next}else c=b.constraint,this.live_constraints.inlined_add(c),this.constraintCbWake(c),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0}a.next=pc.zpp_pool;pc.zpp_pool=a},non_inlined_wake:function(a,b){null==b&&(b=!1);a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==i.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,b))},really_wake:function(a,b){null==b&&(b=!1);if(null==a.component.island){a.component.sleeping=
!1;a.type==i.id_BodyType_KINEMATIC||a.type==i.id_BodyType_STATIC?this.staticsleep.inlined_add(a):this.live.inlined_add(a);for(var c=a.constraints.head;null!=c;){var e=c.elt;e.space==this&&this.wake_constraint(e);c=c.next}for(c=a.arbiters.head;null!=c;){e=c.elt;if(e.sleeping)if(e.sleeping=!1,e.up_stamp+=this.stamp+(this.midstep?0:1)-e.sleep_stamp,e.type==Z.COL){var f=e.colarb;f.stat?this.c_arbiters_true.inlined_add(f):this.c_arbiters_false.inlined_add(f)}else e.type==Z.FLUID?this.f_arbiters.inlined_add(e.fluidarb):
this.s_arbiters.inlined_add(e.sensorarb);e.type!=Z.SENSOR&&!e.cleared&&e.up_stamp>=this.stamp&&0!=(e.immState&i.id_ImmState_ACCEPT)&&(e.b1.type==i.id_BodyType_DYNAMIC&&e.b1.component.sleeping&&(f=e.b1,f.world||(f.component.waket=this.stamp+(this.midstep?0:1),f.type==i.id_BodyType_KINEMATIC&&(f.kinematicDelaySleep=!0),f.component.sleeping&&this.really_wake(f,!1))),e.b2.type==i.id_BodyType_DYNAMIC&&e.b2.component.sleeping&&(e=e.b2,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.type==i.id_BodyType_KINEMATIC&&
(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))));c=c.next}!b&&a.type==i.id_BodyType_DYNAMIC&&this.bodyCbWake(a);if(!b&&!this.bphase.is_sweep&&a.type!=i.id_BodyType_STATIC)for(c=a.shapes.head;null!=c;)e=c.elt,null!=e.node&&this.bphase.sync(e),c=c.next}else this.wakeIsland(a.component.island)},wake_constraint:function(a,b){null==b&&(b=!1);return a.active&&(a.component.waket=this.stamp+(this.midstep?0:1),a.component.sleeping)?(null==a.component.island?(a.component.sleeping=
!1,this.live_constraints.inlined_add(a),a.wake_connected(),b||this.constraintCbWake(a)):this.wakeIsland(a.component.island),!0):!1},doForests:function(a){for(var b=this.c_arbiters_false.head;null!=b;){var c=b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&i.id_ImmState_ACCEPT)&&c.b1.type==i.id_BodyType_DYNAMIC&&c.b2.type==i.id_BodyType_DYNAMIC){var e;if(c.b1.component==c.b1.component.parent)e=c.b1.component;else{e=c.b1.component;for(var f=null;e!=e.parent;){var g=e.parent;e.parent=f;f=
e;e=g}for(;null!=f;)g=f.parent,f.parent=e,f=g}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=c.b2.component;for(f=null;c!=c.parent;)g=c.parent,c.parent=f,f=c,c=g;for(;null!=f;)g=f.parent,f.parent=c,f=g}e!=c&&(e.rank<c.rank?e.parent=c:e.rank>c.rank?c.parent=e:(c.parent=e,e.rank++))}b=b.next}for(b=this.f_arbiters.head;null!=b;){c=b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&i.id_ImmState_ACCEPT)&&c.b1.type==i.id_BodyType_DYNAMIC&&c.b2.type==i.id_BodyType_DYNAMIC){if(c.b1.component==
c.b1.component.parent)e=c.b1.component;else{e=c.b1.component;for(f=null;e!=e.parent;)g=e.parent,e.parent=f,f=e,e=g;for(;null!=f;)g=f.parent,f.parent=e,f=g}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=c.b2.component;for(f=null;c!=c.parent;)g=c.parent,c.parent=f,f=c,c=g;for(;null!=f;)g=f.parent,f.parent=c,f=g}e!=c&&(e.rank<c.rank?e.parent=c:e.rank>c.rank?c.parent=e:(c.parent=e,e.rank++))}b=b.next}for(b=this.live_constraints.head;null!=b;)b.elt.forest(),b=b.next;for(;null!=this.live.head;){e=
this.live.inlined_pop_unsafe();b=e.component;if(b==b.parent)c=b;else{c=b;for(f=null;c!=c.parent;)g=c.parent,c.parent=f,f=c,c=g;for(;null!=f;)g=f.parent,f.parent=c,f=g}null==c.island&&(null==pc.zpp_pool?c.island=new pc:(c.island=pc.zpp_pool,pc.zpp_pool=c.island.next,c.island.next=null),c.island.waket=0,this.islands.inlined_add(c.island),c.island.sleep=!0);b.island=c.island;b.island.comps.inlined_add(b);e=e.atRest(a);b.island.sleep=b.island.sleep&&e;b.waket>b.island.waket&&(b.island.waket=b.waket)}for(;null!=
this.live_constraints.head;){a=this.live_constraints.inlined_pop_unsafe().component;if(a==a.parent)b=a;else{b=a;for(e=null;b!=b.parent;)c=b.parent,b.parent=e,e=b,b=c;for(;null!=e;)c=e.parent,e.parent=b,e=c}a.island=b.island;a.island.comps.inlined_add(a);a.waket>a.island.waket&&(a.island.waket=a.waket)}for(;null!=this.islands.next;)if(a=this.islands.inlined_pop_unsafe(),a.sleep)for(a=a.comps.head;null!=a;){e=a.elt;if(e.isBody){b=e.body;b.velx=0;b.vely=0;b.angvel=0;e.sleeping=!0;for(e=b.shapes.head;null!=
e;)this.bphase.sync(e.elt),e=e.next;this.bodyCbSleep(b)}else this.constraintCbSleep(e.constraint),e.sleeping=!0;a=a.next}else{for(;null!=a.comps.head;)b=a.comps.inlined_pop_unsafe(),b.waket=a.waket,b.isBody?this.live.inlined_add(b.body):this.live_constraints.inlined_add(b.constraint),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0;a.next=pc.zpp_pool;pc.zpp_pool=a}},sleepArbiters:function(){var a=null,b=this.c_arbiters_true,c=b.head,e=null!=this.c_arbiters_false;e&&null==c&&(e=!1,c=this.c_arbiters_false.head,
b=this.c_arbiters_false,a=null);for(;null!=c;){var f=c.elt;f.b1.component.sleeping&&f.b2.component.sleeping?(f.sleep_stamp=this.stamp,f.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next);e&&null==c&&(e=!1,c=this.c_arbiters_false.head,b=this.c_arbiters_false,a=null)}a=null;b=this.f_arbiters;c=b.head;e=!1;for(;null!=c;)f=c.elt,f.b1.component.sleeping&&f.b2.component.sleeping?(f.sleep_stamp=this.stamp,f.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),e&&null==c&&(e=!1,c=null.begin(),a=b=null);a=null;
b=this.s_arbiters;c=b.head;e=!1;for(;null!=c;)f=c.elt,f.b1.component.sleeping&&f.b2.component.sleeping?(f.sleep_stamp=this.stamp,f.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),e&&null==c&&(e=!1,c=null.begin(),a=b=null)},static_validation:function(a){null!=a.shapes.head&&a.validate_aabb();a.validate_mass();a.validate_inertia();for(var b=a.shapes.head;null!=b;){var c=b.elt;c.type==i.id_ShapeType_POLYGON&&(c.polygon.splice_collinear(),c.polygon.validate_gaxi());b=b.next}a.sweepFrozen=!0},validation:function(){this.cbsets.validate();
for(var a=this.live.head;null!=a;){var b=a.elt;b.sweepRadius=0;for(var c=b.shapes.head;null!=c;){var e=c.elt;e.type==i.id_ShapeType_POLYGON&&(e.polygon.splice_collinear(),e.polygon.validate_gaxi());e.validate_sweepRadius();e.sweepRadius>b.sweepRadius&&(b.sweepRadius=e.sweepRadius);c=c.next}b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);if(b.component.woken&&
null!=b.cbSet)for(c=b.cbSet.bodylisteners.head;null!=c;)e=c.elt,e.event==i.id_CbEvent_WAKE&&(e=this.push_callback(e),e.event=i.id_CbEvent_WAKE,e.body=b),c=c.next;b.component.woken=!1;for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.kinematics.head;null!=a;){b=a.elt;b.sweepRadius=0;for(c=b.shapes.head;null!=c;)e=c.elt,e.type==i.id_ShapeType_POLYGON&&(e.polygon.splice_collinear(),e.polygon.validate_gaxi()),e.validate_sweepRadius(),e.sweepRadius>b.sweepRadius&&(b.sweepRadius=
e.sweepRadius),c=c.next;b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.live_constraints.head;null!=a;){b=a.elt;if(b.active){if(b.component.woken&&null!=b.cbSet)for(c=b.cbSet.conlisteners.head;null!=c;)e=c.elt,e.event==i.id_CbEvent_WAKE&&(e=this.push_callback(e),
e.event=i.id_CbEvent_WAKE,e.constraint=b),c=c.next;b.component.woken=!1}a=a.next}},updateVel:function(a){for(var b=1-a*this.global_lin_drag,c=1-a*this.global_ang_drag,e=this.live.head;null!=e;){var f=e.elt;if(0!=f.smass){var g=a*f.imass;f.velx=b*f.velx+(f.forcex+this.gravityx*f.gravMass)*g;f.vely=b*f.vely+(f.forcey+this.gravityy*f.gravMass)*g}if(0!=f.sinertia){var h=g=0,g=f.worldCOMx-f.posx,h=f.worldCOMy-f.posy;f.angvel=c*f.angvel+(f.torque+(this.gravityy*g-this.gravityx*h)*f.gravMass)*a*f.iinertia}e=
e.next}},updatePos:function(a){for(var b=2*Math.PI/a,c=this.live.head;null!=c;){var e=c.elt;e.pre_posx=e.posx;e.pre_posy=e.posy;e.pre_rot=e.rot;e.sweepTime=0;e.sweep_angvel=e.angvel%b;e.sweepIntegrate(a);if(e.disableCCD)e.sweepFrozen=!0,e.bullet=!1;else{var f=q.staticCCDLinearThreshold*e.sweepRadius,g=q.staticCCDAngularThreshold;if((e.velx*e.velx+e.vely*e.vely)*a*a>f*f||e.angvel*e.angvel*a*a>g*g||e.type==i.id_BodyType_KINEMATIC){f=e.sweep_angvel;0>f&&(f=-f);for(var g=1/f,h=e.shapes.head;null!=h;){var j=
h.elt,k=j.aabb,m=k.minx,o=k.miny,r=k.maxx,s=k.maxy,t=0.008333333333333333*f*a*j.sweepCoef|0;8<t&&(t=8);var v=f*a/t;e.sweepIntegrate(a);j.type==i.id_ShapeType_CIRCLE?j.circle._force_validate_aabb():j.polygon._force_validate_aabb();m<k.minx?k.minx=m:m=k.minx;o<k.miny?k.miny=o:o=k.miny;r>k.maxx?k.maxx=r:r=k.maxx;s>k.maxy?k.maxy=s:s=k.maxy;for(var w=1;w<t;){var x=w++;e.sweepIntegrate(v*x*g);j.type==i.id_ShapeType_CIRCLE?j.circle._force_validate_aabb():j.polygon._force_validate_aabb();m<k.minx?k.minx=
m:m=k.minx;o<k.miny?k.miny=o:o=k.miny;r>k.maxx?k.maxx=r:r=k.maxx;s>k.maxy?k.maxy=s:s=k.maxy}this.bphase.sync(j);h=h.next}e.sweepFrozen=!1;if(e.type==i.id_BodyType_DYNAMIC&&e.bulletEnabled&&(f=q.bulletCCDLinearThreshold*e.sweepRadius,g=q.bulletCCDAngularThreshold,(e.velx*e.velx+e.vely*e.vely)*a*a>f*f||e.angvel*e.angvel*a*a>g*g))e.bullet=!0}else e.sweepFrozen=!0,e.bullet=!1}c=c.next}for(c=this.kinematics.head;null!=c;){e=c.elt;e.pre_posx=e.posx;e.pre_posy=e.posy;e.pre_rot=e.rot;e.sweepTime=0;e.sweep_angvel=
e.angvel%b;e.sweepIntegrate(a);if(e.disableCCD)e.sweepFrozen=!0,e.bullet=!1;else if(f=q.staticCCDLinearThreshold*e.sweepRadius,g=q.staticCCDAngularThreshold,(e.velx*e.velx+e.vely*e.vely)*a*a>f*f||e.angvel*e.angvel*a*a>g*g||e.type==i.id_BodyType_KINEMATIC){f=e.sweep_angvel;0>f&&(f=-f);g=1/f;for(h=e.shapes.head;null!=h;){j=h.elt;k=j.aabb;m=k.minx;o=k.miny;r=k.maxx;s=k.maxy;t=0.008333333333333333*f*a*j.sweepCoef|0;8<t&&(t=8);v=f*a/t;e.sweepIntegrate(a);j.type==i.id_ShapeType_CIRCLE?j.circle._force_validate_aabb():
j.polygon._force_validate_aabb();m<k.minx?k.minx=m:m=k.minx;o<k.miny?k.miny=o:o=k.miny;r>k.maxx?k.maxx=r:r=k.maxx;s>k.maxy?k.maxy=s:s=k.maxy;for(w=1;w<t;)x=w++,e.sweepIntegrate(v*x*g),j.type==i.id_ShapeType_CIRCLE?j.circle._force_validate_aabb():j.polygon._force_validate_aabb(),m<k.minx?k.minx=m:m=k.minx,o<k.miny?k.miny=o:o=k.miny,r>k.maxx?k.maxx=r:r=k.maxx,s>k.maxy?k.maxy=s:s=k.maxy;this.bphase.sync(j);h=h.next}e.sweepFrozen=!1;if(e.type==i.id_BodyType_DYNAMIC&&e.bulletEnabled&&(f=q.bulletCCDLinearThreshold*
e.sweepRadius,g=q.bulletCCDAngularThreshold,(e.velx*e.velx+e.vely*e.vely)*a*a>f*f||e.angvel*e.angvel*a*a>g*g))e.bullet=!0}else e.sweepFrozen=!0,e.bullet=!1;c=c.next}},presteparb:function(a,b,c){null==c&&(c=!1);var e=this;if(!a.cleared&&a.b1.component.sleeping&&a.b2.component.sleeping)return a.sleep_stamp=this.stamp,a.sleeping=!0;if(!a.cleared||0!=a.present||a.intchange){var f=!c&&a.up_stamp==this.stamp-1&&!a.cleared&&!a.intchange,c=a.fresh&&!a.cleared&&!a.intchange;f&&(a.endGenerated=this.stamp);
if(c||f||a.cleared||a.intchange){this.inlined_MRCA_chains(a.ws1,a.ws2);for(f=this.mrca1.head;null!=f;){for(var g=f.elt,h=this.mrca2.head;null!=h;){var j=h.elt,k=g.cbSet,m=j.cbSet;if(!k.manager.pair(k,m).empty_intersection()){var o=[ta.get(g,j)];if(c||a.intchange){null==o[0]&&(o[0]=pb.get(g,j),this.add_callbackset(o[0]));k.manager.pair(k,m).forall(i.id_CbEvent_BEGIN,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var d=e.push_callback(c);d.event=i.id_CbEvent_BEGIN;ta.int_callback(b[0],
c,d);d.set=b[0]}}}(o));if(j=!o[0].arbiters.inlined_has(a))o[0].arbiters.inlined_add(a),j=!0;j&&a.present++}else a.present--,o[0].remove_arb(a),k.manager.pair(k,m).forall(i.id_CbEvent_END,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var d=e.push_callback(c);d.event=i.id_CbEvent_END;ta.int_callback(b[0],c,d);d.set=b[0]}}}(o)),null==o[0].arbiters.head&&this.remove_callbackset(o[0])}h=h.next}f=f.next}}a.fresh=!1;a.intchange=!1}if(a.cleared||a.up_stamp+(a.type==Z.COL?
q.arbiterExpirationDelay:0)<this.stamp)return a.type==Z.SENSOR?a.sensorarb.retire():a.type==Z.FLUID?a.fluidarb.retire():a.colarb.retire(),!0;c=a.active;a.active=a.presentable=a.up_stamp==this.stamp;0!=(a.immState&i.id_ImmState_ACCEPT)?a.active&&a.type!=Z.SENSOR&&(null!=a.colarb?a.colarb.preStep(b)&&(a.active=!1):a.fluidarb.preStep(this,b)):null!=a.colarb&&a.colarb.cleanupContacts()&&(a.active=!1);c!=a.active&&(a.b1.arbiters.modified=!0,a.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=
!0,this.s_arbiters.modified=this.f_arbiters.modified=!0);return!1},prestep:function(a){for(var b=null,c=this.live_constraints.head;null!=c;){var e=c.elt;e.preStep(a)?(c=this.live_constraints.erase(b),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(b=c,c=c.next)}var b=null,c=this.c_arbiters_true,e=c.head,f=null!=
this.c_arbiters_false;f&&null==e&&(f=!1,e=this.c_arbiters_false.head,c=this.c_arbiters_false,b=null);for(;null!=e;)this.presteparb(e.elt,a)?e=c.inlined_erase(b):(b=e,e=e.next),f&&null==e&&(f=!1,e=this.c_arbiters_false.head,c=this.c_arbiters_false,b=null);b=null;c=this.f_arbiters;e=c.head;f=!1;for(;null!=e;)this.presteparb(e.elt,a)?e=c.inlined_erase(b):(b=e,e=e.next),f&&null==e&&(f=!1,e=null.begin(),b=c=null);b=null;c=this.s_arbiters;e=c.head;f=!1;for(;null!=e;)this.presteparb(e.elt,a)?e=c.inlined_erase(b):
(b=e,e=e.next),f&&null==e&&(f=!1,e=null.begin(),b=c=null)},warmStart:function(){for(var a=this.f_arbiters.head;null!=a;){var b=a.elt;b.active&&0!=(b.immState&i.id_ImmState_ACCEPT)&&b.warmStart();a=a.next}a=this.c_arbiters_false.head;b=!0;null==a&&(a=this.c_arbiters_true.head,b=!1);for(;null!=a;){var c=a.elt;c.active&&0!=(c.immState&i.id_ImmState_ACCEPT)&&c.warmStart();a=a.next;b&&null==a&&(a=this.c_arbiters_true.head,b=!1)}for(a=this.live_constraints.head;null!=a;)a.elt.warmStart(),a=a.next},iterateVel:function(a){for(var b=
0;b<a;){b++;for(var c=this.f_arbiters.head;null!=c;){var e=c.elt;e.active&&0!=(e.immState&i.id_ImmState_ACCEPT)&&e.applyImpulseVel();c=c.next}c=null;for(e=this.live_constraints.head;null!=e;){var f=e.elt;f.applyImpulseVel()?(e=this.live_constraints.erase(c),f.broken(),this.constraintCbBreak(f),f.removeOnBreak?(f.component.sleeping=!0,this.midstep=!1,null!=f.compound?f.compound.wrap_constraints.remove(f.outer):this.wrap_constraints.remove(f.outer),this.midstep=!0):f.active=!1,f.clearcache()):(c=e,
e=e.next)}c=this.c_arbiters_false.head;e=!0;null==c&&(c=this.c_arbiters_true.head,e=!1);for(;null!=c;)f=c.elt,f.active&&0!=(f.immState&i.id_ImmState_ACCEPT)&&f.applyImpulseVel(),c=c.next,e&&null==c&&(c=this.c_arbiters_true.head,e=!1)}},iteratePos:function(a){for(var b=0;b<a;){b++;for(var c=null,e=this.live_constraints.head;null!=e;){var f=e.elt;!f.__velocity&&f.stiff&&f.applyImpulsePos()?(e=this.live_constraints.erase(c),f.broken(),this.constraintCbBreak(f),f.removeOnBreak?(f.component.sleeping=!0,
this.midstep=!1,null!=f.compound?f.compound.wrap_constraints.remove(f.outer):this.wrap_constraints.remove(f.outer),this.midstep=!0):f.active=!1,f.clearcache()):(c=e,e=e.next)}c=this.c_arbiters_false.head;e=!0;null==c&&(c=this.c_arbiters_true.head,e=!1);for(;null!=c;)f=c.elt,f.active&&0!=(f.immState&i.id_ImmState_ACCEPT)&&f.applyImpulsePos(),c=c.next,e&&null==c&&(c=this.c_arbiters_true.head,e=!1)}},group_ignore:function(a,b){var c=a.lookup_group();if(null==c)return!1;var e=b.lookup_group();if(null==
e)return!1;for(var f=!1;null!=c&&null!=e;){if(c==e){f=c.ignore;break}c.depth<e.depth?e=e.group:c=c.group}return f},interactionType:function(a,b,c,e){var f;f=!1;for(var g=c.constraints.head;null!=g;){var h=g.elt;if(h.ignore&&h.pair_exists(c.id,e.id)){f=!0;break}g=g.next}return!f&&!this.group_ignore(a,b)?(a.sensorEnabled||b.sensorEnabled)&&a.filter.shouldSense(b.filter)?2:(a.fluidEnabled||b.fluidEnabled)&&a.filter.shouldFlow(b.filter)&&!(0==c.imass&&0==e.imass&&0==c.iinertia&&0==e.iinertia)?0:a.filter.shouldCollide(b.filter)&&
!(0==c.imass&&0==e.imass&&0==c.iinertia&&0==e.iinertia)?1:-1:-1},narrowPhase:function(a,b,c,e,f){var g=this,h=null,j=a.body,k=b.body,m=this.interactionType(a,b,j,k);if(-1!=m){var o,q;a.type>b.type?(o=b,q=a):a.type==b.type?a.id<b.id?(o=a,q=b):(q=a,o=b):(o=a,q=b);var r=o==b;if(0==m){var s;if(null==e){for(var t=null,v=(j.arbiters.length<k.arbiters.length?j:k).arbiters.head;null!=v;){var w=v.elt;if(w.id==o.id&&w.di==q.id){t=w;break}v=v.next}s=t}else s=e;var x=null==s,y,z=!1;x?(null==Ka.zpp_pool?y=new Ka:
(y=Ka.zpp_pool,Ka.zpp_pool=y.next,y.next=null),null):null==s.fluidarb?(s.cleared=!0,s.b1.arbiters.inlined_try_remove(s),s.b2.arbiters.inlined_try_remove(s),null!=s.pair&&(s.pair.arb=null,s.pair=null),s.active=!1,this.f_arbiters.modified=!0,null==Ka.zpp_pool?y=new Ka:(y=Ka.zpp_pool,Ka.zpp_pool=y.next,y.next=null),null,z=x=y.intchange=!0):y=s.fluidarb;var A=i.id_InteractionType_FLUID;if(x||y.stamp!=this.stamp||f)if(y.stamp=this.stamp,G.flowCollide(o,q,y)){x?(y.b1=a.body,y.ws1=a,y.b2=b.body,y.ws2=b,
y.id=o.id,y.di=q.id,y.b1.arbiters.inlined_add(y),y.b2.arbiters.inlined_add(y),y.active=!0,y.present=0,y.cleared=!1,y.sleeping=!1,y.fresh=!1,y.presentable=!1,y.nx=0,y.ny=1,y.dampx=0,y.dampy=0,y.adamp=0,this.f_arbiters.inlined_add(y),y.fresh=!z):y.fresh=y.up_stamp<this.stamp-1||y.endGenerated==this.stamp&&f;y.up_stamp=y.stamp;if(y.fresh||0==(y.immState&i.id_ImmState_ALWAYS)){y.immState=i.id_ImmState_ACCEPT;var B=!1;this.inlined_MRCA_chains(y.ws1.id>y.ws2.id?y.ws2:y.ws1,y.ws1.id>y.ws2.id?y.ws1:y.ws2);
for(var C=this.mrca1.head;null!=C;){for(var E=C.elt,F=this.mrca2.head;null!=F;){var I=F.elt,J=E.cbSet,K=I.cbSet;if(!J.manager.pair(J,K).empty_intersection()){var D=null,L=null;this.prelisteners.inlined_clear();J.manager.pair(J,K).forall(i.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&A)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),B=B||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(D=ta.get(E,I),null==D&&(L=pb.get(E,I),this.add_callbackset(L)),null==D||(D.FLUIDstamp!=this.stamp||
f)&&0==(D.FLUIDstate&i.id_ImmState_ALWAYS)){null!=L&&(D=L);if(null!=D)for(var M=this.prelisteners.head;null!=M;)M.elt.itype==i.id_InteractionType_ANY&&(D.COLLISIONstamp=this.stamp,D.SENSORstamp=this.stamp),D.FLUIDstamp=this.stamp,M=M.next;var N=y.active;y.active=!0;this.precb.zpp_inner.pre_arbiter=y;this.precb.zpp_inner.set=D;for(var O=this.prelisteners.head;null!=O;){var P=O.elt;this.precb.zpp_inner.listener=P;ta.int_callback(D,P,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=E!=this.precb.zpp_inner.int1;
var R=P.handlerp(this.precb);if(null!=R){var W=y,Y=R,V;null==i.PreFlag_ACCEPT&&(i.internal=!0,i.PreFlag_ACCEPT=new Ja,i.internal=!1);if(Y==i.PreFlag_ACCEPT)V=i.id_ImmState_ACCEPT|i.id_ImmState_ALWAYS;else{var ea=R,aa;null==i.PreFlag_ACCEPT_ONCE&&(i.internal=!0,i.PreFlag_ACCEPT_ONCE=new Ja,i.internal=!1);if(ea==i.PreFlag_ACCEPT_ONCE)aa=i.id_ImmState_ACCEPT;else{var fa=R;null==i.PreFlag_IGNORE&&(i.internal=!0,i.PreFlag_IGNORE=new Ja,i.internal=!1);aa=fa==i.PreFlag_IGNORE?i.id_ImmState_IGNORE|i.id_ImmState_ALWAYS:
i.id_ImmState_IGNORE}V=aa}W.immState=V}O=O.next}y.active=N;if(null!=D)for(var Z=this.prelisteners.head;null!=Z;)Z.elt.itype==i.id_InteractionType_ANY&&(D.COLLISIONstate=y.immState,D.SENSORstate=y.immState),D.FLUIDstate=y.immState,Z=Z.next}else null==D?0==(y.immState&i.id_ImmState_ALWAYS)&&(y.immState=i.id_ImmState_ACCEPT):y.immState=D.FLUIDstate}F=F.next}C=C.next}if(B&&0==(y.immState&i.id_ImmState_ALWAYS)){if(y.b1.type==i.id_BodyType_DYNAMIC){var X=y.b1;X.world||(X.component.waket=this.stamp+(this.midstep?
0:1),X.type==i.id_BodyType_KINEMATIC&&(X.kinematicDelaySleep=!0),X.component.sleeping&&this.really_wake(X,!1))}if(y.b1.type==i.id_BodyType_DYNAMIC){var ba=y.b2;ba.world||(ba.component.waket=this.stamp+(this.midstep?0:1),ba.type==i.id_BodyType_KINEMATIC&&(ba.kinematicDelaySleep=!0),ba.component.sleeping&&this.really_wake(ba,!1))}}}if(0!=(y.immState&i.id_ImmState_ACCEPT)){if(y.b1.type==i.id_BodyType_DYNAMIC&&y.b1.component.sleeping){var ca=y.b1;ca.world||(ca.component.waket=this.stamp+(this.midstep?
0:1),ca.type==i.id_BodyType_KINEMATIC&&(ca.kinematicDelaySleep=!0),ca.component.sleeping&&this.really_wake(ca,!1))}if(y.b2.type==i.id_BodyType_DYNAMIC&&y.b2.component.sleeping){var da=y.b2;da.world||(da.component.waket=this.stamp+(this.midstep?0:1),da.type==i.id_BodyType_KINEMATIC&&(da.kinematicDelaySleep=!0),da.component.sleeping&&this.really_wake(da,!1))}}y.sleeping&&(y.sleeping=!1,this.f_arbiters.inlined_add(y));h=y}else if(x){var ha=y;ha.next=Ka.zpp_pool;Ka.zpp_pool=ha;h=null}else h=y;else h=
y}else if(1==m){var ga;ga=c?this.c_arbiters_true:this.c_arbiters_false;var S;if(null==e){for(var ka=null,ia=(j.arbiters.length<k.arbiters.length?j:k).arbiters.head;null!=ia;){var ma=ia.elt;if(ma.id==o.id&&ma.di==q.id){ka=ma;break}ia=ia.next}S=ka}else S=e;var ja=null==S,u,oa=!1;ja?(null==vb.zpp_pool?u=new vb:(u=vb.zpp_pool,vb.zpp_pool=u.next,u.next=null),null,u.stat=c):null==S.colarb?(S.cleared=!0,S.b1.arbiters.inlined_try_remove(S),S.b2.arbiters.inlined_try_remove(S),null!=S.pair&&(S.pair.arb=null,
S.pair=null),S.active=!1,this.f_arbiters.modified=!0,null==vb.zpp_pool?u=new vb:(u=vb.zpp_pool,vb.zpp_pool=u.next,u.next=null),null,u.intchange=!0,u.stat=c,oa=ja=!0):(u=S.colarb,r=o!=u.s1,u.stat!=c&&(u.stat=c,u.sleeping||((c?this.c_arbiters_false:this.c_arbiters_true).remove(u),ga.add(u))));var wa=i.id_InteractionType_COLLISION;if(ja||u.stamp!=this.stamp||f)if(u.stamp=this.stamp,G.contactCollide(o,q,u,r)){ja?(u.b1=a.body,u.ws1=a,u.b2=b.body,u.ws2=b,u.id=o.id,u.di=q.id,u.b1.arbiters.inlined_add(u),
u.b2.arbiters.inlined_add(u),u.active=!0,u.present=0,u.cleared=!1,u.sleeping=!1,u.fresh=!1,u.presentable=!1,u.s1=a,u.s2=b,u.userdef_restitution||(u.restitution=u.s1.material.elasticity<=Math.NEGATIVE_INFINITY||u.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:u.s1.material.elasticity>=Math.POSITIVE_INFINITY||u.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(u.s1.material.elasticity+u.s2.material.elasticity)/2,0>u.restitution&&(u.restitution=0),1<u.restitution&&(u.restitution=1)),u.userdef_dyn_fric||
(u.dyn_fric=Math.sqrt(u.s1.material.dynamicFriction*u.s2.material.dynamicFriction)),u.userdef_stat_fric||(u.stat_fric=Math.sqrt(u.s1.material.staticFriction*u.s2.material.staticFriction)),u.userdef_rfric||(u.rfric=Math.sqrt(u.s1.material.rollingFriction*u.s2.material.rollingFriction)),ga.inlined_add(u),u.fresh=!oa):u.fresh=u.up_stamp<this.stamp-1||u.endGenerated==this.stamp&&f;u.up_stamp=u.stamp;if(u.fresh||0==(u.immState&i.id_ImmState_ALWAYS)){u.immState=i.id_ImmState_ACCEPT;var ra=!1;this.inlined_MRCA_chains(u.ws1.id>
u.ws2.id?u.ws2:u.ws1,u.ws1.id>u.ws2.id?u.ws1:u.ws2);for(var pa=this.mrca1.head;null!=pa;){for(var qa=pa.elt,sa=this.mrca2.head;null!=sa;){var ya=sa.elt,ua=qa.cbSet,za=ya.cbSet;if(!ua.manager.pair(ua,za).empty_intersection()){var U=null,va=null;this.prelisteners.inlined_clear();ua.manager.pair(ua,za).forall(i.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&wa)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),ra=ra||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(U=ta.get(qa,ya),null==
U&&(va=pb.get(qa,ya),this.add_callbackset(va)),null==U||(U.COLLISIONstamp!=this.stamp||f)&&0==(U.COLLISIONstate&i.id_ImmState_ALWAYS)){null!=va&&(U=va);if(null!=U)for(var xa=this.prelisteners.head;null!=xa;)xa.elt.itype==i.id_InteractionType_ANY?(U.COLLISIONstamp=this.stamp,U.SENSORstamp=this.stamp,U.FLUIDstamp=this.stamp):U.COLLISIONstamp=this.stamp,xa=xa.next;var Fa=u.active;u.active=!0;u.cleanupContacts();this.precb.zpp_inner.pre_arbiter=u;this.precb.zpp_inner.set=U;for(var Ba=this.prelisteners.head;null!=
Ba;){var Ha=Ba.elt;this.precb.zpp_inner.listener=Ha;ta.int_callback(U,Ha,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=qa!=this.precb.zpp_inner.int1;var Ca=Ha.handlerp(this.precb);if(null!=Ca){var Pa=u,Qa=Ca,La;null==i.PreFlag_ACCEPT&&(i.internal=!0,i.PreFlag_ACCEPT=new Ja,i.internal=!1);if(Qa==i.PreFlag_ACCEPT)La=i.id_ImmState_ACCEPT|i.id_ImmState_ALWAYS;else{var Sa=Ca,Ma;null==i.PreFlag_ACCEPT_ONCE&&(i.internal=!0,i.PreFlag_ACCEPT_ONCE=new Ja,i.internal=!1);if(Sa==i.PreFlag_ACCEPT_ONCE)Ma=
i.id_ImmState_ACCEPT;else{var Ta=Ca;null==i.PreFlag_IGNORE&&(i.internal=!0,i.PreFlag_IGNORE=new Ja,i.internal=!1);Ma=Ta==i.PreFlag_IGNORE?i.id_ImmState_IGNORE|i.id_ImmState_ALWAYS:i.id_ImmState_IGNORE}La=Ma}Pa.immState=La}Ba=Ba.next}u.active=Fa;if(null!=U)for(var Na=this.prelisteners.head;null!=Na;)Na.elt.itype==i.id_InteractionType_ANY?(U.COLLISIONstate=u.immState,U.SENSORstate=u.immState,U.FLUIDstate=u.immState):U.COLLISIONstate=u.immState,Na=Na.next}else null==U?0==(u.immState&i.id_ImmState_ALWAYS)&&
(u.immState=i.id_ImmState_ACCEPT):u.immState=U.COLLISIONstate}sa=sa.next}pa=pa.next}if(ra&&0==(u.immState&i.id_ImmState_ALWAYS)){if(u.b1.type==i.id_BodyType_DYNAMIC){var Da=u.b1;Da.world||(Da.component.waket=this.stamp+(this.midstep?0:1),Da.type==i.id_BodyType_KINEMATIC&&(Da.kinematicDelaySleep=!0),Da.component.sleeping&&this.really_wake(Da,!1))}if(u.b1.type==i.id_BodyType_DYNAMIC){var Ea=u.b2;Ea.world||(Ea.component.waket=this.stamp+(this.midstep?0:1),Ea.type==i.id_BodyType_KINEMATIC&&(Ea.kinematicDelaySleep=
!0),Ea.component.sleeping&&this.really_wake(Ea,!1))}}}if(0!=(u.immState&i.id_ImmState_ACCEPT)){if(u.b1.type==i.id_BodyType_DYNAMIC&&u.b1.component.sleeping){var Ga=u.b1;Ga.world||(Ga.component.waket=this.stamp+(this.midstep?0:1),Ga.type==i.id_BodyType_KINEMATIC&&(Ga.kinematicDelaySleep=!0),Ga.component.sleeping&&this.really_wake(Ga,!1))}if(u.b2.type==i.id_BodyType_DYNAMIC&&u.b2.component.sleeping){var Ia=u.b2;Ia.world||(Ia.component.waket=this.stamp+(this.midstep?0:1),Ia.type==i.id_BodyType_KINEMATIC&&
(Ia.kinematicDelaySleep=!0),Ia.component.sleeping&&this.really_wake(Ia,!1))}}u.sleeping&&(u.sleeping=!1,ga.inlined_add(u));h=u}else if(ja){var Aa=u;Aa.userdef_dyn_fric=!1;Aa.userdef_stat_fric=!1;Aa.userdef_restitution=!1;Aa.userdef_rfric=!1;Aa.__ref_edge1=Aa.__ref_edge2=null;Aa.next=vb.zpp_pool;vb.zpp_pool=Aa;h=null}else h=u;else h=u}else{var na;if(null==e){for(var $a=null,Ra=(j.arbiters.length<k.arbiters.length?j:k).arbiters.head;null!=Ra;){var Ya=Ra.elt;if(Ya.id==o.id&&Ya.di==q.id){$a=Ya;break}Ra=
Ra.next}na=$a}else na=e;var Oa=null==na,H,gb=!1;Oa?(null==Ab.zpp_pool?H=new Ab:(H=Ab.zpp_pool,Ab.zpp_pool=H.next,H.next=null),null):null==na.sensorarb?(na.cleared=!0,na.b1.arbiters.inlined_try_remove(na),na.b2.arbiters.inlined_try_remove(na),null!=na.pair&&(na.pair.arb=null,na.pair=null),na.active=!1,this.f_arbiters.modified=!0,null==Ab.zpp_pool?H=new Ab:(H=Ab.zpp_pool,Ab.zpp_pool=H.next,H.next=null),null,gb=Oa=H.intchange=!0):H=na.sensorarb;var jb=i.id_InteractionType_SENSOR;if(Oa||H.stamp!=this.stamp||
f)if(H.stamp=this.stamp,G.testCollide(o,q)){Oa?(H.b1=a.body,H.ws1=a,H.b2=b.body,H.ws2=b,H.id=o.id,H.di=q.id,H.b1.arbiters.inlined_add(H),H.b2.arbiters.inlined_add(H),H.active=!0,H.present=0,H.cleared=!1,H.sleeping=!1,H.fresh=!1,H.presentable=!1,this.s_arbiters.inlined_add(H),H.fresh=!gb):H.fresh=H.up_stamp<this.stamp-1||H.endGenerated==this.stamp&&f;H.up_stamp=H.stamp;if(H.fresh||0==(H.immState&i.id_ImmState_ALWAYS)){H.immState=i.id_ImmState_ACCEPT;var bb=!1;this.inlined_MRCA_chains(H.ws1.id>H.ws2.id?
H.ws2:H.ws1,H.ws1.id>H.ws2.id?H.ws1:H.ws2);for(var Ua=this.mrca1.head;null!=Ua;){for(var Va=Ua.elt,Xa=this.mrca2.head;null!=Xa;){var eb=Xa.elt,Za=Va.cbSet,lb=eb.cbSet;if(!Za.manager.pair(Za,lb).empty_intersection()){var db=null,ab=null;this.prelisteners.inlined_clear();Za.manager.pair(Za,lb).forall(i.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&jb)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),bb=bb||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(db=ta.get(Va,eb),null==db&&(ab=
pb.get(Va,eb),this.add_callbackset(ab)),null==db||(db.SENSORstamp!=this.stamp||f)&&0==(db.SENSORstate&i.id_ImmState_ALWAYS)){null!=ab&&(db=ab);if(null!=db)for(var fb=this.prelisteners.head;null!=fb;)fb.elt.itype==i.id_InteractionType_ANY?(db.COLLISIONstamp=this.stamp,db.SENSORstamp=this.stamp,db.FLUIDstamp=this.stamp):db.SENSORstamp=this.stamp,fb=fb.next;var qb=H.active;H.active=!0;this.precb.zpp_inner.pre_arbiter=H;this.precb.zpp_inner.set=db;for(var hb=this.prelisteners.head;null!=hb;){var kb=hb.elt;
this.precb.zpp_inner.listener=kb;ta.int_callback(db,kb,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=Va!=this.precb.zpp_inner.int1;var ib=kb.handlerp(this.precb);if(null!=ib){var rb=H,sb=ib,mb;null==i.PreFlag_ACCEPT&&(i.internal=!0,i.PreFlag_ACCEPT=new Ja,i.internal=!1);if(sb==i.PreFlag_ACCEPT)mb=i.id_ImmState_ACCEPT|i.id_ImmState_ALWAYS;else{var tb=ib,nb;null==i.PreFlag_ACCEPT_ONCE&&(i.internal=!0,i.PreFlag_ACCEPT_ONCE=new Ja,i.internal=!1);if(tb==i.PreFlag_ACCEPT_ONCE)nb=i.id_ImmState_ACCEPT;
else{var xb=ib;null==i.PreFlag_IGNORE&&(i.internal=!0,i.PreFlag_IGNORE=new Ja,i.internal=!1);nb=xb==i.PreFlag_IGNORE?i.id_ImmState_IGNORE|i.id_ImmState_ALWAYS:i.id_ImmState_IGNORE}mb=nb}rb.immState=mb}hb=hb.next}H.active=qb;if(null!=db)for(var ub=this.prelisteners.head;null!=ub;)ub.elt.itype==i.id_InteractionType_ANY?(db.COLLISIONstate=H.immState,db.SENSORstate=H.immState,db.FLUIDstate=H.immState):db.SENSORstate=H.immState,ub=ub.next}else null==db?0==(H.immState&i.id_ImmState_ALWAYS)&&(H.immState=
i.id_ImmState_ACCEPT):H.immState=db.SENSORstate}Xa=Xa.next}Ua=Ua.next}if(bb&&0==(H.immState&i.id_ImmState_ALWAYS)){if(H.b1.type!=i.id_BodyType_STATIC){var Wa=H.b1;Wa.world||(Wa.component.waket=this.stamp+(this.midstep?0:1),Wa.type==i.id_BodyType_KINEMATIC&&(Wa.kinematicDelaySleep=!0),Wa.component.sleeping&&this.really_wake(Wa,!1))}if(H.b2.type!=i.id_BodyType_STATIC){var ob=H.b2;ob.world||(ob.component.waket=this.stamp+(this.midstep?0:1),ob.type==i.id_BodyType_KINEMATIC&&(ob.kinematicDelaySleep=!0),
ob.component.sleeping&&this.really_wake(ob,!1))}}}H.sleeping&&(H.sleeping=!1,this.s_arbiters.inlined_add(H));h=H}else if(Oa){var wb=H;wb.next=Ab.zpp_pool;Ab.zpp_pool=wb;h=null}else h=H;else h=H}}return h},MRCA_chains:function(a,b){this.inlined_MRCA_chains(a,b)},inlined_MRCA_chains:function(a,b){this.mrca1.inlined_clear();this.mrca2.inlined_clear();null!=a.cbSet&&this.mrca1.inlined_add(a);null!=a.body.cbSet&&this.mrca1.inlined_add(a.body);null!=b.cbSet&&this.mrca2.inlined_add(b);null!=b.body.cbSet&&
this.mrca2.inlined_add(b.body);for(var c=a.body.compound,e=b.body.compound;c!=e;)(null==c?0:c.depth)<(null==e?0:e.depth)?(null!=e.cbSet&&this.mrca2.inlined_add(e),e=e.compound):(null!=c.cbSet&&this.mrca1.inlined_add(c),c=c.compound)},__class__:zi};var Vd=function(){this.next=this.prev=this.shape=this.aabb=null};h["zpp_nape.space.ZPP_SweepData"]=Vd;Vd.__name__=!0;Vd.prototype={__class__:Vd};var wh=function(a){this.list=null;id.call(this);this.space=a;this.is_sweep=!0;this.sweep=this};h["zpp_nape.space.ZPP_SweepPhase"]=
wh;wh.__name__=!0;wh.__super__=id;wh.prototype=t(id.prototype,{__insert:function(a){var b;null==Vd.zpp_pool?b=new Vd:(b=Vd.zpp_pool,Vd.zpp_pool=b.next,b.next=null);null;a.sweep=b;b.shape=a;b.aabb=a.aabb;b.next=this.list;null!=this.list&&(this.list.prev=b);this.list=b},__remove:function(a){var b=a.sweep;null==b.prev?this.list=b.next:b.prev.next=b.next;null!=b.next&&(b.next.prev=b.prev);a.sweep=null;b.prev=null;b.shape=null;b.aabb=null;b.next=Vd.zpp_pool;Vd.zpp_pool=b},sync_broadphase_fast:function(){for(var a=
this.list.next;null!=a;){var b=a.next,c=a.prev;if(!(a.aabb.minx>c.aabb.minx)){for(;null!=c.prev&&c.prev.aabb.minx>a.aabb.minx;)c=c.prev;var e=a.prev;e.next=a.next;null!=a.next&&(a.next.prev=e);null==c.prev?(a.prev=null,this.list=a,a.next=c,c.prev=a):(a.prev=c.prev,c.prev=a,a.prev.next=a,a.next=c)}a=b}},broadphase:function(a,b){if(null!=this.list){this.sync_broadphase_fast();for(var c=this.list;null!=c;){for(var e=c.next,f=c.shape,g=f.body,h=c.aabb.maxx;null!=e&&!(e.aabb.minx>h);){var j=e.shape,k=
j.body;if(k!=g&&!(g.type==i.id_BodyType_STATIC&&k.type==i.id_BodyType_STATIC)&&(!g.component.sleeping||!k.component.sleeping))f.aabb.intersectY(j.aabb)&&(b?a.narrowPhase(f,j,g.type!=i.id_BodyType_DYNAMIC||k.type!=i.id_BodyType_DYNAMIC,null,!1):a.continuousEvent(f,j,g.type!=i.id_BodyType_DYNAMIC||k.type!=i.id_BodyType_DYNAMIC,null,!1));e=e.next}c=c.next}}},__class__:wh});var oj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_CallbackSet"]=oj;oj.__name__=
!0;oj.prototype={inlined_add:function(a){var b;null==jd.zpp_pool?b=new jd:(b=jd.zpp_pool,jd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=
!0));a=b;a.elt=null;a.next=jd.zpp_pool;jd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:oj};var Ve=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Shape"]=Ve;Ve.__name__=!0;Ve.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==sb.zpp_pool?b=new sb:(b=sb.zpp_pool,sb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},
insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==sb.zpp_pool?c=new sb:(c=sb.zpp_pool,sb.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,
c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=sb.zpp_pool;sb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Ve};var me=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Body"]=me;me.__name__=!0;me.prototype={add:function(a){return this.inlined_add(a)},
inlined_add:function(a){var b;null==Ga.zpp_pool?b=new Ga:(b=Ga.zpp_pool,Ga.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Ga.zpp_pool?c=new Ga:(c=Ga.zpp_pool,Ga.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Ga.zpp_pool;Ga.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,
null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Ga.zpp_pool;Ga.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:me};var xh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Compound"]=xh;xh.__name__=!0;xh.prototype={remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=
null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Ah.zpp_pool;Ah.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:xh};var We=function(){this.length=0;this.modified=
this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Arbiter"]=We;We.__name__=!0;We.prototype={inlined_add:function(a){var b;null==Pc.zpp_pool?b=new Pc:(b=Pc.zpp_pool,Pc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Pc.zpp_pool;Pc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Pc.zpp_pool;Pc.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return c},inlined_has:function(a){var b;b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=!0;break}c=c.next}return b},__class__:We};var lj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_CbSetPair"]=lj;lj.__name__=!0;lj.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==ac.zpp_pool?b=new ac:(b=ac.zpp_pool,ac.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=
!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=ac.zpp_pool;ac.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);
e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=ac.zpp_pool;ac.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:lj};var qj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_AABBPair"]=qj;qj.__name__=!0;qj.prototype={inlined_add:function(a){var b;null==
Qc.zpp_pool?b=new Qc:(b=Qc.zpp_pool,Qc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Qc.zpp_pool;Qc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},
inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Qc.zpp_pool;Qc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:qj};var rj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};
h["zpp_nape.util.ZNPList_ZPP_Edge"]=rj;rj.__name__=!0;rj.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==wb.zpp_pool?b=new wb:(b=wb.zpp_pool,wb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==wb.zpp_pool?c=new wb:(c=wb.zpp_pool,wb.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,
this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=wb.zpp_pool;wb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,
c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=wb.zpp_pool;wb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.head,b=null;null!=a;){var c=a.next;a.next=b;b=this.head=a;a=c}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:rj};var sj=function(){this.length=0;this.modified=
this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Component"]=sj;sj.__name__=!0;sj.prototype={inlined_add:function(a){var b;null==kd.zpp_pool?b=new kd:(b=kd.zpp_pool,kd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=kd.zpp_pool;kd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},__class__:sj};var pk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_InteractionGroup"]=pk;pk.__name__=!0;pk.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:pk};var yh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_ColArbiter"]=yh;yh.__name__=!0;yh.prototype={add:function(a){return this.inlined_add(a)},
inlined_add:function(a){var b;null==Rc.zpp_pool?b=new Rc:(b=Rc.zpp_pool,Rc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,
a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Rc.zpp_pool;Rc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:yh};var vj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_FluidArbiter"]=vj;vj.__name__=!0;vj.prototype={inlined_add:function(a){var b;null==Wd.zpp_pool?b=new Wd:(b=Wd.zpp_pool,Wd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_erase:function(a){var b,
c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Wd.zpp_pool;Wd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:vj};var wj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_SensorArbiter"]=wj;wj.__name__=!0;wj.prototype={inlined_add:function(a){var b;null==$c.zpp_pool?b=new $c:(b=$c.zpp_pool,$c.zpp_pool=b.next,b.next=
null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=$c.zpp_pool;$c.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:wj};var zh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Listener"]=zh;zh.__name__=
!0;zh.prototype={remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,e=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);e=!0;break}b=c;c=c.next}return e},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Bh.zpp_pool;Bh.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=
this.head;0<a--&&null!=b;)b=b.next;return b},__class__:zh};var uj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_ToiEvent"]=uj;uj.__name__=!0;uj.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Jb.zpp_pool?b=new Jb:(b=Jb.zpp_pool,Jb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.head;this.head=a.next;a.elt=null;a.next=Jb.zpp_pool;Jb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=
Jb.zpp_pool;Jb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:uj};var qk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ConvexResult"]=qk;qk.__name__=!0;qk.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:qk};var rk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_GeomPoly"]=rk;rk.__name__=!0;rk.prototype={iterator_at:function(a){for(var b=
this.head;0<a--&&null!=b;)b=b.next;return b},__class__:rk};var sk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_RayResult"]=sk;sk.__name__=!0;sk.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:sk};var eb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_CbType"]=eb;eb.__name__=!0;eb.prototype={__class__:eb};var jd=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_CallbackSet"]=
jd;jd.__name__=!0;jd.prototype={__class__:jd};var sb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Shape"]=sb;sb.__name__=!0;sb.prototype={__class__:sb};var Ga=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Body"]=Ga;Ga.__name__=!0;Ga.prototype={__class__:Ga};var Nc=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Constraint"]=Nc;Nc.__name__=!0;Nc.prototype={__class__:Nc};var Ah=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Compound"]=
Ah;Ah.__name__=!0;Ah.prototype={__class__:Ah};var Pc=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Arbiter"]=Pc;Pc.__name__=!0;Pc.prototype={__class__:Pc};var Hb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_InteractionListener"]=Hb;Hb.__name__=!0;Hb.prototype={__class__:Hb};var Oc=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_CbSet"]=Oc;Oc.__name__=!0;Oc.prototype={__class__:Oc};var Zb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Interactor"]=
Zb;Zb.__name__=!0;Zb.prototype={__class__:Zb};var Ec=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_BodyListener"]=Ec;Ec.__name__=!0;Ec.prototype={__class__:Ec};var ac=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_CbSetPair"]=ac;ac.__name__=!0;ac.prototype={__class__:ac};var Yb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"]=Yb;Yb.__name__=!0;Yb.prototype={__class__:Yb};var Qc=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_AABBPair"]=
Qc;Qc.__name__=!0;Qc.prototype={__class__:Qc};var rb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Vec2"]=rb;rb.__name__=!0;rb.prototype={__class__:rb};var wb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Edge"]=wb;wb.__name__=!0;wb.prototype={__class__:wb};var kd=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Component"]=kd;kd.__name__=!0;kd.prototype={__class__:kd};var tk=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"]=
tk;tk.__name__=!0;tk.prototype={__class__:tk};var Rc=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_ColArbiter"]=Rc;Rc.__name__=!0;Rc.prototype={__class__:Rc};var Wd=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"]=Wd;Wd.__name__=!0;Wd.prototype={__class__:Wd};var $c=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"]=$c;$c.__name__=!0;$c.prototype={__class__:$c};var Bh=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Listener"]=
Bh;Bh.__name__=!0;Bh.prototype={__class__:Bh};var Jb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_ToiEvent"]=Jb;Jb.__name__=!0;Jb.prototype={__class__:Jb};var uk=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ConvexResult"]=uk;uk.__name__=!0;uk.prototype={__class__:uk};var vk=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_GeomPoly"]=vk;vk.__name__=!0;vk.prototype={__class__:vk};var wk=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_RayResult"]=
wk;wk.__name__=!0;wk.prototype={__class__:wk};var Hd=function(){this.at_index=0;this.at_ite=null;this.zip_length=!1;this._length=0;this.inner=null;Nd.call(this);this.at_ite=null;this.at_index=0;this.zip_length=!0;this._length=0};h["zpp_nape.util.ZPP_MixVec2List"]=Hd;Hd.__name__=!0;Hd.get=function(a,b){null==b&&(b=!1);var c=new Hd;c.inner=a;c.zpp_inner.immutable=b;return c};Hd.__super__=Nd;Hd.prototype=t(Nd.prototype,{zpp_gl:function(){this.zpp_vm();if(this.zip_length){this._length=0;for(var a=this.inner.next;null!=
a;)this._length++,a=a.next;this.zip_length=!1}return this._length},zpp_vm:function(){this.zpp_inner.validate();this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.at_index||null==this.at_ite){this.at_index=0;for(this.at_ite=this.inner.next;;)break}for(;this.at_index!=a;){this.at_index++;for(this.at_ite=this.at_ite.next;;)break}return this.at_ite.wrapper()},push:function(a){this.zpp_inner.modify_test();
this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.inner.add(a.zpp_inner):this.inner.insert(this.inner.iterator_at(this.zpp_gl()-1),a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},__class__:Hd});var vc=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=
this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Td;this._invalidated=!0};h["zpp_nape.util.ZPP_ConstraintList"]=vc;vc.__name__=!0;vc.get=function(a,b){null==b&&(b=!1);var c=new pi;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};vc.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=
!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:vc};var Uc=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=
null;this.inner=new me;this._invalidated=!0};h["zpp_nape.util.ZPP_BodyList"]=Uc;Uc.__name__=!0;Uc.get=function(a,b){null==b&&(b=!1);var c=new ui;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Uc.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=
!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Uc};var zf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};h["zpp_nape.util.ZPP_InteractorList"]=zf;zf.__name__=!0;zf.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=
null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:zf};var md=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new xh;this._invalidated=!0};h["zpp_nape.util.ZPP_CompoundList"]=
md;md.__name__=!0;md.get=function(a,b){null==b&&(b=!1);var c=new wi;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};md.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=
!0;null!=this._invalidate&&this._invalidate(this)},__class__:md};var xd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new zh;this._invalidated=!0};h["zpp_nape.util.ZPP_ListenerList"]=xd;xd.__name__=!0;xd.get=function(a,b){null==b&&(b=!1);var c=new ni;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=
!0);c.zpp_inner.zip_length=!0;return c};xd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:xd};var uc=function(){this.user_length=
0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new gd;this._invalidated=!0};h["zpp_nape.util.ZPP_CbTypeList"]=uc;uc.__name__=!0;uc.get=function(a,b){null==b&&(b=!1);var c=new ki;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};uc.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=
null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:uc};var Be=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new kg;this._invalidated=
!0};h["zpp_nape.util.ZPP_Vec2List"]=Be;Be.__name__=!0;Be.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Be};var te=function(){this.user_length=
0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};h["zpp_nape.util.ZPP_GeomPolyList"]=te;te.__name__=!0;te.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:te};
var wf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};h["zpp_nape.util.ZPP_RayResultList"]=wf;wf.__name__=!0;wf.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&
this._validate())},__class__:wf};var vf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};h["zpp_nape.util.ZPP_ConvexResultList"]=vf;vf.__name__=!0;vf.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&
(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:vf};var De=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};h["zpp_nape.util.ZPP_EdgeList"]=De;De.__name__=!0;De.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},
validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:De};var Qd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Ve;this._invalidated=!0};h["zpp_nape.util.ZPP_ShapeList"]=Qd;Qd.__name__=!0;Qd.get=function(a,
b){null==b&&(b=!1);var c=new yi;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Qd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&
this._invalidate(this)},__class__:Qd};var se=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};h["zpp_nape.util.ZPP_InteractionGroupList"]=se;se.__name__=!0;se.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&
(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:se};var yd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new We;this._invalidated=!0};h["zpp_nape.util.ZPP_ArbiterList"]=yd;yd.__name__=!0;yd.get=function(a,b){null==b&&(b=!1);var c=new qi;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;
return c};yd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:yd};var uf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};
h["zpp_nape.util.ZPP_ContactList"]=uf;uf.__name__=!0;uf.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:uf};var Ue=function(){};h["zpp_nape.util.ZPP_Math"]=Ue;Ue.__name__=!0;Ue.sqr=function(a){return a*a};var Ae=function(){};h["zpp_nape.util.ZPP_PubPool"]=
Ae;Ae.__name__=!0;var ga=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};h["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"]=ga;ga.__name__=!0;ga.prototype={clear_with:function(a){if(null!=this.parent){for(var b=this.parent;null!=b;)b=null!=b.prev?b.prev:null!=b.next?b.next:this.clear_node(b,a);this.parent=null}},clear_node:function(a,b){b(a.data);var c=a.parent;null!=c&&(a==c.prev?c.prev=null:c.next=null,a.parent=null);a.data=null;a.lt=null;a.swapped=null;a.next=
ga.zpp_pool;ga.zpp_pool=a;return c},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var e,f,g,h,i,j,k;b==c.prev?(g=c,k=c.next,a==b.prev?(e=a,f=b,h=a.prev,i=a.next,j=b.next):(e=b,f=a,h=b.prev,i=a.prev,j=a.next)):(e=c,h=c.prev,a==b.prev?(f=a,g=b,i=a.prev,j=a.next,k=b.next):(f=b,g=a,i=b.prev,j=a.prev,k=a.next));a=c.parent;null==a?this.parent=f:a.prev==c?a.prev=f:a.next=f;null!=f&&(f.parent=a);e.prev=h;null!=h&&(h.parent=e);e.next=i;null!=i&&(i.parent=e);f.prev=
e;null!=e&&(e.parent=f);f.next=g;null!=g&&(g.parent=f);g.prev=j;null!=j&&(j.parent=g);g.next=k;null!=k&&(k.parent=g);f.colour=c.colour-1;e.colour=1;g.colour=1;if(f==this.parent)this.parent.colour=1;else if(0==f.colour&&0==f.parent.colour){a=f;continue}break}},try_insert:function(a){var b=null,c=null;if(null==this.parent)null==ga.zpp_pool?b=new ga:(b=ga.zpp_pool,ga.zpp_pool=b.next,b.next=null),null,b.data=a,this.parent=b;else for(c=this.parent;;)if(this.lt(a,c.data))if(null==c.prev){null==ga.zpp_pool?
b=new ga:(b=ga.zpp_pool,ga.zpp_pool=b.next,b.next=null);null;b.data=a;c.prev=b;b.parent=c;break}else c=c.prev;else if(this.lt(c.data,a))if(null==c.next){null==ga.zpp_pool?b=new ga:(b=ga.zpp_pool,ga.zpp_pool=b.next,b.next=null);null;b.data=a;c.next=b;b.parent=c;break}else c=c.next;else break;if(null==b)return c;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:ga};var Oa=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=
null};h["zpp_nape.util.ZPP_Set_ZPP_CbSet"]=Oa;Oa.__name__=!0;Oa.prototype={empty:function(){return null==this.parent},find:function(a){for(var b=this.parent;null!=b&&b.data!=a;)b=this.lt(a,b.data)?b.prev:b.next;return b},find_weak:function(a){for(var b=this.parent;null!=b;)if(this.lt(a,b.data))b=b.prev;else if(this.lt(b.data,a))b=b.next;else break;return b},remove:function(a){this.remove_node(this.find(a))},remove_node:function(a){if(null!=a.next&&null!=a.prev){for(var b=a.next;null!=b.prev;)b=b.prev;
var c=a.data;a.data=b.data;b.data=c;null!=this.swapped&&this.swapped(a.data,b.data);a=b}b=null==a.prev?a.next:a.prev;if(1==a.colour)if(null!=a.prev||null!=a.next)b.colour=1;else if(null!=a.parent)for(c=a.parent;;){c.colour++;c.prev.colour--;c.next.colour--;var e=c.prev;if(-1==e.colour){this.__fix_neg_red(e);break}else if(0==e.colour){if(null!=e.prev&&0==e.prev.colour){this.__fix_dbl_red(e.prev);break}if(null!=e.next&&0==e.next.colour){this.__fix_dbl_red(e.next);break}}e=c.next;if(-1==e.colour){this.__fix_neg_red(e);
break}else if(0==e.colour){if(null!=e.prev&&0==e.prev.colour){this.__fix_dbl_red(e.prev);break}if(null!=e.next&&0==e.next.colour){this.__fix_dbl_red(e.next);break}}if(2==c.colour)if(null==c.parent)c.colour=1;else{c=c.parent;continue}break}c=a.parent;null==c?this.parent=b:c.prev==a?c.prev=b:c.next=b;null!=b&&(b.parent=c);a.parent=a.prev=a.next=null;a.data=null;a.lt=null;a.swapped=null;a.next=Oa.zpp_pool;Oa.zpp_pool=a},__fix_neg_red:function(a){var b=a.parent;if(b.prev==a){var c=a.prev,e=a.next,f=e.prev,
g=e.next;c.colour=0;a.colour=b.colour=1;a.next=f;null!=f&&(f.parent=a);a=b.data;b.data=e.data;e.data=a;null!=this.swapped&&this.swapped(b.data,e.data);e.prev=g;null!=g&&(g.parent=e);e.next=b.next;null!=b.next&&(b.next.parent=e);b.next=e}else c=a.next,e=a.prev,f=e.next,g=e.prev,c.colour=0,a.colour=b.colour=1,a.prev=f,null!=f&&(f.parent=a),a=b.data,b.data=e.data,e.data=a,null!=this.swapped&&this.swapped(b.data,e.data),e.next=g,null!=g&&(g.parent=e),e.prev=b.prev,null!=b.prev&&(b.prev.parent=e),b.prev=
e;null!=e&&(e.parent=b);b=c;null!=b.prev&&0==b.prev.colour?this.__fix_dbl_red(b.prev):null!=b.next&&0==b.next.colour&&this.__fix_dbl_red(b.next)},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var e,f,g,h,i,j,k;b==c.prev?(g=c,k=c.next,a==b.prev?(e=a,f=b,h=a.prev,i=a.next,j=b.next):(e=b,f=a,h=b.prev,i=a.prev,j=a.next)):(e=c,h=c.prev,a==b.prev?(f=a,g=b,i=a.prev,j=a.next,k=b.next):(f=b,g=a,i=b.prev,j=a.prev,k=a.next));a=c.parent;null==a?this.parent=f:a.prev==
c?a.prev=f:a.next=f;null!=f&&(f.parent=a);e.prev=h;null!=h&&(h.parent=e);e.next=i;null!=i&&(i.parent=e);f.prev=e;null!=e&&(e.parent=f);f.next=g;null!=g&&(g.parent=f);g.prev=j;null!=j&&(j.parent=g);g.next=k;null!=k&&(k.parent=g);f.colour=c.colour-1;e.colour=1;g.colour=1;if(f==this.parent)this.parent.colour=1;else if(0==f.colour&&0==f.parent.colour){a=f;continue}break}},insert:function(a){var b;null==Oa.zpp_pool?b=new Oa:(b=Oa.zpp_pool,Oa.zpp_pool=b.next,b.next=null);null;b.data=a;if(null==this.parent)this.parent=
b;else for(a=this.parent;;)if(this.lt(b.data,a.data))if(null==a.prev){a.prev=b;b.parent=a;break}else a=a.prev;else if(null==a.next){a.next=b;b.parent=a;break}else a=a.next;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:Oa};var Wk=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;h.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=
h.String=String;String.__name__=!0;h.Array=Array;Array.__name__=!0;Date.prototype.__class__=h.Date=Date;Date.__name__=["Date"];var Xk=h.Int={__name__:["Int"]},Yk=h.Dynamic={__name__:["Dynamic"]},zk=h.Float=Number;zk.__name__=["Float"];var Ak=h.Bool=Boolean;Ak.__ename__=["Bool"];var Zk=h.Class={__name__:["Class"]},$k={};w.Element="element";w.PCData="pcdata";w.CData="cdata";w.Comment="comment";w.DocType="doctype";w.ProcessingInstruction="processingInstruction";w.Document="document";Fc.instance=new Fc;
Ca.DISPATCHING_SENTINEL=new sd(null,null);W.root=new mb;W.uncaughtError=new qa;W.hidden=new qb(!1);W.volume=new Ia(1);W._platform=Fc.instance;W._calledInit=!1;td.__meta__={obj:{assets:[{}]}};td._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();O._scratchPoint=new bf;jb._sharedEvent=new Kh;hb._sharedEvent=new Lh;Ha._sharedEvent=new Mh;$d.CANVAS_TEXTURES=(new bc("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);
ba._mediaRefCount=0;ba._detectBlobSupport=!0;M.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];M.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new bc("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);da._detectSupport=!0;Ob._scratchMatrix=new Bb;za.count=0;E.blanks=new bc("^[ \r\n\t]*$","");ad.escapes=function(){var a=new D;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);q.epsilon=1.0E-8;q.fluidAngularDragFriction=
2.5;q.fluidAngularDrag=100;q.fluidVacuumDrag=0.5;q.fluidLinearDrag=0.5;q.collisionSlop=0.2;q.collisionSlopCCD=0.5;q.distanceThresholdCCD=0.05;q.staticCCDLinearThreshold=0.05;q.staticCCDAngularThreshold=0.005;q.bulletCCDLinearThreshold=0.125;q.bulletCCDAngularThreshold=0.0125;q.dynamicSweepLinearThreshold=17;q.dynamicSweepAngularThreshold=0.6;q.angularCCDSlipScale=0.75;q.arbiterExpirationDelay=6;q.staticFrictionThreshold=2;q.elasticThreshold=20;q.sleepDelay=60;q.linearSleepThreshold=0.2;q.angularSleepThreshold=
0.4;q.contactBiasCoef=0.3;q.contactStaticBiasCoef=0.6;q.contactContinuousBiasCoef=0.4;q.contactContinuousStaticBiasCoef=0.5;q.illConditionedThreshold=2E8;I.blanks=new bc("^[ \r\n\t]*$","");xb._Interactor=0;xb._CbType=0;xb._CbSet=0;na.ANY_SHAPE=new tc;na.ANY_BODY=new tc;na.ANY_COMPOUND=new tc;na.ANY_CONSTRAINT=new tc;i.internal=!1;i.id_ImmState_ACCEPT=1;i.id_ImmState_IGNORE=2;i.id_ImmState_ALWAYS=4;i.id_GravMassMode_DEFAULT=0;i.id_GravMassMode_FIXED=1;i.id_GravMassMode_SCALED=2;i.id_InertiaMode_DEFAULT=
0;i.id_MassMode_DEFAULT=0;i.id_BodyType_STATIC=1;i.id_BodyType_DYNAMIC=2;i.id_BodyType_KINEMATIC=3;i.id_ListenerType_BODY=0;i.id_PreFlag_ACCEPT=1;i.id_ListenerType_CONSTRAINT=1;i.id_ListenerType_INTERACTION=2;i.id_ListenerType_PRE=3;i.id_CbEvent_BEGIN=0;i.id_InteractionType_COLLISION=1;i.id_CbEvent_ONGOING=6;i.id_InteractionType_SENSOR=2;i.id_CbEvent_END=1;i.id_InteractionType_FLUID=4;i.id_CbEvent_WAKE=2;i.id_InteractionType_ANY=7;i.id_CbEvent_SLEEP=3;i.id_CbEvent_BREAK=4;i.id_CbEvent_PRE=5;i.id_ShapeType_CIRCLE=
0;i.id_ShapeType_POLYGON=1;fb.UCbSet=new Ud;fb.VCbSet=new Ud;fb.WCbSet=new Ud;fb.UCbType=new gd;fb.VCbType=new gd;fb.WCbType=new gd;Z.internal=!1;Z.COL=1;Z.FLUID=4;Z.SENSOR=2;Da.internal=!1;G.flowpoly=new kg;G.flowsegs=new kg;var Uk;null==i.BodyType_STATIC&&(i.internal=!0,i.BodyType_STATIC=new Eb,i.internal=!1);Uk=i.BodyType_STATIC;var Vk;null==i.BodyType_DYNAMIC&&(i.internal=!0,i.BodyType_DYNAMIC=new Eb,i.internal=!1);Vk=i.BodyType_DYNAMIC;null==i.BodyType_KINEMATIC&&(i.internal=!0,i.BodyType_KINEMATIC=
new Eb,i.internal=!1);ld.types=[null,Uk,Vk,i.BodyType_KINEMATIC];L.WAKE=1;L.PROPS=2;L.ANGDRAG=4;L.ARBITERS=8;Fa.internal=!1;Ib.tmpaabb=new ia;vc.internal=!1;Uc.internal=!1;zf.internal=!1;md.internal=!1;xd.internal=!1;uc.internal=!1;Be.internal=!1;te.internal=!1;wf.internal=!1;vf.internal=!1;De.internal=!1;Qd.internal=!1;se.internal=!1;yd.internal=!1;uf.internal=!1;Kc.main()})();
